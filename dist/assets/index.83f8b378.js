var $n=(b,t,i)=>{if(!t.has(b))throw TypeError("Cannot "+i)};var Gi=(b,t,i)=>($n(b,t,"read from private field"),i?i.call(b):t.get(b)),oa=(b,t,i)=>{if(t.has(b))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(b):t.set(b,i)},no=(b,t,i,n)=>($n(b,t,"write to private field"),n?n.call(b,i):t.set(b,i),i);var ds=(b,t,i)=>($n(b,t,"access private method"),i);const Sh=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=i(e);fetch(e.href,a)}};Sh();function _r(b,t){const i=Object.create(null),n=b.split(",");for(let e=0;e<n.length;e++)i[n[e]]=!0;return t?e=>!!i[e.toLowerCase()]:e=>!!i[e]}const Dh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ah=_r(Dh);function Rs(b){return!!b||b===""}function Fr(b){if(Gt(b)){const t={};for(let i=0;i<b.length;i++){const n=b[i],e=Qe(n)?Fh(n):Fr(n);if(e)for(const a in e)t[a]=e[a]}return t}else{if(Qe(b))return b;if(ti(b))return b}}const Th=/;(?![^(]*\))/g,_h=/:(.+)/;function Fh(b){const t={};return b.split(Th).forEach(i=>{if(i){const n=i.split(_h);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Mr(b){let t="";if(Qe(b))t=b;else if(Gt(b))for(let i=0;i<b.length;i++){const n=Mr(b[i]);n&&(t+=n+" ")}else if(ti(b))for(const i in b)b[i]&&(t+=i+" ");return t.trim()}const ke={},ka=[],wi=()=>{},Mh=()=>!1,Ph=/^on[^a-z]/,sn=b=>Ph.test(b),Pr=b=>b.startsWith("onUpdate:"),Ye=Object.assign,Ir=(b,t)=>{const i=b.indexOf(t);i>-1&&b.splice(i,1)},Ih=Object.prototype.hasOwnProperty,Jt=(b,t)=>Ih.call(b,t),Gt=Array.isArray,co=b=>cn(b)==="[object Map]",Eh=b=>cn(b)==="[object Set]",Kt=b=>typeof b=="function",Qe=b=>typeof b=="string",Er=b=>typeof b=="symbol",ti=b=>b!==null&&typeof b=="object",Ns=b=>ti(b)&&Kt(b.then)&&Kt(b.catch),Lh=Object.prototype.toString,cn=b=>Lh.call(b),Uh=b=>cn(b).slice(8,-1),zh=b=>cn(b)==="[object Object]",Lr=b=>Qe(b)&&b!=="NaN"&&b[0]!=="-"&&""+parseInt(b,10)===b,Qo=_r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ln=b=>{const t=Object.create(null);return i=>t[i]||(t[i]=b(i))},Bh=/-(\w)/g,Fi=ln(b=>b.replace(Bh,(t,i)=>i?i.toUpperCase():"")),Oh=/\B([A-Z])/g,_a=ln(b=>b.replace(Oh,"-$1").toLowerCase()),dn=ln(b=>b.charAt(0).toUpperCase()+b.slice(1)),tr=ln(b=>b?`on${dn(b)}`:""),uo=(b,t)=>!Object.is(b,t),er=(b,t)=>{for(let i=0;i<b.length;i++)b[i](t)},tn=(b,t,i)=>{Object.defineProperty(b,t,{configurable:!0,enumerable:!1,value:i})},Rh=b=>{const t=parseFloat(b);return isNaN(t)?b:t};let hs;const Nh=()=>hs||(hs=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ti;class Hh{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ti&&(this.parent=Ti,this.index=(Ti.scopes||(Ti.scopes=[])).push(this)-1)}run(t){if(this.active){const i=Ti;try{return Ti=this,t()}finally{Ti=i}}}on(){Ti=this}off(){Ti=this.parent}stop(t){if(this.active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function Vh(b,t=Ti){t&&t.active&&t.effects.push(b)}const Ur=b=>{const t=new Set(b);return t.w=0,t.n=0,t},Hs=b=>(b.w&ta)>0,Vs=b=>(b.n&ta)>0,Wh=({deps:b})=>{if(b.length)for(let t=0;t<b.length;t++)b[t].w|=ta},jh=b=>{const{deps:t}=b;if(t.length){let i=0;for(let n=0;n<t.length;n++){const e=t[n];Hs(e)&&!Vs(e)?e.delete(b):t[i++]=e,e.w&=~ta,e.n&=~ta}t.length=i}},dr=new WeakMap;let ro=0,ta=1;const hr=30;let xi;const ha=Symbol(""),pr=Symbol("");class zr{constructor(t,i=null,n){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Vh(this,n)}run(){if(!this.active)return this.fn();let t=xi,i=Ji;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=xi,xi=this,Ji=!0,ta=1<<++ro,ro<=hr?Wh(this):ps(this),this.fn()}finally{ro<=hr&&jh(this),ta=1<<--ro,xi=this.parent,Ji=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xi===this?this.deferStop=!0:this.active&&(ps(this),this.onStop&&this.onStop(),this.active=!1)}}function ps(b){const{deps:t}=b;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(b);t.length=0}}let Ji=!0;const Ws=[];function Fa(){Ws.push(Ji),Ji=!1}function Ma(){const b=Ws.pop();Ji=b===void 0?!0:b}function si(b,t,i){if(Ji&&xi){let n=dr.get(b);n||dr.set(b,n=new Map);let e=n.get(i);e||n.set(i,e=Ur()),js(e)}}function js(b,t){let i=!1;ro<=hr?Vs(b)||(b.n|=ta,i=!Hs(b)):i=!b.has(xi),i&&(b.add(xi),xi.deps.push(b))}function Oi(b,t,i,n,e,a){const o=dr.get(b);if(!o)return;let r=[];if(t==="clear")r=[...o.values()];else if(i==="length"&&Gt(b))o.forEach((c,l)=>{(l==="length"||l>=n)&&r.push(c)});else switch(i!==void 0&&r.push(o.get(i)),t){case"add":Gt(b)?Lr(i)&&r.push(o.get("length")):(r.push(o.get(ha)),co(b)&&r.push(o.get(pr)));break;case"delete":Gt(b)||(r.push(o.get(ha)),co(b)&&r.push(o.get(pr)));break;case"set":co(b)&&r.push(o.get(ha));break}if(r.length===1)r[0]&&ur(r[0]);else{const c=[];for(const l of r)l&&c.push(...l);ur(Ur(c))}}function ur(b,t){const i=Gt(b)?b:[...b];for(const n of i)n.computed&&us(n);for(const n of i)n.computed||us(n)}function us(b,t){(b!==xi||b.allowRecurse)&&(b.scheduler?b.scheduler():b.run())}const Kh=_r("__proto__,__v_isRef,__isVue"),Ks=new Set(Object.getOwnPropertyNames(Symbol).filter(b=>b!=="arguments"&&b!=="caller").map(b=>Symbol[b]).filter(Er)),Gh=Br(),Yh=Br(!1,!0),Qh=Br(!0),fs=Xh();function Xh(){const b={};return["includes","indexOf","lastIndexOf"].forEach(t=>{b[t]=function(...i){const n=re(this);for(let a=0,o=this.length;a<o;a++)si(n,"get",a+"");const e=n[t](...i);return e===-1||e===!1?n[t](...i.map(re)):e}}),["push","pop","shift","unshift","splice"].forEach(t=>{b[t]=function(...i){Fa();const n=re(this)[t].apply(this,i);return Ma(),n}}),b}function Br(b=!1,t=!1){return function(n,e,a){if(e==="__v_isReactive")return!b;if(e==="__v_isReadonly")return b;if(e==="__v_isShallow")return t;if(e==="__v_raw"&&a===(b?t?pp:Zs:t?Xs:Qs).get(n))return n;const o=Gt(n);if(!b&&o&&Jt(fs,e))return Reflect.get(fs,e,a);const r=Reflect.get(n,e,a);return(Er(e)?Ks.has(e):Kh(e))||(b||si(n,"get",e),t)?r:Ge(r)?o&&Lr(e)?r:r.value:ti(r)?b?Js(r):Nr(r):r}}const Zh=Gs(),Jh=Gs(!0);function Gs(b=!1){return function(i,n,e,a){let o=i[n];if(fo(o)&&Ge(o)&&!Ge(e))return!1;if(!b&&!fo(e)&&(fr(e)||(e=re(e),o=re(o)),!Gt(i)&&Ge(o)&&!Ge(e)))return o.value=e,!0;const r=Gt(i)&&Lr(n)?Number(n)<i.length:Jt(i,n),c=Reflect.set(i,n,e,a);return i===re(a)&&(r?uo(e,o)&&Oi(i,"set",n,e):Oi(i,"add",n,e)),c}}function $h(b,t){const i=Jt(b,t);b[t];const n=Reflect.deleteProperty(b,t);return n&&i&&Oi(b,"delete",t,void 0),n}function tp(b,t){const i=Reflect.has(b,t);return(!Er(t)||!Ks.has(t))&&si(b,"has",t),i}function ep(b){return si(b,"iterate",Gt(b)?"length":ha),Reflect.ownKeys(b)}const Ys={get:Gh,set:Zh,deleteProperty:$h,has:tp,ownKeys:ep},ip={get:Qh,set(b,t){return!0},deleteProperty(b,t){return!0}},ap=Ye({},Ys,{get:Yh,set:Jh}),Or=b=>b,hn=b=>Reflect.getPrototypeOf(b);function Wo(b,t,i=!1,n=!1){b=b.__v_raw;const e=re(b),a=re(t);i||(t!==a&&si(e,"get",t),si(e,"get",a));const{has:o}=hn(e),r=n?Or:i?Vr:go;if(o.call(e,t))return r(b.get(t));if(o.call(e,a))return r(b.get(a));b!==e&&b.get(t)}function jo(b,t=!1){const i=this.__v_raw,n=re(i),e=re(b);return t||(b!==e&&si(n,"has",b),si(n,"has",e)),b===e?i.has(b):i.has(b)||i.has(e)}function Ko(b,t=!1){return b=b.__v_raw,!t&&si(re(b),"iterate",ha),Reflect.get(b,"size",b)}function gs(b){b=re(b);const t=re(this);return hn(t).has.call(t,b)||(t.add(b),Oi(t,"add",b,b)),this}function ms(b,t){t=re(t);const i=re(this),{has:n,get:e}=hn(i);let a=n.call(i,b);a||(b=re(b),a=n.call(i,b));const o=e.call(i,b);return i.set(b,t),a?uo(t,o)&&Oi(i,"set",b,t):Oi(i,"add",b,t),this}function bs(b){const t=re(this),{has:i,get:n}=hn(t);let e=i.call(t,b);e||(b=re(b),e=i.call(t,b)),n&&n.call(t,b);const a=t.delete(b);return e&&Oi(t,"delete",b,void 0),a}function vs(){const b=re(this),t=b.size!==0,i=b.clear();return t&&Oi(b,"clear",void 0,void 0),i}function Go(b,t){return function(n,e){const a=this,o=a.__v_raw,r=re(o),c=t?Or:b?Vr:go;return!b&&si(r,"iterate",ha),o.forEach((l,s)=>n.call(e,c(l),c(s),a))}}function Yo(b,t,i){return function(...n){const e=this.__v_raw,a=re(e),o=co(a),r=b==="entries"||b===Symbol.iterator&&o,c=b==="keys"&&o,l=e[b](...n),s=i?Or:t?Vr:go;return!t&&si(a,"iterate",c?pr:ha),{next(){const{value:d,done:h}=l.next();return h?{value:d,done:h}:{value:r?[s(d[0]),s(d[1])]:s(d),done:h}},[Symbol.iterator](){return this}}}}function Yi(b){return function(...t){return b==="delete"?!1:this}}function op(){const b={get(a){return Wo(this,a)},get size(){return Ko(this)},has:jo,add:gs,set:ms,delete:bs,clear:vs,forEach:Go(!1,!1)},t={get(a){return Wo(this,a,!1,!0)},get size(){return Ko(this)},has:jo,add:gs,set:ms,delete:bs,clear:vs,forEach:Go(!1,!0)},i={get(a){return Wo(this,a,!0)},get size(){return Ko(this,!0)},has(a){return jo.call(this,a,!0)},add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear"),forEach:Go(!0,!1)},n={get(a){return Wo(this,a,!0,!0)},get size(){return Ko(this,!0)},has(a){return jo.call(this,a,!0)},add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear"),forEach:Go(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{b[a]=Yo(a,!1,!1),i[a]=Yo(a,!0,!1),t[a]=Yo(a,!1,!0),n[a]=Yo(a,!0,!0)}),[b,i,t,n]}const[np,rp,sp,cp]=op();function Rr(b,t){const i=t?b?cp:sp:b?rp:np;return(n,e,a)=>e==="__v_isReactive"?!b:e==="__v_isReadonly"?b:e==="__v_raw"?n:Reflect.get(Jt(i,e)&&e in n?i:n,e,a)}const lp={get:Rr(!1,!1)},dp={get:Rr(!1,!0)},hp={get:Rr(!0,!1)},Qs=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,pp=new WeakMap;function up(b){switch(b){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fp(b){return b.__v_skip||!Object.isExtensible(b)?0:up(Uh(b))}function Nr(b){return fo(b)?b:Hr(b,!1,Ys,lp,Qs)}function gp(b){return Hr(b,!1,ap,dp,Xs)}function Js(b){return Hr(b,!0,ip,hp,Zs)}function Hr(b,t,i,n,e){if(!ti(b)||b.__v_raw&&!(t&&b.__v_isReactive))return b;const a=e.get(b);if(a)return a;const o=fp(b);if(o===0)return b;const r=new Proxy(b,o===2?n:i);return e.set(b,r),r}function Ca(b){return fo(b)?Ca(b.__v_raw):!!(b&&b.__v_isReactive)}function fo(b){return!!(b&&b.__v_isReadonly)}function fr(b){return!!(b&&b.__v_isShallow)}function $s(b){return Ca(b)||fo(b)}function re(b){const t=b&&b.__v_raw;return t?re(t):b}function tc(b){return tn(b,"__v_skip",!0),b}const go=b=>ti(b)?Nr(b):b,Vr=b=>ti(b)?Js(b):b;function ec(b){Ji&&xi&&(b=re(b),js(b.dep||(b.dep=Ur())))}function ic(b,t){b=re(b),b.dep&&ur(b.dep)}function Ge(b){return!!(b&&b.__v_isRef===!0)}function mp(b){return bp(b,!1)}function bp(b,t){return Ge(b)?b:new vp(b,t)}class vp{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:re(t),this._value=i?t:go(t)}get value(){return ec(this),this._value}set value(t){t=this.__v_isShallow?t:re(t),uo(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:go(t),ic(this))}}function ac(b){return Ge(b)?b.value:b}const xp={get:(b,t,i)=>ac(Reflect.get(b,t,i)),set:(b,t,i,n)=>{const e=b[t];return Ge(e)&&!Ge(i)?(e.value=i,!0):Reflect.set(b,t,i,n)}};function oc(b){return Ca(b)?b:new Proxy(b,xp)}class yp{constructor(t,i,n,e){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new zr(t,()=>{this._dirty||(this._dirty=!0,ic(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=n}get value(){const t=re(this);return ec(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qp(b,t,i=!1){let n,e;const a=Kt(b);return a?(n=b,e=wi):(n=b.get,e=b.set),new yp(n,e,a||!e,i)}function $i(b,t,i,n){let e;try{e=n?b(...n):b()}catch(a){pn(a,t,i)}return e}function pi(b,t,i,n){if(Kt(b)){const a=$i(b,t,i,n);return a&&Ns(a)&&a.catch(o=>{pn(o,t,i)}),a}const e=[];for(let a=0;a<b.length;a++)e.push(pi(b[a],t,i,n));return e}function pn(b,t,i,n=!0){const e=t?t.vnode:null;if(t){let a=t.parent;const o=t.proxy,r=i;for(;a;){const l=a.ec;if(l){for(let s=0;s<l.length;s++)if(l[s](b,o,r)===!1)return}a=a.parent}const c=t.appContext.config.errorHandler;if(c){$i(c,null,10,[b,o,r]);return}}wp(b,i,e,n)}function wp(b,t,i,n=!0){console.error(b)}let en=!1,gr=!1;const ri=[];let zi=0;const lo=[];let so=null,va=0;const ho=[];let Qi=null,xa=0;const nc=Promise.resolve();let Wr=null,mr=null;function kp(b){const t=Wr||nc;return b?t.then(this?b.bind(this):b):t}function Cp(b){let t=zi+1,i=ri.length;for(;t<i;){const n=t+i>>>1;mo(ri[n])<b?t=n+1:i=n}return t}function rc(b){(!ri.length||!ri.includes(b,en&&b.allowRecurse?zi+1:zi))&&b!==mr&&(b.id==null?ri.push(b):ri.splice(Cp(b.id),0,b),sc())}function sc(){!en&&!gr&&(gr=!0,Wr=nc.then(dc))}function Sp(b){const t=ri.indexOf(b);t>zi&&ri.splice(t,1)}function cc(b,t,i,n){Gt(b)?i.push(...b):(!t||!t.includes(b,b.allowRecurse?n+1:n))&&i.push(b),sc()}function Dp(b){cc(b,so,lo,va)}function Ap(b){cc(b,Qi,ho,xa)}function un(b,t=null){if(lo.length){for(mr=t,so=[...new Set(lo)],lo.length=0,va=0;va<so.length;va++)so[va]();so=null,va=0,mr=null,un(b,t)}}function lc(b){if(un(),ho.length){const t=[...new Set(ho)];if(ho.length=0,Qi){Qi.push(...t);return}for(Qi=t,Qi.sort((i,n)=>mo(i)-mo(n)),xa=0;xa<Qi.length;xa++)Qi[xa]();Qi=null,xa=0}}const mo=b=>b.id==null?1/0:b.id;function dc(b){gr=!1,en=!0,un(b),ri.sort((i,n)=>mo(i)-mo(n));const t=wi;try{for(zi=0;zi<ri.length;zi++){const i=ri[zi];i&&i.active!==!1&&$i(i,null,14)}}finally{zi=0,ri.length=0,lc(),en=!1,Wr=null,(ri.length||lo.length||ho.length)&&dc(b)}}function Tp(b,t,...i){if(b.isUnmounted)return;const n=b.vnode.props||ke;let e=i;const a=t.startsWith("update:"),o=a&&t.slice(7);if(o&&o in n){const s=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=n[s]||ke;h&&(e=i.map(p=>p.trim())),d&&(e=i.map(Rh))}let r,c=n[r=tr(t)]||n[r=tr(Fi(t))];!c&&a&&(c=n[r=tr(_a(t))]),c&&pi(c,b,6,e);const l=n[r+"Once"];if(l){if(!b.emitted)b.emitted={};else if(b.emitted[r])return;b.emitted[r]=!0,pi(l,b,6,e)}}function hc(b,t,i=!1){const n=t.emitsCache,e=n.get(b);if(e!==void 0)return e;const a=b.emits;let o={},r=!1;if(!Kt(b)){const c=l=>{const s=hc(l,t,!0);s&&(r=!0,Ye(o,s))};!i&&t.mixins.length&&t.mixins.forEach(c),b.extends&&c(b.extends),b.mixins&&b.mixins.forEach(c)}return!a&&!r?(n.set(b,null),null):(Gt(a)?a.forEach(c=>o[c]=null):Ye(o,a),n.set(b,o),o)}function fn(b,t){return!b||!sn(t)?!1:(t=t.slice(2).replace(/Once$/,""),Jt(b,t[0].toLowerCase()+t.slice(1))||Jt(b,_a(t))||Jt(b,t))}let yi=null,gn=null;function an(b){const t=yi;return yi=b,gn=b&&b.type.__scopeId||null,t}function pc(b){gn=b}function uc(){gn=null}function br(b,t=yi,i){if(!t||b._n)return b;const n=(...e)=>{n._d&&_s(-1);const a=an(t),o=b(...e);return an(a),n._d&&_s(1),o};return n._n=!0,n._c=!0,n._d=!0,n}function ir(b){const{type:t,vnode:i,proxy:n,withProxy:e,props:a,propsOptions:[o],slots:r,attrs:c,emit:l,render:s,renderCache:d,data:h,setupState:p,ctx:u,inheritAttrs:g}=b;let f,w;const v=an(b);try{if(i.shapeFlag&4){const q=e||n;f=_i(s.call(q,q,d,a,p,h,u)),w=c}else{const q=t;f=_i(q.length>1?q(a,{attrs:c,slots:r,emit:l}):q(a,null)),w=t.props?c:_p(c)}}catch(q){po.length=0,pn(q,b,1),f=ui(Bi)}let m=f;if(w&&g!==!1){const q=Object.keys(w),{shapeFlag:x}=m;q.length&&x&7&&(o&&q.some(Pr)&&(w=Fp(w,o)),m=ea(m,w))}return i.dirs&&(m=ea(m),m.dirs=m.dirs?m.dirs.concat(i.dirs):i.dirs),i.transition&&(m.transition=i.transition),f=m,an(v),f}const _p=b=>{let t;for(const i in b)(i==="class"||i==="style"||sn(i))&&((t||(t={}))[i]=b[i]);return t},Fp=(b,t)=>{const i={};for(const n in b)(!Pr(n)||!(n.slice(9)in t))&&(i[n]=b[n]);return i};function Mp(b,t,i){const{props:n,children:e,component:a}=b,{props:o,children:r,patchFlag:c}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&c>=0){if(c&1024)return!0;if(c&16)return n?xs(n,o,l):!!o;if(c&8){const s=t.dynamicProps;for(let d=0;d<s.length;d++){const h=s[d];if(o[h]!==n[h]&&!fn(l,h))return!0}}}else return(e||r)&&(!r||!r.$stable)?!0:n===o?!1:n?o?xs(n,o,l):!0:!!o;return!1}function xs(b,t,i){const n=Object.keys(t);if(n.length!==Object.keys(b).length)return!0;for(let e=0;e<n.length;e++){const a=n[e];if(t[a]!==b[a]&&!fn(i,a))return!0}return!1}function Pp({vnode:b,parent:t},i){for(;t&&t.subTree===b;)(b=t.vnode).el=i,t=t.parent}const Ip=b=>b.__isSuspense;function Ep(b,t){t&&t.pendingBranch?Gt(b)?t.effects.push(...b):t.effects.push(b):Ap(b)}function Lp(b,t){if(He){let i=He.provides;const n=He.parent&&He.parent.provides;n===i&&(i=He.provides=Object.create(n)),i[b]=t}}function ar(b,t,i=!1){const n=He||yi;if(n){const e=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(e&&b in e)return e[b];if(arguments.length>1)return i&&Kt(t)?t.call(n.proxy):t}}const ys={};function or(b,t,i){return fc(b,t,i)}function fc(b,t,{immediate:i,deep:n,flush:e,onTrack:a,onTrigger:o}=ke){const r=He;let c,l=!1,s=!1;if(Ge(b)?(c=()=>b.value,l=fr(b)):Ca(b)?(c=()=>b,n=!0):Gt(b)?(s=!0,l=b.some(w=>Ca(w)||fr(w)),c=()=>b.map(w=>{if(Ge(w))return w.value;if(Ca(w))return qa(w);if(Kt(w))return $i(w,r,2)})):Kt(b)?t?c=()=>$i(b,r,2):c=()=>{if(!(r&&r.isUnmounted))return d&&d(),pi(b,r,3,[h])}:c=wi,t&&n){const w=c;c=()=>qa(w())}let d,h=w=>{d=f.onStop=()=>{$i(w,r,4)}};if(vo)return h=wi,t?i&&pi(t,r,3,[c(),s?[]:void 0,h]):c(),wi;let p=s?[]:ys;const u=()=>{if(!!f.active)if(t){const w=f.run();(n||l||(s?w.some((v,m)=>uo(v,p[m])):uo(w,p)))&&(d&&d(),pi(t,r,3,[w,p===ys?void 0:p,h]),p=w)}else f.run()};u.allowRecurse=!!t;let g;e==="sync"?g=u:e==="post"?g=()=>ai(u,r&&r.suspense):g=()=>Dp(u);const f=new zr(c,g);return t?i?u():p=f.run():e==="post"?ai(f.run.bind(f),r&&r.suspense):f.run(),()=>{f.stop(),r&&r.scope&&Ir(r.scope.effects,f)}}function Up(b,t,i){const n=this.proxy,e=Qe(b)?b.includes(".")?gc(n,b):()=>n[b]:b.bind(n,n);let a;Kt(t)?a=t:(a=t.handler,i=t);const o=He;Ta(this);const r=fc(e,a.bind(n),i);return o?Ta(o):ua(),r}function gc(b,t){const i=t.split(".");return()=>{let n=b;for(let e=0;e<i.length&&n;e++)n=n[i[e]];return n}}function qa(b,t){if(!ti(b)||b.__v_skip||(t=t||new Set,t.has(b)))return b;if(t.add(b),Ge(b))qa(b.value,t);else if(Gt(b))for(let i=0;i<b.length;i++)qa(b[i],t);else if(Eh(b)||co(b))b.forEach(i=>{qa(i,t)});else if(zh(b))for(const i in b)qa(b[i],t);return b}function zp(){const b={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kr(()=>{b.isMounted=!0}),xc(()=>{b.isUnmounting=!0}),b}const hi=[Function,Array],Bp={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hi,onEnter:hi,onAfterEnter:hi,onEnterCancelled:hi,onBeforeLeave:hi,onLeave:hi,onAfterLeave:hi,onLeaveCancelled:hi,onBeforeAppear:hi,onAppear:hi,onAfterAppear:hi,onAppearCancelled:hi},setup(b,{slots:t}){const i=Su(),n=zp();let e;return()=>{const a=t.default&&bc(t.default(),!0);if(!a||!a.length)return;let o=a[0];if(a.length>1){for(const g of a)if(g.type!==Bi){o=g;break}}const r=re(b),{mode:c}=r;if(n.isLeaving)return nr(o);const l=qs(o);if(!l)return nr(o);const s=vr(l,r,n,i);xr(l,s);const d=i.subTree,h=d&&qs(d);let p=!1;const{getTransitionKey:u}=l.type;if(u){const g=u();e===void 0?e=g:g!==e&&(e=g,p=!0)}if(h&&h.type!==Bi&&(!ca(l,h)||p)){const g=vr(h,r,n,i);if(xr(h,g),c==="out-in")return n.isLeaving=!0,g.afterLeave=()=>{n.isLeaving=!1,i.update()},nr(o);c==="in-out"&&l.type!==Bi&&(g.delayLeave=(f,w,v)=>{const m=mc(n,h);m[String(h.key)]=h,f._leaveCb=()=>{w(),f._leaveCb=void 0,delete s.delayedLeave},s.delayedLeave=v})}return o}}},Op=Bp;function mc(b,t){const{leavingVNodes:i}=b;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function vr(b,t,i,n){const{appear:e,mode:a,persisted:o=!1,onBeforeEnter:r,onEnter:c,onAfterEnter:l,onEnterCancelled:s,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:u,onBeforeAppear:g,onAppear:f,onAfterAppear:w,onAppearCancelled:v}=t,m=String(b.key),q=mc(i,b),x=(S,A)=>{S&&pi(S,n,9,A)},y=(S,A)=>{const _=A[1];x(S,A),Gt(S)?S.every(T=>T.length<=1)&&_():S.length<=1&&_()},k={mode:a,persisted:o,beforeEnter(S){let A=r;if(!i.isMounted)if(e)A=g||r;else return;S._leaveCb&&S._leaveCb(!0);const _=q[m];_&&ca(b,_)&&_.el._leaveCb&&_.el._leaveCb(),x(A,[S])},enter(S){let A=c,_=l,T=s;if(!i.isMounted)if(e)A=f||c,_=w||l,T=v||s;else return;let P=!1;const E=S._enterCb=z=>{P||(P=!0,z?x(T,[S]):x(_,[S]),k.delayedLeave&&k.delayedLeave(),S._enterCb=void 0)};A?y(A,[S,E]):E()},leave(S,A){const _=String(b.key);if(S._enterCb&&S._enterCb(!0),i.isUnmounting)return A();x(d,[S]);let T=!1;const P=S._leaveCb=E=>{T||(T=!0,A(),E?x(u,[S]):x(p,[S]),S._leaveCb=void 0,q[_]===b&&delete q[_])};q[_]=b,h?y(h,[S,P]):P()},clone(S){return vr(S,t,i,n)}};return k}function nr(b){if(mn(b))return b=ea(b),b.children=null,b}function qs(b){return mn(b)?b.children?b.children[0]:void 0:b}function xr(b,t){b.shapeFlag&6&&b.component?xr(b.component.subTree,t):b.shapeFlag&128?(b.ssContent.transition=t.clone(b.ssContent),b.ssFallback.transition=t.clone(b.ssFallback)):b.transition=t}function bc(b,t=!1,i){let n=[],e=0;for(let a=0;a<b.length;a++){let o=b[a];const r=i==null?o.key:String(i)+String(o.key!=null?o.key:a);o.type===vi?(o.patchFlag&128&&e++,n=n.concat(bc(o.children,t,r))):(t||o.type!==Bi)&&n.push(r!=null?ea(o,{key:r}):o)}if(e>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function jr(b){return Kt(b)?{setup:b,name:b.name}:b}const Xo=b=>!!b.type.__asyncLoader,mn=b=>b.type.__isKeepAlive;function Rp(b,t){vc(b,"a",t)}function Np(b,t){vc(b,"da",t)}function vc(b,t,i=He){const n=b.__wdc||(b.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return b()});if(bn(t,n,i),i){let e=i.parent;for(;e&&e.parent;)mn(e.parent.vnode)&&Hp(n,t,i,e),e=e.parent}}function Hp(b,t,i,n){const e=bn(t,b,n,!0);yc(()=>{Ir(n[t],e)},i)}function bn(b,t,i=He,n=!1){if(i){const e=i[b]||(i[b]=[]),a=t.__weh||(t.__weh=(...o)=>{if(i.isUnmounted)return;Fa(),Ta(i);const r=pi(t,i,b,o);return ua(),Ma(),r});return n?e.unshift(a):e.push(a),a}}const Ri=b=>(t,i=He)=>(!vo||b==="sp")&&bn(b,t,i),Vp=Ri("bm"),Kr=Ri("m"),Wp=Ri("bu"),jp=Ri("u"),xc=Ri("bum"),yc=Ri("um"),Kp=Ri("sp"),Gp=Ri("rtg"),Yp=Ri("rtc");function Qp(b,t=He){bn("ec",b,t)}function na(b,t,i,n){const e=b.dirs,a=t&&t.dirs;for(let o=0;o<e.length;o++){const r=e[o];a&&(r.oldValue=a[o].value);let c=r.dir[n];c&&(Fa(),pi(c,i,8,[b.el,r,b,t]),Ma())}}const qc="components";function rr(b,t){return Zp(qc,b,!0,t)||b}const Xp=Symbol();function Zp(b,t,i=!0,n=!1){const e=yi||He;if(e){const a=e.type;if(b===qc){const r=Fu(a,!1);if(r&&(r===t||r===Fi(t)||r===dn(Fi(t))))return a}const o=ws(e[b]||a[b],t)||ws(e.appContext[b],t);return!o&&n?a:o}}function ws(b,t){return b&&(b[t]||b[Fi(t)]||b[dn(Fi(t))])}const yr=b=>b?Ec(b)?Zr(b)||b.proxy:yr(b.parent):null,on=Ye(Object.create(null),{$:b=>b,$el:b=>b.vnode.el,$data:b=>b.data,$props:b=>b.props,$attrs:b=>b.attrs,$slots:b=>b.slots,$refs:b=>b.refs,$parent:b=>yr(b.parent),$root:b=>yr(b.root),$emit:b=>b.emit,$options:b=>kc(b),$forceUpdate:b=>b.f||(b.f=()=>rc(b.update)),$nextTick:b=>b.n||(b.n=kp.bind(b.proxy)),$watch:b=>Up.bind(b)}),Jp={get({_:b},t){const{ctx:i,setupState:n,data:e,props:a,accessCache:o,type:r,appContext:c}=b;let l;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return n[t];case 2:return e[t];case 4:return i[t];case 3:return a[t]}else{if(n!==ke&&Jt(n,t))return o[t]=1,n[t];if(e!==ke&&Jt(e,t))return o[t]=2,e[t];if((l=b.propsOptions[0])&&Jt(l,t))return o[t]=3,a[t];if(i!==ke&&Jt(i,t))return o[t]=4,i[t];qr&&(o[t]=0)}}const s=on[t];let d,h;if(s)return t==="$attrs"&&si(b,"get",t),s(b);if((d=r.__cssModules)&&(d=d[t]))return d;if(i!==ke&&Jt(i,t))return o[t]=4,i[t];if(h=c.config.globalProperties,Jt(h,t))return h[t]},set({_:b},t,i){const{data:n,setupState:e,ctx:a}=b;return e!==ke&&Jt(e,t)?(e[t]=i,!0):n!==ke&&Jt(n,t)?(n[t]=i,!0):Jt(b.props,t)||t[0]==="$"&&t.slice(1)in b?!1:(a[t]=i,!0)},has({_:{data:b,setupState:t,accessCache:i,ctx:n,appContext:e,propsOptions:a}},o){let r;return!!i[o]||b!==ke&&Jt(b,o)||t!==ke&&Jt(t,o)||(r=a[0])&&Jt(r,o)||Jt(n,o)||Jt(on,o)||Jt(e.config.globalProperties,o)},defineProperty(b,t,i){return i.get!=null?b._.accessCache[t]=0:Jt(i,"value")&&this.set(b,t,i.value,null),Reflect.defineProperty(b,t,i)}};let qr=!0;function $p(b){const t=kc(b),i=b.proxy,n=b.ctx;qr=!1,t.beforeCreate&&ks(t.beforeCreate,b,"bc");const{data:e,computed:a,methods:o,watch:r,provide:c,inject:l,created:s,beforeMount:d,mounted:h,beforeUpdate:p,updated:u,activated:g,deactivated:f,beforeDestroy:w,beforeUnmount:v,destroyed:m,unmounted:q,render:x,renderTracked:y,renderTriggered:k,errorCaptured:S,serverPrefetch:A,expose:_,inheritAttrs:T,components:P,directives:E,filters:z}=t;if(l&&tu(l,n,null,b.appContext.config.unwrapInjectedRef),o)for(const C in o){const D=o[C];Kt(D)&&(n[C]=D.bind(i))}if(e){const C=e.call(i,i);ti(C)&&(b.data=Nr(C))}if(qr=!0,a)for(const C in a){const D=a[C],F=Kt(D)?D.bind(i,i):Kt(D.get)?D.get.bind(i,i):wi,M=!Kt(D)&&Kt(D.set)?D.set.bind(i):wi,I=Pu({get:F,set:M});Object.defineProperty(n,C,{enumerable:!0,configurable:!0,get:()=>I.value,set:L=>I.value=L})}if(r)for(const C in r)wc(r[C],n,i,C);if(c){const C=Kt(c)?c.call(i):c;Reflect.ownKeys(C).forEach(D=>{Lp(D,C[D])})}s&&ks(s,b,"c");function N(C,D){Gt(D)?D.forEach(F=>C(F.bind(i))):D&&C(D.bind(i))}if(N(Vp,d),N(Kr,h),N(Wp,p),N(jp,u),N(Rp,g),N(Np,f),N(Qp,S),N(Yp,y),N(Gp,k),N(xc,v),N(yc,q),N(Kp,A),Gt(_))if(_.length){const C=b.exposed||(b.exposed={});_.forEach(D=>{Object.defineProperty(C,D,{get:()=>i[D],set:F=>i[D]=F})})}else b.exposed||(b.exposed={});x&&b.render===wi&&(b.render=x),T!=null&&(b.inheritAttrs=T),P&&(b.components=P),E&&(b.directives=E)}function tu(b,t,i=wi,n=!1){Gt(b)&&(b=wr(b));for(const e in b){const a=b[e];let o;ti(a)?"default"in a?o=ar(a.from||e,a.default,!0):o=ar(a.from||e):o=ar(a),Ge(o)&&n?Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[e]=o}}function ks(b,t,i){pi(Gt(b)?b.map(n=>n.bind(t.proxy)):b.bind(t.proxy),t,i)}function wc(b,t,i,n){const e=n.includes(".")?gc(i,n):()=>i[n];if(Qe(b)){const a=t[b];Kt(a)&&or(e,a)}else if(Kt(b))or(e,b.bind(i));else if(ti(b))if(Gt(b))b.forEach(a=>wc(a,t,i,n));else{const a=Kt(b.handler)?b.handler.bind(i):t[b.handler];Kt(a)&&or(e,a,b)}}function kc(b){const t=b.type,{mixins:i,extends:n}=t,{mixins:e,optionsCache:a,config:{optionMergeStrategies:o}}=b.appContext,r=a.get(t);let c;return r?c=r:!e.length&&!i&&!n?c=t:(c={},e.length&&e.forEach(l=>nn(c,l,o,!0)),nn(c,t,o)),a.set(t,c),c}function nn(b,t,i,n=!1){const{mixins:e,extends:a}=t;a&&nn(b,a,i,!0),e&&e.forEach(o=>nn(b,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const r=eu[o]||i&&i[o];b[o]=r?r(b[o],t[o]):t[o]}return b}const eu={data:Cs,props:sa,emits:sa,methods:sa,computed:sa,beforeCreate:$e,created:$e,beforeMount:$e,mounted:$e,beforeUpdate:$e,updated:$e,beforeDestroy:$e,beforeUnmount:$e,destroyed:$e,unmounted:$e,activated:$e,deactivated:$e,errorCaptured:$e,serverPrefetch:$e,components:sa,directives:sa,watch:au,provide:Cs,inject:iu};function Cs(b,t){return t?b?function(){return Ye(Kt(b)?b.call(this,this):b,Kt(t)?t.call(this,this):t)}:t:b}function iu(b,t){return sa(wr(b),wr(t))}function wr(b){if(Gt(b)){const t={};for(let i=0;i<b.length;i++)t[b[i]]=b[i];return t}return b}function $e(b,t){return b?[...new Set([].concat(b,t))]:t}function sa(b,t){return b?Ye(Ye(Object.create(null),b),t):t}function au(b,t){if(!b)return t;if(!t)return b;const i=Ye(Object.create(null),b);for(const n in t)i[n]=$e(b[n],t[n]);return i}function ou(b,t,i,n=!1){const e={},a={};tn(a,vn,1),b.propsDefaults=Object.create(null),Cc(b,t,e,a);for(const o in b.propsOptions[0])o in e||(e[o]=void 0);i?b.props=n?e:gp(e):b.type.props?b.props=e:b.props=a,b.attrs=a}function nu(b,t,i,n){const{props:e,attrs:a,vnode:{patchFlag:o}}=b,r=re(e),[c]=b.propsOptions;let l=!1;if((n||o>0)&&!(o&16)){if(o&8){const s=b.vnode.dynamicProps;for(let d=0;d<s.length;d++){let h=s[d];if(fn(b.emitsOptions,h))continue;const p=t[h];if(c)if(Jt(a,h))p!==a[h]&&(a[h]=p,l=!0);else{const u=Fi(h);e[u]=kr(c,r,u,p,b,!1)}else p!==a[h]&&(a[h]=p,l=!0)}}}else{Cc(b,t,e,a)&&(l=!0);let s;for(const d in r)(!t||!Jt(t,d)&&((s=_a(d))===d||!Jt(t,s)))&&(c?i&&(i[d]!==void 0||i[s]!==void 0)&&(e[d]=kr(c,r,d,void 0,b,!0)):delete e[d]);if(a!==r)for(const d in a)(!t||!Jt(t,d)&&!0)&&(delete a[d],l=!0)}l&&Oi(b,"set","$attrs")}function Cc(b,t,i,n){const[e,a]=b.propsOptions;let o=!1,r;if(t)for(let c in t){if(Qo(c))continue;const l=t[c];let s;e&&Jt(e,s=Fi(c))?!a||!a.includes(s)?i[s]=l:(r||(r={}))[s]=l:fn(b.emitsOptions,c)||(!(c in n)||l!==n[c])&&(n[c]=l,o=!0)}if(a){const c=re(i),l=r||ke;for(let s=0;s<a.length;s++){const d=a[s];i[d]=kr(e,c,d,l[d],b,!Jt(l,d))}}return o}function kr(b,t,i,n,e,a){const o=b[i];if(o!=null){const r=Jt(o,"default");if(r&&n===void 0){const c=o.default;if(o.type!==Function&&Kt(c)){const{propsDefaults:l}=e;i in l?n=l[i]:(Ta(e),n=l[i]=c.call(null,t),ua())}else n=c}o[0]&&(a&&!r?n=!1:o[1]&&(n===""||n===_a(i))&&(n=!0))}return n}function Sc(b,t,i=!1){const n=t.propsCache,e=n.get(b);if(e)return e;const a=b.props,o={},r=[];let c=!1;if(!Kt(b)){const s=d=>{c=!0;const[h,p]=Sc(d,t,!0);Ye(o,h),p&&r.push(...p)};!i&&t.mixins.length&&t.mixins.forEach(s),b.extends&&s(b.extends),b.mixins&&b.mixins.forEach(s)}if(!a&&!c)return n.set(b,ka),ka;if(Gt(a))for(let s=0;s<a.length;s++){const d=Fi(a[s]);Ss(d)&&(o[d]=ke)}else if(a)for(const s in a){const d=Fi(s);if(Ss(d)){const h=a[s],p=o[d]=Gt(h)||Kt(h)?{type:h}:h;if(p){const u=Ts(Boolean,p.type),g=Ts(String,p.type);p[0]=u>-1,p[1]=g<0||u<g,(u>-1||Jt(p,"default"))&&r.push(d)}}}const l=[o,r];return n.set(b,l),l}function Ss(b){return b[0]!=="$"}function Ds(b){const t=b&&b.toString().match(/^\s*function (\w+)/);return t?t[1]:b===null?"null":""}function As(b,t){return Ds(b)===Ds(t)}function Ts(b,t){return Gt(t)?t.findIndex(i=>As(i,b)):Kt(t)&&As(t,b)?0:-1}const Dc=b=>b[0]==="_"||b==="$stable",Gr=b=>Gt(b)?b.map(_i):[_i(b)],ru=(b,t,i)=>{if(t._n)return t;const n=br((...e)=>Gr(t(...e)),i);return n._c=!1,n},Ac=(b,t,i)=>{const n=b._ctx;for(const e in b){if(Dc(e))continue;const a=b[e];if(Kt(a))t[e]=ru(e,a,n);else if(a!=null){const o=Gr(a);t[e]=()=>o}}},Tc=(b,t)=>{const i=Gr(t);b.slots.default=()=>i},su=(b,t)=>{if(b.vnode.shapeFlag&32){const i=t._;i?(b.slots=re(t),tn(t,"_",i)):Ac(t,b.slots={})}else b.slots={},t&&Tc(b,t);tn(b.slots,vn,1)},cu=(b,t,i)=>{const{vnode:n,slots:e}=b;let a=!0,o=ke;if(n.shapeFlag&32){const r=t._;r?i&&r===1?a=!1:(Ye(e,t),!i&&r===1&&delete e._):(a=!t.$stable,Ac(t,e)),o=t}else t&&(Tc(b,t),o={default:1});if(a)for(const r in e)!Dc(r)&&!(r in o)&&delete e[r]};function _c(){return{app:null,config:{isNativeTag:Mh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lu=0;function du(b,t){return function(n,e=null){Kt(n)||(n=Object.assign({},n)),e!=null&&!ti(e)&&(e=null);const a=_c(),o=new Set;let r=!1;const c=a.app={_uid:lu++,_component:n,_props:e,_container:null,_context:a,_instance:null,version:Iu,get config(){return a.config},set config(l){},use(l,...s){return o.has(l)||(l&&Kt(l.install)?(o.add(l),l.install(c,...s)):Kt(l)&&(o.add(l),l(c,...s))),c},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),c},component(l,s){return s?(a.components[l]=s,c):a.components[l]},directive(l,s){return s?(a.directives[l]=s,c):a.directives[l]},mount(l,s,d){if(!r){const h=ui(n,e);return h.appContext=a,s&&t?t(h,l):b(h,l,d),r=!0,c._container=l,l.__vue_app__=c,Zr(h.component)||h.component.proxy}},unmount(){r&&(b(null,c._container),delete c._container.__vue_app__)},provide(l,s){return a.provides[l]=s,c}};return c}}function Cr(b,t,i,n,e=!1){if(Gt(b)){b.forEach((h,p)=>Cr(h,t&&(Gt(t)?t[p]:t),i,n,e));return}if(Xo(n)&&!e)return;const a=n.shapeFlag&4?Zr(n.component)||n.component.proxy:n.el,o=e?null:a,{i:r,r:c}=b,l=t&&t.r,s=r.refs===ke?r.refs={}:r.refs,d=r.setupState;if(l!=null&&l!==c&&(Qe(l)?(s[l]=null,Jt(d,l)&&(d[l]=null)):Ge(l)&&(l.value=null)),Kt(c))$i(c,r,12,[o,s]);else{const h=Qe(c),p=Ge(c);if(h||p){const u=()=>{if(b.f){const g=h?s[c]:c.value;e?Gt(g)&&Ir(g,a):Gt(g)?g.includes(a)||g.push(a):h?(s[c]=[a],Jt(d,c)&&(d[c]=s[c])):(c.value=[a],b.k&&(s[b.k]=c.value))}else h?(s[c]=o,Jt(d,c)&&(d[c]=o)):p&&(c.value=o,b.k&&(s[b.k]=o))};o?(u.id=-1,ai(u,i)):u()}}}const ai=Ep;function hu(b){return pu(b)}function pu(b,t){const i=Nh();i.__VUE__=!0;const{insert:n,remove:e,patchProp:a,createElement:o,createText:r,createComment:c,setText:l,setElementText:s,parentNode:d,nextSibling:h,setScopeId:p=wi,cloneNode:u,insertStaticContent:g}=b,f=(V,K,tt,J=null,at=null,ct=null,G=!1,Y=null,it=!!K.dynamicChildren)=>{if(V===K)return;V&&!ca(V,K)&&(J=X(V),O(V,at,ct,!0),V=null),K.patchFlag===-2&&(it=!1,K.dynamicChildren=null);const{type:rt,ref:lt,shapeFlag:dt}=K;switch(rt){case Yr:w(V,K,tt,J);break;case Bi:v(V,K,tt,J);break;case sr:V==null&&m(K,tt,J,G);break;case vi:E(V,K,tt,J,at,ct,G,Y,it);break;default:dt&1?y(V,K,tt,J,at,ct,G,Y,it):dt&6?z(V,K,tt,J,at,ct,G,Y,it):(dt&64||dt&128)&&rt.process(V,K,tt,J,at,ct,G,Y,it,j)}lt!=null&&at&&Cr(lt,V&&V.ref,ct,K||V,!K)},w=(V,K,tt,J)=>{if(V==null)n(K.el=r(K.children),tt,J);else{const at=K.el=V.el;K.children!==V.children&&l(at,K.children)}},v=(V,K,tt,J)=>{V==null?n(K.el=c(K.children||""),tt,J):K.el=V.el},m=(V,K,tt,J)=>{[V.el,V.anchor]=g(V.children,K,tt,J,V.el,V.anchor)},q=({el:V,anchor:K},tt,J)=>{let at;for(;V&&V!==K;)at=h(V),n(V,tt,J),V=at;n(K,tt,J)},x=({el:V,anchor:K})=>{let tt;for(;V&&V!==K;)tt=h(V),e(V),V=tt;e(K)},y=(V,K,tt,J,at,ct,G,Y,it)=>{G=G||K.type==="svg",V==null?k(K,tt,J,at,ct,G,Y,it):_(V,K,at,ct,G,Y,it)},k=(V,K,tt,J,at,ct,G,Y)=>{let it,rt;const{type:lt,props:dt,shapeFlag:ht,transition:pt,patchFlag:ut,dirs:mt}=V;if(V.el&&u!==void 0&&ut===-1)it=V.el=u(V.el);else{if(it=V.el=o(V.type,ct,dt&&dt.is,dt),ht&8?s(it,V.children):ht&16&&A(V.children,it,null,J,at,ct&&lt!=="foreignObject",G,Y),mt&&na(V,null,J,"created"),dt){for(const bt in dt)bt!=="value"&&!Qo(bt)&&a(it,bt,null,dt[bt],ct,V.children,J,at,W);"value"in dt&&a(it,"value",null,dt.value),(rt=dt.onVnodeBeforeMount)&&Di(rt,J,V)}S(it,V,V.scopeId,G,J)}mt&&na(V,null,J,"beforeMount");const gt=(!at||at&&!at.pendingBranch)&&pt&&!pt.persisted;gt&&pt.beforeEnter(it),n(it,K,tt),((rt=dt&&dt.onVnodeMounted)||gt||mt)&&ai(()=>{rt&&Di(rt,J,V),gt&&pt.enter(it),mt&&na(V,null,J,"mounted")},at)},S=(V,K,tt,J,at)=>{if(tt&&p(V,tt),J)for(let ct=0;ct<J.length;ct++)p(V,J[ct]);if(at){let ct=at.subTree;if(K===ct){const G=at.vnode;S(V,G,G.scopeId,G.slotScopeIds,at.parent)}}},A=(V,K,tt,J,at,ct,G,Y,it=0)=>{for(let rt=it;rt<V.length;rt++){const lt=V[rt]=Y?Zi(V[rt]):_i(V[rt]);f(null,lt,K,tt,J,at,ct,G,Y)}},_=(V,K,tt,J,at,ct,G)=>{const Y=K.el=V.el;let{patchFlag:it,dynamicChildren:rt,dirs:lt}=K;it|=V.patchFlag&16;const dt=V.props||ke,ht=K.props||ke;let pt;tt&&ra(tt,!1),(pt=ht.onVnodeBeforeUpdate)&&Di(pt,tt,K,V),lt&&na(K,V,tt,"beforeUpdate"),tt&&ra(tt,!0);const ut=at&&K.type!=="foreignObject";if(rt?T(V.dynamicChildren,rt,Y,tt,J,ut,ct):G||F(V,K,Y,null,tt,J,ut,ct,!1),it>0){if(it&16)P(Y,K,dt,ht,tt,J,at);else if(it&2&&dt.class!==ht.class&&a(Y,"class",null,ht.class,at),it&4&&a(Y,"style",dt.style,ht.style,at),it&8){const mt=K.dynamicProps;for(let gt=0;gt<mt.length;gt++){const bt=mt[gt],yt=dt[bt],qt=ht[bt];(qt!==yt||bt==="value")&&a(Y,bt,yt,qt,at,V.children,tt,J,W)}}it&1&&V.children!==K.children&&s(Y,K.children)}else!G&&rt==null&&P(Y,K,dt,ht,tt,J,at);((pt=ht.onVnodeUpdated)||lt)&&ai(()=>{pt&&Di(pt,tt,K,V),lt&&na(K,V,tt,"updated")},J)},T=(V,K,tt,J,at,ct,G)=>{for(let Y=0;Y<K.length;Y++){const it=V[Y],rt=K[Y],lt=it.el&&(it.type===vi||!ca(it,rt)||it.shapeFlag&70)?d(it.el):tt;f(it,rt,lt,null,J,at,ct,G,!0)}},P=(V,K,tt,J,at,ct,G)=>{if(tt!==J){for(const Y in J){if(Qo(Y))continue;const it=J[Y],rt=tt[Y];it!==rt&&Y!=="value"&&a(V,Y,rt,it,G,K.children,at,ct,W)}if(tt!==ke)for(const Y in tt)!Qo(Y)&&!(Y in J)&&a(V,Y,tt[Y],null,G,K.children,at,ct,W);"value"in J&&a(V,"value",tt.value,J.value)}},E=(V,K,tt,J,at,ct,G,Y,it)=>{const rt=K.el=V?V.el:r(""),lt=K.anchor=V?V.anchor:r("");let{patchFlag:dt,dynamicChildren:ht,slotScopeIds:pt}=K;pt&&(Y=Y?Y.concat(pt):pt),V==null?(n(rt,tt,J),n(lt,tt,J),A(K.children,tt,lt,at,ct,G,Y,it)):dt>0&&dt&64&&ht&&V.dynamicChildren?(T(V.dynamicChildren,ht,tt,at,ct,G,Y),(K.key!=null||at&&K===at.subTree)&&Fc(V,K,!0)):F(V,K,tt,lt,at,ct,G,Y,it)},z=(V,K,tt,J,at,ct,G,Y,it)=>{K.slotScopeIds=Y,V==null?K.shapeFlag&512?at.ctx.activate(K,tt,J,G,it):U(K,tt,J,at,ct,G,it):N(V,K,it)},U=(V,K,tt,J,at,ct,G)=>{const Y=V.component=Cu(V,J,at);if(mn(V)&&(Y.ctx.renderer=j),Du(Y),Y.asyncDep){if(at&&at.registerDep(Y,C),!V.el){const it=Y.subTree=ui(Bi);v(null,it,K,tt)}return}C(Y,V,K,tt,at,ct,G)},N=(V,K,tt)=>{const J=K.component=V.component;if(Mp(V,K,tt))if(J.asyncDep&&!J.asyncResolved){D(J,K,tt);return}else J.next=K,Sp(J.update),J.update();else K.el=V.el,J.vnode=K},C=(V,K,tt,J,at,ct,G)=>{const Y=()=>{if(V.isMounted){let{next:lt,bu:dt,u:ht,parent:pt,vnode:ut}=V,mt=lt,gt;ra(V,!1),lt?(lt.el=ut.el,D(V,lt,G)):lt=ut,dt&&er(dt),(gt=lt.props&&lt.props.onVnodeBeforeUpdate)&&Di(gt,pt,lt,ut),ra(V,!0);const bt=ir(V),yt=V.subTree;V.subTree=bt,f(yt,bt,d(yt.el),X(yt),V,at,ct),lt.el=bt.el,mt===null&&Pp(V,bt.el),ht&&ai(ht,at),(gt=lt.props&&lt.props.onVnodeUpdated)&&ai(()=>Di(gt,pt,lt,ut),at)}else{let lt;const{el:dt,props:ht}=K,{bm:pt,m:ut,parent:mt}=V,gt=Xo(K);if(ra(V,!1),pt&&er(pt),!gt&&(lt=ht&&ht.onVnodeBeforeMount)&&Di(lt,mt,K),ra(V,!0),dt&&et){const bt=()=>{V.subTree=ir(V),et(dt,V.subTree,V,at,null)};gt?K.type.__asyncLoader().then(()=>!V.isUnmounted&&bt()):bt()}else{const bt=V.subTree=ir(V);f(null,bt,tt,J,V,at,ct),K.el=bt.el}if(ut&&ai(ut,at),!gt&&(lt=ht&&ht.onVnodeMounted)){const bt=K;ai(()=>Di(lt,mt,bt),at)}(K.shapeFlag&256||mt&&Xo(mt.vnode)&&mt.vnode.shapeFlag&256)&&V.a&&ai(V.a,at),V.isMounted=!0,K=tt=J=null}},it=V.effect=new zr(Y,()=>rc(rt),V.scope),rt=V.update=()=>it.run();rt.id=V.uid,ra(V,!0),rt()},D=(V,K,tt)=>{K.component=V;const J=V.vnode.props;V.vnode=K,V.next=null,nu(V,K.props,J,tt),cu(V,K.children,tt),Fa(),un(void 0,V.update),Ma()},F=(V,K,tt,J,at,ct,G,Y,it=!1)=>{const rt=V&&V.children,lt=V?V.shapeFlag:0,dt=K.children,{patchFlag:ht,shapeFlag:pt}=K;if(ht>0){if(ht&128){I(rt,dt,tt,J,at,ct,G,Y,it);return}else if(ht&256){M(rt,dt,tt,J,at,ct,G,Y,it);return}}pt&8?(lt&16&&W(rt,at,ct),dt!==rt&&s(tt,dt)):lt&16?pt&16?I(rt,dt,tt,J,at,ct,G,Y,it):W(rt,at,ct,!0):(lt&8&&s(tt,""),pt&16&&A(dt,tt,J,at,ct,G,Y,it))},M=(V,K,tt,J,at,ct,G,Y,it)=>{V=V||ka,K=K||ka;const rt=V.length,lt=K.length,dt=Math.min(rt,lt);let ht;for(ht=0;ht<dt;ht++){const pt=K[ht]=it?Zi(K[ht]):_i(K[ht]);f(V[ht],pt,tt,null,at,ct,G,Y,it)}rt>lt?W(V,at,ct,!0,!1,dt):A(K,tt,J,at,ct,G,Y,it,dt)},I=(V,K,tt,J,at,ct,G,Y,it)=>{let rt=0;const lt=K.length;let dt=V.length-1,ht=lt-1;for(;rt<=dt&&rt<=ht;){const pt=V[rt],ut=K[rt]=it?Zi(K[rt]):_i(K[rt]);if(ca(pt,ut))f(pt,ut,tt,null,at,ct,G,Y,it);else break;rt++}for(;rt<=dt&&rt<=ht;){const pt=V[dt],ut=K[ht]=it?Zi(K[ht]):_i(K[ht]);if(ca(pt,ut))f(pt,ut,tt,null,at,ct,G,Y,it);else break;dt--,ht--}if(rt>dt){if(rt<=ht){const pt=ht+1,ut=pt<lt?K[pt].el:J;for(;rt<=ht;)f(null,K[rt]=it?Zi(K[rt]):_i(K[rt]),tt,ut,at,ct,G,Y,it),rt++}}else if(rt>ht)for(;rt<=dt;)O(V[rt],at,ct,!0),rt++;else{const pt=rt,ut=rt,mt=new Map;for(rt=ut;rt<=ht;rt++){const Ct=K[rt]=it?Zi(K[rt]):_i(K[rt]);Ct.key!=null&&mt.set(Ct.key,rt)}let gt,bt=0;const yt=ht-ut+1;let qt=!1,St=0;const Tt=new Array(yt);for(rt=0;rt<yt;rt++)Tt[rt]=0;for(rt=pt;rt<=dt;rt++){const Ct=V[rt];if(bt>=yt){O(Ct,at,ct,!0);continue}let Rt;if(Ct.key!=null)Rt=mt.get(Ct.key);else for(gt=ut;gt<=ht;gt++)if(Tt[gt-ut]===0&&ca(Ct,K[gt])){Rt=gt;break}Rt===void 0?O(Ct,at,ct,!0):(Tt[Rt-ut]=rt+1,Rt>=St?St=Rt:qt=!0,f(Ct,K[Rt],tt,null,at,ct,G,Y,it),bt++)}const wt=qt?uu(Tt):ka;for(gt=wt.length-1,rt=yt-1;rt>=0;rt--){const Ct=ut+rt,Rt=K[Ct],Ht=Ct+1<lt?K[Ct+1].el:J;Tt[rt]===0?f(null,Rt,tt,Ht,at,ct,G,Y,it):qt&&(gt<0||rt!==wt[gt]?L(Rt,tt,Ht,2):gt--)}}},L=(V,K,tt,J,at=null)=>{const{el:ct,type:G,transition:Y,children:it,shapeFlag:rt}=V;if(rt&6){L(V.component.subTree,K,tt,J);return}if(rt&128){V.suspense.move(K,tt,J);return}if(rt&64){G.move(V,K,tt,j);return}if(G===vi){n(ct,K,tt);for(let dt=0;dt<it.length;dt++)L(it[dt],K,tt,J);n(V.anchor,K,tt);return}if(G===sr){q(V,K,tt);return}if(J!==2&&rt&1&&Y)if(J===0)Y.beforeEnter(ct),n(ct,K,tt),ai(()=>Y.enter(ct),at);else{const{leave:dt,delayLeave:ht,afterLeave:pt}=Y,ut=()=>n(ct,K,tt),mt=()=>{dt(ct,()=>{ut(),pt&&pt()})};ht?ht(ct,ut,mt):mt()}else n(ct,K,tt)},O=(V,K,tt,J=!1,at=!1)=>{const{type:ct,props:G,ref:Y,children:it,dynamicChildren:rt,shapeFlag:lt,patchFlag:dt,dirs:ht}=V;if(Y!=null&&Cr(Y,null,tt,V,!0),lt&256){K.ctx.deactivate(V);return}const pt=lt&1&&ht,ut=!Xo(V);let mt;if(ut&&(mt=G&&G.onVnodeBeforeUnmount)&&Di(mt,K,V),lt&6)H(V.component,tt,J);else{if(lt&128){V.suspense.unmount(tt,J);return}pt&&na(V,null,K,"beforeUnmount"),lt&64?V.type.remove(V,K,tt,at,j,J):rt&&(ct!==vi||dt>0&&dt&64)?W(rt,K,tt,!1,!0):(ct===vi&&dt&384||!at&&lt&16)&&W(it,K,tt),J&&B(V)}(ut&&(mt=G&&G.onVnodeUnmounted)||pt)&&ai(()=>{mt&&Di(mt,K,V),pt&&na(V,null,K,"unmounted")},tt)},B=V=>{const{type:K,el:tt,anchor:J,transition:at}=V;if(K===vi){R(tt,J);return}if(K===sr){x(V);return}const ct=()=>{e(tt),at&&!at.persisted&&at.afterLeave&&at.afterLeave()};if(V.shapeFlag&1&&at&&!at.persisted){const{leave:G,delayLeave:Y}=at,it=()=>G(tt,ct);Y?Y(V.el,ct,it):it()}else ct()},R=(V,K)=>{let tt;for(;V!==K;)tt=h(V),e(V),V=tt;e(K)},H=(V,K,tt)=>{const{bum:J,scope:at,update:ct,subTree:G,um:Y}=V;J&&er(J),at.stop(),ct&&(ct.active=!1,O(G,V,K,tt)),Y&&ai(Y,K),ai(()=>{V.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},W=(V,K,tt,J=!1,at=!1,ct=0)=>{for(let G=ct;G<V.length;G++)O(V[G],K,tt,J,at)},X=V=>V.shapeFlag&6?X(V.component.subTree):V.shapeFlag&128?V.suspense.next():h(V.anchor||V.el),Z=(V,K,tt)=>{V==null?K._vnode&&O(K._vnode,null,null,!0):f(K._vnode||null,V,K,null,null,null,tt),lc(),K._vnode=V},j={p:f,um:O,m:L,r:B,mt:U,mc:A,pc:F,pbc:T,n:X,o:b};let Q,et;return t&&([Q,et]=t(j)),{render:Z,hydrate:Q,createApp:du(Z,Q)}}function ra({effect:b,update:t},i){b.allowRecurse=t.allowRecurse=i}function Fc(b,t,i=!1){const n=b.children,e=t.children;if(Gt(n)&&Gt(e))for(let a=0;a<n.length;a++){const o=n[a];let r=e[a];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=e[a]=Zi(e[a]),r.el=o.el),i||Fc(o,r))}}function uu(b){const t=b.slice(),i=[0];let n,e,a,o,r;const c=b.length;for(n=0;n<c;n++){const l=b[n];if(l!==0){if(e=i[i.length-1],b[e]<l){t[n]=e,i.push(n);continue}for(a=0,o=i.length-1;a<o;)r=a+o>>1,b[i[r]]<l?a=r+1:o=r;l<b[i[a]]&&(a>0&&(t[n]=i[a-1]),i[a]=n)}}for(a=i.length,o=i[a-1];a-- >0;)i[a]=o,o=t[o];return i}const fu=b=>b.__isTeleport,vi=Symbol(void 0),Yr=Symbol(void 0),Bi=Symbol(void 0),sr=Symbol(void 0),po=[];let qi=null;function Qr(b=!1){po.push(qi=b?null:[])}function gu(){po.pop(),qi=po[po.length-1]||null}let bo=1;function _s(b){bo+=b}function Mc(b){return b.dynamicChildren=bo>0?qi||ka:null,gu(),bo>0&&qi&&qi.push(b),b}function Pc(b,t,i,n,e,a){return Mc(pa(b,t,i,n,e,a,!0))}function mu(b,t,i,n,e){return Mc(ui(b,t,i,n,e,!0))}function bu(b){return b?b.__v_isVNode===!0:!1}function ca(b,t){return b.type===t.type&&b.key===t.key}const vn="__vInternal",Ic=({key:b})=>b!=null?b:null,Zo=({ref:b,ref_key:t,ref_for:i})=>b!=null?Qe(b)||Ge(b)||Kt(b)?{i:yi,r:b,k:t,f:!!i}:b:null;function pa(b,t=null,i=null,n=0,e=null,a=b===vi?0:1,o=!1,r=!1){const c={__v_isVNode:!0,__v_skip:!0,type:b,props:t,key:t&&Ic(t),ref:t&&Zo(t),scopeId:gn,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:e,dynamicChildren:null,appContext:null};return r?(Xr(c,i),a&128&&b.normalize(c)):i&&(c.shapeFlag|=Qe(i)?8:16),bo>0&&!o&&qi&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&qi.push(c),c}const ui=vu;function vu(b,t=null,i=null,n=0,e=null,a=!1){if((!b||b===Xp)&&(b=Bi),bu(b)){const r=ea(b,t,!0);return i&&Xr(r,i),bo>0&&!a&&qi&&(r.shapeFlag&6?qi[qi.indexOf(b)]=r:qi.push(r)),r.patchFlag|=-2,r}if(Mu(b)&&(b=b.__vccOpts),t){t=xu(t);let{class:r,style:c}=t;r&&!Qe(r)&&(t.class=Mr(r)),ti(c)&&($s(c)&&!Gt(c)&&(c=Ye({},c)),t.style=Fr(c))}const o=Qe(b)?1:Ip(b)?128:fu(b)?64:ti(b)?4:Kt(b)?2:0;return pa(b,t,i,n,e,o,a,!0)}function xu(b){return b?$s(b)||vn in b?Ye({},b):b:null}function ea(b,t,i=!1){const{props:n,ref:e,patchFlag:a,children:o}=b,r=t?qu(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:b.type,props:r,key:r&&Ic(r),ref:t&&t.ref?i&&e?Gt(e)?e.concat(Zo(t)):[e,Zo(t)]:Zo(t):e,scopeId:b.scopeId,slotScopeIds:b.slotScopeIds,children:o,target:b.target,targetAnchor:b.targetAnchor,staticCount:b.staticCount,shapeFlag:b.shapeFlag,patchFlag:t&&b.type!==vi?a===-1?16:a|16:a,dynamicProps:b.dynamicProps,dynamicChildren:b.dynamicChildren,appContext:b.appContext,dirs:b.dirs,transition:b.transition,component:b.component,suspense:b.suspense,ssContent:b.ssContent&&ea(b.ssContent),ssFallback:b.ssFallback&&ea(b.ssFallback),el:b.el,anchor:b.anchor}}function yu(b=" ",t=0){return ui(Yr,null,b,t)}function _i(b){return b==null||typeof b=="boolean"?ui(Bi):Gt(b)?ui(vi,null,b.slice()):typeof b=="object"?Zi(b):ui(Yr,null,String(b))}function Zi(b){return b.el===null||b.memo?b:ea(b)}function Xr(b,t){let i=0;const{shapeFlag:n}=b;if(t==null)t=null;else if(Gt(t))i=16;else if(typeof t=="object")if(n&65){const e=t.default;e&&(e._c&&(e._d=!1),Xr(b,e()),e._c&&(e._d=!0));return}else{i=32;const e=t._;!e&&!(vn in t)?t._ctx=yi:e===3&&yi&&(yi.slots._===1?t._=1:(t._=2,b.patchFlag|=1024))}else Kt(t)?(t={default:t,_ctx:yi},i=32):(t=String(t),n&64?(i=16,t=[yu(t)]):i=8);b.children=t,b.shapeFlag|=i}function qu(...b){const t={};for(let i=0;i<b.length;i++){const n=b[i];for(const e in n)if(e==="class")t.class!==n.class&&(t.class=Mr([t.class,n.class]));else if(e==="style")t.style=Fr([t.style,n.style]);else if(sn(e)){const a=t[e],o=n[e];o&&a!==o&&!(Gt(a)&&a.includes(o))&&(t[e]=a?[].concat(a,o):o)}else e!==""&&(t[e]=n[e])}return t}function Di(b,t,i,n=null){pi(b,t,7,[i,n])}const wu=_c();let ku=0;function Cu(b,t,i){const n=b.type,e=(t?t.appContext:b.appContext)||wu,a={uid:ku++,vnode:b,type:n,parent:t,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sc(n,e),emitsOptions:hc(n,e),emit:null,emitted:null,propsDefaults:ke,inheritAttrs:n.inheritAttrs,ctx:ke,data:ke,props:ke,attrs:ke,slots:ke,refs:ke,setupState:ke,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Tp.bind(null,a),b.ce&&b.ce(a),a}let He=null;const Su=()=>He||yi,Ta=b=>{He=b,b.scope.on()},ua=()=>{He&&He.scope.off(),He=null};function Ec(b){return b.vnode.shapeFlag&4}let vo=!1;function Du(b,t=!1){vo=t;const{props:i,children:n}=b.vnode,e=Ec(b);ou(b,i,e,t),su(b,n);const a=e?Au(b,t):void 0;return vo=!1,a}function Au(b,t){const i=b.type;b.accessCache=Object.create(null),b.proxy=tc(new Proxy(b.ctx,Jp));const{setup:n}=i;if(n){const e=b.setupContext=n.length>1?_u(b):null;Ta(b),Fa();const a=$i(n,b,0,[b.props,e]);if(Ma(),ua(),Ns(a)){if(a.then(ua,ua),t)return a.then(o=>{Fs(b,o,t)}).catch(o=>{pn(o,b,0)});b.asyncDep=a}else Fs(b,a,t)}else Lc(b,t)}function Fs(b,t,i){Kt(t)?b.type.__ssrInlineRender?b.ssrRender=t:b.render=t:ti(t)&&(b.setupState=oc(t)),Lc(b,i)}let Ms;function Lc(b,t,i){const n=b.type;if(!b.render){if(!t&&Ms&&!n.render){const e=n.template;if(e){const{isCustomElement:a,compilerOptions:o}=b.appContext.config,{delimiters:r,compilerOptions:c}=n,l=Ye(Ye({isCustomElement:a,delimiters:r},o),c);n.render=Ms(e,l)}}b.render=n.render||wi}Ta(b),Fa(),$p(b),Ma(),ua()}function Tu(b){return new Proxy(b.attrs,{get(t,i){return si(b,"get","$attrs"),t[i]}})}function _u(b){const t=n=>{b.exposed=n||{}};let i;return{get attrs(){return i||(i=Tu(b))},slots:b.slots,emit:b.emit,expose:t}}function Zr(b){if(b.exposed)return b.exposeProxy||(b.exposeProxy=new Proxy(oc(tc(b.exposed)),{get(t,i){if(i in t)return t[i];if(i in on)return on[i](b)}}))}function Fu(b,t=!0){return Kt(b)?b.displayName||b.name:b.name||t&&b.__name}function Mu(b){return Kt(b)&&"__vccOpts"in b}const Pu=(b,t)=>qp(b,t,vo),Iu="3.2.37",Eu="http://www.w3.org/2000/svg",la=typeof document!="undefined"?document:null,Ps=la&&la.createElement("template"),Lu={insert:(b,t,i)=>{t.insertBefore(b,i||null)},remove:b=>{const t=b.parentNode;t&&t.removeChild(b)},createElement:(b,t,i,n)=>{const e=t?la.createElementNS(Eu,b):la.createElement(b,i?{is:i}:void 0);return b==="select"&&n&&n.multiple!=null&&e.setAttribute("multiple",n.multiple),e},createText:b=>la.createTextNode(b),createComment:b=>la.createComment(b),setText:(b,t)=>{b.nodeValue=t},setElementText:(b,t)=>{b.textContent=t},parentNode:b=>b.parentNode,nextSibling:b=>b.nextSibling,querySelector:b=>la.querySelector(b),setScopeId(b,t){b.setAttribute(t,"")},cloneNode(b){const t=b.cloneNode(!0);return"_value"in b&&(t._value=b._value),t},insertStaticContent(b,t,i,n,e,a){const o=i?i.previousSibling:t.lastChild;if(e&&(e===a||e.nextSibling))for(;t.insertBefore(e.cloneNode(!0),i),!(e===a||!(e=e.nextSibling)););else{Ps.innerHTML=n?`<svg>${b}</svg>`:b;const r=Ps.content;if(n){const c=r.firstChild;for(;c.firstChild;)r.appendChild(c.firstChild);r.removeChild(c)}t.insertBefore(r,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function Uu(b,t,i){const n=b._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?b.removeAttribute("class"):i?b.setAttribute("class",t):b.className=t}function zu(b,t,i){const n=b.style,e=Qe(i);if(i&&!e){for(const a in i)Sr(n,a,i[a]);if(t&&!Qe(t))for(const a in t)i[a]==null&&Sr(n,a,"")}else{const a=n.display;e?t!==i&&(n.cssText=i):t&&b.removeAttribute("style"),"_vod"in b&&(n.display=a)}}const Is=/\s*!important$/;function Sr(b,t,i){if(Gt(i))i.forEach(n=>Sr(b,t,n));else if(i==null&&(i=""),t.startsWith("--"))b.setProperty(t,i);else{const n=Bu(b,t);Is.test(i)?b.setProperty(_a(n),i.replace(Is,""),"important"):b[n]=i}}const Es=["Webkit","Moz","ms"],cr={};function Bu(b,t){const i=cr[t];if(i)return i;let n=Fi(t);if(n!=="filter"&&n in b)return cr[t]=n;n=dn(n);for(let e=0;e<Es.length;e++){const a=Es[e]+n;if(a in b)return cr[t]=a}return t}const Ls="http://www.w3.org/1999/xlink";function Ou(b,t,i,n,e){if(n&&t.startsWith("xlink:"))i==null?b.removeAttributeNS(Ls,t.slice(6,t.length)):b.setAttributeNS(Ls,t,i);else{const a=Ah(t);i==null||a&&!Rs(i)?b.removeAttribute(t):b.setAttribute(t,a?"":i)}}function Ru(b,t,i,n,e,a,o){if(t==="innerHTML"||t==="textContent"){n&&o(n,e,a),b[t]=i==null?"":i;return}if(t==="value"&&b.tagName!=="PROGRESS"&&!b.tagName.includes("-")){b._value=i;const c=i==null?"":i;(b.value!==c||b.tagName==="OPTION")&&(b.value=c),i==null&&b.removeAttribute(t);return}let r=!1;if(i===""||i==null){const c=typeof b[t];c==="boolean"?i=Rs(i):i==null&&c==="string"?(i="",r=!0):c==="number"&&(i=0,r=!0)}try{b[t]=i}catch{}r&&b.removeAttribute(t)}const[Uc,Nu]=(()=>{let b=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(b=performance.now.bind(performance));const i=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(i&&Number(i[1])<=53)}return[b,t]})();let Dr=0;const Hu=Promise.resolve(),Vu=()=>{Dr=0},Wu=()=>Dr||(Hu.then(Vu),Dr=Uc());function ju(b,t,i,n){b.addEventListener(t,i,n)}function Ku(b,t,i,n){b.removeEventListener(t,i,n)}function Gu(b,t,i,n,e=null){const a=b._vei||(b._vei={}),o=a[t];if(n&&o)o.value=n;else{const[r,c]=Yu(t);if(n){const l=a[t]=Qu(n,e);ju(b,r,l,c)}else o&&(Ku(b,r,o,c),a[t]=void 0)}}const Us=/(?:Once|Passive|Capture)$/;function Yu(b){let t;if(Us.test(b)){t={};let i;for(;i=b.match(Us);)b=b.slice(0,b.length-i[0].length),t[i[0].toLowerCase()]=!0}return[_a(b.slice(2)),t]}function Qu(b,t){const i=n=>{const e=n.timeStamp||Uc();(Nu||e>=i.attached-1)&&pi(Xu(n,i.value),t,5,[n])};return i.value=b,i.attached=Wu(),i}function Xu(b,t){if(Gt(t)){const i=b.stopImmediatePropagation;return b.stopImmediatePropagation=()=>{i.call(b),b._stopped=!0},t.map(n=>e=>!e._stopped&&n&&n(e))}else return t}const zs=/^on[a-z]/,Zu=(b,t,i,n,e=!1,a,o,r,c)=>{t==="class"?Uu(b,n,e):t==="style"?zu(b,i,n):sn(t)?Pr(t)||Gu(b,t,i,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ju(b,t,n,e))?Ru(b,t,n,a,o,r,c):(t==="true-value"?b._trueValue=n:t==="false-value"&&(b._falseValue=n),Ou(b,t,n,e))};function Ju(b,t,i,n){return n?!!(t==="innerHTML"||t==="textContent"||t in b&&zs.test(t)&&Kt(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&b.tagName==="INPUT"||t==="type"&&b.tagName==="TEXTAREA"||zs.test(t)&&Qe(i)?!1:t in b}const $u={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Op.props;const tf=Ye({patchProp:Zu},Lu);let Bs;function ef(){return Bs||(Bs=hu(tf))}const af=(...b)=>{const t=ef().createApp(...b),{mount:i}=t;return t.mount=n=>{const e=of(n);if(!e)return;const a=t._component;!Kt(a)&&!a.render&&!a.template&&(a.template=e.innerHTML),e.innerHTML="";const o=i(e,!1,e instanceof SVGElement);return e instanceof Element&&(e.removeAttribute("v-cloak"),e.setAttribute("data-v-app","")),o},t};function of(b){return Qe(b)?document.querySelector(b):b}const nf="chart-container";(function(){var b="2023/04/01",t=["127.0.0.1","localhost","zuminternet.com","chartiq-custom-signal-demo.vercel.app"],i;if(i=new Date(b).getTime(),i){var n=new Date().getTime();i<=n&&console.error("This license has expired!")}if(typeof document!="undefined"&&t&&t.length>0){for(var e=document.location.href,a=!1,o=0;o<t.length;o++)if(e.indexOf(t[o])>-1){a=!0;break}a||(alert("ERROR: Not licensed for domain "+e),console.error("ERROR: Not licensed for domain "+e))}})();ot[415188]=function(){for(var b=2;b!==9;)switch(b){case 1:return globalThis;case 5:var t;try{for(var i=2;i!==6;)switch(i){case 2:Object.defineProperty(Object.prototype,"gDgC$",{get:function(){for(var e=2;e!==1;)switch(e){case 2:return this}},configurable:!0}),t=gDgC$,t.kHnTD=t,i=4;break;case 4:i=typeof kHnTD=="undefined"?3:9;break;case 3:throw"";case 9:delete t.kHnTD;var n=Object.prototype;delete n.gDgC$,i=6;break}}catch{t=window}return t;case 2:b=typeof globalThis=="object"?1:5;break}}();rf(ot[415188]);ot[49247]=function(){var b=function(i,n){var e=n&65535,a=n-e;return(a*i|0)+(e*i|0)|0},t=function(i,n,e){for(var a=3432918353,o=461845907,r=e,c=n&-4,l=0;l<c;l+=4){var s=i.f3dtl(l)&255|(i.f3dtl(l+1)&255)<<8|(i.f3dtl(l+2)&255)<<16|(i.f3dtl(l+3)&255)<<24;s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s,r=(r&524287)<<13|r>>>19,r=r*5+3864292196|0}switch(s=0,n%4){case 3:s=(i.f3dtl(c+2)&255)<<16;case 2:s|=(i.f3dtl(c+1)&255)<<8;case 1:s|=i.f3dtl(c)&255,s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s}return r^=n,r^=r>>>16,r=b(r,2246822507),r^=r>>>13,r=b(r,3266489909),r^=r>>>16,r};return{g9PZ1tV:t}}();ot.l5q=function(){return typeof ot[512664].G3Yezg4=="function"?ot[512664].G3Yezg4.apply(ot[512664],arguments):ot[512664].G3Yezg4};ot.A_p=function(){return typeof ot[228646].X_cHgq6=="function"?ot[228646].X_cHgq6.apply(ot[228646],arguments):ot[228646].X_cHgq6};ot[228646]=function(b){return{D$iDCh4:function(){var t,i=arguments;switch(b){case 15:t=i[0]-i[1]-i[2]-i[3]+i[4];break;case 119:t=i[2]/i[3]+i[1]+i[0];break;case 117:t=i[1]-i[0]-(i[3]-i[2]);break;case 84:t=(i[4]/i[0]-i[3])/i[2]+i[1];break;case 50:t=i[0]+i[1]+i[2];break;case 0:t=i[2]/i[0]-i[1];break;case 62:t=i[1]/i[0]*i[3]*i[2]-i[4];break;case 38:t=(i[1]+i[4]+i[0])/i[3]-i[2];break;case 24:t=i[2]-i[4]-i[1]+i[3]-i[0];break;case 153:t=i[1]!=i[0];break;case 127:t=i[0]-(i[1]|i[2]);break;case 156:t=i[0]>=i[1];break;case 89:t=i[4]/i[2]*i[3]+i[0]+i[1];break;case 21:t=i[1]*i[0]-i[2];break;case 109:t=i[1]/i[3]+i[0]-i[4]+i[2];break;case 141:t=i[2]+i[3]/i[0]*i[1];break;case 7:t=-i[2]/i[1]-i[4]-i[0]+i[3];break;case 14:t=(i[4]-i[0]-i[2])/i[1]-i[3];break;case 112:t=i[0]/i[3]/i[4]*i[1]-i[2];break;case 29:t=i[1]-i[0]-i[2];break;case 51:t=(i[1]+i[0])/i[2]+i[3];break;case 102:t=-i[4]*i[1]*i[3]/i[2]-i[0];break;case 162:t=i[2]-i[0]*i[1];break;case 28:t=i[2]*i[0]*i[4]/i[3]-i[1];break;case 68:t=i[1]*i[0]*i[2]-i[3];break;case 95:t=(i[0]+i[2])/+i[1];break;case 106:t=i[0]-(i[1]-+i[2]);break;case 98:t=i[3]+i[1]*(i[2]-i[0]);break;case 91:t=i[3]+i[1]-i[0]-i[4]+i[2];break;case 126:t=-i[3]*i[0]-i[2]+i[1];break;case 92:t=i[1]-i[2]-i[0]+i[3];break;case 12:t=-i[0]*i[3]+i[1]+i[2];break;case 2:t=i[0]+i[1]-i[4]+i[3]-i[2];break;case 34:t=i[2]*i[3]*i[1]*i[0]-i[4];break;case 138:t=(i[1]+i[2])/i[4]*i[3]-i[0];break;case 103:t=(i[3]-i[1]-i[0])*i[2]+i[4];break;case 139:t=i[2]-i[1]/i[0]+(i[3]-i[4]);break;case 69:t=i[0]+i[5]+i[1]+i[3]+i[2]+i[6]+i[4];break;case 130:t=i[2]+i[1]*i[0];break;case 97:t=i[0]==i[1];break;case 77:t=i[1]+i[0]+i[2]+i[4]+i[3];break;case 35:t=(i[3]+i[1])*i[2]-i[0];break;case 132:t=i[3]/i[2]*i[1]/i[0]+i[4];break;case 122:t=-i[2]+i[1]-i[0];break;case 71:t=i[2]+i[7]+i[0]+i[1]+i[10]+i[6]+i[9]+i[5]+i[3]+i[8]+i[4];break;case 59:t=(i[1]+i[0])/i[3]-i[2];break;case 96:t=(i[0]-i[1])*(i[7]-i[2])-(i[3]-i[5])*(i[4]-i[6]);break;case 116:t=i[0]/i[1]*i[3]-i[2];break;case 87:t=(i[1]*i[3]-i[4])/i[2]-i[0];break;case 55:t=i[4]*i[0]/i[3]+i[2]-i[1];break;case 125:t=-i[2]*i[0]+i[1];break;case 47:t=i[1]+i[2]/i[0];break;case 74:t=i[1]*i[2]/i[0]+i[3];break;case 133:t=i[1]/i[4]/i[2]+i[0]+i[3];break;case 151:t=(i[3]-i[2])*i[0]+i[1];break;case 23:t=i[3]/i[2]+i[0]-i[1];break;case 5:t=i[0]-i[1];break;case 17:t=(i[0]-i[3])*(i[4]-i[5])/(i[2]-i[1]);break;case 44:t=(i[0]+i[1])/(i[3]-i[2]);break;case 20:t=i[2]/i[0]*i[3]+i[1];break;case 72:t=i[1]<<i[0];break;case 157:t=(i[3]+i[2]-i[1])*i[0]+i[4];break;case 113:t=i[2]+i[3]+i[4]-i[0]-i[1];break;case 111:t=i[0]*(i[3]-i[2])+i[1];break;case 46:t=i[6]+(i[1]-i[7])*((i[3]|i[8])/(i[5]>>i[2])-i[4])*i[0];break;case 11:t=i[0]+i[3]-i[1]-i[2];break;case 25:t=(i[2]-i[1]+i[3])*i[0]-i[4];break;case 52:t=i[4]/i[0]/i[2]/i[1]+i[3];break;case 150:t=i[0]/(i[2]^i[1]);break;case 154:t=i[3]/i[1]/i[0]-i[2];break;case 115:t=-i[2]-i[1]+i[0];break;case 57:t=(-i[0]-i[4])/i[1]-i[2]+i[3];break;case 1:t=(i[4]-i[2])*i[3]*i[1]+i[0];break;case 39:t=i[0]*i[1];break;case 83:t=i[1]-i[0]+i[2]-i[3];break;case 124:t=i[3]*i[1]-i[2]+i[0];break;case 64:t=i[1]+i[0]+i[2]-i[3];break;case 159:t=i[4]*i[3]-i[1]+i[0]-i[2];break;case 93:t=i[0]*i[3]+i[1]+i[2];break;case 108:t=(-i[2]+i[1])/i[3]*i[4]-i[0];break;case 58:t=-i[2]/i[1]+i[0];break;case 63:t=i[1]*i[4]/i[3]-i[2]-i[0];break;case 37:t=i[2]/i[0]+i[1];break;case 40:t=i[1]+i[6]+i[3]+i[2]+i[8]+i[9]+i[0]+i[4]/i[7]+i[5];break;case 118:t=-i[1]*i[0]*i[3]+i[2];break;case 114:t=i[1]/i[2]-i[3]+i[0];break;case 49:t=i[1]*+i[0];break;case 4:t=i[0]^i[1];break;case 121:t=i[0]-(i[2]>>i[1]);break;case 3:t=i[0]|i[1];break;case 101:t=(i[1]+i[3])*i[4]+i[2]-i[0];break;case 33:t=i[3]+i[1]+i[2]+i[0];break;case 147:t=i[0]*i[4]/i[3]+i[1]+i[2];break;case 76:t=i[4]-i[2]-i[3]+i[0]+i[1];break;case 27:t=(i[1]-i[0])*i[2]/i[3]-i[4];break;case 120:t=(i[1]-i[2])*i[0]-i[3];break;case 16:t=i[0]*-i[1];break;case 105:t=(i[3]/i[1]+i[4])*i[2]-i[0];break;case 32:t=(i[0]-i[2])/i[3]+i[1];break;case 67:t=i[0]+i[1]-i[2];break;case 75:t=(i[3]-i[0])/i[1]*i[2]-i[4];break;case 143:t=(-i[1]+i[0])*i[2]+i[3];break;case 42:t=(i[3]>>i[1])*(i[0]-i[2]/(i[5]-i[4]));break;case 22:t=i[2]/i[1]-i[3]-i[4]+i[0];break;case 161:t=(i[4]/i[0]+i[3])/i[1]+i[2];break;case 61:t=i[0]-i[3]-i[2]-i[1]-i[4];break;case 160:t=(i[3]-i[0])*i[1]-i[2]-i[4];break;case 48:t=i[2]-i[0]/i[1];break;case 85:t=(i[0]/i[3]+i[1])*i[2]+i[4];break;case 60:t=i[2]-i[1]+i[4]-i[0]+i[3];break;case 137:t=i[2]+(i[3]>>i[0])+i[4]+i[1];break;case 123:t=i[2]*i[3]/i[0]-i[1];break;case 158:t=i[2]*(i[1]|i[0]);break;case 36:t=i[1]/i[0]/i[3]+i[2];break;case 148:t=i[4]*i[3]*i[0]+i[2]-i[1];break;case 13:t=i[3]*i[1]+i[2]-i[0];break;case 135:t=i[2]+i[1]-i[0]+i[3];break;case 53:t=i[4]/i[2]/i[3]-i[0]+i[1];break;case 100:t=i[0]/(i[2]|i[1]);break;case 144:t=-i[2]/i[1]-i[0];break;case 146:t=-i[2]+i[3]-i[1]-i[0];break;case 94:t=i[1]-i[2]+i[0]+i[3];break;case 43:t=(i[2]-i[0])/i[1];break;case 107:t=(i[0]+i[3])/(i[2]>>i[1]);break;case 86:t=(i[2]-i[1]-i[4])/i[0]+i[3];break;case 131:t=-i[0]+i[1]-i[3]+i[2];break;case 155:t=(i[0]+i[2])*i[1]/i[3]-i[4];break;case 31:t=-i[1]+i[0];break;case 9:t=(i[0]-i[2])/i[4]-i[3]+i[1];break;case 65:t=i[2]-i[1]+i[0]+i[4]-i[3];break;case 128:t=i[2]-(i[3]-i[0])-i[1]+i[4];break;case 90:t=(-i[3]-i[4]-i[0])/i[1]+i[2];break;case 149:t=i[2]/(i[0]<<i[1]);break;case 82:t=(i[3]*i[1]+i[0])*i[4]-i[2];break;case 41:t=i[0]/+i[1];break;case 10:t=i[0]+i[1];break;case 80:t=i[3]*i[0]/i[4]/i[2]+i[1];break;case 70:t=i[5]+i[4]+i[3]+i[2]+i[7]+i[1]+i[6]+i[0]+i[8];break;case 78:t=i[0]===i[1];break;case 18:t=i[0]>>i[1];break;case 56:t=(i[3]*i[0]-i[2])*i[4]-i[1];break;case 129:t=i[1]+ +i[0];break;case 30:t=i[0]/i[1];break;case 136:t=i[2]+i[0]+i[3]%(i[4]-i[1]);break;case 79:t=i[0]!==i[1];break;case 66:t=i[2]/i[0]*i[1]/i[3]-i[4];break;case 134:t=i[0]-i[1]-i[2]-i[3];break;case 140:t=i[3]+(i[0]+(i[1]>>i[2]));break;case 6:t=-i[2]+i[0]+i[1];break;case 73:t=i[2]*i[1]*i[3]*i[0];break;case 142:t=i[1]>i[0];break;case 104:t=i[1]*i[0]+i[2];break;case 19:t=i[1]+i[3]+i[2]+i[0]-i[4];break;case 26:t=i[2]|i[3]<<i[0]|i[4]<<i[1];break;case 45:t=i[4]+(i[3]-i[0])*i[2]*i[1];break;case 99:t=(i[2]*i[1]+i[3])/i[4]-i[0];break;case 145:t=-i[2]/i[0]/i[1]+i[3];break;case 81:t=i[0]<i[1];break;case 88:t=(i[2]-i[0]-i[4])*i[3]-i[1];break;case 152:t=i[2]-(i[0]^i[1]);break;case 8:t=i[2]-i[1]+i[0];break;case 54:t=i[0]*i[1]-i[2]-i[3];break;case 110:t=(i[0]-i[2])/(i[3]-i[1]);break}return t},X_cHgq6:function(t){b=t}}}();ot.P8n=function(){return typeof ot[512664].G3Yezg4=="function"?ot[512664].G3Yezg4.apply(ot[512664],arguments):ot[512664].G3Yezg4};ot.c4P=function(){return typeof ot[41283].c0zxy_1=="function"?ot[41283].c0zxy_1.apply(ot[41283],arguments):ot[41283].c0zxy_1};ot[41283]=function(){for(var b=2;b!==9;)switch(b){case 2:var t=[arguments];t[4]=void 0,t[5]={},b=4;break;case 4:return t[5].c0zxy_1=function(){for(var i=2;i!==90;)switch(i){case 2:var n=[arguments];i=1;break;case 39:n[28]={},i=38;break;case 75:n[71]={},n[71][n[10]]=n[76][n[83]][n[35]],n[71][n[59]]=n[23],n[17].c5SZlt(n[71]),i=71;break;case 4:n[7]=[],n[6]={},i=9;break;case 51:n[7].c5SZlt(n[1]),n[7].c5SZlt(n[62]),i=49;break;case 22:n[93].I6h=["B_7"],n[93].d09=function(){var e=function(){return"c".indexOf("c")},a=!/['"]/.a7Kncl(e+[]);return a},n[12]=n[93],n[69]={},n[69].I6h=["B_7"],i=32;break;case 70:n[65]++,i=57;break;case 17:n[5].I6h=["B_7"],n[5].d09=function(){var e=function(){return"aa".charCodeAt(1)},a=/\x39\u0037/.a7Kncl(e+[]);return a},n[2]=n[5],n[78]={},n[78].I6h=["B_7"],i=25;break;case 11:n[8]={},n[8].I6h=["K0f"],i=20;break;case 60:n[53]="d09",n[10]="Z6P",i=58;break;case 67:return t[4]=65,11;case 43:n[34]={},n[34].I6h=["K0f"],n[34].d09=function(){var e=typeof N9rM1J=="function";return e},n[60]=n[34],i=39;break;case 58:n[65]=0,i=57;break;case 1:i=t[4]?5:4;break;case 77:n[35]=0,i=76;break;case 9:n[6].I6h=["K0f"],n[6].d09=function(){var e=typeof Z5NdvQ=="function";return e},n[9]=n[6],n[4]={},n[4].I6h=["B_7"],n[4].d09=function(){var e=function(){return"a|a".split("|")},a=!/\u007c/.a7Kncl(e+[]);return a},n[3]=n[4],i=11;break;case 25:n[78].d09=function(){var e=function(){return"A\u030A".normalize("NFC")==="\u212B".normalize("NFC")},a=/\u0074\x72\u0075\x65/.a7Kncl(e+[]);return a},n[99]=n[78],n[93]={},i=22;break;case 57:i=n[65]<n[7].length?56:69;break;case 53:n[7].c5SZlt(n[99]),n[7].c5SZlt(n[80]),i=51;break;case 76:i=n[35]<n[76][n[83]].length?75:70;break;case 5:return 93;case 69:i=function(e){for(var a=2;a!==22;)switch(a){case 20:o[7][o[9][n[10]]].h+=!0,a=19;break;case 15:o[3]=o[6][o[1]],o[5]=o[7][o[3]].h/o[7][o[3]].t,a=26;break;case 1:a=o[0][0].length===0?5:4;break;case 10:a=o[9][n[59]]===n[19]?20:19;break;case 26:a=o[5]>=.5?25:24;break;case 4:o[7]={},o[6]=[],o[1]=0,a=8;break;case 2:var o=[arguments];a=1;break;case 17:o[1]=0,a=16;break;case 16:a=o[1]<o[6].length?15:23;break;case 6:o[9]=o[0][0][o[1]],a=14;break;case 25:o[8]=!0,a=24;break;case 8:o[1]=0,a=7;break;case 12:o[6].c5SZlt(o[9][n[10]]),a=11;break;case 23:return o[8];case 18:o[8]=!1,a=17;break;case 14:a=typeof o[7][o[9][n[10]]]=="undefined"?13:11;break;case 19:o[1]++,a=7;break;case 5:return;case 7:a=o[1]<o[0][0].length?6:18;break;case 24:o[1]++,a=16;break;case 13:o[7][o[9][n[10]]]=function(){for(var r=2;r!==9;)switch(r){case 4:return c[6].t=0,c[6];case 2:var c=[arguments];c[6]={},c[6].h=0,r=4;break}}.O6vbH3(this,arguments),a=12;break;case 11:o[7][o[9][n[10]]].t+=!0,a=10;break}}(n[17])?68:67;break;case 68:i=68;break;case 46:n[7].c5SZlt(n[2]),n[7].c5SZlt(n[60]),n[17]=[],n[19]="g8u",n[91]="J9D",n[83]="I6h",n[59]="s7c",i=60;break;case 20:n[8].d09=function(){var e=typeof Q4nyuv=="function";return e},n[1]=n[8],n[5]={},i=17;break;case 71:n[35]++,i=76;break;case 32:n[69].d09=function(){var e=function(){return"aa".endsWith("a")},a=/\u0074\x72\x75\u0065/.a7Kncl(e+[]);return a},n[80]=n[69],n[70]={},n[70].I6h=["B_7"],n[70].d09=function(){var e=function(){return"x y".slice(0,1)},a=!/\x79/.a7Kncl(e+[]);return a},n[43]=n[70],i=43;break;case 49:n[7].c5SZlt(n[3]),n[7].c5SZlt(n[9]),n[7].c5SZlt(n[43]),i=46;break;case 56:n[76]=n[7][n[65]];try{n[23]=n[76][n[53]]()?n[19]:n[91]}catch{n[23]=n[91]}i=77;break;case 38:n[28].I6h=["K0f"],n[28].d09=function(){var e=!1,a=[];try{for(var o in console)a.c5SZlt(o);e=a.length===0}catch{}var r=e;return r},n[62]=n[28],n[7].c5SZlt(n[12]),i=53;break}},t[5]}}();ot[477550]=518;ot.W0S=function(){return typeof ot[94245].h0k931v=="function"?ot[94245].h0k931v.apply(ot[94245],arguments):ot[94245].h0k931v};ot.f0X=function(){return typeof ot[49247].g9PZ1tV=="function"?ot[49247].g9PZ1tV.apply(ot[49247],arguments):ot[49247].g9PZ1tV};ot[350012]=ot[49247];ot.v95=function(){return typeof ot[41283].c0zxy_1=="function"?ot[41283].c0zxy_1.apply(ot[41283],arguments):ot[41283].c0zxy_1};ot[94245]=function(){function b(o,r,c,l,s){for(var d=2;d!==15;)switch(d){case 19:d=o===null||o<=0?18:14;break;case 9:d=l>0?8:19;break;case 8:h=u.N4ugG(o,l),p=h.length,d=6;break;case 12:return!1;case 4:!e&&(e=typeof g!="undefined"?g[a([7,17,4,5])]:""),u=s?e:n,d=9;break;case 18:h=u.N4ugG(0,u.length),p=h.length,d=16;break;case 2:var h,p,u,g;g=i[a([11,14,2,0,19,8,14,13])],!n&&(n=typeof g!="undefined"?g[a([7,14,18,19,13,0,12,4])]||" ":""),d=4;break;case 16:return ot.f0X(h,p,c);case 13:d=r&&f>0&&u.f3dtl(f-1)!==46?12:11;break;case 6:return ot.f0X(h,p,c);case 14:var f=u.length-o;d=13;break;case 11:return h=u.N4ugG(f,u.length),p=h.length,ot.f0X(h,p,c)}}for(var t=2;t!==4;)switch(t){case 2:var i=ot[415188];t=1;break;case 1:var n,e;return{h0k931v:function(o,r,c,l){for(var s=2;s!==1;)switch(s){case 2:return b(o,r,c,l)}},t9zWlmD:function(o,r,c,l){for(var s=2;s!==1;)switch(s){case 2:return b(o,r,c,l,!0)}}}}function a(o){for(var r=2;r!==7;)switch(r){case 2:var c=2,l="";r=5;break;case 5:var s=0;r=4;break;case 9:s++,r=4;break;case 4:r=s<o.length?3:8;break;case 3:l+=i3MnG.G6gq6(o[s]-c+99),r=9;break;case 8:return l}}}();ot.G7m=function(){return typeof ot[228646].D$iDCh4=="function"?ot[228646].D$iDCh4.apply(ot[228646],arguments):ot[228646].D$iDCh4};ot.J3A=function(){return typeof ot[94245].t9zWlmD=="function"?ot[94245].t9zWlmD.apply(ot[94245],arguments):ot[94245].t9zWlmD};function ot(){}ot.c7G=function(){return typeof ot[94245].h0k931v=="function"?ot[94245].h0k931v.apply(ot[94245],arguments):ot[94245].h0k931v};ot[92481]=937;function rf(b){function t(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Array}}function i(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Function}}for(var n=2;n!==120;)switch(n){case 23:e[25]="K",e[85]="",e[89]="ta",e[85]="__a",n=34;break;case 11:e[8]="4ug",e[2]="",e[2]="g97",e[9]="3dt",n=18;break;case 79:e[10]=e[98],e[10]+=e[53],e[10]+=e[22],e[72]=e[28],n=102;break;case 111:e[62]=e[1],e[62]+=e[3],e[62]+=e[5],e[97]=e[49],n=107;break;case 107:e[97]+=e[54],e[97]+=e[7],e[15]=e[4],e[15]+=e[9],n=134;break;case 47:e[98]="",e[98]="Q4",e[36]="",e[36]="ize",n=64;break;case 94:e[63]=e[85],e[63]+=e[75],e[63]+=e[96],e[90]=e[92],n=119;break;case 2:var e=[arguments];e[6]="",e[6]="l",e[4]="",n=3;break;case 129:a(c,"substring",e[21],e[99]),n=128;break;case 34:e[23]="",e[23]="Q",e[52]="U",e[30]="",e[30]="Z5",e[14]="",n=28;break;case 3:e[4]="f",e[5]="",e[5]="6",e[3]="",n=6;break;case 98:e[80]+=e[67],e[69]=e[30],e[69]+=e[83],e[69]+=e[23],n=94;break;case 51:e[22]="",e[22]="",e[22]="uv",e[53]="ny",n=47;break;case 123:a(o,e[76],e[18],e[70]),n=122;break;case 131:a(o,"String",e[18],e[97]),n=130;break;case 119:e[90]+=e[89],e[90]+=e[25],e[56]=e[52],e[56]+=e[39],n=115;break;case 133:var a=function(s,d,h,p){for(var u=2;u!==5;)switch(u){case 2:var g=[arguments];l(e[0][0],g[0][0],g[0][1],g[0][2],g[0][3]),u=5;break}};n=132;break;case 134:e[15]+=e[6],n=133;break;case 128:a(c,"replace",e[21],e[56]),n=127;break;case 121:a(i,"apply",e[21],e[51]),n=120;break;case 28:e[75]="bstr",e[14]="7",e[40]="",e[40]="a",n=41;break;case 67:e[18]=0,e[51]=e[59],e[51]+=e[78],e[51]+=e[54],n=88;break;case 122:a(t,"push",e[21],e[93]),n=121;break;case 132:a(c,"charCodeAt",e[21],e[15]),n=131;break;case 75:e[60]="c5",e[54]="3",e[78]="",e[78]="H",n=71;break;case 124:a(o,e[72],e[18],e[10]),n=123;break;case 126:a(o,e[63],e[18],e[69]),n=125;break;case 130:a(c,"fromCharCode",e[18],e[62]),n=129;break;case 102:e[72]+=e[71],e[72]+=e[88],e[80]=e[40],e[80]+=e[14],n=98;break;case 115:e[56]+=e[2],e[99]=e[66],e[99]+=e[8],e[99]+=e[1],n=111;break;case 6:e[3]="6gq",e[1]="",e[7]="MnG",e[1]="G",n=11;break;case 56:e[12]="",e[12]="t",e[60]="",e[33]="SZl",n=75;break;case 127:a(t,"map",e[21],e[90]),n=126;break;case 60:e[66]="",e[55]="9rM",e[66]="N",e[12]="",n=56;break;case 41:e[71]="",e[71]="",e[83]="Ndv",e[67]="Kncl",n=37;break;case 88:e[93]=e[60],e[93]+=e[33],e[93]+=e[12],e[70]=e[66],e[70]+=e[55],n=83;break;case 18:e[39]="",e[39]="6S",e[49]="i",e[92]="",n=27;break;case 37:e[71]="_r",e[28]="",e[88]="esidual",e[28]="",e[28]="_",n=51;break;case 83:e[70]+=e[29],e[76]=e[48],e[76]+=e[84],e[76]+=e[36],n=79;break;case 27:e[92]="c0g",e[96]="",e[96]="act",e[85]="",n=23;break;case 64:e[29]="",e[84]="optim",e[48]="__",e[29]="1J",n=60;break;case 125:a(r,"test",e[21],e[80]),n=124;break;case 71:e[59]="",e[59]="O6vb",e[21]=5,e[21]=1,n=67;break}function o(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0]}}function r(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].RegExp}}function c(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].String}}function l(s,d,h,p,u){for(var g=2;g!==14;)switch(g){case 6:try{for(var f=2;f!==13;)switch(f){case 9:v[6][v[0][4]]=v[6][v[0][2]],v[4].set=function(m){for(var q=2;q!==5;)switch(q){case 2:var x=[arguments];v[6][v[0][2]]=x[0][0],q=5;break}},v[4].get=function(){for(var m=2;m!==13;)switch(m){case 9:return q[5]="u",q[4]=q[5],q[4]+=q[7],q[4]+=q[9],typeof v[6][v[0][2]]==q[4]?void 0:v[6][v[0][2]];break;case 2:var q=[arguments];q[9]="fined",q[7]="nde",q[5]="",q[5]="",m=9;break}},v[4].enumerable=v[3];try{for(var w=2;w!==3;)switch(w){case 2:v[1]=v[5],v[1]+=v[7],v[1]+=v[8],v[0][0].Object[v[1]](v[6],v[0][4],v[4]),w=3;break}}catch{}f=13;break;case 4:f=v[6].hasOwnProperty(v[0][4])&&v[6][v[0][4]]===v[6][v[0][2]]?3:9;break;case 2:v[4]={},v[2]=(0,v[0][1])(v[0][0]),v[6]=[v[2],v[2].prototype][v[0][3]],f=4;break;case 3:return}}catch{}g=14;break;case 3:v[7]="ePrope",v[5]="",v[5]="defin",v[3]=!1,g=6;break;case 2:var v=[arguments];v[8]="",v[8]="rty",v[7]="",g=3;break}}}ot.Y9k=function(){return typeof ot[49247].g9PZ1tV=="function"?ot[49247].g9PZ1tV.apply(ot[49247],arguments):ot[49247].g9PZ1tV};ot.k1h=function(){return typeof ot[228646].X_cHgq6=="function"?ot[228646].X_cHgq6.apply(ot[228646],arguments):ot[228646].X_cHgq6};ot.F0D=function(){return typeof ot[228646].D$iDCh4=="function"?ot[228646].D$iDCh4.apply(ot[228646],arguments):ot[228646].D$iDCh4};ot[512664]=function(b){for(var t=2;t!==10;)switch(t){case 8:t=a--?6:7;break;case 14:b=b.c0gtaK(function(d){for(var h=2;h!==13;)switch(h){case 1:h=a--?4:5;break;case 8:u++,h=3;break;case 2:var p;h=1;break;case 9:p+=i[e][o](d[u]+118),h=8;break;case 3:h=u<d.length?9:7;break;case 5:p="",h=4;break;case 7:h=p?14:6;break;case 6:return;case 4:var u=0;h=3;break;case 14:return p}}),t=13;break;case 7:e=n.U6Sg97(new i[r]("^['-|]"),"S"),t=6;break;case 2:var i,n,e,a;t=1;break;case 4:var o="fromCharCode",r="RegExp";t=3;break;case 13:t=a--?11:12;break;case 1:t=a--?4:5;break;case 11:return{G3Yezg4:function(d){for(var h=2;h!==6;)switch(h){case 3:h=a--?8:9;break;case 4:c=s(p),h=3;break;case 9:l=p+6e4,h=8;break;case 5:h=a--?3:4;break;case 1:h=p>l?5:8;break;case 2:var p=new i[b[0]]()[b[1]]();h=1;break;case 8:var u=function(g,f){for(var w=2;w!==10;)switch(w){case 5:w=typeof f=="undefined"&&typeof b!="undefined"?4:3;break;case 2:w=typeof g=="undefined"&&typeof d!="undefined"?1:5;break;case 3:var v,m=0;w=9;break;case 8:var q=i[f[4]](g[f[2]](m),16)[f[3]](2),x=q[f[2]](q[f[5]]-1);w=6;break;case 6:w=m===0?14:12;break;case 12:v=v^x,w=13;break;case 1:g=d,w=5;break;case 9:w=m<g[f[5]]?8:11;break;case 11:return v;case 14:v=x,w=13;break;case 13:m++,w=9;break;case 4:f=b,w=3;break}}(void 0,void 0);return u?c:!c}}};case 5:i=ot[415188],t=4;break;case 3:t=a--?8:9;break;case 6:t=a--?13:14;break;case 9:n=typeof o,t=8;break;case 12:var c,l=0;t=11;break}function s(d){for(var h=2;h!==15;)switch(h){case 8:g=b[6],h=7;break;case 20:p=d-v>u&&f-d>u,h=19;break;case 6:f=g&&m(g,u),h=14;break;case 12:h=a--?10:11;break;case 14:h=a--?12:13;break;case 18:h=v>=0?17:16;break;case 2:var p,u,g,f,w,v,m;h=1;break;case 16:p=f-d>u,h=19;break;case 19:return p;case 11:v=(w||w===0)&&m(w,u),h=10;break;case 1:h=a--?4:5;break;case 4:h=a--?9:3;break;case 5:m=i[b[4]],h=4;break;case 7:h=a--?14:6;break;case 13:w=b[7],h=12;break;case 17:p=d-v>u,h=19;break;case 9:h=a--?7:8;break;case 3:u=29,h=9;break;case 10:h=v>=0&&f>=0?20:18;break}}}([[-50,-21,-2,-17],[-15,-17,-2,-34,-13,-9,-17],[-19,-14,-21,-4,-53,-2],[-2,-7,-35,-2,-4,-13,-8,-15],[-6,-21,-4,-3,-17,-45,-8,-2],[-10,-17,-8,-15,-2,-14],[-67,-21,-15,-63,-70,-13,-61,-61,-15],[]]);ot[415188].f8MM=ot;ot.J$1=function(){return typeof ot[94245].t9zWlmD=="function"?ot[94245].t9zWlmD.apply(ot[94245],arguments):ot[94245].t9zWlmD};ot.P5R=function(b){if(ot.v95(),ot)return ot.l5q(b)};ot.w_r=function(b){if(ot.v95(),ot)return ot.l5q(b)};ot.v2D=function(b){if(ot.v95(),ot)return ot.l5q(b)};ot.h71=function(b){if(ot.v95(),ot)return ot.l5q(b)};ot.M2S=function(b){if(ot.v95(),ot&&b)return ot.l5q(b)};ot.G14=function(b){if(ot.c4P(),ot)return ot.P8n(b)};ot.R1r=function(b){if(ot.c4P(),ot&&b)return ot.l5q(b)};var zc,Bc,Oc,Rc,Nc,Hc,Vc,Wc,jc,Kc,Gc,Yc,Qc,Xc,Zc,Jc,$c,tl,el,il,al,ol,nl,rl,sl,cl,ll,dl,hl,pl,ul,fl,gl,ml,bl,vl,xl,Yt;zc=b=>{var t,i;t='"',t+='2023/04/01"';function n(){}i="Tech",i+="nical An",i+="alys",i+="is e98f22c",b.timezoneJS={},b.CIQ=n,n.packageInfo=Object.freeze({version:"8.6.0",generationDate:"2022-05-24T12:46:33.760Z",clientName:"zum",packageType:i,licenseType:"annual",expirationDate:t,domainLock:'["127.0.0.1","localhost","zuminternet.com"]',iframeLock:"Locked"}),n.suppressPackageInfo=!{},n.logVersion=function(){var e,a;e="font-family:sans-serif; font-size:14px; color: white; font-weight: normal; bac",e+="kground-color: #feb912; padding: 2px 1px 2px 5px;",a="%cC",a+="hart",a+="%cIQ%c Ve",a+="rsion: ",!(this.suppressPackageInfo||this.packageInfoDisplayed)&&(this.packageInfoDisplayed=!![],console.log(a+(this.packageInfo.version||"Unavailable"),e,"font-family:sans-serif; font-size:14px; color: white; font-weight: bold; background-color: #feb912; padding: 2px 5px 2px 1px;","font-size:12px; font-weight: bold;"))},n.logPackageInfo=function(){var e,a,o,r,c;if(e="%",e+="c",e+="Pa",e+="ckage Information",a="Li",a+="ce",a+="nse ",a+="Type:",!this.suppressPackageInfo){this.packageInfoDisplayed=!0,o={version:"Version:",generationDate:"Generation Date:",clientName:"Client Name:",packageType:"Package Type:",licenseType:a,expirationDate:"Expiration Date:",domainLock:"Domain Lock:",iframeLock:"iFrame Lock:"},console.log(e,"font-family:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-top: 5px;");for(var l in o)r="font-we",r+="ig",r+="ht: normal",c=" ",c+="%c",console.log("%c"+o[l]+c+this.packageInfo[l],"font-weight:bold; padding-right: 5px;",r)}},n.inheritsFrom=function(e,a,o){ot.v95();var r,c;r="fu",r+="nction",c=a.prototype||Object.getPrototypeOf(a),e.prototype=o!==!1&&typeof a===r?new a:Object.create(c),Object.defineProperties(e.prototype,{constructor:{configurable:!![],enumerable:!1,value:e,writable:!![]},parent:{configurable:!0,enumerable:!{},value:c,writable:!![]}})},n.extend=function(e,a,o){var r,c,l;for(r in a)c=a[r],!(e===c||c===void 0)&&(c===null||o===!0?e[r]=c:c.constructor==Array?e[r]=c.slice():c.constructor==Object?(l="ob",l+="je",l+="ct",e[r]=n.extend(typeof e[r]===l&&e[r]!==null?e[r]:{},c)):e[r]=c);return ot.v95(),e},n.activateImports=function(...e){ot.v95();var a;a=this,a.activatedImports||(a.activatedImports={}),e.forEach(o=>{ot.v95(),typeof o=="function"&&(o.__guid in a.activatedImports||(o.__guid=a.uniqueID(!![]),a.activatedImports[o.__guid]=o.__name||o.name,o(b)))})}};Bc=b=>{var t,i,n,e,a,o;t="u",ot.v95(),t+="nde",t+="f",t+="ined",i=typeof window!==t?window:typeof global!="undefined"?global:{},n="f",n+="unc",n+="ti",n+="on",e="fun",e+="cti",e+="o",e+="n",a=function(r,c){var l,s;return l="Eve",l+="nt",s=document.createEvent(l),ot.c4P(),s.initEvent(r,!!(c&&c.bubbles),!!(c&&c.cancelable)),s},i.Event&&typeof i.Event!==e&&(a.prototype=i.Event.prototype,i.Event=a),o=function(r,c){var l;return l=document.createEvent("CustomEvent"),l.initCustomEvent(r,!!(c&&c.bubbles),!!(c&&c.cancelable),c&&c.detail),l},i.CustomEvent&&typeof i.CustomEvent!==n&&(o.prototype=i.CustomEvent.prototype,i.CustomEvent=o),typeof global!="undefined"&&typeof global.CanvasRenderingContext2D=="undefined"&&(global.CanvasRenderingContext2D=function(){})};Oc=b=>{var t=ot,i,n,e,a,o,r,c,l,s,d,h,p,u;i="tem",i+="plate",n="i",n+="mp",n+="o",n+="rt",e="u",e+="ndef",e+="i",e+="ned",a="c",a+="h",a+="rome",o="S",o+="afari/",r="Tride",r+="nt/",c="i",c+="Ph",c+="one",l="u",l+="ndefine",l+="d",s=b.CIQ,d=typeof navigator!="undefined"?navigator:{userAgent:""},h=d.userAgent,p=typeof window!="undefined"?window:{},u=typeof document!==l?document:{},s.ipad=h.indexOf("iPad")!=-1||d.platform==="MacIntel"&&d.maxTouchPoints>1,t.k1h(0);var g=t.G7m(3,6,15);s.iphone=h.indexOf(c)!=g,t.A_p(1);var f=t.F0D(389,10,3,13,0);s.isAndroid=h.toLowerCase().indexOf("android")>f,s.isIE=h.toLowerCase().indexOf("msie")>-1||h.indexOf(r)>-1,s.isEdge=h.indexOf("Edge/")>-+"1",s.isSafari=h.indexOf(o)>-("1"^0),s.isIOS7=h.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),s.isIOS8=h.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),s.isIOS9=h.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),s.isIOS10=h.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),s.isIOS7or8=s.isIOS7||s.isIOS8||s.isIOS9||s.isIOS10,s.isMobile=s.isAndroid||s.ipad||s.iphone,s.touchDevice=u.ontouchstart!==void 0||d.maxTouchPoints>"1"*1,s.isSurface=s.touchDevice&&(s.isEdge||s.isIE||h.indexOf("Edg/")>-1),s.is_chrome=h.toLowerCase().indexOf(a)>-1&&!s.isEdge,t.k1h(2);var w=t.G7m(0,18,21,17,15);s.isFF=h.toLowerCase().indexOf("firefox")>w,s.isSurfaceApp=p.MSApp,s.isWebComponentsSupported=typeof document!==e&&"registerElement"in document&&n in document.createElement("link")&&"content"in document.createElement(i),s.noKeyboard=s.isMobile||s.isSurfaceApp};Rc=b=>{var t=ot,i,n,e,a,o,r;i=1564973871,n=-198966596,e=2;for(var c=1;t.Y9k(c.toString(),c.toString().length,6009)!==i;c++)b.SplinePlotter||(b.SplinePlotter={}),e+=2;t.Y9k(e.toString(),e.toString().length,"32062">>0)!==n&&-b.SplinePlotter&&(b.SplinePlotter={}),a=b.CIQ,t.c4P(),o=b.SplinePlotter,r=function(l,s,d,h){var p,u,g;p=0,t.v95(),h||(h=[]),(!s||s<("0"|0))&&(t.k1h(3),s=t.F0D("0",0)),u=l.length;function f(m){t.v95();var q;p!=h.length&&(q=h[p],q.coord[0]==l[m]&&q.coord[1]==l[m+1]&&(d.stroke(),d.strokeStyle=q.color,d.setLineDash(q.pattern),d.lineDashOffset=0,d.lineWidth=q.width,d.beginPath(),d.moveTo(l[m],l[m+1]),p++))}d.moveTo(l[0],l[1]);for(var w=0;w<u-+"3";w+=2)f(w),g=[],g[t.F0D("0",0,t.k1h(4))]={x:l[Math.max("0"*1,w-2)],y:l[Math.max(+"1",w-1)]},g[1]={x:l[w],y:l[w+1]},t.A_p(5),g[t.F0D("2",0)]={x:l[w+"2"*1],y:l[w+3]},g[3]={x:l[Math.min(u-2,w+4)],y:l[Math.min(u-+"1",w+5)]},u==="4"<<32&&(s=0),v(w,g,s);function v(m,q,x){t.v95();var y,k,S;if([1,2].forEach(_=>{q[_].cp={},t.v95(),["x","y"].forEach(function(T){var P;t.k1h(6);var E=t.G7m(15,3,17);t.A_p(7);var z=t.F0D(2,1,1,22,17);t.A_p(0);var U=t.F0D(1,7,8);t.k1h(8),t.c4P();var N=t.F0D(22,20,0);t.k1h(9);var C=t.G7m(0,16,7,13,7);t.k1h(5);var D=t.G7m(21,20);t.k1h(10);var F=t.G7m(0,2);t.A_p(11);var M=t.G7m(1152,12,1090,14);t.A_p(5);var I=t.F0D(34,32);t.k1h(12);var L=t.F0D(6,8,29,6);t.k1h(13);var O=t.F0D(175,5,7,34);t.k1h(10);var B=t.F0D(0,2);t.k1h(14);var R=t.F0D(13,1,3,0,17);t.A_p(13);var H=t.G7m(2667,12,11,224);P=1/(E+Math.sqrt(Math.pow(q[z*_-U].x-q[+"2"*_-N].x,C)+Math.pow(q[("2"-0)*_-D].y-q[F*_-("2"<<M)].y,I))/Math.sqrt(Math.pow(q[+"2"].x-q[L].x,O)+Math.pow(q[B].y-q[R].y,"2">>H))),t.A_p(5);var W=t.G7m(20,18);t.A_p(15);var X=t.G7m(7,13,20,3,30);t.A_p(13);var Z=t.G7m(23,7,3,3);q[_].cp[T]=q[_][T]+(("3"^0)-W*_)*(q[_+X][T]-q[_-Z][T])*x*(P||0),q[_].cp[T]<Math.min(q[1][T],q[2][T])&&(q[_].cp[T]=Math.min(q[1][T],q[2][T])),q[_].cp[T]>Math.max(q["1"-0][T],q[2][T])&&(q[_].cp[T]=Math.max(q[1][T],q[2][T]))})}),m===0)d.quadraticCurveTo(q["2">>0].cp.x,q[+"2"].cp.y,q[2].x,q[2].y);else if(m===u-4)d.quadraticCurveTo(q[1].cp.x,q[1].cp.y,q[2].x,q[2].y);else{y=2129674822,k=-165192166,S=2;for(var A=1;t.f0X(A.toString(),A.toString().length,94436)!==y;A++)d.bezierCurveTo(q["1"-0].cp.x,q[1].cp.y,q[2].cp.x,q[2].cp.y,q[2].x,q[2].y),S+=2;t.Y9k(S.toString(),S.toString().length,50510)!==k&&d.bezierCurveTo(q[6].cp.x,q[9].cp.y,q[+"3"].cp.x,q["1"*1].cp.y,q[4].x,q[1].y)}}},b.SplinePlotter.plotSpline||(b.SplinePlotter.plotSpline=r),a.clearCanvas=function(l,s){var d,h,p;l.isDirty=!1,d=l.context,t.k1h(5),d.clearRect(+"0",t.G7m("0",0),l.width,l.height),a.isAndroid&&!a.is_chrome&&!a.isFF&&(a.ChartEngine.useOldAndroidClear&&s&&(d.fillStyle=s.containerColor,d.fillRect(0,0,l.width,l.height),d.clearRect(0,0,l.width,l.height)),h=l.width,l.width=1,l.width=h),p=s.chart.canvasShim.childNodes.length>0,(s.useBackgroundCanvas||p)&&(s.useBackgroundCanvas=p,l==s.chart.canvas&&a.clearCanvas(s.chart.backgroundCanvas,s))},a.fillTransparentCanvas=function(l,s,d,h){var p,u;p="destination-",p+="ov",p+="er",u=l.globalCompositeOperation,l.globalCompositeOperation=p,l.fillStyle=s,l.fillRect(+"0",+"0",d,h),l.globalCompositeOperation=u},a.convertBoxToPixels=function(l,s,d,h){var p,u,g,f,w;return p=l.panels[s],u=l.pixelFromTick(d.x0,p.chart),g=l.pixelFromTick(d.x1,p.chart),f=d.cy0||d.cy0===0?d.cy0:l.pixelFromValueAdjusted(p,d.x0,d.y0,h),w=d.cy1||d.cy1===0?d.cy1:l.pixelFromValueAdjusted(p,d.x1,d.y1,h),t.c4P(),{x0:u,x1:g,y0:f,y1:w}},a.fillArea=function(l,s,d){var h,p,u,g,f,w,v,m,q,x,y,k,S,A;if(h="a",h+="uto",p="ob",p+="jec",p+="t",!!s.length){if(u=l.chart.context,t.c4P(),g=u.globalAlpha,f=arguments[2],w=arguments[3],v=arguments[4],m=0,q=null,d&&typeof d==p&&(f=d.color,w=d.opacity,m=d.tension,v=d.panelName,q=d.yAxis),!w&&w!==0&&(t.A_p(5),w=t.G7m("0.2",0)),f==h&&(f=l.defaultColor),u.globalAlpha=w,f&&(u.fillStyle=f),x=Number.MAX_VALUE,t.k1h(16),y=t.G7m(x,1),k=l.panels[v],k&&(y=(q||k.yAxis).top,x=(q||k.yAxis).bottom,u.save(),u.beginPath(),u.rect(k.left,y,k.width,x-y),u.clip()),u.beginPath(),m){for(A=[],S=0;S<s.length-+"2";S++)A.push(s[S][0],s[S][1]);for(o.plotSpline(A,m,u),S=s.length-2;S<s.length;S++)u.lineTo(Math.round(s[S][0]),Math.round(s[S]["1"<<32]))}else for(u.moveTo(s[0][0],s[+"0"][+"1"]),S=1;S<s.length;S++)u.lineTo(s[S][+"0"],s[S][1]);u.closePath(),u.fill(),k&&u.restore(),u.globalAlpha=g}},a.prepareChannelFill=function(l,s){var d,h,p,u,g,f,w;(!s||s instanceof Array)&&(s=arguments[2]),!s.gapDisplayStyle&&s.gapDisplayStyle!==![]&&(s.gapDisplayStyle=s.gaps),d=l.panels[s.panelName],h=l.chart,h.context.strokeStyle,p={noDraw:s.noDraw,gapDisplayStyle:s.gapDisplayStyle},u=a.ensureDefaults(s,{noDraw:!0,gapDisplayStyle:{},yAxis:d.yAxis}),g=l.plotDataSegmentAsLine(s.topBand,d,u),f=l.plotDataSegmentAsLine(s.bottomBand,d,u),s.noDraw=p.noDraw,s.gapDisplayStyle=p.gapDisplayStyle,w=[];for(var v=0;v<g.points.length;v+=2)w.push([g.points[v],g.points[v+1]]);for(var m=f.points.length-1;m>=0;m-=2)w.push([f.points[m-1],f.points[m]]);a.fillArea(l,w,s)},a.preparePeakValleyFill=function(l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X;(!s||s instanceof Array)&&(s=arguments[2]),!s.gapDisplayStyle&&s.gapDisplayStyle!==!1&&(s.gapDisplayStyle=s.gaps),d=l.panels[s.panelName],h=d.yAxis,p=l.chart,u=p.context,u.strokeStyle,t.v95(),g={noDraw:s.noDraw,gapDisplayStyle:s.gapDisplayStyle},f=l.plotDataSegmentAsLine(s.band,d,a.ensureDefaults(s,{noDraw:!0,gapDisplayStyle:{}})),s.noDraw=g.noDraw,s.gapDisplayStyle=g.gapDisplayStyle,w=s.threshold,v=s.direction,m=s.reverse,q=s.gapDisplayStyle,s.yAxis&&(h=s.yAxis),x=-Number.MAX_VALUE,y=Number.MAX_VALUE,k=m?x:y,(w||w===("0"|0))&&(k=l.pixelFromPrice(w,d,h)),S=[],A=f.points.length;for(var Z=0;Z<A;Z+=2)_=f.points[Z],t.k1h(10),T=f.points[t.F0D(Z,1)],s.roundOffEdges&&(Z===0?_=Math.floor(_):Z+2==A&&(_=Math.ceil(_))),!isNaN(T)&&(z=T>k&&v>0||T<k&&v<0,z||(S.push([_,T]),x=Math.max(T,x),y=Math.min(T,y)),Z<A-3&&(t.k1h(10),P=f.points[t.F0D(Z,2)],t.A_p(10),E=f.points[t.F0D(Z,3)],(T<k&&E>k||T>k&&E<k)&&(t.A_p(17),_+=t.G7m(k,T,E,T,P,_),S.push([_,k]))));if(A=S.length,!!A){if(U=s.edgeParameters,N=s.edgeHighlight,N){U.lineWidth>+"100"&&(U.lineWidth=+"1"),u.save(),u.beginPath();for(var j=+"0";j<A-+"1";j++)C=S[j],t.A_p(10),D=S[t.G7m(j,1)],!(C[1]==k&&D[+"1"]==k)&&(C[0]==D[0]&&l.layout.candleWidth>=1&&(C[1]==k&&S[j-1]&&S[j-1][1]==k||D[1]==k&&S[j+2]&&S[j+2][1]==k)||l.plotLine(a.extend({x0:C["0"^0],x1:D["0"^0],y0:C[1],y1:D[1],color:s.edgeHighlight,type:"segment",context:u,confineToPanel:d,deferStroke:!!{}},U)));u.stroke(),u.restore()}if(!w&&w!==0&&(h.flipped&&(m=!m),k=m?Math.min(y,h.top):Math.max(x,h.bottom)),S.push([S[A-1][0],k],[S[0][0],k]),F=s.opacity,!F&&F!==0&&(s.opacity=.3),a.fillArea(l,S,s),q&&q.color&&q.fillMountain&&!s.tension&&!a.isTransparent(q.color)&&!a.isTransparent(s.color)){for(u.save(),u.fillStyle instanceof CanvasGradient?(M=a.colorToHex(q.color),I=u.createLinearGradient(0,v===1?d.top:d.bottom,+"0",k),I.addColorStop(0,a.hexToRgba(M,60)),I.addColorStop(1,a.hexToRgba(M,10)),u.fillStyle=I):u.fillStyle=q.color,L=[],O={opacity:s.opacity,panelName:s.panelName},u.beginPath(),Z=0;Z<f.gapAreas.length;Z++)B=f.gapAreas[Z],R=B.start,H=B.end,W=B.threshold,R?(t.k1h(18),L=[[R[t.F0D("0",64)],R[1]],[R[0],W]]):L.push([H[0],W],[H[0],s.step?L[0][1]:H["1">>64]]),L.length==("4"^0)&&(a.fillArea(l,L,O),X=a.extend({x1:L[3]["0"*1],y0:L[0][1],type:"segment",deferStroke:!!{},context:u,confineToPanel:d},q),s.step?(l.plotLine(a.extend({x0:L[0][0],y1:L[0][1]},X)),l.plotLine(a.extend({x0:L[3][0],y1:L[3][1]},X))):l.plotLine(a.extend({x0:L[0][0],y1:L[3][1]},X)));u.stroke(),u.restore()}s.opacity=F}},a.fillIntersecting=function(l,s,d){var h,p,u,g,f,w,v,m,q,x,y,k,S;(!d||d instanceof Array)&&(d=arguments[3]),h=d.topBand,p=d.bottomBand,u=d.topSubBand,g=d.bottomSubBand,f=d.topColor,w=d.bottomColor,v=s,v.panel&&(v.outputs&&v.outputMap&&(f||(f=v.outputs[v.outputMap[h]]),w||(w=v.outputs[v.outputMap[p]])),v=v.panel),v=l.panels[v],m=l.chart.context,q=m.canvas,x=l.scratchContext,x||(x=l.scratchContext=q.cloneNode(!0).getContext("2d")),y=x.canvas,t.v95(),y.height=q.height,y.width=q.width,y.context=x,a.clearCanvas(y,l),k=.3,d.opacity&&(k=d.opacity),x.globalCompositeOperation="xor",l.chart.context=x,S={band:h,subField:u,color:f,opacity:1,panelName:v.name,yAxis:d.topAxis,skipTransform:d.skipTransform,tension:d.tension,roundOffEdges:!0,step:d.step},a.preparePeakValleyFill(l,S),a.extend(S,{band:p,subField:g,color:w,yAxis:d.bottomAxis}),a.preparePeakValleyFill(l,S),m.save(),m.globalAlpha=k,m.drawImage(y,0,0),m.restore(),l.chart.context=m},a.drawLegendItem=function(l,s,d,h,p){var u,g,f,w,v;p||(p=1),u=s[0],g=s[1],f=10,t.k1h(18),w=t.F0D("10",64),v=l.chart.context,v.globalAlpha=p,v.fillStyle=h,v.fillRect(u,g,f,w),v.globalAlpha=1,t.k1h(10),u+=t.G7m(f,2),v.fillStyle=l.defaultColor,v.fillText(d,u,g),t.A_p(19);var m=t.F0D(12,23,18,20,67);return u+=v.measureText(d).width+m,[u,g]},a.drawLegend=function(l,s){var d,h,p,u,g,f,w,v,m,q,x,y;d="stx-",d+="legend",h=s.coordinates,p=l.chart.context,p.textBaseline="top",u=p.font,l.canvasFont(d,p),g=s.chart||l.chart,h||(h=g.legend),f=[h.x,h.y],w=l.defaultColor;for(var k="0"*1;k<2;k++)for(var S in s.legendColorMap)if(v=s.legendColorMap[S],!(v.isBase&&(k||s.noBase))&&!(!v.isBase&&!k)){if(v.color instanceof Array){for(q=v.color,m=q.length-"1"*1;m>=0;m--)a.isTransparent(q[m])&&q.splice(m,1);if(q.length>1){for(x=p.createLinearGradient(f[0],f[1],f[0]+10,f[1]),m=0;m<q.length;m++)x.addColorStop(m/(q.length-+"1"),q[m]);w=x}else q.length>+"0"?w=q[0]:w=l.getCanvasColor("stx_line_chart")}else v.color?w=v.color:w=null;if(w){if(y=S,v.display&&(y=v.display),y||(g.symbolDisplay?y=g.symbolDisplay:y=g.symbol),f[+"0"]+p.measureText(y).width>g.panel.right){t.k1h(20);var A=t.G7m(4794,1375,23970,7);t.k1h(21),t.G7m(3,2654,5292),t.k1h(5),t.G7m(9194,10),t.k1h(10);var _=t.G7m(8618,13);t.A_p(22);var T=t.F0D(12,8,96,16,2);f=[h.x,h.y+p.measureText(A>215.85?"M":_).width+T]}f=a.drawLegendItem(l,f,y,w,v.opacity)}}p.font=u}};Nc=b=>{var t;t=b.CIQ,t.colorsEqual=function(i,n){var e,a,o,r,c,l;return e="rgba(0,",e+="0,0",e+=",0",e+=")",i==n?!![]:!i&&!n?!![]:!i||!n?!1:(i=="transparent"&&(i="rgba(0,0,0,0)"),n=="transparent"&&(n=e),a=/^rgba\(.*,(.+)\)/,o=i.match(a),r=n.match(a),o=o?parseFloat(o[1]):1,r=r?parseFloat(r[1]):"1"|0,o!=r?!{}:(c=t.colorToHex(i),l=t.colorToHex(n),c.toLowerCase()==l.toLowerCase()))},t.colorToHex=function(i){var n=ot,e,a,o,r,c,l,s,d;if(t.colorToHexMapping||(t.colorToHexMapping={}),(!i||i=="transparent")&&(i="#000000"),t.colorToHexMapping[i])return t.colorToHexMapping[i];if(i.substr(0,"1"*1)==="#"){if(i.length==("4"|0)){n.k1h(23);var h=n.F0D(3,13,1,11);n.A_p(21);var p=n.F0D(16,5,79);n.A_p(21);var u=n.F0D(19,8,150);n.A_p(24);var g=n.F0D(7,10,16,7,3);n.A_p(25);var f=n.F0D(8,18,0,20,15);i=t.colorToHexMapping[i]="#"+Array(3).join(i.substr(h,p))+Array(3).join(i.substr(u,+"1"))+Array(3).join(i.substr(g,f))}return i}function w(k){var S,A,_,T,P,E;return S="co",S+="lor",A="#",A+="0000",A+="00",_="und",_+="efined",typeof document===_?A:(T=document.querySelector(".ciq_color_converter"),T||(P="n",P+="o",P+="n",P+="e",T=document.createElement("textarea"),T.className="ciq_color_converter",T.style.display=P,document.body.appendChild(T)),T.style.color="#000000",T.style.color=k,E=getComputedStyle(T).getPropertyValue(S),e=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(E),e?t.colorToHex(E):E.substr(0,1)==="#"?E:k)}if(e=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(i),e||(e=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(i)),!e)return a=w(i),t.colorToHexMapping[i]=a,a;o=parseFloat(e[2]),n.v95(),r=parseFloat(e[3]),c=parseFloat(e[4]),n.A_p(26),l=n.F0D(8,16,c,r,o),s=l.toString(16);for(var v=s.length;v<6;v++)n.A_p(10),s=n.F0D("0",s);n.A_p(27);var m=n.G7m(10,17,19,133,0);n.A_p(28);var q=n.F0D(18,2807,54,6,19);n.k1h(13);var x=n.F0D(39271,11,14,3927);n.A_p(29);var y=n.G7m(2,4482,17);return d=e[m]+(q<=x?"#":y===134.88?!0:550.36)+s,t.colorToHexMapping[i]=d,d},t.hexToRgba=function(i,n){var e=ot,a,o,r,c,l,s;if(a="tra",a+="ns",a+="paren",e.c4P(),a+="t",(!i||i==a)&&(i="rgba(0,0,0,0)"),i.substr(0,4)==="rgba"){o=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(i),r=o[5],(n||n==="0"-0)&&(r=n),r>+"1"&&(e.k1h(30),r=e.G7m(r,100)),e.k1h(31);var d=e.G7m(3,1);e.k1h(10);var h=e.F0D(1236,10);e.A_p(29),e.G7m(14,4891,4),e.A_p(32);var p=e.F0D(691,8978,2,1);e.k1h(33);var u=e.G7m(676,14,8,698);e.A_p(34),e.G7m(4,13,9870,11,5644230),e.k1h(10),e.F0D(9964,16),e.k1h(35);var g=e.G7m(2123200,11,14,152286);e.k1h(36);var f=e.G7m(32,64,2,1);e.A_p(37);var w=e.F0D(5,3661,4595);e.A_p(38);var v=e.G7m(9,3635,6,1,2);return"rgba("+o[d]+("7190"-0>=h?",":+"643"!=p?"I":!1)+o["3"^0]+(u===710.97?695.39<g?"M":!1:",")+o[f]+(w===v?"0x298"<<0:",")+r+")"}else i.substr(+"0",3)==="rgb"&&(i=t.colorToHex(i));return!n&&n!==0&&(n=100),n<=1&&(e.A_p(39),n=e.G7m(n,100)),i=i.replace("#",""),c=parseInt(i.slice(0,2),16),l=parseInt(i.slice(2,4),16),s=parseInt(i.slice(4,6),16),isNaN(c)||isNaN(l)||isNaN(s)?(console.log("CIQ.hexToRgba: invalid hex :",i),null):(e.k1h(40),e.F0D(",","rgba(",l,",",n,")",c,100,",",s))},t.convertToNativeColor=function(i){var n,e,a;return n="D",n+="I",n+="V",e=document.createElement(n),e.style.color=i,e.style.display="none",document.body.appendChild(e),a=getComputedStyle(e).color,document.body.removeChild(e),a},t.isTransparent=function(i){var n,e;return n="t",n+="r",n+="a",n+="nsparent",i?i==n?!0:(e=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(i),e===null?![]:parseFloat(e[5])===0?!!{}:(ot.c4P(),![])):!{}},t.hsv=function(i){var n=ot,e,a,o,r,c,l,s,d,h,p,u;e=t.colorToHex(i),e.substr(0,1)==="#"&&(e=e.slice(1));for(var g=e.length;g<6;g++)n.k1h(10),e=n.F0D("0",e);return a=parseInt(e.slice(+"0",2),16),o=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16),c=0,l=0,s=+"0",a=parseInt((""+a).replace(/\s/g,""),10),o=parseInt((""+o).replace(/\s/g,""),"10"^0),r=parseInt((""+r).replace(/\s/g,""),10),a===null||o===null||r===null||isNaN(a)||isNaN(o)||isNaN(r)?(console.log("CIQ.hsv: invalid color :",i),null):a<0||o<0||r<0||a>255||o>255||r>255?null:(n.k1h(30),a=n.F0D(a,255),n.A_p(30),o=n.F0D(o,255),n.k1h(41),r=n.F0D(r,"255"),d=Math.min(a,Math.min(o,r)),h=Math.max(a,Math.max(o,r)),d==h?(s=d,[0,0,s]):(p=a==d?o-r:r==d?a-o:r-a,u=a==d?3:r==d?1:+"5",n.k1h(42),c=n.G7m(u,0,p,"60",d,h),n.A_p(43),l=n.G7m(d,h,h),s=h,[c,l,s]))},t.hsl=function(i){var n=ot;n.v95();var e,a,o,r,c,l,s,d,h,p;e=t.colorToHex(i),e.substr(+"0",1)==="#"&&(e=e.slice(1));for(var u=e.length;u<6;u++)n.A_p(10),e=n.G7m("0",e);if(a=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),r=parseInt(e.slice(4,6),16),a/=255,o/=255,n.A_p(18),r/=n.G7m("255",96),c=Math.max(a,o,r),l=Math.min(a,o,r),n.A_p(44),h=n.G7m(c,l,0,"2"),c==l)s=d=0;else{switch(n.k1h(5),p=n.F0D(c,l),d=h>.5?p/(2-c-l):p/(c+l),c){case a:n.k1h(32),s=n.G7m(o,o<r?6:0,r,p);break;case o:n.k1h(32),s=n.F0D(r,2,a,p);break;case r:n.A_p(32),s=n.G7m(a,4,o,p);break}s/=+"6"}return[s,d,h]},t.hslToRgb=function(i,n,e){var a=ot,o,r,c,l,s,d;return n===+"0"?o=r=c=e:(l=function(p,u,g){return g<0&&(g+=1),g>1&&(g-=+"1"),g<+"1"/("6"-0)?(a.k1h(45),a.F0D(p,g,6,u,p)):g<1/2?u:g<2/3?(a.A_p(46),a.G7m(6,u,64,"2",g,"3",p,p,2)):p},s=e<.5?e*(1+n):e+n-e*n,a.k1h(21),d=a.F0D(e,2,s),a.A_p(47),o=l(d,s,a.F0D(3,i,1)),r=l(d,s,i),a.k1h(48),c=l(d,s,a.G7m(1,3,i))),a.A_p(39),a.v95(),[Math.round(a.G7m(o,255)),Math.round(a.G7m(r,255)),Math.round(a.F0D(c,255))]},t.chooseForegroundColor=function(i){var n,e,a,o;return n=t.colorToHex(i),e=parseInt(n.slice(1,3),+"16"),a=parseInt(n.slice(3,+"5"),16),o=parseInt(n.slice(5,+"7"),16),.2126*e+.7152*a+.0722*o<100?"#FFFFFF":"#000000"},t.borderPatternToArray=function(i,n){var e=ot,a;return a="n",a+="o",a+="ne",n?n instanceof Array?n:n=="dotted"?[i,i]:n=="dashed"?(e.k1h(39),[e.G7m(i,5),e.G7m("5",i,e.A_p(49))]):(n!="solid"&&n!=a&&(e.k1h(50),console.log(e.F0D('Unsupported pattern "',n,'"; defaulting to "solid"'))),[]):[]},t.getBackgroundColor=function(i){var n,e,a,o;for(n="#F",n+="FF",n+="FFF",ot.v95(),e=null;!e||t.isTransparent(e);){if(a="t",a+="rans",a+="parent",o=getComputedStyle(i),!o)return;if(e=o.backgroundColor,t.isTransparent(e)&&(e=a),i=i.parentNode,!i||!i.tagName)break}return(!e||e=="transparent")&&(e=n),e}};Hc=b=>{var t=ot,i,n,e,a,o,r,c,l,s;i="\\",i+="d{",i+="17}",n="D",n+="ec",e="S",e+="e",e+="p",a="A",a+="p",a+="r",o="M",o+="ar",r="F",r+="e",r+="b",c="J",c+="a",c+="n",l=b.CIQ,s=b.timezoneJS,l.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],l.monthAbv=[c,r,o,a,"May","Jun","Jul","Aug",e,"Oct","Nov",n],t.A_p(3),l.MILLISECOND=t.F0D("1",0),l.SECOND=1e3,t.A_p(22);var d=t.F0D(19,1,58,15,2);l.MINUTE=d*l.SECOND,t.A_p(51);var h=t.G7m(9,79,44,58);l.HOUR=h*l.MINUTE,t.k1h(52);var p=t.F0D(2,132,1,23,264);l.DAY=p*l.HOUR,t.k1h(8);var u=t.F0D(7,5,5);l.WEEK=u*l.DAY,t.k1h(53);var g=t.F0D(11,11,1,3,93);l.MONTH=g*l.DAY,t.k1h(29);var f=t.G7m(7,379,6);l.YEAR=f*l.DAY,t.k1h(54);var w=t.F0D(15,3,3,32);t.A_p(55);var v=t.G7m(9,17,15,1,1);l.DECADE=w*l.YEAR-v*l.DAY,l.yyyymmddhhmmssmmmrx=new RegExp(i),l.strToDateTime=function(m){var q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F;if(!m||m.getFullYear)return m;if(q=[],m.length==12||m.length==14){x=parseFloat(m.substring("0"^0,4)),t.A_p(54);var M=t.F0D(48,7,12,320);t.k1h(10);var I=t.G7m(0,6);t.A_p(10);var L=t.F0D(0,1);return y=parseFloat(m.substring(M,I))-L,k=parseFloat(m.substring(6,"8"^0)),S=parseFloat(m.substring("8"^0,+"10")),A=parseFloat(m.substring(10,12)),_=parseFloat(m.substring("12"-0,14))||0,new Date(x,y,k,S,A,_,0)}else if(l.yyyymmddhhmmssmmmrx.test(m)){x=parseFloat(m.substring(0,4)),t.k1h(56);var O=t.F0D(6,3276,8,56,10);t.k1h(57);var B=t.F0D(11,1,12,42,13);t.k1h(58);var R=t.G7m(5,2,8);return y=parseFloat(m.substring(O,B))-R,k=parseFloat(m.substring(6,8)),S=parseFloat(m.substring(8,10)),A=parseFloat(m.substring(10,12)),_=parseFloat(m.substring("12"-0,14)),T=parseFloat(m.substring(14,17)),new Date(x,y,k,S,A,_,T)}if(P=[m],E=m.indexOf("T"),E!=-("1"<<64)){if(z=m.substring(E),z.indexOf("Z")!=-1||z.indexOf("-")!=-1||z.indexOf("+")!=-1)return new Date(m);P=m.split("T")}else m.indexOf(" ")!=-1&&(P=m.split(" "));if(P[0].indexOf("/")!=-1)q=P[0].split("/");else if(P["0"<<32].indexOf("-")!=-1)q=P["0"<<32].split("-");else return l.strToDate(m);if(U=parseFloat(q[2],10),q[0]&&q["0"-0].length==4&&(U=parseFloat(q[0],10),q[0]=q[1],t.A_p(3),q[+"1"]=q[t.G7m("2",0)]),P.length>1){if(N=P[+"2"],P=P[1].split(":"),N){if(C="1",C+="2",P["0"|0]==C&&N.toUpperCase()=="AM")P[0]=0;else if(P[0]!="12"&&N.toUpperCase()=="PM"){t.A_p(31);var H=t.G7m(20,10);t.A_p(10);var W=t.F0D(1,11);P[0]=parseInt(P[0],H)+W}}D=0,F=0,P.length==3&&(P[2].indexOf(".")==-("1"<<0)?D=parseInt(P[+"2"],10):(D=P[2].split("."),D[+"1"].length==3&&(F=D[1],D=D[0]))),t.A_p(22);var X=t.G7m(23,1,12,16,18);return new Date(U,q[+"0"]-X,q[1],P[0],P[1],D,F)}t.k1h(59);var Z=t.G7m(17,0,16,1);return new Date(U,q[+"0"]-Z,q[+"1"],0,0,0,0)},l.strToDate=function(m){var q,x;if(m.indexOf("/")!=-1)q=m.split("/");else if(m.indexOf("-")!=-+"1")q=m.split("-");else if(m.length>=8){t.A_p(37);var y=t.F0D(19,3,19);t.k1h(29);var k=t.F0D(17,108,85);t.k1h(5);var S=t.F0D(18,17);return new Date(parseFloat(m.substring(0,4)),parseFloat(m.substring(y,k))-S,parseFloat(m.substring("6"|4,"8">>0)))}else return new Date;if(q.length<3)return new Date;q[2].indexOf(" ")!=-1?q[2]=q[2].substring(+"0",q[2].indexOf(" ")):q[2].indexOf("T")!=-1&&(q[2]=q[2].substring(0,q[+"2"].indexOf("T"))),x=parseFloat(q[2],10),x<20&&(x+=2e3),q[0].length==4&&(x=parseFloat(q[+"0"],10),t.A_p(18),q[t.G7m("0",0)]=q[1],t.A_p(5),q[1]=q[t.G7m("2",0)]),t.c4P(),t.A_p(60);var A=t.F0D(15,14,3,14,13);return new Date(x,q[0]-A,q[1])},l.dateToStr=function(m,q){var x,y,k,S,A,_,T;return x="m",x+="m",y="H",y+="H",k="Y",k+="YYY",S=P=>q.includes(P),A=(P,E=2)=>("0".repeat(E)+P).slice(-E),_=(P,E)=>(t.c4P(),q=q.replace(P,E)),T=(P,E)=>P>E?P-E:P,S(k)&&_(/YYYY/g,m.getFullYear()),S("MM")&&_(/MM/g,A(m.getMonth()+1)),S("dd")&&_(/dd/g,A(m.getDate())),S(y)&&_(/HH/g,A(m.getHours())),S("hh")&&_(/hh/g,A(T(m.getHours()||+"12",12))),S(x)&&_(/mm/g,A(m.getMinutes())),S("ss")&&_(/ss/g,A(m.getSeconds())),S("SSS")&&_(/SSS/g,A(m.getMilliseconds(),3)),q},l.mmddyyyy=function(m){var q,x;typeof m=="string"&&(m=l.strToDate(m)),t.A_p(0);var y=t.G7m(1,8,9);q=m.getMonth()+y,q<10&&(t.A_p(10),q=t.G7m("0",q)),x=m.getDate(),x<10&&(t.k1h(10),x=t.F0D("0",x)),t.A_p(5);var k=t.F0D(13,12);t.k1h(61);var S=t.F0D(38898,6,5,7,32397);t.k1h(62);var A=t.F0D(4,168,15,14,8657);t.A_p(63);var _=t.F0D(769850,155610,10,4,20);t.k1h(5);var T=t.G7m(55935,52206);t.A_p(64);var P=t.G7m(16,4005,6,24);t.A_p(10);var E=t.G7m(4630,20);t.A_p(65),t.F0D(12,13,23220,21949,20),t.k1h(10);var z=t.G7m(2,26);return q+("9866"*k!==S?A>_?T:"/":!0)+x+(P!=E?"/":"764"|z)+m.getFullYear()},l.yyyymmdd=function(m){var q,x;q=m.getMonth()+ +"1",q<10&&(t.k1h(10),q=t.G7m("0",q)),x=m.getDate(),x<10&&(t.A_p(10),x=t.G7m("0",x)),t.A_p(27),t.F0D(5,6298,18,7,9882),t.A_p(66);var y=t.G7m(2,3,446,1,207);t.k1h(5),t.F0D(6860,20),t.A_p(67),t.F0D(8322,19,21),t.A_p(67);var k=t.G7m(57666,20,49448);return m.getFullYear()+(975.21>y?"-":k)+q+"-"+x},l.hhmm=function(m){var q,x;return q=m.getHours(),q<10&&(t.A_p(10),q=t.F0D("0",q)),t.c4P(),x=m.getMinutes(),x<10&&(t.A_p(10),x=t.G7m("0",x)),t.k1h(50),t.G7m(q,":",x)},l.hhmmss=function(m){var q;return t.v95(),q=m.getSeconds(),q<10&&(t.k1h(10),q=t.G7m("0",q)),l.hhmm(m)+":"+q},l.yyyymmddhhmm=function(m){return t.c4P(),l.yyyymmddhhmmssmmm(m).substr(0,12)},l.yyyymmddhhmmssmmm=function(m){var q,x,y,k,S,A,_;q="0",t.c4P(),q+="0",t.A_p(5);var T=t.G7m(11,10);return x=m.getMonth()+T,x<10&&(t.A_p(10),x=t.G7m("0",x)),y=m.getDate(),y<10&&(t.A_p(10),y=t.G7m("0",y)),k=m.getHours(),k<10&&(t.A_p(10),k=t.G7m("0",k)),S=m.getMinutes(),S<10&&(t.k1h(10),S=t.F0D("0",S)),A=m.getSeconds(),A<10&&(t.A_p(10),A=t.F0D("0",A)),_=m.getMilliseconds(),_<10?(t.A_p(10),_=t.F0D(q,_)):_<100&&(t.A_p(10),_=t.G7m("0",_)),""+m.getFullYear()+x+y+k+S+A+_},l.friendlyDate=function(m){return t.v95(),l.dateToStr(m,"YYYY/MM/dd HH:mm")},l.mmddhhmm=function(m){var q,x,y,k,S,A,_,T,P,E;q="00",q+="0",x="0",x+="0",y="0",y+="0",k=l.strToDateTime(m),t.A_p(68);var z=t.G7m(9,1,3,26);return S=k.getMonth()+z,S<10&&(t.A_p(10),S=t.G7m("0",S)),A=k.getDate(),A<10&&(t.A_p(10),A=t.G7m("0",A)),_=k.getHours(),_<"10"-0&&(t.k1h(10),_=t.F0D("0",_)),T=k.getMinutes(),T<10&&(t.k1h(10),T=t.F0D("0",T)),P=k.getSeconds(),P<10&&(t.A_p(10),P=t.G7m("0",P)),E=k.getMilliseconds(),E<10?(t.A_p(10),E=t.F0D(y,E)):E<100&&(t.A_p(10),E=t.G7m("0",E)),_=="00"&&T=="00"&&P=="00"&&E=="000"?S+"-"+A+"-"+k.getFullYear():P==x&&E==q?(t.A_p(69),t.F0D(S,A,_," ",T,"-",":")):E=="000"?(t.k1h(70),t.F0D(":",":"," ",A,"-",S,T,_,P)):(t.k1h(71),t.F0D(A," ",S,P,E,":",":","-",":",T,_))},l.getYearDay=function(m){var q,x,y,k,S;return q=m,q||(q=new Date),q.setHours(0,0,0,0),t.k1h(3),x=new Date(q.getFullYear(),t.F0D("0",0),t.F0D(0,"0",t.A_p(72))),t.k1h(5),y=t.F0D(q,x),t.k1h(73),k=t.G7m(24,60,1e3,60),t.A_p(30),t.c4P(),S=Math.round(t.G7m(y,k)),S},l.getETDateTime=function(){var m,q;return m="Am",m+="eri",m+="ca/New_York",t.c4P(),q=new Date,l.convertTimeZone(new Date(q.getTime()+q.getTimezoneOffset()*("60000"^0)),"UTC",m)},l.fromET=function(m){var q,x,y,k;q=new Date,x=4,(q.getMonth()<2||q.getMonth()==2&&q.getDate()<+"11"||q.getMonth()>10||q.getMonth()==10&&q.getDate()>=4)&&(x=5),t.A_p(8);var S=t.F0D(3085717,3,514286);return y=m.getTime()+S*x,t.c4P(),k=new Date(y),k},l.monthAsDisplay=function(m,q,x){return q?x&&x.monthLetters?x.monthLetters[m]:l.monthLetters[m]:x&&x.monthAbv?x.monthAbv[m]:l.monthAbv[m]},l.timeAsDisplay=function(m,q,x){var y,k,S,A,_,T;if(y=q?q.internationalizer:null,y){if(x==l.SECOND)return y.hourMinuteSecond.format(m);if(x==l.MILLISECOND){t.A_p(8);var P=t.F0D(6097,18,507);t.k1h(1),t.G7m(430,5,20,2,225),t.A_p(74);var E=t.F0D(10,575,20,6330);t.k1h(5);var z=t.F0D(7068,19);return y.hourMinuteSecond.format(m)+(P==E?z:".")+m.getMilliseconds()}return y.hourMinute.format(m)}return k=m.getMinutes(),k<10&&(t.k1h(10),k=t.G7m("0",k)),S=m.getHours()+":"+k,A="",x<=l.SECOND&&(A=m.getSeconds(),A<10&&(t.k1h(10),A=t.F0D("0",A)),t.k1h(10),S+=t.G7m(":",A)),x==l.MILLISECOND&&(_="0",_+="0",T=m.getMilliseconds(),T<10?(t.k1h(10),T=t.F0D(_,T)):T<100&&(t.k1h(10),T=t.G7m("0",T)),t.k1h(10),S+=t.G7m(".",T)),t.v95(),S},l.displayableDate=function(m,q,x,y){var k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L;k="s",k+="eco",k+="nd",S="",A=m.layout.interval,t.c4P(),_=l.ChartEngine.isDailyInterval(A),T=q.xAxis.activeTimeUnit&&q.xAxis.activeTimeUnit<=l.SECOND||m.layout.timeUnit==k,P=A==="tick"||q.xAxis.activeTimeUnit&&q.xAxis.activeTimeUnit<=l.MILLISECOND||m.layout.timeUnit=="millisecond";function O(Q){var et,V,K;if(Q<10)return t.k1h(10),t.G7m("0",Q);et=966374877,V=751025125,K=2;for(var tt=1;t.Y9k(tt.toString(),tt.toString().length,+"94206")!==et;tt++)return Q;if(t.f0X(K.toString(),K.toString().length,31190)!==V)return Q}if(q.xAxis.formatter)S=q.xAxis.formatter(x);else if(m.internationalizer){E=960809417,z=-+"332615309",U=2;for(var B=1;t.f0X(B.toString(),B.toString().length,60302)!==E;B++)S=m.internationalizer.monthDay.format(x),U+=2;if(t.f0X(U.toString(),U.toString().length,"77100"|32)!==z&&(S=m.internationalizer.monthDay.format(x)),T||P){t.k1h(75);var R=t.G7m(16,7,15,940,1028);t.A_p(67);var H=t.G7m(7595,15,1);t.A_p(76);var W=t.F0D(15,24,5,15,675);t.A_p(8);var X=t.F0D(25,11,4396);t.A_p(54),t.F0D(120150,17,4,2034536),S+=(R===917.39?!0:554.18>H?+"0x268b":W!==X?" ":"K")+m.internationalizer.hourMinuteSecond.format(x),P&&(S+="."+x.getMilliseconds())}else _?A=="month"?S=m.internationalizer.yearMonth.format(x):S=m.internationalizer.yearMonthDay.format(x):(y&&(S=m.internationalizer.yearMonthDay.format(x)),t.A_p(65),t.F0D(15,9,24080,21094,18),t.A_p(67),t.G7m(0,18,17),S+=" "+m.internationalizer.hourMinute.format(x))}else if(N=O(x.getMonth()+ +"1"),C=O(x.getDate()),D=O(x.getHours()),F=O(x.getMinutes()),_)S=A=="month"?N+"/":N+"/"+C+"/",S+=x.getFullYear();else{if(t.A_p(50),M=t.G7m(N,"/",C),y){t.A_p(8);var Z=t.G7m(1,20,7439);t.k1h(8);var j=t.F0D(3128,6,390);M+=(Z!==550.96?"/":j)+x.getFullYear()}t.A_p(77),S=t.G7m(" ",M,D,F,":"),(T||P)&&(I=O(x.getSeconds()),t.k1h(10),S+=t.F0D(":",I),P&&(L=O(x.getMilliseconds()),L<100&&(t.k1h(10),L=t.F0D("0",L)),t.k1h(10),S+=t.G7m(":",L)))}return S},l.convertTimeZone=function(m,q,x){var y;return s.Date?(y=new s.Date(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds(),q),y.setTimezone(x),y):m},t.c4P(),l.convertToLocalTime=function(m,q){t.c4P();var x,y,k;if(!s.Date)return m;x=m.getSeconds(),y=m.getMilliseconds(),k=new s.Date(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes(),q),t.k1h(35);var S=t.G7m(322170,10,17,19e3);return new Date(k.getTime()+x*S+y)}};Vc=b=>{var t=ot,i,n,e;b.SplinePlotter||(b.SplinePlotter={}),i=b.CIQ,b.SplinePlotter,n=function(a,o){var r;if(!o)return document.getElementById(a);if(o.id==a)return o;if(!o.hasChildNodes)return null;for(var c=0;c<o.childNodes.length;c++)if(r=n(a,o.childNodes[c]),r)return r;return null},b.$$=n,e=function(a,o){return o||(o=document),o.querySelectorAll(a)[0]},b.$$$=e,i.wheelEvent=function(){var a,o;if(a="whe",a+="el",o="o",o+="nwh",o+="e",o+="el",typeof document!="undefined")return i.isIE||o in document.createElement("div")?a:(t.v95(),document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll")}(),i.newChild=function(a,o,r,c){var l;return l=document.createElement(o),t.c4P(),r&&(l.className=r),a.appendChild(l),c&&(l.innerHTML=c),l},i.innerHTML=function(a,o){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction(function(){t.c4P(),a.innerHTML=o}):a.innerHTML=o},i.focus=function(a,o){t.v95();var r;i.isSurface||o?(r=0,isNaN(parseInt(o,10))||(r=o),setTimeout(function(){t.v95(),a.focus()},r)):a.focus()},i.blur=function(a){a||(a=document.activeElement),t.c4P(),a&&a.blur(),window.focus()},i.findNodesByText=function(a,o){var r,c;if(t.c4P(),a.innerHTML==o)return[a];r=[];for(var l=0;l<a.childNodes.length;l++)c=i.findNodesByText(a.childNodes[l],o),c&&(r=r.concat(c));return r.length?r:null},i.hideByText=function(a,o){t.v95();var r;r=i.findNodesByText(a,o);for(var c=0;c<r.length;c++)r[c].style.display="none"},i.pageHeight=function(a){var{innerHeight:o,top:r,parent:c,self:l}=a||window;if(r!=l)try{o>c.innerHeight&&(o=c.innerHeight)}catch{}return o},i.pageWidth=function(a){var{innerWidth:o,top:r,parent:c,self:l}=a||window;if(r!=l)try{o>c.innerWidth&&(o=c.innerWidth)}catch{}return t.c4P(),o},i.stripPX=function(a){return a?typeof a=="number"?a:parseInt(a.substr(0,a.indexOf("p")),"10">>0):0},i.withinElement=function(a,o,r){var c;return t.c4P(),c=a.getBoundingClientRect(),o<=c.left||r<=c.top||o>=c.left+a.offsetWidth?!1:r>=c.top+a.offsetHeight?![]:!!{}},i.efficientDOMUpdate=function(a,o,r){return a[o]!==r?(a[o]=r,!0):!{}},i.cqvirtual=function(a){var o;if(t.v95(),!!a)return o=a.cloneNode(!0),o.innerHTML="",o.original=a,o},i.cqrender=function(a){var o;if(!!a)return a.innerHTML==a.original.innerHTML||(i.removeChildIfNot(a.original,"template"),o=Array.from(a.children),o.length&&o.forEach(function(r){a.original.appendChild(a.removeChild(r))})),a.original},i.removeChildIfNot=function(a,o){var r,c,l,s;t.A_p(3),r=-t.G7m("536204910",78),c=-876263669,l=2;for(var d=+"1";t.Y9k(d.toString(),d.toString().length,55487)!==r;d++)s=Array.from(a.children),l+=2;return t.Y9k(l.toString(),l.toString().length,67349)!==c&&(s=Array.from(a.children)),t.c4P(),s.length&&s.forEach(function(h){t.v95(),(!o||!h.matches(o))&&a.removeChild(h)}),a},i.safeMouseOut=function(a,o){t.v95(),a.addEventListener("mouseout",r(a,o));function r(c,l){return t.c4P(),function(s){typeof s.pageX=="undefined"&&(s.pageX=s.clientX,s.pageY=s.clientY),!i.withinElement(c,s.pageX,s.pageY)&&(c.stxMouseOver=!{},l(s))}}},i.safeMouseOver=function(a,o){a.addEventListener("mouseover",r(a,o)),t.c4P();function r(c,l){return function(s){var d,h,p;if(t.c4P(),typeof s.pageX=="undefined"&&(s.pageX=s.clientX,s.pageY=s.clientY),i.withinElement(c,s.pageX,s.pageY)){if(c.stxMouseOver)return;d=1264295753,h=741418069,t.A_p(5),p=t.G7m("2",0);for(var u=1;t.f0X(u.toString(),u.toString().length,29418)!==d;u++)c.stxMouseOver=!!{},l(s),p+=2;t.Y9k(p.toString(),p.toString().length,84925)!==h&&(c.stxMouseOver=!{},l(s))}}}},i.installTapEvent=function(a,o){var r;r=function(c){var l;l=new Event("stxtap",{bubbles:!0,cancelable:!!{}}),typeof c.pageX=="undefined"&&(c.pageX=c.clientX,c.pageY=c.clientY),t.v95(),l.pageX=c.pageX,l.pageY=c.pageY,c.target.dispatchEvent(l),o&&o.stopPropagation&&c.stopPropagation()},i.safeClickTouch(a,r,o)},t.c4P(),i.safeClickTouch=function(a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;c="onpoin",c+="te",c+="rup";function P(U,N){return t.v95(),function(C){var D,F;D=C.clientX?C.clientX:C.pageX,F=C.clientY?C.clientY:C.pageY,N?(U.t=new Date().getTime(),U.x=D,U.y=F):U.x&&Math.pow(U.x-D,2)+Math.pow(U.y-F,+"2")>16&&(U.t=null)}}l="pointer",l+="u",l+="p",s="t",s+="ouchend",r||(r={}),d={},t.c4P(),r.allowMultiple||i.clearSafeClickTouches(a),r.preventUnderlayClick!==!1&&(r.preventUnderlayClick=!![]),r.absorbDownEvent!==![]&&(r.absorbDownEvent=!![]),r.allowAnotherDevice=0,r.registeredClick=![],h=a.safeClickTouchEvents,h||(h=a.safeClickTouchEvents=[]),p=E("mouseup",r,d);function E(U,N,C){return function(D){var F,M,I,L,O;if(!(!i.safeClickTouchEvent&&(!C.t||(F=C.t,C.t=null,F+1e3<new Date().getTime())))&&!(N.safety&&N.safety.recentlyDragged)&&!(D.which&&D.which>=2||D.button&&D.button>=2)){if(N.preventUnderlayClick){M="I",M+="N",M+="PUT",I=1399138774,L=-1725998627,O=2;for(var B=1;t.Y9k(B.toString(),B.toString().length,+"96196")!==I;B++)D.target.tagName==""&&D.preventDefault(),O+=2;t.Y9k(O.toString(),O.toString().length,45583)!==L&&D.target.tagName==""&&D.preventDefault(),D.target.tagName!==M&&D.preventDefault()}else{if(N.lastType!=U&&Date.now()<N.allowAnotherDevice)return;N.lastType=U,t.A_p(37);var R=t.F0D(71,999,71);N.allowAnotherDevice=Date.now()+R}o(D)}}}if(u=E(s,r,d),g=E(l,r,d),f=function(U){U.stopPropagation()},w={},i.safeClickTouchEvent)v=E(i.safeClickTouchEvent,r),a.addEventListener(i.safeClickTouchEvent,v),w[i.safeClickTouchEvent]=v,h.push(w);else if(c in document&&!i.noPointerEvents)m="poi",m+="nterdown",a.addEventListener(m,P(d,!0)),a.addEventListener("pointermove",P(d)),a.addEventListener("pointerup",g),w.pointerup=g,r.absorbDownEvent&&(a.addEventListener("pointerdown",f),w.pointerdown=f),h.push(w);else{if(q="m",q+="ouseup",x="t",x+="o",x+="uchstart",y="mo",y+="use",y+="move",a.addEventListener("mousedown",P(d,!0)),a.addEventListener(y,P(d)),a.addEventListener(x,P(d,!0),{passive:!{}}),a.addEventListener("touchmove",P(d),{passive:!1}),a.addEventListener(q,p),a.addEventListener("touchend",u),w.mouseup=p,w.touchend=u,r.absorbDownEvent){k=1875021852,S=1088296027,A=2;for(var z="1"*1;t.Y9k(z.toString(),z.toString().length,94060)!==k;z++)a.addEventListener("mousedown",f),w.mousedown=f,a.addEventListener("touchstart",f,{passive:!![]}),A+=2;t.Y9k(A.toString(),A.toString().length,86336)!==S&&(_="touchst",_+="art",T="moused",T+="ow",T+="n",a.addEventListener(T,f),w.mousedown=f,a.addEventListener(_,f,{passive:!1})),w.touchstart=f}h.push(w)}},i.clearSafeClickTouches=function(a){var o,r,c;if(o=a.safeClickTouchEvents,!!o){for(var l=0;l<o.length;l++){r=o[l];for(var s in r)c=r[s],a.removeEventListener(s,c)}a.safeClickTouchEvents=null}},i.safeDrag=function(a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;r="touchen",r+="d",c="tou",c+="c",c+="hsta",c+="rt",l="touchst",l+="art",s="p",s+="ointerdown",d="mouse",d+="up";function y(k){return function(S){var A,_;v||(v=!0,i.ChartEngine.ignoreTouch=!!{},A=function(T){T&&T.preventDefault&&T.preventDefault(),x.recentlyDragged=!![],T.displacementX=g(T)-m,T.displacementY=f(T)-q,o.move(T)},o.move&&a.ownerDocument.body.addEventListener(k.move,A),_=function(T){i.ChartEngine.ignoreTouch=!1,o.move&&a.ownerDocument.body.removeEventListener(k.move,A),a.ownerDocument.body.removeEventListener(k.up,_),T.displacementX=g(T)-m,T.displacementY=f(T)-q,o.up&&o.up(T),setTimeout(function(){t.v95(),x.recentlyDragged=!{}},"50">>32)},a.ownerDocument.body.addEventListener(k.up,_),setTimeout(function(){v=!1},w),m=g(S),q=f(S),o.down&&o.down(S))}}return h="mousem",h+="ove",p="clie",p+="n",p+="t",p+="X",u=function(k,S){return t.v95(),function(A){var _;if(_="u",_+="ndefi",_+="n",_+="ed",A.touches){if(A.touches.length>0)return A.touches[+"0"][k];if(A.changedTouches&&A.changedTouches.length>0)return t.A_p(3),A.changedTouches[t.G7m("0",0)][k]}return typeof A[k]!==_?A[k]:A[S]}},g=u("pageX",p),f=u("pageY","clientY"),typeof o=="function"&&(o={down:arguments[1],move:arguments[2],up:arguments[3]}),o=o||{},t.v95(),w=100,v=![],m=0,q=0,x={recentlyDragged:!{}},a.addEventListener("mousedown",y({down:"mousedown",move:h,up:d})),a.addEventListener("pointerdown",y({down:s,move:"pointermove",up:"pointerup"})),a.addEventListener(l,y({down:c,move:"touchmove",up:r}),{passive:!1}),x},i.inputKeyEvents=function(a,o){var r;r="keyu",r+="p",a.addEventListener(r,function(c){var l;switch(l=c.keyCode,t.v95(),l){case 13:o();break;case"27"^0:a.value="";break}},![])},i.fixScreen=function(){t.c4P(),t.k1h(18),window.scrollTo(0,t.F0D("0",0))},i.setCaretPosition=function(a,o){var r,c;if(t.c4P(),a.style.zIndex=5e3,a.setSelectionRange){i.focus(a);try{a.setSelectionRange(o,o)}catch{}}else a.createTextRange&&(r="char",r+="ac",r+="t",r+="er",c=a.createTextRange(),c.collapse(!!{}),c.moveEnd(r,o),c.moveStart("character",o),c.select())},i.setValueIfNotActive=function(a,o){document.activeElement!=a&&(a.value=o)},i.hideKeyboard=function(a){var o;o=document.activeElement,(o.tagName=="INPUT"||o.tagName=="TEXTAREA")&&(o.blur(),o.ownerDocument.defaultView.focus(),a&&(a===o.ownerDocument.body||o.ownerDocument.body.contains(a))&&a.focus())},i.smartHover=function(a){var o,r,c,l;o="touc",o+="he",o+="n";function s(p,u){t.v95(),p.documentElement.setAttribute("ciq-last-interaction",u)}function d(p){var u;u="ciq-last",u+="-interactio",u+="n",clearTimeout(l),c=!0,this.documentElement.getAttribute(u)!="touch"&&s(this,"touch"),t.v95(),l=setTimeout(function(){c=!1},500)}o+="d";function h(p){t.v95(),c||s(this,"mouse")}r="ciq-l",r+="ast-interaction",a||(a=document),!(!a||a.documentElement.hasAttribute(r))&&(c=!{},a.addEventListener(o,d,![]),a.addEventListener("mouseover",h,!1),s(a,""))},i.translatableTextNode=function(a,o,r){var c,l;return a.translationCallback?(c="o",c+="rig",c+="inal",l=document.createElement("translate"),l.setAttribute(c,o),l.innerHTML=a.translationCallback(o,r),l):document.createTextNode(o)},i.climbUpDomTree=function(a,o){var r,c,l,s;if(!a||!a.matches)return null;for(r=[];a;)(!o||a.matches(o))&&r.push(a),a=a.parentElement;c=-1623773833,l=-+"1562789468",s=+"2";for(var d=1;t.Y9k(d.toString(),d.toString().length,85701)!==c;d++)return r;if(t.f0X(s.toString(),s.toString().length,67085)!==l)return r},i.guaranteedSize=function(a){var o,r;if(a.defaultView&&(a=a.defaultView),!a.nodeType)return{width:a.innerWidth,height:a.innerHeight};if(!a||a.nodeType>"1"*1)return{};for(o=a.offsetWidth,r=a.offsetHeight;!o||!r;){if(a.tagName==="BODY"||!a.parentElement){a=(a.ownerDocument||{}).defaultView||a,o=a.innerWidth,r=a.innerHeight;break}a=a.parentElement,o=a.offsetWidth,r=a.offsetHeight}return{width:o,height:r}},i.trulyVisible=function(a){if(t.v95(),!a)return!0;if(!o(a.style))return!1;if(!o(getComputedStyle(a)))return![];function o(r){var c;return c="h",c+="idd",c+="en",r.opacity==="0"||r.display==="none"||r.visibility==="hidden"||parseInt(r.width,10)===("0"^0)||parseInt(r.height,10)===0&&r.overflowY==c?!1:!![]}return i.trulyVisible(a.parentElement)},i.elementDimensions=function(a,o){var r,c,l,s,d,h,p;if(r="w",r+="idth",!a||a.nodeType!==1)return{};c=getComputedStyle(a),l={width:parseFloat(c.width),height:parseFloat(c.height)},s={margin:{},border:{},padding:{}},d=[r,"height"];for(var u in s)h="T",h+="o",h+="p",p=u=="border"?"Width":"",s[u]={width:parseFloat(c[u+"Left"+p])+parseFloat(c[u+"Right"+p]),height:parseFloat(c[u+h+p])+parseFloat(c[u+"Bottom"+p])};return t.v95(),o&&o.margin&&d.forEach(function(g){t.c4P(),l[g]+=s.margin[g]}),o&&c.boxSizing==="content-box"?(o.padding&&d.forEach(function(g){t.c4P(),l[g]+=s.padding[g]}),o.border&&d.forEach(function(g){t.v95(),l[g]+=s.border[g]})):c.boxSizing==="border-box"&&((!o||!o.padding)&&d.forEach(function(g){t.v95(),l[g]-=s.padding[g]}),(!o||!o.border)&&d.forEach(function(g){l[g]-=s.border[g]})),l},i.resizeDetectInterval=-+"1",i.resizeObserver=function(a,o,r,c){var l,s,d,h,p;return l="numbe",l+="r",t.A_p(78),s=t.F0D(typeof c,l),d=i.resizeDetectInterval>=+"0",t.A_p(79),h=t.F0D(typeof ResizeObserver,"undefined"),p=500,s||(d?c=i.resizeDetectInterval:h?c=-1:c=p),c<0&&(r||(r=new ResizeObserver(()=>{i.ChartEngine&&i.ChartEngine.useAnimation?requestAnimationFrame(o):(t.k1h(72),setTimeout(o,t.G7m(32,"0")))}),r.observe(a))),c>0&&(r&&clearInterval(r),r=setInterval(o,c)),r&&c===0&&(r instanceof ResizeObserver?r.disconnect():clearInterval(r),r=null),r},i.getLines=function(a,o,r){var c,l,s,d,h,p;c=o.split(" "),l=[],s="",d=0,h=!1,t.c4P();for(var u=0;u<c.length;u++)if(p=c[u],d=a.measureText(s+p).width,d<r?(h&&(s+=" "),h=!!{},s+=p):(l.push(s),s=p),u===c.length-1){l.push(s);break}return l},i.alert=function(a){typeof window!="undefined"?window.alert(a):console.log(a)};try{typeof localStorage!="undefined"&&(i.localStorage=localStorage)}catch{}i.localStorage||(i.localStorage={items:{},getItem:function(a){return t.c4P(),i.localStorage.items[a]||null},setItem:function(a,o){i.localStorage.items[a]=o},removeItem:function(a){t.c4P(),delete i.localStorage.items[a]}}),i.privateBrowsingAlert=!1,i.localStorageSetItem=function(a,o){try{i.localStorage.setItem(a,o)}catch{i.privateBrowsingAlert||(i.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),i.privateBrowsingAlert=!![])}}};Wc=b=>{var t,i,n,e,a,o,r,c,l,s;t="li",t+="nea",t+="r",i="d",i+="ay",n="m",n+="inute",e="m",e+="o",e+="nth",a="wee",a+="k",o="d",o+="a",o+="y",r="r",r+="oundRec",r+="tArrow",c="plugin",c+="s",c+="/",l=b.CIQ,l.ChartEngine=function(d){var h=ot,p,u,g,f,w;d?typeof HTMLDivElement!="undefined"&&d.constructor==HTMLDivElement&&(p={container:d},d=p):d={container:null};for(var v in s)this[v]=l.clone(l.ChartEngine.prototype[v]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!{},this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,h.k1h(5),this.grabStartScrollX=h.G7m("0",0),h.k1h(18),this.grabStartScrollY=h.G7m("0",0),this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!{},this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=![],this.highlightedDataSetField=null,this.anyHighlighted=!{},this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),this.displayCrosshairs=!![],this.hrPanel=null,this.editingAnnotation=![],this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-+"1"},this.moveA=-+"1",h.A_p(3),this.moveB=-h.F0D("1",0),this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=![],this.ctrl=!1,this.shift=!1,this.userPointerDown=![],this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=![],this.overYAxis=![],this.displayInitialized=![],h.c4P(),this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-("1"|1),e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=l.clone(l.ChartEngine.currentVectorParameters),this.chart=new l.ChartEngine.Chart,u=this.chart,u.name="chart",u.yAxis.name="chart",u.canvas=null,u.tempCanvas=null,u.container=d.container,l.Market&&(u.market=new l.Market),this.charts.chart=u,l.extend(this,d),d.container&&(this.registerHTMLElements&&this.registerHTMLElements(),u.width=u.container.clientWidth-u.yAxis.width,this.setCandleWidth(this.layout.candleWidth,u),u.canvasHeight=u.container.clientHeight),g=-1255080395,f=-+"2071529257",w=2;for(var m=1;h.f0X(m.toString(),m.toString().length,25453)!==g;m++)this.construct(),w+=2;h.Y9k(w.toString(),w.toString().length,85097)!==f&&this.construct()},l.ChartEngine.drawingLine=![],l.ChartEngine.resizingPanel=null,l.ChartEngine.crosshairX=0,l.ChartEngine.crosshairY=0,l.ChartEngine.useAnimation=!!{},l.ChartEngine.enableCaching=![],l.ChartEngine.ignoreTouch=!1,l.ChartEngine.useOldAndroidClear=!![],l.ChartEngine.currentVectorParameters={},l.ChartEngine.defaultDisplayTimeZone=null,l.ChartEngine.pluginBasePath=c,l.ChartEngine.registeredContainers=[],l.ChartEngine.globalEventHandlers=[],l.ChartEngine.registerHelpers=function(d){l.ChartEngine.helpersToRegister.forEach(function(h){h(d)})},l.ChartEngine.helpersToRegister=[],l.ChartEngine.prototype.construct=function(){this.createChartPanel&&(this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=+"0",this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingComplete:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},l.ChartEngine.registerHelpers(this)},s={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!![],minimumCandleWidth:1,maximumCandleWidth:100,minimumZoomTicks:9,allowZoom:!![],allowDrawingZoom:!1,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:![],bypassRightClick:{series:!1,study:!1,drawing:!{}},adjustHighlightedDataSetField:function(d){return ot.c4P(),d},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!{},markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:l.isMobile||l.isSurface&&l.isFF,captureTouchEvents:!![],captureMouseWheelEvents:!![],tapForHighlighting:!![],doubleClickTime:250,yaxisLabelStyle:r,axisBorders:null,singleDrawingHighlight:!!{},crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!{},translationCallback:null,dontRoll:!{},allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,xAxisAsFooter:!0,xaxisHeight:40,displayGridLinesInStudies:!{},escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!{},noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!!{},renko:!!{},linebreak:!0,pandf:!![]},startComparisonsAtFirstVisibleBar:![],animations:{zoom:{isStub:!!{},run:function(d,h,p){d(p)},stop:function(){},reset:function(){},running:!1,hasCompleted:!![]}},staticRangePeriodicityMap:[{rangeInMS:l.WEEK,periodicity:"1"|1,interval:5,timeUnit:"minute"},{rangeInMS:l.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:l.YEAR,periodicity:1,interval:o},{rangeInMS:l.DECADE,periodicity:1,interval:a},{rangeInMS:l.DECADE*10,periodicity:"1"^0,interval:e},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:l.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:l.MINUTE*("5">>32)},{interval:30,timeUnit:"minute",rangeInMS:l.MINUTE*("30"|18)},{interval:60,timeUnit:n,rangeInMS:l.MINUTE*60},{interval:i,rangeInMS:l.DAY},{interval:"month",rangeInMS:l.MONTH},{interval:"year",rangeInMS:l.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:![],volumeUnderlay:!1,adj:!![],crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:t,studies:{},panels:{},setSpan:{},outliers:!1,animation:!0},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!![]},drawings:null,highlightsRadius:+"10",highlightsTapRadius:30,magnet:!{},horizontalCrosshairField:null,labels:!![],language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:![]},streamParameters:{count:"0"^0,maxWait:+"1000",maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},l.extend(l.ChartEngine.prototype,s),l.ChartEngine.NONE=0,l.ChartEngine.CLOSEUP=1,l.ChartEngine.CLOSEDOWN=+"2",l.ChartEngine.CLOSEEVEN=4,ot.A_p(3),l.ChartEngine.CANDLEUP=ot.G7m("8",8),l.ChartEngine.CANDLEDOWN=16,l.ChartEngine.CANDLEEVEN=32};jc=b=>{var t;t=b.CIQ,t.convertFutureMonth=function(i){ot.c4P();var n,e;if(n="1",n+="0",e=i.toString(),e.length<=0||e.length>+"2")return"";switch(e){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case n:return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return e},t.money=function(i,n,e){return e||(e="$"),ot.v95(),e.length=="3"*1&&(e+=" "),!n&&n!==("0"|0)&&(n=2),e+t.commas((Math.round(i*+"10000")/1e4).toFixed(n))},t.convertCurrencyCode=function(i){var n,e,a,o,r,c,l,s;return n="C",n+="FPF",e="\u0440",e+="\u0443\u0431",a="N",a+="Z$",o="F",o+="t",r="k",r+="r",c="C",ot.v95(),c+="N",c+="\xA5",l={JPY:"\xA5",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:c,CZK:"K\u010D",DKK:r,EUR:"\u20AC",GBP:"\xA3",HKD:"HK$",HUF:o,ILS:"\u20AA",INR:"\u20B9",KRW:"\u20A9",MXN:"MX$",NOK:"kr",NZD:a,PLN:"z\u0142",RUB:e,SAR:"\uFDFC",SEK:"kr",SGD:"S$",THB:"\u0E3F",TRY:"\u20BA",TWD:"NT$",VND:"\u20AB",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:n,ZAR:"R"},s=l[i],s||i},t.commas=function(i){return i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.cleanPeriodicity=function(i,n,e){var a=ot,o,r,c,l;return o="yea",o+="r",r="h",r+="o",r+="u",r+="r",isNaN(i)&&(a.k1h(18),i=a.G7m("1",64)),n||(n=+"1"),!isNaN(n)&&e?(c="mi",c+="nute",e=="hour"||e==c||e=="second"||e=="millisecond"||(n=e,e=null)):n=="tick"?e=null:!e&&!isNaN(n)&&(e="minute"),e==r&&(e="minute",a.A_p(39),n=a.F0D(n,60)),n==o&&(l="mo",l+="n",l+="th",n=l,i||(i=1),a.k1h(39),i=a.F0D(i,12)),{period:i,interval:n,timeUnit:e}},t.readablePeriodicity=function(i){var n=ot,e,a,o,r;e="nu",e+="m",e+="ber",a=i.layout.periodicity,o=i.layout.interval,typeof i.layout.interval==e&&i.layout.timeUnit?(a=i.layout.interval*i.layout.periodicity,o=i.layout.timeUnit):typeof i.layout.interval=="number"&&!i.layout.timeUnit&&(r="m",r+="inute",a=i.layout.interval*i.layout.periodicity,o=r),a%60===+"0"&&o=="minute"&&(a/=+"60",o="hour"),n.k1h(5);var c=n.G7m(27232,20424);n.k1h(8);var l=n.G7m(15,20,5786);n.A_p(37),n.F0D(9,7467,8397),n.A_p(80);var s=n.G7m(11,4377,6853,4361,7);return n.A_p(67),n.G7m(425,16,13),a+(c!=545.34?l==652.65?289.64:s===389.85?"A":" ":!1)+i.translateIf(t.capitalize(o))},t.fixPrice=function(i){var n=ot,e,a,o,r;if(!i&&i!==0)return null;e=274861974,n.v95(),a=-2072624779,o=2;for(var c=1;n.f0X(c.toString(),c.toString().length,56246)!==e;c++)n.k1h(18),r=i.toFixed(n.G7m("17",32)),o+=2;n.Y9k(o.toString(),o.toString().length,18625)!==a&&(r=i.toFixed(10));for(var l=r.length-1;l>"1"*1&&r.charAt(l)=="0";l--);return n.k1h(10),r=r.substring(0,n.F0D(l,1)),parseFloat(r)},t.condenseInt=function(i){var n=ot,e,a;if(e="n",e+="/",e+="a",i===null||typeof i=="undefined")return"";if(i===1/0||i===-1/0)return e;if(n.A_p(81),a=n.F0D(i,0),isNaN(i))i=i.toString();else if(i=Math.abs(i),i>1e12){n.A_p(67);var o=n.F0D(1,15,6);n.A_p(31);var r=n.G7m(14,13);n.A_p(82);var c=n.F0D(5,16,5219,16,20);i=Math.round(i/1e11)/o+("4080"*r!=138.01?"t":"565.52"*c)}else if(i>+"100000000000"){n.A_p(37);var l=n.G7m(71428571,999999999,71428571);n.A_p(10);var s=n.G7m(632,7578);n.k1h(83);var d=n.G7m(12,69900,20,62918);i=Math.round(i/l)+(s<=d?!{}:"b")}else if(i>1e10){n.A_p(0);var h=n.F0D(7,1,14);n.A_p(84);var p=n.F0D(5,9312,233,3,9335);n.A_p(54);var u=n.G7m(2071,4,4,6213);i=(Math.round(i/1e8)/("10">>0)).toFixed(h)+(+"6590"<=p?"b":u)}else if(i>"1000000000">>64){n.k1h(29);var g=n.F0D(13,17,2);n.A_p(85);var f=n.F0D(776,8,15,388,641);n.k1h(5);var w=n.G7m(7573,11);n.k1h(8);var v=n.F0D(19,10,3528);i=(Math.round(i/1e7)/100).toFixed(g)+(f===322.56?w!==("671"^0)?!![]:v:"b")}else if(i>("100000000"^0)){n.A_p(86);var m=n.F0D(19999978,11,2e7,999999,11);n.A_p(56),n.G7m(3,57612,13,1230,16),n.k1h(10),n.G7m(5927,3),n.k1h(21);var q=n.F0D(5,7178,28720);n.A_p(54);var x=n.F0D(3849,9,10,30787);n.k1h(10),n.F0D(632,7579),i=Math.round(i/m)+(q!==x?"m":775.18)}else if(i>1e7){n.A_p(87);var y=n.G7m(10,12,9,9,9);n.k1h(74);var k=n.G7m(6,597,6,1790);n.k1h(88);var S=n.F0D(3,60575,5524,12,12);n.k1h(89),n.G7m(8,4694,16681,16,66724),n.A_p(10);var A=n.F0D(374,6737);i=(Math.round(i/1e5)/10).toFixed(y)+(k!==S?"m":"1700"-0===A?"R":+"0x415")}else if(i>+"1000000"){n.A_p(90);var _=n.G7m(9,1,39,17,11);n.A_p(10);var T=n.G7m(718,2872);n.A_p(91);var P=n.F0D(8,7,587,38,17);n.k1h(21);var E=n.F0D(13,4653,55844);n.A_p(37);var z=n.G7m(247,2959,247);i=(Math.round(i/1e4)/100).toFixed(_)+(T<P?E:z<908.91?"i":"m")}else if(i>+"100000"){n.k1h(11);var U=n.F0D(17e3,4,16005,9);n.k1h(5),n.F0D(7652,19),n.k1h(51);var N=n.G7m(20,760,130,743);n.k1h(76);var C=n.G7m(19,22,19,4,384);i=Math.round(i/U)+(N<677.14?C:"k")}else if(i>1e4)i=(Math.round(i/100)/("10"<<0)).toFixed(+"1")+"k";else if(i>1e3){n.A_p(21);var D=n.F0D(8,11,86);n.k1h(92),n.F0D(11,7667,4,24),n.k1h(93),n.G7m(7,5,9,11),i=(Math.round(i/10)/100).toFixed(D)+"k"}else i=i.toString();return n.c4P(),a&&(n.k1h(10),i=n.F0D("-",i)),i},t.calculateTradingDecimalPlaces=function(i){var n=ot,e,a,o,r,c,l,s,d,h,p;if(e=i.chart,n.k1h(3),a=n.G7m("2",2),o=50,r=e.masterData,r&&r.length>o){for(var u=2;u<o&&(c=r.length-u,!(c<+"0"));u++)if(l=r[c],l.Close&&typeof l.Close=="number"&&(s=l.Close.toString(),d=s.indexOf("."),d!=-1)){n.k1h(67);var g=n.F0D(0,10,9);h=s.length-d-"1"*g,h>a&&(a=h)}}return n.v95(),p=e.yAxis.maxDecimalPlaces,a>p&&p!==null&&(a=p),a},t.minMax=function(i,n,e,a){var o,r,c,l,s,d,h,p,u,g,f;o="L",ot.c4P(),o+="o",o+="w",r="Cl",r+="o",r+="se",c=Number.MAX_VALUE,ot.A_p(94);var w=ot.F0D(15,3,20,1);l=Number.MAX_VALUE*w,e||(e=r),s=a?"High":e,d=a?o:e;for(var v=0;v<i.length;v++)h="objec",h+="t",p="ob",p+="je",p+="c",p+="t",u=i[v],u&&(g=u[n],!(!g&&g!==0)&&(f=g,typeof g===p&&(f=g[s]),!isNaN(f)&&(f||f===0)&&(l=Math.max(l,f)),typeof g===h&&(f=g[d]),!isNaN(f)&&(f||f===0)&&(c=Math.min(c,f))));return[c,l]},t.symbolEqual=function(i,n){var e,a;return!i||!n?!1:(ot.v95(),typeof i!="object"&&(i={symbol:i}),typeof n!="object"&&(n={symbol:n}),typeof i.equals=="function"?i.equals(n):(e=i.symbol,a=n.symbol,e&&(e=e.toUpperCase()),a&&(a=a.toUpperCase()),e!=a?![]:i.source==n.source))},t.addMemberToMasterdata=function(i){var n=ot,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_;i.constructor===t.ChartEngine&&(i={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),e=i.stx,a=i.label;function T(C){n.v95();var D,F,M;D=h,n.k1h(35);var I=n.G7m(142,11,13,0);if(F=u.length-I,u[F].DT<C){n.A_p(10),h=n.G7m(F,1);return}else if(+u[F].DT==+C){h=F;return}h++,M=0;function L(){return+u[h].DT==+C?0:u[h].DT<C?1:u[h-1].DT>C?-1:(n.c4P(),+u[h-1].DT==+C&&h--,0)}for(;++M<+"100";){switch(L()){case+"0":return;case 1:D=h;break;case-1:F=h;break}n.A_p(95),h=Math.round(n.F0D(F,"2",D))}M>=100&&(console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),h=u.length-+"1")}function P(C,D){var F,M;if(!C||typeof C!="object")return C=D,C;F={Close:C.Close,High:C.High,Low:C.Low,Open:C.Open,Volume:C.Volume},C=D;for(var I in F)C.Close===null?C[I]!==void 0&&(C[I]=null):typeof C[I]!="number"?C[I]=F[I]:typeof F[I]=="number"&&(M="H",M+="i",M+="g",M+="h",I=="Open"?C.Open=F.Open:I=="Low"&&C.Low>F.Low?C.Low=F.Low:I==M&&C.High<F.High?C.High=F.High:I=="Volume"&&(C.Volume+=F.Volume));return n.v95(),C}if(o=i.data,r=i.fields,c=i.createObject,l=i.fieldForLabel,s=i.chart?i.chart:e.chart,i.noCleanupDates||e.doCleanupDates(o,e.layout.interval),d=[],e.getSeries&&(d=e.getSeries({symbol:a,chart:s})),o&&o.constructor==Object&&(o=[o]),!o||!o.length)return;for(n.A_p(3),h=n.F0D("0",0),p=0,u=s.masterData,g=e.layout,u||(u=[]),v=s&&s.defaultPlotField||null,m=e.mainSeriesRenderer&&!e.mainSeriesRenderer.highLowBars,q=g.chartType,!m&&q&&(x=t.Renderer.produce(q,{}),x&&(m=!x.highLowBars)),y=t.yyyymmddhhmmssmmm;o&&h<u.length&&p<o.length;){if(w=o[p],f=u[h],!w.DT||typeof w.DT=="undefined"?w.DT=t.strToDateTime(w.Date):(k="n",k+="umb",k+="er",typeof w.DT==k&&(w.DT=new Date(w.DT)),(!w.Date||w.Date.length!=17)&&(w.Date=y(w.DT))),p===0)for(var E=0;E<d.length;E++)(!d[E].endPoints.begin||d[E].endPoints.begin>w.DT)&&(d[E].endPoints.begin=w.DT);if(+w.DT==+f.DT){U(f,w),p++,h++;continue}if(w.DT<f.DT){u.splice(h,0,{DT:w.DT,Date:w.Date});continue}else T(w.DT)}if(h>=u.length)for(;o&&p<o.length;)w=o[p],!w.DT||typeof w.DT=="undefined"?w.DT=t.strToDateTime(w.Date):(typeof w.DT=="number"&&(w.DT=new Date(w.DT)),(!w.Date||w.Date.length!=17)&&(w.Date=y(w.DT))),f={DT:w.DT,Date:w.Date},U(f,w),u.push(f),p++;if(i.fillGaps&&u.length)if(S={noCleanupDates:!!{},cleanupGaps:i.fillGaps},r)for(var z=0;z<r.length;z++)S.field=r[z],e.doCleanupGaps(u,s,S);else S.field=a,e.doCleanupGaps(u,s,S);function U(C,D){var F,M,I,L,O,B,R;if(n.c4P(),r&&r.length)if(r[0]=="*")t.extend(C,D);else for(var H=0;H<r.length;H++)C[r[H]]=D[r[H]];else if(c){if(F="agg",F+="r",F+="eg",F+="ate",D.Value!==void 0){C[a]=D.Value;return}else c==F?C[a]=P(C[a],D):C[a]=D;M=C[a],typeof M.Close=="number"&&(typeof M.Open!="number"&&(M.Open=M.Close),I=Math.max(M.Open,M.Close),L=Math.min(M.Open,M.Close),(typeof M.High!="number"||M.High<I)&&(M.High=I),(typeof M.Low!="number"||M.Low>L)&&(M.Low=L)),M.Volume&&typeof M.Volume!="number"&&(M.Volume=parseInt(M.Volume,10))}else if(l)C[a]=D[l];else if(m&&v&&D[v]!==void 0)C[a]=D[v];else if(g.adj&&D.Adj_Close!==void 0)C[a]=D.Adj_Close;else if(D.Close!==void 0)C[a]=D.Close;else if(D.Value!==void 0)C[a]=D.Value;else{O=-862684766,B=-+"1170395601",R=2;for(var W=1;n.f0X(W.toString(),W.toString().length,24789)!==O;W++)C[a]=D[a],R+=2;n.f0X(R.toString(),R.toString().length,52633)!==B&&(C[a]=D[a])}}for(var N=0;N<d.length;N++)A=d[N].endPoints,(!A.end||!a||A.end<=f[a].DT)&&(A.end=a?f[a].DT:f.DT,_=a||d[N].parameters&&d[N].parameters.field||s.defaultPlotField,d[N].lastQuote=e.getFirstLastDataRecord(u,_,!0));e.setMasterData(u,s,{noCleanupDates:!0})}};Kc=b=>{var t;t=b.CIQ,t.xor=function(i,n){var e,a;return e=!i,a=!n,ot.A_p(79),ot.F0D(e,a)},t.round=function(i,n){return Number(Math.round(i+"e"+n)+"e-"+n)},t.countDecimals=function(i){var n=ot,e,a,o;if(e="e",e+="-",a="numbe",a+="r",typeof i!==a||isNaN(i)||Math.floor(i)===Number(i))return 0;if(o=i.toString().split(e),o.length>1){n.k1h(5);var r=n.F0D(160,128);return t.countDecimals(Number(o[0]))+Number(o["1">>r])}return o[0].indexOf(".")>-+"1"?o["0">>0].split(".")["1"-0].length:(n.c4P(),n.A_p(72),n.G7m(0,"0"))},t.isValidNumber=function(i){return ot.v95(),isFinite(i)&&+i===i},t.log10=function(i){return Math.log(i)/Math.LN10},t.boxIntersects=function(i,n,e,a,o,r,c,l,s){var d=ot,h,p,u,g,f,w;d.v95(),arguments[9]!==void 0&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels.");function v(m,q){return d.v95(),d.k1h(96),d.F0D(q,r,o,m,l,o,r,c)}if(h=Math.min(i,e),p=Math.max(i,e),u=Math.min(n,a),g=Math.max(n,a),d.A_p(97),f=d.F0D(s,"ray"),isNaN(o)||isNaN(c)||isNaN(r)||isNaN(l))return!1;if(s!="line"){if(o<h&&c<h&&(!f||o>c))return!{};if(o>p&&c>p&&(!f||o<c)||r<u&&l<u&&(!f||r>l))return!1;if(r>g&&l>g&&(!f||r<l))return![]}return w={a:v(i,n),b:v(i,a),c:v(e,n),d:v(e,a)},w.a>0&&w.b>0&&w.c>"0"*1&&w.d>"0">>32?!{}:w.a<+"0"&&w.b<0&&w.c<0&&w.d<0?![]:!![]},t.linesIntersect=function(i,n,e,a,o,r,c,l,s){var d=ot,h,p,u,g,f,w,v,m;if(h="r",h+="a",h+="y",p="horizonta",p+="l",d.c4P(),u="lin",u+="e",d.k1h(96),g=d.G7m(l,c,i,r,a,o,e,n),d.A_p(96),f=d.G7m(r,o,c,l,i,c,o,e),d.A_p(96),w=d.G7m(n,i,c,a,i,e,o,e),g===+"0")return f===0&&w===0?!!{}:!1;if(d.k1h(30),v=d.G7m(f,g),d.A_p(30),m=d.G7m(w,g),s=="segment"){if(v>=0&&v<=1&&m>=+"0"&&m<=+"1")return!0}else if(s==u||s==p||s=="vertical"){if(v>=0&&v<=1)return!0}else if(s==h&&v>=0&&v<=+"1"&&m>=0)return!![];return!{}},t.yIntersection=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f;if(a=i.x0,o=i.x1,r=n,c=n,l=i.y0,s=i.y1,d=0,e.k1h(18),h=e.G7m("10000",32),e.k1h(96),p=e.G7m(h,d,a,c,s,r,l,o),e.k1h(96),u=e.F0D(c,r,d,h,a,d,r,l),e.k1h(30),g=e.F0D(u,p),p===0)if(u===+"0")g=1;else return null;return e.A_p(98),f=e.G7m(l,g,s,l),f},t.xIntersection=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f;if(a=i.x0,o=i.x1,r=0,c=1e4,l=i.y0,s=i.y1,d=n,h=n,e.A_p(96),p=e.F0D(h,d,a,c,s,r,l,o),e.k1h(96),u=e.G7m(c,r,d,h,a,d,r,l),e.A_p(30),g=e.G7m(u,p),p===0)if(u===0)g=1;else return null;return e.A_p(98),f=e.G7m(a,g,o,a),f},t.intersectLineLineX=function(i,n,e,a,o,r,c,l){var s=ot,d,h,p;return s.A_p(96),d=s.G7m(r,o,c,l,i,c,o,e),s.A_p(96),h=s.G7m(l,c,i,r,a,o,e,n),s.k1h(30),p=s.G7m(d,h),s.A_p(98),s.G7m(i,p,n,i)},t.intersectLineLineY=function(i,n,e,a,o,r,c,l){var s=ot,d,h,p;return s.k1h(96),d=s.F0D(r,o,c,l,i,c,o,e),s.k1h(96),h=s.G7m(l,c,i,r,a,o,e,n),s.A_p(30),p=s.F0D(d,h),s.k1h(98),s.F0D(e,p,a,e)}};Gc=b=>{var t=ot,i;t.v95(),i=b.CIQ,i.deleteRHS=function(n,e){var a;a=!1;for(var o in n)n[o]==e&&(delete n[o],a=!0);return a},i.scrub=function(n,e){t.v95();for(var a in n)typeof n[a]=="undefined"&&delete n[a],e&&n[a]===null&&delete n[a]},i.dataBindSafeAssignment=function(n,e){i.extend(n,e);for(var a in n)typeof e[a]=="undefined"&&(n[a]=void 0)},i.clone=function(n,e){var a;if(n===null||typeof n!="object")return n;if(a=n.constructor,a==Date||a==RegExp||a==String||a==Number||a==Boolean)return new a(n.valueOf());if(a==Function)return function(){return n.apply(this,arguments)};if(!e)try{e=new a}catch{e=Object.create(Object.getPrototypeOf(n))}for(var o in n)e[o]=e[o]!==n[o]?i.clone(n[o],null):e[o];return e},i.shallowClone=function(n){var e;if(!n)return n;if(t.c4P(),n.constructor==Array){e=new Array(n.length);for(var a=0;a<n.length;a++)e[a]=n[a];return e}e={};for(var o in n)e[o]=n[o];return e},i.ensureDefaults=function(n,e){t.c4P();for(var a in e)typeof n[a]=="undefined"&&(n[a]=e[a]);return n},i.transferObject=function(n,e){var a;for(a in n)n.hasOwnProperty(a)&&delete n[a];for(a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);return n},i.equals=function(n,e,a){var o,r;if(n===e)return!0;if(!n&&e)return!1;if(n&&!e)return![];if(typeof n!=typeof e)return!1;o=[...new Set(Object.keys(n).concat(Object.keys(e)))];for(var c of o)if(r="obj",r+="e",r+="c",r+="t",!(a&&a[c])){if(typeof n[c]===r){if(i.equals(n[c],e[c]))continue;return!1}if(e[c]!=n[c])return!1}return!0},i.isEmpty=function(n){t.c4P();for(var e in n)if(n.hasOwnProperty(e))return!1;return!!{}},i.first=function(n){t.v95();for(var e in n)return e;return null},i.last=function(n){var e;e=null;for(var a in n)e=a;return e},i.objLength=function(n){var e;if(!n)return 0;e=0;for(var a in n)e++;return t.c4P(),e},i.deriveFromObjectChain=function(n,e){var a,o;if(e.indexOf(".")==-1)return{obj:n,member:e};a=e.split(".");for(var r=0;r<a.length-1;r++)o=a[r],!n[o]&&n[o]!==0&&(n[o]={}),n=n[o];return{obj:n,member:a[r]}},i.createObjectChainNames=function(n,e){var a;a=[],t.c4P();for(var o=0;o<e.length;o++)a.push(n+"-->"+e[o]);return a},i.getObjectChainRoot=function(n){var e;return e="-",e+="-",e+=">",n?n.split(e)[0]:null},i.existsInObjectChain=function(n,e){var a,o,r,c,l;if(e.indexOf("-->")==-+"1")return a=n[e],!a&&a!==+"0"?null:{obj:n,member:e};o=-144022421,r=-2139212999,c=2;for(var s=1;t.Y9k(s.toString(),s.toString().length,7818)!==o;s++)l=e.split("-->"),c+=2;t.Y9k(c.toString(),c.toString().length,79112)!==r&&(l=e.split("")),t.v95();for(var d=0;d<l.length;d++){if(a=n[l[d]],!a&&a!==0)return null;if(d<l.length-1)n=a;else return{obj:n,member:l[d]}}},i.derivedFrom=function(n,e){return e.isPrototypeOf(n)?!0:n instanceof e?!![]:![]},i.replaceFields=function(n,e){t.v95();var a,o,r,c,l,s;if(!n)return n;a={};for(var d in n)if(o="ob",o+="j",o+="ec",o+="t",r=n[d],c=e[d],c||(c=d),r&&typeof r==o)if(r.constructor==Array){l=a[c]=new Array(r.length);for(var h=0;h<l.length;h++)s=r[h],typeof s=="object"?l[h]=i.replaceFields(s,e):l[h]=s}else a[c]=i.replaceFields(r,e);else a[c]=r;return a},i.removeNullValues=function(n){var e;t.c4P(),e=i.clone(n);for(var a in e)e[a]||delete e[a];return e},i.reverseObject=function(n){var e;e={};for(var a in n)e[n[a]]=a;return e},i.getFromNS=(n,e,a)=>{var o,r,c,l;if(n){o=n,r=e.split(".");for(var s=0;s<r.length&&(c="und",c+="efi",c+="ned",l=r[s],typeof o[l]!==c);s++)o=o[l];if(s===r.length)return o}return a},i.getFnFromNS=(n,e,a)=>i.getFromNS(n,e,function(){return t.c4P(),a}),i.get=(n,e)=>(t.c4P(),i.getFromNS(i,n,e)),i.getFn=(n,e)=>(t.v95(),i.getFromNS(i,n,function(){return e}))};Yc=b=>{var t=ot,i;t.v95(),i=b.CIQ,i.Plotter=function(){this.seriesArray=[],this.seriesMap={}},i.extend(i.Plotter.prototype,{Series:function(n,e,a,o,r,c){this.name=n,this.strokeOrFill=e,this.color=a,this.moves=[],this.text=[],(!o||o>1||o<0)&&(o=+"1"),this.opacity=o,(!r||r>+"25"||r<1)&&(r=1),this.width=r,this.pattern=i.borderPatternToArray(r,c)},newSeries:function(n,e,a,o,r){var c;a.constructor==String?c=new this.Series(n,e,a,o,r):c=new this.Series(n,e,a.color,a.opacity,r>=0?r:i.stripPX(a.width),a.borderTopStyle),this.seriesArray.push(c),this.seriesMap[n]=c},reset:function(n){var e;for(var a in this.seriesMap)n&&n!=a||(e=this.seriesMap[a],e&&(e.moves=[],e.text=[]))},moveTo:function(n,e,a){var o;o=this.seriesMap[n],o.moves.push({action:"moveTo",x:e,y:a})},lineTo:function(n,e,a){var o,r;o=this.seriesMap[n],r=o.pattern,t.c4P(),o.moves.push({action:"lineTo",x:e,y:a,pattern:r})},dashedLineTo:function(n,e,a,o){var r,c;r="l",r+="ineT",r+="o",c=this.seriesMap[n],c.moves.push({action:r,x:e,y:a,pattern:o})},quadraticCurveTo:function(n,e,a,o,r){var c,l;c=this.seriesMap[n],l=c.pattern,c.moves.push({action:"quadraticCurveTo",x0:e,y0:a,x:o,y:r,pattern:l})},bezierCurveTo:function(n,e,a,o,r,c,l){var s,d,h;s="bezier",s+="CurveTo",d=this.seriesMap[n],t.c4P(),h=d.pattern,d.moves.push({action:s,x0:e,y0:a,x1:o,y1:r,x:c,y:l,pattern:h})},addText:function(n,e,a,o,r,c,l){var s;t.c4P(),s=this.seriesMap[n],s.text.push({text:e,x:a,y:o,bg:r})},drawText:function(n,e){for(var a,o,r,c,l=0;l<e.text.length;l++)a=e.text[l],a.bg&&(o=a.width?a.width:n.measureText(a.text).width,r=a.height?a.height:12,c=n.fillStyle,n.fillStyle=a.bg,n.textAlign=="right"?n.fillRect(a.x,a.y-r/2,-o,-r):n.fillRect(a.x,a.y-r/2,o,r),n.fillStyle=c),n.fillText(a.text,a.x,a.y)},draw:function(n,e){var a,o,r,c,l,s,d,h,p;a=n.lineWidth,o=n.fillStyle,r=n.strokeStyle,t.v95(),c=n.globalAlpha;for(var u=0;u<this.seriesArray.length;u++)if(l=this.seriesArray[u],!(e&&l.name!=e)){n.beginPath(),n.lineWidth=l.width,n.globalAlpha=l.opacity,n.fillStyle=l.color,n.strokeStyle=l.color,n.save(),s=[0,+"0"];for(var g=0;g<l.moves.length;g++)d="bezie",d+="rCurveTo",h=l.moves[g],h.pattern||(h.pattern=[]),JSON.stringify(n.getLineDash())!==JSON.stringify(h.pattern)&&(p="st",p+="ro",p+="ke",n[l.strokeOrFill=="fill"?"fill":p](),n.beginPath(),n.moveTo(s[0],s["1">>0])),n.setLineDash(h.pattern),t.k1h(18),n.lineDashOffset=t.F0D("0",0),h.action=="quadraticCurveTo"?n[h.action](h.x0,h.y0,h.x,h.y):h.action==d?n[h.action](h.x0,h.y0,h.x1,h.y1,h.x,h.y):n[h.action](h.x,h.y),s=[h.x,h.y];n[l.strokeOrFill=="fill"?"fill":"stroke"](),n.closePath(),n.restore(),this.drawText(n,l),n.lineWidth=1}n.lineWidth=a,n.fillStyle=o,n.strokeStyle=r,n.globalAlpha=c}},!0)};Qc=b=>{var t;t=b.CIQ,t.Renderer=function(){},t.Renderer.produce=function(i,n){ot.v95();var e,a;if(e=null,i){for(var o in t.Renderer)if(a=t.Renderer[o],a.requestNew&&(e=a.requestNew(i.split("_"),n)),e)return e}return n.type="line",new t.Renderer.Lines({params:n})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(i,n){t.Renderer.colorFunctions[i]=n},t.Renderer.unregisterColorFunction=function(i){ot.v95(),delete t.Renderer.colorFunctions[i]},t.Renderer.prototype.init={},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(i,n){},t.Renderer.prototype.construct=function(i){var n;i||(i={}),n=i.params?i.params:{},this.init&&t.ensureDefaults(n,this.init),n.name||(n.name=t.uniqueID()),n.heightPercentage||(ot.k1h(39),n.heightPercentage=ot.F0D("0.7",1)),n.opacity||(n.opacity=1),n.highlightable!==!1&&(n.highlightable=!!{}),n.panel||(n.panel="chart"),n.yAxis&&(n.yAxis=new t.ChartEngine.YAxis(n.yAxis),n.yAxis.name||(n.yAxis.name=n.name)),this.cb=i.callback,this.params=n,this.seriesParams=[],this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m;if(a="stri",a+="ng",o="a",o+="uto",r=this.stx,!r)return this;if(c=r.chart.series[i],c||(c={parameters:{}}),l=this.params,s=c.parameters,d={id:i,chartType:l.type,display:s.display,border_color_up:l.defaultBorders?o:null,fill_color_up:s.color,opacity_up:l.opacity,border_color_down:l.defaultBorders?"auto":null,fill_color_down:s.color,opacity_down:l.opacity,color:s.color,symbol:s.symbol,symbolObject:t.clone(s.symbolObject)},typeof n==a)d.color=d.fill_color_down=d.fill_color_up=n;else if(typeof n=="object"){for(var q in n)d[q]=n[q];h=d.color,p=d.border_color,h&&(d.fill_color_up||(d.fill_color_up=h),d.fill_color_down||(d.fill_color_down=h),d.fill_color_even||(d.fill_color_even=h)),p&&(d.border_color_up||(d.border_color_up=p),d.border_color_down||(d.border_color_down=p),d.border_color_even||(d.border_color_even=p))}for(d.symbol&&d.field!=d.symbol&&(d.subField=d.field,d.field=d.symbol),d.id||(d.id=t.uniqueID()),u=0;u<this.seriesParams.length;++u)if(this.seriesParams[u].id===d.id){this.removeSeries(d.id,!![]);break}if(this.seriesParams.splice(u,0,d),d.fill_color_up!=d.fill_color_down?(e.k1h(10),this.colors[e.G7m(i," up")]={color:d.fill_color_up,opacity:d.opacity_up,display:d.display?d.display+" up":i+" up"},e.A_p(10),this.colors[e.F0D(i," dn")]={color:d.fill_color_down,opacity:d.opacity_down,display:d.display?d.display+" down":i+" down"}):this.colors[i]={color:d.fill_color_up,opacity:d.opacity_up,display:d.display?d.display:i},g=l.panel,e.c4P(),!r.panels[g])f=l.yAxis,f||(f=new t.ChartEngine.YAxis,f.needsInitialPadding=!0),f.name=g,r.createPanel(g,g,null,null,f);else if(l.yAxis)l.yAxis=r.addYAxis(r.panels[g],l.yAxis),l.yAxis.needsInitialPadding=!0,s.yAxis=l.yAxis,r.resizeChart();else if(d.yAxis){w=-285351892,v=1809794178,m=+"2";for(var x="1"<<32;e.Y9k(x.toString(),x.toString().length,62566)!==w;x++)l.yAxis=d.yAxis,m+=2;e.f0X(m.toString(),m.toString().length,"589"|1)!==v&&(l.yAxis=d.yAxis)}return this},t.Renderer.prototype.removeSeries=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p;a=null,o=!{},r=this.stx,e.c4P(),c=r.chart;for(var u in c.seriesRenderers){l=c.seriesRenderers[u];for(var g=0;g<l.seriesParams.length;g++)s=l.seriesParams[g],s.id==i&&this===l?a=g:s.isComparison&&s.panel==c.panel.name&&(!s.yAxis||s.yAxis==c.yAxis)&&(o=!![])}if(a!==null&&(d="l",d+="inea",d+="r",c.forcePercentComparison&&!o&&this.seriesParams[a].isComparison&&r.layout.chartScale!=d&&r.setChartScale(),this.seriesParams.splice(a,1)),e.k1h(10),delete this.colors[e.F0D(i," up")],e.k1h(10),delete this.colors[e.F0D(i," dn")],delete this.colors[i],!n){for(var f in c.seriesRenderers){p=c.seriesRenderers[f];for(var w="0"-0;w<p.seriesParams.length;w++){if(p.seriesParams[w].id==i){h=!!{};break}h=!1}if(h)break}(h===![]||a!==null)&&r.deleteSeries&&r.deleteSeries(i,c)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),this},t.Renderer.prototype.modifyRenderer=function(i){var n,e,a;ot.v95(),this.params;var{stx:o}=this;for(var r in i)switch(n="basel",n+="ine",e=i[r],r){case n:e?(a="ob",a+="ject",typeof e===a&&(this.params.baseline=t.ensureDefaults(e,t.ChartEngine.Chart.prototype.baseline)),o.registerBaselineToHelper(this)):o.removeBaselineFromHelper(this);break;case"type":this.params.type=e;break;case"style":this.params.style=e;break}},t.Renderer.prototype.getDependents=function(i){var n,e;n=[],ot.v95();for(var a in i.chart.seriesRenderers)e=i.chart.seriesRenderers[a],e.params.dependentOf==this.params.name&&n.push(e);return n},t.Renderer.prototype.undraggable=function(i){return this==i.mainSeriesRenderer?!0:(ot.v95(),this.params.dependentOf==i.mainSeriesRenderer.params.name)},t.Renderer.prototype.removeAllSeries=function(i){ot.c4P();var n,e,a,o;if(i||this===this.stx.mainSeriesRenderer){n=2015417925,e=-717812290,a=2;for(var r=1;ot.Y9k(r.toString(),r.toString().length,71007)!==n;r++)o=[],a+=2;ot.Y9k(a.toString(),a.toString().length,59624)!==e&&(o=[]),o=[];for(var c=0;c<this.seriesParams.length;c++)o.push(this.seriesParams[c].id);for(var l=0;l<o.length;l++)this.removeSeries(o[l])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},t.Renderer.prototype.getYAxis=function(i){var n,e;if(this.params)if(this.params.yAxis)n=this.params.yAxis;else{if(e=i.panels[this.params.panel],!e)return!1;n=e.yAxis}else n=i.chart.panel.yAxis;return n},t.Renderer.prototype.ready=function(){return this.stx.createDataSet(),ot.c4P(),this.stx.draw(),this},t.Renderer.Lines=function(i){var n,e,a;n="cha",n+="nne",n+="l",e="l",e+="in",e+="e",this.construct(i);var{params:o}=this;if(o.type||(o.type=e),!o.style)switch(a="m",a+="o",a+="unta",a+="in",o.type){case a:o.baseline?o.style="stx_baseline_delta_mountain":o.colored?o.style="stx_colored_mountain_chart":o.style="stx_mountain_chart";break;default:o.style="stx_line_chart"}this.supportsAnimation=!![],o.type=="wave"||o.type==n?(o.step=o.vertex=o.baseline=o.colored=!1,this.highLowBars=this.barsHaveWidth=!!{},this.supportsAnimation=!1):o.type=="step"&&(o.step=!!{});var{baseline:r}=o;r&&typeof r=="object"&&t.ensureDefaults(o.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(i,n){var e,a,o,r,c,l,s,d;e=null,a=n.step,o=n.colored,r=n.baseline,c=n.vertex;for(var h=0;h<i.length;h++)switch(l="ve",l+="rt",l+="e",l+="x",s="bas",s+="el",s+="ine",d=i[h],d){case"line":case"mountain":case"wave":case"channel":e=d;break;case s:r=!0;break;case"colored":o=!0;break;case"step":a=!0;break;case l:c=!0;break;case"delta":break;default:return null}return e===null&&!r&&!a?null:new t.Renderer.Lines({params:t.extend(n,{type:e,step:a,colored:o,baseline:r,vertex:c})})},t.Renderer.Lines.prototype.draw=function(){var i,n,e,a,o,r,c,l,s,d,h,p,u;i=this.stx,n=this.stx.panels[this.params.panel],e=n.chart;function g(w){var v,m,q;return v=w.fill_color_up||i.getCanvasColor("stx_line_up"),m=w.fill_color_down||i.getCanvasColor("stx_line_down"),q=w.color||i.getCanvasColor("stx_line_chart"),function(x,y,k){return!y.iqPrevClose&&y.iqPrevClose!==0?q:y.Close>y.iqPrevClose?v:y.Close<y.iqPrevClose?m:q}}for(a={},r=this.seriesParams,c=this.params.colorFunction,o=0;o<r.length;o++){if(l=r[o],this.params.colored){s="_c",s+="olor",s+="_down",d="_color",d+="_",d+="u",d+="p",h=[d,s,"_color"];for(var f="0">>64;f<h.length;f++)p=l["border"+h[f]],p&&p!="auto"&&(l["fill"+h[f]]=p);c||(c=g(l)),this.params.colorFunction=c}u={},e.series[l.id]&&(u=t.clone(e.series[l.id].parameters)),a[l.id]={parameters:t.extend(t.extend(u,this.params),l),yValueCache:this.caches[l.id]},this==i.mainSeriesRenderer&&e.customChart&&e.customChart.colorFunction&&(a[l.id].parameters.colorFunction=e.customChart.colorFunction)}i.drawSeries(e,a,this.params.yAxis,this);for(o in a)this.caches[o]=a[o].yValueCache},t.Renderer.Lines.prototype.drawIndividualSeries=function(i,n){var e,a,o,r,c,l,s,d;if(e="ch",e+="annel",a="wa",a+="v",a+="e",!n.invalid&&(o=this.stx,r=i.context,c=null,l=n.colorFunction,s=o.panels[n.panel]||i.panel,!(typeof l=="string"&&(l=t.Renderer.colorFunctions[l],!l))))return n.vertex&&(d="b",d+="e",d+="ve",d+="l",r.save(),r.lineJoin=d),n.type==a?c=o.drawWaveChart(s,n):n.baseline?(c=o.drawBaselineChart(s,n),o.positionBaselineHandle(this)):n.type=="mountain"?(n.returnObject=!!{},c=o.drawMountainChart(s,n,l)):n.type==e?(n.returnObject=!!{},c=o.drawChannelChart(s,l,n)):(n.returnObject=!!{},c=o.drawLineChart(s,n.style,l,n)),n.vertex&&(o.scatter(s,{yAxis:n.yAxis,field:n.symbol||n.field,subField:n.subField,symbol:n.symbol,color:n.vertex_color,highlight:n.highlight}),r.restore()),c},t.Renderer.OHLC=function(i){var n,e,a,o;n="c",n+="andle",e="b",e+="a",e+="r",this.construct(i),a=this.params,a.type||(a.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,ot.v95(),a.histogram&&(o="c",o+="a",o+="ndle",a.type=o,this.highLowBars=![],a.volume=a.hollow=![]),a.type==e&&(a.volume=a.hollow=a.histogram=!{}),a.type==n&&(a.hlc=a.colored=!1),a.volume&&(a.hollow=!!{})},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,![]),t.Renderer.OHLC.requestNew=function(i,n){var e,a,o,r;e=null,a=n.histogram;for(var c="0"|0;c<i.length;c++)switch(o=i[c],o){case"candle":e=o;break;case"histogram":r="c",r+="a",r+="ndl",r+="e",a=!![],e=r;break;default:return null}return e===null?null:new t.Renderer.OHLC({params:t.extend(n,{type:e,histogram:a})})},t.Renderer.OHLC.getChartParts=function(i,n){var e,a,o,r,c,l,s,d,h,p,u,g,f;return e="fi",e+="ll_",e+="colo",e+="r_up",a="stx_cand",a+="le",a+="_s",a+="hadow_even",o="s",o+="hadow",r="c",r+="a",r+="ndl",r+="e",c="b",c+="orde",c+="r_color_",c+="up",l="bor",l+="der_col",l+="or_up",s="stx_hi",s+="stogra",s+="m_even",d="border_",d+="color",d+="_down",h="hi",h+="sto",h+="gram",p="stx_",p+="histogram_up",u=8,g=16,f=32,[{type:"histogram",drawType:"histogram",style:p,condition:u,fill:"fill_color_up",border:"border_color_up",useColorInMap:!![],useBorderStyleProp:!0},{type:h,drawType:"histogram",style:"stx_histogram_down",condition:g,fill:"fill_color_down",border:d,useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:s,condition:f,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:l},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:u,border:c},{type:r,drawType:"shadow",style:"stx_candle_shadow_down",condition:g,border:"border_color_down"},{type:"candle",drawType:o,style:a,condition:f,border:"border_color_even",skipIfPass:!!{}},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:u,fill:e,border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!![]},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:g,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!!{}}]},t.Renderer.OHLC.prototype.draw=function(){var i,n,e,a,o,r,c,l;for(i=this.stx,n=this.stx.panels[this.params.panel],ot.v95(),e=n.chart,a={},r=this.seriesParams,o="0"<<64;o<r.length;o++)c=r[o],l={},e.series[c.id]&&(l=t.clone(e.series[c.id].parameters)),a[c.id]={parameters:t.extend(t.extend(l,this.params),c)},this==i.mainSeriesRenderer&&e.customChart&&e.customChart.colorFunction&&(a[c.id].parameters.colorFunction=e.customChart.colorFunction);i.drawSeries(e,a,this.params.yAxis,this);for(o in a)a[o].yValueCache&&(this.caches[o]=a[o].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(i,n,e,a,o,r){var c,l,s,d,h,p,u;return c=r||e.color,l=this.params.yAxis||n.yAxis,a&&(c=r||e.borderLeftColor||e["border-left-color"],!c)?null:o?(s=i.pixelFromTransformedValue(l.highValue,n),isNaN(s)&&(s=0),d=e.backgroundColor,c&&!t.isTransparent(c)?(h="bott",h+="o",h+="m",p="to",p+="p",u=i.chart.context.createLinearGradient(0,s,0,2*l[l.flipped?p:h]-s),u.addColorStop(0,c),u.addColorStop(1,d),u):d):c},t.Renderer.OHLC.prototype.drawIndividualSeries=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R;if(a="o",a+="p",a+="e",a+="n",!n.invalid&&(o=this.stx,r=i.context,c=n.colorFunction,l=o.panels[n.panel]||i.panel,!(typeof c=="string"&&(c=t.Renderer.colorFunctions[c],!c)))){if(s=o.layout.candleWidth-i.tmpWidth<=2&&i.tmpWidth<=3,e.A_p(18),e.G7m("4",32),e.k1h(39),e.G7m("8",1),i.state.chartType||(i.state.chartType={}),d=i.state.chartType.pass={},h=o.colorByCandleDirection,n.colorBasis&&(h=n.colorBasis==a),p=n.histogram,u=n.type,g=n.hollow,f=o.noWicksOnCandles[u],o.startClip(l.name),w=null,v={colors:[],cache:[]},m=[],c)q={isHistogram:p,field:n.field,yAxis:n.yAxis,isVolume:n.volume,highlight:n.highlight},!p&&u=="bar"?(x="stx_bar_",x+="chart",q.type=n.hlc?"hlc":"bar",v=o.drawBarChart(l,x,c,q)):(u=="candle"&&!f&&o.drawShadows(l,c,q),v=o.drawCandles(l,c,q),q.isOutline=!0,(g||!s)&&o.drawCandles(l,c,q));else{y=p&&n.gradient!==!{},k=t.Renderer.OHLC.getChartParts(n.style,h);for(var H=0;H<k.length;H++)if(S="b",S+="ar",A="can",A+="dle",_="b",_+="a",_+="r",T=k[H],!(T.skipIfPass&&!d.even)){if(p){if(P="his",P+="tog",P+="ram",T.type!=P)continue}else if(u==_){if(T.type!="bar")continue;if(n.colored&&!T.condition)continue;if(!n.colored&&T.condition)continue}else if(g){if(E="sha",E+="do",E+="w",z="h",z+="ollow",T.type!=z)continue;if(T.drawType==E&&f)continue}else if(u=="candle"){if(T.type!="candle")continue;if(T.drawType=="shadow"){if(U="stx_candle",U+="_shadow_even",f)continue;if(N=n.border_color_up||o.getCanvasColor("stx_candle_shadow_up"),C=n.border_color_down||o.getCanvasColor("stx_candle_shadow_down"),D=n.border_color_even||o.getCanvasColor(U),!t.colorsEqual(N,C)||!t.colorsEqual(N,D)||!t.colorsEqual(N,o.defaultColor)){if(!T.condition)continue}else if(T.condition)continue}}else continue;F=o.canvasStyle(T.style),M=this.getColor(o,l,F,!1,!{},n[T.fill]),I=this.getColor(o,l,F,!1,y,n[T.fill]),L=this.getColor(o,l,F,T.useBorderStyleProp&&!s,y,n[T.border]),T.drawType==A&&(O="ca",O+="nd",O+="l",O+="e",B="ho",B+="ll",B+="ow",T.type==B?(!t.isTransparent(I)&&t.colorsEqual(L,I)&&(L=T.useColorInMap?"transparent":I),T.useColorInMap||(I=o.containerColor)):T.type==O&&s&&(t.isTransparent(I)?I=L:L=I)),r.globalAlpha=n.opacity,m.push(o.drawBarTypeChartInner({fillColor:I,borderColor:L,condition:T.condition,style:T.style,type:u==S&&n.hlc?"hlc":T.drawType,panel:l,field:n.field,yAxis:n.yAxis,volume:n.volume&&n.hollow,highlight:n.highlight})),w||(w={}),T.useColorInMap&&(w[M]=1)}}o.endClip();for(var W in w)(!n.hollow||!t.equals(W,o.containerColor))&&v.colors.push(W);for(W=0;W<m.length;W++)for(var X=0;X<m[W].cache.length;X++)R=m[W].cache[X],(R||R===0)&&(v.cache[X]=R);return v}},t.Renderer.Candles=function(i){var n;this.construct(i),n=this.params,n.type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,n.hlc=n.colored=n.histogram=!1,n.volume&&(n.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(i){ot.v95();var n;this.construct(i),n=this.params,n.type="candle",n.histogram=!![],this.barsHaveWidth=this.standaloneBars=!![],this.highLowBars=!{},n.hlc=n.colored=n.hollow=n.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)};Xc=b=>{var t;t=b.CIQ,t.capitalize=function(i){if(!i)return"";ot.A_p(31),ot.v95();var n=ot.G7m(20,19);return i.charAt(0).toUpperCase()+i.slice(n)},t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(i){return ot.c4P(),i.replace(t.camelCaseRegExp,function(n){return ot.c4P(),n[1].toUpperCase()})},t.uniqueID=function(i){var n,e,a,o,r;return i?(n="xxxx",n+="xxxx-xxxx-4xxx-yxxx-xxxxxxxxxx",n+="xx",e=new Date().getTime(),typeof window!="undefined"&&window.performance&&typeof window.performance.now=="function"&&(e+=window.performance.now()),a=n.replace(/[xy]/g,function(c){var l=ot,s;l.k1h(25);var d=l.F0D(20,19,96,17,1864);l.k1h(99),l.v95();var h=l.G7m(21,15,2,7,1);return s=(e+Math.random()*d)%h|+"0",l.A_p(100),e=Math.floor(l.F0D(e,16,"16")),(c=="x"?s:s&3|8).toString(16)}),a):(o=new Date,r=o.getTime().toString(36),r+=Math.floor(Math.random()*Math.pow(36,2)).toString(36),r.toUpperCase())}};Zc=b=>{};Jc=b=>{var t=ot,i;t.v95(),i=b.CIQ,i.getHostName=function(n){t.v95();try{return n.match(/:\/\/(.[^/]+)/)[1]}catch{return""}},i.qs=function(n){var e,a,o,r;e={},n||(n=window.location.search.substring(1)),t.v95(),a=n.split("&");for(var c=0;c<a.length;c++)o=a[c].indexOf("="),o>0?(r=a[c].substring(0,o),t.k1h(10),e[r]=a[c].substring(t.G7m(o,1))):(r=a[c],e[r]=null);return e},i.postAjax=function(n,e,a,o,r){var c,l,s,d,h,p,u,g,f,w;if(c="applicati",c+="on/x-www-",c+="form-urlenco",c+="ded",l="P",l+="OST",s="str",t.c4P(),s+="ing",typeof n==s&&(n={url:n,payload:e,cb:a,contentType:o,noEpoch:r,method:null,responseHeaders:!{}}),d=n.url,h=n.cb,p=n.payload,h||(h=function(){}),!n.ungovernable&&i.Extras&&i.Extras.RequestLimiter&&i.Extras.RequestLimiter.hitRequestLimit(d)){h(429,null,{});return}if(u=new XMLHttpRequest,!u)return![];if(g=new Date,n.noEpoch||(d.indexOf("?")==-+"1"?d+="?ciqrandom="+g.getTime():d+="&ciqrandom="+g.getTime()),f=n.method,w=n.headers,f||(f=p?l:"GET"),u.open(f,d,!0),n.contentType||(n.contentType=c),p&&u.setRequestHeader("Content-Type",n.contentType),w)for(var v in w)u.setRequestHeader(v,w[v]);n.timeout&&(u.timeout=n.timeout);function m(q){var x,y,k,S;if(x={},!!n.responseHeaders){y=q.getAllResponseHeaders(),t.v95(),k=y.split(`
`);for(var A=0;A<k.length;A++){for(S=k[A].split(":");S[1]&&S["1"<<32].charAt(+"0")==" ";)S[1]=S["1"|1].substring(+"1");S[+"0"]!==""&&(x[S.shift()]=S.join(":"))}return x}}u.ontimeout=function(){h(408,null,{})},u.onload=function(){this.status===0?this.status="0":this.status||(this.status=200),h(this.status,this.responseText,m(this))},u.onerror=function(){h("0",null,{})};try{u.send(p)}catch(q){h("0",q,{})}return!![]},i.loadUI=function(n,e,a){var o,r,c,l,s,d,h;if((!e||typeof e=="function")&&(a=e,e=document.body),o=e.ownerDocument,t.A_p(50),r=o.querySelector(t.G7m('iframe[original-url="',n,'"]')),c=function(){var f,w,v,m;f=null;try{f=this.contentDocument}catch(x){return a(x)}if(f&&!f.title){w=f.body.innerHTML,v=document.createElement("div"),i.innerHTML(v,w);for(var q=0;q<v.children.length;q++)m=v.children[q].cloneNode(!!{}),e.appendChild(m);a(null)}else a(new Error("iFrame not found or document has a title"))},r){l="comp",l+="lete",s=null;try{s=r.contentDocument}catch(f){return a(f)}s.readyState===l&&s.location&&s.location.href!=="about:blank"?c.call(r):(d="lo",d+="ad",r.addEventListener(d,c))}else{h="orig",h+="inal-",h+="u",h+="rl",r=document.createElement("iframe"),r.setAttribute(h,n),t.k1h(84);var p=t.F0D(200,3601,13,14,200);t.k1h(8);var u=t.G7m(5021,17,556);t.A_p(5);var g=t.G7m(480,448);t.A_p(10),t.F0D(2453,17),t.A_p(101),t.G7m(16948,5634,16,4,4),r.src=n+(n.indexOf(p<603.81?u:"?")===-("1">>g)?"?":"&")+i.uniqueID(),r.hidden=!0,r.addEventListener("load",c),o.body.appendChild(r)}},i.loadScript=function(n,e,a,o){var r,c,l,s,d;if(r="s",r+="cri",r+="p",r+="t",i.loadedScripts||(i.loadedScripts={}),i.loadedScripts[n]){e&&e();return}if(c=document.createElement("SCRIPT"),a?(l="mo",l+="dule",c.type=l,c.crossOrigin="use-credentials"):c.async=!![],c.onload=function(){i.loadedScripts[n]=!![],e&&e()},s=n,s.indexOf("?")==-("1">>64))s=s+"?"+Date.now();else{t.A_p(10);var h=t.F0D(1563,4687);t.A_p(36),t.F0D(1,7069,7084,7069),t.A_p(27);var p=t.F0D(17,416,5,1,1963);t.A_p(37);var u=t.F0D(1207,2398,2414);s=s+(h!="169">>p?"&":u)+Date.now()}c.src=s,d=(o||document).getElementsByTagName(r)[t.G7m("0",0,t.A_p(5))],t.v95(),d?d.parentNode.insertBefore(c,d.nextSibling):(o||document).body.append(c)},i.loadStylesheet=function(n,e,a){var o,r,c,l,s;o="text",o+="/c",o+="ss",r="l",r+="i",r+="nk",c=document.createElement(r),c.rel="stylesheet",c.type=o,c.media="screen",t.A_p(102);var d=t.G7m(0,12,660,11,5);c.href=n+(n.indexOf("?")===d?"?":"&")+Date.now(),c.onload=function(){t.v95(),!this.loaded&&(this.loaded=!![],e&&e())},l=(a||document).getElementsByTagName("link"),t.A_p(31);var h=t.F0D(17,16);s=l[l.length-h],s?s.parentNode.insertBefore(c,s.nextSibling):(a||document).head.append(c)},i.loadWidget=function(n,e,a,o){var r,c,l;r=".",r+="c",t.v95(),r+="s",r+="s",c="f",c+="u",c+="n",c+="ction",(!e||typeof e==c)&&(a=e,e=document.body),l=e.ownerDocument,t.k1h(10),i.loadStylesheet(t.F0D(n,r),function(){t.A_p(10),i.loadUI(t.F0D(n,".html"),e,function(s){t.c4P(),s?a(s):(t.A_p(10),i.loadScript(t.G7m(n,".js"),a,o,l))})},l)},i.waitForPlugins=function(n,e,a){var o,r,c,l;if(t.k1h(3),o=t.F0D("0",0),r=n.length,!r){e();return}for(var s="0"|0;s<r;s++)c="cq-"+n[s],l=(a||document).getElementsByTagName(c)[0],l&&l.hasAttribute("loaded")&&o++;if(r!==o)return setTimeout(function(){t.c4P(),i.waitForPlugins(n,e,a)},0);e()},i.addInternalStylesheet=function(n,e,a){var o,r,c;o="p",o+="a",o+="t",o+="h",r="t",r+="y",r+="p",r+="e",n&&(n.default&&(n=n.default),typeof n=="string"&&(e&&(a||document).querySelector('style[path="'+e+'"]')||(c=document.createElement("style"),c.setAttribute(r,"text/css"),c.setAttribute(o,e||""),c.innerText=n,(a||document).head.appendChild(c))))}};$c=b=>{var t=ot,i;i=b.CIQ,i.ChartEngine.prototype.registerHTMLElements=function(){var n,e,a,o,r,c,l;n=this.chart.container;for(var s in i.ChartEngine.htmlControls)if(e="u",e+="n",e+="defined",typeof this.chart[s]=="undefined"&&typeof this.controls[s]==e){if(!this.allowZoom&&s=="chartControls")continue;if(t.k1h(10),a=n.querySelector(t.F0D(".",s)),a)this.chart[s]=a,this.controls[s]=a;else{if(o=i.ChartEngine.htmlControls[s],!o)continue;r=document.createElement("DIV"),r.innerHTML=o.replace(/[\t\n\r]/gm,""),a=r.firstChild,n.appendChild(a),this.chart[s]=a,this.controls[s]=a,a.classList.add(s)}}t.c4P();var{chartControls:d,home:h}=this.controls;d&&(c=d.querySelector(".stx-zoom-in"),l=d.querySelector(".stx-zoom-out"),i.safeClickTouch(c,function(p){return t.c4P(),function(u){if(!p.allowZoom||p.activeDrawing&&!p.allowDrawingZoom){u.stopPropagation();return}p.zoomIn(u),u.stopPropagation()}}(this)),i.safeClickTouch(l,function(p){return function(u){var g,f,w;if(!p.allowZoom||p.activeDrawing&&!p.allowDrawingZoom){u.stopPropagation();return}g=-1307363289,f=-1750145684,t.k1h(5),w=t.F0D("2",0);for(var v=1;t.Y9k(v.toString(),v.toString().length,+"62378")!==g;v++)p.zoomOut(u),u.stopPropagation(),w+=+"2";t.f0X(w.toString(),w.toString().length,85160)!==f&&(p.zoomOut(u),u.stopPropagation())}}(this)),i.touchDevice||(this.makeModal(c),this.makeModal(l))),h&&(i.safeClickTouch(h,function(p){return t.v95(),function(u){if(u.stopPropagation(),!p.isHistoricalMode()){p.home({animate:!!{}});return}delete p.layout.range,p.loadChart(p.chart.symbol,function(){p.home({animate:![]})})}}(this)),i.touchDevice||this.makeModal(h)),this.allowDragControls&&this.allowDragControls()},i.ChartEngine.prototype.home=function(n){var e,a,o,r,c,l,s;this.swipe.amplitude=0,e=this.layout;function d(g){var f;for(var w in g.panels){f=g.panels[w].yaxisLHS.concat(g.panels[w].yaxisRHS);for(var v=+"0";v<f.length;v++)f[v].lockScale||g.calculateYAxisMargins(f[v])}}typeof n!="object"&&(n={maintainWhitespace:n}),typeof n.maintainWhitespace=="undefined"&&(n.maintainWhitespace=!0),this.chart.draggingControls=null;function h(g,f,w){return t.v95(),function(){d(g),t.v95(),f.scroll=w,g.draw()}}if(this.cancelTouchSingleClick=!0,!this.chart.dataSet||!this.chart.dataSet.length){this.draw();return}this.micropixels=0,a=Math.floor(this.chart.width/e.candleWidth);for(var p in this.charts)if(o=this.charts[p],!(n.chart&&n.chart!=o)){for(r=0,n.maintainWhitespace&&this.preferences.whitespace>=0&&(r=this.preferences.whitespace),(n.whitespace||n.whitespace===0)&&(r=n.whitespace),c=this.getLabelOffsetInPixels(o,e.chartType),c>r&&(r=c),l=Math.min(a,o.dataSet.length),this.chart.allowScrollPast&&(l=a),this.micropixels=this.chart.width-l*e.candleWidth-r,this.preferences.whitespace=r;this.micropixels>e.candleWidth;)l++,this.micropixels-=e.candleWidth;for(;this.micropixels<0;)l--,this.micropixels+=e.candleWidth;if(this.micropixels-=e.candleWidth,l++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){t.A_p(10);var u=t.F0D(0,2);this.micropixels+=e.candleWidth/u}n.animate?(s=this,this.scrollTo(o,l,h(s,o,l))):(o.scroll=l,d(this))}this.draw()},i.ChartEngine.prototype.headsUpHR=function(){var n,e,a,o,r,c;if(n="head",n+="sUpHR",this.runPrepend(n,arguments)||(e=this.currentPanel,!e))return;a=e.chart,this.updateFloatHRLabel(e),o=this.controls.floatDate,o&&!a.xAxis.noDraw&&(r=this.barFromPixel(this.cx),c=a.xaxis[r],c&&c.DT?l(i.displayableDate(this,a,c.DT)):c&&c.index?l(c.index):l(""));function l(s){i.efficientDOMUpdate(o,"innerHTML",s)}this.runAppend("headsUpHR",arguments)},t.c4P(),i.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",this.undisplayCrosshairs()},i.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!![],this.openDialog="",t.v95(),this.doDisplayCrosshairs()},i.ChartEngine.prototype.makeModal=function(n){var e;e=this,n.onmouseover=function(a){t.c4P(),e.modalBegin()},n.onmouseout=function(a){t.c4P(),e.modalEnd()}},i.ChartEngine.prototype.updateChartAccessories=function(){var n,e,a,o,r,c,l;if(this.accessoryTimer!==null&&clearTimeout(this.accessoryTimer),!i.ChartEngine.drawingLine&&i.touchDevice&&new Date().getTime()-this.lastAccessoryUpdate<100){this.accessoryTimer=setTimeout(function(p){return function(){t.v95(),p.updateChartAccessories()}}(this),10);return}if(!!this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=new Date().getTime(),n=this.controls.floatDate,n&&(e=this.currentPanel,e||(e=this.chart.panel),e)){a="l",a+="ef",a+="t",o=e.chart,r=this.xAxisAsFooter===!0?0:this.chart.canvasHeight-e.chart.bottom,t.A_p(20);var s=t.G7m(11,4,22,14);if(c=n.offsetWidth/("2"<<s)-.5,l=this.pixelFromTick(this.crosshairTick,o)-c,l<0)l=0;else if(l>this.width-2*c-1){t.k1h(103);var d=t.F0D(9,8,15,0,257);t.A_p(12);var h=t.F0D(2,15,12,13);l=this.width-d*c-h}i.efficientDOMUpdate(n.style,a,l+"px"),i.efficientDOMUpdate(n.style,"bottom",r+"px")}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},i.ChartEngine.prototype.positionSticky=function(n){var e,a,o,r;e="ri",e+="gh",e+="t",a=Math.max(this.cy-n.offsetHeight-60,0),o=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-n.offsetWidth),r=n.style,t.A_p(10),i.efficientDOMUpdate(r,"top",t.F0D(a,"px")),i.efficientDOMUpdate(r,"left","auto"),t.k1h(10),i.efficientDOMUpdate(r,e,t.F0D(o,"px"))},i.ChartEngine.prototype.displaySticky=function(n){var e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C;if(e=".o",e+="verla",e+="yEdit",a=".ov",a+="erlayTrashCan",o=this.controls.mSticky,!!o&&(r=o.querySelector(".mStickyInterior"),!!r)){t.v95(),c=o.querySelector(a),l=o.querySelector(e),s=o.querySelector(".overlayText"),d=o.querySelector(".mouseDeleteInstructions"),h=o.querySelector(".stickyLongPressText"),p=o.querySelector(".customInstructions"),d.classList.remove("no_edit"),(!n||typeof n!="object")&&(n={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[+"2"],noDelete:arguments[+"3"],type:arguments[4]});var{forceShow:D,noDelete:F,noEdit:M,type:I,noText:L}=n,{message:O,backgroundColor:B}=n;if(!D&&!O)u="non",u+="e",g="n",g+="one",f="n",f+="o",f+="n",f+="e",r.innerHTML="",o.style.display="none",c&&(c.style.display=f),l&&(l.style.display="none"),s&&(s.style.display="none"),d&&(d.style.display=g),h&&(h.style.display=u);else{w="de",w+="fa",w+="ult",v="mSti",v+="ckyRightClick",O||(O="");var{defaultColor:R,highlightedDraggable:H}=this;if(B=="auto"&&(B=R),D&&!O){r.style.backgroundColor="",r.style.color="",m=-1192904464,q=-22361411,x=+"2";for(var W="1"-0;t.Y9k(W.toString(),W.toString().length,57218)!==m;W++)r.style.display="",t.k1h(18),x+=t.G7m("2",64);t.f0X(x.toString(),x.toString().length,+"25158")!==q&&(y="no",y+="n",y+="e",r.style.display=y)}else B?(k="inli",k+="ne-",k+="bl",k+="ock",r.style.backgroundColor=B,r.style.color=i.isTransparent(B)?R:i.chooseForegroundColor(B),r.style.display=k):(S="i",S+="nline-b",S+="lock",r.style.backgroundColor="",r.style.color="",r.style.display=S);r.innerHTML=O,A=o.querySelector(".mStickyRightClick"),A.className=v,I&&(t.A_p(10),A.classList.add(t.F0D("rightclick_",I))),A.style.display="",o.style.display="inline-block",(!H||H&&H.undraggable&&H.undraggable(this))&&(_="non",_+="e",h.style.display=_),F||this.bypassRightClick===!![]||this.bypassRightClick[I]?A.style.display="none":this.highlightViaTap||this.touches.length?(T="rem",T+="o",T+="v",T+="e",c&&(c.style.display="inline-block"),l&&!M&&(l.style.display="inline-block"),s&&!L&&(s.style.display="inline-block"),d&&(d.style.display="none"),h&&(h.style.display="none"),o.classList[O===""?"add":T]("hide")):(M&&d.classList.add("no_edit"),d&&(d.style.display="block"),h&&(h.style.display="none",P=this.preferences.dragging,P&&n.panel&&!n.panel.noDrag&&(E="b",E+="loc",E+="k",z="stu",z+="d",z+="y",(P===!0||P.study)&&I==z?h.style.display=E:(P===!0||P.series)&&I=="series"&&(h.style.display="block")))),p&&I&&(t.A_p(33),U=p.querySelector(`${t.G7m("e=","t","yp","[")}${I}]`),p.style.display=U?"block":"none"),N=I||w,o.setAttribute("cq-sticky-type",N),C=n.positioner||this.positionSticky,C.call(this,o)}}},i.ChartEngine.prototype.displayNotification=function(n,e,a={}){var o,r,c,l,s;if(o=".",o+="m",o+="essage",!!this.controls.notificationTray){var{callback:d,dismissalListeners:h}=a;r=this.controls.notificationTray,t.v95(),c=r.querySelector("template").content.cloneNode(!!{}),l=c.firstElementChild,l.className=n,l.querySelector(o).textContent=e,d&&(s=window.PointerEvent?"pointerup":"touchend",l.handler=l.addEventListener(s,d)),h&&(l.listeners={},h.forEach(p=>{t.c4P(),l.listeners[n]=this.addEventListener(p.type,p.callback)})),this.makeModal(l),r.appendChild(l)}},i.ChartEngine.prototype.removeNotification=function(n){var e,a;if(!!this.controls.notificationTray&&(e=this.controls.notificationTray,a=e.querySelector(`.${n}`),a)){if(a.handler&&a.removeEventListener(a.handler),a.listeners)for(var o in a.listeners)this.removeEventListener(a.listeners[o]);this.modalEnd(),e.removeChild(a)}},i.ChartEngine.prototype.setMeasure=function(n,e,a,o,r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;if(l="se",l+="tMe",l+="asure",!this.runPrepend(l,arguments)){if(s=(this.drawingContainer||document).querySelector(".mMeasure"),d="",!n&&n!==0)!this.anyHighlighted&&this.currentVectorParameters.vectorType===""&&this.clearMeasure();else{if(e!==!{}&&(h=Math.round(Math.abs(n-e)*this.chart.roundit)/this.chart.roundit,h=h.toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?d+=this.internationalizer.numbers.format(h):d+=h,n>0&&e>0)){if(u=" ",u+="(",t.k1h(43),p=t.F0D(n,n,e),Math.abs(p)>.1)t.k1h(49),p=Math.round(t.F0D("100",p));else if(Math.abs(p)>.01){t.k1h(104);var P=t.F0D(3,1,7);p=Math.round(p*+"1000")/P}else{g=-+"420514025",t.k1h(39),f=t.F0D("761421589",1),w=2;for(var E=+"1";t.f0X(E.toString(),E.toString().length,6324)!==g;E++){t.A_p(29);var z=t.F0D(6,607,10);p=Math.round(p+ +"99815")%z,t.A_p(18),w+=t.F0D("2",32)}if(t.Y9k(w.toString(),w.toString().length,78225)!==f){t.A_p(37);var U=t.F0D(12e4,9999,12e4);t.A_p(5);var N=t.F0D(113,13);p=Math.round(p*U)/N}}this.internationalizer?(t.A_p(30),p=this.internationalizer.percent.format(t.G7m(p,100))):(t.k1h(10),p=t.G7m(p,"%")),t.k1h(50),d+=t.G7m(u,p,")")}if(o!==![]){v="Ba",v+="r",v+="s",t.k1h(5),m=Math.abs(t.F0D(o,a)),t.A_p(13);var C=t.G7m(81,13,4,6);m=Math.round(m)+C,q=this.translateIf(v),t.A_p(33),d+=t.F0D(q,m," "," ")}s&&(s.innerHTML=d)}x=-1096514117,y=1964415905,k=2;for(var D=+"1";t.f0X(D.toString(),D.toString().length,+"44424")!==x;D++){if(this.activeDrawing)return;s=this.controls.mSticky,k+=2}if(t.f0X(k.toString(),k.toString().length,14577)!==y){if(this.activeDrawing)return;s=this.controls.mSticky}this.activeDrawing||(s=this.controls.mSticky,s&&(S=".m",S+="StickyInterior",A=s.querySelector(S),r?(_="r",_+="e",_+="mov",_+="e",T="inline-",T+="block",s.style.display=T,A&&(A.style.display="inline-block",(n||n===+"0")&&(A.innerHTML=d)),s.classList[d===""?"add":_]("hide"),this.positionSticky(s)):(s.style.display="none",A&&(A.innerHTML=""))),this.runAppend("setMeasure",arguments))}},i.ChartEngine.prototype.clearMeasure=function(){var n,e;t.v95(),n=".mM",n+="e",n+="asure",e=(this.drawingContainer||document).querySelector(n),e&&(e.innerHTML="")},i.ChartEngine.prototype.zoomSet=function(n,e){var a,o,r,c,l,s,d;if(e||(e=this.chart),!!e.dataSet){if(n=this.constrainCandleWidth(n),e.tempCanvas.style.display!="none"&&i.clearCanvas(e.tempCanvas,this),a=this.mainSeriesRenderer||{},!a.params||!a.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<e.dataSet.length){r=2119703848,c=-1910550228,l=2;for(var h=1;t.f0X(h.toString(),h.toString().length,"45402"<<64)!==r;h++)o=this.crosshairTick||this.tickFromPixel(this.cx,e),l+=2;t.Y9k(l.toString(),l.toString().length,45186)!==c&&(o=this.crosshairTick&&this.tickFromPixel(this.cx,e))}else if(this.isHome()){t.A_p(105);var p=t.G7m(94,13,5,13,18);o=e.dataSet.length-p}else e.scroll>e.dataSet.length?(t.A_p(18),o=t.F0D("0",0)):this.grabMode=="zoom-x"?o=this.tickFromPixel(this.chart.width,e):o=this.tickFromPixel(this.chart.width/2,e);this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),t.A_p(10);var u=t.G7m(0,1);s=e.dataSet.length-u-o,d=e.scroll,t.k1h(8);var g=t.F0D(9,8,0);e.scroll=Math.round((this.pixelFromTick(o,e)-e.left)/n)+g+s,this.micropixels+=(d-s)*this.layout.candleWidth-(e.scroll-s)*n}this.setCandleWidth(n),e.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}}};tl=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.currentBaseline=null,t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push(function(i){i.baselineHelper=new Map}),t.ChartEngine.prototype.registerBaselineToHelper=function(i){var n,e;if(!i.params.baseline)return;var{baselineHelper:a}=this;if(n=this,!a.has(i)){var{name:o}=i.params;e=this.controls.baselineHandle,a.set(i,{styleCache:null,display:![],handle:o==="_main_series"&&e?e:r(o)})}function r(c){var l,s;return l="cq",l+="-baseli",l+="ne-ha",l+="ndle",c=c.replace(" ","_"),s=document.createElement(l),s.classList.add("stx-baseline-handle",c),n.container.append(s),n.controls[`${c} cq-baseline-handle`]=s,s}},t.ChartEngine.prototype.removeBaselineFromHelper=function(i){var n,e,a,{baselineHelper:o}=this;o.has(i)&&(n="_",n+="main_se",n+="ries",e=i.params.name.replace(" ","_"),e!==n&&(a=o.get(i).handle,delete this.controls[`${e} cq-baseline-handle`],this.container.removeChild(a)),o.delete(i))},t.ChartEngine.prototype.findBaselineHandle=function(i,n){for(var e of this.baselineHelper){var[a,o]=e,{handle:r}=o;if(i.target===r||i.composedPath&&i.composedPath().includes(r))return n&&(this.repositioningBaseline={lastDraw:Date.now(),handle:r,renderer:a},r.classList.add("stx-grab")),this.currentBaseline=a,!![]}return![]},t.ChartEngine.prototype.setBaselines=function(i){var n=ot,e;i||(i=this.chart);function a(r,c){var l,s,d,h,p,u,g;l="t",l+="ick";var{dataSegment:f,dataSet:w,defaultPlotField:v}=i;if(s=v,c||(s=r),d=e.getFirstLastDataRecord(f,l),n.c4P(),!d)return null;for(h=d.tick;[];){if(p=w[h],p){if(!c||s!="Close"){if(n.k1h(5),u=w[n.F0D(h,1)],u&&(u[s]||u[s]===0))return g=u[s],typeof g=="object"?g[v]:g}else if(p.iqPrevClose||p.iqPrevClose===+"0")return p.iqPrevClose}if(h--,h<0)break}}n.v95(),e=this;var{baselineHelper:o}=this;o.forEach(function(r,c){var l,s,d,h,p,{baseline:u}=c.params;n.A_p(78),l=n.G7m(u,!![]),l&&(u=i.baseline);var{defaultLevel:g,userLevel:f}=u;s=c.getYAxis(e),s&&(d=e.getYAxisBaselineRenderer(s),h=d&&d!=e.mainSeriesRenderer&&d.seriesParams.length&&d.seriesParams["0"*1].id,u.actualLevel=f||f===0?f:g,!u.actualLevel&&u.actualLevel!==0&&(p=a(h,l),p!==null&&(u.actualLevel=p)),r.display=d===c,n.c4P(),o.set(c,r))})},t.ChartEngine.prototype.setBaselineUserLevel=function(){var i,n,e,{chart:a,currentPanel:o}=this,{lastDraw:r,renderer:c}=this.repositioningBaseline;if(c.params.panel==o.name){var{baseline:l}=a;i=typeof c.params.baseline=="object"?c.params.baseline:l,n=c.getYAxis(this),e=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),o,n),i.userLevel=this.adjustIfNecessary(o,this.crosshairTick,e),Date.now()-r>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},t.ChartEngine.prototype.setBaselineMinMax=function(i,n){var e,a,o,r;e="mo",e+="untain";var{baselineHelper:c,chart:l,repositioningBaseline:s}=this,{baseline:d,seriesRenderers:h}=l;if(a=l.transformFunc&&n===l.panel.yAxis,ot.c4P(),o=n.renderers.find(f=>(ot.v95(),c.get(h[f]))),!o)return i;var{baseline:p,type:u}=h[o].params;if(u===e)return i;p=typeof p=="object"?p:d;var{actualLevel:g}=p;return(g||g===0)&&(a&&(g=l.transformFunc(this,l,g)),r=Math.max(g-i[0],i[1]-g),i[0]=s?n.lowValue:g-r,i[1]=s?n.highValue:g+r),i},t.ChartEngine.prototype.positionBaselineHandle=function(i){var n=ot,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;if(!!this.manageTouchAndMouse){var{baselineHelper:A,chart:_,panels:T}=this,{baseline:P,panel:E}=i.params;e=i.params.yAxis||i.getYAxis(this);var{display:z,handle:U,styleCache:N}=A.get(i);if(P===!!{}&&(P=_.baseline),P.userLevel===!1||!z){a="non",a+="e",U.style.display=a,o=1138671291,r=-2137250814,n.A_p(18),c=n.G7m("2",32);for(var C=1;n.f0X(C.toString(),C.toString().length,93757)!==o;C++)return;if(n.Y9k(c.toString(),c.toString().length,42183)!==r)return}l=T[E],s=U.classList.contains("stx-grab"),d="bl",d+="ock",h=P.actualLevel,e===_.yAxis&&_.transformFunc&&(h=_.transformFunc(this,_,h)),h>e.high?(h=e.high,s||(d="none")):h<e.low&&(h=e.low,s||(d="none")),e===_.yAxis&&_.untransformFunc&&(h=_.untransformFunc(this,_,h)),p=this.pixelFromPrice(h,l,e),N||(N=getComputedStyle(U)),u=t.stripPX(N.width),n.A_p(91);var D=n.G7m(9,6,7,0,2);n.A_p(10),g=`${p-t.stripPX(N.height)/D}${n.F0D("p","x")}`,w=this.baselineHandleBuffer||2,n.k1h(8);var F=n.F0D(4,14,11);if(v=l.yaxisRHS.indexOf(e)+F,v){m=-361804042,q=-684282632,n.A_p(3),x=n.G7m("2",2);for(var M=1;n.Y9k(M.toString(),M.toString().length,70706)!==m;M++)y=v!==9?w:w-v,f=`${(_.right+u%v)%y}px`,x+=2;n.Y9k(x.toString(),x.toString().length,86752)!==q&&(y=v===1?w:w*v,f=`${_.right-u*v-y}px`)}else k=l.yaxisLHS.slice(0).reverse().indexOf(e)+("1"-0),S=k===1?w:w*k,n.A_p(10),f=`${_.left+u*k+S-u}${n.G7m("p","x")}`;Object.assign(U.style,{display:d,top:g,left:f})}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(i){var n;if(!i.renderers.length)return null;var{baselineHelper:e,chart:a}=this;return n=i.renderers.find(o=>e.get(a.seriesRenderers[o])),n?a.seriesRenderers[n]:null},t.ChartEngine.prototype.getYAxisBaseline=function(i){var n,e,a,o,r;n="o",n+="bj",n+="ec",n+="t";var{baseline:c}=this.chart;if(e=this.getYAxisBaselineRenderer(i),!e)return c;a=-662385106,o=-798650129,r=2;for(var l=1;ot.f0X(l.toString(),l.toString().length,76353)!==a;l++){var{baseline:s}=e.params;r+=2}if(ot.Y9k(r.toString(),r.toString().length,"72878"*1)!==o)var{baseline:s}=e.params;var{baseline:s}=e.params;return typeof s===n?s:c}};el=b=>{var t,i;t="Cl",t+="o",t+="s",t+="e",i=b.CIQ,i.ChartEngine.Chart=function(){this.xAxis=new i.ChartEngine.XAxis,this.yAxis=new i.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=i.clone(this.baseline),this.panel=void 0},i.extend(i.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!{},forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:![],defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:i.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},yaxisMarginMultiplier:2.5,allowScrollPast:!!{},allowScrollFuture:!!{},whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:t,defaultChartStyleConfig:{},lockScroll:!{},includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!{},standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:i.calculateTradingDecimalPlaces,width:null,height:null,top:null,bottom:null,left:null,right:null,context:null,endPoints:null},!![])};il=b=>{var t,i;t="d",t+="ataSe",t+="t",i=b.CIQ,i.ChartEngine.prototype.resolveY=function(n){return ot.v95(),this.top+n},i.ChartEngine.prototype.resolveX=function(n){return ot.v95(),this.left+n},i.ChartEngine.prototype.backOutY=function(n){return ot.A_p(5),Math.max(ot.F0D("0",0),Math.min(this.height,n-this.top))},i.ChartEngine.prototype.backOutX=function(n){return ot.c4P(),Math.max(+"0",Math.min(this.width,n-this.left))},i.ChartEngine.prototype.dateFromTick=function(n,e,a,o="dataSet"){var r=ot,c,l,s,d,h,p,u,g,f,w,v,m;if(e||(e=this.chart),c=e[o],l=c.length,r.v95(),p=!1,l===0&&(c[0]={},c[0].DT=new Date,l=c.length,p=!0),n<0)d=this.standardMarketIterator(c[0].DT),d?s=d.previous(Math.abs(n)):s=c["0"^0].DT;else if(n>=l){d=this.standardMarketIterator(c[l-1].DT),u=21113796,g=-+"1083632874",f=2;for(var q=1;r.Y9k(q.toString(),q.toString().length,50976)!==u;q++)d?(r.A_p(106),s=d.next(r.F0D(n,l,"1"))):s=c[l-1].DT,r.k1h(4),f+=r.G7m("2",0);r.f0X(f.toString(),f.toString().length,"73201"<<64)!==g&&(d?(r.A_p(47),s=d.next(r.G7m(7,n,l))):s=c[l+6].DT)}else s=c[n].DT;if(a)h=new Date(s.getTime());else{w=240614577,v=-2078129282,m=2;for(var x=+"1";r.Y9k(x.toString(),x.toString().length,23150)!==w;x++)r.k1h(72),h=i.yyyymmddhhmmssmmm(s).substr(r.F0D(32,"5"),87),m+=2;r.f0X(m.toString(),m.toString().length,68714)!==v&&(h=i.yyyymmddhhmmssmmm(s).substr(0,12))}return p&&delete c[0].DT,h},i.ChartEngine.prototype.tickFromDate=function(n,e,a,o,r=t){var c=ot,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;if(e||(e=this.chart),l=e[r],!(l&&l.length))return c.A_p(4),c.G7m("0",0);if(a||(a=0),c.v95(),s=n.constructor==Date?n:i.strToDateTime(n),i.ChartEngine.isDailyInterval(this.layout.interval)||s.setMinutes(s.getMinutes()+a),d=s.getTime(),e.tickCache[r]||(e.tickCache[r]={}),h=e.tickCache[r][d],h||h===("0"|0))return o?Math.ceil(h):Math.floor(h);if(p=l[0].DT,u=l[l.length-1].DT,s>=p&&s<=u){for(g=+"0",f=l.length,w=+"0";++w<100;){if(c.A_p(107),v=Math.floor(c.F0D(f,64,"2",g)),m=l[v].DT,+m==+s)return e.tickCache[r][d]=v,v;if(m<s&&(g=v),m>s){if(l[v-+"1"].DT<s)return c.A_p(5),e.tickCache[r][d]=c.F0D(v,.5),o?v:v-1;if(+l[v-1].DT==+s)return c.k1h(5),e.tickCache[r][d]=c.G7m(v,1),c.k1h(5),c.F0D(v,1);f=v}}if(w>=100)return console.log("!!!Warning: tickFromDate() did not find match."),l.length}return c.k1h(81),q=c.G7m(s,p),x=q?p:u,y=this.standardMarketIterator(x),k=y?y.futureTick({end:s}):0,h=q?k*-1:l.length-1+k,e.tickCache[r][d]=h,h},i.ChartEngine.prototype.pixelFromBar=function(n,e){var a,o;e||(e=this.chart),a=0,o=this.chart.segmentImage,o&&o[n]&&typeof o[n].leftOffset=="number"?a=o[n].leftOffset:a=(n+("0.5"-0))*this.layout.candleWidth,ot.k1h(0);var r=ot.F0D(7,0,7);return a=e.panel.left+Math.floor(a+this.micropixels)-r,a},i.ChartEngine.prototype.barFromPixel=function(n,e){var a=ot,o,r,c,l,s,d,h,p,u,g,f,w,v;if(e||(e=this.chart),o=this.chart.segmentImage,r=this.micropixels,c=this.layout.candleWidth,a.c4P(),o){l=n-e.panel.left-r,s=2,h=o.length,a.k1h(30),p=Math.round(a.F0D(h,s)),a.A_p(92);var m=a.G7m(14,0,11,26);a.A_p(8);var q=a.G7m(3,6,4);a.A_p(10);var x=a.G7m(1,1);if(f=o[h-m].leftOffset+o[h-q].candleWidth/x,l>f)return h+Math.floor((n-f-e.panel.left-r)/c);for(var y=1;y<h&&(s*=+"2",d=o[p],!!d);y++){u=d.leftOffset,a.k1h(108);var k=a.F0D(207,19,8,1,19);if(g=d.candleWidth/k,a.A_p(5),w=a.F0D(u,g),a.A_p(10),v=a.F0D(u,g),p===0||l>=w&&l<v)break;l<w?p-=Math.max(1,Math.round(h/s)):p+=Math.max(1,Math.round(h/s)),a.k1h(72),p=Math.max(a.F0D(64,"0"),Math.min(h-1,p))}if(!o[p]){for(y=0;y<h;y++)if(d=o[y],!!d){u=d.leftOffset,a.k1h(109);var S=a.F0D(10,5,8,5,17);if(g=d.candleWidth/S,l<u-g)return a.k1h(72),Math.max(a.G7m(32,"0"),a.F0D(y,1,a.A_p(5)));if(l<u+g)return y;if(l>=u+g)return a.k1h(10),a.G7m(y,1)}}return p}return Math.floor((n-e.panel.left-r)/c)},i.ChartEngine.prototype.tickFromPixel=function(n,e){var a;return e||(e=this.chart),a=e.dataSet.length-e.scroll,e.segmentImage?a+=this.barFromPixel(n,e):a+=Math.floor((n-e.panel.left-this.micropixels)/this.layout.candleWidth),ot.v95(),a},i.ChartEngine.prototype.pixelFromTick=function(n,e){var a=ot,o,r,c,l,s,d,h,p,u,g,f;if(e||(e=this.chart),o=e.dataSegment,r=e.dataSet,c=e.segmentImage,l=this.micropixels,s=o?o.length:0,d=e.panel,h=e.scroll,p=n-r.length+h,u=s?o[p]:null,c&&(u=c[p]),u&&typeof u.leftOffset=="number")return d.left+Math.floor(u.leftOffset+l);if(a.c4P(),a.k1h(39),g=a.G7m("0",1),f=0,u=s?o[s-1]:null,c&&(a.k1h(5),u=c[a.G7m(s,1)]),u&&typeof u.leftOffset=="number"&&s<=n-r.length+h){a.A_p(59);var w=a.F0D(6,0,1,2);g=u.leftOffset+u.candleWidth/w,f=s}return g+d.left+Math.floor((n-f-r.length+h+.5)*this.layout.candleWidth+l)},i.ChartEngine.prototype.pixelFromDate=function(n,e,a,o){return ot.v95(),this.pixelFromTick(this.tickFromDate(n,e,a,o),e)},i.ChartEngine.prototype.transformedPriceFromPixel=function(n,e,a){var o,r,c;if(e||(e=this.chart.panel),o=a||e.yAxis,n=o.bottom-n,ot.c4P(),o.semiLog)c=n*o.logShadow/o.height,o.flipped?c=o.logHigh-c:c+=o.logLow,r=Math.pow(10,c);else{if(!o.multiplier)return null;r=n/o.multiplier,o.flipped?r=o.high-r:r+=o.low}return r},i.ChartEngine.prototype.priceFromPixel=function(n,e,a){var o;return e||(e=this.chart.panel),o=this.transformedPriceFromPixel(n,e,a),this.charts[e.name]&&e.chart.untransformFunc&&(!a||a==e.yAxis)&&(o=e.chart.untransformFunc(this,e.chart,o,a)),o},i.ChartEngine.prototype.valueFromPixel=function(n,e,a){ot.c4P();var o;return e||(e=this.whichPanel(n)),e||(o=Object.values(this.panels),o&&o.length&&(n<=0?e=o.shift():e=o.pop())),this.priceFromPixel(n,e,a)},i.ChartEngine.prototype.valueFromInterpolation=function(n,e,a,o,r){var c=ot,l,s,d,h,p,u,g,f,w,v,m,q,x,y;return l="und",l+="ef",l+="ined",n===null||n<0||!e||(o||(o=this.chart.panel),r||(r=o.yAxis),a||(a=this.chart.defaultPlotField),s=this.getPreviousBar(this.chart,e,n),!s)?null:(h=i.existsInObjectChain(s,e),h&&(d=h.obj[h.member]),typeof d=="object"&&(d=d[a]),p=this.getRendererFromSeries(e),p&&p.params.step||this.layout.chartType==="step"?d:(u=this.getNextBar(this.chart,e,n),c.c4P(),h=i.existsInObjectChain(u,e),h&&(g=h.obj[h.member]),typeof g=="object"&&(g=g[a]),!u||d===null||typeof d==l||g===null||typeof g=="undefined"?null:(f=this.pixelFromPrice(d,o,r),w=this.pixelFromPrice(g,o,r),v=s.tick,m=u.tick,c.k1h(110),q=c.F0D(w,v,f,m),x=this.chart.dataSegment[n].tick,c.A_p(111),y=c.F0D(q,f,v,x),this.priceFromPixel(y,o,r))))},i.ChartEngine.prototype.pixelFromTransformedValue=function(n,e,a){var o,r,c,l,s;return e||(e=this.chart.panel),ot.c4P(),o=a||e.yAxis,r=(o.high-n)*o.multiplier,o.semiLog&&(c=Math.max(n,0),l=Math.log(c)/Math.LN10,s=o.height,r=s-s*(l-o.logLow)/o.logShadow),r=o.flipped?o.bottom-r:o.top+r,r},i.ChartEngine.prototype.pixelFromPrice=function(n,e,a){var o,r,c;if(e||(e=this.chart.panel),this.charts[e.name]&&e.chart.transformFunc&&(!a||a==e.yAxis)){n=e.chart.transformFunc(this,e.chart,n,a),o=-2097696415,r=-869429052,c=2;for(var l=1;ot.Y9k(l.toString(),l.toString().length,"25890"<<64)!==o;l++)c+=2;ot.f0X(c.toString(),c.toString().length,43439)}return this.pixelFromTransformedValue(n,e,a)},i.ChartEngine.prototype.pixelFromValueAdjusted=function(n,e,a,o){var r,c;return this.layout.adj||!this.charts[n.name]?this.pixelFromPrice(a,n,o):(r=Math.round(e),r>0&&r<n.chart.dataSet.length&&(c=n.chart.dataSet[r].ratio)?(ot.k1h(39),this.pixelFromPrice(ot.F0D(a,c),n,o)):this.pixelFromPrice(a,n,o))},ot.v95(),i.ChartEngine.prototype.adjustIfNecessary=function(n,e,a){var o,r;return this.layout.adj||!n||!this.charts[n.name]?a:(o=Math.round(e),o>0&&o<n.chart.dataSet.length&&(r=n.chart.dataSet[o].ratio)?(ot.k1h(30),ot.F0D(a,r)):a)}};al=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.positionCrosshairsAtPointer=function(){var i=ot,n,e,a,o,r,c,l,s,d,h;if(n="p",n+="ositionCrossha",n+="irsAt",n+="Pointer",e="ch",e+="ar",e+="t",a=this.currentPanel,!!a&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive)&&!this.runPrepend("positionCrosshairsAtPointer",arguments)){o=a.chart,r=this.container.getBoundingClientRect(),this.top=r.top,this.left=r.left,this.right=this.left+this.width,this.bottom=this.top+this.height,c=this.crosshairTick=this.tickFromPixel(this.backOutX(this.crosshairX),o),i.k1h(112);var p=i.G7m(15,15,14,3,5);if(l=this.pixelFromTick(c,o)-p,l>=a.right||l<=a.left){this.undisplayCrosshairs();return}if(this.controls.crossX&&(i.A_p(10),this.controls.crossX.style.left=i.G7m(l,"px")),s=a.name==e?this.preferences.horizontalCrosshairField:a.horizontalCrosshairField,d=o.dataSet,s&&d&&c<d.length&&c>-+"1"&&(this.crossYActualPos=this.pixelFromPrice(d[c][s],a)),h=this.crossYActualPos>=a.yAxis.bottom&&this.crossYActualPos<=a.bottom,h){this.undisplayCrosshairs();return}this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend(n,arguments)}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var i;if(!this.runPrepend("doDisplayCrosshairs",arguments)){if(this.displayInitialized){var{floatCanvas:n,controls:e,layout:a}=this,{crossX:o,crossY:r,floatDate:c}=e,{vectorType:l}=this.currentVectorParameters;l===""||!a.crosshair&&!l||t.Drawing&&t.Drawing[l]&&new t.Drawing[l]().dragToDraw||!this.insideChart&&!this.grabbingScreen||this.openDialog!==""?this.undisplayCrosshairs():(o&&o.style.display!==""&&(o.style.display="",r&&(r.style.display=""),this.magnetizedPrice&&l?(this.container.classList.remove("stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):this.container.classList.add("stx-crosshair-on")),c&&!this.chart.xAxis.noDraw&&(c.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),n&&(i="n",i+="o",i+="n",i+="e",n.style.display==i&&t.clearCanvas(n,this),n.style.display="block"))}this.runAppend("doDisplayCrosshairs",arguments)}},t.ChartEngine.prototype.undisplayCrosshairs=function(){var i,n,e,a,o,r,c,l,s;i="undis",i+="playCrosshairs",n="no",n+="ne",!this.runPrepend("undisplayCrosshairs",arguments)&&(e=this.controls,a=e.crossX,o=e.crossY,a&&a.style.display!="none"&&(r="n",r+="o",r+="ne",a.style.display=r,o&&(o.style.display="none")),ot.c4P(),this.displayInitialized&&e.floatDate&&(e.floatDate.style.visibility="hidden"),this.container.classList.remove("stx-crosshair-on"),c=this.floatCanvas,c&&c.isDirty&&c.style.display!=n&&(l="no",l+="n",l+="e",t.clearCanvas(c,this),c.style.display!="none"&&(c.style.display=l)),!this.activeDrawing&&!this.repositioningDrawing&&!this.editingAnnotation&&(s=this.chart.tempCanvas,s&&s.style.display!="none"&&(s.style.display="none")),this.runAppend(i,arguments))},t.ChartEngine.prototype.hideCrosshairs=function(){this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}};ol=b=>{var t,i;t=b.CIQ,i=b.timezoneJS,t.ChartEngine.prototype.loadChart=function(n,e,a){var o,r,c,l,s,d,h,p,u,g;!a&&typeof e=="function"?(a=e,e={}):Array.isArray(e)&&(e={masterData:e}),e||(e={});var{chart:f,periodicity:w,range:v,span:m}=e,{layout:q,quoteDriver:x}=this;o={periodicity:q.periodicity,interval:q.interval,timeUnit:q.timeUnit},w&&(r=t.cleanPeriodicity(w.period?w.period:w.periodicity,w.interval,w.timeUnit),q.interval=r.interval,q.periodicity=r.period,q.timeUnit=r.timeUnit),f||(f=this.chart);var{dataSet:y,market:k,masterData:S,symbol:A,moreAvailable:_,upToDate:T}=f;c=t.clone(f.symbolObject),f.dataSet=[],f.masterData=[];function P(){var z,U,N,C;z="ma",ot.c4P(),z+="ste",z+="r",U="symb",U+="olCha",U+="nge",N="symbo",N+="lI",N+="m",N+="port",s.layout.symbols=s.getSymbols({"include-parameters":!!{},"exclude-studies":!0}),s.dispatch(s.currentlyImporting?N:U,{stx:s,symbol:f.symbol,symbolObject:f.symbolObject,prevSymbol:A,prevSymbolObject:c,action:z}),w&&(C="pe",C+="riodicity",s.dispatch(C,{stx:s,differentData:!!{},prevPeriodicity:o})),x&&x.paused&&x.resume()}if(f.moreAvailable=null,f.upToDate=null,n?typeof n=="object"?n.symbol.toUpperCase&&n.symbol.toUpperCase()==="CIQINFO"?t.logPackageInfo():(f.symbol=n.symbol,f.symbolObject=n):n.toUpperCase&&n.toUpperCase()==="CIQINFO"?t.logPackageInfo():(f.symbol=n,f.symbolObject.symbol=n):(f.symbol=null,f.symbolObject={symbol:null}),f.inflectionPoint=null,this.marketFactory&&(l=this.marketFactory(f.symbolObject),this.setMarket(l,f)),this.setMainSeriesRenderer(!0),!v&&!m&&q?(m=q.range?{}:q.setSpan,v=q.range||{}):v&&m&&(m={}),this.clearCurrentMarketData(f),s=this,!e.masterData&&x)d=function(z){z&&z!="orphaned"&&(f.symbol=A,f.symbolObject=c,f.market=k,s.masterData=f.masterData=S,f.dataSet=y,f.moreAvailable=_,f.upToDate=T),P(),ot.v95(),a&&a.call(s,z)},v&&Object.keys(v).length&&this.setRange?(delete e.span,delete q.setSpan,this.chart.masterData=null,this.displayInitialized=!{},w&&(v.periodicity=w),v.forceLoad=!!{},this.setRange(v,d)):m&&m.base&&this.setSpan?(m.multiplier=m.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,w&&(m.maintainPeriodicity=!!{}),m.forceLoad=!!{},this.setSpan(m,d)):x.newChart({symbol:f.symbol,symbolObject:f.symbolObject,chart:f,initializeChart:!0},function(z){z||(s.adjustPanelPositions(),x.updateSubscriptions(),e.stretchToFillScreen&&s.fillScreen()),ot.c4P(),d.apply(s,arguments)});else{e.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),f.symbol||(f.symbol=""),h=-910420689,p=-2039497189,u=2;for(var E=1;ot.Y9k(E.toString(),E.toString().length,"80952"-0)!==h;E++)this.initializeChart(),g=this.doCleanupGaps(e.masterData,f),u+=2;ot.f0X(u.toString(),u.toString().length,40469)!==p&&(this.initializeChart(),g=this.doCleanupGaps(e.masterData,f)),this.initializeChart(),g=this.doCleanupGaps(e.masterData,f),this.setMasterData(g,f,{noCleanupDates:!0}),f.endPoints={},g&&g.length&&(f.endPoints={begin:g[0].DT,end:g[g.length-1].DT}),this.createDataSet(),v&&Object.keys(v).length&&this.setRange?this.setRange(v):m&&m.multiplier&&m.base&&this.setSpan?this.setSpan({maintainPeriodicity:!!{},multiplier:m.multiplier,base:m.base}):e.stretchToFillScreen?this.fillScreen():g&&g.length?this.home():this.clear(),this.adjustPanelPositions(),P(),a&&a.call(s)}t.logVersion()},t.ChartEngine.prototype.loadBlankChart=function(){ot.c4P(),this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(n){var e,a,o,r;e="H",e+="i",e+="g",e+="h",n||(n=this.chart),a=n.defaultPlotField||"Close",o=["Open",e,"Low"],o.push(a);for(var c in n.series)r=n.series[c].parameters,o.push(r.symbol);return o},t.ChartEngine.prototype.cleanMasterData=function(n,e){var a,o,r,c,l;if(ot.v95(),a=n.symbol,o=e.masterData,!o||!o.length)return;r=this.getDataFields(e),c=0;do{if(l=o[c],delete l[a],s.call(this,l,r)){o.splice(c,1);continue}c++}while(c<o.length);function s(d,h){for(var p,u=0;u<h.length;u++)if(p=d[h[u]],typeof p!="undefined")return!1;return ot.c4P(),!0}o=this.doCleanupGaps(o,e,{noCleanupDates:!!{}}),this.setMasterData(o,e,{noCleanupDates:!![]}),this.clearCurrentMarketData(e,a)},t.ChartEngine.prototype.calculateATR=function(n,e,a){var o=ot,r,c,l,s,d,h;a||(a=n.dataSet),r=n.state.calculations.atr,r||(r=n.state.calculations.atr={}),e||(e=20),c=[],r.accum&&(c=r.accum);for(var p=0;p<a.length;p++)if(s=a[p],l=p?a[p-1]:r.q1,!!l){if(d=Math.max(s.High-s.Low,Math.abs(s.High-l.Close),Math.abs(s.Low-l.Close)),c.length<e){if(c.push(d)==e){h=0;for(var u=0;u<c.length;u++)h+=c[u];o.k1h(30),s.atr=o.G7m(h,e)}}else{o.A_p(5);var g=o.G7m(19,18);s.atr=(l.atr*(e-g)+d)/e}s.trueRange=d}n.state.calculations.atr={accum:c,q1:l}},t.ChartEngine.prototype.calculateMedianPrice=function(n,e){var a;e||(e=n.dataSet);for(var o=+"0";o<e.length;++o){a=e[o],ot.k1h(55);var r=ot.F0D(9,205,9,1,22);a["hl/2"]=(a.High+a.Low)/r}},t.ChartEngine.prototype.calculateTypicalPrice=function(n,e){var a,o;ot.c4P(),e||(e=n.dataSet);for(var r="0"<<64;r<e.length;++r){o="hl",o+="c",o+="/3",a=e[r],ot.A_p(8);var c=ot.G7m(9,6,0);a[o]=(a.High+a.Low+a.Close)/c}},t.ChartEngine.prototype.calculateWeightedClose=function(n,e){var a,o;e||(e=n.dataSet);for(var r=0;r<e.length;++r){o="hlc",o+="c/4",a=e[r],ot.k1h(113);var c=ot.G7m(17,23,23,3,18);a[o]=(a.High+a.Low+ +"2"*a.Close)/c}},t.ChartEngine.prototype.calculateOHLC4=function(n,e){var a;e||(e=n.dataSet);for(var o=0;o<e.length;++o){a=e[o],ot.A_p(114);var r=ot.G7m(19,24,12,17);a["ohlc/4"]=(a.Open+a.High+a.Low+a.Close)/r}},t.ChartEngine.prototype.currentQuote=function(n){var e;if(!this.chart.dataSet)return null;for(var a=this.chart.dataSet.length-1;a>=0;a--)if(this.chart.dataSet[a]){if(!n)return this.chart.dataSet[a];if(e=this.chart.dataSet[a][n],e||e===+"0")return this.chart.dataSet[a]}return ot.v95(),null},t.ChartEngine.prototype.mostRecentClose=function(n){var e,a;if(!this.chart.dataSet)return null;ot.v95();for(var o=this.chart.dataSet.length-1;o>=0;o--)if(e=this.chart.dataSet[o],!!e&&!(n&&(e=e[n],!e&&e!==0))){if(a=e.iqPrevClose,typeof e=="object"&&(e=e.Close),typeof e=="number")return e;if(typeof a=="number")return a}return null},t.ChartEngine.prototype.createDataSegment=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;if(e.c4P(),!this.runPrepend("createDataSegment",arguments)){for(var k in this.charts){a=this.charts[k],n&&(a=n),t.Comparison&&a.isComparison&&t.Comparison.createComparisonSegmentInner(this,a),o=a.dataSet,r=a.baseline,c=a.scroll,l=a.maxTicks,s=this.layout,d=s.candleWidth,r.actualLevel=r.userLevel?r.userLevel:r.defaultLevel,h=r.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),e.k1h(3),u=e.G7m("0",0),g=a.dataSegment=[],e.A_p(8);var S=e.G7m(8,7,0);f=o.length-+"1"-c-S,w=a.defaultPlotField;for(var A=-1;A<c&&A<l;A++)f++,!(A==-1&&!h)&&(f<o.length&&f>=0?(p=o[f],p.candleWidth=null,p&&(u+=p.Volume||"1"*1),g.push(p),r.actualLevel===null&&A>=0&&(w&&w!="Close"?(e.A_p(5),v=o[e.F0D(f,1)],v&&(v[w]||v[w]===0)&&(r.actualLevel=v[w])):(p.iqPrevClose||p.iqPrevClose===0)&&(r.actualLevel=p.iqPrevClose))):f<0&&g.push(null));if(a.segmentImage=null,m=this.mainSeriesRenderer||{},m.params&&m.params.volume){e.A_p(115);var _=e.F0D(33,20,12);q=a.width-(l-g.length-_)*s.candleWidth,x=+"0",a.segmentImage=[];for(var T=0;T<g.length;T++)if(p=g[T],a.segmentImage[T]={},y=null,p){if(p.Volume){p.candleWidth=q*p.Volume/u,e.k1h(11);var P=e.F0D(0,15,0,17);y=x+p.candleWidth/P,x+=p.candleWidth}else p.candleWidth=d,e.k1h(47),y=e.G7m(2,x,d),x+=d;a.segmentImage[T]={tick:p.tick,candleWidth:p.candleWidth,leftOffset:y}}else a.segmentImage[T]={tick:null,candleWidth:d,leftOffset:x+d/2},x+=d}if(n)break}a&&a.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(n){var e,a,o;return n||(n=this.chart),e=n.dataSegment,!e||!e.length?[]:(a=0,o=e.length,this.pixelFromBar(a,n)<n.panel.left&&a++,this.pixelFromBar(o-1,n)>n.panel.right&&o--,e.slice(a,o))},t.ChartEngine.prototype.setMasterData=function(n,e,a){var o,r,c,l,s,d,h;for(o="c",o+="h",o+="a",o+="rt",e||(e=this.chart),this.marketFactory&&(r=this.marketFactory(e.symbolObject),this.setMarket(r,e)),a||(a={}),a.noCleanupDates||this.doCleanupDates(n,this.layout.interval),e.masterData=n,e.name==o&&(this.masterData=n),l=null,c=0;n&&c<n.length;c++)s="numb",s+="e",s+="r",d=n[c],l===null&&(typeof d.Close=="number"?l="Close":typeof d.Value=="number"&&(l="Value")),l==="Value"&&typeof d.Value=="number"&&(d.Close=d.Value),d.DT?(Object.prototype.toString.call(d.DT)!="[object Date]"&&(d.DT=new Date(d.DT)),(!d.Date||d.Date.length!=17)&&(d.Date=t.yyyymmddhhmmssmmm(d.DT))):d.Date?d.DT=t.strToDateTime(d.Date):console.log("setMasterData : Missing DT and Date on masterData object"),d.Volume&&typeof d.Volume!==s&&(d.Volume=parseInt(d.Volume,10)),n.length-c<"50"-0&&this.updateCurrentMarketData(d,e,null,{fromTrade:!0});e.calculateTradingDecimalPlaces&&(e.decimalPlaces=e.calculateTradingDecimalPlaces({stx:this,chart:e,symbol:e.symbolObject.symbol,symbolObject:e.symbolObject})),this.setDisplayDates(n),ot.c4P(),e.roundit=Math.pow(10,e.decimalPlaces);for(c in this.plugins)h=this.plugins[c],h.display&&h.setMasterData&&h.setMasterData(this,e)},t.ChartEngine.prototype.setMasterDataRender=function(n,e,a){a||(a=this.chart),a.symbol||(a.symbol=""),this.setMasterData(e,a),e&&(a.endPoints={},e.length&&(a.endPoints={begin:e["0">>32].DT,end:e[e.length-+"1"].DT},a.symbol=n)),this.createDataSet(),this.initializeChart(),this.draw(),(!e||!e.length)&&(a.symbol=null,this.clear()),this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(n){var e,a,o,r,c,l,s,d;function h(S,A,_){return ot.v95(),{symbol:S,symbolObject:A,periodicity:_.periodicity,interval:_.interval,timeUnit:_.timeUnit,setSpan:_.setSpan}}n||(n={}),e=[],o=this.layout;for(var p in this.charts){r=this.charts[p];var{symbol:u,symbolObject:g}=r;g&&g.symbol&&(n.static?g.static&&e.push(h(u,g,o)):e.push(h(u,g,o)));for(var f in r.series){c="s",c+="t",c+="u",c+="dy";var{parameters:w}=r.series[f];if(!(!(n["include-static"]||n.static)&&w.data&&!w.data.useDefaultQuoteFeed)){var{symbol:v,symbolObject:m}=w;a=h(v,m,o),a.id=f,n["include-parameters"]&&(a.parameters=t.clone(w),a.parameters.yAxis&&delete a.parameters.yAxis.yAxisPlotter),!(n["exclude-studies"]&&w.bucket==c)&&(n["exclude-generated"]&&m.generator||(n.static?m.static&&e.push(a):e.push(a)))}}}if(n["breakout-equations"]){l={};for(var q=0;q<e.length;q++){var{symbol:x}=e[q];if(this.isEquationChart(x)){if(s=t.formatEquation(x),s){d=s.symbols;for(var y=0;y<d.length;y++)l[d[y]]=h(d[y],e[q].symbolObject,e[q])}}else l[x]=h(x,e[q].symbolObject,e[q])}e=[];for(var k in l)e.push(l[k])}return e},t.ChartEngine.prototype.setDisplayDate=function(n){ot.c4P();var e,a,o;if(!t.ChartEngine.isDailyInterval(this.layout.interval)){e=n.DT,ot.A_p(116);var r=ot.F0D(11e3,10,13300,13);a=e.getSeconds()*r+e.getMilliseconds(),i.Date&&this.displayZone&&(o=new i.Date(e.getTime(),this.displayZone),e=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes()),e=new Date(e.getTime()+a)),n.displayDate=e}},t.ChartEngine.prototype.setDisplayDates=function(n){var e;if(!!n&&!t.ChartEngine.isDailyInterval(this.layout.interval))for(var a=0;a<n.length;a++)e=n[a],e.DT&&this.setDisplayDate(e)},t.ChartEngine.prototype.setTimeZone=function(n,e){var a,o,r,c,l,s;if(a="prefer",a+="ences",!i.Date){this.timeZoneOffset=0;return}o=new Date,r=o.getTimezoneOffset(),c=r,l=r,n&&(this.dataZone=n),this.dataZone&&(c=new i.Date(o,this.dataZone).getTimezoneOffset()),e&&(this.displayZone=e),this.displayZone&&(l=new i.Date(o,this.displayZone).getTimezoneOffset()),ot.k1h(117),this.timeZoneOffset=ot.G7m(r,c,r,l);for(var d in this.charts)s=this.charts[d],this.setDisplayDates(s.masterData);this.preferences.timeZone=e,this.changeOccurred(a),this.createDataSet()},t.ChartEngine.prototype.updateChartData=function(n,e,a={}){var o=ot,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U;r="ap",r+="pendMasterData",c="updateChartDat",c+="a",e||(e=this.chart),l=this;var{layout:N}=this;function C(){var j,Q,et,V,K,tt,J,at,ct;if(!(!t.Market||!e.market)){if(j={market_tz:t.getFromNS(e,"market.market_def.market_tz",null)},Q=N.interval,(Q=="month"||Q=="week")&&(l.dontRoll||(Q="day"),j=l.chart.market.market_def),et=new t.Market(j),V={begin:I&&I.length?I[I.length-1].DT:n.DT,interval:Q,periodicity:1,timeUnit:N.timeUnit},K=et.newIterator(V),tt=K.next(),!I)n.DT=new Date(+K.previous());else if(n.DT<tt){for(J=0,ct=K.previous(),at=n.DT,a.appending=!![];at<ct&&J<1e3;)a.appending=!{},ct=K.previous(),J++;n.DT=ct,a.updating=!a.appending}else if(n.DT>=tt){for(J=0,at=n.DT;at>tt&&J<1e3;)n.DT=tt,tt=K.next(),J++;a.appending=!!{}}}}var{animationEntry:D,secondarySeries:F}=a,{isValidNumber:M}=t,{masterData:I}=e;s=!{};function L(j,Q){var et,V,K,tt,J,at;et=-637812827,V=-198802273,K=2;for(var ct=1;o.Y9k(ct.toString(),ct.toString().length,9490)!==et;ct++)K+=2;if(o.Y9k(K.toString(),K.toString().length,22180),F)delete I[j][F],l.cleanupGaps&&(J="g",J+="a",J+="p",tt={DT:Q,Close:null},l.cleanupGaps!=J&&I[j-1]&&I[j-1][F]&&(tt.Close=I[j-1][F].Close,tt.High=tt.Low=tt.Open=tt.Close,tt.Volume=0),I[j][F]=tt);else{at=I.splice(j,1)[0],tt={DT:at.DT,Close:null,needed:!{}};for(h in e.series)p=e.series[h].parameters.symbolObject.symbol,typeof at[p]!="undefined"&&(tt[p]=at[p],delete tt.needed);l.cleanupGaps&&l.cleanupGaps!="gap"&&(delete tt.needed,l.cleanupGaps!="gap"&&I[j-1]&&(tt.Close=I[j-1].Close,tt.High=tt.Low=tt.Open=tt.Close,tt.Volume=+"0")),tt.needed!==!1&&(I.splice(j,0,tt),l.setDisplayDate(tt))}}d=!1,a.noCleanupDates||this.doCleanupDates(n,N.interval),(a.useAsLastSale||n.constructor==Object&&(n.Last||n.Last===0))&&W();function O(){l.createDataSet(null,null,a),l.draw({animationEntry:D}),l.updateChartAccessories(),l.streamParameters.count=0,o.c4P(),l.streamParameters.timeout=-1}if(n&&n.constructor==Object&&(n=[n]),!n||!n.length)return;function B(j,Q){var et,V,K,tt;if(et=I[j],F&&(et=et[F]||{}),Q.Close===null)et.Open!==void 0&&(Q.Open=null),et.High!==void 0&&(Q.High=null),et.Low!==void 0&&(Q.Low=null),et.Volume!==void 0&&(Q.Volume=null);else{V="B",V+="i",V+="d",K="Lo",K+="w",tt="Cl",tt+="o",tt+="se",s?(Q.Volume&&(Q.Volume=parseInt(Q.Volume,10)),d||(Q.Volume+=et.Volume)):!M(Q.Volume)&&et.Volume&&(Q.Volume=et.Volume),a.allowReplaceOHL||(M(et.Open)&&(Q.Open=et.Open),M(et.High)&&M(Q.High)&&et.High>Q.High&&(Q.High=et.High),M(et.Low)&&M(Q.Low)&&et.Low<Q.Low&&(Q.Low=et.Low)),[tt,"Open","High",K,V,"Ask"].forEach(function(J){M(Q[J])||(Q[J]=et[J])});for(h in e.series)p=e.series[h].parameters.symbolObject.symbol,typeof Q[p]=="undefined"&&typeof et[p]!="undefined"&&(Q[p]=et[p])}}if(this.runPrepend("appendMasterData",[n,e,a])||this.runPrepend(c,[n,e,a])||(I||(I=[]),u=I.length-+"1",g=![],a.fillGaps&&H(),!n.length))return;for(var R=0;R<n.length;R++){for(f=n[R],w=f.DT,v=f.Date,w&&Object.prototype.toString.call(w)!="[object Date]"&&(f.DT=w=new Date(w)),w&&(!v||v.length!=17)&&(f.Date=t.yyyymmddhhmmssmmm(f.DT)),w||(w=f.DT=t.strToDateTime(v)),!M(f.Close)&&M(f.Value)&&(f.Close=f.Value);u>=0&&u<I.length;){if(m=I[u].DT,m||(m=t.strToDateTime(I[u].Date)),m.getTime()<=w.getTime()){if(g=!0,q=0,m.getTime()<w.getTime()){if(u<I.length-1&&(x=I[u+("1">>64)].DT||t.strToDateTime(I[u+1].Date),x.getTime()<=w.getTime())){u++;continue}o.k1h(72),q=o.G7m(32,"1")}if(a.deleteItems){q||L(u,w);break}else N.interval=="tick"&&a.firstLoop!==!1&&(q=1),q||B(u,f),M(f.Close)&&(M(f.Open)||(f.Open=f.Close),y=Math.max(f.Open,f.Close),k=Math.min(f.Open,f.Close),(!M(f.High)||f.High<y)&&(f.High=y),(!M(f.Low)||f.Low>k)&&(f.Low=k)),f.Volume&&!M(f.Volume)&&(f.Volume=parseInt(f.Volume,10)),u+=q,F?(S="ti",S+="ck",n.length-R<50&&this.updateCurrentMarketData(f,e,F,{fromTrade:!0,animationEntry:D}),(N.interval!=S||f.Close!==void 0)&&(q&&(I.splice(u,0,{DT:f.DT}),this.setDisplayDate(I[u])),I[u][F]=f)):(A="t",A+="i",A+="c",A+="k",n.length-R<50&&this.updateCurrentMarketData(f,e,null,{fromTrade:!!{},animationEntry:D}),(N.interval!=A||f.Close!==void 0)&&(I.splice(u,q?0:1,f),this.setDisplayDate(f)));break}u+=g?1:-1}u<0&&(F?(this.updateCurrentMarketData(f,e,F,{fromTrade:!0,animationEntry:D}),(N.interval!="tick"||f.Close!==void 0)&&(I.splice(0,0,{DT:f.DT}),this.setDisplayDate(I[0]),I[0][F]=f)):(this.updateCurrentMarketData(f,e,null,{fromTrade:!!{},animationEntry:D}),(N.interval!="tick"||f.Close!==void 0)&&(I.splice(0,0,f),this.setDisplayDate(f))),g=!0,u=0)}I.length&&(this.masterData=e.masterData=I),this.maxMasterDataSize&&(I=e.masterData=this.masterData=I.slice(-this.maxMasterDataSize));function H(){var j,Q,et;if(j=null,Q=0,I.length&&(j=l.getFirstLastDataRecord(I,F||e.defaultPlotField,!0),j)){if(n[n.length-1].DT<=j.DT)return;for(;Q<n.length;Q++)if(+n[Q].DT==+j.DT){l.getFirstLastDataRecord([n[Q]],F||e.defaultPlotField)&&(j=null);break}else if(n[Q].DT>j.DT)break}et=n.slice(Q),j&&et.unshift(F?j[F]:j),et=l.doCleanupGaps(et,e),j&&et.shift(),n=n.slice(0,Q).concat(et)}_=F?this.getSeries({symbol:F,chart:e}):[e];function W(){var j,Q,et;if(j="t",j+="ic",j+="k",Q="[object D",Q+="ate]",s=!!{},a.useAsLastSale&&a.useAsLastSale.aggregatedVolume&&(d=!0),n.constructor===Array){o.A_p(118);var V=o.G7m(17,3,562,11);et=n[n.length-V],n={},n.DT=et.DT,n.Close=et.Close,n.Volume=et.Volume}else n.Last&&(n.Close=n.Last,delete n.Last);n.DT&&Object.prototype.toString.call(n.DT)!=Q&&(n.DT=new Date(n.DT)),(!n.DT||n.DT=="Invalid Date")&&(n.DT=new Date),N.interval!=j&&C(),n.Open=n.Close,n.High=n.Close,n.Low=n.Close}for(var X="0"<<32;X<_.length;X++)T=_[X],(!T.endPoints.begin||T.endPoints.begin>n[0].DT)&&(T.endPoints.begin=n["0">>64].DT),(!T.endPoints.end||T.endPoints.end<n[n.length-1].DT)&&(T.endPoints.end=n[n.length-1].DT),P=T.parameters&&T.parameters.field||e.defaultPlotField,E=this.getFirstLastDataRecord(n,P,!0),E&&(!T.lastQuote||T.lastQuote.DT<=E.DT)&&(T.lastQuote=E),F&&a.deleteItems&&(T.lastQuote=this.getFirstLastDataRecord(I,F,!!{})[F]);for(var Z in this.plugins)z=this.plugins[Z],z.display&&z.appendMasterData&&z.appendMasterData(this,n,e);(!this.masterData||!this.masterData.length)&&(this.masterData=I),a.noCreateDataSet||(U=this.streamParameters,++U.count>U.maxTicks||a.bypassGovernor?(clearTimeout(U.timeout),O()):U.timeout==-1&&(U.timeout=setTimeout(O,U.maxWait))),this.runAppend(r,arguments),this.runAppend("updateChartData",arguments)},ot.c4P(),t.ChartEngine.prototype.updateCurrentMarketData=function(n,e,a,o={}){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(r="u",r+="pdateCurrent",r+="MarketData",c="B",c+="i",c+="dL",c+="2",l="ti",l+="c",l+="k",!(!n||!n.DT)){e||(e=this.chart);var{fromTrade:y}=o;if(s=n.DT,!y&&this.layout.interval!=l&&e.market){if(e.market.market_def&&(!e.market.isMarketDate(n.DT)||!t.ChartEngine.isDailyInterval(this.layout.interval)&&e.market.getSession(n.DT)===null))return;d={begin:n.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},h=new t.Market(e.market.market_def),this.extendedHours&&this.extendedHours.filter&&h.enableAllAvailableSessions(),p=h.newIterator(d),p.next(),n.DT=p.previous()}if(!this.runPrepend("updateCurrentMarketData",arguments)){u=y?"DT":"Timestamp";var{currentMarketData:k}=e;if(g=!1,a&&(k[a]||(k[a]={}),k=k[a]),["Last","Bid","Ask"].forEach(function(A){var _;n[A]&&typeof n[A]=="number"&&(_=k[A],(!_||!_[u]||_[u]<=(y?n.DT:s))&&(k[A]={DT:n.DT,Price:n[A],Size:n[A+"Size"],Timestamp:s},g=!!{}))}),[c,"AskL2"].forEach(function(A){var _;n[A]&&n[A]instanceof Array&&(_=k[A],(!_||!_[u]||_[u]<=(y?n.DT:s))&&(k[A]={DT:n.DT,Price_Size:n[A],Timestamp:s},g=!0))}),n.Close&&(!k.Last||k.Last.Timestamp<=(n.LastTime||s))&&(f=n.Close,w=o&&o.finalClose,(w||w===0)&&(f=w),k.Last={DT:n.DT,Price:f,Size:n.LastSize===void 0&&this.layout.interval=="tick"?n.Volume:n.LastSize,Timestamp:n.LastTime||s},g=!0),g&&!o.animationEntry){v=417566571,m=354300584,q=2;for(var S=1;ot.Y9k(S.toString(),S.toString().length,59465)!==v;S++)x=new Date,clearTimeout(k.assignLastTouchAsync),q+=+"2";ot.f0X(q.toString(),q.toString().length,82752)!==m&&(x=new Date,clearTimeout(k.assignLastTouchAsync)),x=new Date,clearTimeout(k.assignLastTouchAsync),k.assignLastTouchAsync=setTimeout(()=>{k.touched=x})}y||delete n.Last,this.runAppend(r,arguments)}}},t.ChartEngine.prototype.clearCurrentMarketData=function(n,e){var a,o,r,c;if(a="clea",a+="rCurrentMarketData",!this.runPrepend(a,arguments)){if(r=[],n)r.push(n);else for(o in this.charts)r.push(this.charts[o]);for(o=0;o<r.length;o++)if(c=r[o].currentMarketData,e)delete c[e];else for(var l in c)c[l]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}};nl=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.changeOccurred=function(i){var n,e,a;n="p",n+="refere",n+="nces",e={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},i=="theme"&&this.dispatch("theme",e),ot.v95(),!this.currentlyImporting&&(i=="layout"?this.dispatch("layout",e):i=="vector"?this.dispatch("drawing",e):i==n&&(a="pr",a+="e",a+="ferences",this.dispatch(a,e)))},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!![])},t.ChartEngine.prototype.registerChartDrawnCallback=function(i){return ot.c4P(),this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(i),{fc:i}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(i){ot.v95();for(var n=0;n<this.asyncCallbacks.length;n++)if(this.asyncCallbacks[n]==i.fc){this.asyncCallbacks.splice(n,1);return}},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(!!this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var i=+"0";i<this.asyncCallbacks.length;i++)this.asyncCallbacks[i]()},t.ChartEngine.prototype.completeAsyncAction=function(){ot.v95(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(i,n,e,a){ot.v95(),i.addEventListener(n,e,a),this.eventListeners.push({element:i,event:n,function:e,options:a})},t.ChartEngine.prototype.addEventListener=function(i,n){var e,a;if(i==="*")for(var o in this.callbackListeners)this.callbackListeners[o].push(n);else if(i instanceof Array)for(var r=0;r<i.length;r++)this.callbackListeners[i[r]].push(n);else{if(e=this.callbackListeners[i],!e)throw a="Attempted to add an invalid",a+=" listener.",new Error(a);e.push(n)}return{type:i,cb:n}},t.ChartEngine.prototype.removeEventListener=function(i,n){var e,a;if((!i||typeof i!="object")&&(i={type:i,cb:n}),e=function(r,c){ot.v95();for(var l=0;l<r.length;l++)if(r[l]===c){r.splice(l,1);return}},a=this.callbackListeners,i.type==="*"){for(var o in a)e(a[o],i.cb);return}if(!a[i.type])throw new Error("Attempted to remove an invalid listener.");e(a[i.type],i.cb)},t.ChartEngine.prototype.dispatch=function(i,n){var e;if(e=this.callbackListeners[i],e){for(var a=0;a<e.length;a++)if(e[a].call(this,n)===!![])return!!{}}if(e=this.callbackListeners["*"],e){for(var o="0"<<0;o<e.length;o++)if(e[o].call(this,n)===!0)return!![]}return!{}},t.ChartEngine.prototype.updateListeners=function(i){var n;for(var e in this.plugins)n=this.plugins[e],n.display&&n.listener&&n.listener(this,i)},t.ChartEngine.registerGlobalEvent=function(i,n,e,a){Array.isArray(i)||(i=[i]),ot.c4P(),i.forEach(o=>{t.ChartEngine.globalEventHandlers.push({event:o,listener:n,options:e||!1,isWindow:a,applied:[]})}),t.ChartEngine.attachGlobalEventHandlers()},t.ChartEngine.attachGlobalEventHandlers=function(){ot.c4P();var i;i=t.ChartEngine.registeredContainers,i.forEach(n=>{var{ownerDocument:e}=n;t.ChartEngine.globalEventHandlers.forEach(function(a){var o;ot.c4P();var{event:r,listener:c,options:l,isWindow:s,applied:d}=a;d.indexOf(e)===-1&&(o=s?e.defaultView:e,o.addEventListener(r,c,l),d.push(e))})})}};rl=b=>{var t=ot,i;i=b.CIQ,i.ChartEngine.prototype.prepend=function(n,e){t.c4P();var a,o,r,c,l,s;if(a="pr",a+="ep",a+="e",a+="nd",t.k1h(10),o=t.F0D(a,n),this instanceof i.ChartEngine)r=this.hasOwnProperty(o)?this[o]:[],this[o]=[e].concat(r);else{r=i.ChartEngine.prototype[o]||[],c=1194444596,l=-710900854,s=2;for(var d="1"*1;t.Y9k(d.toString(),d.toString().length,89254)!==c;d++)i.ChartEngine.prototype[o]=[e].concat(r),s+=2;t.Y9k(s.toString(),s.toString().length,72132)!==l&&(i.ChartEngine.prototype[o]=[e].concat(r))}return{method:o,func:e}},t.c4P(),i.ChartEngine.prototype.append=function(n,e){var a,o;return t.k1h(10),a=t.F0D("append",n),t.v95(),this instanceof i.ChartEngine?(o=this.hasOwnProperty(a)?this[a]:[],this[a]=o.concat(e)):(o=i.ChartEngine.prototype[a]||[],i.ChartEngine.prototype[a]=o.concat(e)),{method:a,func:e}},i.ChartEngine.prototype.runPrepend=function(n,e,a){var o,r,c,l;if(o="pre",o+="pen",o+="d",t.k1h(10),r=t.G7m(o,n),c=this.hasOwnProperty(r)?this[r]:[],c=c.concat(i.ChartEngine.prototype[r]||[]),!c.length)return!1;a||(a=this);for(var s="0"^0;s<c.length;s++)if(l=c[s].apply(a,e),l)return l;return!1},i.ChartEngine.prototype.runAppend=function(n,e,a){var o,r,c;if(t.A_p(10),o=t.F0D("append",n),r=this.hasOwnProperty(o)?this[o]:[],r=r.concat(i.ChartEngine.prototype[o]||[]),!r.length)return![];a||(a=this);for(var l=0;l<r.length;l++)if(c=r[l].apply(a,e),c)return c;return![]},i.ChartEngine.prototype.removeInjection=function(n){t.c4P();var e,a;if(e=n.method,this instanceof i.ChartEngine){if(!this[e])return;for(a=0;a<this[e].length;a++)if(this[e][a]==n.func){this[e].splice(a,1);return}}else{if(!i.ChartEngine.prototype[e])return;for(a=0;a<i.ChartEngine.prototype[e].length;a++)if(i.ChartEngine.prototype[e][a]==n.func){i.ChartEngine.prototype[e].splice(a,1);return}}},i.ChartEngine.prototype.remove=function(n){t.v95(),this instanceof i.ChartEngine?(t.k1h(10),delete this[t.G7m("append",n)],t.k1h(10),delete this[t.F0D("prepend",n)]):(t.k1h(10),delete i.ChartEngine.prototype[t.G7m("append",n)],t.A_p(10),delete i.ChartEngine.prototype[t.F0D("prepend",n)])}};sl=b=>{var t,i;t=b.CIQ,i=b.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(n){var e;return ot.c4P(),(n||n===0)&&this.dataZone&&(e=t.convertTimeZone(n,null,this.dataZone),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),n},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(n,e){var a=ot,o,r,c,l,s;o=" s",o+="e",o+="c",o+="onds",r="Running fps",r+="(",r+=") f",r+="or ",n=n||5,c=new Date().getTime(),l=0,s=this,a.A_p(50),console.log(a.G7m(r,n,o)),d();function d(){a.v95();var h,p,u;a.A_p(119);var g=a.F0D(991,8,143,143);if(h=(new Date().getTime()-c)/g,h>n){p="F",p+="PS=",a.A_p(30),u=a.F0D(l,h),a.k1h(10),console.log(a.F0D(p,u)),e&&e(u);return}s.draw(),l++,t.ChartEngine.useAnimation?requestAnimationFrame(d):setTimeout(d,0)}},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(n){var e,a,o,r;if(e="l",e+="a",e+="yout",a="o",a+="h",a+="l",a+="c",o=this.layout,r=this.chart,o.aggregationType!=a&&(o.aggregationType="ohlc",r.canvas&&this.createDataSet()),o.chartType=n,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(n);r.defaultChartStyleConfig={type:n},this.displayInitialized&&this.draw(),this.changeOccurred(e)},t.ChartEngine.prototype.setChartScale=function(n){n||(n="linear"),this.layout.chartScale=n,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var n,e,a;if(n="checkLog",n+="Sc",n+="al",n+="e",!this.runPrepend("checkLogScale",arguments))return this.layout.chartScale!=="log"?![]:(e=!1,this.chart.yAxis.lowValue<=+"0"&&(a="lo",a+="gde",a+="activate",a+="d",this.setChartScale("linear"),this.dispatch("notification",a),e=!0),this.runAppend(n,arguments),e)},t.ChartEngine.prototype.setAdjusted=function(n){this.layout.adj=n,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(n,e){var a=ot,o,r,c,l;if(n!==0&&(!n||typeof n!="number"))return"";if(!e&&e!==0&&(e=n),a.k1h(10),o=a.F0D("",e),r=0,o.indexOf(".")>-1){a.A_p(50);var s=a.G7m(6086,12,2);a.A_p(120),a.G7m(13,735,2,3647),a.k1h(11),a.F0D(84474,5,75093,10),a.A_p(10);var d=a.G7m(134,17);r=o.substring(o.indexOf(s>+"9090"?d:".")).length-+"1"}return e>=1e3?r=Math.max(r,0):e<2?r=Math.max(r,4):r=Math.max(r,2),c=this.internationalizer,a.c4P(),c?(l=c.priceFormatters.length,r>=l&&(a.k1h(5),r=a.G7m(l,1)),n=c.priceFormatters[r].format(n)):n=n.toFixed(r),n},t.ChartEngine.prototype.formatPrice=function(n,e){var a,o,r;return n!==0&&(!n||typeof n=="undefined")?"":(e||(e=this.currentPanel),e||(e=this.chart.panel),!e||(a=e.decimalPlaces,!a&&a!==0&&(a=e.chart.decimalPlaces),!a&&a!=="0"<<64)?n.toString():(o=this.internationalizer,o?(r=o.priceFormatters.length,a>=r&&(ot.k1h(121),a=ot.G7m(r,64,"1")),n=o.priceFormatters[a].format(n)):n=n.toFixed(a),n))},t.ChartEngine.prototype.determineMinMax=function(n,e,a,o,r,c,l,s,d){var h,p,u,g,f,w,v,m,q,x,y;ot.A_p(31);var k=ot.F0D(10,11);h=Number.MAX_VALUE*k,p=Number.MAX_VALUE,u=![],g=n.length,d||(d=[]),f=[],r&&(g=r);for(var S=0;S<=g+1;S++)if(e.length&&(S==g?w=this.getPreviousBar(this.chart,e["0"^0],0):S==g+1?w=this.getNextBar(this.chart,e[0],g-("1"-0)):w=n[S]),!!w){if(!o){if(w.transform)u=!![],w=w.transform;else if(u)continue}v=0;for(var A=0;A<e.length;A++)if(m=t.existsInObjectChain(w,e[A]),!!m){q=m.obj[m.member],typeof q=="number"&&(q=[q]);for(var _=0;_<q.length;_++)x=q[_],c&&x instanceof Array&&(x=x[0]),(x||x==="0">>0)&&(a===!!{}||a instanceof Array&&a.indexOf(e[A])>-1?(v+=x,v>h&&(h=v),v<p&&(p=v)):(x>h&&(h=x),x<p&&(p=x),f.push({value:x,quote:w})))}(a===!0||a instanceof Array&&a.indexOf(e[A])>-1)&&f.push({value:v,quote:w})}return y=[p,h],d.forEach(function(T){y=T(f,l,s)||y}),y[1]==Number.MAX_VALUE*-1&&(y[1]=0),y[0]==Number.MAX_VALUE&&(y[0]=0),y},t.ChartEngine.prototype.initializeDisplay=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q;if(a="Lo",a+="w",o="O",o+="p",o+="e",o+="n",this.runPrepend("initializeDisplay",arguments))return;r=[],c=[],l=!{},s=this,d=["Close",o,"High",a],h=[n.defaultPlotField||"Close"];var{mainSeriesRenderer:x}=this;e.c4P();var{dataSegment:y,seriesRenderers:k}=n;if(u=null,g=Math.floor((n.width-this.micropixels)/this.layout.candleWidth),n.scroll>n.maxTicks&&n.maxTicks>g+1){e.k1h(122);var S=e.G7m(11,15,3);u=y.length-S}f=[];for(var A in this.panels){w=this.panels[A],f=w.yaxisLHS.concat(w.yaxisRHS);for(var _=0;_<f.length;_++){if(v=f[_],r=[],c=[],m=n.transformFunc&&v==n.panel.yAxis,E(v,w),!this.currentlyImporting&&!v.renderers.length&&!v.studies.length){this.deleteYAxisIfUnused(w,v);continue}x&&x.determineMax?p=x.determineMax(y,r,c,!m,u,l,w,v):p=this.determineMinMax(y,r,c,!m,u,l,w,v),this.baselineHelper&&(p=this.setBaselineMinMax(p,v)),v.lowValue=p[0],v.highValue=p[1],v==n.panel.yAxis&&(n.lowValue=v.lowValue,n.highValue=v.highValue)}}if(q=n.state.aggregation,q&&q.box){e.k1h(5);var T=e.F0D(20,18);n.lowValue-=q.box/T,e.k1h(5);var P=e.G7m(24,22);n.highValue+=q.box/P}this.runAppend("initializeDisplay",arguments);function E(z,U){var N,C,D,F,M,I,L,O,B,R;if(N=!{},C=s.layout&&s.layout.studies&&s.layout.studies[z.name],C&&(!U||U.name==C.panel)){for(var H in C.outputMap)r.push(H),C.study&&(C.study.renderer?r=r.concat(t.createObjectChainNames(H,d)):C.study.seriesFN||(r=r.concat(t.createObjectChainNames(H,h))));for(var W=0;W<="2"-0;W++)r.push(C.name+"_hist"+(W||""));N=!![]}if(!!U){z.studies=[],z.renderers=[],e.c4P(),N&&z.studies.push(z.name);for(var X in k)if(D=k[X],F=D.params,M=F.panel,(F.yAxis||!s.panels[M]||s.panels[M].yAxis)==z&&M==U.name){I=D.highLowBars?d:h,l=D.bounded;for(var Z=0;Z<D.seriesParams.length;Z++)L=D.seriesParams[Z],!L.hidden&&(O=void+"0",L.subField?O=t.createObjectChainNames(L.symbol,[L.subField]).concat(L.symbol):L.symbol?O=t.createObjectChainNames(L.symbol,I).concat(L.symbol):L.field?O=L.field:z==n.panel.yAxis&&(O=I),O&&(r=r.concat(O)),D.useSum&&(c=c.concat(O)));z.renderers.push(X)}for(var j in s.overlays)B=s.overlays[j],B.panel==U.name&&B.name!=z.name&&(R=B.getYAxis(s),R==z&&(z.studies.push(B.name),n.includeOverlaysInMinMax&&E({name:B.name})))}}},t.ChartEngine.prototype.setMarket=function(n,e){if(!!t.Market){ot.v95(),e||(e=this.chart),e.market=new t.Market(n);for(var a in this.layout.marketSessions)e.market.disableSession(a,this.layout.marketSessions[a])}},t.ChartEngine.prototype.setMarketFactory=function(n){ot.c4P(),this.marketFactory=n},t.ChartEngine.prototype.setResizeTimer=function(n){var e;e=()=>{var{canvas:a,container:o}=this.chart;ot.v95(),!(!a||t.isAndroid)&&(a.height!==Math.floor(this.devicePixelRatio*o.clientHeight)||a.width!==Math.floor(this.devicePixelRatio*o.clientWidth))&&this.resizeChart()},this.resizeHandle=t.resizeObserver(this.chart.container,e,this.resizeHandle,n)},t.ChartEngine.prototype.getRenderedItems=function(){var n,e,a,o,r,c,l,s,d,h,p;if(n="C",n+="l",n+="o",n+="se",e="H",e+="i",e+="g",e+="h",a="O",a+="pe",a+="n",o=this.chart,r=this.currentPanel,!!r){c=[a,e,"Low","Close"],l=[n],s=[];for(var u in this.overlays)this.overlays[u].panel===r.name&&(s=s.concat(Object.keys(this.overlays[u].outputMap)));for(var g in o.seriesRenderers)if(d=o.seriesRenderers[g],d.params.panel==r.name)for(var f in d.seriesParams)h=d.seriesParams[f],p=d.highLowBars?c:l,h.subField?s=s.concat(t.createObjectChainNames(h.symbol,[h.subField])).concat(h.symbol):h.symbol?s=s.concat(t.createObjectChainNames(h.symbol,p)).concat(h.symbol):h.field?s.push(h.field):r==o.panel&&(s=s.concat(p));return s}},t.ChartEngine.prototype.setTransform=function(n,e,a){ot.v95(),n.transformFunc=e,n.untransformFunc=a},t.ChartEngine.prototype.unsetTransform=function(n){delete n.transformFunc,delete n.untransformFunc,ot.c4P();for(var e=0;n.dataSet&&e<n.dataSet.length;e++)n.dataSet[e].transform=null},t.ChartEngine.prototype.isEquationChart=function(n){var e;return n&&n[0]=="="?!this.allowEquations||!t.fetchEquationChart?(e="Error, equation ch",e+="art option requires equationsAdvanced.",e+="j",e+="s",console.warn(e),!1):!0:(ot.v95(),![])},t.ChartEngine.prototype.correctIfOffEdge=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f;if(a="correctIfOffE",a+="dge",o="correct",o+="IfOff",o+="Edge",!this.runPrepend(o,arguments)){for(var w in this.charts){if(r=this.charts[w],c=r.dataSet,l=r.maxTicks,s=this.layout,d=this.minimumLeftBars,h=Math.min(d,l),r.allowScrollPast){if(e.A_p(5),p=e.F0D(l,h),h>c.length&&(p=l-c.length),r.scroll-p>=c.length){e.A_p(5);var v=e.G7m(15,14);r.scroll=c.length+p-v,this.micropixels=0}r.scroll<=h&&(r.scroll=h,this.micropixels=0)}else r.scroll<h&&(r.scroll=h),r.scroll>c.length&&(r.scroll=c.length);if(r.allowScrollFuture===!1){u=this.getLabelOffsetInPixels(r,s.chartType)+s.candleWidth*r.whiteSpaceFutureTicks,e.k1h(58);var m=e.F0D(5,1,4);g=l-Math.round(u/s.candleWidth)-m,f=this.micropixels<+"0"?r.scroll-1:r.scroll,f<g&&(r.scroll=g,this.micropixels=0)}}this.runAppend(a,arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){for(var n=0;n<this.chart.dataSegment.length;n++)if(this.chart.dataSegment[n])return n;return 0},t.ChartEngine.prototype.setStartDate=function(n){for(var e,a=+"0";a<this.chart.dataSet.length;a++)if(e=this.chart.dataSet[a],e.DT.getTime()==n.getTime()){this.chart.scroll=this.chart.dataSet.length-a,this.draw();return}},t.ChartEngine.prototype.clearPixelCache=function(){var n;for(var e in this.panels)n=this.panels[e],n.cacheHigh=null,n.cacheLow=null,n.cacheLeft=1e6,n.cacheRight=-1;ot.c4P(),this.chart.pixelCacheExpired=!![]},t.ChartEngine.prototype.adjustBackingStore=function(n,e){var a=ot,o,r,c,l;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=this.devicePixelRatio/o,!this.useBackingStore){a.k1h(18),this.devicePixelRatio=this.adjustedDisplayPixelRatio=a.F0D("1",32),n.style.width=n.style.height="";return}(!t.isAndroid||t.is_chrome||t.isFF)&&(c=n.width,l=n.height,a.k1h(39),n.width=a.G7m(c,r),a.k1h(39),n.height=a.G7m(l,r),a.k1h(10),n.style.width=a.F0D(c,"px"),a.A_p(10),n.style.height=a.F0D(l,"px"),e.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:n.width,height:n.height,styleWidth:c,styleHeight:l})},t.ChartEngine.prototype.reconstituteBackingStore=function(){var n,e;!this.useBackingStore||!this.backing||(n=[this.chart.canvas],this.useBackgroundCanvas&&n.push(this.chart.backgroundCanvas),ot.v95(),e=this.backing,n.forEach(function(a){a.width!=e.width&&(a.width=e.width,a.height=e.height,ot.v95(),a.context.scale(e.ratio,e.ratio))}),this.adjustedDisplayPixelRatio=e.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var n,e;!this.useBackingStore||!this.backing||(n=[this.chart.canvas],this.useBackgroundCanvas&&n.push(this.chart.backgroundCanvas),e=this.backing,n.forEach(function(a){a.width!=e.styleWidth&&(ot.v95(),a.width=e.styleWidth,a.height=e.styleHeight,a.context.scale(1,1))}),this.adjustedDisplayPixelRatio=+"1",ot.c4P(),this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(n){return n||(n=this.chart),this.useBackgroundCanvas?n.backgroundCanvas:n.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var n,e,a,o,r,c,l,s;n=this.chart.canvas,e=this.chart.context,n&&e&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=n.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=n.width=this.chart.container.clientWidth,this.adjustBackingStore(n,e),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,this.width===0&&!this.container.dimensionlessCanvas&&this.container.closest("html")&&!this.container.closest("cq-context-wrapper")&&console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,o=this.layout.candleWidth,typeof o=="undefined"&&(o=8);for(var d in this.charts){r=this.charts[d],this.setCandleWidth(o,r),r.scroll<r.width/o&&(r.scroll=Math.floor(r.width/o),c=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=c),l=+"10";try{ot.k1h(67);var h=ot.F0D(8,10,16);s=e.measureText("10:00").width*h}catch{s=100}for(;l>1&&!(this.chart.width/s>l);)l/=1.5;r.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/l),r.xAxis.autoComputedTickSizePixels<1&&(r.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(n,e){e||(e=this.chart),n=this.constrainCandleWidth(n),this.layout.candleWidth=n,ot.A_p(123);var a=ot.G7m(50,1,20,5);e.maxTicks=Math.round(e.width/n)+a},t.ChartEngine.prototype.constrainCandleWidth=function(n){var e,a,o;return e=this.minimumCandleWidth,a=this.maximumCandleWidth,o=this.animations.zoom,e&&n<e&&(n=e,o&&o.running&&o.stop()),a&&n>a&&(n=a,o&&o.running&&o.stop()),n},t.ChartEngine.prototype.resizeChart=function(n){var e;this.runPrepend("resizeChart",arguments)||(n!==!{}&&(n=!![]),n&&this.preAdjustScroll(),e=this.chart.canvasHeight,this.resizeCanvas(),n&&this.postAdjustScroll(),this.displayInitialized?(this.adjustPanelPositions(),this.draw()):this.chart.canvasHeight!==0&&e===0&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var n;ot.c4P(),this.displayInitialized=![];for(var e in this.layout.studies)n=this.layout.studies[e],t.getFn("Studies.removeStudy")(this,n);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var n,e,a,o,r;if(n=this.chart,e=this.layout.candleWidth,a=n.width-this.preferences.whitespace,o=n.dataSet.length,o*e>=a){this.draw();return}(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars)&&o--,ot.A_p(30),r=ot.G7m(a,o),this.setCandleWidth(r,n),this.home({maintainWhitespace:!0})},t.ChartEngine.prototype.setMaxTicks=function(n,e){var a,o,r;e||(e={}),n=Math.round(n),n<2&&(ot.k1h(5),n=ot.G7m("2",0)),a=e.padding?e.padding:"0"*1,ot.c4P(),o=this.chart,r=(o.width-a)/(n-1)||8,this.setCandleWidth(r,o),(e.padding||e.padding===+"0")&&(o.scroll=n)},t.ChartEngine.prototype.initializeChart=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N;if(this.runPrepend("initializeChart",arguments))return;if(a=this.chart,a.symbolObject.symbol||(a.symbolObject.symbol=a.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!![]}),this.calculateYAxisPositions(),this.micropixels=0,n?a.container=n:n=a.container,n.stx=this,!n.CIQRegistered){n.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(n),o=1719821464,r=-1024587188,c=2;for(var C=1;e.Y9k(C.toString(),C.toString().length,65951)!==o;C++)t.ChartEngine.attachGlobalEventHandlers(),c+=2;e.Y9k(c.toString(),c.toString().length,89254)!==r&&t.ChartEngine.attachGlobalEventHandlers()}this.registerHTMLElements&&this.registerHTMLElements(),l=a.canvas,s=a.backgroundCanvas,d=a.tempCanvas,h=this.floatCanvas,p=a.canvasShim,this.setCandleWidth(this.layout.candleWidth),a.backgroundCanvas||(u="c",u+="anvas",g="stx-",g+="canvas-shim",f="d",f+="i",f+="v",s=a.backgroundCanvas=document.createElement("canvas"),n.appendChild(s),L(s),p=a.canvasShim=document.createElement(f),p.className=g,n.appendChild(p),l=a.canvas=document.createElement("canvas"),n.appendChild(l),L(l),a.context=l.context,d=a.tempCanvas=document.createElement(u),n.appendChild(d),L(d,!![]),h=this.floatCanvas=document.createElement("canvas"),n.appendChild(h),L(h,!!{})),this.resizeCanvas(),t.isAndroid&&(w="to",w+="u",w+="c",w+="hstart",v=function(O){e.v95(),O.preventDefault&&O.preventDefault()},d.addEventListener(w,v,{passive:!{}}),h.addEventListener("touchstart",v,{passive:!{}})),m=this.panels,a.panel.display=a.symbol,a.symbolDisplay&&(a.panel.display=a.symbolDisplay),this.adjustPanelPositions(),a.panel=m[a.name];for(var D in m){q=m[D].yaxisLHS.concat(m[D].yaxisRHS);for(var F=+"0";F<q.length;F++)q[F].height=m[D].yAxis.height,this.calculateYAxisMargins(q[F])}this.initialWhitespace=this.preferences.whitespace,a.dataSet&&a.dataSet.length>0&&(a.scroll=Math.floor(a.width/this.layout.candleWidth),x=Math.round(this.preferences.whitespace/this.layout.candleWidth),a.scroll-=x),t.touchDevice&&(y=".ve",y+="ctorTrashCan",k=".",k+="ov",k+="erlayTe",k+="xt",S=n.querySelector(".overlayEdit"),A=n.querySelector(k),_=n.querySelector(".overlayTrashCan"),T=n.querySelector(y),P=function(O,B,R,H){return e.c4P(),function(W){e.v95(),O.deleteHighlighted(B,R,H)}},A&&t.safeClickTouch(A,P(this,!0,!{},!![])),S?(t.safeClickTouch(S,P(this,!0,!0,!{})),_&&t.safeClickTouch(_,P(this,!{}))):_&&t.safeClickTouch(_,P(this,!![])),T&&t.safeClickTouch(T,P(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(n.onmouseout=function(O){return function(B){e.v95(),O.handleMouseOut(B)}}(this),t.smartHover(n.ownerDocument)),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[];for(var M in m)E=m[M],E.markerHolder&&(n.removeChild(E.markerHolder),E.markerHolder=null);for(var I in this.plugins)z=this.plugins[I],z.display&&z.initializeChart&&z.initializeChart(this);this.resizeListenerInitialized||(U=this,this.resizeListenerInitialized=!!{},N=function(){return e.c4P(),function(O){U.resizeChart()}},this.addDomEventListener(n.ownerDocument.defaultView,"resize",N(),!0));function L(O,B){var R,H;R="n",R+="one",O.context=O.getContext("2d"),O.context.lineWidth=1,H=O.style,H.position="absolute",e.c4P(),H.left="0px",B&&(H.display=R)}a.baseline.userLevel&&(a.baseline.userLevel=null),this.setResizeTimer(),this.runAppend("initializeChart",arguments)},t.ChartEngine.prototype.destroy=function(){var n=ot,e,a,o,r,c,l,s;this.setResizeTimer(+"0"),this.detachQuoteFeed&&this.detachQuoteFeed(),this.styles={};for(var d=0;d<this.eventListeners.length;d++)e="funct",e+="ion",a=this.eventListeners[d],a.element.removeEventListener(a.event,a[e],a.options);this.touchAndMouseEventsRegistered=!{},this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),o=t.ChartEngine.registeredContainers,n.A_p(4),r=-n.G7m("1125484603",0),c=1430958192,l=+"2";for(var h=1;n.Y9k(h.toString(),h.toString().length,16163)!==r;h++)s=o.indexOf(this.chart.container),l+=2;n.Y9k(l.toString(),l.toString().length,92366)!==c&&(s=o.indexOf(this.chart.container)),s>-1&&o.splice(s,1),n.c4P(),this.destroyed=!!{},this.slider&&this.slider.slider.destroy(),this.marketDepth&&this.marketDepth.marketDepth.destroy()},t.ChartEngine.registerGlobalEvent("unload",function(){var n;n=t.ChartEngine.registeredContainers.slice(0),ot.v95(),n.forEach(e=>{if(e.ownerDocument===this.document)try{e.stx.destroy(),e.stx=null}catch{}}),t.ChartEngine.globalEventHandlers.forEach(e=>{var a;if(a=e.applied.indexOf(this.document),a>-+"1")try{e.applied.splice(a)}catch{}}),this.document.body.innerHTML=""},!1,!0),t.ChartEngine.prototype.preAdjustScroll=function(n){n||(n=this.chart),ot.c4P(),this.previousAdjust={chart:n,scroll:n.scroll,maxTicks:n.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){ot.v95();var n;!this.previousAdjust||(n=this.previousAdjust.chart,n.scroll=this.previousAdjust.scroll+(n.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(n){return this.translationCallback?this.translationCallback(n,this.preferences.language):n},t.ChartEngine.prototype.doCleanupDates=function(n,e){ot.v95();var a,o,r,c,l;if(!(!n||!n.length)){for(var s=0;s<n.length;s++)if(a=n[s],o=a.DT,!(!o&&!a.Date)){if(a.DT&&Object.prototype.toString.call(o)=="[object String]"&&o.length<=10)o=new Date(o),o.setMinutes(o.getMinutes()+o.getTimezoneOffset());else{if(r=!0,a.DT||(o=t.strToDateTime(a.Date),a.Date.length<=10&&(r=![])),Object.prototype.toString.call(o)!="[object Date]"&&(o=new Date(o)),i.Date&&this.dataZone&&r){c=new i.Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),this.dataZone),ot.A_p(21);var d=ot.G7m(9,4e3,35e3);l=o.getSeconds()*d+o.getMilliseconds(),o=new Date(c.getTime()+l)}t.ChartEngine.isDailyInterval(e)&&o.setHours(+"0",0,0,0)}a.DT||(a.Date=t.yyyymmddhhmmssmmm(o)),a.DT=o}}},t.ChartEngine.prototype.doCleanupGaps=function(n,e,a){var o=ot,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;if(r="m",r+="o",r+="nt",r+="h",c="tic",c+="k",!n||!n.length||(o.c4P(),l=this.layout.interval,a=a||{},e||(e=this.chart),!t.Market||!e.market)||(a.noCleanupDates||this.doCleanupDates(n,l),s=a.cleanupGaps,s===!1)||((!s||s===!!{})&&(s=this.cleanupGaps||s),o.A_p(97),d=o.G7m(s,"gap"),!s))return n;function k(T,P){var E,z,U;if(E=a.field,E){typeof T[E]!="undefined"&&typeof P[E]=="undefined"&&(P[E]=d?null:T[E]);return}d||(z=T[v],U=P[v],typeof z!="undefined"&&typeof U=="undefined"&&t.ensureDefaults(P,{Close:z,Open:z,High:z,Low:z,Volume:0,Adj_Close:T.Adj_Close}))}if(l==c)return n;if(l==r||l=="week"){if(this.dontRoll)return n;l="day"}h=function(T){return o.v95(),T.DT?Object.prototype.toString.call(T.DT)!="[object Date]"?new Date(T.DT):new Date(+T.DT):t.strToDateTime(T.Date)};function S(T,P){var E,z,U,N,C;for(E=a.field,z=E?u[E]:u,z===void 0&&(z={}),U=d?null:z[v],N=d?null:z.Adj_Close;+T<+P;)C={DT:T},E||(p.push(C),t.extend(C,{Open:U,High:U,Low:U,Close:U,Volume:0,Adj_Close:N})),T=w.next()}p=[],u=n[0],p.push(u),g={begin:h(u),interval:l,periodicity:1,timeUnit:this.layout.timeUnit},f=new t.Market(e.market.market_def),w=f.newIterator(g),this.extendedHours&&this.extendedHours.filter&&w.market.enableAllAvailableSessions(),v=e.defaultPlotField;for(var A=0;A<n.length&&n[A][v]===void 0;A++)if(n[A].Value!==void 0){m="V",m+="a",m+="l",m+="ue",v=m;break}for(var _=+"1";_<n.length;_++){for(x=n[_],q=w.next(),y=h(x),q<y&&(S(q,y),q=w.market._convertFromMarketTZ(w.begin,w.outZone));y<q;){if(++_==n.length)return p;k(u,x),p.push(x),u=x,x=n[_],y=h(x)}q<y?(_--,q=w.previous()):(k(u,x),p.push(x),u=x)}return p},t.ChartEngine.prototype.getCreatingLibrary=function(){return b}};cl=b=>{var t;t=b.CIQ,t.ChartEngine.Panel=function(i,n){ot.c4P(),n?this.yAxis=n:this.yAxis=new t.ChartEngine.YAxis,this.name=i,this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!!{}},!!{}),t.ChartEngine.prototype.whichPanel=function(i){var n;for(var e in this.panels)if(n=this.panels[e],!n.hidden&&i>=n.top&&i<n.bottom)return n;return null},t.ChartEngine.prototype.panelExists=function(i){var n;for(var e in this.panels)if(n=this.panels[e],n.name==i)return!0;return ot.c4P(),!1},t.ChartEngine.prototype.storePanels=function(){var i,n;this.layout||(this.layout={}),i=this.layout,i.panels={};for(var e in this.panels)n=this.panels[e],i.panels[n.name]={percent:n.percent,display:n.display,yAxis:n.yAxis}},t.ChartEngine.prototype.savePanels=function(i){this.storePanels(),i!==!1&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(i){var n,e,a;for(var o in this.layout.studies)n=this.layout.studies[o],n.panel==i.name&&this.cleanupRemovedStudy(n);delete this.panels[i.name],ot.v95();for(var r in this.overlays)this.overlays[r].panel==i.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var c in this.chart.series)this.chart.series[c].parameters.panel==i.name&&this.removeSeries(this.chart.series[c],this.chart);if(i.holder&&(this.chart.container.removeChild(i.holder),this.getMarkerArray)){e="pan",e+="el",e+="Name",a=this.getMarkerArray(e,i.name);for(var l=0;l<a.length;l++)this.removeFromHolder(a[l])}i.handle&&i.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(i){var n,e,a,o,r;n="o",n+="bjec",n+="t",e=[],a=i,typeof i==n&&(a=i.name);for(var c in this.layout.studies)o=this.layout.studies[c],a===o.panel&&e.push(o);for(var l in this.chart.seriesRenderers)r=this.chart.seriesRenderers[l],a===r.params.panel&&e.push(r);return e},t.ChartEngine.prototype.checkForEmptyPanel=function(i,n,e){var a,o;if(!i||(a=i,typeof i=="object"&&(a=i.name),a===this.chart.name))return!1;e?e instanceof Array||(e=[e]):e=[],o=this.plotsInPanel(i);for(var r=+"0";r<o.length;r++)if(e.indexOf(o[r])==-("1"*1))return![];return n||this.panelClose(this.panels[a]),!0},t.ChartEngine.prototype.panelClose=function(i){var n,e;if(n="panelClos",n+="e",!!i&&!this.runPrepend(n,arguments)){if(ot.v95(),this.cancelTouchSingleClick=!!{},t.ChartEngine.drawingLine=!{},i.soloing&&this.panelSolo(i),this.charts[i.name]){for(var a in this.panels)e=this.panels[a],e.chart.name==i.name&&this.privateDeletePanel(e);delete this.charts[i.name]}else this.privateDeletePanel(i);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!{},this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var i;for(var n in this.panels)i=this.panels[n],this.privateDeletePanel(i);ot.c4P(),this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(i){ot.c4P();var n,e,a,o;this.cancelTouchSingleClick=!![],t.ChartEngine.drawingLine=![],this.showCrosshairs(),n={},e=0;for(a in this.panels){if(a==i.name)break;e++}if(!!e){o=0;for(a in this.panels)o==e-1&&(n[i.name]=i),a!=i.name&&(n[a]=this.panels[a],o++);this.panels=n,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(i){var n=ot,e,a,o,r,c,l,s,d;this.cancelTouchSingleClick=!!{},t.ChartEngine.drawingLine=!1,this.showCrosshairs(),e={},a=0,n.k1h(4),o=n.G7m("1860329398",0),n.k1h(39),r=n.G7m("1175385287",1),n.k1h(4),c=n.G7m("2",0);for(var h=1;n.f0X(h.toString(),h.toString().length,10269)!==o;h++)c+=2;n.v95(),n.f0X(c.toString(),c.toString().length,"17410"*1);for(l in this.panels){if(l==i.name)break;a++}s=0;for(l in this.panels)s++;if(a!=s-1){d=0;for(l in this.panels){if(l==i.name){d++;continue}e[l]=this.panels[l],d==a+1&&(e[i.name]=i),d++}this.panels=e,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(i){var n,e,a,o,r;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),n=!0,i.soloing){if(a="c",a+="h",a+="art",o="stx_s",o+="o",o+="lo_lit",n=!1,i.soloing=!1,i.solo.classList.remove(o),i.percent=i.oldPercent,i.name!=a)if(this.soloPanelToFullScreen){if(i.percent==1)for(e in this.panels)r=this.panels[e],r!=i&&(i.percent-=r.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if(i.soloing=!!{},i.solo.classList.add("stx_solo_lit"),i.oldPercent=i.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,i.name!="chart")if(this.soloPanelToFullScreen)this.xAxisAsFooter=!0;else{this.chart.panel.oldPercent=this.chart.panel.percent,ot.A_p(5);var c=ot.G7m(3,2);i.percent=c-this.chart.panel.percent}for(e in this.panels)i!==this.panels[e]&&(e==="chart"&&!this.soloPanelToFullScreen||(this.panels[e].hidden=n));this.resetDynamicYAxis({noRecalculate:!!{}}),this.calculateYAxisPositions(),this.draw(),ot.c4P(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(i){var n;n=i.bottom-i.top,i.percent=n/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var i=ot,n,e,a,o,r,c;if(!!t.ChartEngine.resizingPanel){r=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top);for(var l in this.panels){if(this.panels[l]==t.ChartEngine.resizingPanel)break;this.panels[l].hidden||(n=this.panels[l])}if(c=this.backOutY(t.ChartEngine.crosshairY),r)for(a=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),o=0;o<a.length;o++){i.A_p(5);var s=i.F0D(20,10);e=a[o].initialMarginTop+a[o].initialMarginBottom+s,c>a[o].bottom-e&&(c=a[o].bottom-e)}else for(a=n.yaxisLHS.concat(n.yaxisRHS),o=+"0";o<a.length;o++){i.k1h(5);var d=i.G7m(46,14);e=a[o].initialMarginTop+a[o].initialMarginBottom+("10"<<d),c<a[o].top+e&&(c=a[o].top+e)}i.c4P(),t.ChartEngine.crosshairY=this.resolveY(c),n.bottom=c,t.ChartEngine.resizingPanel.top=c,this.calculatePanelPercent(n),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(i){for(var n in this.panels){if(n=="chart")return!{};if(n==i.name)return!0}return ot.c4P(),!{}},t.ChartEngine.prototype.adjustPanelPositions=function(){var i=ot,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C;n="adjustP",n+="anel",n+="Positions",e="adjustPanelPosit",e+="i",e+="o",e+="ns";var{chart:D,panels:F}=this;if(D.tempCanvas&&t.clearCanvas(D.tempCanvas,this),i.v95(),!this.runPrepend(e,arguments)){a=0,o=D.canvasHeight,r=!1,c=0,l=0,s=![];for(d in F)h=F[d],(isNaN(h.percent)||h.percent<=+"0")&&(h.percent=.05),!h.hidden&&(c+=h.percent,l++,h.soloing&&(s=!0));for(d in F){if(p=0,h=F[d],h.hidden){h.markerHolder&&(u="no",u+="ne",h.markerHolder.style.display=u);continue}if(this.manageTouchAndMouse&&(h.up&&(r?this.displayIconsUpDown&&h.up.classList.add("stx-show"):(r=!![],h.up.classList.remove("stx-show"))),h.solo&&(s?h.soloing&&this.displayIconsSolo?h.solo.classList.add("stx-show"):h.solo.classList.remove("stx-show"):l=="1">>32?h.solo.classList.remove("stx-show"):l=="2"*1&&!this.soloPanelToFullScreen?(g="stx-s",g+="how",h.solo.classList.remove(g)):this.displayIconsSolo&&h.solo.classList.add("stx-show")),h.down&&(l==1?(f="stx",f+="-s",f+="h",f+="ow",h.down.classList.remove(f)):this.displayIconsUpDown&&h.down.classList.add("stx-show")),h.edit&&(w="st",w+="x-show",h.editFunction?h.edit.classList.add(w):h.edit.classList.remove("stx-show")),h.close&&(this.displayIconsClose?h.close.classList.add("stx-show"):h.close.classList.remove("stx-show"))),h.percent=h.percent/c,h.top=a,h.bottom=h.top+o*h.percent,h.height=h.bottom-h.top,h.chart.name==h.name&&(h.chart.top=h.top,h.chart.bottom=h.bottom,h.chart.height=h.height),a=h.bottom,h.yaxisLHS){v=h.yaxisLHS.concat(h.yaxisRHS);for(var M=0;M<v.length;M++)m=v[M],m.zoom&&m.height>+"0"&&(p=m.zoom/m.height),this.adjustYAxisHeightOffset(h,m),m.height=m.bottom-m.top,p&&(m.scroll*=p*m.height/m.zoom,m.zoom=p*m.height,m.zoom>m.height&&(m.zoom=0,i.A_p(18),m.scroll=i.G7m("0",0))),!m.high&&m.high!==0&&(m.high=100,m.low=0,m.shadow=100),m.multiplier=m.height/m.shadow,m.position==="none"&&this.calculateYAxisMargins(m)}h.holder&&(q="p",q+="x",x="p",x+="x",y="p",y+="x",k="0",k+="p",k+="x",h.holder.style.right=k,h.holder.style.top=h.top+y,h.holder.style.left="0px",h.holder.style.height=h.height+x,h.subholder.style.left=h.left+q,h.subholder.style.width=h.width+"px",h.subholder.style.top="0px",h.yAxis.height>=0&&(h.subholder.style.height=h.yAxis.height+"px"))}if(d&&F[d].down&&F[d].down.classList.remove("stx-show"),this.manageTouchAndMouse&&l==("2"^0)&&!s&&D.panel.solo&&D.panel.solo.classList.add("stx-show"),D.panel){S="p",S+="x",A=-1975973463,_=-732689889,T=2;for(var I=1;i.f0X(I.toString(),I.toString().length,20010)!==A;I++)T+=2;if(i.f0X(T.toString(),T.toString().length,56894),s&&this.soloPanelToFullScreen)P=D.canvasHeight-h.yAxis.bottom+("12"-0);else{i.A_p(124);var L=i.G7m(23,3,14,1);P=D.canvasHeight-D.panel.yAxis.bottom+L}E=this.controls;var{chartControls:O,home:B,notificationTray:R}=E;z=this.width-D.panel.right,O&&(i.A_p(10),O.style.bottom=i.G7m(P,S)),B&&(U="p",U+="x",N="p",N+="x",i.A_p(10),B.style.bottom=i.G7m(P,N),i.A_p(10),B.style.marginRight=i.F0D(z,U)),R&&(C="p",C+="x",i.A_p(10),R.style.bottom=i.G7m(P,C),i.k1h(10),R.style.marginRight=i.G7m(z,"px"))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend(n,arguments)}},t.ChartEngine.prototype.createPanel=function(i,n,e,a,o,r){var c=ot,l,s,d,h,p,u;if(l="char",l+="t",c.c4P(),!this.runPrepend("createPanel",arguments)){a||(a=l),s=this.chart.canvasHeight,e||(c.A_p(39),e=c.G7m(s,.2)),e>s&&(c.A_p(39),e=c.F0D(s,.5)),c.A_p(30),d=c.G7m(e,s),c.k1h(5),h=c.G7m(1,d),p=!{};for(var g in this.panels)u=this.panels[g],u.percent*=h,u.soloing&&(p=!0);return this.stackPanel(i,n,d,a,o),this.panels[n].hidden=p,this.panels[n].exportable=!r,this.calculateYAxisMargins(this.panels[n].yAxis),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[n]}},t.ChartEngine.prototype.modifyPanel=function(i,n){var e,a,o,r,c,l,s,d;e=i.name;var{studies:h}=this.layout,{series:p}=this.chart,{name:u,display:g,yAxis:f}=n||{};u||(u=t.uniqueID()),g||(g=u),f||(f=i.yAxis,f.name=u),a={};for(var w in this.panels)w===i.name?(o=this.panels[w],o.name=u,o.display=g,o.yAxis=f,i=a[u]=o,this.moveMarkers&&e!==u&&this.moveMarkers(e,u)):a[w]=this.panels[w];this.panels=a,r=!{};for(var v in h)c=h[v],c.panel===e&&(c.panel=u,c.parameters&&c.parameters.panelName&&(r=!!{},c.parameters.panelName=u));for(var m in p)p[m].parameters.panel===e&&(r=!0,l={panel:u},p[m].parameters.yAxis&&p[m].parameters.yAxis.name===e&&(l.yAxis=f),this.modifySeries(m,l,!!{}));r&&this.changeOccurred("layout"),s=!{};for(var q=0;q<this.drawingObjects.length;q++)d=this.drawingObjects[q],e===d.panelName&&(d.panelName=u,s=!0);s&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(i,n){var e=ot,a,o,r,c;if(!!n){Object.values(this.panels).slice(-1)[0]===i&&(n+=this.xaxisHeight);var{canvasHeight:l}=this.chart,{percent:s}=i;e.k1h(30),a=e.F0D(n,l),e.k1h(5),o=e.G7m(1,s),e.A_p(5),r=e.F0D(1,a),e.k1h(30),c=e.F0D(o,r),Object.values(this.panels).forEach(d=>{e.c4P(),d.percent/=c}),i.percent=a,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(i,n){var e,a,o,r,c,l,s,d,h;e="st";function p(g){return g.name!=o.name}if(e+="r",e+="in",e+="g",typeof i==e&&(i=this.panels[i]),o=i.yAxis,i&&i!=this.chart.panel){if(r=i.yAxis,c=r.studies[0],(!c||c==o.name)&&(c=r.renderers[0]),(!c||c==o.name)&&(c=r.studies[1]),c||(c=r.renderers[1]),n)r=i.yAxis=n,a=n.name;else if(c)r=this.addYAxis(i,new t.ChartEngine.YAxis({name:c,position:r.position})),r.renderers=i.yAxis.renderers,r.studies=i.yAxis.studies,a=c;else if(i.yaxisLHS){l=i.yaxisRHS.concat(i.yaxisLHS).filter(p),s=l[0];for(var u=0;u<l.length;u++)if(!l[u].position){s=l[u];break}s&&(r=i.yAxis=s,a=s.studies[0]||s.renderers[0])}a?(c=a,o.name!=i.name&&(c=i.name),h=this.layout.studies,h&&h[a]&&(d=h[a].inputs.display),this.modifyPanel(i,{name:c,display:d||a,yAxis:r}),this.deleteYAxisIfUnused(i,o),this.panels[c].yAxis.lockScale||this.calculateYAxisMargins(this.panels[c].yAxis)):this.checkForEmptyPanel(i)}return a},t.ChartEngine.prototype.configurePanelControls=function(i){var n=ot,e,a,o,r,c,l,s,d;e=".s",e+="tx-ico-close",a=".stx-ic",a+="o-f",a+="ocus",o=".stx",o+="-ico-u",o+="p",r=".stx-pa",r+="nel-title",c=i.icons,c&&(l=i.name==i.chart.name,c.classList.add("stx-show"),c.classList.remove("iconsTemplate"),i.title=c.querySelector(r),i.up=c.querySelector(o),i.up&&(i.up=i.up.parentNode),i.solo=c.querySelector(a),i.solo&&(i.solo=i.solo.parentNode),i.down=c.querySelector(".stx-ico-down"),i.down&&(i.down=i.down.parentNode),i.edit=c.querySelector(".stx-ico-edit"),n.c4P(),i.edit&&(i.edit=i.edit.parentNode),i.close=c.querySelector(e),i.close&&(i.close=i.close.parentNode),i.title&&(i.title.innerHTML="",i.display&&i.title.appendChild(document.createTextNode(i.display)),l&&(i.title.classList.add("chart-title"),c.classList.add("stx-chart-panel"))),(!t.touchDevice||t.isSurface)&&this.makeModal(c),i.handle&&((!t.touchDevice||t.isSurface)&&(i.handle.onmouseover=function(h){return function(){n.c4P(),h.hideCrosshairs()}}(this)),(!t.touchDevice||t.isSurface)&&(i.handle.onmouseout=function(h){return function(){n.v95(),h.showCrosshairs()}}(this)),s=function(h,p){return function(u){t.ChartEngine.resizingPanel||h.openDialog!==""||(n.c4P(),h.grabHandle(p))}},t.isSurface?i.handle.onpointerdown=s(this,i):i.handle.onmousedown=s(this,i),t.touchDevice&&i.handle.addEventListener("touchstart",s(this,i),{passive:!1})),i.up&&t.safeClickTouch(i.up,function(h,p){return function(){h.panelUp(p)}}(this,i)),i.down&&t.safeClickTouch(i.down,function(h,p){return n.v95(),function(){n.c4P(),h.panelDown(p)}}(this,i)),i.solo&&t.safeClickTouch(i.solo,function(h,p){return function(){h.panelSolo(p)}}(this,i)),i.close&&(i.name=="chart"?(d="n",d+="one",i.close.style.display=d):t.safeClickTouch(i.close,function(h,p){return function(){n.c4P(),h.panelClose(p)}}(this,i))))},t.ChartEngine.prototype.stackPanel=function(i,n,e,a,o){var r=ot,c,l,s,d,h,p,u,g,f,w,v,m,q;if(c="sta",c+="c",c+="kPane",c+="l",l="stx",l+="-subhol",l+="de",l+="r",s="di",s+="v",d="ch",d+="ar",d+="t",h="stackP",h+="a",h+="n",h+="el",!this.runPrepend(h,arguments)){if(a||(a=d),p=this.charts[a],r.k1h(97),u=r.G7m(n,a),u){g=-918352735,f=+"1280522644",w=2;for(var x=1;r.f0X(x.toString(),x.toString().length,63911)!==g;x++)i=p.symbol,p.symbolDisplay&&(i=p.symbolDisplay),w+=2;r.f0X(w.toString(),w.toString().length,61380)!==f&&(i=p.symbol,p.symbolDisplay&&(i=p.symbolDisplay)),o||(o=p.yAxis)}v=this.panels[n]=new t.ChartEngine.Panel(n,o),!u&&p.yAxis&&v.yAxis.position==p.yAxis.position&&(v.yAxis.width=p.yAxis.width),u&&!p.panel&&(p.panel=v),v.percent=e,v.chart=p,v.display=i,v.holder=t.newChild(this.container,s,"stx-holder"),v.subholder=t.newChild(v.holder,"div",l),v.subholder.style.zIndex=+"1",r.v95(),v.holder.panel=v,m=u?"stx-panel-chart":"stx-panel-study",v.holder.classList.add(m),this.controls.handleTemplate&&this.manageTouchAndMouse&&(q="handl",q+="eTemp",q+="la",q+="te",v.handle=this.controls.handleTemplate.cloneNode(!0),v.handle.classList.remove(q),this.container.appendChild(v.handle),v.handle.panel=v),this.controls.iconsTemplate&&(v.icons=this.controls.iconsTemplate.cloneNode(!!{}),v.subholder.appendChild(v.icons),this.configurePanelControls(v)),this.currentlyImporting||this.resizeCanvas(),this.runAppend(c,arguments)}},t.ChartEngine.prototype.setPanelEdit=function(i,n){i.editFunction=n,i.edit&&t.safeClickTouch(i.edit,n),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var i=ot,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(!this.runPrepend("drawPanels",arguments)){n=!{};for(var y in this.panels){if(e=this.panels[y],e.state={},a=this.translateIf(e.display),e.title&&e.title.textContent!=a&&(e.title.innerHTML="",e.title.appendChild(document.createTextNode(a))),e.icons&&e.icons.classList.add("stx-show"),e.hidden){o="n",o+="o",o+="n",o+="e",e.icons&&e.icons.classList.remove("stx-show"),e.handle&&(e.handle.style.display=o),e.holder.style.display="none";continue}else e.name!="chart"&&(r="n",r+="o",r+="n",r+="e",c=this.manageTouchAndMouse,e.up&&(e.up.style.display=this.displayIconsUpDown&&c?"":r),e.down&&(e.down.style.display=this.displayIconsUpDown&&c?"":"none"),e.solo&&(e.solo.style.display=this.displayIconsSolo&&c?"":"none"),e.close&&(e.close.style.display=this.displayIconsClose&&c?"":"none"),e.edit&&(e.edit.style.display=e.editFunction&&c?"":"none")),e.holder.style.display="block";if(e.displayEdgeIfPadded&&(l="segm",l+="en",l+="t",s="stx_gr",s+="id_border",d="s",d+="e",d+="gmen",d+="t",h="stx_grid_bo",h+="rder",p=Math.round(e.left)+.5,u=e.yAxis.top-.5,g=e.yAxis.bottom+.5,e.yaxisCalculatedPaddingLeft&&!e.yaxisTotalWidthLeft&&this.plotLine(p,p,u,g,this.canvasStyle(h),d,this.chart.context,!{},{lineWidth:1}),p=Math.round(e.right)+.5,e.yaxisCalculatedPaddingRight&&!e.yaxisTotalWidthRight&&this.plotLine(p,p,u,g,this.canvasStyle(s),l,this.chart.context,!1,{lineWidth:1})),!n){f="n",f+="one",e.handle&&(e.handle.style.display=f),n=!!{};continue}if(w=e.top,w=Math.round(w)+.5,this.plotLine(e.left-"0.5"*1,e.right+.5,w,w,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),e.handle){v="p",v+="x",this.displayPanelResize?e.handle.style.display="":e.handle.style.display="none",i.A_p(125);var k=i.G7m(12,170,14);e.handle.style.top=w-e.handle.offsetHeight/k+v}}m=-1327496038,q=1725516698,x=2;for(var S=1;i.Y9k(S.toString(),S.toString().length,28937)!==m;S++)this.runAppend("",arguments),x+=2;i.f0X(x.toString(),x.toString().length,40726)!==q&&this.runAppend("drawPanels",arguments)}}};ll=b=>{var t;t=b.CIQ,t.ChartEngine.isDailyInterval=function(i){return i=="day"?!![]:(ot.c4P(),i=="week"?!0:i=="month"?!!{}:!1)},t.ChartEngine.prototype.setPeriodicity=function(i,n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(a="l",a+="ayout",o="fun",o+="ctio",o+="n",this.runPrepend("setPeriodicity",arguments))return;if(typeof arguments[0]!="object"){i={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},e.k1h(126);var y=e.F0D(2,40,7,16);n=arguments[arguments.length-y],arguments.length==="3"<<64&&(i.timeUnit=void 0)}var{period:k,interval:S,timeUnit:A}=i;typeof n!==o&&(n=null),{period:k,interval:S,timeUnit:A}=t.cleanPeriodicity(k,S,A);var{layout:_}=this;_.setSpan={},_.range={},this.chart.inflectionPoint=null,r=![];function T(){e.v95();var B;B="peri",B+="o",B+="dici",B+="ty",l.dispatch(B,s),n&&n(null)}this.chart.symbol&&(r=this.needDifferentData({period:k,interval:S,timeUnit:A}));var{candleWidth:P,periodicity:E,interval:z,timeUnit:U}=_;if(c={prvPeriodicity:E,prvInterval:z,prvTimeUnit:U},_.periodicity=k,_.interval=S,_.timeUnit=A,l=this,s={stx:l,differentData:r,prevPeriodicity:c},r){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var N in this.charts)d=this.charts[N],d.symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:d.symbol,symbolObject:d.symbolObject,chart:d},T):this.loadChart(d.symbol,{chart:d},T));else this.dataCallback?(this.dataCallback(),T()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home();return}for(var C in this.charts){h=this.charts[C];var{dataSegment:D,dataSet:F,maxTicks:M,scroll:I}=h;if(p=D?D.length:0,u=F?F.length:0,g=void 0,f=Math.round(h.maxTicks/2),this.setCandleWidth(P,h),w=!0,v=!1,I<=M?w=!1:D&&!D[f]&&(w=!1,e.k1h(5),v=e.F0D(I,u)),w&&p>+"0"&&(M<(Math.round(this.chart.width/P-+"0.499")-1)/2&&(e.A_p(127),f=e.G7m(p,"1",1)),f>=p?(g=D[p-1].DT,e.k1h(5),f=e.F0D(p,1)):g=D[f].DT),this.createDataSet(),w){if(p>+"0"){for(var L=u-1;L>=0;L--)if(m=F[L].DT,m.getTime()<g.getTime()){e.A_p(128),h.scroll=e.F0D(0,L,u,"1",f);break}}}else v?h.scroll=F.length+v:(q=Math.round(this.preferences.whitespace/P),e.A_p(29),h.scroll=e.F0D(q,M,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred(a),this.quoteDriver)for(var O in this.charts)x=this.charts[O],x.symbol&&(x.moreAvailable||!x.upToDate)&&this.quoteDriver.checkLoadMore(x);T(),this.runAppend("setPeriodicity",arguments)},ot.v95(),t.ChartEngine.prototype.needDifferentData=function(i){var n,e,a,o,r,c;return n="mi",n+="nu",n+="te",e="minut",e+="e",a=this.layout,o=t.ChartEngine.isDailyInterval(i.interval),r=t.ChartEngine.isDailyInterval(a.interval),c=!1,this.dontRoll||!r?a.interval!=i.interval&&(c=!!{}):o!=r&&(c=!0),!o&&!i.timeUnit&&(i.timeUnit=e),!r&&!a.timeUnit&&(a.timeUnit=n),i.timeUnit!=a.timeUnit&&(c=!0),(!this.masterData||!this.masterData.length)&&(c=!![]),c},t.ChartEngine.prototype.getPeriodicity=function(){var i,n,e;return i=this.layout,n=i.interval,e=i.timeUnit,e||(e=n,n=1),{period:i.periodicity,interval:n,timeUnit:e}}};dl=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.isHistoricalMode=function(){var i,n,e,a,o,r;return i=new Date,n=!0,e=this.masterData,this.isHistoricalModeSet?(e.length&&(a=this.getFirstLastDataRecord(e,"DT",!!{}),o=this.standardMarketIterator(a.DT),n=(o?o.next():a.DT)<=i,n&&t.ChartEngine.isDailyInterval(o.interval)&&(r=this.chart.market.getOpen(),r&&i<r&&(i.setHours(+"0",0,+"0",0),+i==+o.begin&&(n=![])))),n):![]},t.ChartEngine.prototype.isHome=function(){var i,n,e;i=this.chart,n=i.dataSet,e=i.animatingHorizontalScroll,ot.k1h(29);var a=ot.G7m(11,32,19);return this.pixelFromTick(n.length-(e?a:"1"<<0),i)<i.width+i.panel.left},t.ChartEngine.prototype.getPreviousBar=function(i,n,e){return ot.c4P(),this.getNextBarInternal(i,n,e,-1)},t.ChartEngine.prototype.getNextBar=function(i,n,e){return this.getNextBarInternal(i,n,e,1)},t.ChartEngine.prototype.getNextBarInternal=function(i,n,e,a){var o,r,c,l;if(o=i.dataSegment&&i.dataSegment[e],o){for(r=o.tick;r>0&&r<i.dataSet.length;)if(ot.A_p(10),r=ot.F0D(r,a),c=i.dataSet[r],c&&(l=t.existsInObjectChain(c,n),l&&l.obj[l.member]))return c}return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(i,n,e){var a;if(i&&i.length)for(a=e?i.length-1:0;a>=+"0"&&a<i.length;){if(i[a]&&typeof i[a][n]!="undefined")return i[a];e?a--:a++}return ot.c4P(),null},t.ChartEngine.prototype.leftTick=function(){return this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(i,n,e){var a;return ot.v95(),n||(n=1),e!==![]&&(e=!!{}),a=this.standardMarketIterator(i,e?this.dataZone:this.displayZone),a?n<1?(ot.A_p(16),a.previous(ot.F0D(n,1))):a.next(n):i},t.ChartEngine.prototype.standardMarketIterator=function(i,n,e){var a,o;return a=e||this.chart,a.market?(ot.c4P(),o={begin:i,interval:this.layout.interval,periodicity:this.layout.interval=="tick"?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:n},a.market.newIterator(o)):null}};hl=b=>{var t=ot,i,n;b.SplinePlotter||(b.SplinePlotter={}),i=b.CIQ,n=b.SplinePlotter,i.ChartEngine.prototype.draw=function(e){var a,o,r,c,l,s,d,h,p,u,g;if(a="ov",a+="erlay",o="n",o+="o",o+="n",o+="e",this.debug(),!this.destroyed&&(r=this.chart,c=this.layout,!!r.canvas&&!!r.dataSet&&!!r.canvasHeight&&(this.offset=c.candleWidth*this.candleWidthPercent/("2"-0),i.clearCanvas(r.canvas,this),!!this.masterData&&!this.runPrepend("draw",arguments)))){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(r),d=this.createXAxis(r),this.initializeDisplay(r),this.drawXAxis(r,d);try{this.renderYAxis(r)}catch(m){var f;if(f="re",f+="b",f+="oot",f+=" draw",m&&m.message===f)return this.draw();throw m}this.currentHRParams=this.getCurrentHRParams(),this.drawCurrentPriceLine(),r.tmpWidth=Math.floor(c.candleWidth*this.candleWidthPercent),r.tmpWidth%2===0&&(r.tmpWidth+=1,r.tmpWidth>c.candleWidth&&(r.tmpWidth-=2)),r.tmpWidth<.5&&(r.tmpWidth=.5);for(l in this.plugins)s=this.plugins[l],s.display&&s.drawUnder&&s.drawUnder(this,r);r.legend&&(r.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display=o),this.rendererAction(r,"underlay"),i.getFn("Studies.displayStudies")(this,r,!!{}),this.displayChart(r),i.getFn("Studies.displayStudies")(this,r,!{}),this.rendererAction(r,a),r.legend&&r.legend.colorMap&&r.legendRenderer&&r.legendRenderer(this,{chart:r,legendColorMap:r.legend.colorMap,coordinates:{x:r.legend.x,y:r.legend.y+r.panel.yAxis.top}});for(l in this.plugins)s=this.plugins[l],s.display&&s.drawOver&&s.drawOver(this,r);for(var w in this.panels)this.panels[w].hidden||this.plotYAxisText(this.panels[w]);for(var v=0;v<this.yAxisLabels.length;v++)h=this.yAxisLabels[v],!(h.src=="series"&&h.args[6]&&h.args[6].drawSeriesPriceLabels===!{})&&this.createYAxisLabel.apply(this,h.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.currentHRParams=null,this.displayInitialized=!0,p=this.controls,p&&(u=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),p.home&&(p.home.style.display=u&&!this.isHome()?"block":"none"),p.chartControls&&(g="h",g+="id",g+="de",g+="n",p.chartControls.style.display=this.manageTouchAndMouse&&p.chartControls.style.visibility!==g?"block":"none",p.chartControls.style.display==="block"&&i.efficientDOMUpdate(p.chartControls.style,"left",r.left+r.width/2+"px"))),i.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(r),t.c4P(),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}},i.ChartEngine.prototype.setSeriesRenderer=function(e){var{baseline:a,name:o,panel:r,yAxis:c}=e.params;return this.chart.seriesRenderers[o]?this.chart.seriesRenderers[o]:(c&&(e.params.yAxis=this.addYAxis(this.panels[r],c),this.resizeChart()),e.stx=this,this.chart.seriesRenderers[o]=e,a&&this.registerBaselineToHelper(e),t.c4P(),e)},i.ChartEngine.prototype.setMainSeriesRenderer=function(e){var a,o,r,c,l,s,d;a="stand",a+="aloneBars",o="_mai",o+="n_series",r="o",r+="h",r+="l",r+="c",c="n",c+="one";var{chartType:h,aggregationType:p}=this.layout,{chart:u}=this,{custom:g}=u;l=this.mainSeriesRenderer,s=this.displayInitialized,l&&(e&&this.setMasterData(),this.displayInitialized=![],l.removeAllSeries(),this.removeSeriesRenderer(l),l=this.mainSeriesRenderer=null),g&&g.chartType&&(h=g.chartType),h!=c&&(t.v95(),p&&p!=r&&(h=p),d=i.Renderer.produce(h,{panel:u.panel.name,name:o,highlightable:!1,useChartLegend:!0}),d&&(this.setSeriesRenderer(d).attachSeries(null,{display:u.symbol}),l=this.mainSeriesRenderer=d),this.displayInitialized=s,["highLowBars",a,"barsHaveWidth"].forEach(function(f){u[f]=this.mainSeriesRenderer&&this.mainSeriesRenderer[f]}.bind(this)))},i.ChartEngine.prototype.removeSeriesRenderer=function(e){var a,{baseline:o,name:r}=e.params;t.c4P(),a=this.controls[`${r} baseline-handle`],o&&(this.removeBaselineFromHelper(e),a&&(this.container.removeChild(a),delete this.controls[a])),delete this.chart.seriesRenderers[r]},i.ChartEngine.prototype.getSeriesRenderer=function(e){return this.chart.seriesRenderers[e]},i.ChartEngine.prototype.getRendererFromSeries=function(e){var a;a=this.chart.seriesRenderers;for(var o in a)for(var r in a[o].seriesParams)if(a[o].seriesParams[r].id==e)return a[o];return null},t.c4P(),i.ChartEngine.prototype.startClip=function(e,a){var o,r,c,l,s;e||(e=this.chart.panel.name),o=this.panels[e],r=o.yAxis,c=this.chart,c.context.save(),c.context.beginPath(),l=o.left,s=o.width,a?(t.A_p(39),l=t.G7m("0",1),s=this.width):o.yaxisLHS&&o.yaxisLHS.length&&(l++,s--),c.context.rect(l,r.top,s,r.height),c.context.clip()},i.ChartEngine.prototype.endClip=function(){this.chart.context.restore()},i.ChartEngine.prototype.setLineStyle=function(e,a){var o,r;o={},e&&typeof e=="object"?o=e:o.color=e,t.v95(),!o.color&&!o.pattern&&!o.width&&!o.baseColor&&(o=null),a||(a=this.chart),t.k1h(3),r=t.G7m("1",1),o&&o.width&&(r=o.width),o&&o.pattern&&(o.pattern=i.borderPatternToArray(r,o.pattern)),a.lineStyle=o},i.ChartEngine.prototype.setGapLines=function(e,a){var o,r;if(o="o",o+="bj",o+="ec",o+="t",a||(a=this.chart),r={},e&&typeof e==o)r=e;else{if(typeof e=="boolean")return a.gaplines=e;r.color=e}!r.color&&!r.pattern&&!r.fillMountain&&(r=null),r&&r.pattern&&(r.pattern=i.borderPatternToArray(r.width,r.pattern)),r&&r.width<=0&&(r.width=null),a.gaplines=r},i.ChartEngine.prototype.getGapColorFunction=function(e,a,o,r,c){return t.v95(),typeof o!="object"&&(o={color:o}),function(l,s,d){var h,p;return t.v95(),h=c?c(l,s,d):o,h.color&&(h=h.color),p=s[e],!p&&p!==+"0"&&(p=s[a]),!d&&(p||p===0)?{color:h,pattern:o.pattern,width:o.width}:r?(typeof r!="object"&&(typeof r=="string"?r={color:r}:r={}),{color:r.color||h,pattern:r.pattern||o.pattern,width:r.width||o.width}):null}},i.ChartEngine.prototype.drawLineChart=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m;return c="C",c+="los",c+="e",l=this.chart,s=l.context,d=l.lineStyle||{},h=this.canvasStyle(a),r||(r={}),this.startClip(e.name),p=r.width||d.width||h.width,p&&parseInt(p,10)<=25?s.lineWidth=Math.max(1,i.stripPX(p)):s.lineWidth=1,r.pattern=r.pattern||d.pattern||h.borderTopStyle,r.pattern=i.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(a),u=r.color||d.color,u&&(u=="auto"&&(u=this.defaultColor),r.opacity&&r.opacity!==1&&(u=i.hexToRgba(i.colorToHex(u),parseFloat(r.opacity))),s.strokeStyle=u),r.skipProjections=!!{},g=r.field||l.defaultPlotField,f=r.subField||l.defaultPlotField||c,w=r.gapDisplayStyle,!w&&w!==![]&&(w=r.gaps),!w&&w!==!{}&&(w=l.gaplines),w||(w="transparent"),t.v95(),r.gapDisplayStyle=w,v=this.getGapColorFunction(g,f,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},w,o),e.chart.tension&&(r.tension=e.chart.tension),m=this.plotDataSegmentAsLine(g,e,r,v),m.colors.length||m.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?m:m.colors},i.ChartEngine.prototype.drawChannelChart=function(e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m;for(r="Cl",r+="o",r+="s",r+="e",c="fi",c+="e",c+="ld",l="sub",l+="Field",s=Object.assign({},o),s.color=o.color,d=this.drawLineChart(e,s.style,a,s),h=s.border_color_up||this.getCanvasColor("stx_channel_up"),p=s.border_color_down||this.getCanvasColor("stx_channel_down"),s[o.field?l:c]=s.field_high||"High",s.color=h,u=this.drawLineChart(e,s.style,a,s),s[o.field?"subField":"field"]=s.field_low||"Low",s.color=p,g=this.drawLineChart(e,s.style,a,s),s[o.field?"subField":"field"]=o.subField||this.chart.defaultPlotField||r,w=[],v=[],f=0;f<u.points.length;f+="2"<<32)w.push([u.points[f],u.points[f+("1">>64)]]);for(f=0;f<g.points.length;f+=2)v.push([g.points[f],g.points[f+1]]);t.A_p(0);var q=t.F0D(2,5,14);for(m=this.chart.context.lineWidth/q,f=d.points.length-2;f>=0;f-=2)w.push([d.points[f],d.points[f+1]-m]),v.push([d.points[f],d.points[f+1]+m]);return this.startClip(e.name),s.color=h,i.fillArea(this,w,s),s.color=p,i.fillArea(this,v,s),this.endClip(),d.colors=d.colors.concat(u.colors).concat(g.colors),o.returnObject?d:d.colors},i.ChartEngine.prototype.connectTheDots=function(e,a,o,r,c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z;if(l||(l={}),l.pattern!="none"&&(c===!0&&(c=this.chart.panel),(r===null||typeof r=="undefined")&&(r=this.chart.context),!(e.length<"4">>0))){s=0,t.v95(),d=this.chart.canvasHeight,h=0,p=this.chart.width,c&&(d=c.yAxis.bottom,s=c.yAxis.top),r.lineWidth=1.1,typeof a=="object"?(r.strokeStyle=a.color,a.opacity?r.globalAlpha=a.opacity:r.globalAlpha=1,r.lineWidth=i.stripPX(a.width)):(u="a",u+="u",u+="t",u+="o",!a||a==u||i.isTransparent(a)?r.strokeStyle=this.defaultColor:r.strokeStyle=a),l.opacity&&(r.globalAlpha=l.opacity),l.lineWidth&&(r.lineWidth=l.lineWidth),g=i.borderPatternToArray(r.lineWidth,l.pattern),r.beginPath();for(var U=0;U<e.length-2;U+=2){if(f=e[U],t.A_p(10),w=e[t.G7m(U,1)],t.k1h(10),v=e[t.G7m(U,2)],t.k1h(129),m=e[t.G7m("3",U)],isNaN(f)||isNaN(v)||isNaN(w)||isNaN(m))return;q=0,x=1,t.k1h(5),y=t.G7m(v,f),t.A_p(5),k=t.F0D(m,w);for(var N="0"|0;N<4;N++){if(N===0&&(S=-y,t.k1h(5),A=-t.F0D(h,f)),N==1&&(S=y,t.k1h(5),A=t.G7m(p,f)),N==2&&(S=-k,t.A_p(5),A=-t.F0D(s,w)),N==3&&(S=k,t.k1h(5),A=t.G7m(d,w)),t.A_p(30),_=t.F0D(A,S),(m||m===0)&&S===0&&A<0)return!1;if(S<0){if(_>x)return!1;_>q&&(q=_)}else if(S>0){if(_<q)return![];_<x&&(x=_)}}t.A_p(130),T=t.F0D(y,q,f),t.k1h(130),P=t.F0D(k,q,w),t.A_p(130),E=t.F0D(y,x,f),t.A_p(130),z=t.F0D(k,x,w);try{r.setLineDash(g&&g.length?g:[]),r.moveTo(T,P),r.lineTo(E,z)}catch{}}r.stroke(),r.closePath(),r.globalAlpha=1,r.lineWidth=1}},i.ChartEngine.prototype.plotSpline=function(e,a,o,r,c,l,s){var d,h;d="o",d+="bject",s||(s={}),s.pattern!="none"&&(l===!0&&(l=this.chart.panel),(c===null||typeof c=="undefined")&&(c=this.chart.context),c.save(),c.lineWidth=+"1.1",typeof o==d?(c.strokeStyle=o.color,o.opacity?c.globalAlpha=o.opacity:(t.A_p(3),c.globalAlpha=t.G7m("1",1)),c.lineWidth=i.stripPX(o.width)):!o||o=="auto"||i.isTransparent(o)?c.strokeStyle=this.defaultColor:c.strokeStyle=o,s.opacity&&(c.globalAlpha=s.opacity),s.lineWidth&&(c.lineWidth=s.lineWidth),h=i.borderPatternToArray(c.lineWidth,s.pattern),s.pattern&&c.setLineDash&&(c.setLineDash(h),c.lineDashOffset=0),c.beginPath(),n.plotSpline(e,a,c),c.stroke(),c.closePath(),c.restore())},i.ChartEngine.prototype.rawWatermark=function(e,a,o,r){var c;c="al",c+="phab",c+="et",c+="ic",this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,e.globalAlpha=.5,this.chart.context.textBaseline=c,e.fillText(r,a,o),t.k1h(4),e.globalAlpha=t.F0D("1",0)},i.ChartEngine.prototype.watermark=function(e,a){var o,r,c,l,s,d;if(o="a",o+="lphab",o+="etic",r="t",r+="o",r+="p",a&&typeof a!="object"&&(a={h:arguments[1],v:arguments[2],text:arguments[3]}),a={h:a.h||"left",v:a.v||"bottom",text:a.text||"",hOffset:a.hOffset===0?+"0":a.hOffset||10,vOffset:a.vOffset===0?"0"<<0:a.vOffset||20,context:a.context||this.chart.context},c=a.context,!!c&&(l=this.panels[e],!(!l||l.hidden))){if(s=l.yAxis.bottom-a.vOffset,a.v==r)s=l.top+a.vOffset;else if(a.v=="middle"){t.A_p(10);var h=t.F0D(0,2);s=(l.top+l.yAxis.bottom)/h}if(c.save(),this.canvasFont("stx_watermark",c),this.canvasColor("stx_watermark",c),c.textBaseline=o,d=l.left+a.hOffset,a.h=="right")d=l.right-a.hOffset;else if(a.h=="center"){t.A_p(5);var p=t.G7m(26,24);d=(l.right+l.left-c.measureText(a.text).width)/p}c.globalAlpha=.5,this.highlightedDraggable&&(c.globalAlpha*=.3),c.fillText(a.text,d,s),c.restore()}},i.ChartEngine.prototype.displayErrorAsWatermark=function(e,a){var o,r,c,l,s,d,h,p,u,g,f;!a||(e||(e="chart"),o=this.panels[e],!(!o||o.hidden)&&(r=o.state,r||(o.state=r={}),c=r.studyErrors,c||(r.studyErrors=c=new Set),!c.has(a)&&(l=r.watermarkOffset||10,s=10,d=this.getCanvasFontSize("stx_watermark"),t.c4P(),this.chart&&this.chart.chartControls&&(h=o.yAxis.bottom,p=this.chart.chartControls,t.k1h(5),u=t.F0D(h,l),t.A_p(5),g=t.F0D(u,d),(u>p.offsetTop&&u<p.offsetTop+p.offsetHeight||g>p.offsetTop&&g<p.offsetTop+p.offsetHeight)&&(l=h-p.offsetTop+s)),c.add(a),f={h:"center",v:"bottom",text:a,vOffset:l},t.A_p(10),l+=t.F0D(d,s),r.watermarkOffset=l,this.watermark(e,f))))},i.ChartEngine.prototype.displayChart=function(e){var a,o,r;if(!this.runPrepend("displayChart",arguments)){t.c4P(),this.rendererAction(e,"main"),a=-677427644,o=202075208,t.A_p(4),r=t.G7m("2",0);for(var c=1;t.Y9k(c.toString(),c.toString().length,71380)!==a;c++)this.runAppend("displayChart",arguments),r+=2;t.Y9k(r.toString(),r.toString().length,+"46727")!==o&&this.runAppend("",arguments)}}};pl=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.cloneStyle=function(i){var n=ot,e,a,o,r,c,l,s,d;function h(g){return n.c4P(),g["1"^0].toUpperCase()}n.c4P(),e={},a=!1;for(var p in i)if(o=i[p],p=="backgroundAttachment"&&(a=!0),a)o&&o.constructor==String&&isNaN(p)&&(e[p]=o);else if(isNaN(p))d=p.replace(t.camelCaseRegExp,h),e[d]=o;else if(r=i.getPropertyValue(o),r){for(o=o.split("-"),n.k1h(18),c=n.G7m("0",64),l=o.length,s=o[0];++c<l;){n.A_p(131);var u=n.G7m(15,2,17,3);s+=o[c].charAt("0"|0).toUpperCase()+o[c].slice(u)}e[s]=r}return e},t.ChartEngine.prototype.canvasStyle=function(i){var n,e,a;return n=this.styles[i],n||(e=document.createElement("div"),e.className=i,this.container.appendChild(e),a=getComputedStyle(e),n=this.styles[i]=this.cloneStyle(a),this.container.removeChild(e),a||(this.styles[i]=null)),n},t.ChartEngine.prototype.colorOrStyle=function(i){var n;return n="tra",n+="nsparent",i.indexOf("#")!=-1||(ot.v95(),i.indexOf("(")!=-("1">>32))||i==n?i:this.canvasStyle(i)},t.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(i,n,e){this.styles[i]||this.canvasStyle(i),this.styles[i]||(this.styles[i]={}),this.styles[i][t.makeCamelCase(n)]=e},t.ChartEngine.prototype.canvasFont=function(i,n){var e=ot,a,o,r,c;if(a="undefin",a+="ed",n||(n=this.chart.context),o=this.canvasStyle(i),!!o){e.A_p(132),e.F0D(1,5,9091,9091,9078),e.A_p(29),e.F0D(20,67440,60676),e.A_p(92),e.F0D(18,3288,8,18),e.k1h(33),e.G7m(8,6,4,3505),e.A_p(133),e.G7m(9,1234,1,8629,617),e.A_p(134),e.F0D(19,4,10,4),e.A_p(135),e.F0D(11,18,232,3941),e.k1h(99),e.G7m(368,15,51,14,1),e.A_p(34);var l=e.F0D(13,7,847,12,919844);e.k1h(5);var s=e.G7m(11,7);e.k1h(37),e.G7m(401,2809,401),e.k1h(51);var d=e.G7m(7,200,69,2992);e.k1h(23);var h=e.F0D(4,16,1,3879);e.A_p(5),e.G7m(2836,16),e.k1h(50);var p=e.G7m(366,12,5472);e.A_p(88),e.F0D(13,67191,9632,8,14),e.A_p(21),e.G7m(19,3749,67463),r=o.fontStyle+" "+o.fontWeight+(l<168.98?("9581"|s)==+"6511"?d:h<=p?!{}:!1:" ")+o.fontSize+" "+o.fontFamily,r.indexOf(a)==-1?n.font=r:(c="bad css style for",c+=" cla",c+="ss ",this.styles[i]=null,e.k1h(10),console.log(e.G7m(c,i)))}},t.ChartEngine.prototype.canvasColor=function(i,n){var e,a,o;n||(n=this.chart.context),e=this.canvasStyle(i),ot.c4P(),e&&(a=e.color,a||(a=this.defaultColor),ot.A_p(3),n.globalAlpha=ot.G7m("1",1),n.fillStyle=a,n.strokeStyle=a,o=e.opacity,typeof o!="undefined"&&(n.globalAlpha=o))},t.ChartEngine.prototype.getCanvasFontSize=function(i){var n,e,a;return n="1",n+="2",e=this.canvasStyle(i),ot.v95(),a=e.fontSize,a||(a=n),parseInt(t.stripPX(a),10)},t.ChartEngine.prototype.getCanvasColor=function(i){ot.v95();var n;return n=this.canvasStyle(i),n.color},t.ChartEngine.prototype.getDefaultColor=function(){var i,n,e,a,o;for(this.defaultColor="#000000",i=null,n=this.chart.container;!i||t.isTransparent(i);){if(e=getComputedStyle(n),!e)return;if(i=e.backgroundColor,t.isTransparent(i)&&(i="transparent"),n=n.parentNode,!n||!n.tagName)break}ot.v95(),i?(i=="transparent"&&(i="#FFFFFF"),this.containerColor=i,t.isTransparent(i)?this.defaultColor="#000000":(a=t.hsv(i),o=a[2],o>+"0.65"?this.defaultColor="#000000":this.defaultColor="#FFFFFF")):this.containerColor="#FFFFFF"}};ul=b=>{var t=ot,i;i=b.CIQ,i.ChartEngine.XAxis=function(n){for(var e in n)this[e]=n[e]},i.ChartEngine.XAxis.setPropertiesForInterval={year:(n,e,a,o)=>{n.level=Number(n.raw)%5===0?0:"1"^0,t.v95()},month:(n,e,a,o)=>{var r,c,l,s,d;if(r="boundar",r+="y",c=Number(n.raw),l=e.DT,s=l.getFullYear(),t.v95(),c===0?n.level=s%5===0?0:1:n.level=c%3===0?2:+"3",n.text=i.monthAsDisplay(c,!{},o),n.grid===r){d=" ",d+="'",n.boundaryOnlyText=c?n.text:s.toString(),t.A_p(86);var h=t.G7m(2,12,17,9,19);n.text+=d+s.toString().substring(h),c||(n.alwaysAsBoundary=!![])}},week:null,day:(n,e,a,o)=>{var r,c,l,s,d,h,p,u;if(r="b",r+="o",r+="und",r+="ary",c=e.DT,l=c.getDay(),s=c.getDate(),d=c.getMonth(),h=c.getFullYear(),n.grid===r){if(a&&a.isFirstMarketDayOfMonth(c)){p=" ",p+="'",u=i.monthAsDisplay(d,!1,o),t.A_p(136),n.text=t.G7m(p,0,u,h,"100"),n.boundaryOnlyText=d?u:h.toString(),n.alwaysAsBoundary=!!{},n.level=d?d%3==="0"*1?1:2:0;return}o.internationalizer?n.text=o.internationalizer.monthDay.format(c):(t.A_p(137),n.text=t.G7m(32,s,d,"1","/"))}a&&a.isFirstMarketDayOfWeek(c)||!a&&l===0?n.level=4:l>("0"|0)?n.level=6:n.level=7},minute:(n,e,a,o)=>{var r,c,l;r=e.DT,c=Number(n.raw)+(n.marketOpenOffset||0),t.A_p(3),l=[720,360,120,60,+"30",15,t.F0D("5",1)],n.level=l.length;for(var s="0"<<64;s<l.length;s++)if(c%l[s]===0){n.level=s;break}if(n.text=i.timeAsDisplay(e.DT,o,i.MINUTE),n.grid==="boundary"&&c===0)if(n.alwaysAsBoundary=!0,o.internationalizer)n.text=o.internationalizer.monthDay.format(r);else{t.k1h(59);var d=t.F0D(5,16,20,1);t.k1h(10);var h=t.G7m(178,3206);t.A_p(29),t.G7m(9,6919,11),t.A_p(86);var p=t.F0D(457,18,482,7226,7);t.k1h(37),t.G7m(166,2649,166),t.A_p(54);var u=t.F0D(3227,16,12,48410);t.A_p(80),t.F0D(5,7229,5,452,452),t.A_p(138),t.G7m(168228,177080,2,2,2),t.A_p(10);var g=t.G7m(558,8931);t.A_p(37);var f=t.G7m(8,8653,9912);n.text=r.getMonth()+d+(h!==873.08?p==u?g:"/":f)+r.getDate()}},second:(n,e,a,o)=>{t.v95();var r,c;r=[30,15,5],n.level=r.length;for(var l="0"*1;l<r.length;l++)if(Number(n.raw)%r[l]===("0"|0)){n.level=l;break}t.A_p(13);var s=t.F0D(140005,17,10,8750);t.A_p(37);var d=t.F0D(1,3,3342);t.k1h(2),t.F0D(166770,4,156952,7,19),t.A_p(67);var h=t.F0D(0,15,14);t.k1h(114);var p=t.G7m(8482,8476,8476,16);if(n.text=n.raw+(s<=43.96?d!==+"4519"?"482.49"*h!==p?"v":351.61:+"0xe1e":"s"),n.grid==="boundary"&&n.raw==0)if(c=e.DT,n.alwaysAsBoundary=!0,c.getHours())n.text=i.timeAsDisplay(c,o,i.MINUTE);else if(o.internationalizer)n.text=o.internationalizer.monthDay.format(c);else{t.A_p(67),t.F0D(8050,17,10),t.A_p(133);var u=t.F0D(9,174,3,3299,58);t.A_p(5),t.F0D(6257,12),t.A_p(120);var g=t.F0D(12,145084,4,1733324);t.A_p(80),t.G7m(7,4628,7,4637,4637),n.text=c.getMonth()+ +"1"+(u<=g?"/":"f")+c.getDate()}},millisecond:(n,e,a,o)=>{var r;r=[250,50,10],n.level=r.length;for(var c="0"<<64;c<r.length;c++)if(Number(n.raw)%r[c]===0){n.level=c;break}n.text=n.raw+"ms"},tick:(n,e,a,o)=>{t.v95(),n.text=i.timeAsDisplay(e.DT,o,i.MILLISECOND)}},i.ChartEngine.XAxis.lineBaseLevel=500,i.extend(i.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!![],displayBorder:!!{},displayGridLines:!0,fitLeftToRight:null,fitTight:null,maxLevelToDisplay:0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:"1"^0},!0),i.ChartEngine.XAxisLabel=function(n){var e,a;e="un",e+="def",e+="in",e+="ed",a="boundar",a+="y",typeof n=="number"?(this.hz=n,this.grid=arguments[1],this.text=arguments[2]):Object.assign(this,n),!this.level&&this.level!==0&&(this.level=this.grid===a?0:i.ChartEngine.XAxis.lineBaseLevel),typeof this.text===e&&(this.text=this.raw),t.v95(),this.text=this.text.toString()},i.ChartEngine.prototype.createXAxis=function(n){var e,a,o;return e="createXA",e+="xis",n.dataSegment.length<=0||n.xAxis.noDraw?null:(a=[n],o=this.runPrepend("createXAxis",a),o||(t.c4P(),this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?o=this.mainSeriesRenderer.createXAxis(n):this.createTickXAxisWithDates&&n.xAxis.fitLeftToRight?o=this.createTickXAxisWithDates(n):o=this.createSpacedDateXAxis(n),this.headsUpHR(),this.runAppend(e,a),o))},t.v95(),i.ChartEngine.prototype.createXAxisLabel=function(n){var e,a,o,r,c,l,s,d,h,p,u,g,f,w,v;e="to",e+="p",t.c4P(),arguments[0]instanceof i.ChartEngine.Panel&&(n={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[+"3"],color:arguments[+"4"],pointed:arguments[+"5"],padding:arguments[+"6"]}),a=n.panel,o=n.txt,r=n.x,c=n.backgroundColor,l=n.color,s=n.pointed,d=n.padding===0?0:n.padding||2,h=this.chart.context,p="st",p+="x-flo",p+="at-d",p+="ate",t.k1h(29);var m=t.F0D(6,20,12);u=this.getCanvasFontSize(p)+d*m,this.canvasFont(p,h);try{g=h.measureText(o).width+d*+"2"}catch{g=0}if(f=a.top+a.height-u-d,!(r+g/2<a.left||r-g/("2"-0)>a.right)){if(!s){if(r+g/2>a.right){t.A_p(113);var q=t.G7m(19,22,22,11,10);r=a.right-g/q}if(r-g/2<a.left){t.A_p(21);var x=t.G7m(7,12,82);r=a.left+g/x}}h.fillStyle=c,i.roundRect({ctx:h,x:r-g/2,top:f,width:g,height:u,radius:3,fill:!0}),w=a.bottom-a.yAxis.bottom-u,h.beginPath(),s?(t.A_p(5),h.moveTo(t.G7m(r,w),f),t.A_p(29),h.lineTo(r,t.G7m(w,f,1)),t.A_p(10),h.lineTo(t.F0D(r,w),f),h.closePath(),h.fill()):(h.moveTo(r,f),t.k1h(5),h.lineTo(r,t.G7m(f,w)),h.strokeStyle=c,h.stroke()),h.textBaseline=e,h.fillStyle=l||i.chooseForegroundColor(c),h.fillStyle==c&&(v="#",v+="00",v+="0",v+="000",c.toUpperCase()=="#FFFFFF"?h.fillStyle=v:h.fillStyle="#FFFFFF"),t.k1h(139),h.fillText(o,t.F0D(2,g,r,d,1),t.F0D(d,"2",64,f,t.A_p(140)))}}};fl=b=>{var t=ot,i,n;i="w",i+="idth",n=b.CIQ,n.createLabel=function(e){var a,o;t.v95(),a="mi",a+="d",a+="dle",e.ctx.textBaseline=a,e.ctx.fillStyle=e.color?e.color:n.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&(o="#F",o+="F",o+="FFF",o+="F",e.backgroundColor.toUpperCase()==o?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),e.ctx.textAlign="left"},n.roundRectArrow=function(e){var a;a="a",a+="rro",a+="w",n.roundRect(e,a)},n.semiRoundRect=function(e){var a,o,r;a=-+"623515129",t.v95(),o=-726291980,r=2;for(var c=1;t.f0X(c.toString(),c.toString().length,6655)!==a;c++)n.roundRect(e,"flush"),r+=2;t.Y9k(r.toString(),r.toString().length,28270)!==o&&n.roundRect(e,"")},n.rect=function(e){e.radius=0,n.roundRect(e)},n.noop=function(e){e.color=e.backgroundColor,t.c4P(),n.createLabel(e)},n.tickedRect=function(e){var a;n.rect(e),t.k1h(5);var o=t.G7m(17,15);a=Math.round(e.top+e.height/o)+.5,e.ctx.beginPath(),e.ctx.moveTo(e.x-2,a),t.c4P(),e.ctx.lineTo(e.x,a),e.ctx.stroke(),e.ctx.closePath()},n.roundRect=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;o="arr",o+="ow",r="f",r+="lush",c="undefi",c+="ned",arguments.length==="9">>64&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments["4"^0],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),l=e.stroke,s=e.x,d=e.top,h=e.width,p=e.height,u=e.radius,g=e.fill,f=e.ctx,typeof l=="undefined"&&(l=!!{}),typeof u===c&&(u=5,h<("0"^0)&&(u=-5)),w=h<0?u*-("1"*1):u,u&&!a&&(t.A_p(121),s=t.F0D(s,0,"1")),t.k1h(10),v=t.F0D(s,u),t.k1h(10),m=t.G7m(s,h),t.k1h(10),q=t.F0D(d,w),t.k1h(10),x=t.G7m(d,p),t.A_p(5),y=t.G7m(m,u),t.k1h(5),k=t.G7m(x,w),f.beginPath(),f.moveTo(v,d),f.lineTo(y,d),f.quadraticCurveTo(m,d,m,q),f.lineTo(m,k),f.quadraticCurveTo(m,x,y,x),f.lineTo(v,x),a==r?(f.lineTo(s,x),f.lineTo(s,d)):a==o?(t.k1h(5),f.quadraticCurveTo(s,x,t.G7m(s,u),k),S=h<0?1:-1,t.k1h(141),f.lineTo(t.F0D(2,S,s,p),t.G7m(2,d,p,t.k1h(47))),t.k1h(5),f.lineTo(t.F0D(s,u),q),f.quadraticCurveTo(s,d,v,d)):(f.quadraticCurveTo(s,x,s,k),f.lineTo(s,q),f.quadraticCurveTo(s,d,v,d)),f.closePath(),e.backgroundColor&&(f.fillStyle=e.backgroundColor),l&&f.stroke(),g&&f.fill(),e.txt&&n.createLabel(e)},n.ChartEngine.YAxis=function(e){t.v95();for(var a in e)this[a]=e[a];this.name||(this.name=n.uniqueID()),this.position=="none"&&(t.A_p(4),this.width=t.F0D("0",0))},n.extend(n.ChartEngine.YAxis.prototype,{name:null,high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,allowSharing:!!{},multiplier:null,bottom:null,top:null,height:null,left:null,renderers:[],studies:[],lowValue:null,highValue:null,semiLog:null,priceTick:null,printDecimalPlaces:null,yAxisPlotter:null,highlight:null},!!{}),t.A_p(3),n.ChartEngine.YAxis.defaultShadowBreaks=[[t.F0D("1000",64),2],[5,4],[.001,t.G7m(32,"8",t.A_p(72))]],t.k1h(5),n.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[t.F0D("1",0),+"4"]],n.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,n.ChartEngine.YAxis.prototype.max=null,n.ChartEngine.YAxis.prototype.min=null,n.ChartEngine.YAxis.prototype.decimalPlaces=null,n.ChartEngine.YAxis.prototype.idealTickSizePixels=null,n.ChartEngine.YAxis.prototype.minimumPriceTick=null,n.ChartEngine.YAxis.prototype.fractional=null,n.ChartEngine.YAxis.prototype.displayBorder=!!{},n.ChartEngine.YAxis.prototype.displayGridLines=!![],n.ChartEngine.YAxis.prototype.noDraw=null,n.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,n.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!!{},n.ChartEngine.YAxis.prototype.drawPriceLabels=!0,n.ChartEngine.YAxis.prototype.goldenRatioYAxis=!!{},n.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,n.ChartEngine.YAxis.prototype.justifyRight=null,n.ChartEngine.YAxis.prototype.flipped=!1,n.ChartEngine.YAxis.prototype.textBackground=!{},n.ChartEngine.YAxis.prototype.priceFormatter=null,n.ChartEngine.YAxis.prototype.bottomOffset=0,n.ChartEngine.YAxis.prototype.topOffset=0,t.v95(),n.ChartEngine.YAxis.prototype.initialMarginTop=10,n.ChartEngine.YAxis.prototype.initialMarginBottom=10,n.ChartEngine.YAxis.prototype.zoom=+"0",n.ChartEngine.YAxis.prototype.scroll=+"0",n.ChartEngine.YAxis.prototype.heightFactor=+"1",Object.defineProperty(n.ChartEngine.YAxis.prototype,i,{configurable:!0,enumerable:!![],get:function(){return t.v95(),this.position==="none"?(t.A_p(18),t.G7m("0",64)):this._dynamicWidth||this._width},set:function(e){this._width=e,this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),n.ChartEngine.YAxis.prototype.width=60,n.ChartEngine.YAxis.prototype.smallScreenWidth=50,n.ChartEngine.YAxis.prototype.textStyle=null,n.ChartEngine.YAxis.prototype.position=null,n.ChartEngine.YAxis.prototype.pretty=!![],n.ChartEngine.YAxis.prototype.increments=[1,+"2.5",+"5"],n.ChartEngine.YAxis.prototype.prettySemiLog=!![],n.ChartEngine.YAxis.prototype.shadowBreaks=n.ChartEngine.YAxis.defaultShadowBreaks,n.ChartEngine.YAxis.prototype.getYAxis=function(e){return t.c4P(),this},n.ChartEngine.YAxis.prototype.isShared=function(e,a){var o,r;if(o=this.studies.length,r=this.renderers.length,o>"1"<<32)return!![];if(r&&o)return!0;if(!r)return!1;if(r>+"1"&&a)return!0;for(var c=r-1;c>=("0"|0);c--)e.chart.seriesRenderers[this.renderers[c]].params.dependentOf&&r--;return t.k1h(142),t.G7m(1,r)},n.ChartEngine.YAxis.prototype.setBackground=function(e,a){var o;a||(a={}),a.color||(a.color="auto"),o=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],n.fillArea(e,o,{color:a.color,opacity:a.opacity})},n.ChartEngine.YAxis.prototype.setBreakpointWidth=function(e){var a;if(t.v95(),!!e){var{width:o,smallScreenWidth:r}=n.ChartEngine.YAxis.prototype;t.k1h(78),a=t.F0D(e,"break-sm"),this.width=a?r:o}},n.ChartEngine.prototype.getLabelOffsetInPixels=function(e,a){var o,r,c,l,s;if(t.c4P(),o="ro",o+="undRectArrow",r=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,this.yaxisLabelStyle==o&&!(r&&this.extendLastTick&&e.yaxisPaddingRight!==0)){c="s",c+="tx_ya",c+="xis",l=3,t.k1h(31);var d=t.G7m(13,11);return s=this.getCanvasFontSize(c)+l*d,t.k1h(39),t.G7m(s,.66)}return 0},n.ChartEngine.prototype.flipChart=function(e){var a;a="lay",a+="ou",a+="t",this.layout.flipped!=e&&(this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred(a),this.draw())},n.ChartEngine.prototype.calculateYAxisMargins=function(e){var a,o;if(a=this.chart,o=a.panel.yaxisLHS.concat(a.panel.yaxisRHS).includes(e)?a.yaxisMarginMultiplier:+"1",e.heightFactor){t.A_p(67);var r=t.F0D(14,3,16);e.zoom=e.height*(r-e.heightFactor)}e.zoom+=(e.initialMarginTop+e.initialMarginBottom)*o,t.v95(),t.k1h(135);var c=t.G7m(9,7,0,4);e.scroll=(e.initialMarginTop-e.initialMarginBottom)*o/("2"|c),e.zoom>e.height&&(e.zoom=0,e.scroll=0)},n.ChartEngine.prototype.resetDynamicYAxis=function(e){var a,o,r;if(!this.runPrepend("resetDynamicYAxis",arguments)){a=![],t.c4P();for(var c in this.panels)if(o=this.panels[c],!(e&&e.chartName&&o.chart.name!==e.chartName)&&!(!o.yaxisLHS||!o.yaxisRHS)){r=o.yaxisLHS.concat(o.yaxisRHS);for(var l=0;l<r.length;l++)r[l]._dynamicWidth&&(r[l]._dynamicWidth=NaN,a=!0)}a&&(!e||!e.noRecalculate)&&this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},n.ChartEngine.prototype.notifyBreakpoint=function(e){var a,o,r,c,l,s,d,h,p,u;a=-+"1031613777",o=1628256090,r=2;for(var g=+"1";t.Y9k(g.toString(),g.toString().length,92158)!==a;g++){if(c="b",c+="rea",c+="k-md",l="b",l+="re",l+="ak",l+="-md",this.chart.breakpoint!==e||~[l,c,"break-md"].includes(e))return;var{chart:f}=this;r+=+"2"}if(t.f0X(r.toString(),r.toString().length,47951)!==o){if(s="br",s+="eak",s+="-lg",this.chart.breakpoint===e||![s,"break-md","break-sm"].includes(e))return;var{chart:f}=this}var{dynamicYAxis:w}=f;d=n.ThemeHelper&&new n.ThemeHelper({stx:this}),this.clearStyles(),d&&d.update(this),f.breakpoint=e;for(var v in this.panels){h=this.panels[v],p=h.yaxisRHS.concat(h.yaxisLHS);for(var m=0;m<p.length;m++)u=p[m],u.setBreakpointWidth(e)}w&&this.resetDynamicYAxis({chartName:f.name})},n.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,a){var o,r,c,l,s,d;if(o=a.topOffset,r=a.bottomOffset,o+r>e.height&&(console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),a.bottomOffset=0,a.topOffset=0),!this.xaxisHeight&&this.xaxisHeight!==0){c=246894720,l=2099988216,s=2;for(var h="1"^0;t.f0X(h.toString(),h.toString().length,64773)!==c;h++)this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+("4"<<0),s+=2;if(t.Y9k(s.toString(),s.toString().length,"16030"^0)!==l){t.k1h(143);var p=t.F0D(6,11,15,84);this.xaxisHeight=this.getCanvasFontSize("")/p}(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)}d=this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel,d&&(r+=this.xaxisHeight),a.top=e.top+o,a.bottom=e.bottom-r},n.ChartEngine.prototype.plotYAxisGrid=function(e){var a,o;this.runPrepend("plotYAxisGrid",arguments)||(a=this.getBackgroundCanvas().context,t.v95(),o=e.yAxis,o.yAxisPlotter&&o.yAxisPlotter.draw(a,"grid"),this.runAppend("plotYAxisGrid",arguments))},n.ChartEngine.prototype.plotYAxisText=function(e){var a,o,r,c,l;if(a="alph",a+="abetic",this.runPrepend("plotYAxisText",arguments))return;for(o=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",o),this.canvasColor("stx_yaxis",o),o.textBaseline="middle",r=e.yaxisLHS,c="0"*1;c<r.length;c++)o.textAlign="right",s(r[c]);for(r=e.yaxisRHS,c=0;c<r.length;c++)l="l",l+="e",l+="f",l+="t",o.textAlign=l,s(r[c]);o.textAlign="left";function s(d){!d.yAxisPlotter||d.noDraw||!d.width||(t.v95(),d.justifyRight?o.textAlign="right":d.justifyRight===!1&&(o.textAlign="left"),d.yAxisPlotter.draw(o,"text"))}o.textBaseline=a,this.runAppend("plotYAxisText",arguments)},n.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e,a){return a&&(e/=a),e<+"0.0001"?8:(t.c4P(),e<.01?4:e<.1?2:e<1?1:0)},n.ChartEngine.prototype.formatYAxisPrice=function(e,a,o,r,c){t.c4P();var l,s,d,h,p,u,g,f;if(e===null||typeof e=="undefined"||isNaN(e))return"";if(a||(a=this.chart.panel),l=r||a.yAxis,s=o,!s&&s!==0&&(s=l.printDecimalPlaces),!s&&s!==0&&(s=this.decimalPlacesFromPriceTick(l.priceTick,l.idealTickSizePixels)),d=l==a.chart.yAxis?+"20000":1e3,l.priceTick>=d){e=e.toFixed(s),h=-1954339157,p=-+"1631358111",u=2;for(var w=1;t.f0X(w.toString(),w.toString().length,10545)!==h;w++)return n.condenseInt(e);if(t.f0X(u.toString(),u.toString().length,70522)!==p)return n.condenseInt(e)}return g=this.internationalizer,g&&c!==!{}?(f=g.priceFormatters.length,s>=f&&(t.k1h(5),s=t.F0D(f,1)),e=g.priceFormatters[s].format(e)):e=e.toFixed(s),e},n.ChartEngine.prototype.calculateYAxisRange=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m;if(o==Number.MAX_VALUE&&(o=0,r=+"0"),c=e.height,l=null,s=null,this.adjustYAxisHeightOffset(e,a),a.height=a.bottom-a.top,d=Math.round(Math.abs(c/5)),t.v95(),a.zoom>=0&&c-Math.abs(a.scroll)<d){t.A_p(144);var q=t.F0D(0,2,2);t.A_p(37);var x=t.F0D(1,16,16);a.scroll=(c-d)*(a.scroll<0?q:"1">>x)}if(h=e.chart.name===e.name&&e.yAxis.name===a.name,p=o>0&&(this.layout.semiLog||this.layout.chartScale=="log")&&!e.chart.isComparison&&this.layout.aggregationType!="pandf",o||o===0){if(r-o===+"0")u=Math.pow(10,-(o.toString()+".").split(".")[+"1"].length),u==1&&(u=100),t.k1h(10),l=t.G7m(o,u),t.k1h(5),s=t.G7m(o,u);else if(h&&p&&(r||r===0))g=Math.log(o)/Math.LN10,f=Math.log(r)/Math.LN10,l=Math.pow(10,f),s=Math.pow(10,g);else{l=r,w=-603609729,v=1544652923,m=2;for(var y=1;t.f0X(y.toString(),y.toString().length,66531)!==w;y++)s=o,m+=2;t.Y9k(m.toString(),m.toString().length,2660)!==v&&(s=o)}a.high=l,a.low=s}(a.max||a.max===0)&&(a.high=a.max),(a.min||a.min===0)&&(a.low=a.min),a.shadow=a.high-a.low,h&&(a.semiLog!=p&&(this.clearPixelCache(),a.semiLog=p),a.flipped=this.layout.flipped)},n.ChartEngine.prototype.renderYAxis=function(e){var a,o,r,c,l,s,d,h,p,u;if(a="yAx",a+="i",t.c4P(),a+="s",o="re",o+="boot d",o+="r",o+="aw",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error(o);this.rendererAction(e,a);var{context:g}=this.getBackgroundCanvas(e);for(var f in this.panels)if(r=this.panels[f],r.chart==e){for(c=r.yaxisRHS.concat(r.yaxisLHS),l=+"0";l<c.length;l++)s=c[l],this.calculateYAxisRange(r,s,s.lowValue,s.highValue),d=n.getFn("Studies.getYAxisParameters",{})(this,s),d.yAxis=s,this.createYAxis(r,d),this.drawYAxis(r,d),n.getFn("Studies.doPostDrawYAxis")(this,s);for(l=+"0";l<c.length;l++)s=c[l],s.dropzone&&(h=this.canvasStyle("stx-subholder dropzone left"),h&&(p="al",p+="l",g.save(),g.strokeStyle=h.borderLeftColor,g.lineWidth=parseFloat(h.borderLeftWidth),g.beginPath(),s.dropzone==p?g.strokeRect(s.left,s.top,s.width,s.height):(u=s.left+(s.dropzone=="left"?0:s.width),g.moveTo(u,s.top),g.lineTo(u,s.top+s.height),g.stroke()),g.restore()));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},n.ChartEngine.prototype.updateFloatHRLabel=function(e){var a,o,r,c,l,s,d,h,p,u,g,f;if(!!this.floatCanvas&&(a=e.yaxisLHS.concat(e.yaxisRHS),o=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&n.clearCanvas(this.floatCanvas,this),!(this.controls.crossX&&this.controls.crossX.style.display=="none"))){if(this.controls.crossY){r=e.left,c=e.width,l=7,this.yaxisLabelStyle=="roundRectArrow"&&(c-=l,r>"0"-0&&(r+=l),e.yaxisLHS.length&&e.yaxisRHS.length&&(c-=l)),t.A_p(5),s=-t.F0D("665289509",0),d=-1640775343,h=+"2";for(var w=+"1";t.Y9k(w.toString(),w.toString().length,"82436"*1)!==s;w++)t.A_p(39),this.controls.crossY.style.left=t.F0D(r,"px"),t.k1h(30),this.controls.crossY.style.width=t.G7m(c,"px"),t.k1h(4),h+=t.G7m("2",0);t.Y9k(h.toString(),h.toString().length,89017)!==d&&(t.A_p(10),this.controls.crossY.style.left=t.F0D(r,"px"),t.A_p(10),this.controls.crossY.style.width=t.F0D(c,"px"))}for(var v=0;v<a.length;v++)p=a[v],u=this.transformedPriceFromPixel(o,e,p),!isNaN(u)&&((p.min||p.min===0)&&u<p.min||(p.max||p.max===0)&&u>p.max||(g=null,p!==e.chart.yAxis&&(g=p.decimalPlaces),p.priceFormatter?(!g&&g!==+"0"&&(g=this.decimalPlacesFromPriceTick(p.priceTick,p.idealTickSizePixels)),u=p.priceFormatter(this,e,u,g)):u=this.formatYAxisPrice(u,e,g,p),f=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,u,o,f.backgroundColor,f.color,this.floatCanvas.context,p),this.floatCanvas.isDirty=!0))}},n.ChartEngine.prototype.whichYAxis=function(e,a,o){var r,c,l;if(typeof a=="undefined"&&(a=this.cx),typeof o=="undefined"&&(o=this.cy),r=this.whichPanel(o),t.c4P(),e&&e==r){c=e.yaxisLHS.concat(e.yaxisRHS);for(var s=0;s<c.length;s++)if(l=c[s],l.left<=a&&l.left+l.width>=a)return l}return null},n.ChartEngine.prototype.yaxisMatches=function(e,a){return!e||!e.getYAxis||!a||!(a instanceof n.ChartEngine.YAxis)?!{}:e.getYAxis(this).name==a.name},n.ChartEngine.prototype.createYAxisLabel=function(e,a,o,r,c,l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S;if(d="s",t.v95(),d+="tx",d+="_y",d+="axis",h=s||e.yAxis,!(h.drawPriceLabels===!1||h.noDraw||!h.width)){p=l||this.chart.context,t.A_p(72),u=t.G7m(32,"3"),t.A_p(5);var A=t.F0D(13,11);g=this.getCanvasFontSize("stx_yaxis")+u*A,this.canvasFont(d,p),f=h.displayBorder===null?e.yAxis.displayBorder:h.displayBorder,this.axisBorders===!1&&(f=!1),this.axisBorders===!0&&(f=!0),w=f?"3"<<0:0,v=+"3";try{t.A_p(0);var _=t.G7m(1,6,8);m=p.measureText(a).width+w+u*_}catch{m=h.width}if(y=h.position===null?e.chart.yAxis.position:h.position,y==="left"?(x=h.left+h.width,h.width<0&&(x-=h.width+m),v=-3,h.justifyRight===!{}?(p.textAlign="left",m=h.width*-("1"^0),q=x-h.width+u):(p.textAlign="right",t.k1h(16),m=t.G7m(m,1),t.A_p(29),q=t.F0D(u,x,w))):(x=h.left,h.width<0&&(x+=h.width-m),h.justifyRight?(p.textAlign="right",m=h.width,q=h.left+m-u):(p.textAlign="left",t.A_p(50),q=t.G7m(x,u,w))),o+g/2>h.bottom){t.A_p(36);var T=t.G7m(11,11,1,1);o=h.bottom-g/T}if(o-g/("2"-0)<h.top){t.A_p(145);var P=t.F0D(1,1,7,9);o=h.top+g/P}typeof n[this.yaxisLabelStyle]=="undefined"&&(this.yaxisLabelStyle="roundRectArrow"),k=this.yaxisLabelStyle,h.yaxisLabelStyle&&(k=h.yaxisLabelStyle),S={ctx:p,x,y:o,top:o-g/2,width:m,height:g,radius:v,backgroundColor:r,fill:!0,stroke:!1,margin:{left:q-x,top:1},txt:a,color:c},n[k](S)}},n.ChartEngine.prototype.getCurrentHRParams=function(){var e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(o=this.mainSeriesRenderer||{},!o.noCurrentHR){var{highLowBars:y}=o;r={};for(var k in this.charts)if(c=this.charts[k],l=c.panel,s=l.yAxis,!l.hidden&&!(s.drawCurrentPriceLabel===!{}||s.noDraw)&&!!o.params){var{whichSet:S}=s;if(S||(S="dataSet"),!(this.isHistoricalModeSet&&S!=="dataSegment")){if(d=c[S].length,h=this.layout.candleWidth,S=="dataSegment")for(;d>(c.width-this.micropixels+h/2+1)/h;)d--;if(d&&c[S][d-1]){p="Cl",p+="o",p+="s",p+="e",u=c.defaultPlotField,(!u||y)&&(u=p),g=void+"0",f=void 0;do if(g=c[S][--d][u],f=g,d===0)break;while(f==null);S=="dataSet"&&c.currentQuote?f=c.currentQuote[u]:c[S].length>=2&&(t.k1h(5),w=c[S][t.F0D(d,1)],w&&(g=w[u])),f<g?(e=this.canvasStyle("stx_current_hr_down").backgroundColor,a=this.canvasStyle("stx_current_hr_down").color):(v="s",v+="tx_current_hr",v+="_up",e=this.canvasStyle(v).backgroundColor,a=this.canvasStyle("stx_current_hr_up").color),c.transformFunc&&(f=c.transformFunc(this,c,f)),m=void+"0",q=Math.max(l.yAxis.printDecimalPlaces,l.chart.decimalPlaces),(s.maxDecimalPlaces||s.maxDecimalPlaces===0)&&(q=Math.min(q,s.maxDecimalPlaces)),s.priceFormatter?m=s.priceFormatter(this,l,f,q):m=this.formatYAxisPrice(f,l,q),x=this.pixelFromTransformedValue(f,l),x=Math.floor(x)+.5,r[k]={panel:l,txt:m,y:x,backgroundColor:e,color:a}}}}return r}},n.ChartEngine.prototype.drawCurrentHR=function(){var e,a;if(e="drawCurre",e+="nt",e+="HR",a="drawC",a+="urre",a+="n",t.v95(),a+="tHR",!this.runPrepend(a,arguments)){var{currentHRParams:o}=this;if(o)for(var r in o){var{panel:c,txt:l,y:s,backgroundColor:d,color:h}=o[r];this.createYAxisLabel(c,l,s,d,h)}this.runAppend(e,arguments)}},n.ChartEngine.prototype.drawCurrentPriceLine=function(){if(!!(this.preferences.currentPriceLine===!!{}&&this.isHome())&&!this.runPrepend("drawCurrentPriceLine",arguments)){var{currentHRParams:e}=this;if(e)for(var a in e){var{panel:o,y:r,backgroundColor:c}=e[a];this.plotLine(o.left,o.right,r,r,c,"line",o.chart.context,o,{pattern:"dashed",lineWidth:"1"<<96,opacity:.8})}this.runAppend("drawCurrentPriceLine",arguments)}},n.ChartEngine.prototype.getYAxisByName=function(e,a){t.c4P();var o;if(typeof e=="string"&&(e=this.panels[e]),!(!e||!a)){if(a===e.yAxis.name)return e.yAxis;for(o=0;e.yaxisLHS&&o<e.yaxisLHS.length;o++)if(e.yaxisLHS[o].name===a)return e.yaxisLHS[o];for(o=0;e.yaxisRHS&&o<e.yaxisRHS.length;o++)if(e.yaxisRHS[o].name===a)return e.yaxisRHS[o]}},n.ChartEngine.prototype.getYAxisByField=function(e,a){var o,r,c,l,s,d,h;if(t.c4P(),a){for(o in this.layout.studies)if(r=this.layout.studies[o],r.panel==e.name&&r.outputMap&&r.outputMap.hasOwnProperty(a))return r.getYAxis(this);for(o in this.chart.seriesRenderers){l=this.chart.seriesRenderers[o];for(var p=0;p<l.seriesParams.length;p++)if(s="-",s+="-",s+=">",l.params.panel==e.name){if(d=l.seriesParams[p],h=d.field,!h&&!l.highLowBars&&(h=this.defaultPlotField||"Close"),d.symbol&&d.subField&&(h+="-->"+d.subField),a==h)return l.params.yAxis||e.yAxis;d.field&&d.field==a.split(s)[0]&&(c=l.params.yAxis||e.yAxis)}}if(c)return c}},n.ChartEngine.prototype.deleteYAxisIfUnused=function(e,a){var o,r,c;if(typeof e=="string"&&(e=this.panels[e]),!a||!e)return;t.c4P();for(var l=0;l<a.renderers.length;l++)if(o=this.chart.seriesRenderers[a.renderers[l]],o&&o.params.panel==e.name)return;if(a.name===e.yAxis.name&&e.yaxisRHS.length+e.yaxisLHS.length===1)return;for(r=0;e.yaxisRHS&&r<e.yaxisRHS.length;r++)e.yaxisRHS[r]===a?e.yaxisRHS[r]=null:c||(c=e.yaxisRHS[r]);for(r=0;e.yaxisLHS&&r<e.yaxisLHS.length;r++)e.yaxisLHS[r]===a?e.yaxisLHS[r]=null:c||(c=e.yaxisLHS[r]);e.yaxisRHS=e.yaxisRHS.filter(s),e.yaxisLHS=e.yaxisLHS.filter(s);function s(d){return t.k1h(79),t.v95(),t.G7m(d,null)}c&&a.name===e.yAxis.name&&(e.yAxis=c),this.calculateYAxisPositions()},n.ChartEngine.prototype.addYAxis=function(e,a){var o,r,c,l,s,d;if(o="l",o+="e",t.c4P(),o+="f",o+="t",r="l",r+="e",r+="f",r+="t",typeof e=="string"&&(e=this.panels[e]),!(!a||!e)){for(e.yaxisLHS||(c="l",c+="e",c+="ft",e.yaxisLHS=[],e.yaxisRHS=[],e.yAxis.position=="left"||e.yAxis.position!="right"&&e.chart.panel.yAxis.position==c?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),s=[],d=e.yaxisLHS,l=d.length-1;l>=0;l--)if(d[l].name===a.name){if(a.position!="right")return d[l];s=d.splice(l,1)}for(d=e.yaxisRHS,l=d.length-1;l>=0;l--)if(d[l].name===a.name){if(a.position!="left")return d[l];s=d.splice(l,1)}return a.position===r||a.position!="right"&&e.chart.panel.yAxis.position==o?e.yaxisLHS.unshift(a):e.yaxisRHS.push(a),a.setBreakpointWidth(this.chart.breakpoint),a.height=e.yAxis.height,a.idealTickSizePixels=null,s[0]==e.yAxis&&(e.yAxis=a),a.lockScale||this.calculateYAxisMargins(a),"scroll"in a||(a.scroll=0),a}},n.ChartEngine.prototype.calculateYAxisPositions=function(){var e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;e=[];for(var A in this.charts)this.charts[A].hidden||this.charts[A].panel.hidden||e.push(A);for(var _ in this.panels)a=this.panels[_],!(a.name===a.chart.name||a.hidden)&&e.push(_);for(o=0,r=0,l=0;l<e.length;l++)if(h="n",h+="o",h+="n",h+="e",s=this.panels[e[l]],!!s){for(s.yaxisLHS||(s.yaxisLHS=[],s.yaxisRHS=[]),p=s.yaxisLHS,u=s.yaxisRHS,g=s.yAxis.position,(!g||g==h)&&(g=s.chart.yAxis.position||"right"),!p.length&&!u.length&&(f="l",f+="e",f+="f",f+="t",g==f?p.push(s.yAxis):u.push(s.yAxis)),w=[],v=[],c=p.length-1;c>=0;c--)m="l",m+="e",m+="f",m+="t",(p[c].position=="right"||p[c].position!=m&&g=="right")&&(w=w.concat(p.splice(c,+"1")));for(c=u.length-1;c>="0"<<32;c--)q="l",q+="ef",q+="t",(u[c].position=="left"||u[c].position!="right"&&g==q)&&(v=v.concat(u.splice(c,1)));for(s.yaxisLHS=v.concat(p),s.yaxisRHS=u.concat(w),!s.yAxis.width&&s.yAxis.width!==0&&(s.yAxis.width=this.yaxisWidth),s.yaxisTotalWidthRight=+"0",s.yaxisTotalWidthLeft=0,x=s.yaxisLHS.concat(s.yaxisRHS),c=+"0";c<x.length;c++)y="l",y+="ef",y+="t",d=x[c],!(d.noDraw||!d.width)&&(d.position=="left"||g==y&&!d.position?s.yaxisTotalWidthLeft+=d.width:s.yaxisTotalWidthRight+=d.width);s.yaxisTotalWidthLeft>o&&(o=s.yaxisTotalWidthLeft),s.yaxisTotalWidthRight>r&&(r=s.yaxisTotalWidthRight)}for(t.c4P(),l=0;l<e.length;l++)if(s=this.panels[e[l]],!!s){for(k=s.name===s.chart.name,S=o,c=s.yaxisLHS.length-("1"^0);c>=0;c--)d=s.yaxisLHS[c],!d.noDraw&&(S-=d.width,d.left=S);for(S=this.width-r,c="0"*1;c<s.yaxisRHS.length;c++)d=s.yaxisRHS[c],!d.noDraw&&(d.left=S,S+=d.width);typeof this.yaxisLeft!="undefined"&&(s.chart.yaxisPaddingRight=this.yaxisLeft),s.yaxisCalculatedPaddingRight=r,(s.chart.yaxisPaddingRight||s.chart.yaxisPaddingRight===0)&&(s.yaxisCalculatedPaddingRight=s.chart.yaxisPaddingRight),s.yaxisCalculatedPaddingLeft=o,(s.chart.yaxisPaddingLeft||s.chart.yaxisPaddingLeft===0)&&(s.yaxisCalculatedPaddingLeft=s.chart.yaxisPaddingLeft),k||s.chart.panel.hidden?(s.left=s.yaxisCalculatedPaddingLeft,s.right=this.width-s.yaxisCalculatedPaddingRight):(s.left=s.chart.panel.left,s.right=s.chart.panel.right),s.width=s.right-s.left,s.handle&&(s.handle.style.left=s.left+"px",s.handle.style.width=s.width+"px"),(k||s.chart.panel.hidden)&&(s.chart.panel.left=s.chart.left=s.left,s.chart.panel.right=s.chart.right=s.right,s.chart.panel.width=s.chart.width=Math.max(s.right-s.left,0))}this.setMaxTicks(this.chart.maxTicks),this.adjustPanelPositions()},n.ChartEngine.prototype.getYAxisCurrentPosition=function(e,a){var o,r;if(!e.width)return"none";o=a.yaxisLHS;for(var c=+"0";c<o.length;c++)if(r="le",r+="f",r+="t",o[c].name==e.name)return r;return"right"},n.ChartEngine.prototype.setYAxisPosition=function(e,a){e.position=a,e.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),t.v95(),this.draw()},n.ChartEngine.prototype.electNewYAxisOwner=function(e){var a,o;a=e.studies[0],(!a||a==e.name)&&(a=e.renderers[0]),(!a||a==e.name)&&(a=e.studies[1]),a||(a=e.renderers[+"1"]);for(var r=0;r<e.studies.length;r++)o=this.layout.studies[e.studies[r]],o.parameters&&o.parameters.yaxisDisplayValue==e.name&&(o.parameters.yaxisDisplayValue=a);return a}};gl=b=>{var t=ot;t.c6Y=function(e){if(t&&e)return t.P8n(e)},t.f70=function(e){if(t)return t.P8n(e)};var i,n;i=b.CIQ,n="valid",i.valid=0,i.ChartEngine.prototype.consolidatedQuote=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;if(this.runPrepend("consolidatedQuote",arguments))return e;if(!e||!e.length)return[];if(o=this.layout,r=this.chart,c=this,!r.market)return l="Canno",l+="t consolidate: no market iterator available.  Ple",l+="ase make sure market module is enabled.",console.log(l),e;for(s=o.periodicity,d=o.interval,h=o.timeUnit,a||(a={}),a.periodicity&&a.interval&&(s=a.periodicity,d=a.interval,h=a.timeUnit),t.A_p(18),p=t.F0D("1",64),u=i.ChartEngine.isDailyInterval(d),!u&&r.useInflectionPointForIntraday&&(p=s),g=r.inflectionPoint,(!g||g<e[0].DT)&&(g=new Date(+e["0">>0].DT),!u&&!r.market.market_def&&(t.k1h(18),g.setHours(t.G7m("0",64),-g.getTimezoneOffset(),0,0))),f=[],w={begin:g,interval:d,multiple:s/p,timeUnit:h},d=="tick"&&(t.A_p(4),g.setHours(t.F0D("0",0),0,0,0),w={begin:g,interval:"day",multiple:1}),v=r.market.newIterator(i.clone(w));v.previous(p)>e["0"^0].DT;);function A(_,T,P){var E,z,U,N,C,D;T||(T={DT:P,Date:i.yyyymmddhhmmssmmm(P),consolidatedTicks:0}),T.displayDate||c.setDisplayDate(T),E=1,o.adj&&_.Adj_Close&&(E=_.Adj_Close/_.Close),z=_.High||_.Close,(z||z===0)&&z*E>(T.High||-Number.MAX_VALUE)&&(t.k1h(39),T.High=t.G7m(z,E)),U=_.Low||_.Close,(U||U===0)&&U*E<(T.Low||Number.MAX_VALUE)&&(t.k1h(39),T.Low=t.G7m(U,E)),N=_.Open||_.Close,(N||N===0)&&!T.Open&&T.Open!==("0"|0)&&(t.k1h(39),T.Open=t.G7m(N,E)),_.Volume!==void 0&&(T.Volume=(T.Volume||0)+_.Volume),_.Close!==void 0&&_.Close!==null&&(T.Close=_.Close*E),_.Adj_Close!==void 0&&_.Adj_Close!==null&&(T.Adj_Close=_.Adj_Close),T.ratio=E;for(var F in _)C="A",C+="skL",C+="2",D="Bi",D+="d",_[F]&&_[F].Close!==void 0?T[F]=A(_[F],T[F],P):F in T?[D,"BidL2","Ask",C].indexOf(F)>-("1"<<64)&&(T[F]=_[F]):T[F]=_[F];return T.consolidatedTicks++,T}for(m=v.previous(p),q=v.next(p),x=0,y=0;x<e.length;){if(k=e[x],k.DT<m){console.log("Warning: out-of-order quote in dataSet, disregarding: "+k.DT),x++;continue}else if(k.DT>=q){if(m=q,q=v.next(p),!f[y])continue}else if(d=="tick"&&k.consolidatedTicks>0){f[y]=k,x++;continue}else if(!f[y]||d!="tick"||f[y].consolidatedTicks<s){S=A(k,f[y],d=="tick"?k.DT:m),S&&(f[y]=S),x++;continue}y++}return this.runAppend("consolidatedQuote",arguments),f},i[t.R1r("c577")?"ChartEngine":""][t.G14("b889")?"":"prototype"][t.M2S("962b")?"":"createDataSet"]=function(e,a,o){t.E4f=function(ht){if(t.v95(),t&&ht)return t.P8n(ht)},t.p0j=function(ht){if(t&&ht)return t.l5q(ht)},t.n5Q=function(ht){if(t.v95(),t&&ht)return t.l5q(ht)};var r=t.h71("9b7c")?1171946053:1452460202,c=-(t.v2D("272c")?1326940803:1978177204),l=t.f70("88b4")?401467078:470785309;if(!(t.c7G(t.n5Q("f9a7")?0:4,!!t.w_r("452d"),146033)!==r&&t.W0S(0,!1,t.p0j("e925")?367628:191311)!==c&&t.c7G(15,!!t.P5R("83f3"),480865)!==l)){let ht=function(){t.h$s=function(Ht){if(t.c4P(),t&&Ht)return t.l5q(Ht)},t.v95();var pt=736490629,ut=716374619,mt=68841078;if(!(t.W0S(0,!t.h$s("52cc"),t.E4f("5bd9")?279633:742409)!==pt&&t.W0S(0,!1,592248)!==ut&&t.W0S(15,!t.c6Y("2853"),596702)!==mt)){t.U0J=function(Ht){if(t)return t.P8n(Ht)};var gt,bt,yt,qt,St,Tt,wt,Ct;if(gt=t.e6L("faf6")?"":"local",gt+="ho",gt+=t.U0J("1d9e")?"st":"",bt="lesf",yt="t",qt="s",yt+="o",qt+="e",St=["127.0.0.1",gt,"zuminternet.com"],qt+=bt.charAt(0),yt+="p",qt+=bt.charAt(3),window[yt]==window[qt])return i[n]===0;if(St.length){Tt=i.getHostName(document.referrer),wt=!1;for(var Rt=0;Rt<St.length;Rt++)Ct=St[Rt],Tt.indexOf(Ct)!=-1&&(wt=!!{});if(!wt)return!{}}return i[n]===0}};var dt=ht;t.e6L=function(pt){if(t)return t.P8n(pt)};var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G;if(o||(o={}),s=this.chart,d=[e,s,Object.assign({},o)],this.runPrepend("createDataSet",d))return;if(p=[],u=[],g=o.appending,s.dataSet||(s.dataSet=[]),f=s.dataSet.length,g&&(p=s.dataSet),s.currentQuote=null,s.dataSet=[],g||(s.tickCache={}),w=s.masterData,w||(w=this.masterData),!w||!w.length){v="creat",v+="e",v+="DataSe",v+="t",this.runAppend(v,d);return}if(p.length){for(m=p.pop();m.futureTick&&p.length;)m=p.pop(),f--;for(q=o.appendToDate;p.length&&!(m.DT<q);)m=p.pop();for((!q||q>m.DT)&&(q=m.DT);p.length&&!(p[p.length-("1">>64)].DT<q);)p.pop();t.k1h(10);var Y=t.G7m(0,1);for(x=w.length-Y;x>="0"<<64&&w[x].DT>=q;)x--;t.k1h(10),h=w.slice(t.G7m(x,1))}else h=[].concat(w);if(!ht())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,h),!this.chart.hideDrawings){for(y="0"-0;y<this.drawingObjects.length;y++)k="p",k+="roje",k+="ction",this.drawingObjects[y].name==k&&i.getFn("Drawing.printProjection")(this,this.drawingObjects[y],h);this.activeDrawing&&this.activeDrawing.name=="projection"&&i.getFn("Drawing.printProjection")(this,this.activeDrawing,h)}for(t.k1h(39),y=t.G7m("0",1),S=-Number.MAX_VALUE,A=Number.MAX_VALUE,T=0,P=e||this.dontRoll,E=this.layout,z=i.ChartEngine.isDailyInterval(E.interval);!(T>=h.length);){if(!(this.dontRoll&&(E.interval=="week"||E.interval=="month"))&&this.extendedHours&&this.extendedHours.filter&&s.market.market_def&&(C=h[T],z?N=!s.market.isMarketDate(C.DT):(!U||U<=C.DT)&&(D="ge",D+="tNextClo",D+="se",F=s.market.getSession(C.DT),N=F!==""&&(!E.marketSessions||!E.marketSessions[F]),U=s.market[N?"getNextOpen":D](C.DT)),N)){T++;continue}_={};for(var it in h[T])_[it]=h[T][it];h[T]=_,_.ratio=1,E.adj&&_.Adj_Close&&(_.ratio=_.Adj_Close/_.Close),_.ratio!="1">>64&&(_.Open&&(_.Open=Number((_.Open*_.ratio).toFixed(8))),_.Close&&(_.Close=Number((_.Close*_.ratio).toFixed(8))),_.High&&(_.High=Number((_.High*_.ratio).toFixed(8))),_.Low&&(_.Low=Number((_.Low*_.ratio).toFixed(8)))),u[y++]=h[T++]}for((E.periodicity>+"1"||!P&&(E.interval=="week"||E.interval=="month"))&&(u=this.consolidatedQuote(u)),M={},y=+"0";y<u.length;y++){_=u[y],y>0?(_.iqPrevClose=u[y-1].Close,!_.iqPrevClose&&_.iqPrevClose!==+"0"&&(_.iqPrevClose=u[y-1].iqPrevClose)):p.length?(_.iqPrevClose=p[p.length-1].Close,!_.iqPrevClose&&_.iqPrevClose!==+"0"&&(_.iqPrevClose=p[p.length-1].iqPrevClose)):_.iqPrevClose=_.Close,"High"in _&&_.High>S&&(S=_.High),"Low"in _&&_.Low<A&&(A=_.Low);for(var rt in s.series)if(I=s.series[rt].parameters.symbol,L=_[I],L&&typeof L=="object"){if(y>0)L.iqPrevClose=M[rt];else if(p.length){for(var lt=p.length-1;lt>=0;lt--)if(O=p[lt][I],O&&(O.Close||O.Close===0)){L.iqPrevClose=O.Close;break}}else L.iqPrevClose=L.Close;(L.Close||L.Close===0)&&(M[rt]=L.Close),L.ratio=1,E.adj&&L.Adj_Close&&(L.ratio=L.Adj_Close/L.Close),L.ratio!="1">>64&&(L.Open&&(L.Open=Number((L.Open*L.ratio).toFixed(8))),L.Close&&(L.Close=Number((L.Close*L.ratio).toFixed(8))),L.High&&(L.High=Number((L.High*L.ratio).toFixed(8))),L.Low&&(L.Low=Number((L.Low*L.ratio).toFixed(8))))}}if(B=this.preferences.whitespace/this.layout.candleWidth,R=s.scroll>=s.maxTicks,R&&(s.spanLock=![]),s.defaultChartStyleConfig={type:E.chartType},H=E.aggregationType,H&&H!="ohlc"&&(i.ChartEngine.calculateAggregation?(s.defaultChartStyleConfig.type=H,(!g||!s.state.aggregation)&&(s.state.aggregation={}),u=i.ChartEngine.calculateAggregation(this,H,u,p)):console.log("Aggregation code is not loaded/enabled!")),s.spanLock=s.scroll>0&&s.scroll<s.maxTicks-B,W=R||s.lockScroll||s.spanLock||this.isHistoricalModeSet,X=u.length-(f-p.length),g||(X=0),X&&(s.spanLock&&X+s.scroll>=s.maxTicks-B?s.spanLock=!1:(W||X<0)&&(s.scroll+=X,this.grabStartScrollX+=X,this.swipe&&(this.swipe.scroll+=X))),this.transformDataSetPost&&this.transformDataSetPost(this,u,A,S),Z=this.maxDataSetSize,Z&&p.length+u.length>Z&&(u.length<Z?p=p.slice(u.length-Z):p=[],u=u.slice(-Z)),s.scrubbed||(s.scrubbed=[]),p.length)for(j=p[p.length-1].DT;s.scrubbed.length&&s.scrubbed[s.scrubbed.length-1].DT>j;)s.scrubbed.pop();else s.scrubbed=[];for(s.state.studies||(s.state.studies={}),s.state.studies.startFrom=s.scrubbed.length,Q=[],y=0;y<u.length;y++)et=u[y],(et.Close||et.Close===+"0"||et.DT>Date.now())&&Q.push(et);s.scrubbed=s.scrubbed.concat(Q),(!g||!s.state.calculations)&&(s.state.calculations={}),this.calculateATR(s,20,Q),this.calculateMedianPrice(s,Q),this.calculateTypicalPrice(s,Q),this.calculateWeightedClose(s,Q),this.calculateOHLC4(s,Q);for(V in this.plugins)K=this.plugins[V],K.createDataSet&&K.createDataSet(this,s,u,p.length);for(s.dataSet=p.concat(u),s.pixelCacheExpired=!![],V=p.length;V<s.dataSet.length;V++)s.dataSet[V].tick=V;for(s.whiteSpaceFutureTicks=0,tt=this.layout.studies,J=s.scrubbed.length,tt&&Object.keys(tt).length&&(at=s.state.studies.sorted||i.Studies.sortForProcessing(this),ct=this,s.state.studies.sorted=at,at.forEach(function(pt){var ut=-1972188220,mt=980867147,gt=536354901;(t.c7G(0,!1,861094)===ut||t.W0S(0,!1,887176)===mt||t.c7G(15,!0,548865)===gt)&&(pt.startFrom=s.state.studies.startFrom,pt.error=null,pt.study&&pt.study.calculateFN&&pt.study.calculateFN(ct,pt),pt.flagSignals&&pt.flagSignals())})),V=J;V<s.scrubbed.length;V++)G=s.scrubbed[V],G.tick=s.dataSet.length,s.dataSet.push(G);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",d)}}};ml=b=>{var t,i;b.SplinePlotter||(b.SplinePlotter={}),t=b.CIQ,i=b.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt;a="h",a+="istogram",o=n.type,r=n.panel,c=n.field,l=n.fillColor,s=n.borderColor,d=n.condition,h=n.style,p=n.yAxis,e.A_p(97),u=e.F0D(o,a),g=u||o=="candle",e.A_p(97),f=e.G7m(o,"shadow"),e.k1h(97),w=e.F0D(o,"hlc"),v=o=="bar"||w,m=r.chart,q=m.dataSegment,x=this.chart.context,y=new Array(q.length),k=this.layout,S=s&&!t.isTransparent(s),A=0,S&&!n.highlight&&(e.k1h(39),A=e.F0D("0.5",1)),_=x.globalAlpha,!n.highlight&&this.highlightedDraggable&&(x.globalAlpha*=.3),x.beginPath(),p||(p=r.yAxis),T=p.top,P=p.bottom,E=k.candleWidth,e.A_p(15);var lt=e.G7m(7,16,7,4,21);z=r.left-.5*E+this.micropixels-lt,e.A_p(5);var dt=e.G7m(11,9);U=m.tmpWidth/dt,e.A_p(10);var ht=e.G7m(0,2);N=x.lineWidth/ht,g&&(t.isTransparent(l)&&(l=this.containerColor),x.fillStyle=l),f&&(x.lineWidth=1),v&&(C=this.canvasStyle(h),C.width&&parseInt(C.width,10)<=25?(e.A_p(4),x.lineWidth=Math.max(e.F0D("1",0),t.stripPX(C.width))):(e.k1h(72),x.lineWidth=e.G7m(64,"1"))),D=m.state.chartType.pass;for(var pt=0;pt<=q.length;pt++)if(F=U,e.k1h(149),z+=e.G7m("2",0,E),E=k.candleWidth,e.A_p(150),z+=e.G7m(E,0,"2"),M=q[pt],!!M&&!M.projection){if(M.candleWidth){e.A_p(151);var ut=e.F0D(11,35,3,0);z+=(M.candleWidth-E)/ut,E=M.candleWidth,(n.volume||E<m.tmpWidth)&&(e.A_p(30),F=e.G7m(E,2))}m.transformFunc&&p==m.panel.yAxis&&M.transform&&(M=M.transform),M&&c&&c!="Close"&&(M=M[c]),!(!M&&M!==0)&&(I=M.Close,L=M.Open===void 0?I:M.Open,u&&m.defaultPlotField&&(I=M[m.defaultPlotField]),!(!I&&I!==0)&&(g&&!u&&(L==I||L===null)||d&&(O=t.ChartEngine,d&O.CLOSEDOWN?D.even|=I==M.iqPrevClose:d&O.CANDLEDOWN&&(e.k1h(97),D.even|=e.F0D(I,L)),d&O.CANDLEUP&&L>=I||d&O.CANDLEDOWN&&L<=I||d&O.CANDLEEVEN&&L!=I||d&O.CLOSEUP&&I<=M.iqPrevClose||d&O.CLOSEDOWN&&I>=M.iqPrevClose||d&O.CLOSEEVEN&&I!=M.iqPrevClose)||(B=L,R=I,(f||v)&&(B=M.High===void 0?Math.max(I,L):M.High,R=M.Low===void 0?Math.min(I,L):M.Low),H=p.semiLog?p.height*(1-(Math.log(Math.max(B,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-B)*p.multiplier,W=p.semiLog?p.height*(1-(Math.log(Math.max(R,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-R)*p.multiplier,p.flipped?(e.A_p(5),H=e.G7m(P,H),e.A_p(5),W=e.F0D(P,W)):(H+=T,W+=T),!(g&&!u&&Math.abs(H-W)<1)&&(j=u?p.flipped?p.top:W:Math.min(H,W),Q=u?p.flipped?H:p.bottom:Math.max(H,W),Q-j<1&&(Q=j),j=Math.floor(j),Q=Math.floor(Q),e.A_p(5),et=e.G7m(Q,j),V=W,(v||f)&&(X=p.semiLog?p.height*(1-(Math.log(Math.max(L,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-L)*p.multiplier,Z=p.semiLog?p.height*(1-(Math.log(Math.max(I,"0"|0))/Math.LN10-p.logLow)/p.logShadow):(p.high-I)*p.multiplier,p.flipped?(e.A_p(5),X=e.G7m(P,X),e.A_p(5),Z=e.F0D(P,Z)):(X+=T,Z+=T),Math.abs(X-Z)<1&&(X=Z),V=Z),y[pt]=V,j<T&&(e.A_p(29),et-=e.F0D(j,T,1),e.k1h(152),j=e.F0D("1",0,T)),j+et>P&&(e.k1h(8),et=e.F0D(1,j,P)),e.k1h(10),Q=e.G7m(j,et),!(j>=P)&&(Q<=T||(K=Math.floor(z)+(!n.highlight&&.5),e.k1h(5),tt=Math.floor(e.G7m(K,F)),e.k1h(10),J=Math.round(e.G7m(K,F)),at=tt==J?F:0,ct=j===Q||f&&X===Z,g?(u||!ct)&&(tt+=A,J-=A,j+=A,x.rect(tt,j,Math.max(0,J-tt),et)):f?(ct&&Z<=P&&Z>=T&&(G=Math.floor(Z)+(!n.highlight&&.5),e.k1h(5),x.moveTo(e.G7m(tt,at),G),e.k1h(10),x.lineTo(e.F0D(J,at),G)),Q>j&&(x.moveTo(K,j),x.lineTo(K,Q))):v&&(j<P&&Q>T&&M.High!=M.Low&&(e.k1h(5),x.moveTo(K,e.F0D(j,N)),e.k1h(10),x.lineTo(K,e.F0D(Q,N))),X>T&&X<P&&!w&&(Y=Math.floor(X)+(!n.highlight&&.5),x.moveTo(K,Y),e.k1h(29),x.lineTo(e.G7m(F,K,at),Y)),Z>T&&Z<P&&(it=Math.floor(Z)+(!n.highlight&&+"0.5"),x.moveTo(K,it),e.k1h(50),x.lineTo(e.F0D(K,F,at),it)))))))))}return rt=x.globalAlpha,g?(rt<1&&(x.save(),x.globalAlpha=1,x.fillStyle=this.containerColor,x.fill(),x.restore()),x.fill(),S&&(x.lineWidth=n.highlight?2:1,x.strokeStyle=s,x.stroke())):(f||v)&&(this.canvasColor(h),x.globalAlpha=rt,s&&(x.strokeStyle=s),n.highlight&&(x.lineWidth*=2),x.stroke(),x.closePath(),x.lineWidth=1),x.globalAlpha=_,{cache:y}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(n,e,a,o){var r=ot,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt,Ct,Rt,Ht,jt,$t,Bt,zt,Pt,Nt,_t,Vt,ee,xe,ae,Te,Ue,_e,Oe,de,se,he,Ve,ye,qe,Se,ge,ue,te,fe,oe,me,be,ce,Lt,Wt;c=!{},l=!1,s=![],d=!0,h=null,p=null,r.c4P(),u=null,g=0,f=![],w=!{},v=![],m=![],q=null,x=null,y=null,k=null;function Zt(gi){var Mi,ei,Fe,Ke,oi,Pi,ni,ki,ci,Vi,fa,Wi;if(Mi=C.getLineDash(),ei=v?2:1,Fe=gi,typeof Fe=="object"&&(ei*=Fe.width,p=t.borderPatternToArray(ei,Fe.pattern),Fe=Fe.color),S[Fe]=1,!f){if(r.v95(),Ke=A.slice(-2),oi=p instanceof Array&&p.join(),Pi=Mi instanceof Array&&Mi.join(),r.A_p(153),ni=r.G7m(Pi,oi),ki=!t.colorsEqual(F,Fe),ci=C.lineWidth!=ei,ki||ni||ci)if(g)_.push({coord:Ke,color:Fe,pattern:p||[],width:ei});else{C.stroke(),Vi=-267692342,fa=513449109,Wi=2;for(var ji=+"1";r.f0X(ji.toString(),ji.toString().length,"61642"-0)!==Vi;ji++)C.lineWidth=ei,ni&&C.setLineDash(oi?p:[]),C.beginPath(),C.moveTo(Ke[4],Ke[2]),Wi+=2;r.Y9k(Wi.toString(),Wi.toString().length,+"40059")!==fa&&(C.lineWidth=ei,ni&&C.setLineDash(oi?p:[]),C.beginPath(),C.moveTo(Ke[0],Ke[1]))}F=Fe,g||(!Fe||Fe=="auto"?C.strokeStyle=E.defaultColor:C.strokeStyle=Fe)}}if(S={},A=[],_=[],T=[],P=[],E=this,z=this.layout,U=e.chart,N=U.dataSegment,C=U.context,D=new Array(N.length),F=C.strokeStyle,M=C.globalAlpha,U.dataSet.length){I="transpare",I+="n",I+="t",this.startClip(e.name),a&&(c=a.skipProjections,a.skipTransform,l=a.noSlopes,g=a.tension,s=a.step,p=a.pattern,d=a.extendOffChart,u=a.yAxis,h=a.gapDisplayStyle,f=a.noDraw,w=a.reverse,v=a.highlight,a.width&&(C.lineWidth=a.width),m=a.shiftRight,q=a.subField,x=a.threshold,y=a.lineTravelSpacing,k=a.extendToEndOfDataSet),!h&&h!==![]&&a&&(h=a.gaps),h||(h={color:I,fillMountain:!!{}}),p instanceof Array&&C.setLineDash(p),v&&(C.lineWidth*=2),!v&&this.highlightedDraggable&&(C.globalAlpha*=.3),d!==!{}&&(d=!0),L=q||U.defaultPlotField||"Close",u||(u=e.yAxis),O=U.transformFunc&&u==U.panel.yAxis,r.k1h(0);var je=r.G7m(2,3,10);B=C.lineWidth*je,R=w?U.top-B:U.bottom+B,(x||x===0)&&(R=this.pixelFromPrice(x,e,u)),H=!g&&f&&h&&h.fillMountain,W=n,X=n;for(var Ce=0;Ce<N.length;Ce++)if(Z="o",Z+="bject",j=N[Ce],j&&typeof j==Z&&(Q=j[n],Q||Q===0)){typeof Q=="object"&&(X=t.createObjectChainNames(n,[L])[r.F0D(64,"0",r.k1h(72))]);break}et={left:null,right:null},r.A_p(1);var Re=r.G7m(1191,5,14,17,0);V=U.dataSet.length-U.scroll-Re,d&&(et.left=this.getPreviousBar(U,X,0),et.right=this.getNextBar(U,X,N.length-1)),K=!!{},tt=!1,C.beginPath(),ct=et.left,G=null,ct&&(G=ct.transform),ct&&(at=O?G?G[n]:null:ct[n],(at||at==="0"-0)&&((at[L]||at[L]===0)&&(at=at[L]),Y=this.pixelFromTick(ct.tick,U),it=this.pixelFromTransformedValue(at,e,u),C.moveTo(Y,it),A.push(Y,it),N[0].tick-ct.tick>1&&(T.push({start:A.slice(-2),threshold:R,tick:ct}),tt=!![]),K=!{})),r.A_p(154);var ze=r.F0D(1,2,0,2);if(rt=e.left+this.micropixels-ze,m&&(rt+=m),s&&a&&a.alignStepToSide){r.k1h(64);var Ee=r.G7m(4,0,2,4);rt-=this.layout.candleWidth/Ee}ht=null,pt=0,ut=0,mt=!1,gt={reset:!0};for(var Me=+"0";Me<N.length;Me++){if(J=z.candleWidth,bt=N[Me],yt=N[Me],bt||(bt={}),(!bt.cache||U.pixelCacheExpired)&&(bt.cache={}),qt=bt.lineTravel,c&&bt.projection){et.right=null;break}if(bt.candleWidth&&(J=bt.candleWidth),y&&(J=0),O&&bt.transform&&(bt=bt.transform),St=bt[n],St&&typeof St=="object"&&(St=St[L],r.A_p(50),W=r.G7m(n,".",L)),U.lineApproximation&&z.candleWidth<1&&!y)if(gt.reset&&(gt={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},mt=!1),Tt=St,(Tt||Tt===("0"^0))&&(gt.CollatedHigh=Math.max(gt.CollatedHigh,Tt),gt.CollatedLow=Math.min(gt.CollatedLow,Tt),gt.CollatedClose=Tt,gt.CollatedOpen===null?gt.CollatedOpen=Tt:mt=!![]),pt+=J,pt-ut>=1||Me==N.length-1)ut=Math.floor(pt),gt.reset=!![],gt[n]=gt.CollatedClose,bt=gt,bt.cache={};else{rt+=J;continue}if(l||(r.k1h(30),rt+=r.G7m(J,2)),!St&&St!=="0"*1){wt=A.slice(-2),H&&!tt&&A.length&&A.push(wt[0],R),tt||T.push({start:wt,threshold:R,tick:dt}),tt=!!{},rt+=l?J:J/2,(s||l)&&A.length&&(D[Me]=A.slice(-r.G7m("1",0,r.A_p(5)))[0]),qt&&(rt+=qt);continue}if(lt=bt,Ct=bt.cache,r.k1h(10),Rt=r.G7m(V,Me),(Rt<e.cacheLeft||Rt>e.cacheRight||!Ct[n])&&(Ht=u.semiLog?u.height*(("1">>0)-(Math.log(Math.max(St,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-St)*u.multiplier,u.flipped?Ct[W]=u.bottom-Ht:Ct[W]=u.top+Ht),jt=D[Me]=Ct[W],U.lastTickOffset&&(ht===null&&(ht=this.currentQuote(n)||{}),yt.tick==ht.tick&&(rt+=U.lastTickOffset)),!K&&o){if(yt[n]&&yt[n][L]&&(yt=yt[n]),$t=o(this,yt,tt),!$t){rt+=l?J:J/2;continue}Zt($t)}K?(C.moveTo(rt,jt),g&&_.push({coord:[rt,jt],color:C.strokeStyle,pattern:p||[],width:C.lineWidth})):(Bt="mo",Bt+="ve",Bt+="T",Bt+="o",(s||l)&&(zt=A.slice(-1)[0],mt?Hi(rt,zt,bt):C.lineTo(rt,zt),A.push(rt,zt)),mt&&!l?Hi(rt,jt,bt):C[l?Bt:"lineTo"](rt,jt)),tt&&(T.push({end:[rt,jt],threshold:R}),dt=yt,H&&!s&&!l&&A.push(rt,R)),A.push(rt,jt),K=!{},tt=![],rt+=l?J:J/2,qt&&(rt+=qt)}U.pixelCacheExpired=!{},Pt=et.right,Nt=null,Pt&&(Nt=Pt.transform),!K&&Pt&&(at=O?Nt?Nt[n]:null:Pt[n],at&&(at[L]||at[L]===0)&&(at=at[L]),_t=this.pixelFromTick(Pt.tick,U),Vt=this.pixelFromTransformedValue(at,e,u),Pt.tick-N[N.length-1].tick>1&&(tt||(ee=A.slice(-2),H&&A.length&&A.push(ee[0],R),T.push({start:ee,threshold:R,tick:N[N.length-1]})),tt=!![]),!K&&o&&(xe=o(this,Pt,tt),xe&&Zt(xe)),ae=A.slice(-2),(!p||!p.length)&&((s||l)&&(C.lineTo(_t,ae[1]),A.push(_t,ae["1"^0])),C[l?"moveTo":"lineTo"](_t,Vt)),tt&&(T.push({end:[_t,Vt],threshold:R}),H&&!s&&!l&&A.push(_t,R)),A.push(_t,Vt));for(var ia in S)P.push(ia);if(a&&a.extendToEndOfLastBar?(Te=A.slice(-2),C.lineTo(Te[0]+J,Te[1])):(s||l||this.extendLastTick||k)&&(Ue=A.slice(-+"2"),A.length&&(_e=Ue[0],Oe=Ue[1],k||s&&k!==!1?(_e=this.pixelFromTick(U.dataSet.length-1,U),(l||this.extendLastTick)&&(r.k1h(30),_e+=r.G7m(J,2))):l?_e+=J:this.extendLastTick&&(r.k1h(30),_e+=r.G7m(J,2)),_e>Ue[0]&&(de=null,o&&(de=o(this,{},!!{})),de&&Zt(de),C.lineTo(_e,Oe),(!tt||!H)&&A.push(_e,Oe)))),f||(g&&A.length&&(C.beginPath(),a&&a.pattern&&C.setLineDash(a.pattern),i.plotSpline(A,g,C,_)),C.stroke()),!f&&a&&a.label&&lt){if(se="#FFFF",se+="FF",he="no",he+="o",he+="p",ye=lt[n],ye&&typeof ye=="object"&&(ye=ye[L]),u.priceFormatter)Ve=u.priceFormatter(this,e,ye,a.labelDecimalPlaces);else{qe=2126799299,Se=-135015197,ge=2;for(var Xe=+"1";r.Y9k(Xe.toString(),Xe.toString().length,+"3295")!==qe;Xe++)Ve=this.formatYAxisPrice(ye,e,a.labelDecimalPlaces),r.k1h(72),ge+=r.G7m(96,"2");r.f0X(ge.toString(),ge.toString().length,46730)!==Se&&(Ve=this.formatYAxisPrice(ye,e,a.labelDecimalPlaces))}ue=this.yaxisLabelStyle,u.yaxisLabelStyle&&(ue=u.yaxisLabelStyle),te=ue=="noop"?C.strokeStyle:null,fe=ue==he?se:C.strokeStyle,this.yAxisLabels.push({src:"plot",args:[e,Ve,lt.cache[W],fe,te,C,u]})}if(oe=typeof h=="object"?h.color:h,t.isTransparent(oe)){for(var ve=0;ve<T.length;ve+=2)if(me=T[ve].start,ve&&(be=T[ve-1].end),be&&me[0]==be[0]&&me[1]==be[1]){if(C.beginPath(),ce=C.lineWidth,o){if(Lt="ob",Lt+="j",Lt+="e",Lt+="ct",Wt=o(this,T[ve].tick||{},![]),typeof Wt==Lt){r.k1h(84);var Pa=r.F0D(22,5,2,7,22);r.A_p(5);var Ia=r.G7m(17,16);ce=Wt.width*(v?Pa:Ia),Wt=Wt.color}C.strokeStyle=C.fillStyle=Wt}C.lineWidth=ce,C.arc(me[0],me[1],1,0,2*Math.PI),C.stroke(),C.fill()}}this.endClip()}function Hi(gi,Mi,ei){var Fe,Ke,oi,Pi;Fe="C",r.v95(),Fe+="ol",Fe+="lated",Fe+="High",C.setLineDash([]),Ke=ni("CollatedOpen"),oi=ni(Fe),Pi=ni("CollatedLow"),C.lineTo(gi,Ke);function ni(ki){var ci;return ci=u.semiLog?u.height*(1-(Math.log(Math.max(ei[ki],0))/Math.LN10-u.logLow)/u.logShadow):(u.high-ei[ki])*u.multiplier,u.flipped?ci=u.bottom-ci:ci+=u.top,r.c4P(),ci}C.moveTo(gi,oi),C.lineTo(gi,Pi),C.moveTo(gi,Mi),A.push(gi,Ke)}return C.globalAlpha=M,{colors:P,points:A,cache:D,gapAreas:T}},t.ChartEngine.prototype.drawMountainChart=function(n,e,a){var o=ot,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B;return r=this.chart.context,c=e,l=!1,s=!{},d=null,h=null,p=null,u=null,g=+"0",f=null,w=!{},v=null,m=null,q=!1,x=null,y=null,k=1,S=!{},A=![],_=!1,T=n.chart,T.dataSegment,P=T.lineStyle||{},(!e||typeof e!="object")&&(e={style:e}),c=e.style||"stx_mountain_chart",d=e.field||T.defaultPlotField||"Close",h=e.subField||T.defaultPlotField||"Close",f=e.gapDisplayStyle,!f&&f!==!1&&(f=e.gaps),!f&&f!==!{}&&(f=T.gaplines),f||(f="transparent"),p=e.yAxis||n.yAxis,l=e.reverse||![],u=e.tension,v=e.fillStyle,g=e.width||P.width,w=e.step,m=e.pattern||P.pattern,q=e.highlight,y=e.color||P.color,x=e.baseColor||P.baseColor,s=e.colored,k=e.opacity,S=e.extendToEndOfDataSet,A=e.isComparison,_=e.returnObject,E=this.canvasStyle(c),z=p.top,(isNaN(z)||isNaN(z/z))&&(z=0),U=y||(c&&E.backgroundColor?E.backgroundColor:this.defaultColor),N=x||(c&&E.color?E.color:this.containerColor),v?r.fillStyle=v:x||E.color?(C=r.createLinearGradient(0,z,+"0",p.bottom),C.addColorStop(p.flipped?+"1":0,U),C.addColorStop(p.flipped?0:1,N),r.fillStyle=C):r.fillStyle=U,this.startClip(n.name),D=r.lineWidth,e.symbol||(h=null),e={skipProjections:!!{},reverse:l,yAxis:p,gapDisplayStyle:f,step:w,highlight:q,extendToEndOfDataSet:S,isComparison:A},T.tension&&(e.tension=T.tension),(u||u===0)&&(e.tension=u),F=parseInt(E.paddingTop,"10"*1),M=y||E.borderTopColor,I=null,(s||M&&!t.isTransparent(M))&&F&&(L=this.scratchContext,L||(O=r.canvas.cloneNode(!0),L=this.scratchContext=O.getContext("2d")),L.canvas.height=r.canvas.height,L.canvas.width=r.canvas.width,L.drawImage(r.canvas,0,0),t.clearCanvas(r.canvas,this)),t.extend(e,{panelName:n.name,direction:e.reverse?-1:1,band:d,subField:h,opacity:k}),!e.highlight&&this.highlightedDraggable&&(e.opacity*=.3),t.preparePeakValleyFill(this,e),(s||M&&!t.isTransparent(M))&&F&&(r.save(),o.A_p(39),r.lineWidth+=o.F0D(2,F),r.globalCompositeOperation="destination-out",r.globalAlpha=1,this.plotDataSegmentAsLine(d,n,e),r.globalCompositeOperation="destination-over",r.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),r.drawImage(this.scratchContext.canvas,0,0),r.restore()),r.strokeStyle=M,g?r.lineWidth=g:E.width&&parseInt(E.width,10)<=25?(o.A_p(5),r.lineWidth=Math.max(o.F0D("1",0),t.stripPX(E.width))):r.lineWidth=1,m||(m=E.borderTopStyle),e.pattern=t.borderPatternToArray(r.lineWidth,m),B=a,f&&(B=this.getGapColorFunction(d,h,{color:M,pattern:e.pattern,width:r.lineWidth},f,a)),I=this.plotDataSegmentAsLine(d,n,e,B),r.lineWidth=D,this.endClip(),I.colors.length||I.colors.push(M),_?I:I.colors},t.ChartEngine.prototype.drawBaselineChart=function(n,e){var a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,{chart:I}=n,{field:L,id:O,yAxis:B}=e,{gaplines:R,defaultPlotField:H,lineStyle:W}=I,{display:X}=this.baselineHelper.get(this.getRendererFromSeries(O));if(a=this.getYAxisBaseline(B).actualLevel,o=[],L||(L=H),W||(W={}),r=e.gapDisplayStyle,!r&&r!==!1&&(r=e.gaps),a!==null&&!isNaN(a)){if(c="m",c+="ounta",c+="in",l=e.type==c,l&&(o=this.drawMountainChart(n,{style:e.style,field:e.field,yAxis:B,gapDisplayStyle:r,colored:!0,tension:0})),s=this.pixelFromPrice(a,n,B),isNaN(s))return;this.startClip(n.name),d=e.pattern||W.pattern,h=e.fill_color_up||this.getCanvasColor("stx_baseline_up"),p=e.fill_color_down||this.getCanvasColor("stx_baseline_down"),u=e.border_color_up||this.getCanvasColor("stx_baseline_up"),g=e.border_color_down||this.getCanvasColor("stx_baseline_down"),f=e.width||W.width||this.canvasStyle("stx_baseline_up").width,w=e.width||W.width||this.canvasStyle("stx_baseline_down").width,v=e.widthBaseline||W.width||t.stripPX(this.canvasStyle("stx_baseline").width),m=e.baselineOpacity||this.canvasStyle("stx_baseline").opacity,q={fill:h,edge:u,width:f},x={fill:p,edge:g,width:w},y=e.yAxis.flipped,k={over:y?x:q,under:y?q:x},S=!1,!r&&r!==!1&&(r=R),A=1,!e.highlight&&this.highlightedDraggable&&(A*=.3);for(var Z in k)_=parseInt(Math.max(1,t.stripPX(k[Z].width)),10),e.highlight&&(_*=2),d=t.borderPatternToArray(_,d),T={panelName:n.name,band:L,threshold:a,color:l?"transparent":k[Z].fill,direction:Z=="over"?1:-1,edgeHighlight:k[Z].edge,edgeParameters:{pattern:d,lineWidth:_+.1,opacity:A},gapDisplayStyle:r,yAxis:e.yAxis},B&&(T.threshold=this.priceFromPixel(this.pixelFromPrice(T.threshold,n,B),n,B)),o.push(k[Z].edge),P=T.color,!l&&P&&P!="transparent"&&(E="o",E+="v",E+="e",E+="r",z=n.top,U=n.bottom,N=I.context.createLinearGradient(0,Z==E?z:U,0,s),ot.A_p(4),N.addColorStop(ot.G7m("0",0),t.hexToRgba(t.colorToHex(P),60)),N.addColorStop(1,t.hexToRgba(t.colorToHex(P),10)),T.color=N,T.opacity=A),t.preparePeakValleyFill(this,I.dataSegment,T),R&&(R.fillMountain||this.drawLineChart(n,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:T.edgeParameters.lineWidth}}),R.color||(S=!!{},R.color=this.defaultColor)),this.drawLineChart(n,null,null,{color:"transparent",width:T.edgeParameters.lineWidth}),S&&(R.color=null);X&&(C="2",C+=".",C+="1",D="l",D+="i",D+="n",D+="e",F="st",F+="x_ba",F+="seline",M="1.",M+="1",this.plotLine(0,1,s,s,this.containerColor,"line",I.context,n,{lineWidth:M}),this.plotLine(0,1,s,s,this.getCanvasColor(F),D,I.context,n,{pattern:"dotted",lineWidth:v||C,opacity:m||.5*A})),this.endClip()}return ot.v95(),{colors:o}},t.ChartEngine.prototype.plotLine=function(n){var e=ot,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B;if(a="o",a+="bject",o="l",o+="ine",typeof arguments[0]=="number"){n={x0:arguments[+"0"],x1:arguments[+"1"],y0:arguments[+"2"],y1:arguments[3],color:arguments["4"-0],type:arguments[5],context:arguments[6],confineToPanel:arguments["7"|1]};for(var R in arguments[8])n[R]=arguments[+"8"][R]}if(n||(n={}),n.pattern!="none"&&(r=n.x0,c=n.x1,l=n.y0,s=n.y1,d=n.color,h=n.type,p=n.context,u=n.confineToPanel,g=n.deferStroke,u===!0&&(u=this.chart.panel),(p===null||typeof p=="undefined")&&(p=this.chart.context),!(isNaN(r)||isNaN(c)||isNaN(l)||isNaN(s)))){if(f=0,w=this.chart.canvasHeight,v=0,m=this.right,u){w=u.yAxis.bottom,f=u.yAxis.top,q=194487911,x=261193338,y=2;for(var H=1;e.f0X(H.toString(),H.toString().length,34307)!==q;H++)v=u.left,y+=2;e.Y9k(y.toString(),y.toString().length,67364)!==x&&(v=u.left),m=u.right}h=="ray"&&(k=1e7,c<r&&(k=-1e7),A={x0:r,x1:c,y0:l,y1:s},S=t.yIntersection(A,k),c=k,s=S),(h==o||h=="horizontal"||h=="vertical")&&(k=1e7,_=-1e7,A={x0:r,x1:c,y0:l,y1:s},S=t.yIntersection(A,k),T=t.yIntersection(A,_),r=_,c=k,l=T,s=S),P=0,E=1,e.A_p(5),z=e.F0D(c,r),e.k1h(5),U=e.F0D(s,l);for(var W=0;W<("4"^0);W++){if(W===+"0"&&(N=-z,e.k1h(5),C=-e.F0D(v,r)),W==1&&(N=z,e.k1h(5),C=e.G7m(m,r)),W==2&&(N=-U,e.k1h(5),C=-e.G7m(f,l)),W==3&&(N=U,e.k1h(5),C=e.F0D(w,l)),e.k1h(30),D=e.G7m(C,N),(s||s===0)&&N===0&&C<0)return!1;if(N<0){if(D>E)return![];D>P&&(P=D)}else if(N>0){if(D<P)return!1;D<E&&(E=D)}}if(e.A_p(130),F=e.F0D(z,P,r),e.A_p(130),M=e.F0D(U,P,l),e.k1h(130),I=e.G7m(z,E,r),e.k1h(130),L=e.F0D(U,E,l),!s&&s!==0&&!l&&l!==("0"^0)){if(M=f,L=w,F=A.x0,I=A.x0,A.x0>m)return![];if(A.x0<v)return![]}else if(!s&&s!==0){if(A.y0<A.y1?L=w:L=f,F=A.x0,I=A.x0,A.x0>m)return![];if(A.x0<v)return!1}g||(p.save(),p.beginPath()),p.lineWidth=1.1,d&&typeof d==a?(p.strokeStyle=d.color,d.opacity?p.globalAlpha=d.opacity:p.globalAlpha=1,p.lineWidth=t.stripPX(d.width)):(O="au",O+="t",O+="o",!d||d==O||t.isTransparent(d)?p.strokeStyle=this.defaultColor:p.strokeStyle=d),n.opacity&&(p.globalAlpha=n.opacity),n.lineWidth&&(p.lineWidth=n.lineWidth),n.globalCompositeOperation&&(p.globalCompositeOperation=n.globalCompositeOperation),B=t.borderPatternToArray(p.lineWidth,n.pattern),p.setLineDash(n.pattern?B:[]),p.moveTo(F,M),p.lineTo(I,L),g||(p.stroke(),p.restore())}},t.ChartEngine.prototype.rendererAction=function(n,e){var a=ot,o,r,c,l,s,d,h,p,u,g,f,w;o="re";function v(){var x,y,k,S;x="underla",x+="y",a.c4P(),y=this,!s&&e===x&&(k="CI",k+="Q",k+=".w",k+="atermark",S=Symbol.for(k),y[S]&&(y[S].draw(n),s=!0))}o+="ndererActi",o+="on",a.A_p(72),r=-a.F0D(0,"491066366"),c=-1488783825,a.v95(),l=2;for(var m=1;a.f0X(m.toString(),m.toString().length,94572)!==r;m++)s=!0,l+=2;if(a.Y9k(l.toString(),l.toString().length,"99202"-0)!==c&&(s=![]),!this.runPrepend(o,arguments)){for(var q in n.seriesRenderers)d="o",d+="ver",d+="la",d+="y",h="u",h+="nd",h+="er",h+="lay",p="_",p+="main_serie",p+="s",u=n.seriesRenderers[q],g=u.params,f=g.panel,w=this.panels[f],!(g.overChart&&e=="underlay")&&(g.name==p&&e==h||g.name!="_main_series"&&e=="main"||!g.overChart&&e==d||!w||w.chart===n&&(w.hidden||(e=="yAxis"?u.adjustYAxis():(v.apply(this),u.draw(),u.cb&&u.cb(u.colors)))));this.runAppend("rendererAction",arguments)}v.apply(this)},t.ChartEngine.prototype.drawSeries=function(n,e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;if(r="d",r+="rawS",r+="eries",!this.runPrepend(r,arguments)){n.dataSegment,c=null,e||(e=n.series);for(var k in e)if(c=e[k],l=c.parameters,s=l.panel?this.panels[l.panel]:n.panel,d=l.color,l.width,h=l.field,!!s){if(p=l.yAxis=a||s.yAxis,d||(d=p.textStyle||this.defaultColor),d=="auto"&&(d=this.defaultColor),h||(h=n.defaultPlotField),u=l.subField||n.defaultPlotField||"Close",!l._rawExtendToEndOfDataSet&&l._rawExtendToEndOfDataSet!==!1&&(l._rawExtendToEndOfDataSet=l.extendToEndOfDataSet),n.animatingHorizontalScroll?l.extendToEndOfDataSet=![]:l.extendToEndOfDataSet=l._rawExtendToEndOfDataSet,g=l.colorFunction,(c.highlight||c.parameters.highlight)&&(l.highlight=!![]),f={colors:[]},o){if(o.params.highlight&&(l.highlight=!0),l.hidden)continue;f=o.drawIndividualSeries(n,l)||f}else l.type=="mountain"?f=this.drawMountainChart(s,t.extend({returnObject:!0},l),g):f=this.drawLineChart(s,l.style,g,t.extend({returnObject:!0},l));c.yValueCache=f.cache,ot.A_p(135);var S=ot.G7m(12,5,0,8);w=n.dataSegment[n.dataSegment.length-S],w&&(v=!l.skipTransform&&n.transformFunc&&p==n.panel.yAxis,!w[h]&&w[h]!==0&&(w=this.getPreviousBar(n,h,n.dataSegment.length-1)),v&&w&&w.transform&&(w=w.transform)),l.displayFloatingLabel!==!1&&this.mainSeriesRenderer!=o&&w&&!p.noDraw&&(m="seri",m+="es",q=w[h],q&&(q[u]||q[u]==="0">>32?q=q[u]:q=q.iqPrevClose),p.priceFormatter?x=p.priceFormatter(this,s,q):x=this.formatYAxisPrice(q,s,null,p),this.yAxisLabels.push({src:m,args:[s,x,this.pixelFromTransformedValue(q,s,p),t.hexToRgba(t.colorToHex(d),parseFloat(l.opacity)),null,null,p]})),n.legend&&l.useChartLegend&&(n.legend.colorMap||(n.legend.colorMap={}),y=l.display,y||(y=l.symbol),n.legend.colorMap[k]={color:f.colors,display:y,isBase:o==this.mainSeriesRenderer})}ot.c4P(),this.runAppend("drawSeries",arguments)}}};bl=b=>{var t;t=b.CIQ,t.ChartEngine.prototype.scrollTo=function(i,n,e){var a,o;a=this.swipe,a.end=!!{},a.amplitude=a.target=(n-i.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),a.scroll=i.scroll,a.chart=i,a.cb=e,o=this,requestAnimationFrame(function(){ot.v95(),o.autoscroll()})},t.ChartEngine.prototype.autoscroll=function(){var i,n,e,a;ot.c4P(),i=this,n=this.swipe,n.amplitude&&(n.elapsed=Date.now()-n.timestamp,e=-n.amplitude*Math.exp(-n.elapsed/n.timeConstant),a=(n.target+e)/this.layout.candleWidth,n.chart.scroll=n.scroll+Math.round(a),this.draw(),this.updateChartAccessories(),e>"0.5"*1||e<-.5?requestAnimationFrame(function(){ot.c4P(),i.autoscroll()}):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),n.cb&&n.cb()))}};vl=b=>{var t,i,n,e;t=b.CIQ,i="boundary",n="line",e="border",t.ChartEngine.prototype.drawXAxis=function(a,o){var r=ot,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I;if(c="drawX",c+="Axis",l="l",l+="e",l+="f",l+="t",s="st",s+="x",s+="_xa",s+="xis",d="tic",d+="k",h="dr",h+="a",h+="wXA",h+="xis",p=[a,o],this.runPrepend(h,p)||!o)return;var{lineBaseLevel:L}=t.ChartEngine.XAxis,{interval:O,timeUnit:B}=this.layout,{xAxis:R}=a,{displayGridLines:H,displayBorder:W,fitLeftToRight:X,minimumLabelWidth:Z,noDraw:j,fitTight:Q}=R;if(u=X||O===d||B==="tick",j)return;g=this.getBackgroundCanvas().context,this.canvasFont(s,g),f=this.getCanvasFontSize("stx_xaxis"),g.textAlign="center",g.textBaseline="middle",w=!u&&this.xaxisHeight>3*f,v=!{},m=new Map,x=g.measureText("   ").width;for(var et=0;et<o.length;et++){q=o[et],y=m.get(q.text),y===void 0&&(y=g.measureText(q.text).width,m.set(q.text,y)),r.A_p(10),k=Math.max(r.G7m(y,x),Z),q.hz=Math.floor(q.hz+this.micropixels)-.5,r.A_p(134);var V=r.G7m(16,6,4,4);q.left=q.hz-k/V,q.right=q.hz+k/("2"<<0),r.k1h(5);var K=r.G7m(14,12);q.unpaddedRight=q.hz+y/K}if(S=this.xAxisAsFooter===!0?this.chart.canvasHeight:a.panel.bottom,r.A_p(5),A=this.whichPanel(r.G7m(S,1)),!A)return;this.adjustYAxisHeightOffset(A,A.yAxis),_=W||W===null,this.axisBorders===!0&&(_=!!{}),this.axisBorders===!1&&(_=!1);function tt(ct){var G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt;for(ct.sort((wt,Ct)=>wt.level<Ct.level?-1:wt.level>Ct.level?1:wt.hz<Ct.hz?-+"1":wt.hz>Ct.hz?1:0),Y=Number.MAX_SAFE_INTEGER,it={},rt={},G=0;G<ct.length&&(lt="sharin",lt+="g",dt=ct[G],!(dt.level>Y));G++){this.container.ownerDocument.body.classList.contains(lt)&&(dt.left<=A.left||dt.unpaddedRight>=A.right)&&(dt.suppress=!0),ht=Math.floor(dt.left),pt=Math.ceil(dt[Q?"unpaddedRight":"right"]);for(var St=ht;St<=pt;St++){if(ut=it[St]||{},ut.level<=dt.level){if(mt=ut.alwaysAsBoundary&&ut.level<Y,mt&&!dt.alwaysAsBoundary||ut.grid===i&&dt.grid===n||u){if(gt="h",gt+="z",bt="r",bt+="i",bt+="ght",yt="h",yt+="z",ut.left<ht&&ut[w?yt:bt]>=ht||ut.left>ht&&ut[w?gt:"left"]<=pt){dt.suppress=!0;break}}else if(dt.level){r.A_p(155);var Tt=r.F0D(0,3,19,57,0);Y=dt.level-Tt,delete rt[dt.level];break}}it[St]=dt,St===pt&&(rt[dt.level]||(rt[dt.level]=0),rt[dt.level]++)}}return qt=Object.entries(rt).reverse(),qt.length>1&&!u&&qt[0][0]>=L&&qt[1][0]<L&&qt[0][1]===1&&(qt[1][1]>1||qt.length>2)&&qt.shift(),qt.length&&(Y=Number(qt[+"0"][+"0"])),Y}T=S-this.xaxisHeight+f,_&&(T+=3),P=!![],E=tt.call(this,o),a.xAxis.maxLevelToDisplay=E,r.k1h(156),z=r.F0D(E,L);for(var J in this.panels)if(U=this.panels[J],!(U.hidden||U.shareChartXAxis===!1)&&(r.k1h(97),N=r.G7m(U,A),C=U.yAxis,!!C)){g.save(),g.beginPath(),g.rect(U.left,U.top+(P?0:1),U.width,U.height-+"1"),g.clip(),P=![],D=new t.Plotter,D.newSeries(n,"stroke",this.canvasStyle("stx_grid")),D.newSeries(i,"stroke",this.canvasStyle("stx_grid_dark")),D.newSeries(e,"stroke",this.canvasStyle("stx_grid_border"));for(var at=0;at<o.length&&(q=o[at],!(q.level>E));at++)q.suppress||Math.floor(q.left)<=U.right&&(F=w&&q.grid===i&&(q.alwaysAsBoundary&&q.level<E||z),Math.floor(q.hz)>U.left&&(H&&(D.moveTo(q.grid,q.hz,C.top),D.lineTo(q.grid,q.hz,C.bottom)),N&&_&&(D.moveTo(e,q.hz,C.bottom+.5),D.lineTo(e,q.hz,C.bottom+6),F&&D.dashedLineTo(e,q.hz,C.bottom+ +"6"+f+3,["1"^0,3]))),N&&q.right>U.left&&(this.canvasColor(q.grid==i&&z||q.alwaysAsBoundary&&q.level<E?"stx_xaxis_dark":"stx_xaxis",g),!z&&q.boundaryOnlyText&&(q.text=q.boundaryOnlyText),g.fillText(q.text,q.hz,T+(F?f+3:0)),v&&(g.strokeStyle="red",g.strokeRect(q.left,T-f,q.unpaddedRight-q.left,f*+"2"),g.strokeStyle="green",g.strokeRect(q.unpaddedRight,T-f,q.right-q.unpaddedRight,f*2))));_&&(M=Math.round(C.bottom)+.5,I=Math.round(U.right)+.5,D.moveTo(e,U.left,M),D.lineTo(e,I,M)),D.draw(g),g.restore()}r.c4P(),g.textAlign=l,this.runAppend(c,p)},t.ChartEngine.prototype.createSpacedDateXAxis=function(a){var o=ot,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;r="t",r+="i",r+="c",r+="k",c="we",c+="ek",l="0",l+="0:00",a||(a=this.chart);var{lineBaseLevel:S}=t.ChartEngine.XAxis,{dataSegment:A,lineApproximation:_,market:T,maxTicks:P,xaxis:E,xAxis:z}=a,{candleWidth:U,interval:N,timeUnit:C}=this.layout;E.length=0;for(var D=+"0";D<P;D++){if(d=A[D],d&&D&&!E.length){T&&(s=this.standardMarketIterator(d.DT,z.adjustTimeZone?this.displayZone:null));for(var F=D;F>0;F--)h={},s&&!(_&&U<1)&&(h.DT=s.previous()),E.unshift(h);s=null}if(d||D&&E.length){if(p=d&&d.DT,d&&d.displayDate&&z.adjustTimeZone&&(p=d.displayDate),!p)if(T){if(N=="tick"&&!z.futureTicksInterval||_&&U<1||!z.futureTicks)break;s||(s=this.standardMarketIterator(A[D-1].DT,z.adjustTimeZone?this.displayZone:null)),p=s.next()}else continue;u={DT:p,data:null},D<A.length&&(u.data=d),E.push(u)}}g=[],a.tzOffsetCache||(a.tzOffsetCache=new Map),a.tzOffsetCache.size>2e4&&a.tzOffsetCache.clear(),f=a.tzOffsetCache,w=T&&T.market_def||{},v=(w.normal_daily_open||l).split(":"),o.k1h(56);var M=o.G7m(16,244,4,5,4);return m=Number(v[0])*M,w.hour_aligned||(m+=Number(v[1])),q=I=>{var L,O,B,R,H,W;L=I==="year"||N!==I&&C!==I?i:n,o.v95(),O=t.ChartEngine.XAxis.setPropertiesForInterval[I],B=a.left,E.forEach((X,Z)=>{var j,Q,et,V,K,tt,J,at;if(j=X.data&&X.data.candleWidth||U,Q=X.DT,Q)switch(V="t",V+="ick",K="w",K+="e",K+="e",K+="k",I){case"year":et=Q.getFullYear();break;case"month":et=Q.getMonth();break;case K:case"day":et=Q.getDate();break;case"minute":o.k1h(28);var ct=o.G7m(10,2690,75,3,11);et=Q.getHours()*ct+Q.getMinutes();break;case"second":et=Q.getSeconds();break;case"millisecond":case V:et=Q.getMilliseconds();break}if(L===n&&(o.k1h(100),B+=o.G7m(j,0,"2")),typeof et!="undefined"&&(L===n||R!==et)){if(tt=new t.ChartEngine.XAxisLabel({hz:B,grid:L,raw:et}),I==="minute"){if((!H||H.getDate()!==Q.getDate())&&(H=Q,J=T&&T.market_tz,at=`${+Q}|${J}|${this.displayZone}`,W=f.get(at),W===void 0)){o.A_p(134);var G=o.G7m(84e4,20,7,779973);W=(t.convertTimeZone(Q,this.displayZone,J).getTime()-Q)/G,f.set(at,W)}o.k1h(5),tt.marketOpenOffset=o.F0D(W,m)}O&&O(tt,X,T,this),tt.grid==n&&tt.level<S&&(tt.level+=S),(Z||L===n)&&g.push(tt),R=et}L===n?(o.k1h(41),B+=o.F0D(j,"2")):B+=j})},x=C||N,y=["year","month",c,"month","day","minute","second","millisecond",r],k=y.indexOf(x),k>"0">>32&&(x!=="tick"&&q(y[k-1]),q(y[k])),g}};xl=b=>{var t=ot,i,n,e,a;i=-1692914022,n=1589014345,e=2,t.c4P();for(var o=1;t.f0X(o.toString(),o.toString().length,+"94270")!==i;o++)a=b.CIQ,e+=2;t.f0X(e.toString(),e.toString().length,"43537"|1)!==n&&(a=b.CIQ),a.ChartEngine.prototype.createYAxis=function(r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N;if(!this.runPrepend("createYAxis",arguments)){if(l=r.chart,s=r.name==l.name,c||(c={}),c.noChange=!1,d=c.yAxis?c.yAxis:r.yAxis,a.ChartEngine.enableCaching&&d.high==r.cacheHigh&&d.low==r.cacheLow){t.k1h(92);var C=t.G7m(19,2,14,32);h=l.dataSet.length-l.scroll-C,t.k1h(115);var D=t.G7m(20,5,14);p=h+l.maxTicks+D,r.cacheLeft=h,r.cacheRight=p,c.noChange=!![]}else r.cacheLeft=1e6,t.A_p(39),r.cacheRight=-t.G7m("1",1),r.cacheHigh=d.high,r.cacheLow=d.low;if(u=l.xAxis.idealTickSizePixels||l.xAxis.autoComputedTickSizePixels,d.goldenRatioYAxis&&d.idealTickSizePixels!=u/("1.618"*1)&&(c.noChange=!1),!c.noChange){if(this.adjustYAxisHeightOffset(r,d),f=d.height=d.bottom-d.top,w=(d.high-d.low)/(f-d.zoom),!d.semiLog)if(c.ground){v=733103306,m=-357769175,q=+"2";for(var F=1;t.Y9k(F.toString(),F.toString().length,+"6579")!==v;F++)d.high=d.high+d.zoom*w,q+=2;t.f0X(q.toString(),q.toString().length,13309)!==m&&(d.high=d.high*(d.zoom+w))}else{t.k1h(157);var M=t.G7m(20,5,2,0,62);d.high=d.high+(d.zoom/M+d.scroll)*w,t.A_p(64);var I=t.G7m(15,24,9,46);d.low=d.low-(d.zoom/I-d.scroll)*w}(d.min||d.min===0)&&(d.low=d.min),(d.max||d.max===0)&&(d.high=d.max),d.shadow=d.high-d.low,d.semiLog&&(!this.activeDrawing||this.activeDrawing.name!="projection")&&(x=function(){var R;d.logHigh=Math.log(d.high)/Math.LN10,t.c4P(),R=Math.max(d.low,1e-9),d.logLow=Math.log(R)/Math.LN10,d.low<=0&&(d.logLow=0),d.logShadow=d.logHigh-d.logLow},d.semiLog&&x(),y=d.height/(d.height-d.zoom),d.flipped?(d.high=this.transformedPriceFromPixel(d.bottom+y*(d.zoom/2+d.scroll),r,d),d.low=this.transformedPriceFromPixel(d.top-y*(d.zoom/2-d.scroll),r,d)):(d.high=this.transformedPriceFromPixel(d.top-y*(d.zoom/2+d.scroll),r,d),d.low=this.transformedPriceFromPixel(d.bottom+y*(d.zoom/2-d.scroll),r,d)),d.shadow=d.high-d.low,d.semiLog&&x()),d.goldenRatioYAxis&&s&&d==r.yAxis?(t.A_p(30),d.idealTickSizePixels=t.F0D(u,1.618),d.idealTickSizePixels===0&&(S="stx",S+="_yaxis",k=this.getCanvasFontSize(S),t.A_p(39),d.idealTickSizePixels=t.G7m(k,5))):d.idealTickSizePixels||(A="stx_y",A+="axis",k=this.getCanvasFontSize(A),s?(t.A_p(49),d.idealTickSizePixels=t.G7m("5",k)):(t.A_p(158),d.idealTickSizePixels=t.F0D(2,"2",k))),_=Math.round(f/d.idealTickSizePixels),g=c.range?c.range[1]-c.range[0]:d.shadow,t.A_p(30),d.priceTick=Math.floor(t.F0D(g,_)),T=1;for(var L=0;L<10&&!(d.priceTick>0);L++)T*=10,d.priceTick=Math.floor(g/_*T)/T;if(L==+"10"&&(d.priceTick=1e-8),d.priceTick=Math.round(g/_*T)/T,P=Math.round(g/d.priceTick),c.range&&P<g&&!d.noEvenDivisorTicks){for(;P>=1&&g%P!==0;)P--;t.k1h(30),d.priceTick=t.G7m(g,P)}if(d.minimumPriceTick){E=d.minimumPriceTick,k=this.getCanvasFontSize("stx_yaxis");for(var O=0;O<+"100"&&(t.A_p(30),z=t.G7m(g,E),f/z<k*2);O++)E+=d.minimumPriceTick;O<100&&(d.priceTick=E)}}if((d.priceTick<=0||d.priceTick===1/0)&&(d.priceTick=1),d.multiplier=d.height/d.shadow,d.multiplier==1/0&&(d.multiplier=0),!d.decimalPlaces&&d.decimalPlaces!==0)if(s){U=+"0";for(var B=0;B<r.yAxis.shadowBreaks.length;B++)N=r.yAxis.shadowBreaks[B],r.yAxis.shadow<N[+"0"]&&(U=N[1]);d.printDecimalPlaces=U}else d.printDecimalPlaces=null;else d.printDecimalPlaces=d.decimalPlaces;this.runAppend("createYAxis",arguments)}},a.ChartEngine.prototype.drawYAxis=function(r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt;if(l="drawY",l+="Ax",l+="i",l+="s",c||(c={}),s=c.yAxis?c.yAxis:r.yAxis,!(r.hidden||s.noDraw||!s.width)){if((!a.Comparison||s.priceFormatter!=a.Comparison.priceFormat)&&(d=s.fractional,d?(s.originalPriceFormatter||(s.originalPriceFormatter={func:s.priceFormatter}),d.resolution||(d.resolution=s.minimumPrice),d.formatter||(d.formatter="'"),s.priceFormatter||(s.priceFormatter=function(dt,ht,pt){var ut,mt,gt,bt;if(!!d){ut="",pt<0&&(ut="-",pt=Math.abs(pt)),mt=Math.floor(Math.round(pt/d.resolution)*d.resolution),gt=Math.round((pt-mt)/d.resolution),t.v95(),bt=Math.floor(gt),t.k1h(159);var yt=t.F0D(11,4,10,13,1);t.A_p(50);var qt=t.F0D(179,5,3216);t.A_p(160);var St=t.G7m(15,2,16,2026,1996);t.A_p(8),t.F0D(8642,7,455),t.A_p(67);var Tt=t.F0D(10740,18,8968);t.k1h(67);var wt=t.F0D(9541,6,3);return ut+mt+d.formatter+(bt<yt?+"571.44"<qt?"0":St===181.39?"m":Tt==917.61?wt:"e":"")+bt+(gt-bt>=.5?"+":"")}})):s.originalPriceFormatter&&(s.priceFormatter=s.originalPriceFormatter.func,s.originalPriceFormatter=null)),h=this.colorOrStyle(s.textStyle||"stx_yaxis"),p=this.highlightedDraggable,u=0,p&&this.yaxisMatches(p,s)?u=.15:s.highlight&&(u=.1),u&&(g=h.constructor==String?h:h.color,s.setBackground(this,{color:g,opacity:u})),s.pretty)return this.drawYAxisPretty(r,c);if(!this.runPrepend(l,arguments)){if(!c.noDraw&&!s.noDraw){if(f=s.yAxisPlotter,!f||!c.noChange){if(w="t",w+="e",w+="x",w+="t",v="g",v+="r",v+="i",v+="d",f=s.yAxisPlotter=new a.Plotter,m=r.chart,q=r.name==m.name&&s.name===r.yAxis.name,!s.priceTick)return;if(x=s.shadow,y=c.range,y){k=456260421,S=+"1005058419",A=2;for(var J=+"1";t.Y9k(J.toString(),J.toString().length,32862)!==k;J++){t.A_p(113);var at=t.G7m(11,54,30,20,18);t.A_p(161);var ct=t.G7m(108,17,5,16,108);x=y[at]%y[ct],A+=2}if(t.Y9k(A.toString(),A.toString().length,46617)!==S){t.A_p(58);var G=t.F0D(4,7,7);x=y[G]%y["6"|0]}t.k1h(64);var Y=t.F0D(11,0,16,26);x=y[Y]-y["0"<<0]}if(_=x/s.priceTick,_=Math.round(_),s.semiLog&&(T=Math.log(this.valueFromPixel(s.flipped?s.top:s.bottom,r))/Math.LN10,P=(s.logHigh-s.logLow)/_),f.newSeries(v,"stroke",this.canvasStyle("stx_grid")),f.newSeries(w,"fill",h),f.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),E=0,z=y?y[1]:s.high,U=y?y[0]:s.low,N=s.displayBorder===null?m.panel.yAxis.displayBorder:s.displayBorder,this.axisBorders===!{}&&(N=!1),this.axisBorders===!!{}&&(N=!!{}),D=m.dynamicYAxis,F=D?s.width:NaN,M=this.getYAxisCurrentPosition(s,r),M=="left"?C=s.left+s.width:C=s.left,I=Math.round(C)+.5,L=N?+"3":+"0",M=="left"&&(L=N?-3:0),q)if(s.shadow<1){t.k1h(86);var it=t.G7m(1,7,20,2,5);t.k1h(0);var rt=t.F0D(4,0,4);E=(parseInt(U/s.priceTick,it)+rt)*s.priceTick-U}else E=s.priceTick-Math.round(U%s.priceTick*r.chart.roundit)/r.chart.roundit;else E=z%s.priceTick;O=this.getCanvasFontSize("stx_yaxis");for(var lt="0"^0;lt<_;lt++)s.semiLog?(t.A_p(130),R=t.G7m(P,lt,T),B=Math.pow(+"10",R)):q?B=U+lt*s.priceTick+E:B=z-lt*s.priceTick-E,H=this.pixelFromTransformedValue(B,r,s),W=Math.floor(H)+.5,!(W+O/2>r.bottom)&&(W-O/("2"|0)<r.top||Math.abs(W-s.bottom)<1||(s.flipped&&(W=s.top+s.bottom-W),s.displayGridLines&&(X="g",X+="r",X+="i",X+="d",f.moveTo("grid",r.left+1,W),f.lineTo(X,r.right-+"1",W)),N&&(Z="b",Z+="o",Z+="r",Z+="der",t.k1h(5),f.moveTo(Z,t.G7m(I,.5),W),t.k1h(10),f.lineTo("border",t.F0D(I,L),W)),s.priceFormatter?B=s.priceFormatter(this,r,B):B=this.formatYAxisPrice(B,r,null,s),j=s.textBackground?this.containerColor:null,Q=+"3",t.A_p(50),et=t.F0D(C,L,Q),M=="left"?(et=s.left+Q,s.justifyRight!==!{}&&(et=s.left+s.width+L-Q)):s.justifyRight&&(et=C+s.width),f.addText("text",B,et,W,j,null,O),D&&(F=Math.max(F,m.context.measureText(B).width+Math.abs(L)+Q))));if(N&&(V="b",V+="or",V+="de",V+="r",K=Math.round(s.bottom)+.5,f.moveTo("border",I,s.top),f.lineTo("border",I,K),f.draw(this.getBackgroundCanvas(m).context,V)),D&&F>s.width)throw s._dynamicWidth=F,this.calculateYAxisPositions(),new Error("reboot draw");if(!D&&s._dynamicWidth)throw tt="r",tt+="eboot dr",tt+="aw",this.resetDynamicYAxis({chartName:m.name}),new Error(tt)}s==r.yAxis&&this.plotYAxisGrid(r)}this.runAppend("drawYAxis",arguments)}}},a.ChartEngine.prototype.drawYAxisPretty=function(r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct;if(l="dr",l+="awYAxis",!this.runPrepend(l,arguments)&&(c||(c={}),s=c.yAxis||r.yAxis,t.v95(),!(r.hidden||s.noDraw||!s.width))){if(!c.noDraw){if(d=s.yAxisPlotter,!d||!c.noChange){if(d=s.yAxisPlotter=new a.Plotter,h=r.chart,!s.priceTick||isNaN(s.high)||isNaN(s.low))return;if(p=s.shadow,c.range){t.k1h(10);var G=t.G7m(0,1);p=c.range[G]-c.range[0]}u=(s.height-(c.range?s.zoom:+"0"))/s.idealTickSizePixels,u=Math.round(u),g=s.textStyle||"stx_yaxis",d.newSeries("grid","stroke",this.canvasStyle("stx_grid")),d.newSeries("text","fill",this.colorOrStyle(g)),d.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),f=c.range,w=f?f[1]:s.high,v=f?f[0]:s.low,m=s.displayBorder===null?h.panel.yAxis.displayBorder:s.displayBorder,this.axisBorders===![]&&(m=!1),this.axisBorders===!0&&(m=!0),x=h.dynamicYAxis,y=x?s.width:NaN,k=this.getYAxisCurrentPosition(s,r),k=="left"?q=s.left+s.width:q=s.left,S=Math.round(q)+.5,A=m?3:0,k=="left"&&(A=m?-3:0),_=this.getCanvasFontSize("stx_yaxis"),T=s.increments,P=T.length,E=0,z=1,U=0,N=0,t.k1h(72),C=t.F0D(32,"0"),D=Number.MAX_VALUE;for(var Y=+"0";Y<100;Y++){t.k1h(10);var it=t.G7m(1,9);if(U=T[E]*Math.pow(it,C),t.k1h(30),z=Math.floor(t.F0D(p,U)),t.k1h(5),F=Math.abs(t.F0D(u,z)),F>D)break;if(D=F,z==u){N=U;break}else z>u?(E++,E>=P&&(E=0,C++)):(E--,E<0&&(t.k1h(5),E=t.G7m(P,1),C--));N=U}if(M=Math.ceil(v/N)*N,I=s.bottom-this.pixelFromTransformedValue(M,r,s),L=0,I>s.idealTickSizePixels&&s.semiLog&&s.prettySemiLog&&w-v>10){for(O=Math.ceil(v),B=0;M-O>=1e4&&B<=15;)M/=10,O/=10,B++;for(M=Math.ceil(M),O=Math.ceil(O),O;O<M&&M%O!==0;++O);M*=Math.pow(10,B),O*=Math.pow(10,B),O<M&&(M===N&&(N=O,L=O),M=O)}if(s.height>s.zoom){R="stx",R+="_yaxis",H=0,W=Number.MAX_VALUE,h.context.save(),this.canvasFont(R,h.context),t.k1h(5);var rt=t.G7m(10,8);X=s.shadow/N+rt;for(var lt=0;lt<X&&(Z="l",Z+="e",Z+="ft",t.A_p(130),j=t.F0D(N,H,M),!(j>w));lt++){if(N+=L,H++,Q=this.pixelFromTransformedValue(j,r,s),W-Q<_+1&&L>0){W=Number.MAX_VALUE,N=L,L*=2,lt=H=0,X=s.shadow/N+ +"1",d.reset();continue}if(W=Q,et=Math.floor(Q)+.5,!(et+_/2>s.bottom)&&!(et-_/+"2"<s.top)&&!(Math.abs(et-s.bottom)<1)){if(s.displayGridLines&&(d.moveTo("grid",r.left+("1"<<64),et),d.lineTo("grid",r.right-1,et)),m&&(t.A_p(162),d.moveTo("border",t.G7m("0.5",1,S),et),t.A_p(10),d.lineTo("border",t.F0D(S,A),et)),s.priceFormatter?j=s.priceFormatter(this,r,j):j=this.formatYAxisPrice(j,r,null,s),V=s.textBackground?this.containerColor:null,K=tt=3,t.A_p(50),J=t.G7m(q,A,K),k==Z){t.A_p(123);var dt=t.F0D(3,20,23,3);J=s.left+dt,s.justifyRight!==!1&&(J=s.left+s.width+A-K)}else s.justifyRight&&(J=q+s.width-tt);d.addText("text",j,J,et,V,null,_),x&&(t.A_p(10),at=t.G7m(j,"\xA0"),y=Math.max(y,h.context.measureText(at).width+Math.abs(A)+K))}}h.context.restore(),lt>=X&&(t.A_p(10),console.log(t.F0D("drawYAxisPretty: assertion error. zz reached ",X)))}if(m&&(ct=Math.round(s.bottom)+ +"0.5",d.moveTo("border",S,s.top),d.lineTo("border",S,ct),d.draw(this.getBackgroundCanvas(h).context,"border")),x&&y>s.width)throw s._dynamicWidth=y,this.calculateYAxisPositions(),new Error("reboot draw");if(!x&&s._dynamicWidth)throw this.resetDynamicYAxis({chartName:h.name}),new Error("reboot draw")}s==r.yAxis&&this.plotYAxisGrid(r)}this.runAppend("drawYAxis",arguments)}}};Yt={};zc(Yt);Bc(Yt);Oc(Yt);Rc(Yt);Nc(Yt);Hc(Yt);Vc(Yt);Wc(Yt);jc(Yt);Kc(Yt);Gc(Yt);Yc(Yt);Qc(Yt);Xc(Yt);Zc(Yt);Jc(Yt);$c(Yt);tl(Yt);el(Yt);il(Yt);al(Yt);ot.c4P();ol(Yt);nl(Yt);rl(Yt);sl(Yt);cl(Yt);ll(Yt);dl(Yt);hl(Yt);pl(Yt);ul(Yt);fl(Yt);gl(Yt);ml(Yt);bl(Yt);vl(Yt);xl(Yt);var{CIQ:nt,SplinePlotter:yl,timezoneJS:ql,$$:wl,$$$:kl}=Yt,da=[];nt.UI||(nt.UI={});nt.UI.stxtap=function(b,t,i){!b||(nt.installTapEvent(b),typeof i=="string"&&(b=b.querySelector(i)),b&&b.addEventListener("stxtap",t))};nt.UI.addResizeListener=function(b,t){nt.UI.getUIManager(b).registerForResize(b),b.resizeHandle=nt.resizeObserver(b,t,null)};nt.UI.removeResizeListener=function(b){nt.UI.getUIManager(b).unregisterForResize(b),nt.resizeObserver(b,null,b.resizeHandle)};nt.UI.containerExecute=function(b,t,i){var n=i;i&&n.constructor!==Array&&(n=Array.prototype.slice.call(arguments,2));for(var e=b.parentElement;e;){if(e[t]&&e[t].constructor==Function)return e[t].apply(e,n);e=e.parentElement}return null};nt.UI.animatePrice=function(b,t,i,n){b[0]&&(b=b[0]),b.timeoutHandle&&(clearTimeout(b.timeoutHandle),b.timeoutHandle=null),b.classList.remove("cq-stable","cq-up","cq-down"),t>i?b.classList.add("cq-up"):t<i&&b.classList.add("cq-down"),n&&(b.timeoutHandle=setTimeout(function(){b.classList.add("cq-stable").classList.remove("cq-up","cq-down")},0))};nt.UI.makeFromTemplate=function(b,t){typeof b=="string"&&(b=document.querySelector(b)),b[0]&&nt.UI.$(b)[0]==b[0]&&(b=b[0]);var i=b.content,n;function e(r){return function(c){r.appendChild(c.cloneNode(!0))}}function a(r){return function(c){r===!0?b.parentElement.appendChild(c):r[0]?r[0].appendChild(c):r.appendChild(c)}}i.childNodes.length?n=document.importNode(i,!0):(i=document.createElement("DIV"),Array.from(b.children).forEach(e(i)),n=i.cloneNode(!0));var o=Array.from(n.children);return t&&o.forEach(a(t)),nt.UI.$(o)};nt.UI.splitMethod=function(b){if(!b)return null;var t=b.indexOf("("),i=b.lastIndexOf(")");if(t==-1||i==-1)return console.log("malformed stxtap attribute: "+b),null;var n=null,e,a=b.substring(0,t),o=a.indexOf(".");o==-1?e=a:(n=a.substring(0,o),e=b.substring(o+1,t));var r=b.substring(t+1,i),c=r.match(/('[^']+'|[^,]+)/g),l=new RegExp("^[0-9]+([,.][0-9]+)?$","g"),s=new RegExp("^\\d+$"),d=[];if(c)for(var h=0;h<c.length;h++){for(var p=c[h];p.charAt(0)==" ";)p=p.substring(1);if(p.indexOf('"')!=-1||p.indexOf("'")!=-1)d.push(p.substring(1,p.length-1));else if(p=="true")d.push(!0);else if(p=="false")d.push(!1);else if(p=="null")d.push(null);else if(s.test(p))d.push(parseInt(p,10));else if(l.test(p))d.push(parseFloat(p));else{for(var u=p.split("."),g=window,f=0;f<u.length;f++)g=g[u[f]];d.push(g)}}return{helperName:n,functionName:e,args:d}};nt.UI.observeProperty=function(b,t,i){if(!(!t||!b||!i)){b in t||(t[b]=void 0),nt.UI.observables||(nt.UI.observables={});var n=nt.UI.observables;n[b]||(n[b]=[]);for(var e,a=0;a<n[b].length;a++){var o=n[b][a];o.obj==t&&(e=o)}e||(e={obj:t,value:t[b],listeners:[]},n[b].push(e)),e.listeners.push(i),i({obj:t,property:b,value:e.value}),Object.defineProperty(t,b,{enumerable:!0,configurable:!0,get:function(){return e.value},set:function(r){if(e.value!==r){e.value=r;for(var c={obj:t,property:b,value:r},l=0;l<e.listeners.length;l++)e.listeners[l](c)}}})}};nt.UI.unobserveProperty=function(b,t,i){if(!(!b||!t||!nt.UI.observables)){var n=nt.UI.observables[b];if(n){for(var e=n.length-1;e>=0;e--){var a=n[e];if(a.obj==t){if(i)for(var o=a.listeners,r=o.length-1;r>=0;r--)o[r]===i&&o.splice(r,1);(!i||!a.listeners.length)&&(Object.defineProperty(t,b,{enumerable:!0,configurable:!0,writable:!0,value:a.value}),n.splice(e,1))}}n.length||delete nt.UI.observables[b]}}};nt.UI.getMyContext=function(b,t){for(t&&(b=b.closest("cq-context, *[cq-context]")||b);b;){if(b.context)return b.context;if(b.CIQ&&b.CIQ.UI)return b.CIQ.UI.context;b=b.parentElement}return null};nt.UI.contextsForEach=function(b,t){var i=((t||{}).ownerDocument||document).querySelectorAll("cq-context,*[cq-context]");i.forEach(function(n){n.CIQ&&n.CIQ.UI&&n.CIQ.UI.context&&b.apply(n.CIQ.UI.context)})};nt.UI.release=!1;nt.UI.bypassBindings=!1;nt.UI.begin=function(b){nt.UI.release=!0,setTimeout(function(){Qt.nextTick(),b&&b()},0)};nt.UI.activatePluginUI=function(b,t){const{uiContext:i={},container:n}=b,e=i.topNode||n.closest("cq-context");e&&e.setAttribute(t.toLowerCase()+"-active","")};nt.UI._webcomponents={list:{}};nt.UI.addComponentDefinition=function(b,t){const i=!!nt.UI.registerComponentsImmediately;nt.ensureDefaults(nt.UI._webcomponents,{registered:i}),nt.UI._webcomponents.list[b]={tag:b,classDefinition:t,registered:i},i&&customElements.define(b,t)};nt.UI.registerComponents=function({except:b=[]}={}){const{exceptions:t={}}=nt.UI._webcomponents;b.forEach(e=>t[e]=!0),nt.UI._webcomponents.exceptions=t;const{list:i}=nt.UI._webcomponents;Object.keys(i).filter(e=>!b.includes[e]).forEach(e=>{const a=i[e];a&&!a.registered&&!t[e]&&(customElements.define(e,a.classDefinition),a.registered=!0)})};nt.UI.ensureComponentsRegistered=function(){nt.UI.registerComponents()};nt.UI.components=function(b){return Object.values(nt.UI._webcomponents.list).filter(({tag:i,classDefinition:n})=>!b||b===i||b===n.name||b===n)};nt.UI.componentMarkup=function(b,t){const i=this.components(b);if(t===void 0){if(!i.length)return;const a=i.map(e);return b?a[0]:a}const[n]=i;if(!n||!n.classDefinition.markup)return;return n.classDefinition.markup=t,e(n);function e(a){const{tag:o,registered:r,classDefinition:{markup:c,name:l}}=a;return{tag:o,name:l,registered:r,markup:c}}};nt.UI.markupDependencies=function(){const b=nt.UI.componentMarkup(),t={};b.forEach(n=>{if(n.markup)for(let e in nt.UI._webcomponents.list){const a=nt.UI._webcomponents.list[e];n.markup.indexOf("</"+a.tag+">")>-1&&(t[n.tag]||(t[n.tag]=[]),t[n.tag].push(a.tag))}});const i={};for(let n in t)t[n].forEach(e=>{i[e]=(i[e]||0)+1});return{dependencies:t,timesNeeded:i}};nt.UI.addInheritance=function(b,t){for(var i in t.prototype)try{b.prototype[i]=t.prototype[i]}catch{}};var lr={};nt.UI.supportedInputType=function(b){if(!lr[b]){var t=document.createElement("input");t.setAttribute("type",b),lr[b]=t.type}return lr[b]};nt.UI.flattenInheritance=function(b,t){Object.getOwnPropertyNames(t.prototype).forEach(i=>{if(["constructor","connectedCallback","disconnectedCallback","attributeChangedCallback","adoptedCallback"].indexOf(i)===-1){const n=Object.getOwnPropertyDescriptor(t.prototype,i);n&&Object.defineProperty(b,i,n)}})};nt.UI.Context=function(b,t,i){this.params=i||{},this.stx=b,b&&(b.uiContext=this),this.node=nt.UI.$(t),this.topNode=this.node[0],nt.isMobile&&t.setAttribute("ciq-mobile","");var n=nt.UI.Context.assembleContext(t);this.advertised={};for(var e=t.CIQ.UI.context=this,a=[],o=0;o<n.Components.length;o++)a.push(n.Components[o].tagName.toLowerCase());a.length&&this.topNode.querySelectorAll(a.join(",")).forEach(function(r){r.setContextPrivate(e)})};var Ni=nt.UI.Context;Ni.assembleContext=function(b){return b.CIQ||(b.CIQ={}),b.CIQ.UI||(b.CIQ.UI={}),b.CIQ.UI.Components||(b.CIQ.UI.Components=[]),b.CIQ.UI};Ni.prototype.changeSymbol=function(b,t){console.log("Please implement CIQ.UI.Context.prototype.changeSymbol")};Ni.prototype.setLookupDriver=function(b){this.lookupDriver=b,b.deprecated&&console.warn("Using deprecated Lookup Driver, please see documentation: CIQ.ChartEngine.Driver.Lookup")};Ni.prototype.advertiseAs=function(b,t){this.advertised[t]=b};Ni.prototype.getAdvertised=function(b){return this.advertised[b]};Ni.prototype.setLoader=function(b){this.loader=b};Ni.prototype.isModal=function(){return this.stx.openDialog!==""};Ni.prototype.isLegendKeyboardActive=function(){const{topNode:b}=this,t=(b.closest("cq-context")||b).querySelectorAll("cq-study-legend.ciq-active, cq-menu.cq-comparison-new.stxMenuActive");return!!Array.from(t).find(i=>{if(i.classList.contains("ciq-active")&&i.keyboardNavigation||i.classList.contains("stxMenuActive")&&i.parentElement.keyboardNavigation)return!0})};class Qt extends HTMLElement{constructor(){super(),this.node=nt.UI.$(this),this.eventListeners=[]}connectedCallback(){this.attached||(Qt.buildReverseBindings(this),this.attached=!0)}adoptedCallback(){nt.UI.flattenInheritance(this,Qt)}disconnectedCallback(){if(!this.doNotDisconnect&&(this.attached=!1,this.context)){for(var t=0;t<this.eventListeners.length;t++)this.context.stx.removeEventListener(this.eventListeners[t]);this.eventListeners=[]}}addDefaultMarkup(t,i){const n=t||this;if((a=>a.children.length===0)(n)&&(n.constructor.markup||i)){const a=+new Date,o=i||n.constructor.markup;if(n.ownerDocument!==document){const r=document.createElement("template");r.innerHTML=o,document.body.append(r),n.append(document.importNode(r.content,!0)),r.remove()}else n.innerHTML=o;if(Qt.buildReverseBindings(n),nt.debug){const r=+new Date-a;Qt.createMarkupTime=r+(Qt.createMarkupTime||0),console.log("Building markup "+this.constructor.name+" "+(this.getAttribute("cq-name")||"")+" built in="+r,"total="+Qt.createMarkupTime)}if(nt.I18N&&nt.I18N.localized){const r=nt.getFromNS(this,"context.stx.preferences.language");nt.I18N.translateUI(r,n)}}}channelWrite(t,i,n){const{obj:e,prop:a}=nt.UI.BaseComponent.getChannel(t,n,this);!e||(e[a]=i)}channelMergeObject(t,i,n){const{obj:e,prop:a}=nt.UI.BaseComponent.getChannel(t,n,this);!e||(e[a]=Object.assign({},e[a],i))}channelRead(t,i){const{obj:n,prop:e}=nt.UI.BaseComponent.getChannel(t,i,this);if(!!n)return n&&n[e]}channelSubscribe(t,i,n){const{obj:e,prop:a}=nt.UI.BaseComponent.getChannel(t,n,this);if(!e)return;function o({value:r}){i(r)}return nt.UI.observeProperty(a,e,o),()=>{nt.UI.unobserveProperty(a,e,o)}}qs(t,i){return i==="thisChart"&&(i=this.getContextContainer()),(i||document).querySelector(t)}qsa(t,i){return i==="thisChart"&&(i=this.getContextContainer()),Array.prototype.slice.call((i||document).querySelectorAll(t)||[])}getContextContainer(t){return t?Qt.selfOrParentElement(t,"cq-context"):(this.contextContainer||(this.contextContainer=Qt.selfOrParentElement(this,"cq-context")),this.contextContainer)}getChartContainer(t){return Qt.selfOrParentElement(t||this,"ciq-chart")}static getHelper(t,i,n){if(!!t){if(!i&&(i=t.getAttribute(n),!i))return null;var e,a=i.indexOf("("),o=i.substring(0,a),r=i.indexOf(".");if(a==-1||o.indexOf(".")!=-1){var c=r===-1?i:i.substring(0,r),l=t.context;if(l||(t.context||(t.context=nt.UI.getMyContext(t)),l=t.context),!l){const h=t.closest("cq-context, [cq-context]");return h?(h.bindingInitiated&&console.log("No context attached to "+t.tagName+". A context is required when binding to a helper."),null):(console.log(t.tagName+" is not inside cq-context element. A context element is required when binding to a helper."),null)}e=nt.UI.getMyContext(t,!0).getAdvertised(c)}else for(var s=i.substring(0,a),d=t.parentElement;d;){if(typeof d[s]=="function")return d;d=d.parentElement}return e}}static activate(t,i,n,e){var a=e?"stxsetget":"stxtap",o=nt.UI.splitMethod(t.getAttribute(a));if(!!o){var r=o.helperName,c=o.functionName;e&&(c="set"+c);var l=[{node:t,e:i,params:n}].concat(o.args);if(r){var s=Qt.getHelper(t,null,a);if(!s[c]){console.log("Method '"+c+"' not found in helper",s);return}s[c].apply(s,l)}else for(var d=t.parentElement;d;)typeof d[c]=="function"&&d[c].apply(d,l),d=d.parentElement}}makeTap(t,i){Qt.makeTap(t,i)}static makeTap(t,i){t.selectFC=i,nt.UI.stxtap(t,i)}static bindNode(t,i){var n,e=t.getAttribute("stxbind"),a=t.getAttribute("stxtap"),o=t.getAttribute("stxsetget");function r(s){var d,h=e.indexOf("(");d=e.substring(e.indexOf(".")+1),h!==-1&&(d=e.substring(0,h)),s&&s[d](t)}if(e&&e!==""){if(n=Qt.getHelper(t,e,"stxbind"),!n)return!1;r(n)}function c(s){return function(d){Qt.activate(s,d,i,!1)}}a&&a!==""&&(t.tagName=="INPUT"&&(t.type==="text"||t.type==="number")?Qt.inputEntry(t,c(t)):Qt.makeTap(t,c(t)));function l(s){function d(){return function(g){Qt.activate(t,g,i,!0)}}var h=nt.UI.splitMethod(o);if(!h){console.log("Syntax error "+o);return}var p=[t].concat(h.args).concat(i),u="get"+h.functionName;s&&s[u]&&s[u].apply(s,p),t.type==="text"||t.type==="number"?Qt.inputEntry(t,d()):Qt.makeTap(t,d())}if(o){if(n=Qt.getHelper(t,o,"stxsetget"),!n)return!1;l(n)}return!0}static scheduleForBinding(t,i){Qt.scheduledBindings.push({node:t,parentTag:i}),Qt.timeout&&clearTimeout(Qt.timeout),Qt.timeout=setTimeout(Qt.nextTick,0)}inputEntry(t,i){Qt.inputEntry(t,i)}static inputEntry(t,i){t.addEventListener("keypress",function(n){switch(n.which){case 13:case 9:i()}})}addClaim(t){da.find(n=>{if(n.helper==t)return!0})||da.push({helper:t})}removeClaim(t){for(var i=0;i<da.length;i++)if(da[i].helper===t){da.splice(i,1);return}}static buildReverseBindings(t){if(!nt.UI.bypassBindings){var i=function(a){if(a.hasAttribute("stxbind")||a.hasAttribute("stxtap")||a.hasAttribute("stxsetget"))return NodeFilter.FILTER_ACCEPT},n=t.ownerDocument.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,nt.isIE?i:{acceptNode:i}),e;for(e=n.nextNode();e;)Qt.scheduleForBinding(e,t),e=n.nextNode()}}static nextTick(){if(!!nt.UI.release){clearTimeout(Qt.timeout);for(var t=Qt.scheduledBindings,i=t.length-1;i>=0;i--){var n=t[i];n.node.ciqAlreadyBound||(n.node.ciqAlreadyBound=Qt.bindNode(n.node,{parent:n.parentTag}))}}}static selfOrParentElement(t,i){let n=t;for(;n;){if(n.classList.contains(i)||n.getAttribute(i)!==null||n.nodeName.toLowerCase()===i)return n;n=n.parentElement}}static toPropAndObject(t,i){const n=t.split("."),e=n.pop(),a=n.reduce((o,r)=>o[r]!==void 0?o[r]:o[r]={},i);return{prop:e,obj:a}}static getChannel(t,i,n){if(!t)return console.warn("Missing channel path"),{};if(!i&&!n)return console.warn("Chart engine not provided while retrieving ",t),{};!i&&!n.stx&&(n.container||(n.container=nt.UI.getMyContext(n)),n.stx=n.container.stx);const{obj:e,prop:a}=Qt.toPropAndObject(t,i||n.stx);return{obj:e,prop:a}}findFocused(t){return Array.from(t||[]).filter(i=>i.matches("[cq-focused]"))}findKeyboardActive(t){return Array.from(t).filter(i=>i.matches("[cq-keyboard-active]"))}focusNextItem(t,i,n){const e=this.findFocused(t);let a=-1;if(e.length)for(a=0;a<t.length&&t[a]!==e[0];a++);const o=a;if(i)do{if(a--,a<0)if(n)a=t.length-1;else break;if(a==o)break}while(!nt.trulyVisible(t[a])||t[a].getAttribute("keyboard-selectable")==="false");else do{if(a++,a>=t.length)if(n)a=0;else break;if(a==o)break}while(!nt.trulyVisible(t[a])||t[a].getAttribute("keyboard-selectable")==="false");return a>-1&&a<t.length&&t[a]!==e[0]?(this.removeFocused(t),this.focusItem(t[a]),t[a]):!1}focusItem(t){t.setAttribute("cq-focused","true"),this.highlightItem(t),t.tagName=="INPUT"&&this.clickItem(t)}removeFocused(t){t||(t=this.querySelectorAll("[cq-focused]")),t.forEach(i=>{i.removeAttribute("cq-focused"),i.blur()})}highlightItem(t){if(!t||!this.keyboardNavigation||!this.keyboardNavigation.highlightPosition)return;const{x:i,y:n,width:e,height:a}=t.getBoundingClientRect();this.keyboardNavigation.highlightPosition({element:t,position:{x:i,y:n,width:e,height:a}})}highlightFocusedItem(t){let i=this.findFocused(t);i.length&&this.highlightItem(i[0])}clickItem(t,i,n){if(!!t)return t.selectFC?t.selectFC.call(t,i):(t.focus(),t.setAttribute("cq-keyboard-active","true"),n&&(t.keyboardOriginationElement=n),t.dispatchEvent(new Event("pointerdown")),t.dispatchEvent(new Event("pointerup"))),!0}deactivateItem(t){t.blur(),t.removeAttribute("cq-keyboard-active")}clickFocusedItem(t,i){let n=this.findFocused(t);n.length&&this.clickItem(n[0],i)}}Qt.scheduledBindings=[];nt.UI.BaseComponent=Qt;class xn extends Qt{constructor(){super(),this.injections=[]}connectedCallback(){this.attached||(this.setContextHolder(),super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),nt.UI.flattenInheritance(this,xn)}disconnectedCallback(){if(!(this.doNotDisconnect||this.parentElement&&this.parentElement.doNotDisconnect)){if(this.attached=!1,this.context){var t;for(t=0;t<this.injections.length;t++)this.context.stx.removeInjection(this.injections[t]);for(this.injections=[],t=0;t<this.eventListeners.length;t++)this.context.stx.removeEventListener(this.eventListeners[t]);this.eventListeners=[]}this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}}setContextHolder(){var t=this.closest("cq-context,*[cq-context]");if(!t){console.log("No cq-context found for "+this.tagName);return}var i=t,n=Ni.assembleContext(i);n.Components.push(this),n.context&&this.setContextPrivate(n.context)}setContext(t){}setContextPrivate(t){this.context=t,this.uiManager=nt.UI.getUIManager(t.topNode),this.hasAttribute("cq-marker")&&!this.convertedToMarker&&(this.convertedToMarker=!0,this.marker=new nt.Marker({stx:t.stx,node:this,xPositioner:"none",yPositioner:"none",label:"component",permanent:!0})),this.timeout=setTimeout(function(i,n){return function(){i.setContext(n),i.timeout=null}}(this,t))}addInjection(t,i,n){this.injections.push(this.context.stx[t](i,n))}}nt.UI.ContextTag=xn;class Jr extends xn{constructor(){super()}connectedCallback(){this.attached||(this.onpointerover=function(){this.modalBegin()},this.onpointerout=function(){this.modalEnd()},super.connectedCallback())}adoptedCallback(){super.adoptedCallback(),nt.UI.flattenInheritance(this,Jr)}modalBegin(){!this.context||this.context.stx.modalBegin()}modalEnd(){!this.context||this.uiManager.activeMenuStack.length||this.context.stx.modalEnd()}}nt.UI.ModalTag=Jr;class $r extends Qt{constructor(){super()}adoptedCallback(){super.adoptedCallback(),nt.UI.flattenInheritance(this,$r)}close(){var t=this.closest("cq-dialog");t&&t.close(),Array.from(this.querySelectorAll("cq-swatch")).forEach(function(i){i.colorPicker&&i.colorPicker.close()})}open(t){t&&t.context&&this.setContext(t.context);var i=this.tagName.toLowerCase(),n=this.closest("cq-dialog,cq-menu");n.addActiveAttribute(i),n.open(t)}setContext(t){this.node.find("[stxtap],[stxbind],[stxsetget]").each(function(){this.context=t}),this.context=t}}nt.UI.DialogContentTag=$r;nt.UI.defaultSwatchColors=["#8ec648","#00afed","#ee652e","#912a8e","#fff126","#e9088c","#ea1d2c","#00a553","#00a99c","#0056a4","#f4932f","#0073ba","#66308f","#323390"];nt.UI.pickSwatchColor=function(b,t){if(!b.context||!t)return;const{stx:i}=b.context,{chart:n,crossSection:e}=i,a=new Set;let o=t.style.backgroundColor;if(e)for(const l in e.curves){let s=e.curves[l];a.add(nt.convertToNativeColor(s.color))}else for(const l in n.series){var r=n.series[l];!r.parameters.isComparison||a.add(nt.convertToNativeColor(r.parameters.color))}if(!(o!==""&&!a.has(o)))for(var c=0;c<b.swatchColors.length;c++){const l=b.swatchColors[c];if(!a.has(l)){t.style.backgroundColor=l,t.value=l;return}}};nt.UI.Helper=function(b,t){this.node=b,this.context=t};nt.UI.Helper.prototype.addInjection=function(b,t,i){this.injections=this.injections||[],this.injections.push(this.context.stx[b](t,i))};nt.UI.Helper.prototype.addObserver=function({base:b,path:t,listener:i}){const{obj:n,member:e}=nt.deriveFromObjectChain(b,t);nt.UI.observeProperty(e,n,i),this.observers=this.observers||[],this.observers.push({base:b,path:t,listener:i,isEngine:b instanceof nt.ChartEngine})};nt.UI.Helper.prototype.changeContext=function(b){this.stx&&(this.stx=b.stx),this.context&&(this.context=b),this.implementation&&this.implementation.stx&&(this.implementation.stx=b.stx),(this.observers||[]).forEach(n=>{const{path:e,listener:a,isEngine:o}=n;t(n.base,e,a),i(o?b.stx:b,e,a)}),this.stx&&(this.stx=b.stx),this.context&&(this.context=b);function t(n,e,a){let{obj:o,member:r}=nt.deriveFromObjectChain(n,e);nt.UI.unobserveProperty(r,o,a)}function i(n,e,a){let{obj:o,member:r}=nt.deriveFromObjectChain(n,e);nt.UI.observeProperty(r,o,a)}};nt.UI.Helper.prototype.destroy=function(){if(this.injections)for(var b=0;b<this.injections.length;b++)this.context.stx.removeInjection(this.injections[b]);this.injections=[],(this.observers||[]).forEach(({base:t,path:i,listener:n})=>{const{obj:e,member:a}=nt.deriveFromObjectChain(t,i);nt.UI.unobserveProperty(a,e,n)}),this.observers=[]};nt.UI.HeadsUp=function(b,t,i){this.params=i||{},typeof this.params.autoStart=="undefined"&&(this.params.autoStart=!0),this.node=b,b.remove(),this.context=t,this.injections=[],this.maxVolume={lastCheckDate:null,value:0},this.params.autoStart&&this.begin()};nt.inheritsFrom(nt.UI.HeadsUp,nt.UI.Helper);nt.UI.HeadsUp.prototype.begin=function(){if(!this.injections.length&&!!nt.Marker){nt.Marker.HeadsUp||(nt.Marker.HeadsUp=function(t,i){this.className||(this.className="CIQ.Marker.HeadsUp"),nt.Marker.call(this,t),this.prevTick=null,this.showClass=i},nt.inheritsFrom(nt.Marker.HeadsUp,nt.Marker,!1),nt.Marker.HeadsUp.placementFunction=function(t){function i(v,m,q,x){return Math.round(q-v.pixelFromPrice(x,m))}var n=t.panel,e=n.chart,a=t.stx,o=a.chart.highLowBars;t.showClass||(t.showClass="stx-show");for(var r=0;r<t.arr.length;++r){var c=t.arr[r],l=c.node,s=l.classList;if(n.hidden||!a.insideChart){s.remove(t.showClass);return}if(c.params.x<0||c.params.x>=e.dataSet.length){s.remove(t.showClass);return}if(a.currentVectorParameters.vectorType){s.remove(t.showClass);return}var d=e.dataSet[c.params.x],h=a.pixelFromTick(c.params.x);if(!d||h<e.left||h>e.right){s.remove(t.showClass);return}if(!d[a.chart.defaultPlotField]&&d[a.chart.defaultPlotField]!==0){s.remove(t.showClass);return}s.add(t.showClass);var p=nt.elementDimensions(l);c.clientWidth||(c.clientWidth=p.width),c.clientHeight||(c.clientHeight=p.height),c.clientWidth>h?(s.remove("stx-left"),s.add("stx-right"),Object.assign(c.node.style,{left:h+"px",right:"auto"})):(s.add("stx-left"),s.remove("stx-right"),Object.assign(c.node.style,{right:a.chart.canvasWidth-h+"px",left:"auto"}));var u,g=c.params.chartContainer?a.chart.canvasHeight:n.bottom;o?u=i(a,n,g,a.getBarBounds(d)[n.yAxis.flipped?"low":"high"]):u=i(a,n,g,d[a.chart.defaultPlotField]);var f=g-u-c.clientHeight;f<0?(s.add("stx-below"),u=(o?i(a,n,g,a.getBarBounds(d).low):u)-c.clientHeight):s.remove("stx-below");var w=u+"px";c.node.style.bottom!=w&&(c.node.style.bottom=w)}});var b;this.params.followMouse?(this.node.style.top="auto",b={stx:this.context.stx,label:"headsup",xPositioner:"bar",chartContainer:!0,x:0,node:this.node},this.marker=new nt.Marker.HeadsUp(b,this.params.showClass),this.addInjection("append","handleMouseOut",function(t){return function(){t.followMouse(-1)}}(this))):this.params.staticNode||(Object.assign(this.node.style,{top:"",left:""}),b={stx:this.context.stx,label:"headsup",xPositioner:"none",chartContainer:!1,node:this.node},nt.extend(b,this.params),this.marker=new nt.Marker(b)),this.calculateMaxVolume(),this.addInjection("prepend","headsUpHR",function(t){return function(){t.position()}}(this)),this.addInjection("append","createXAxis",function(t){return function(){t.position()}}(this)),this.addInjection("append","createDataSet",function(t){return function(i,n,e){t.calculateMaxVolume(e.appending)}}(this))}};nt.UI.HeadsUp.prototype.end=function(){this.marker&&this.marker.remove(),this.destroy(),this.marker=null};nt.UI.HeadsUp.prototype.calculateMaxVolume=function(b){b||(this.maxVolume={lastCheckDate:null,value:0});var t=this.context.stx.chart.dataSet;if(!(!t||!t.length)){for(var i=t.length-1;i>=0;i--){var n=t[i];if(n.DT<this.maxVolume.lastCheckDate)break;n.Volume>this.maxVolume.value&&(this.maxVolume.value=n.Volume)}this.maxVolume.lastCheckDate=t[t.length-1].DT}};nt.UI.HeadsUp.prototype.position=function(){var b=this.context.stx,t=b.barFromPixel(b.cx);this.tick=b.tickFromPixel(b.cx);var i=b.chart.xaxis[t],n=b.chart.defaultPlotField,e=b.chart.highLowBars;(!n||e)&&(n="Close");var a=this.node,o=this;function r(s){var d="",h=b.layout.chartScale,p=b.chart.panel,u=b.chart.yAxis;return u.originalPriceFormatter&&u.originalPriceFormatter.func?d=u.originalPriceFormatter.func(b,p,s):u.priceFormatter&&h!="percent"&&h!="relative"?d=u.priceFormatter(b,p,s):d=b.formatYAxisPrice(s,p),d.replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}function c(){var s=nt.UI.$(a);o.timeout=null,s.find("cq-hu-price").text("N/A"),s.find("cq-hu-open").text("N/A"),s.find("cq-hu-close").text("N/A"),s.find("cq-hu-high").text("N/A"),s.find("cq-hu-low").text("N/A"),s.find("cq-hu-date").text("N/A"),s.find("cq-hu-volume").text("N/A"),s.find("cq-volume-rollup").text("");function d(v){return nt.isValidNumber(parseFloat(v))?v:"N/A"}if(i&&i.data){var h=nt.clone(i.data);h.Open===void 0&&(h.Open=h.Close),h.High===void 0&&(h.High=Math.max(h.Open,h.Close)),h.Low===void 0&&(h.Low=Math.min(h.Open,h.Close)),s.find("cq-hu-open").text(r(d(h.Open))),s.find("cq-hu-price").text(r(d(h[n]))),s.find("cq-hu-close").text(r(d(h.Close))),s.find("cq-hu-high").text(r(d(h.High))),s.find("cq-hu-low").text(r(d(h.Low)));var p=nt.condenseInt(h.Volume),u=p.charAt(p.length-1);u>"9"&&(p=p.substring(0,p.length-1),s.find("cq-volume-rollup").text(u.toUpperCase())),s.find("cq-hu-volume").text(p);var g=h.displayDate;g||(g=h.DT),b.internationalizer?nt.ChartEngine.isDailyInterval(b.layout.interval)?s.find("cq-hu-date").text(b.internationalizer.yearMonthDay.format(g)):s.find("cq-hu-date").text(b.internationalizer.yearMonthDay.format(g)+" "+b.internationalizer.hourMinute.format(g)):nt.ChartEngine.isDailyInterval(b.layout.interval)?s.find("cq-hu-date").text(nt.mmddyyyy(nt.yyyymmddhhmm(g))):s.find("cq-hu-date").text(nt.mmddhhmm(nt.yyyymmddhhmmssmmm(g)));var f=s.find("cq-volume-visual");if(f.length){var w=o.maxVolume.value?h.Volume/o.maxVolume.value:0;f.css({width:Math.round(w*100)+"%"})}}}if(this.tick!=this.prevTick||i&&+i.DT==+b.chart.endPoints.end){this.timeout&&clearTimeout(this.timeout);var l=(this.params.followMouse,0);this.timeout=setTimeout(c,l)}this.prevTick=this.tick,this.params.followMouse&&(b.openDialog&&(this.tick=-1),this.followMouse(this.tick))};nt.UI.HeadsUp.prototype.followMouse=function(b){this.marker.params.x=b;var t=this;t.marker.render()};nt.UI.DrawingEdit=fi;function fi(b,t){var i=t.stx,n=nt.UI.$(b||t.topNode);this.node=n[0],this.context=t,this.editing=null,this.drawingContext=this.node.ownerDocument.querySelector("cq-drawing-context"),this.cvpController=n.find("cq-cvp-controller"),this.toolbar=n.find("cq-toolbar"),this.toolbar.length||(this.toolbar=n.find("cq-drawing-settings"));var e=this;Array.from(this.toolbar).forEach(function(a){a.addEventListener("change",sf(i,e))}),this.count=i.drawingObjects.length,t.advertiseAs(this,"DrawingEdit"),i.addEventListener("drawing",cf(this)),i.addEventListener("drawingEdit",lf(this)),n.find("cq-toolbar .ciq-drawing-edit-only").each(function(a,o){o.querySelector(".ciq-btn")&&["mouseenter","mouseleave"].forEach(function(r){o.addEventListener(r,df(i,e))})})}nt.inheritsFrom(fi,nt.UI.Helper);function sf(b,t){return function(){if(!!t.editing){if(t.editing.name!==b.currentVectorParameters.vectorType){t.endEdit(null,"tool");return}t.editing.copyConfig(),b.draw(),b.changeOccurred("vector")}}}function cf(b){return function(t){var i=t.drawings.length;b.count!==i&&(b.endEdit(null,"count"),b.count=i)}}function lf(b){return function(t){t.forceEdit===!0?(b.endEdit(null,"edit"),b.showToolbar(t.drawing),b.beginEdit(t.drawing)):t.forceText===!0?b.text(t.drawing):b.showContext(t)}}function df(b,t){return function(i){var n=i.type==="mouseenter";t.editing&&t.editing.highlighted!==n&&(t.editing.highlighted=n,b.draw())}}fi.prototype.showContext=function(b){b.context=this.context,b.x=nt.ChartEngine.crosshairX,b.y=nt.ChartEngine.crosshairY,this.count=this.context.stx.drawingObjects.length,this.drawingContext&&this.drawingContext.open&&this.drawingContext.open(b)};fi.prototype.getToolActivator=function(b){var t=this.toolbar.find('cq-item[cq-tool="'+b+'"]');return t.length||(t=this.toolbar.find(`cq-item[stxtap="tool('`+b+`')"]`)),{node:t[0]}};fi.prototype.showToolbar=function(b){var t=this,i=t.getToolActivator(b.name);t.node,this.toolbar.each(function(){var n=b.lineWidth,e=b.pattern,a=b.parameters&&b instanceof nt.Drawing.fibonacci;a&&(n=b.parameters.fibs[0].parameters.lineWidth,e=b.parameters.fibs[0].parameters.pattern),this.tool(i,b.name),this.sync(Object.assign({},b,{lineWidth:n,pattern:e,annotation:{font:b.font?nt.clone(b.font):{}},currentColor:b.color})),this.dirty(!1),a&&(this.context.stx.currentVectorParameters.fibonacci=nt.clone(b.parameters)),b.name==="volumeprofile"&&(this.context.stx.currentVectorParameters.volumeProfile.priceBuckets=b.priceBuckets)})};fi.prototype.beginEdit=function(b){this.editing=b,this.beforeEdit=b.serialize(),this.toolbar.attr("cq-drawing-edit",b.name);var t=new CustomEvent("drawing-edit-begin",{bubbles:!0,cancelable:!0,detail:{drawing:b,tool:b.name}});this.node.dispatchEvent(t)};fi.prototype.endEdit=function(b,t){var i=this.context.stx,n=null,e=null;if(this.editing){e=this.editing.name,n=new CustomEvent("drawing-edit-end",{bubbles:!0,cancelable:!0,detail:{action:t,drawing:this.editing,tool:e}});var a=i.drawingObjects.indexOf(this.editing),o=i.exportDrawings();a>-1&&this.beforeEdit&&(o[a]=this.beforeEdit,i.undoStamp(o,i.exportDrawings())),t==="close"&&this.editing.highlighted&&(this.editing.highlighted=!1,i.draw())}this.editing=null,this.beforeEdit=null,this.toolbar.attr("cq-drawing-edit","none"),t==="close"&&(e&&(b=this.getToolActivator(e),this.toolbar.each(function(){this.tool(b,e)})),i.changeVectorType(e)),n&&this.node.dispatchEvent(n)};fi.prototype.edit=function(){var b=this;if(this.drawingContext){var t=this.drawingContext.drawing,i=nt.UI.getMyContext(t.stx.container).topNode,n=i.ownerDocument.querySelector("cq-drawing-context").parentNode,e=i.querySelector("cq-drawing-settings"),a={left:n.offsetLeft,top:n.offsetTop};this.drawingContext.close(),b.endEdit(null,"edit"),b.showToolbar(t,a),b.beginEdit(t),e&&!/break.*sm\b/.test(b.context.topNode.className)&&e.detach(a.left,a.top)}};fi.prototype.text=function(b){let t=this.drawingContext;if(t){t.close();let i=b instanceof nt.Drawing?b:t.drawing;this.endEdit(null,"text"),i.edit&&i.edit(null,!0)}};fi.prototype.clone=function(){var b=this,t=this.context.stx;if(this.endEdit(null,"clone"),this.drawingContext){this.drawingContext.close();var i=this.drawingContext.drawing,n=new nt.Drawing[i.name],e=i.serialize();n.reconstruct(t,e),n.repositioner=i.repositioner,n.highlighted=!0,i.highlighted=!1,b.count+=1,t.addDrawing(n),t.activateRepositioning(n)}};fi.prototype.reorderLayer=function(b,t){var i=this.context.stx;if(this.endEdit(null,"reorderLayer"),this.drawingContext){this.drawingContext.close();var n=i.drawingObjects.length-1,e=i.drawingObjects.indexOf(this.drawingContext.drawing),a=NaN;if(e===-1)return;switch(t){case"up":e<n&&(a=e+1);break;case"down":e>0&&(a=e-1);break;case"top":e<n&&(a=n);break;case"bottom":e>0&&(a=0);break}if(a!==a)return;var o=i.exportDrawings();i.drawingObjects.splice(e,1),i.drawingObjects.splice(a,0,this.drawingContext.drawing),i.undoStamp(o,i.exportDrawings()),i.draw(),i.changeOccurred("vector")}};fi.prototype.remove=function(){var b=this,t=this.context.stx;if(this.endEdit(null,"remove"),this.drawingContext){if(this.drawingContext.drawing.permanent)return;var i=t.exportDrawings();b.count-=1,t.removeDrawing(this.drawingContext.drawing),t.undoStamp(i,t.exportDrawings()),this.drawingContext.close()}};nt.UI.StudyEdit=function(b,t){this.context=t,this.node=b||t.topNode,this.contextDialog=[];for(var i=this.node.ownerDocument.querySelectorAll("cq-study-context"),n=0;n<i.length;n++)this.contextDialog.push(i[n]);t.advertiseAs(this,"StudyEdit"),this.initialize()};nt.inheritsFrom(nt.UI.StudyEdit,nt.UI.Helper);nt.UI.StudyEdit.prototype.remove=function(){nt.Studies.removeStudy(this.params.stx,this.params.sd),this.contextDialog.forEach(function(b){b.close&&b.close()})};nt.UI.StudyEdit.prototype.edit=function(){this.contextDialog.forEach(function(b){b.close&&b.close()}),this.editPanel(this.params)};nt.UI.StudyEdit.prototype.editPanel=function(b){const{stx:t,config:i}=this.context;b.context=this.context,b.x=null,b.y=null;const{channelWrite:n}=nt.UI.BaseComponent.prototype;if(i){const e=(i.channels||{}).dialog||"channel.dialog";n(e,{type:"study",params:b},t)}else b.context.topNode.ownerDocument.querySelector("cq-study-dialog").open(b)};nt.UI.StudyEdit.prototype.editOverlay=function(b){this.params=b,b.context=this.context,b.forceEdit?this.editPanel(b):this.contextDialog.forEach(function(t){b.x=nt.ChartEngine.crosshairX,b.y=nt.ChartEngine.crosshairY,t.open&&t.open(b)})};nt.UI.StudyEdit.prototype.initialize=function(){var b=this.context.stx,t=this;function i(n){return function(){n.apply(t,arguments)}}b.addEventListener("studyOverlayEdit",i(t.editOverlay)),b.addEventListener("studyPanelEdit",i(t.editPanel))};nt.UI.Layout=function(b,t){this.params=t||{},this.params.activeClassName||(this.params.activeClassName="ciq-active"),this.context=b,b.advertiseAs(this,"Layout")};nt.inheritsFrom(nt.UI.Layout,nt.UI.Helper);nt.UI.Layout.prototype.getChartType=function(b,t){var i=this.context.stx,n=this.params.activeClassName;typeof t!="string"&&(t=b.dataset.value||"");var e=function(a){var o=a.obj;o.aggregationType&&o.aggregationType!="ohlc"?t!==o.aggregationType?b.classList.remove(n):b.classList.add(n):t!==o.chartType?b.classList.remove(n):b.classList.add(n)};this.addObserver({base:i,path:"layout.chartType",listener:e}),this.addObserver({base:i,path:"layout.aggregationType",listener:e})};nt.UI.Layout.prototype.setChartType=function(b,t){var i={heikinashi:!0,kagi:!0,linebreak:!0,pandf:!0,rangebars:!0,renko:!0};typeof t!="string"&&(t=b.node.dataset.value||""),i[t]?this.context.stx.setAggregationType(t):this.context.stx.setChartType(t)};nt.UI.Layout.prototype.getChartScale=function(b,t){var i=this.context.stx,n=this.params.activeClassName,e=function(a){a.value==t?b.classList.add(n):b.classList.remove(n)};this.addObserver({base:i,path:"layout.chartScale",listener:e})};nt.UI.Layout.prototype.setChartScale=function(b,t){var i=this.context.stx,n=i.layout.chartScale;n==t?i.setChartScale(null):(!n||n=="linear")&&i.setChartScale(t)};nt.UI.Layout.prototype.getFlippedChart=function(b){var t=this.context.stx,i=this.params.activeClassName,n=function(e){e.value?b.classList.add(i):b.classList.remove(i)};this.addObserver({base:t,path:"layout.flipped",listener:n})};nt.UI.Layout.prototype.setFlippedChart=function(b){var t=this.context.stx;t.flipChart(!t.layout.flipped)};nt.UI.Layout.prototype.getExtendedHours=function(b){var t=this.context.stx,i=this.params.activeClassName,n=function(e){e.value?b.classList.add(i):b.classList.remove(i)};this.addObserver({base:t,path:"layout.extended",listener:n})};nt.UI.Layout.prototype.setExtendedHours=function(b){var t=this.context.stx;if(t.layout.extended=!t.layout.extended,t.changeOccurred("layout"),t.layout.extended&&!(t.chart.market.market_def&&t.chart.market.sessions.length)&&nt.alert("There are no Extended Hours for this instrument."),t.extendedHours){var i=this.context.loader;i&&i.show(),t.extendedHours.set(t.layout.extended,null,function(){i&&i.hide()})}};nt.UI.Layout.prototype.getAnimation=function(b){var t=this.context.stx,i=this.params.activeClassName,n=function(e){e.value?b.classList.add(i):b.classList.remove(i)};nt.UI.observeProperty("animation",t.layout,n)};nt.UI.Layout.prototype.setAnimation=function(b){const{stx:t}=this.context;t.layout.animation=!t.layout.animation,t.changeOccurred("layout")};nt.UI.Layout.prototype.getRangeSlider=function(b){var t=this.context.stx,i=this.params.activeClassName,n=function(e){e.value?b.classList.add(i):b.classList.remove(i)};this.addObserver({base:t,path:"layout.rangeSlider",listener:n})};nt.UI.Layout.prototype.setRangeSlider=function(b){var t=this.context.stx;t.layout.rangeSlider=!t.layout.rangeSlider,t.slider&&t.slider.display(t.layout.rangeSlider),t.changeOccurred("layout")};nt.UI.Layout.prototype.getOutliers=function(b){var t=this.context.stx,i=this.params.activeClassName,n=function(e){e.value?b.classList.add(i):b.classList.remove(i)};this.addObserver({base:t,path:"layout.outliers",listener:n})};nt.UI.Layout.prototype.setOutliers=function(b){var t=this.context.stx;t.layout.outliers=!t.layout.outliers,t.draw(),t.changeOccurred("layout")};nt.UI.Layout.prototype.getAggregationType=function(b,t){var i=this.context.stx,n=this.params.activeClassName,e=function(a){a.value==t?b.classList.add(n):b.classList.remove(n)};this.addObserver({base:i,path:"layout.aggregationType",listener:e})};nt.UI.Layout.prototype.setAggregationType=function(b,t){this.context.stx.layout.aggregationType==t?this.context.stx.setAggregationType(null):this.context.stx.setAggregationType(t)};nt.UI.Layout.prototype.getAggregationEdit=function(b,t){var i=this.context.stx,n=nt.deriveFromObjectChain(i.layout,t),e=function(a){var o=a.value;!o&&i.chart.defaultChartStyleConfig[b.name]?b.value=i.chart.defaultChartStyleConfig[b.name]:b.value=o};this.addObserver({base:i,path:"layout."+n.member,listener:e})};nt.UI.Layout.prototype.setAggregationEdit=function(b,t){var i=this.context.stx;function n(){i.changeOccurred("layout"),i.createDataSet(),i.draw()}if(t==="auto"){i.layout.aggregationType==="kagi"?i.layout.kagi=null:i.layout.aggregationType==="renko"?i.layout.renko=null:i.layout.aggregationType==="linebreak"?i.layout.priceLines=null:i.layout.aggregationType==="rangebars"?i.layout.rangebars=null:i.layout.aggregationType==="pandf"&&(i.layout.pandf||(i.layout.pandf={box:null,reversal:null}),i.layout.pandf.box=null,i.layout.pandf.reversal=null),n();const a=b.params.parent;if(!a)return;Array.from(a.querySelectorAll(".ciq"+i.layout.aggregationType+" input")).forEach(function(o){var r=o.name;(r=="box"||r=="reversal")&&(r="pandf."+r);var c=nt.deriveFromObjectChain(i.layout,r);c&&!c.obj[c.member]&&i.chart.defaultChartStyleConfig[o.name]&&(o.value=i.chart.defaultChartStyleConfig[o.name])})}else{var e=nt.deriveFromObjectChain(i.layout,t);e.obj[e.member]=b.node.value,n()}};nt.UI.Layout.prototype.showAggregationEdit=function(b,t){const{context:i}=this;if(i.config){const{channelWrite:n}=nt.UI.BaseComponent.prototype,e=(i.config.channels||{}).dialog||"channel.dialog";n(e,{type:"aggregation",params:{context:i,aggregationType:t}},i.stx)}else b.ownerDocument.querySelector("cq-aggregation-dialog").open({context:this.context,aggregationType:t})};nt.UI.Layout.prototype.clearStudies=function(b){if(!!nt.Studies){var t=this.context.stx;for(var i in t.layout.studies){var n=t.layout.studies[i];!n.customLegend&&!n.permanent&&!n.signalData&&nt.Studies.removeStudy(t,n)}t.draw()}};nt.UI.Layout.prototype.setPeriodicity=function(b,t,i,n){var e=this;e.context.loader&&e.context.loader.show(),e.context.stx.setPeriodicity({period:t,interval:i,timeUnit:n},function(){e.context.loader&&e.context.loader.hide()})};nt.UI.Layout.prototype.showPeriodicity=function(b,t){var i="",{period:n,interval:e,timeUnit:a}=b.getPeriodicity();n*=e,i=n,a=="day"?i+="D":a=="week"?i+="W":a=="month"?i+="M":a=="second"?i+="s":a=="millisecond"?i+="ms":n>=60&&n%15===0?i=n/60+"H":a=="tick"?i=(n>1?n:"")+"T":i+="m",t.selector.innerHTML="",t.selector.appendChild(nt.translatableTextNode(b,i))};nt.UI.Layout.prototype.periodicity=function(b){const{stx:t}=this.context,i=()=>{this.showPeriodicity(this.context.stx,{selector:b})};this.addObserver({base:t,path:"layout.interval",listener:i}),this.addObserver({base:t,path:"layout.periodicity",listener:i}),this.addObserver({base:t,path:"layout.timeUnit",listener:i})};nt.UI.Layout.prototype.chartType=function(b){const{stx:t}=this.context,{displayStyleIcons:i}=this.context.config||{};if(!i){const e=b.getAttribute("ciq-no-icon-text");e&&(b.insertAdjacentHTML("beforebegin",`<span>${e}</span>`),b.remove());return}const n=({obj:{chartType:e,aggregationType:a}})=>{const o=a==="ohlc"?e:a,r=b.closest("cq-menu").querySelector(`*[data-value='${o}'] *[ciq-label]`),c=b.querySelector("*[ciq-menu-icon]"),l=b.querySelector("cq-tooltip"),s=nt.getFromNS(this,"context.config.displayStyleIcons"),d=r?(r.closest("cq-item").querySelector("[ciq-menu-icon]")||{}).className:`ciq-icon-${o.replace(/_/,"-")}`;l&&(l.innerHTML=r?r.innerHTML:nt.capitalize(o.replace(/-|_/," "))),s&&c&&(b.classList.add("ciq-menu-icon"),c.className=d)};this.addObserver({base:t,path:"layout.chartType",listener:n}),this.addObserver({base:t,path:"layout.aggregationType",listener:n})};nt.UI.Layout.prototype.setLanguage=function(b){const{config:t,stx:i}=this.context;if(t){const{channelWrite:n}=nt.UI.BaseComponent.prototype,e=(t.channels||{}).dialog||"channel.dialog",a={context:i.uiContext};n(e,{type:"language",params:a},i)}else b.ownerDocument.querySelector("cq-language-dialog").open()};nt.UI.Layout.prototype.getLanguage=function(b){var t=this.context.stx,i=function(n){nt.I18N.languages||(nt.I18N.languages={en:"English"});var e=b.querySelector("cq-language-name");if(e){e.innerText=nt.I18N.languages[t.preferences.language]||nt.I18N.languages[nt.I18N.language];var a=b.querySelector("cq-flag");a&&a.setAttribute("cq-lang",t.preferences.language||nt.I18N.language)}};nt.UI.observeProperty("language",nt.I18N,i)};nt.UI.Layout.prototype.addChart=function(b,t){const i=this.context.topNode;(i.parentNode.closest("cq-context")||i).addChart(null,t)};nt.UI.Layout.prototype.removeChart=function(b){const t=this.context.topNode;(t.parentNode.closest("cq-context")||t).removeChart()};class hf extends nt.UI.Helper{constructor(t){super(),this.context=t,t.advertiseAs(this,"Channel")}write(t,i,n){Qt.prototype.channelWrite(`channel.${i}`,n,this.context.stx)}}nt.UI.Channel=hf;nt.UI.Layout.prototype.toggleHelp=function(){let{topNode:b,stx:t}=this.context;const i="ciq-show-help";if(b.classList.contains(i)){b.classList.remove(i);return}b.querySelectorAll("cq-help").forEach(n=>n.verifyHelpContent()),b.classList.add(i),nt.Help.MessageShown||t.dispatch("notification",{message:nt.Help.Message,displayTime:10,position:"bottom"})};nt.UI.Markers=function(b,t){this.context=b,t||(t={}),this.menuItemSelector=t.menuItemSelector,this.activeClassName=t.activeClassName||"ciq-active",this.implementation=t.implementation,b.advertiseAs(this,"Markers")};nt.inheritsFrom(nt.UI.Markers,nt.UI.Helper);nt.UI.Markers.prototype.showMarkers=function(b,t,i){var n=this.activeClassName,e=this.context.topNode;if(!!e.parentElement){e=e.multiChartContainer||e;var a=this.implementation;!a||(a.showMarkers(),t&&a.showMarkers(t,i),Array.from(e.querySelectorAll(this.menuItemSelector)).forEach(function(o){var r=o.querySelector(".ciq-checkbox, .ciq-switch");b.node==o?o.classList.add(n):r||o.classList.remove(n)}))}};nt.UI.Keystroke=function(b,{keysToRepeat:t=[],node:i={}}={}){this.cb=b,this.shift=!1,this.ctrl=!1,this.cmd=!1,this.alt=!1,this.capsLock=!1,this.downValue="",this.keysToRepeat=t,this.recentKeys={},this.commandKeys={},this.initialize(i)};nt.UI.Keystroke.noKeyCapture=!1;nt.UI.Keystroke.prototype.androidWorkaroundKeyup=function(b){var t=b.target.value,i;t.length>this.downValue.length?i=t.charAt(t.length-1):i="Delete",this.key=i,this.cb({key:i,e:b,keystroke:this})};nt.UI.Keystroke.prototype.mapKey=function(b){return{Shift:"shift",Control:"ctrl",Alt:"alt",Meta:"cmd",Win:"cmd"}[b]||b};nt.UI.Keystroke.prototype.keyup=function(b){if(this.implementAndroidWorkaround){this.androidWorkaroundKeyup(b),this.implementAndroidWorkaround=!1;return}const{recentKeys:t}=this,{key:i,code:n}=b,e=this.mapKey(i),a=i!==e,o=new Date().getTime();if(t[n]||(t[n]={}),t[n].keyup=o,a)return this.commandKeys[n].pressed=!1,Object.values(this.commandKeys).some(({command:c,pressed:l})=>l&&c===e)||(this[e]=!1),this.cb({key:i,e:b,keystroke:this});let r=[];Object.entries(this.commandKeys).forEach(([c,{command:l}])=>{let s=t[c]||{},d=t[n]||{};s.keydown<d.keydown&&d.keydown<s.keyup&&s.keyup+500>o&&(r.push(c),this[l]=!0)}),r.length&&setTimeout(()=>{r.forEach(c=>{t[c].keydown<o&&(this[this.commandKeys[c].command]=!1)})}),this.keysToRepeat.includes(i)?this.key=null:(this.key=i,this.cb({key:i,e:b,keystroke:this}))};nt.UI.Keystroke.prototype.keydown=function(b){if(this.noKeyCapture)return;if(b.which==229&&nt.isAndroid){this.implementAndroidWorkaround=!0;return}const{key:t,code:i}=b,n=this.mapKey(t),e=t!==n;if(this.recentKeys[i]||(this.recentKeys[i]={}),this.recentKeys[i].keydown=new Date().getTime(),e&&(this.commandKeys[i]={command:n,pressed:!0}),t=="Tab"){if(document.querySelector("[cq-keyboardnavigation-active]"))b.preventDefault();else if(b.target.hasAttribute("cq-exit")){let a=b.target.getAttribute("cq-exit");(a=="head"&&!b.shiftKey||a=="foot"&&b.shiftKey)&&(b.target.setAttribute("cq-keyboardnavigation-active",""),b.preventDefault()),b.target.removeAttribute("cq-exit")}}this.key=t,e?this[n]=!0:t==="CapsLock"?this.capsLock=!this.capsLock:this.keysToRepeat.includes(t)&&(this.key=null,this.cb({key:t,e:b,keystroke:this}))};nt.UI.Keystroke.prototype.keypress=function(b){if(!this.noKeyCapture){var t=b.which;t<32||t>222||(this.key=b.key)}};nt.UI.Keystroke.prototype.initialize=function(b){var t=this,i=(b||{}).ownerDocument||document;["keyup","keydown","keypress"].forEach(function(n){i.addEventListener(n,function(e){n==="keydown"&&(t.downValue=e.target.value),t[n](e)})}),i.defaultView.addEventListener("blur",function(n){t.ctrl=!1,t.cb({key:"Control",e:n,keystroke:t})})};nt.UI.KeystrokeHub=function(b,t,i){b=nt.UI.$(b||t.topNode.ownerDocument)[0],this.infocus=!1;var n=this;[void 0,"#document","BODY"].indexOf(b.nodeName)>-1?this.infocus=!0:(b.addEventListener("mouseout",function(){n.infocus=!1}),b.addEventListener("mouseover",function(){n.infocus=!0})),this.context=t,this.params=i||{},{hotkeyConfig:this.hotkeyConfig}=t.config||{},this.uiManager=nt.UI.getUIManager(t.topNode),this.uiManager.keystrokeHub=this;function e(){return function(){n.handler.apply(n,arguments)}}this.keystroke=new nt.UI.Keystroke(e(),{keysToRepeat:this.hotkeyConfig.keysToRepeat,node:b}),this.tabOrder=[null],this.tabIndex=0,this.yNormalizationThreshold=this.context.topNode.getBoundingClientRect().height/25,this.tabElementSelectors=["cq-lookup","cq-comparison[cq-marker]","cq-study-legend[cq-panel-only]","cq-menu.ciq-menu",".ciq-toggles cq-toggle","cq-chartcontrol-group cq-toggle",".chartControls .chartSize span","cq-show-range div","cq-share-button","ciq-data-table-container button","[keyboard-navigation='true']"],this.tabActiveElement=null,this.tabActiveModals=[],this.keyControlElement=null,this.highlightElement=null;const{channelSubscribe:a}=nt.UI.BaseComponent.prototype,o=(this.context.config.channels||{}).keyboardNavigation||"channel.keyboardNavigation";a(o,r=>{r&&r.action==="registerElements"&&this.setTabOrderElements()},this.context.stx)};nt.inheritsFrom(nt.UI.KeystrokeHub,nt.UI.Helper);nt.UI.KeystrokeHub.defaultHotKeys=function(b,t,i={}){const{hotkeyConfig:n={},keystroke:e,context:a}=t,{hotkeys:o=[]}=n,{stx:r}=a,{code:c,keyCode:l,shiftKey:s}=i||{},d=c&&c.includes("Numpad");return b==="Unidentified"&&(b=String.fromCharCode(l)),e.shift=s,o.slice().reverse().reduce(function(p,{action:u,commands:g,options:f}){return p.concat(g.map(w=>({action:u,command:w,options:f})))},[]).map(function({action:p,command:u,options:g}){return u==="+"?u=["+"]:u.slice(-2)==="++"?u=u.slice(0,-2).split("+").concat("+"):u=u.split("+"),{action:p,options:g,modifiers:u.slice(0,-1),commandKey:u.slice(-1)[0],specificity:u.length}}).filter(function({modifiers:p,commandKey:u}){let g=(d?[c]:[c,b]).includes(u),f=!p.length||p.every(w=>e[e.mapKey(w)]);return g&&f}).sort(function(p,u){return u.specificity-p.specificity}).some(function({action:p,options:u}){if(typeof p=="string")return nt.UI.KeystrokeHub.executeHotkeyCommand({stx:r,action:p,options:u});if(typeof p=="function")return p({stx:r,options:u})!==!1})};nt.UI.KeystrokeHub.addHotKeyHandler=function(b,t,i){nt.UI.observeProperty("uiContext",i,({value:n})=>{!n||setTimeout(()=>{const e=nt.getFromNS(n.config,"hotkeyConfig.hotkeys",[]).find(({action:a})=>a===b);e&&(e.action=t)})})};nt.UI.KeystrokeHub.executeHotkeyCommand=function({stx:b,action:t,options:i={}}){const{crosshair:n,candleWidth:e}=b.layout,{left:a,right:o,panel:r}=b.chart,c=b.height-b.xaxisHeight,{percent:l=0,bars:s=0}=i,{topNode:d}=b.uiContext,h=d.ownerDocument.body.keystrokeHub,p=({axis:w,direction:v=1}={})=>{const{cx:m,cy:q}=b;let x=0;if(w==="x"&&(x=e*s),w==="y"&&(x=c*l),b.crossSection&&b.crossSection.crosshairBreakDistance&&(x=b.crossSection.crosshairBreakDistance),m||m===0||(b.cx=Math.round(b.width/2)),q||q===0||(b.cy=Math.round(c/2)),x){let y=b["c"+w]+x*v;y=Math.max(y,w==="x"?a+1:0),y=Math.min(y,w==="x"?o-1:c),b["c"+w]=Math.round(y)}b.mousemoveinner(b.resolveX(b.cx),b.resolveY(b.cy)),b.draw()},u=({direction:w=1,page:v}={})=>{const{dataSet:m,scroll:q,maxTicks:x}=b.chart;let y=v?x:s;y*=w,q+y>=m.length?b.chart.scroll=m.length:b.chart.scroll+=y,b.draw(),b.headsUpHR()},g=(w=1)=>{let v=c*l*w;b.chart.yAxis.scroll+=v,b.draw()},f=(w=1)=>{[...r.yaxisLHS,...r.yaxisRHS].forEach(m=>{let q=m.zoom+25*w;q<m.height&&(m.zoom=q)}),b.draw()};switch(t){case"up":n?p({axis:"y",direction:-1}):g();break;case"down":n?p({axis:"y"}):g(-1);break;case"right":n?p({axis:"x"}):u({direction:-1});break;case"left":n?p({axis:"x",direction:-1}):u();break;case"pageRight":u({direction:-1,page:!0});break;case"pageLeft":u({page:!0});break;case"zoomInXAxis":if(!b.allowZoom||b.activeDrawing&&!b.allowDrawingZoom)return;b.zoomIn();break;case"zoomOutXAxis":if(!b.allowZoom||b.activeDrawing&&!b.allowDrawingZoom)return;b.zoomOut();break;case"zoomInYAxis":f(-1);break;case"zoomOutYAxis":f();break;case"toggleCrosshairs":const w=d.querySelector('cq-toggle[cq-member="crosshair"]');w?w.dispatchEvent(new Event("stxtap")):b.layout.crosshair=!b.layout.crosshair,p();break;case"toggleContinuousZoom":b.continuousZoom&&b.continuousZoom.smartZoomToggle();break;case"symbolLookup":let v=d.querySelector(".ciq-search cq-lookup cq-lookup-input input");v&&v.focus();break;case"home":b.home(),b.headsUpHR();break;case"end":b.chart.scroll=b.chart.dataSet.length,b.draw(),b.headsUpHR();break;case"delete":if(nt.ChartEngine.drawingLine)b.undo();else if(b.anyHighlighted)b.deleteHighlighted();else return!1;break;case"escape":if(nt.ChartEngine.drawingLine)b.currentVectorParameters.vectorType=="continuous"&&nt.ChartEngine.completeDrawing(b),b.undo();else if(b.repositioningAnchorSelector)nt.Studies.cancelRepositionAnchor(b);else{const m=nt.UI.getUIManager(d);if(h.tabActiveModals.length){if(h.tabActiveModals[0].processEsc&&h.tabActiveModals[0].processEsc(h))break;m&&m.closeMenu(h.tabActiveModals[0]),h.tabActiveModals[0]&&h.setKeyControlElement(h.tabActiveModals[0])}else m&&m.closeMenu()}break;case"keyboardNavigateDeselect":h.tabOrderDeselect();break;case"keyboardNavigateNext":if(h.tabActiveModals.length)return!1;h.tabIndexNext();break;case"keyboardNavigatePrevious":if(h.tabActiveModals.length)return!1;h.tabIndexNext(!0);break;case"keyboardNavigateClick":if(h.tabActiveModals.length)return!1;h.tabOrderClickSelected();break;default:return!1}return!0};nt.UI.KeystrokeHub.prototype.resetTabNavigation=function(){this.tabOrder=[null],this.tabIndex=0,this.yNormalizationThreshold=this.context.topNode.getBoundingClientRect().height/25,this.tabActiveElement=null,this.tabActiveModals=[],this.keyControlElement=null,this.highlightElement=null,this.context.topNode.addEventListener("pointerdown",()=>this.tabOrderDeselect()),this.context.topNode.addEventListener("pointermove",()=>this.context.topNode.classList.remove("disable-mouse-pointer")),this.context.stx.append("resizeChart",()=>{this.highlightAlign()}),this.setTabOrderElements()};nt.UI.KeystrokeHub.prototype.setTabOrderElements=function(){let b=null;this.tabIndex!==0&&(b=this.tabOrder[Math.abs(this.tabIndex)].element),this.tabOrder=[null];for(let t=0;t<this.tabElementSelectors.length;t++){const i=this.context.topNode.querySelectorAll(this.tabElementSelectors[t]);for(let n=0;n<i.length;n++){const e=i[n];e.getAttribute("keyboard-navigation")!=="false"&&(e.tabListenerAdded||(e.addEventListener("stxtap",function(a){let o=this.tabOrder.findIndex(r=>r&&r.element===a);return o!=this.tabIndex&&(this.tabOrderDeselect(),this.tabIndex=-o),!0}.bind(this,e)),e.tabListenerAdded=!0),this.tabOrder.push({element:e}))}}this.sortTabOrderElements(b)};nt.UI.KeystrokeHub.prototype.sortTabOrderElements=function(b){const t=this.tabIndex<0;!b&&this.tabIndex!==0&&this.tabOrder[Math.abs(this.tabIndex)]&&(b=this.tabOrder[Math.abs(this.tabIndex)].element),this.tabOrder.forEach(i=>{if(!i)return;const{x:n,y:e,width:a,height:o}=i.element.getBoundingClientRect();i.position={x:n,y:e,width:a,height:o}}),this.tabOrder.sort((i,n)=>{if(!(i===null||n===null))return Math.floor(i.position.y/this.yNormalizationThreshold)-Math.floor(n.position.y/this.yNormalizationThreshold)||i.position.x-n.position.x}),b&&this.tabOrder.forEach((i,n)=>{!i||i.element==b&&(this.tabIndex=t?-n:n)})};nt.UI.KeystrokeHub.prototype.setKeyControlElement=function(b,t){!this.keyControlElement&&!b||(this.disableKeyControlElement(this.keyControlElement,t),b&&(this.keyControlElement=b,this.keyControlElement.keyboardNavigation=this,typeof this.keyControlElement.onKeyboardSelection=="function"&&this.keyControlElement.onKeyboardSelection()))};nt.UI.KeystrokeHub.prototype.disableKeyControlElement=function(b,t){!b||(!t&&typeof b.onKeyboardDeselection=="function"&&b.onKeyboardDeselection(),b.keyboardNavigation=null)};nt.UI.KeystrokeHub.prototype.tabOrderDeselect=function(b){const{tabOrder:t,tabIndex:i}=this;i<=0||(t[i]&&this.disableKeyControlElement(t[i].element),b||(this.tabActiveElement=null,this.tabIndex=-this.tabIndex,this.highlightHide(),this.context.topNode.classList.remove("disable-mouse-pointer")))};nt.UI.KeystrokeHub.prototype.tabOrderSelect=function(){const{tabOrder:b,tabIndex:t}=this;t<=0?this.highlightHide():this.highlightPosition(b[t])};nt.UI.KeystrokeHub.prototype.tabOrderClickSelected=function(){const{tabOrder:b,tabIndex:t}=this;b.length<=1||t<=0||(this.setKeyControlElement(b[t].element),b[t].element.dispatchEvent(new Event("pointerdown")),b[t].element.dispatchEvent(new Event("pointerup")))};nt.UI.KeystrokeHub.prototype.tabIndexNext=function(b){if(!this.context.stx.uiContext.topNode.hasAttribute("cq-keyboardnavigation-active")||this.tabOrder.length<=1)return;this.context.stx.uiContext.topNode.focus(),this.sortTabOrderElements(),this.tabIndex<0?this.tabIndex=Math.abs(this.tabIndex):this.tabOrderDeselect(!0),(this.tabIndex<1||this.tabIndex>=this.tabOrder.length)&&(this.tabIndex=b?this.tabOrder.length:1);let t=this.tabIndex,i=!1;do if(b===!0?t--:t++,this.tabOrder[t]&&nt.trulyVisible(this.tabOrder[t].element)&&this.tabOrder[t].element.getAttribute("keyboard-selectable")!=="false")if(!i)this.tabIndex=t,i=!0;else break;while(t<this.tabOrder.length&&t>0);(t>=this.tabOrder.length||t<=1)&&(t>=this.tabOrder.length?this.context.topNode.setAttribute("cq-exit","foot"):t<=1&&this.context.topNode.setAttribute("cq-exit","head"),this.context.topNode.removeAttribute("cq-keyboardnavigation-active")),this.tabOrderSelect()};nt.UI.KeystrokeHub.prototype.addActiveModal=function(b){this.tabActiveModals.indexOf(b)>-1||(this.tabActiveModals.unshift(b),this.tabOrderDeselect(),this.setKeyControlElement(b))};nt.UI.KeystrokeHub.prototype.removeActiveModal=function(b){let{tabActiveModals:t}=this,i=t.indexOf(b);i>-1&&(t.splice(i,1),t[0]?this.setKeyControlElement(t[0]):this.setKeyControlElement())};nt.UI.KeystrokeHub.prototype.highlightPosition=function(b){if(!b||!b.element||!b.position){const{tabOrder:t,tabIndex:i}=this;if(i<=0)return;b=t[i]}this.tabActiveElement=b,this.highlightAlign()};nt.UI.KeystrokeHub.prototype.highlightAlign=function(){if(this.tabActiveElement){const b=this.tabActiveElement.element.getBoundingClientRect(),t=this.context.topNode.getBoundingClientRect();if(b.width<=0||b.height<=0){this.highlightHide();return}this.highlightCreate(),Object.assign(this.highlightElement.style,{top:b.top-t.top+"px",left:b.left-t.left+"px",width:b.width+"px",height:b.height+"px"})}};nt.UI.KeystrokeHub.prototype.highlightCreate=function(){return this.highlightElement?this.highlightElement.classList.remove("disabled"):(this.highlightElement=document.createElement("cq-keyboard-selected-highlight"),this.context.topNode.appendChild(this.highlightElement)),this.context.topNode.classList.add("disable-mouse-pointer"),this.context.topNode.classList.add("cq-navigation-highlight-visible"),this.highlightElement};nt.UI.KeystrokeHub.prototype.highlightHide=function(){this.highlightElement&&this.highlightElement.classList.add("disabled"),this.context.topNode.classList.remove("cq-navigation-highlight-visible")};nt.UI.KeystrokeHub.prototype.setActiveContext=function(b){b.topNode.querySelector("cq-context")||(this.context=b)};nt.UI.KeystrokeHub.prototype.processKeyStrokeClaims=function(b,t,i,n){for(var e=da.length-1;e>-1;e--){var a=da[e].helper;if(a.ownerDocument===i.target.ownerDocument){var o=a.keyStroke(b,t,i,n);if(o)return o.allowDefault||i.preventDefault(),!0}}return!1};nt.UI.KeystrokeHub.prototype.handler=function(b){var t=this.context.stx;if(t.editingAnnotation||!this.infocus&&b.key!=="Tab")return;var i=b.e,n=b.key,e=b.keystroke,a=b.e.target.tagName;switch(n){case"Shift":t.shift=e.shift;break;case"Control":case"Alt":t.ctrl=e.ctrl;break;case"Meta":case"Win":t.cmd=e.cmd;break;case"CapsLock":this.capsLock=!this.capsLock;break}let o=i.key==="Escape"||i.key==="Esc"||i.key==="Tab",r=a==="INPUT"||a==="TEXTAREA",c=this.context.topNode.ownerDocument.querySelector(".stxMenuActive, cq-dialog[cq-active=true], cq-color-picker[cq-active=true]");if(this.params.cb&&(o||!(r||this.context.isLegendKeyboardActive()||c))&&this.params.cb(n,this,i))return i.preventDefault();!nt.ChartEngine.drawingLine&&this.processKeyStrokeClaims(this,n,i,e)};class Cl extends HTMLElement{constructor(){super(),this.activeMenuStack=[],this.registeredForResize=[],this.keystrokehub=null}connectedCallback(){var t=this;this.resize=function(){for(var e=t.registeredForResize,a=0;a<e.length;a++)typeof e[a].resize=="function"&&e[a].resize()};function i(){t.closeTopMenu()}var n=this.document||document;n.body.addEventListener("stxtap",i),nt.installTapEvent(n.body,{preventUnderlayClick:!1}),n.defaultView.addEventListener("resize",this.resize),n.body.contains(this)&&(nt.UI.registerComponentsImmediately=!0,nt.UI.ensureComponentsRegistered())}disconnectedCallback(){var t=this.document||document;t.defaultView.removeEventListener("resize",this.resize)}closeMenu(t){var i=this.activeMenuStack,n=[];if(t)for(n.push(t),t=t.parentElement;t;)t.matches("cq-menu")&&t.active&&n.push(t),t=t.parentElement;else n=i;for(var e=0;e<n.length;e++)n[e].keepOpen||n[e].hide&&n[e].hide();this.activeMenuStack=i.filter(function(a){return a.active}),this.ifAllClosed()}closeTopMenu(){var t=this.activeMenuStack;if(!!t.length){var i=t[t.length-1],n=this;(!i.isDialog||i.active)&&(t.pop(),i.hide(),i.onClose&&i.onClose(),setTimeout(function(){n.ifAllClosed()},0));var e=i.getAttribute("cq-close-top");e&&nt.climbUpDomTree(i.parentElement,e).forEach(function(a){n.closeMenu(a)})}}findLifts(t){return nt.UI.$(Array.from(t.querySelectorAll("*[cq-lift]")).filter(function(i){return i.closest("cq-menu,cq-dialog")==t}))}ifAllClosed(){this.activeMenuStack.length||Array.from((this.document||document).querySelectorAll("cq-context,*[cq-context]")).forEach(function(t){t.CIQ&&t.CIQ.UI&&t.CIQ.UI.context&&t.CIQ.UI.context.stx&&t.CIQ.UI.context.stx.modalEnd()})}initializeMenuListeners(t){t.callbackListeners.menu=[]}lift(t){var i=t;if(!!i){var n=i.ownerDocument;i.remember={parentNode:i.parentNode,css:{position:i.style.position,display:i.style.display,left:i.style.left,top:i.style.top,height:i.style.height,width:i.style.width,opacity:i.style.opacity}};var e=i.getBoundingClientRect(),a=i.scrollHeight;i.doNotDisconnect=!0,i.remove(),i.reduceMenuHeight=5,Object.assign(i.style,{position:"absolute",display:"block",left:e.left+"px",top:e.top+"px",height:a+"px",opacity:1}),n.body.appendChild(i),delete i.doNotDisconnect,typeof i.resize!="undefined"&&i.resize(),Array.from(i.querySelectorAll("cq-scroll")).forEach(function(o){o.resize()})}}openMenu(t,i){setTimeout(function(){var n=t.querySelector("input[cq-focus]:first-child");n&&n.focus()},0),this.activeMenuStack.push(t),t.show(i),Array.from(t.ownerDocument.querySelectorAll("cq-context,*[cq-context]")).forEach(function(n){if(n.CIQ&&n.CIQ.UI&&n.CIQ.UI.context&&n.CIQ.UI.context.stx){const{stx:e}=n.CIQ.UI.context;e.modalBegin(),e.callbackListeners.menu&&e.dispatch("menu",{stx:e,menu:t})}})}registerForResize(t){this.registeredForResize.push(t)}restoreLift(t){if(!!t){var i=t.remember;t.doNotDisconnect=!0,t.remove(),delete t.doNotDisconnect,Object.assign(t.style,i.css),i.parentNode.appendChild(t)}}topMenu(){var t=this.activeMenuStack;return t.length?t[t.length-1]:null}unregisterForResize(t){for(var i=this.registeredForResize,n=0;n<i.length;n++)if(i[n]===t){i.splice(n,1);return}}}nt.UI.UIManager=Cl;nt.ChartEngine.registerGlobalEvent("unload",function(){const b=nt.UI._uiManagers.get(this.document);if(b){nt.UI._uiManagers.delete(this.document);try{b.disconnectedCallback()}catch{}}},!1,!0);nt.UI.getUIManager=function(b){let t=document;if(b){const e=b.closest("cq-context, *[cq-context]");e?t=e.portalDoc||t:t=b.ownerDocument||t}nt.UI._uiManagers||(nt.UI._uiManagers=new WeakMap);const i=nt.UI._uiManagers.get(t);if(i)return i;let n=t.querySelector("cq-ui-manager");return n||(n=new nt.UI.UIManager,n.document=t,n.connectedCallback()),nt.UI._uiManagers.set(t,n),n};customElements.define("cq-ui-manager",Cl);const{qs:Ai,qsa:tm,channelWrite:ya,channelRead:Ar,channelSubscribe:Xi}=nt.UI.BaseComponent.prototype;class pf{createChartAndUI({container:t,config:i}){t||(t=document.body),i&&!i.chartId&&(i.chartId=t.id);const n=l(t),e=Ai("cq-context",n),a=nt.getFromNS(e,"CIQ.UI.context"),o=Ai(a?"[cq-context-engine]":".chartContainer",n),r=nt.ChartEngine.create({container:o,config:i,deferLoad:!0});o.stx=r,nt.UI.scrollbarStyling=i.scrollbarStyling,nt.UI.ensureComponentsRegistered();let c=new nt.UI.Context(r,n);if(c.topNode.hasAttribute("tabindex")||c.topNode.setAttribute("tabindex","0"),c.config=i,t.context=c,new nt.UI.Layout(c),new nt.UI.Channel(c),this.initLookup(c),this.initDialogHandler(c),this.initContainerListeners(c),this.initEventMarkers(c),a)return nt.UI.BaseComponent.buildReverseBindings(n),c;return new nt.UI.StudyEdit(null,c),this.initDrawingTools(c),this.initDrawingEditListeners(c),this.initColorPicker(c),this.initExtensions({stx:r,uiContext:c,config:i,type:"plugins"}),i.onEngineReady&&i.onEngineReady(r),this.loadChart(c),i.language&&nt.I18N.setLanguage(r,i.language),nt.UI.BaseComponent.buildReverseBindings(n),n.bindingInitiated=!0,nt.UI.begin(i.onWebComponentsReady),c.uiManager=nt.UI.getUIManager(c.topNode),c.uiManager.initializeMenuListeners(r),window.setTimeout(function(){c.topNode.ownerDocument.body.keystrokeHub.resetTabNavigation()},0),c;function l(s){return s.nodeName.match(/cq-context/i)||s.getAttribute("cq-container")?s:s.querySelector("cq-context, [cq-context]")}}initContainerListeners(t){const{config:{channels:{breakpoint:i="channel.breakpoint",sidenavSize:n="channel.sidenavSize",sidepanelSize:e="channel.sidepanelSize",drawingPalettes:a="channel.drawingPalettes",pluginPanelHeight:o="channel.pluginPanelHeight"}={}}={},stx:r,topNode:c}=t;nt.UI.addResizeListener(c,()=>this.notifySizeChanges(t)),this.notifySizeChanges(t),Xi(i,this.breakpointSetter(t),r),Xi(n,this.sidenavSizeSetter(t),r),Xi(e,this.sidepanelSizeSetter(t),r),Xi(a,this.chartPositionSetter(t),r),Xi(o,this.chartAreaTopSetter(t),r);const l=this.initKeystrokeHub(t),s=this.getKeystrokeHubSetter(t,l);c.addEventListener("mouseover",()=>{c.contains(document.activeElement)||c.focus()}),c.addEventListener("focus",d=>{d.target.hasAttribute("cq-keyboardnavigation-active")||(s(d),d.target.setAttribute("cq-keyboardnavigation-active",""),l.resetTabNavigation())}),c.addEventListener("blur",d=>{const h=document.querySelector(".cq-dialogs");d.relatedTarget&&(c.contains(d.relatedTarget)||h&&h.contains(d.relatedTarget))||(d.target.removeAttribute("cq-keyboardnavigation-active"),l.tabOrderDeselect(),l.highlightHide())})}initLookup(t){const{config:i,topNode:n}=t;this.initKeystrokeHub(t),t.changeSymbol=function(e,a){const{stx:o,loader:r}=t;r&&r.show(),e.symbol==e.symbol.toLowerCase()&&(e.symbol=e.symbol.toUpperCase());const{removeSeries:c,loadError:l}=i.onNewSymbolLoad||{};c&&Object.values(o.chart.series).filter(c).forEach(s=>o.removeSeries(s.id)),o.loadChart(e,{masterData:e._masterData},function(s){if(r&&r.hide(),s){l&&l(s,t);return}a&&a(o),i.restore&&nt.ChartEngine.restoreDrawings(o,o.chart.symbol,i.chartId)})},i.lookupDriver&&t.setLookupDriver(new i.lookupDriver)}initKeystrokeHub(t){let i=document;return t&&(i=t.topNode.portalDoc||i),i.body.keystrokeHub||(i.body.keystrokeHub=new nt.UI.KeystrokeHub(i.body,t,{cb:nt.UI.KeystrokeHub.defaultHotKeys})),i.body.keystrokeHub}getKeystrokeHubSetter(t,i){return function(){i.context!==t&&i.setActiveContext(t)}}initDialogHandler(t){const{config:{channels:i={},dialogs:n={}}={},stx:e}=t;Xi(i.dialog||"channel.dialog",a,e);function a({type:o=null,params:r={}}={}){if(!o)return;const c=n[o]||n[nt.makeCamelCase(o)];if(!c)return;const l=r.context.topNode.ownerDocument;let s=Ai(c.tag,l);if(!s){const h=d(l),p=document.createElement("cq-dialog");s=document.createElement(c.tag),Object.entries(c.attributes||{}).forEach(([u,g])=>s.setAttribute(u,g)),p.append(s),h.append(p)}s&&s.open&&s.open(r);function d(h){let p=Ai(".cq-dialogs",h);return p||(p=document.createElement("div"),p.classList.add("cq-dialogs"),h.body.append(p),p)}}}initDrawingTools(t){const{stx:i,config:{channels:n={}}={},topNode:e}=t;Xi(n.drawing||"channel.drawing",a,i);function a(o){e.classList[o?"add":"remove"]("toolbar-on"),i.resizeChart()}}initDrawingEditListeners(t){const{config:{channels:i={}}={},stx:n}=t,e=new nt.UI.DrawingEdit(null,t);let a=!0;const o=i.drawing||"channel.drawing";e.node.addEventListener("drawing-edit-begin",function(r){Ar(o,n)||(a=!1,ya(o,!0,n))},!1),e.node.addEventListener("drawing-edit-end",function({detail:r}){a||(r.action!=="edit"&&(a=!0),r.action==="close"&&ya(o,!1,n))},!1)}initColorPicker(t){let i=document;t&&(i=t.topNode||i);let n=i.querySelector("cq-color-picker");n||(i=i.ownerDocument||i,n=i.querySelector("body > cq-color-picker"),!n&&(n=document.createElement("cq-color-picker"),document.body.append(n),i.ownerDocument&&i.ownerDocument.body.append(n)))}loadChart(t){const{stx:i,topNode:n,config:{chartId:e,multiChartId:a,initialSymbol:o,restore:r,onChartReady:c,initialData:l}={},loader:s}=t;s&&s.show(),r?(nt.ChartEngine.restorePreferences(i,a||e||n.id),nt.ChartEngine.restoreLayout(i,function(){if(s&&s.hide(),!i.chart.symbol){d();return}h()},e)):d();function d(){if(i.crossSection&&i.setChartType("crosssection"),!o){h();return}const p=typeof o=="string"?{symbol:o}:o;p._masterData=l,t.changeSymbol(p,h)}function h(){!c||setTimeout(()=>c(i))}}notifySizeChanges(t){const{stx:i,topNode:{clientWidth:n,clientHeight:e,classList:a},config:{channels:o={}}={}}=t;if(i.destroyed)return;const r=Ar(o.containerSize||"channel.containerSize",i);if(r&&r.width===n&&r.height===e)return;const c=this.getBreakpoint(n,e);a.contains(c[1])||ya(o.breakpoint||"channel.breakpoint",c[1],i),c[0]!==i.chart.breakpoint&&window.setTimeout(()=>{ya(o.breakpoint||"channel.breakpoint",c[0],i),i.notifyBreakpoint(c[0]),i.resizeChart()}),ya(o.containerSize||"channel.containerSize",{width:n,height:e},i),i.resizeChart()}getBreakpoint(t,i){let n="break-sm";if(t>768?n="break-lg":t>584&&(n="break-md"),typeof i=="undefined")return n;let e="break-height-sm";return i>768?e="break-height-lg":i>350&&(e="break-height-md"),[n,e]}initEventMarkers(t){const i=t.config;if(nt.UI.Markers){const n=i.eventMarkersImplementation&&new i.eventMarkersImplementation(t.stx),e=i.selector.markersMenuItem;new nt.UI.Markers(t,{menuItemSelector:e,implementation:n})}}initExtensions({stx:t,uiContext:i,config:n,type:e}){const a=n[e];Object.entries(a).filter(([,o])=>!!o).forEach(([o,r])=>{const c=r.moduleName||nt.capitalize(o);try{if(!nt[c]){nt.debug&&console.log(`${c} not available for ${e} with params:`,r);return}const l=Object.assign({stx:t,context:i},r),s=new nt[c](l);nt.UI.activatePluginUI(t,c),r.postInstall&&r.postInstall({uiContext:i,extension:s})}catch(l){nt.debug&&console.error("Error configuring "+e+" using params ",r,"error",l)}})}chartPositionSetter(t){const i=Ai(".chartContainer",t.topNode);return function(e){if(!e)return;const{top:a,left:o}=e;i.style.marginTop=a+"px",i.style.marginLeft=o+"px"}}sidenavSizeSetter(t){const i=Ai(".ciq-multi-chart-container-wrapper, .ciq-chart-area",t.topNode);return t.stx,function(e){i.style.left=e+"px",nt.getFnFromNS(t,"topNode.getCharts",[t.stx])().forEach(a=>a.resizeChart())}}chartAreaTopSetter(t){const i=Ai(".ciq-chart-area",t.topNode);return function(e){const a=Object.values(e||{}).reduce((o,r)=>o+r,0);i.style.marginTop=a+"px",t.stx.resizeChart()}}sidepanelSizeSetter(t){const i=Ai(".ciq-chart-area",t.topNode),n=Ai("cq-analystviews",t.topNode)||Ai("cq-tradingcentral",t.topNode),e=t.stx;return function(o){i.style.right=o+"px",n&&(n.style.marginRight=o+"px"),e.resizeChart()}}breakpointSetter(t){return function(n){const{classList:e}=t.topNode;[["break-lg","break-md","break-sm"],["break-height-lg","break-height-md","break-height-sm"]].forEach(o=>{o.includes(n)&&e.remove(...o)}),t.topNode.classList.add(n)}}}nt.UI.Chart=pf;class uf{createCharts({containerId:t,chartsConfig:i},n){const e=!t||typeof t=="string"?document.querySelector(t||"cq-context"):t,a=Array.from(e.querySelectorAll("cq-context-wrapper"));if(!a.length)throw"cq-context-wrapper element is required for multichart template setup";const o=a[0].outerHTML;let{charts:r,colCount:c=2}=i;r.slice(0,r.length-a.length).forEach(()=>{a[0].parentElement.insertAdjacentHTML("beforeend",o)});const l=e.querySelectorAll("cq-context");n.root=null,n.keepDrawingToolSelected===void 0&&(n.keepDrawingToolSelected=!0);let s,d;const h=new nt.UI.Chart,p=r.map(({symbol:u,chartId:g},f)=>{const w=nt.clone(n);w.initialSymbol=typeof u!==void 0?u:w.initialSymbol,w.chartId=g||(n.chartId||"")+"_c"+nt.uniqueID();const v=l[f];v.closest("cq-context-wrapper").classList.add("ciq-chart-col-"+c),w.root=v;const{stx:m}=h.createChartAndUI({container:v,config:w});return n.soloActive&&n.soloActive.onDraw&&(f===0?(s=m.currentVectorParameters,d=m.preferences.drawings=m.preferences.drawings||{}):(m.currentVectorParameters=s,m.preferences.drawings=d)),this.initChart(v,w,m),m});return h.createChartAndUI({container:e,config:n}),this.initContainer(e,n,o),this.setGridUI(e,c),e.colCount=c,e.updateLayout(),p}initContainer(t,i,n){const e=t.querySelector("cq-context");this.contextSwitcher(t),this.addChart(t,i,n),this.removeChart(t,i),this.solo(t,i),this.toggleSolo(t,i),this.setColCount(t),this.updateGridListener(t),this.updateLayout(t,i),this.utils(t),this.copyAttributes(e,t),setTimeout(()=>{t.switchContext(e.CIQ.UI.context)})}initChart(t,i,n){const e=t.parentElement.closest("cq-context");n.keepDrawingToolSelected=i.keepDrawingToolSelected,nt.UI.stxtap(t,({target:l})=>{const s=l.closest("cq-context");if(s){const d=s.CIQ.UI.context;e.switchContext(d)}});const{onDraw:a}=i.soloActive||{},o=nt.getFromNS(i,"soloActive.onDraw.shouldSolo")||(()=>!0);a&&Xi(i.channels.drawing,l=>{e.soloActive&&e.soloActive(l&&o(n),"onDraw")},t.CIQ.UI.context.stx);const r=5e3;n.prepend("mousemoveinner",(l,s)=>{if(n.__notifiedExit||l===r)return;e.getCharts().forEach(h=>{h!==n&&(h.mousemoveinner(r,r),h.__notifiedExit=!1)}),n.__notifiedExit=!0}),t.closest("cq-context-wrapper").close=function(){e.activeRequests&&e.toggleSolo({node:this}),e.removeChart(this)};const{drawing:c="channel.drawing"}=i.channels||{};nt.UI.addResizeListener(t,()=>{const{width:l,height:s}=t.getBoundingClientRect();if(!l||!s)return;const d=Ar(c,n),h=t.closest(".ciq-solo");d&&o(n)&&!h&&ya(c,!1,n)}),t.multiChartContainer=e}addChart(t,i,n){t.addChart=(e,a="after")=>{t.activeRequests&&t.toggleSolo({node:t.querySelector("cq-context-wrapper.active .ciq-solo-toggle")});let{node:o,symbol:r,chartId:c}=e||{};const l=o?o.closest("cq-context-wrapper"):t.querySelector("cq-context-wrapper.active");i.multiChartCopySymbol&&(r=nt.getFromNS(l.querySelector("cq-context"),"CIQ.UI.context.stx.chart.symbolObject"));const{crosshair:s,headsUp:d}=l.querySelector("cq-context").CIQ.UI.context.stx.layout;let h;a==="before"?(l.insertAdjacentHTML("afterEnd",n),h=l.nextSibling):a==="after"&&(l.insertAdjacentHTML("beforeBegin",n),h=l.previousSibling),nt.UI.BaseComponent.buildReverseBindings(h);const p=h.querySelector("cq-context"),u=nt.clone(i);u.initialSymbol=typeof r!==void 0?r:u.initialSymbol,u.chartId=c||`_c${nt.uniqueID()}`,h.classList.add(`ciq-chart-col-${t.colCount||2}`),u.root=p;const g=u.createChart(p);return g.layout.crosshair=s,g.layout.headsUp=Object.assign({},d),t.querySelectorAll("cq-info-toggle-dropdown").forEach(f=>f.initInfoComponents(t)),t.setCurrentThemeClass&&t.setCurrentThemeClass(p),this.initChart(p,u,g),p.dispatchEvent(new Event("stxtap")),r||setTimeout(()=>{const f=t.querySelector("cq-lookup input");f.dispatchEvent(new Event("pointerdown")),f.dispatchEvent(new Event("pointerup")),f.focus()}),t.updateLayout(),g}}removeChart(t,i){t.removeChart=function(e){const a=e||t.querySelector("cq-context-wrapper.active"),o=a.classList.contains("active"),r=a.nextElementSibling||a.previousElementSibling;if(!r)return;o&&r.querySelector("cq-context").dispatchEvent(new Event("stxtap")),a.querySelector("cq-context").CIQ.UI.context.stx.destroy(),a.remove();const c=i.nameValueStore||nt.NameValueStore,l=new c,s=nt.getFromNS(a.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId");if(nt.getFromNS(a.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId"),s){l.remove(`myChartLayout${s}`);const d=`${s||""}_drawings`;l.get(d,(h,p)=>{h||!p||(Object.keys(p).forEach(u=>{l.remove(u)}),l.remove(d))}),t.updateLayout()}}}contextSwitcher(t){let i=t.CIQ.UI.context;const n=t.CIQ.UI.context;t.switchContext=o=>{o!==i&&(i=o,this.getCommonUI(t).forEach(r=>e(r,o)),a(o),Array.from(t.querySelectorAll("cq-context-wrapper")).forEach(r=>{const c=r.querySelector("cq-context").CIQ.UI.context;r.classList.toggle("active",o===c)}))};function e(o,r){if(o.changeContext){o.changeContext(r);return}o.stx&&(o.stx=r.stx),o.context&&(o.context=r)}function a(o){Object.values(n.advertised).forEach(r=>{r.changeContext&&r.changeContext(o)})}}solo(t,i){let n;t.soloActive=(e,a)=>{if(!n){n=!0;return}let{activeRequests:o=0}=t;const r=o;o+=e?1:o?-1:0,Object.assign(t,{activeRequests:o});const c=t.querySelector("cq-context-wrapper.active");if(!c)return;Array.from(t.querySelectorAll("cq-context-wrapper"),s=>{const d=s.classList.contains("active");s.classList.remove("ciq-solo-minimized","ciq-solo"),o&&s.classList.add(d?"ciq-solo":"ciq-solo-minimized")}),t.classList.toggle("ciq-solo",!!e);const l=c.querySelector("cq-context").context.stx;if(e){const s=nt.getFromNS(i,`soloActive.${a}.notify`);!r&&s&&t.classList.contains("ciq-multi-chart")&&l.dispatch("notification",s)}else o||Object.values(i.soloActive||{}).filter(s=>s.notify).forEach(({notify:s})=>{l.dispatch("notification",Object.assign({},s,{remove:!0}))})}}toggleSolo(t,i){t.toggleSolo=({node:n})=>{const a=n.closest("cq-context-wrapper").querySelector("cq-context").CIQ.UI.context;if(t.activeRequests){const{drawing:o="channel.drawing",tfc:r="channel.tfc"}=i.channels||{},{channelWrite:c}=nt.UI.BaseComponent.prototype;c(o,!1,a.stx),c(r,!1,a.stx),t.soloActive(!1,"toggle")}else n.closest("cq-context-wrapper").classList.contains("active")||t.switchContext(a),t.soloActive(!0,"toggle")}}setColCount(t){t.setColCount=function(n){t.colCount=n,Array.from(t.querySelectorAll("cq-context-wrapper"),e=>{e.classList.remove("ciq-chart-col-1","ciq-chart-col-2","ciq-chart-col-3","ciq-chart-col-4","ciq-chart-col-5"),e.classList.add(`ciq-chart-col-${n}`)}),t.updateLayout()}}updateGridListener(t){t.addEventListener("update-grid",({detail:{columns:i,container:n}})=>{n===t&&t.setColCount(i)})}updateLayout(t,i){t.updateLayout=function(){const n=i.nameValueStore||nt.NameValueStore,e=new n,a=Array.from(t.ownerDocument.querySelectorAll("cq-context-wrapper"),o=>{const r=nt.getFromNS(o.querySelector("cq-context")||{},"CIQ.UI.context.config.chartId");if(!!r)return{chartId:r}}).filter(o=>o);e.set("multiCharts"+(i.multiChartId||""),{charts:a,colCount:t.colCount}),t.classList[a.length>1?"add":"remove"]("ciq-multi-chart")}}copyAttributes(t,i){t.getAttributeNames().filter(n=>/-active$/.test(n)).forEach(n=>i.setAttribute(n,t.getAttribute(n)))}getCommonUI(t){return i(".ciq-nav, .ciq-footer",t).filter(n=>n.localName!=="cq-themes"&&n.localName!=="cq-info-toggle-dropdown"&&n.localName!=="cq-side-nav"&&!n.classList.contains("ciq-sidenav")&&!n.classList.contains("shortcuts-ui"));function i(n,e){return n.split(/, |,/g).reduce((a,o)=>{const r=e.querySelector(o),c=Array.from(r.querySelectorAll("*"));return a.concat(c)},[])}}setGridUI(t,i){const n=t.querySelector("cq-grid-size-picker");!n||(n.generateTable(+i+1,1),n.highlightTable(+i,1))}utils(t){t.getChartContainers=()=>Array.from(t.querySelectorAll("cq-context")).map(i=>i.querySelector(".chartContainer")).concat(t.CIQ.UI.context.stx.container),t.getCharts=()=>t.getChartContainers().map(({stx:i})=>i)}}nt.UI.Multichart=uf;class wa{constructor(t,i){i!==void 0&&console.log("CIQ.UI.$() only accepts one input parameter.");let n=[];if(t instanceof wa)return t;Array.isArray(t)&&(n=t),typeof t=="object"?t.ownerDocument?n.push(t):(t.toString()==="[object NodeList]"||t.toString()==="[object HTMLCollection]")&&(n=Array.from(t)):typeof t=="string"&&(console.log("Note: string argument for CIQ.UI.$(element) deprecated and may be removed in the future"),n=n=Array.from(document.querySelectorAll(t)));const e=this.length=n.length;for(let a=0;a<e;a++)this[a]=n[a]}_(t,i){const n=[],e=a=>{(!i||a.matches(i))&&(n.includes(a)||n.push(a))};for(let a=0;a<this.length;a++){const o=this[a];Array.from(t(o)).forEach(e)}return new wa(n)}addClass(t){return typeof t=="string"&&(t=t.split(" ")),t.forEach(i=>this._(n=>(n.classList.add(i),[n]))),this}append(t,i){if(typeof i!="undefined"&&console.log("CIQ.UI.$#append only accepts one argument."),t instanceof Array)for(let n=0;n<t.length;n++)this.append(t[n]);else{if(typeof t=="string")return this._(n=>(n[t[0]==="<"?"innerHTML":"innerText"]+=t,[n]));if(t.ownerDocument){const n=this._(a=>(a.appendChild(t.cloneNode(!0)),[a])),e=n[n.length-1];return e.replaceChild(t,e.lastChild),n}else if(t instanceof wa)return this.append(Array.from(t))}return this}attr(t,i){if(typeof t=="object")return this._(n=>(Object.keys(t).forEach(e=>n.setAttribute(e,t[e])),[n]));if(typeof i=="undefined"){if(!this[0])return;const n=this[0].getAttribute(t);return n===null?void 0:n}return this._(n=>(n.setAttribute(t,i),[n]))}children(t){return this._(i=>i.children,t)}css(t,i){return typeof t=="object"?this._(n=>(Object.assign(n.style,t),[n])):typeof i=="undefined"?this[0]?getComputedStyle(this[0])[t]:void 0:this._(n=>(n.style[t]=i,[n]))}each(t){for(let i=0;i<this.length;i++)t.call(this[i],i,this[i]);return this}empty(){return this._(t=>(t.innerHTML="",[t]))}find(t){return t?this._(i=>i.querySelectorAll(t)):new wa([])}hasClass(t){return this._(i=>i.classList.contains(t)&&[i]).length>0}hide(){return this._(t=>(t.style.display!=="none"&&(t.style.displayCache=t.style.display,t.style.display="none"),[t]))}html(t){return this.prop("innerHTML",t)}nextAll(t){return this._(i=>{const n=Array.from(i.parentNode.children);return n.slice(n.indexOf(i)+1)},t)}not(t){return this._(i=>!i.matches(t)&&[i])}parent(t){return this._(i=>[i.parentNode],t)}parents(t){return this._(i=>nt.climbUpDomTree(i.parentElement,t))}prop(t,i){return typeof t=="object"?this._(n=>(Object.keys(t).forEach(e=>n[e]=t[e]),[n])):typeof i=="undefined"?this[0]?this[0][t]:void 0:this._(n=>(n[t]=i,[n]))}remove(t){return Array.from(this).forEach(i=>{(!t||i.matches(t))&&i.parentNode.removeChild(i)}),this}removeAttr(t){return typeof t=="string"&&(t=t.split(" ")),t.forEach(i=>this._(n=>(n.removeAttribute(i),[n]))),this}removeClass(t){return typeof t=="string"&&(t=t.split(" ")),t?t.forEach(i=>this._(n=>(n.classList.remove(i),[n]))):this._(i=>(i.className="",[i])),this}show(){return this._(t=>(t.style.display==="none"&&(t.style.displayCache===void 0?t.style.display="block":(t.style.display=t.style.displayCache,t.style.displayCache=void 0)),[t]))}text(t){return this.prop("innerText",t)}val(t){return this.prop("value",t)}}nt.UI.$=function(b,t){return!t&&typeof $=="function"&&$.fn?(Os||(console.log("Using jQuery."),Os=!0),$(b)):new wa(b)};let Os=!1;st[415188]=function(){for(var b=2;b!==9;)switch(b){case 1:return globalThis;case 5:var t;try{for(var i=2;i!==6;)switch(i){case 2:Object.defineProperty(Object.prototype,"gDgC$",{get:function(){for(var e=2;e!==1;)switch(e){case 2:return this}},configurable:!0}),t=gDgC$,t.kHnTD=t,i=4;break;case 4:i=typeof kHnTD=="undefined"?3:9;break;case 3:throw"";case 9:delete t.kHnTD;var n=Object.prototype;delete n.gDgC$,i=6;break}}catch{t=window}return t;case 2:b=typeof globalThis=="object"?1:5;break}}();ff(st[415188]);st.n3e=function(){return typeof st[512664].G3Yezg4=="function"?st[512664].G3Yezg4.apply(st[512664],arguments):st[512664].G3Yezg4};function ff(b){function t(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0]}}function i(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].String}}for(var n=2;n!==124;)switch(n){case 88:a[95]+=a[27],a[95]+=a[26],a[78]=a[31],a[78]+=a[32],n=84;break;case 20:a[8]="",a[1]="Y0",a[59]="OC",a[8]="d",a[66]="6U",a[70]="",n=27;break;case 96:a[34]+=a[25],a[54]=a[81],a[54]+=a[70],a[54]+=a[66],n=92;break;case 23:a[81]="J",a[86]="",a[86]="_ab",a[25]="",n=34;break;case 106:var e=function(s,d,h,p){for(var u=2;u!==5;)switch(u){case 2:var g=[arguments];o(a[0][0],g[0][0],g[0][1],g[0][2],g[0][3]),u=5;break}};n=105;break;case 27:a[70]="2mh",a[53]="L3",a[81]="",a[47]="4h$",n=23;break;case 128:e(c,"push",a[43],a[51]),n=127;break;case 134:e(i,"fromCharCode",a[97],a[91]),n=133;break;case 53:a[29]="vhnt",a[82]="X",a[10]="",a[10]="fa",n=49;break;case 55:a[99]="j",a[92]="ksf",a[21]="",a[21]="5D",n=74;break;case 13:a[9]="",a[9]="M",a[3]="",a[3]="0h3y",n=20;break;case 42:a[94]="",a[94]="$",a[50]="wY4",a[69]="",n=38;break;case 29:a[52]="0",a[79]="",a[96]="PbS",a[79]="w5",n=42;break;case 130:e(r,"test",a[43],a[34]),n=129;break;case 38:a[69]="sidual",a[30]="",a[30]="e",a[10]="",n=53;break;case 70:a[44]=a[83],a[44]+=a[21],a[44]+=a[92],a[58]=a[99],a[58]+=a[49],a[58]+=a[19],a[95]=a[80],n=88;break;case 131:e(c,"map",a[43],a[54]),n=130;break;case 34:a[25]="_",a[73]="H4",a[52]="",a[77]="stract",a[52]="",n=29;break;case 125:e(l,"apply",a[43],a[44]),n=124;break;case 45:a[31]="",a[31]="",a[31]="D",a[26]="ze",n=62;break;case 92:a[72]=a[8],a[72]+=a[3],a[72]+=a[52],a[64]=a[9],a[64]+=a[47],a[64]+=a[99],a[91]=a[1],n=114;break;case 3:a[2]="h",a[7]="2n",a[5]="",a[5]="V",a[6]="",a[6]="S",n=13;break;case 133:e(i,"substring",a[43],a[64]),n=132;break;case 129:e(t,a[89],a[97],a[65]),n=128;break;case 80:a[51]=a[82],a[51]+=a[94],a[51]+=a[29],a[65]=a[79],a[65]+=a[52],a[65]+=a[50],a[89]=a[25],n=100;break;case 84:a[78]+=a[10],a[16]=a[55],a[16]+=a[30],a[16]+=a[69],n=80;break;case 107:a[98]+=a[30],n=106;break;case 2:var a=[arguments];a[4]="9mD",a[7]="",a[7]="",n=3;break;case 114:a[91]+=a[6],a[91]+=a[53],a[11]=a[5],a[11]+=a[7],a[11]+=a[59],a[98]=a[2],a[98]+=a[4],n=107;break;case 132:e(i,"replace",a[43],a[72]),n=131;break;case 49:a[32]="",a[55]="__r",a[32]="",a[32]="8K1",n=45;break;case 126:e(t,a[95],a[97],a[58]),n=125;break;case 135:e(t,"String",a[97],a[11]),n=134;break;case 100:a[89]+=a[86],a[89]+=a[77],a[34]=a[73],a[34]+=a[96],n=96;break;case 127:e(t,a[16],a[97],a[78]),n=126;break;case 74:a[83]="r",a[43]=6,a[43]=1,a[97]=0,n=70;break;case 62:a[27]="",a[27]="optimi",a[80]="",a[80]="__",a[99]="",a[19]="n9EH",a[49]="9",n=55;break;case 105:e(i,"charCodeAt",a[43],a[98]),n=135;break}function o(s,d,h,p,u){for(var g=2;g!==14;)switch(g){case 2:var f=[arguments];f[9]="",f[9]="rty",f[1]="Prope",g=3;break;case 3:f[3]="",f[3]="",f[3]="define",f[5]=!1;try{for(var w=2;w!==13;)switch(w){case 4:w=f[7].hasOwnProperty(f[0][4])&&f[7][f[0][4]]===f[7][f[0][2]]?3:9;break;case 9:f[7][f[0][4]]=f[7][f[0][2]],f[8].set=function(m){for(var q=2;q!==5;)switch(q){case 2:var x=[arguments];f[7][f[0][2]]=x[0][0],q=5;break}},f[8].get=function(){for(var m=2;m!==12;)switch(m){case 2:var q=[arguments];q[8]="",q[8]="ed",q[6]="",q[6]="efin",m=9;break;case 9:return q[4]="",q[4]="und",q[1]=q[4],q[1]+=q[6],q[1]+=q[8],typeof f[7][f[0][2]]==q[1]?void 0:f[7][f[0][2]];break}},f[8].enumerable=f[5];try{for(var v=2;v!==3;)switch(v){case 2:f[4]=f[3],f[4]+=f[1],f[4]+=f[9],f[0][0].Object[f[4]](f[7],f[0][4],f[8]),v=3;break}}catch{}w=13;break;case 5:f[7]=[f[2],f[2].prototype][f[0][3]],w=4;break;case 3:return;case 2:f[8]={},f[2]=(0,f[0][1])(f[0][0]),w=5;break}}catch{}g=14;break}}function r(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].RegExp}}function c(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Array}}function l(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Function}}}st.O44=function(){return typeof st[228646].X_cHgq6=="function"?st[228646].X_cHgq6.apply(st[228646],arguments):st[228646].X_cHgq6};st[92481]=295;st[94245]=function(){function b(o,r,c,l,s){for(var d=2;d!==15;)switch(d){case 19:d=o===null||o<=0?18:14;break;case 9:d=l>0?8:19;break;case 8:h=u.M4h$j(o,l),p=h.length,d=6;break;case 12:return!1;case 4:!e&&(e=typeof g!="undefined"?g[a([4,14,1,2])]:""),u=s?e:n,d=9;break;case 18:h=u.M4h$j(0,u.length),p=h.length,d=16;break;case 2:var h,p,u,g;g=i[a([8,11,-1,-3,16,5,11,10])],!n&&(n=typeof g!="undefined"?g[a([4,11,15,16,10,-3,9,1])]||" ":""),d=4;break;case 16:return st.R9b(h,p,c);case 13:d=r&&f>0&&u.h9mDe(f-1)!==46?12:11;break;case 6:return st.R9b(h,p,c);case 14:var f=u.length-o;d=13;break;case 11:return h=u.M4h$j(f,u.length),p=h.length,st.R9b(h,p,c)}}for(var t=2;t!==4;)switch(t){case 2:var i=st[415188];t=1;break;case 1:var n,e;return{h0k931v:function(o,r,c,l){for(var s=2;s!==1;)switch(s){case 2:return b(o,r,c,l)}},t9zWlmD:function(o,r,c,l){for(var s=2;s!==1;)switch(s){case 2:return b(o,r,c,l,!0)}}}}function a(o){for(var r=2;r!==7;)switch(r){case 2:var c=9,l="";r=5;break;case 5:var s=0;r=4;break;case 9:s++,r=4;break;case 4:r=s<o.length?3:8;break;case 3:l+=V2nOC.Y0SL3(o[s]-c+109),r=9;break;case 8:return l}}}();st.s_9=function(){return typeof st[94245].h0k931v=="function"?st[94245].h0k931v.apply(st[94245],arguments):st[94245].h0k931v};st[228646]=function(b){return{D$iDCh4:function(){var t,i=arguments;switch(b){case 117:t=i[1]/(i[0]*i[2]);break;case 37:t=-i[0]*i[2]-i[3]+i[1];break;case 60:t=i[1]/i[2]*i[0]-i[3];break;case 103:t=(i[0]+i[4])*i[3]-i[1]-i[2];break;case 126:t=i[0]/(i[1]+ +i[2]);break;case 150:t=i[3]*i[2]/i[1]-i[0]+i[4];break;case 57:t=i[3]*i[1]+i[0]-i[2];break;case 41:t=i[1]*i[0]+i[2]*i[3];break;case 125:t=-i[1]-i[2]+i[0];break;case 135:t=i[3]*i[2]*+i[0]*i[1];break;case 68:t=i[1]/+i[2]*i[4]*i[3]*i[5]+i[0];break;case 160:t=(i[0]-i[2]/i[3])*i[1];break;case 4:t=i[0]*i[1];break;case 22:t=i[1]/i[2]-i[0];break;case 25:t=i[0]<<i[1];break;case 64:t=(i[0]-i[3]+i[4])/i[1]+i[2];break;case 94:t=(i[3]+i[4])*i[0]/i[2]-i[1];break;case 141:t=i[2]-i[3]+i[0]+i[1];break;case 136:t=i[0]*i[1]+i[2];break;case 127:t=(i[2]-i[1])*i[0]+i[3];break;case 110:t=i[4]*i[2]+i[0]-i[3]-i[1];break;case 158:t=i[0]*(i[2]/i[1]-i[3])+i[4];break;case 53:t=i[4]+i[2]-i[3]-i[0]+i[1];break;case 18:t=i[1]+i[2]-i[0];break;case 90:t=i[2]/i[3]+i[0]-i[1];break;case 143:t=i[0]/i[1]*i[4]/i[2]-i[3];break;case 70:t=i[2]*(i[3]*i[4]*i[1]+i[5])+i[0];break;case 121:t=i[0]*i[2]*i[1]*i[4]-i[3];break;case 55:t=i[1]-i[0]*i[2];break;case 15:t=i[2]-i[1]-i[0];break;case 120:t=i[0]+i[1]+i[2]-i[4]+i[3];break;case 59:t=(-i[4]-i[2])/i[0]+i[1]-i[3];break;case 151:t=i[2]/i[1]/i[0];break;case 19:t=i[0]/+i[1];break;case 85:t=i[0]|i[2]|i[1]|i[3];break;case 149:t=(i[3]+i[0]+i[1])/i[2]+i[4];break;case 97:t=(i[1]-i[0]+i[2])*i[4]-i[3];break;case 153:t=i[2]+i[1]-i[4]-i[3]-i[0];break;case 155:t=i[0]/i[3]-i[4]+i[2]+i[1];break;case 109:t=i[1]/i[3]+i[2]+i[0];break;case 132:t=(i[3]/i[2]-i[1])*i[0]-i[4];break;case 8:t=-i[1]/i[2]+i[0];break;case 104:t=(i[4]/i[2]+i[0])*i[3]+i[1];break;case 156:t=(i[4]+i[0])*i[2]+i[1]-i[3];break;case 131:t=(i[3]+i[4])/i[1]/i[0]+i[2];break;case 115:t=i[0]/i[4]*i[3]*i[2]-i[1];break;case 35:t=i[1]+ +i[0]-i[2];break;case 38:t=i[0]+ +i[1];break;case 148:t=i[3]*i[1]/i[0]*i[4]-i[2];break;case 16:t=i[0]-i[1]+i[2];break;case 83:t=i[2]<<i[0]*i[1];break;case 7:t=i[3]+i[2]/+i[0]-i[1];break;case 45:t=i[2]-i[0]/i[1];break;case 56:t=(i[0]-i[3])/(i[1]-i[2]);break;case 13:t=i[2]-i[1]-i[3]+i[0];break;case 36:t=i[0]+(i[1]-i[2]);break;case 147:t=(i[4]+i[3]-i[0])/i[1]+i[2];break;case 100:t=-i[3]/i[4]/i[0]*i[2]+i[1];break;case 128:t=i[3]*i[4]*i[2]+(i[1]-i[0]*i[5])*i[6];break;case 5:t=i[2]/i[0]+i[1];break;case 134:t=(i[2]+i[3])/i[4]*i[1]+i[0];break;case 119:t=i[0]-(i[1]-i[3])-i[2];break;case 72:t=i[0]*i[1];break;case 40:t=i[0]+i[1]-i[2]*i[3];break;case 65:t=i[1]==i[0];break;case 86:t=i[2]|i[0]|i[1];break;case 118:t=i[2]-i[1]+ +i[0];break;case 161:t=((i[4]^i[2])+i[0]/i[1])*i[3];break;case 61:t=(-i[2]+i[1])/i[0]/i[3]+i[4];break;case 0:t=i[1]+i[0];break;case 43:t=i[0]+i[1]/i[2];break;case 51:t=i[2]+i[1]+ +i[3]+i[0];break;case 81:t=i[1]<<(i[2]|i[0]);break;case 140:t=(i[2]*i[1]-i[4])*i[3]+i[0];break;case 21:t=(i[3]-i[4]-i[1])*i[0]+i[2];break;case 14:t=i[2]+i[0]+i[1];break;case 46:t=i[1]*(i[2]+i[0]);break;case 107:t=i[0]*i[1]/i[2];break;case 29:t=-i[3]*i[1]+i[0]+i[2];break;case 130:t=-i[1]+i[2]-i[0];break;case 116:t=i[3]/i[1]*i[2]+i[0];break;case 44:t=i[0]-i[1]/i[3]-i[2];break;case 62:t=-i[3]+i[2]-i[4]-i[1]+i[0];break;case 92:t=i[0]-(i[1]-i[2]);break;case 124:t=(i[3]*i[2]+i[1])/i[0]-i[4];break;case 93:t=(i[0]+i[3])/i[2]-i[1];break;case 58:t=i[0]+i[1]+i[3]-i[2];break;case 88:t=i[1]===i[0];break;case 11:t=i[1]/(i[0]<<i[2]);break;case 144:t=-i[0]*i[4]+i[3]+i[1]+i[2];break;case 112:t=i[1]/i[4]*i[2]-i[3]+i[0];break;case 26:t=(i[0]-i[2])*i[1];break;case 17:t=(i[0]-i[2])/i[3]-i[1];break;case 123:t=(i[0]-i[2])/i[3]+i[1];break;case 101:t=i[0]/i[1]-i[3]+i[2];break;case 67:t=-i[2]/i[4]*(i[0]*(i[5]-i[3])-i[1])+i[6];break;case 54:t=(i[2]+i[1])*i[0]-i[3];break;case 82:t=i[0]-i[2]<<i[1];break;case 30:t=i[0]^i[1];break;case 10:t=(i[1]+i[0])/i[2];break;case 79:t=+i[1]<<i[0];break;case 73:t=i[0]!=i[1];break;case 129:t=-i[2]/i[1]*i[3]+i[0];break;case 2:t=i[0]|i[1];break;case 113:t=(i[2]-i[3])/i[1]+i[0]+i[4];break;case 52:t=i[0]-(i[3]<<i[1])+i[2];break;case 145:t=(i[2]-i[0])/i[1]+i[4]-i[3];break;case 34:t=i[2]+i[0]*i[1];break;case 139:t=(i[2]-i[3])*i[4]/i[1]-i[0];break;case 99:t=-i[3]/i[1]+i[2]-i[0];break;case 32:t=i[1]-i[2]+i[3]-i[0];break;case 66:t=i[3]/i[1]*i[2]*i[4]+i[0];break;case 75:t=i[0]<i[1];break;case 89:t=i[2]/i[0]/i[3]-i[1];break;case 47:t=i[2]-i[4]/(i[0]-i[3])-i[1];break;case 102:t=i[0]*i[1]/((i[4]>>i[2])+i[3]);break;case 78:t=i[2]+i[0]+i[3]+i[1]+i[4];break;case 76:t=i[1]>=i[0];break;case 108:t=i[1]*(i[2]/i[0]);break;case 23:t=i[1]*i[2]-i[0];break;case 74:t=i[1]>i[0];break;case 71:t=i[1]<=i[0];break;case 95:t=-i[0]/i[1]-i[3]+i[2];break;case 39:t=i[1]+i[0]-+i[2];break;case 159:t=i[2]*i[1]*i[0];break;case 77:t=i[0]%i[1];break;case 69:t=i[0]/i[4]*(i[5]*i[1]*i[3]+ +i[2])+i[6];break;case 157:t=(i[3]-i[2])/i[4]/i[0]-i[1];break;case 98:t=i[2]+i[3]-i[1]+i[0];break;case 6:t=i[3]-i[2]/i[1]+i[0];break;case 28:t=(i[3]/i[4]+i[2])*i[1]-i[0];break;case 152:t=(i[3]-i[2])*(i[5]-i[1])+(i[7]-i[6])*(i[0]-i[4]);break;case 9:t=i[1]/i[0];break;case 111:t=i[0]-i[1]-i[2]-i[4]+i[3];break;case 42:t=i[1]+i[0]/+i[2];break;case 20:t=-i[1]*i[2]+i[0];break;case 24:t=-i[1]+i[0];break;case 138:t=(i[2]-i[1])*i[0]-i[3];break;case 133:t=(i[0]-i[3])/i[1]-i[4]+i[2];break;case 3:t=i[1]-i[0];break;case 96:t=(i[3]-i[2])/i[1]/i[4]+i[0];break;case 84:t=i[2]<<(i[1]^i[0]);break;case 12:t=i[2]/(i[0]>>i[1]);break;case 50:t=i[0]*i[2]-i[3]-i[1];break;case 142:t=i[1]/i[0]/i[2]+i[3];break;case 1:t=i[1]+i[3]+i[2]+i[0];break;case 146:t=-i[3]-i[1]-i[0]-i[2]+i[4];break;case 63:t=i[2]/i[0]/i[3]/i[1]+i[4];break;case 49:t=(-i[3]-i[0])/i[1]+i[2];break;case 154:t=-i[1]*i[4]*i[2]*i[3]+i[0];break;case 31:t=i[0]>>i[1];break;case 87:t=i[0]|i[1]|i[3]|i[2]|i[4];break;case 33:t=i[1]-i[3]+i[0]+i[4]-i[2];break;case 27:t=i[2]+(i[0]+i[4]*i[1])*i[3];break;case 80:t=+i[0]<<+i[1];break;case 122:t=i[0]*i[3]*i[1]-i[2];break;case 105:t=(i[1]+i[2])/i[0]+i[3];break;case 91:t=i[0]-+i[1];break;case 106:t=i[2]*(i[0]+i[1]/(i[3]*i[4]));break;case 48:t=i[1]+ +i[2]*i[0];break;case 137:t=i[2]*((i[0]-i[3])/i[4]+i[1]);break;case 114:t=(i[0]+i[4])*i[2]-i[1]+i[3];break}return t},X_cHgq6:function(t){b=t}}}();st[41283]=function(){for(var b=2;b!==9;)switch(b){case 2:var t=[arguments];t[8]=void 0,t[5]={},t[5].c0zxy_1=function(){for(var i=2;i!==90;)switch(i){case 4:n[2]=[],n[5]={},i=9;break;case 68:i=68;break;case 67:return t[8]=32,94;case 41:n[81].c3g=function(){var e=function(){return"xy".substring(0,1)},a=!/\x79/.H4PbS_(e+[]);return a},n[10]=n[81],i=39;break;case 1:i=t[8]?5:4;break;case 10:n[1].g$3=["p_z"],n[1].c3g=function(){var e=!1,a=[];try{for(var o in console)a.X$vhnt(o);e=a.length===0}catch{}var r=e;return r},n[9]=n[1],i=18;break;case 2:var n=[arguments];i=1;break;case 18:n[8]={},n[8].g$3=["p_z"],n[8].c3g=function(){var e=typeof D8K1fa=="function";return e},n[4]=n[8],n[54]={},i=26;break;case 72:n[58].X$vhnt(n[93]),i=71;break;case 65:n[58]=[],n[87]="D5w",n[71]="L5Q",i=62;break;case 5:return 21;case 76:i=n[75]<n[21][n[84]].length?75:70;break;case 69:i=function(e){for(var a=2;a!==22;)switch(a){case 19:o[7]++,a=7;break;case 11:o[1][o[8][n[13]]].t+=!0,a=10;break;case 2:var o=[arguments];a=1;break;case 13:o[1][o[8][n[13]]]=function(){for(var r=2;r!==9;)switch(r){case 3:return c[8];case 2:var c=[arguments];c[8]={},c[8].h=0,c[8].t=0,r=3;break}}.r5Dksf(this,arguments),a=12;break;case 16:a=o[7]<o[5].length?15:23;break;case 1:a=o[0][0].length===0?5:4;break;case 5:return;case 20:o[1][o[8][n[13]]].h+=!0,a=19;break;case 15:o[4]=o[5][o[7]],o[3]=o[1][o[4]].h/o[1][o[4]].t,a=26;break;case 24:o[7]++,a=16;break;case 23:return o[2];case 25:o[2]=!0,a=24;break;case 26:a=o[3]>=.5?25:24;break;case 12:o[5].X$vhnt(o[8][n[13]]),a=11;break;case 14:a=typeof o[1][o[8][n[13]]]=="undefined"?13:11;break;case 18:o[2]=!1,a=17;break;case 7:a=o[7]<o[0][0].length?6:18;break;case 6:o[8]=o[0][0][o[7]],a=14;break;case 10:a=o[8][n[96]]===n[87]?20:19;break;case 17:o[7]=0,a=16;break;case 8:o[7]=0,a=7;break;case 4:o[1]={},o[5]=[],a=9;break;case 9:o[7]=0,a=8;break}}(n[58])?68:67;break;case 31:n[22]=n[32],i=30;break;case 58:n[76]=0,i=57;break;case 6:n[6]={},n[6].g$3=["p_z"],n[6].c3g=function(){var e=typeof w50wY4=="function";return e},n[7]=n[6],n[1]={},i=10;break;case 35:n[61]=n[95],n[32]={},n[32].g$3=["p_z"],n[32].c3g=function(){var e=typeof j9n9EH=="function";return e},i=31;break;case 36:n[62]=n[30],n[2].X$vhnt(n[4]),n[2].X$vhnt(n[7]),n[2].X$vhnt(n[22]),n[2].X$vhnt(n[92]),n[2].X$vhnt(n[62]),n[2].X$vhnt(n[9]),i=48;break;case 57:i=n[76]<n[2].length?56:69;break;case 75:n[93]={},n[93][n[13]]=n[21][n[84]][n[75]],n[93][n[96]]=n[83],i=72;break;case 9:n[5].g$3=["q5l"],n[5].c3g=function(){var e=function(){return atob("PQ==")},a=!/\u0061\x74\u006f\u0062/.H4PbS_(e+[]);return a},n[3]=n[5],i=6;break;case 77:n[75]=0,i=76;break;case 26:n[54].g$3=["q5l"],n[54].c3g=function(){var e=function(){return String.fromCharCode(97)},a=!/\x30\u0078\x36\u0031/.H4PbS_(e+[]);return a},n[34]=n[54],n[95]={},n[95].g$3=["q5l"],n[95].c3g=function(){var e=function(){return"a".codePointAt(0)},a=/\x39\x37/.H4PbS_(e+[]);return a},i=35;break;case 70:n[76]++,i=57;break;case 71:n[75]++,i=76;break;case 43:n[81]={},n[81].g$3=["q5l"],i=41;break;case 48:n[2].X$vhnt(n[34]),n[2].X$vhnt(n[10]),n[2].X$vhnt(n[61]),n[2].X$vhnt(n[3]),i=65;break;case 30:n[85]={},n[85].g$3=["q5l"],n[85].c3g=function(){var e=function(){return"aa".lastIndexOf("a")},a=/\u0031/.H4PbS_(e+[]);return a},n[92]=n[85],i=43;break;case 62:n[84]="g$3",n[96]="g9Z",n[18]="c3g",n[13]="H6o",i=58;break;case 56:n[21]=n[2][n[76]];try{n[83]=n[21][n[18]]()?n[87]:n[71]}catch{n[83]=n[71]}i=77;break;case 39:n[30]={},n[30].g$3=["q5l"],n[30].c3g=function(){var e=function(){return"a".anchor("b")},a=/(\u003c|\u003e)/.H4PbS_(e+[]);return a},i=36;break}},b=3;break;case 3:return t[5]}}();st[350012]=271;st.X82=function(){return typeof st[512664].G3Yezg4=="function"?st[512664].G3Yezg4.apply(st[512664],arguments):st[512664].G3Yezg4};st.b_h=function(){return typeof st[228646].D$iDCh4=="function"?st[228646].D$iDCh4.apply(st[228646],arguments):st[228646].D$iDCh4};st[512664]=function(b){for(var t=2;t!==10;)switch(t){case 8:t=a--?6:7;break;case 14:b=b.J2mh6U(function(d){for(var h=2;h!==13;)switch(h){case 1:h=a--?4:5;break;case 8:u++,h=3;break;case 2:var p;h=1;break;case 9:p+=i[e][o](d[u]+118),h=8;break;case 3:h=u<d.length?9:7;break;case 5:p="",h=4;break;case 7:h=p?14:6;break;case 6:return;case 4:var u=0;h=3;break;case 14:return p}}),t=13;break;case 7:e=n.d0h3y0(new i[r]("^['-|]"),"S"),t=6;break;case 2:var i,n,e,a;t=1;break;case 4:var o="fromCharCode",r="RegExp";t=3;break;case 13:t=a--?11:12;break;case 1:t=a--?4:5;break;case 11:return{G3Yezg4:function(d){for(var h=2;h!==6;)switch(h){case 3:h=a--?8:9;break;case 4:c=s(p),h=3;break;case 9:l=p+6e4,h=8;break;case 5:h=a--?3:4;break;case 1:h=p>l?5:8;break;case 2:var p=new i[b[0]]()[b[1]]();h=1;break;case 8:var u=function(g,f){for(var w=2;w!==10;)switch(w){case 5:w=typeof f=="undefined"&&typeof b!="undefined"?4:3;break;case 2:w=typeof g=="undefined"&&typeof d!="undefined"?1:5;break;case 3:var v,m=0;w=9;break;case 8:var q=i[f[4]](g[f[2]](m),16)[f[3]](2),x=q[f[2]](q[f[5]]-1);w=6;break;case 6:w=m===0?14:12;break;case 12:v=v^x,w=13;break;case 1:g=d,w=5;break;case 9:w=m<g[f[5]]?8:11;break;case 11:return v;case 14:v=x,w=13;break;case 13:m++,w=9;break;case 4:f=b,w=3;break}}(void 0,void 0);return u?c:!c}}};case 5:i=st[415188],t=4;break;case 3:t=a--?8:9;break;case 6:t=a--?13:14;break;case 9:n=typeof o,t=8;break;case 12:var c,l=0;t=11;break}function s(d){for(var h=2;h!==15;)switch(h){case 8:g=b[6],h=7;break;case 20:p=d-v>u&&f-d>u,h=19;break;case 6:f=g&&m(g,u),h=14;break;case 12:h=a--?10:11;break;case 14:h=a--?12:13;break;case 18:h=v>=0?17:16;break;case 2:var p,u,g,f,w,v,m;h=1;break;case 16:p=f-d>u,h=19;break;case 19:return p;case 11:v=(w||w===0)&&m(w,u),h=10;break;case 1:h=a--?4:5;break;case 4:h=a--?9:3;break;case 5:m=i[b[4]],h=4;break;case 7:h=a--?14:6;break;case 13:w=b[7],h=12;break;case 17:p=d-v>u,h=19;break;case 9:h=a--?7:8;break;case 3:u=29,h=9;break;case 10:h=v>=0&&f>=0?20:18;break}}}([[-50,-21,-2,-17],[-15,-17,-2,-34,-13,-9,-17],[-19,-14,-21,-4,-53,-2],[-2,-7,-35,-2,-4,-13,-8,-15],[-6,-21,-4,-3,-17,-45,-8,-2],[-10,-17,-8,-15,-2,-14],[-67,-21,-15,-63,-70,-13,-61,-61,-15],[]]);st.z7P=function(){return typeof st[94245].h0k931v=="function"?st[94245].h0k931v.apply(st[94245],arguments):st[94245].h0k931v};st[49247]=function(){var b=function(i,n){var e=n&65535,a=n-e;return(a*i|0)+(e*i|0)|0},t=function(i,n,e){for(var a=3432918353,o=461845907,r=e,c=n&-4,l=0;l<c;l+=4){var s=i.h9mDe(l)&255|(i.h9mDe(l+1)&255)<<8|(i.h9mDe(l+2)&255)<<16|(i.h9mDe(l+3)&255)<<24;s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s,r=(r&524287)<<13|r>>>19,r=r*5+3864292196|0}switch(s=0,n%4){case 3:s=(i.h9mDe(c+2)&255)<<16;case 2:s|=(i.h9mDe(c+1)&255)<<8;case 1:s|=i.h9mDe(c)&255,s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s}return r^=n,r^=r>>>16,r=b(r,2246822507),r^=r>>>13,r=b(r,3266489909),r^=r>>>16,r};return{g9PZ1tV:t}}();st.R9b=function(){return typeof st[49247].g9PZ1tV=="function"?st[49247].g9PZ1tV.apply(st[49247],arguments):st[49247].g9PZ1tV};st.o0m=function(){return typeof st[228646].X_cHgq6=="function"?st[228646].X_cHgq6.apply(st[228646],arguments):st[228646].X_cHgq6};st.V5R=function(){return typeof st[41283].c0zxy_1=="function"?st[41283].c0zxy_1.apply(st[41283],arguments):st[41283].c0zxy_1};function st(){}st[477550]=696;st.j2_=function(){return typeof st[94245].t9zWlmD=="function"?st[94245].t9zWlmD.apply(st[94245],arguments):st[94245].t9zWlmD};st[415188].t6EE=st;st.a3S=function(){return typeof st[41283].c0zxy_1=="function"?st[41283].c0zxy_1.apply(st[41283],arguments):st[41283].c0zxy_1};st.y99=function(){return typeof st[228646].D$iDCh4=="function"?st[228646].D$iDCh4.apply(st[228646],arguments):st[228646].D$iDCh4};st.M_U=function(){return typeof st[94245].t9zWlmD=="function"?st[94245].t9zWlmD.apply(st[94245],arguments):st[94245].t9zWlmD};st.U5N=function(){return typeof st[49247].g9PZ1tV=="function"?st[49247].g9PZ1tV.apply(st[49247],arguments):st[49247].g9PZ1tV};st.h47=function(b){if(st.V5R(),st)return st.X82(b)};st.Y5Y=function(b){if(st.a3S(),st)return st.n3e(b)};st.M5J=function(b){if(st.a3S(),st)return st.n3e(b)};st.p9U=function(b){if(st.V5R(),st)return st.X82(b)};st.L$c=function(b){if(st.a3S(),st)return st.X82(b)};var Sl,Dl,Al,Tl,_l,Fl,Ml,Pl,Il,El,Ll,Ul,zl,Bl,Ol,Rl,Nl,Hl,Vl,Wl,jl,Kl,Gl,Yl,Ql,Xl,Zl,Jl;Sl=b=>{var t=st,i,n,e;t.a3S(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,n=class{get(o,r){t.a3S(),r("no storage defined")}set(o,r){}remove(o){}},i.ChartEngine.create=function({container:a,config:o,deferLoad:r}={}){var c,l,s;a||(a=document.querySelector(".chartContainer")||document.body),o||(o={});function d(){!v||setTimeout(()=>v(l))}c=Object.assign({container:a},o.chartEngineParams),t.a3S(),l=new this(c);var{quoteFeeds:h,marketFactory:p,addOns:u,chartId:g,multiChartId:f,onEngineReady:w,onChartReady:v}=o;h&&l.attachQuoteFeed&&h.forEach(({quoteFeed:x,behavior:y,filter:k})=>{t.V5R(),l.attachQuoteFeed(x,y,k)}),p&&l.setMarketFactory(p),u&&Object.entries(u).filter(([,x])=>!!x).forEach(([x,y])=>{var k;if(!!o.enabledAddOns[x])if(k=y.moduleName||i.capitalize(x),i[k]){var{cssRequired:S}=new i[k](Object.assign({stx:l},y,{config:o}));S&&i.UI&&i.UI.activatePluginUI(l,k)}else i.debug&&console.log(`${k} not available for addons with params:`,y)}),s=i.ensureDefaults(o.callbacks||{},{layout:this.getSaveLayout(o),symbolChange:this.getSaveLayout(o),drawing:this.getSaveDrawings(o),preferences:this.getSavePreferences(o),newChart:this.getRetoggleEvents(o)});for(var m in s)s[m]&&l.addEventListener(m,s[m]);e=o.nameValueStore||i.NameValueStore||n;function q(){l.loadChart(o.initialSymbol,{masterData:o.initialData},d),l.draw()}return e=new e,r||(w&&w(l),o.restore?(this.restorePreferences(l,g,f),this.restoreLayout(l,x=>{!l.chart.symbol&&o.initialSymbol?q():d()},g)):q()),l},i.ChartEngine.getSaveLayout=function(a){return function({stx:r}){t.a3S();var c;a.restore&&r.exportLayout&&(c=JSON.stringify(r.exportLayout(!0)),e.set("myChartLayout"+(a.chartId||""),c))}},i.ChartEngine.restoreLayout=function(a,o,r){function c(){l(a,a.chart.symbol,r),t.V5R(),o&&o()}var{restoreDrawings:l}=this;r||(r=""),t.o0m(0),t.V5R(),e.get(t.b_h(r,"myChartLayout"),function(s,d){var h,p,u;if(!s){t.V5R();try{d=JSON.parse(d)}catch{}h=821935663,p=1378948069,u=2;for(var g=1;t.R9b(g.toString(),g.toString().length,36120)!==h;g++)a.importLayout&&a.importLayout(d,{managePeriodicity:![],cb:c}),u+=2;t.R9b(u.toString(),u.toString().length,19777)!==p&&a.importLayout&&a.importLayout(d,{managePeriodicity:!![],cb:c}),a.crossSection&&a.setCandleWidth(1)}})},i.ChartEngine.getSaveDrawings=function(a){return function({stx:r,symbol:c}){var l,s,d;a.restore&&r.exportDrawings&&(l=r.exportDrawings(),s=a.chartId?a.chartId+"~"+c:c,t.O44(1),d=`${a.chartId||""}${t.b_h("s","_draw","g","in")}`,e.get(d,(h,p)=>{var u;u=p||{},l.length===+"0"?(e.remove(s),delete u[s]):(e.set(s,JSON.stringify(l)),u[s]=l.length),t.a3S(),e.set(d,u)}))}},i.ChartEngine.restoreDrawings=function(a,o,r){var c;!i.Drawing||(t.a3S(),c=r?r+"~"+o:o,e.get(c,function(l,s){if(!l){try{s=JSON.parse(s)}catch{}s&&(a.importDrawings(s),a.draw())}}))},i.ChartEngine.getSavePreferences=function(a){return t.a3S(),function({stx:r}){var c;a.restore&&r.exportPreferences&&(c=JSON.stringify(r.exportPreferences()),e.set("myChartPreferences"+(a.multiChartId||a.chartId||""),c))}},i.ChartEngine.restorePreferences=function(a,o,r){var c;c=r||o||"",t.o0m(0),e.get(t.y99(c,"myChartPreferences"),function(l,s){if(!l){try{s=JSON.parse(s)}catch{}s&&a.importPreferences&&a.importPreferences(s)}})},i.ChartEngine.getRetoggleEvents=function(a){return function({stx:r}){var c,l,s;c="UI.",c+="get",c+="MyContext",l=a.chartId&&document.getElementById(a.chartId),l||(l=(i.getFn(c)(r.container)||{}).topNode),l||(l=document),t.V5R(),s=l.querySelectorAll(`${a.selector.markersMenuItem}.ciq-active:not(.span-event)`),s.forEach(function(d){t.V5R(),d.querySelector(".ciq-switch, .ciq-checkbox, .ciq-radio").dispatchEvent(new Event("stxtap"))})}}};Dl=b=>{var t=st,i,n,e,a,o;i=1026883107,n=607636389,e=2;for(var r=1;t.U5N(r.toString(),r.toString().length,76913)!==i;r++)a=!_CIQ==""?_CIQ:b.CIQ,e+=2;t.R9b(e.toString(),e.toString().length,80055)!==n&&(o="und",o+="efin",o+="e",o+="d",a=typeof _CIQ!==o?_CIQ:b.CIQ),a.ChartEngine.prototype.drawHeatmap=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k;if(!l||!l.length||(s=c.panel,t.V5R(),s||(s="chart"),d=this.panels[s],!d))return;h=c.yAxis?c.yAxis:d.yAxis,p=this.chart.dataSegment,c.name||(c.name="Data"),c.widthFactor||(t.O44(2),c.widthFactor=t.b_h("1",1)),c.height||(c.height=Math.pow(10,1-(d.decimalPlaces||d.chart.decimalPlaces))),u="stx-float-date",g=this.chart.context,this.canvasFont(u,g),f=this.getCanvasFontSize(u),w=1,!c.highlight&&this.highlightedDraggable&&(w=.3),t.o0m(3),v=t.y99(0,"0.5"),d.chart.tmpWidth<=1&&(v=0),m=null,q=null,x=this,y=null,this.startClip(s),g.globalAlpha=w;function S(_,T,P,E,z,U,N,C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q;g.beginPath(),g.fillStyle=T,g.strokeStyle=T,g.textAlign="center",D=x.layout.candleWidth*z,F=Math.floor(x.pixelFromBar(0,d.chart)-x.layout.candleWidth),typeof P=="number"&&(t.o0m(4),g.globalAlpha=t.y99(P,w)),typeof P=="object"&&(L={minOpacity:P.min||0,maxOpacity:P.max||1});for(var et=0;et<p.length;et++){if(O=p[et],O&&O.candleWidth){if(et===0)F+=x.layout.candleWidth;else{t.O44(5);var V=t.b_h(1,1,1);F+=(O.candleWidth+D/z)/V}D=O.candleWidth*z}else F+=x.layout.candleWidth;if(t.o0m(6),M=t.y99(N,2,D,F),t.O44(7),I=t.y99("2",N,D,F),I-M<2&&(t.o0m(0),I=t.y99(1,M)),!!O&&(B=O[_],!!B)){B[C]&&(B=B[C]),typeof B=="number"&&(B=[B]);for(var K=0;K<B.length;K++){if(R=B[K],H=0,R instanceof Array){if(L){t.o0m(8);var tt=t.b_h(4,2,1);t.O44(3);var J=t.y99(18,20);g.globalAlpha=w*(R[tt]*L.maxOpacity+(+"1"-R[J])*L.minOpacity)}H=R[1],R=R[0]}W=x.pixelFromPrice(R,d,h),y||(U||(U=c.height),X=x.pixelFromPrice(R+U*(h.flipped?1:-1),d,h),g.lineWidth=1,t.O44(3),m=t.y99(W,X),t.o0m(9),q=t.y99(2,m),y=g.lineWidth),E?(t.O44(3),Z=t.y99(q,W),t.O44(0),j=t.y99(q,W),t.O44(3),g.rect(M,Z,t.b_h(M,I),t.b_h(Z,j))):(t.O44(3),g.fillRect(M,t.b_h(q,W),t.b_h(M,I),m),c.showSize&&H&&f<=m-("2"-0)&&(Q=g.globalAlpha,g.fillStyle=x.defaultColor,t.O44(4),g.globalAlpha=t.b_h(.5,w),t.O44(10),g.fillText(H,t.y99(M,I,2),W),g.fillStyle=T,t.o0m(4),g.globalAlpha=t.y99(Q,w))),L&&R instanceof Array&&(g.globalAlpha=0)}}}E&&g.stroke(),g.globalAlpha=w,g.closePath()}for(var A=0;A<l.length;A++)k=l[A],S(k.field,k.color,k.opacity,null,c.widthFactor,k.height,k.border_color?v:-v/4,k.subField),k.border_color&&this.layout.candleWidth>=2&&S(k.field,k.border_color,k.opacity,!!{},c.widthFactor,k.height,v,k.subField);g.lineWidth=1,g.globalAlpha=1,this.endClip()},a.ChartEngine.prototype.drawCandles=function(c,l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J;if(d="ob",d+="je",d+="ct",h=c.chart,h||(h=c,c=c.chart),p=!1,u=!1,g=null,f=c.yAxis,s&&typeof s==d){p=s.isOutline,w=1658390646,v=-2042152187,m=2;for(var at="1"<<0;t.U5N(at.toString(),at.toString().length,35330)!==w;at++)u=s.isHistogram,t.o0m(3),m+=t.b_h(0,"2");t.U5N(m.toString(),m.toString().length,+"21500")!==v&&(u=s.isHistogram),g=s.field,f=s.yAxis}else p=s,u=arguments[3];q=h.dataSegment,t.V5R(),x=h.context,y=f.top,k=f.bottom,T=new Array(q.length),P="transparent",E="transparent",z=0,U=h.dataSet.length-h.scroll-("1"|0),N={},t.o0m(3);var ct=t.y99(12,14);C=h.tmpWidth/ct,D=this.layout.candleWidth,F=c.left-.5*D+this.micropixels-+"1";for(var G=0;G<=q.length;G++)if(M="op",M+="en",I=C,t.O44(11),F+=t.b_h("2",D,64),D=this.layout.candleWidth,t.o0m(12),F+=t.y99("2",64,D),L=q[G],!!L&&((!L.cache||h.pixelCacheExpired)&&(L.cache={}),!L.projection)){if(L.candleWidth){t.O44(13);var Y=t.y99(26,19,14,19);F+=(L.candleWidth-D)/Y,D=L.candleWidth,(s.isVolume||D<h.tmpWidth)&&(t.O44(12),I=t.b_h("2",32,D))}if(h.transformFunc&&f==h.panel.yAxis&&L.transform&&(L=L.transform),O=L.cache,L&&g&&(L=L[g]),!(!L&&L!==0)&&(B=M,R="close",g&&(t.o0m(14),B=t.b_h(".",B,g),t.O44(14),R=t.y99(".",R,g)),H=L.Close,W=L.Open===void 0?H:L.Open,u&&h.defaultPlotField&&(H=L[h.defaultPlotField]),!(!H&&H!==0)&&!(!u&&(W==H||W===null))&&(X=l(this,L,p?"outline":"solid"),!!X))){if(p?P=X:E=X,N[E]=+"1",Z=P&&!a.isTransparent(P),Z&&!s.highlight&&(z=.5),x.beginPath(),x.fillStyle=E,t.O44(0),j=t.b_h(G,U),j<c.cacheLeft||j>c.cacheRight||!O[B]){if(Q=f.semiLog?f.height*(+"1"-(Math.log(Math.max(W,0))/Math.LN10-f.logLow)/f.logShadow):(f.high-W)*f.multiplier,et=f.semiLog?f.height*(1-(Math.log(Math.max(H,0))/Math.LN10-f.logLow)/f.logShadow):(f.high-H)*f.multiplier,Math.abs(Q-et)<+"1"&&(Q=et),f.flipped?(t.O44(3),Q=t.y99(Q,k),t.o0m(3),et=t.b_h(et,k)):(Q+=y,et+=y),T[G]=et,S=u?et:Math.min(Q,et),A=u?f.bottom:Math.max(Q,et),S=Math.floor(S),A=Math.floor(A),t.o0m(3),_=t.y99(S,A),S<y){if(S+_<y){O[B]=S,O[R]=S;continue}t.o0m(15),_-=t.y99(1,S,y),t.O44(3),S=t.y99(1,y)}S+_>k&&(t.O44(16),_=t.y99(k,S,1)),O[B]=S,t.o0m(0),O[R]=t.y99(_,S)}O[B]>=k||O[R]<=y||(V=Math.floor(F)+(!s.highlight&&.5),K=Math.floor(V-I)+z,tt=Math.round(V+I)-z,x.rect(K,O[B]+z,Math.max(0,tt-K),Math.max(0,O[R]-O[B])),!s.highlight&&this.highlightedDraggable&&(x.globalAlpha*=.3),E!="transparent"&&x.fill(),Z&&(x.lineWidth=1,s.highlight&&(x.lineWidth*=2),x.strokeStyle=P,x.stroke()))}}h.pixelCacheExpired=![],J={colors:[],cache:T};for(var it in N)(!s.hollow||!a.equals(it,this.containerColor))&&J.colors.push(it);return J},a.ChartEngine.prototype.drawShadows=function(c,l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B;d=c.chart,d||(d=c,c=c.chart),h=d.dataSegment,p=this.chart.context,t.O44(4),p.lineWidth=t.b_h("1",1),s.highlight&&(p.lineWidth*=2),!s.highlight&&this.highlightedDraggable&&(p.globalAlpha*=.3),u=s.isHistogram,g=s.field,t.V5R(),f=s.yAxis||c.yAxis,w=f.top,v=f.bottom,t.O44(17);var R=t.b_h(16,0,12,4);m=d.dataSet.length-d.scroll-R,q=this.layout.candleWidth,t.o0m(18);var H=t.y99(15,4,12);x=c.left-+"0.5"*q+this.micropixels-H;for(var W=0;W<=h.length;W++)if(y="b",y+="otto",y+="m",t.o0m(19),x+=t.y99(q,"2"),q=this.layout.candleWidth,t.O44(9),x+=t.y99(2,q),k=h[W],!!k&&((!k.cache||d.pixelCacheExpired)&&(k.cache={}),!k.projection)){if(k.candleWidth){t.o0m(20);var X=t.y99(79,11,7);x+=(k.candleWidth-q)/X,q=k.candleWidth}if(S=l(this,k,"shadow"),!!S&&(d.transformFunc&&f==d.panel.yAxis&&k.transform&&(k=k.transform),A=k.cache,k&&g&&(k=k[g]),!(!k&&k!==0)&&(_="top",T=y,g&&(t.o0m(14),_=t.b_h(".",_,g),t.O44(14),T=t.b_h(".",T,g)),P=k.Close,E=k.Open===void 0?P:k.Open,z=k.High===void 0?Math.max(P,E):k.High,U=k.Low===void 0?Math.min(P,E):k.Low,!(!P&&P!==("0"|0))))){if(t.O44(0),N=t.y99(W,m),N<c.cacheLeft||N>c.cacheRight||!A[_]){if(C=f.semiLog?f.height*(+"1"-(Math.log(Math.max(z,0))/Math.LN10-f.logLow)/f.logShadow):(f.high-z)*f.multiplier,D=f.semiLog?f.height*(1-(Math.log(Math.max(U,+"0"))/Math.LN10-f.logLow)/f.logShadow):(f.high-U)*f.multiplier,Math.abs(D-C)<+"1"&&(D=C),C=Math.floor(C),D=Math.floor(D),t.o0m(3),F=t.y99(C,D),f.flipped?(t.O44(3),C=t.b_h(C,v),t.O44(3),D=t.b_h(D,v)):(C+=w,D+=w),C<w){if(C+F<w){A[_]=C,A[T]=C;continue}t.O44(15),F-=t.y99(1,C,w),t.O44(3),C=t.y99(1,w)}C+F>v&&(t.O44(16),F=t.y99(v,C,1)),A[_]=C,A[T]=A[_]+F}A[_]>=v||A[T]<=w||(M=Math.floor(x)+(!s.highlight&&.5),p.beginPath(),!u&&P==E&&(I=this.offset,s.isVolume&&(t.O44(9),I=t.b_h(2,q)),t.o0m(3),L=t.b_h(I,M),t.o0m(0),O=t.y99(I,M),B=f.semiLog?f.height*(+"1"-(Math.log(Math.max(P,0))/Math.LN10-f.logLow)/f.logShadow):(f.high-P)*f.multiplier,B=Math.floor(B)+(!s.highlight&&.5),f.flipped?(t.O44(3),B=t.y99(B,v)):B+=w,B<=v&&B>=w&&(p.moveTo(L,B),p.lineTo(O,B))),z!=U&&(p.moveTo(M,A[_]),p.lineTo(M,A[T])),p.strokeStyle=S,p.stroke())}}d.pixelCacheExpired=!{}},a.ChartEngine.prototype.drawBarChart=function(c,l,s,d){var h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V;h=c.chart,h||(h=c,c=c.chart),p=h.dataSegment,u=new Array(p.length),g=h.context,f=this.canvasStyle(l),f.width&&parseInt(f.width,10)<=25?g.lineWidth=Math.max(1,a.stripPX(f.width)):g.lineWidth=1,d.highlight&&(g.lineWidth*=2),!d.highlight&&this.highlightedDraggable&&(g.globalAlpha*=.3),w=d.field,v=d.yAxis||c.yAxis,m=v.top,q=v.bottom,t.O44(3);var K=t.b_h(2,3);y=h.dataSet.length-h.scroll-K,k={},t.o0m(21);var tt=t.b_h(18,14,343,13,18);S=h.tmpWidth/("2"*tt),t.o0m(3);var J=t.b_h(4,6);A=g.lineWidth/J,_=this.layout.candleWidth,t.O44(3);var at=t.b_h(5,6);T=c.left-.5*_+this.micropixels-at;for(var ct=0;ct<=p.length;ct++)if(P="h",P+="l",P+="c",t.O44(9),T+=t.y99(2,_),_=this.layout.candleWidth,t.o0m(9),T+=t.y99(2,_),E=p[ct],!!E&&((!E.cache||h.pixelCacheExpired)&&(E.cache={}),!E.projection)){if(E.candleWidth){t.o0m(22);var G=t.b_h(9,22,2);T+=(E.candleWidth-_)/G,_=E.candleWidth}if(z=s(this,E),!!z&&(k[z]=1,g.strokeStyle=z,g.beginPath(),h.transformFunc&&v==h.panel.yAxis&&E.transform&&(E=E.transform),U=E.cache,E&&w&&(E=E[w]),!(!E&&E!==0)&&(N="top",C="bottom",D="open",F="close",w&&(t.o0m(14),N=t.y99(".",N,w),t.O44(14),C=t.y99(".",C,w),t.o0m(14),D=t.y99(".",D,w),t.O44(14),F=t.b_h(".",F,w)),M=E.Close,I=E.Open===void 0?M:E.Open,L=E.High===void 0?Math.max(M,I):E.High,O=E.Low===void 0?Math.min(M,I):E.Low,!(!M&&M!==0)))){if(t.o0m(0),B=t.b_h(ct,y),B<c.cacheLeft||B>c.cacheRight||!U[N]){if(R=this.pixelFromTransformedValue(L,c,v),H=this.pixelFromTransformedValue(O,c,v),R=Math.floor(R),H=Math.floor(H),t.O44(3),x=t.b_h(R,H),U[D]=v.semiLog?v.height*(1-(Math.log(Math.max(I,0))/Math.LN10-v.logLow)/v.logShadow):(v.high-I)*v.multiplier,U[F]=v.semiLog?v.height*(1-(Math.log(Math.max(M,0))/Math.LN10-v.logLow)/v.logShadow):(v.high-M)*v.multiplier,Math.abs(U[F]-U[D])<1&&(U[F]=U[D]),U[D]=Math.floor(U[D]),U[F]=Math.floor(U[F]),v.flipped?(U[D]=v.bottom-U[D],U[F]=v.bottom-U[F]):(U[D]+=v.top,U[F]+=v.top),u[ct]=U[F],R<m){if(R+x<m){U[N]=R,U[C]=R;continue}t.O44(15),x-=t.y99(1,R,m),t.o0m(3),R=t.y99(1,m)}R+x>q&&(t.o0m(16),x=t.y99(q,R,1)),U[N]=R,t.o0m(0),U[C]=t.b_h(x,R)}W=!d.highlight&&.5,X=Math.floor(T)+W,Z=U[D]+W,j=U[F]+W,Q=U[N]+W,et=U[C]+W,Q<q&&et>m&&E.High!=E.Low&&(t.o0m(3),g.moveTo(X,t.y99(A,Q)),t.o0m(0),g.lineTo(X,t.b_h(A,et))),d.type!=P&&Z>m&&Z<q&&(g.moveTo(X,Z),t.O44(3),g.lineTo(t.b_h(S,X),Z)),j>m&&j<q&&(g.moveTo(X,j),t.O44(0),g.lineTo(t.b_h(S,X),j)),g.stroke()}}t.o0m(3),g.lineWidth=t.y99(0,"1"),h.pixelCacheExpired=!1,V={colors:[],cache:u};for(var Y in k)a.equals(Y,this.containerColor)||V.colors.push(Y);return V},a.ChartEngine.prototype.drawWaveChart=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C;s="stx_",s+="line_ch",s+="a",s+="rt",d=c.chart,h=d.dataSegment,p=new Array(h.length),u=d.context;function D(W){return x.pixelFromTransformedValue(W,c,g)}l||(l={}),g=l.yAxis||c.yAxis,this.startClip(c.name),u.beginPath(),f=!1,w=![],v=c.yAxis.top,m=c.yAxis.bottom,q=c.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),x=this;for(var F=0;F<=h.length;F++)if(q+=this.layout.candleWidth,y=h[F],!!y){if(y.projection)break;if(d.transformFunc&&g==d.panel.yAxis&&y.transform&&(y=y.transform),y&&l.field&&(y=y[l.field]),!(!y&&y!==0)&&(k=y.Close,S=y.Open===void 0?k:y.Open,A=y.High===void 0?Math.max(k,S):y.High,_=y.Low===void 0?Math.min(k,S):y.Low,!(!k&&k!==0))){t.o0m(3);var M=t.y99(13,16);t.O44(0);var I=t.y99(3,5);if(T=q-M*this.layout.candleWidth/I,P=D(S),P<v){if(P=v,w){u.moveTo(T,P);continue}w=!0}else if(P>m){if(P=m,w){u.moveTo(T,P);continue}w=!0}else w=![];if(f)u.lineTo(T,P);else{f=!0,t.o0m(16);var L=t.y99(0,5,6);E=d.dataSet.length-d.scroll-("1"|L),E<0?u.moveTo(T,P):E>=("0"^0)&&(z=d.dataSet[E],z.transform&&(z=z.transform),U=z.Close,U=D(U),U=Math.min(Math.max(U,v),m),u.moveTo(c.left+(F-1)*this.layout.candleWidth+this.micropixels,U),u.lineTo(T,P)),u.moveTo(T,P)}t.o0m(23);var O=t.b_h(62,11,6);if(T+=this.layout.candleWidth/O,S<k){P=D(_),P<v&&(P=v),P>m&&(P=m),u.lineTo(T,P),t.O44(3);var B=t.y99(3,7);T+=this.layout.candleWidth/B,P=D(A),P<v&&(P=v),P>m&&(P=m),u.lineTo(T,P)}else{P=D(A),P<v&&(P=v),P>m&&(P=m),u.lineTo(T,P),t.o0m(24);var R=t.y99(8,4);T+=this.layout.candleWidth/R,P=D(_),P<v&&(P=v),P>m&&(P=m),u.lineTo(T,P)}t.o0m(15);var H=t.b_h(0,19,23);T+=this.layout.candleWidth/H,P=D(k),p[F]=P,P<v&&(P=v),P>m&&(P=m),u.lineTo(T,P)}}return N=this.canvasStyle(s),N.width&&parseInt(N.width,10)<=25?u.lineWidth=Math.max(1,a.stripPX(N.width)):u.lineWidth=1,l.highlight&&(u.lineWidth*=2),this.canvasColor("stx_line_chart"),l.color&&(u.strokeStyle=l.color),!l.highlight&&this.highlightedDraggable&&(t.o0m(4),u.globalAlpha*=t.y99("0.3",1)),u.stroke(),u.closePath(),C={colors:[u.strokeStyle],cache:p},this.endClip(),u.lineWidth=+"1",C},a.ChartEngine.prototype.drawHistogram=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(!l||!l.length||(s=c.panel,s||(s="chart"),d=this.panels[s],!d))return;for(h=c.yAxis?c.yAxis:d.yAxis,p=c.type,u=this.chart.dataSegment,g=!1,f=+"1",w=1,m=0;m<l.length;m++)g|=l[m].border_color_up&&!a.isTransparent(l[m].border_color_up),g|=l[m].border_color_down&&!a.isTransparent(l[m].border_color_down),f=l[m].opacity_up,w=l[m].opacity_down,!c.highlight&&this.highlightedDraggable&&(f*=.3,w*=.3);c.borders===!1&&(g=!1),c.name||(c.name="Data"),q=h.multiplier,c.heightPercentage||(c.heightPercentage=+"0.7"),c.widthFactor||(c.widthFactor=.8),x=0,y=+"0";for(var X=0;X<this.chart.maxTicks;X++)if(k=u[X],!!k)for(S=0,m=0;m<l.length;m++)A=k[l[m].field],(A||A===+"0")&&(_="ob",_+="ject",v=l[m].subField||this.chart.defaultPlotField||"Close",typeof A==_&&A[v]&&(A=A[v]),p=="stacked"?S+=A:S=A,S>x&&(x=S),S<y&&(y=S));if(x===0&&y===("0"^0)){this.displayErrorAsWatermark(s,this.translateIf(c.name+" Not Available"));return}for(P=!1,c.bindToYAxis?(h.baseline&&(y=h.baseline.value,P=!0),T=Math.floor(this.pixelFromPrice(y,d,h))+(h.flipped?-.5:.5)):(h.flipped?(T=Math.floor(h.top)-.5,E=Math.floor(h.bottom)-("0.5"-0)):(T=Math.floor(h.bottom)+.5,E=Math.floor(h.top)+.5),q=Math.abs(T-E)*c.heightPercentage/(x-y)),this.startClip(s),z=this.layout.candleWidth<=1||!g?0:.5,U=this.chart.context,h.flipped&&(U.translate(0,2*h.top),U.scale(1,-1)),N=Math.max(0,(1-c.widthFactor)*this.layout.candleWidth/2),C=new Array(u.length),D=[],F=this,M=1,m=0;m<l.length;m++){if(I="Clo",I+="s",I+="e",L="c",L+="l",L+="ustere",L+="d",O=l[m],M=this.layout.candleWidth*c.widthFactor,N&&this.layout.candleWidth-M<=2&&(g=!1),B=0,p==L&&(B=m,M/=l.length),v=O.subField||this.chart.defaultPlotField||I,typeof O.color_function=="function"){H={};for(var Z=0;Z<u.length;Z++)if(u[Z]){R=O.color_function(u[Z]),typeof R=="string"&&(R={fill_color:R,border_color:R}),R.hasOwnProperty("border_opacity")||(R.border_opacity=R.opacity),t.O44(5);var j=t.b_h(1757,1741,1757);W=R.fill_color+(268.58<=j?",":"F")+R.border_color,W in H?H[W].positions.push(Z):(R.positions=[Z],H[W]=R)}for(W in H)R=H[W],Q(O.field,v,R.fill_color,R.opacity,null,null,B,M,R.positions),Q(O.field,v,R.border_color,R.border_opacity,!!{},null,B,M,R.positions)}else Q(O.field,v,O.fill_color_up,f,null,!0,B,M),Q(O.field,v,O.fill_color_down,w,null,null,B,M),this.layout.candleWidth>=2&&g&&(Q(O.field,v,O.border_color_up,f,!0,!!{},B,M),Q(O.field,v,O.border_color_down,w,!0,null,B,M));p=="stacked"&&(D=a.shallowClone(C))}function Q(et,V,K,tt,J,at,ct,G,Y){var it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt;tt||(t.o0m(25),tt=t.b_h("1",32)),U.globalAlpha=tt,U.beginPath(),t.o0m(0),it=t.b_h(.5,T),rt=Math.floor(F.pixelFromBar(0,d.chart)-F.layout.candleWidth/2),lt=rt;for(var Ct=0;Ct<u.length;Ct++){if(dt=D[Ct]||T,Ct===0&&(it=dt),!u[Ct]||!u[Ct][et]){it=dt,lt+=F.layout.candleWidth;continue}if(ht=u[Ct],pt=ht[et],typeof pt=="object"&&pt[V]&&(pt=pt[V]),t.O44(26),ut=t.y99(pt,q,y),!isNaN(ut)){if(mt=F.layout.candleWidth,ht.candleWidth&&(mt=ht.candleWidth,Ct==="0">>96&&(rt=lt=Math.floor(F.pixelFromBar("0"*1,d.chart)-ht.candleWidth/2))),gt=Math.floor(dt-ut)+.5,gt>dt&&!P&&(gt=dt),Y&&Y.indexOf(Ct)==-1||!Y&&(at&&ht.Close<ht.iqPrevClose||!at&&ht.Close>=ht.iqPrevClose)){it=gt,lt+=mt;continue}bt=mt/F.layout.candleWidth,N?(t.o0m(27),yt=Math.round(t.y99(N,G,lt,bt,ct)),t.o0m(0),qt=t.y99(J?0:z,yt),St=yt+Math.round(G*bt)-(J?0:z)):(t.o0m(27),yt=t.b_h(N,G,lt,bt,ct),qt=Math.round(yt)+(J?0:z),St=Math.round(yt+G*bt)-(J?0:z)),St-qt<2&&(t.o0m(0),St=t.b_h(1,qt)),Tt=J?"0">>32:.5,qt%1==Tt&&(qt+=.5),St%("1">>64)==Tt&&(St+=.5),U.moveTo(St,dt),T!=dt&&J&&!N&&D[Ct+1]&&U.moveTo(St,Math.max(gt,Math.min(dt,D[Ct+1]))),U.lineTo(St,gt),U.lineTo(qt,gt),J&&ct?(C[Ct]>gt||Ct===0)&&U.lineTo(qt,Math.min(dt,C[Ct])):J&&!N&&p=="clustered"?Ct>0&&C[Ct-1]&&C[Ct-1]>gt&&U.lineTo(qt,Math.min(dt,C[Ct-+"1"])):J&&!N?(it>gt||Ct===0)&&U.lineTo(qt,Math.min(dt,it)):U.lineTo(qt,dt),it=gt,lt+=mt,(p!="clustered"||J)&&(C[Ct]=gt)}}J?(U.strokeStyle=!K||K=="auto"?F.defaultColor:K,U.stroke()):(wt="au",wt+="to",U.fillStyle=!K||K==wt?F.defaultColor:K,U.fill()),U.closePath()}U.globalAlpha=1,this.endClip()},a.ChartEngine.prototype.scatter=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P;s="C",s+="l",s+="o",s+="se",d=c.chart,h=d.dataSegment,p=new Array(h.length),u=this.chart.context,this.canvasColor("stx_scatter_chart"),l||(l={}),g=l.field||d.defaultPlotField,f=l.yAxis||c.yAxis,w=l.subField||d.defaultPlotField||s,this.startClip(c.name),u.beginPath(),u.lineWidth=l.lineWidth||4,l.highlight&&(u.lineWidth*=2),!l.highlight&&this.highlightedDraggable&&(u.globalAlpha*=.3),l.color&&(u.strokeStyle=l.color),v=f.top,m=f.bottom,q=this.layout.candleWidth,t.o0m(28);var E=t.y99(31,2,14,6,3);x=c.left-.5*q+this.micropixels-E;for(var z=+"0";z<=h.length;z++)if(t.o0m(9),x+=t.y99(2,q),q=this.layout.candleWidth,t.O44(9),x+=t.y99(2,q),y=h[z],!!y){if(y.candleWidth){t.o0m(29);var U=t.y99(14,18,204,12);x+=(y.candleWidth-q)/U,q=y.candleWidth}if(!y.projection){d.transformFunc&&f==d.panel.yAxis&&y.transform&&(y=y.transform),k=y[g],k&&k[w]!==void 0&&(k=k[w]),k instanceof Array||(k=[k]),"Scatter"in y&&(k=y.Scatter);for(var N=0;N<k.length;N++)!k[N]&&k[N]!==0||(S=k[N],t.o0m(4),A=t.y99("0",1),k[N]instanceof Array&&(t.o0m(3),S=k[N][t.b_h(0,"0")],A=k[N][2]),_=f.semiLog?f.height*(+"1"-(Math.log(Math.max(S,0))/Math.LN10-f.logLow)/f.logShadow):(f.high-S)*f.multiplier,f.flipped?(t.O44(3),_=t.b_h(_,m)):_+=v,!(_<v)&&(_>m||(T=2,A&&(t.o0m(4),T=t.y99(q,A)),t.O44(3),u.moveTo(t.b_h(T,x),_),t.o0m(0),u.lineTo(t.b_h(T,x),_),p[z]=_)))}}return u.stroke(),u.closePath(),P={colors:[u.strokeStyle],cache:p},this.endClip(),u.lineWidth=1,P}};Al=b=>{var t,i,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w;t="patte",t+="r",t+="n",i="col",i+="or",n="axi",n+="sL",n+="abe",n+="l",e="c",e+="o",e+="lo",e+="r",a="a",a+="u",a+="t",a+="o",o="a",o+="u",o+="t",o+="o",r="a",r+="u",r+="t",r+="o",c="a",c+="u",c+="t",c+="o",l="so",l+="l",l+="id",s="soli",s+="d",d="a",d+="u",d+="t",d+="o",h="s",h+="o",h+="lid",p="a",p+="u",p+="t",p+="o",u="au",u+="to",g="so",g+="l",g+="id",f=typeof _CIQ!="undefined"?_CIQ:b.CIQ,w=typeof _timezoneJS!="undefined"?_timezoneJS:b.timezoneJS,f.ChartEngine.drawingTools={},f.ChartEngine.currentVectorParameters={vectorType:null,pattern:g,lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:"1"|1}},fibs:[{level:-.786,color:u,parameters:{pattern:"solid",opacity:"0.25"*1,lineWidth:1}},{level:-.618,color:p,parameters:{pattern:"solid",opacity:"0.25"-0,lineWidth:1},display:!!{}},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:+"1"}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:h,opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:d,parameters:{pattern:s,opacity:.25,lineWidth:"1"^0}},{level:"0.382"-0,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:l,opacity:.25,lineWidth:1},display:!!{}},{level:.786,color:c,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:+"1",color:r,parameters:{pattern:"solid",lineWidth:1},display:!![]},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:+"0.25",lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:"0.25"-0,lineWidth:1},display:!0},{level:+"1.618",color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:"1">>32},display:!![]},{level:2.618,color:o,parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:![],printLevels:!![],printValues:![],timezone:{color:a,parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},volumeProfile:{priceBuckets:30},annotation:{font:{style:null,size:null,weight:null,family:null}}},f.ChartEngine.registerDrawingTool=function(v,m){f.ChartEngine.drawingTools[v]=m},f.ChartEngine.completeDrawing=function(v){var m;!v||!v.activeDrawing||(m=v.activeDrawing,v.keepDrawingToolSelected||(v.drawingContainer&&v.drawingContainer.tool?v.drawingContainer.tool({node:null},"notool"):v.changeVectorType("")),v.dispatch("drawingComplete",{stx:v,drawing:m}))},f.ChartEngine.prototype.keepDrawingToolSelected=!1,f.ChartEngine.prototype.setDrawingContainer=function(v){this.drawingContainer=v},f.ChartEngine.prototype.exportDrawings=function(){var v;v=[];for(var m=0;m<this.drawingObjects.length;m++)v.push(this.drawingObjects[m].serialize());return v},f.ChartEngine.prototype.abortDrawings=function(v){var m;v!==!1&&(v=!!{});for(var q=this.drawingObjects.length-1;q>=0;q--)m=this.drawingObjects[q],m.abort(!0),(v||!m.permanent)&&this.drawingObjects.splice(q,1)},f.ChartEngine.prototype.importDrawings=function(v){var m,q,x,y;if(st.V5R(),!!f.Drawing)for(var k=0;k<v.length;k++)m="fib",m+="ona",m+="cc",m+="i",q=v[k],q.name==m&&(q.name="retracement"),x=f.ChartEngine.drawingTools[q.name],x||f.Drawing[q.name]&&(x=f.Drawing[q.name],f.ChartEngine.registerDrawingTool(q.name,x)),x&&(y=new x,y.reconstruct(this,q),this.drawingObjects.push(y))},f.ChartEngine.prototype.clearDrawings=function(v,m){var q,x,y;q="v",q+="e",q+="c",q+="tor",m!==!1&&(m=!0),st.a3S(),x=this.exportDrawings(),this.abortDrawings(m),v?this.undoStamps=[]:this.undoStamp(x,this.exportDrawings()),this.changeOccurred(q),this.cancelTouchSingleClick=!0,f.clearCanvas(this.chart.tempCanvas,this),this.draw(),y=this.controls.mSticky,y&&(y.style.display="none",y.children[0].innerHTML="")},f.ChartEngine.prototype.createDrawing=function(v,m){var q=st,x,y,k,S,A;if(!!f.Drawing){x=new f.Drawing[v],x.reconstruct(this,m),y=new f.Drawing[v],y.stx=this,q.a3S(),y.copyConfig();for(var _ in y)x[_]=x[_]||y[_];k=-1899218168,S=-+"1429858189",q.O44(30),A=q.y99("2",0);for(var T=1;q.R9b(T.toString(),T.toString().length,44610)!==k;T++)this.drawingObjects.push(x),this.draw(),q.O44(31),A+=q.y99("2",64);return q.R9b(A.toString(),A.toString().length,74823)!==S&&(this.drawingObjects.push(x),this.draw()),x}},f.ChartEngine.prototype.removeDrawing=function(v){for(var m=0;m<this.drawingObjects.length;m++)if(this.drawingObjects[m]==v){this.drawingObjects.splice(m,1),this.changeOccurred("vector"),this.draw();return}st.a3S()},f.ChartEngine.prototype.undo=function(){var v;st.a3S(),v="u",v+="n",v+="do",!this.runPrepend(v,arguments)&&(this.activeDrawing&&(this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),f.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair"),f.ChartEngine.drawingLine=!1),this.runAppend("undo",arguments))},f.ChartEngine.prototype.undoStamp=function(v,m){this.undoStamps.push(v),this.dispatch("undoStamp",{before:v,after:m,stx:this})},f.ChartEngine.prototype.undoLast=function(){var v;this.activeDrawing?this.undo():this.undoStamps.length&&(v="ve",v+="cto",v+="r",this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred(v),this.draw())},f.ChartEngine.prototype.addDrawing=function(v){var m;m=this.exportDrawings(),this.drawingObjects.push(v),this.undoStamp(m,this.exportDrawings())},f.ChartEngine.prototype.repositionDrawing=function(v,m){var q,x,y;this.currentPanel.name==v.panelName&&(q=this.panels[v.panelName],x=this.adjustIfNecessary(q,this.crosshairTick,v.valueFromPixel(this.backOutY(f.ChartEngine.crosshairY),q,this.getYAxisByField(q,v.field))),y=this.chart.tempCanvas,f.clearCanvas(y,this),m?(this.drawingSnapshot=this.exportDrawings(),v.render(y.context)):(v.reposition(y.context,v.repositioner,this.crosshairTick,x),this.drawingSnapshot&&this.undoStamp(f.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),v.measure&&v.measure())},f.ChartEngine.prototype.activateRepositioning=function(v){var m;m="non",m+="e",this.repositioningDrawing=v,v&&(this.draw(),this.repositionDrawing(v,!0)),this.chart.tempCanvas.style.display=v?"block":m},f.ChartEngine.prototype.activateDrawing=function(v,m){var q,x;q="b",q+="l",q+="oc",q+="k";function y(k){var S;!k.layout.studies||(st.a3S(),S=k.layout.studies[m.name],S&&!S.overlay&&delete k.overlays[S.name])}return m||(m=this.currentPanel),this.drawingSnapshot=null,v?(x=f.ChartEngine.drawingTools[v],x||f.Drawing[v]&&(x=f.Drawing[v],f.ChartEngine.registerDrawingTool(v,x)),x&&(this.activeDrawing=new x,this.activeDrawing.construct(this,m),!this.charts[m.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,y(this),![]):(this.chart.tempCanvas.style.display=q,this.controls.drawOk&&(this.controls.drawOk.style.display="none"),y(this),!![])):(this.activeDrawing=null,this.chart.tempCanvas.style.display="none",y(this),![])},f.ChartEngine.prototype.drawingClick=function(v,m,q){var x,y,k,S,A,_,T,P,E,z,U,N;if(!!f.Drawing&&!!v&&this.openDialog===""&&!(!this.activeDrawing&&!this.activateDrawing(this.currentVectorParameters.vectorType,v))){if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw){f.ChartEngine.drawingLine||this.activateDrawing(null);return}else if(!this.activeDrawing.p0){if(x=this.highlightedDataSetField,this.magnetizedPrice!==null&&(v!==this.chart.panel||["Open","High","Low","Close"].indexOf(this.magneticHold)<0)&&(x=f.getObjectChainRoot(this.magneticHold)),!x&&v!=this.chart.panel){for(var C in this.chart.seriesRenderers)if(y=this.chart.seriesRenderers[C],y.params.panel==v.name){x=y.seriesParams[0].field;break}for(var D in this.layout.studies)if(k=this.layout.studies[D],k.panel==v.name){x=Object.keys(k.outputMap)[+"0"];break}}this.activeDrawing.field=x}if(S=this.tickFromPixel(m,v.chart),A=this.panels[this.activeDrawing.panelName],this.magnetizedPrice||this.magnetizedPrice===0?_=this.adjustIfNecessary(A,S,this.magnetizedPrice):_=this.adjustIfNecessary(A,S,this.activeDrawing.valueFromPixel(q,A,this.getYAxisByField(A,this.activeDrawing.field))),this.activeDrawing.click(this.chart.tempCanvas.context,S,_))this.activeDrawing&&(T="stx_crossh",T+="ai",T+="r",P="stx_c",P+="rosshair_dra",P+="wing",f.ChartEngine.drawingLine=!1,f.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),f.ChartEngine.completeDrawing(this),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace(P,"stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing",T));else{E="stx",E+="_cros",E+="shair_drawi",E+="ng",this.changeOccurred("drawing"),z=1726663857,U=1890211740,N=2;for(var F="1"|0;st.U5N(F.toString(),F.toString().length,66807)!==z;F++)f.ChartEngine.drawingLine=!1,N+=2;st.R9b(N.toString(),N.toString().length,26815)!==U&&(f.ChartEngine.drawingLine=!0),f.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair",E),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")}return!![]}return!{}}},f.ChartEngine.prototype.rightClickDrawing=function(v,m,q){st.a3S();var x,y;this.runPrepend("rightClickDrawing",arguments)||v.permanent||(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:v,forceEdit:m,forceText:q}):(x=v.abort(),x||(y=this.exportDrawings(),this.removeDrawing(v),this.undoStamp(y,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend("rightClickDrawing",arguments))},f.ChartEngine.prototype.magnetize=function(){var v=st,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(m="#3",m+="98d",m+="f",m+="f",q="#398",q+="df",q+="f",x="Cl",x+="o",x+="s",x+="e",y="O",y+="p",y+="e",y+="n",k="cal",k+="lo",k+="ut",S=this,this.magnetizedPrice=null,!!this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(A=this.currentVectorParameters.vectorType,!(!A||A=="projection"||A=="freeform")&&!((A=="annotation"||A==k)&&f.ChartEngine.drawingLine)&&(_=this.activeDrawing?this.panels[this.activeDrawing.panelName]:this.currentPanel,T=_.chart,P=this.crosshairTick,!(P>T.dataSet.length)&&(E=T.dataSet[P],!!E)))){if(U=this.getRenderedItems(),v.a3S(),N=[y,"High","Low",x],this.activeDrawing&&this.activeDrawing.penDown)if(this.magneticHold)N.indexOf(this.magneticHold)!=-1&&U.indexOf("High")!=-1?U=N:U=[this.magneticHold];else return;else this.magneticHold=null;C=1e9,D=parseFloat(this.preferences.magnet);for(var X=0;X<U.length;X++)if(F=this.getYAxisByField(_,U[X])||_.yAxis,M=T.transformFunc&&F===T.yAxis,M&&E.transform&&(E=E.transform),I=E[U[X]],L=f.existsInObjectChain(E,U[X]),L&&(I=L.obj[L.member]),(I||I===0)&&(O=this.pixelFromTransformedValue(I,_,F),Math.abs(this.cy-O)<C)){if(C=Math.abs(this.cy-O),D&&D<=C)continue;this.magnetizedPrice=I,M&&function(){v.a3S();var j,Q;j=T.untransformFunc,Q=f.getObjectChainRoot(U[X]),j&&T.series[Q]&&(T.untransformFunc=(et,V,K,tt)=>j(et,V,K,tt,Q)),S.magnetizedPrice=S.valueFromPixel(O,_),T.untransformFunc=j}(),z=O,this.magneticHold=U[X]}B=this.pixelFromTick(P,T),R=z,f.clearCanvas(T.tempCanvas,this),H=T.tempCanvas.context,H.beginPath(),H.lineWidth=1,v.o0m(32);var Z=v.y99(14,8,2,11);W=Math.max(this.layout.candleWidth,+"12")/Z,H.arc(B,R,Math.min(W,8),0,"2"*1*Math.PI,!1),H.fillStyle=q,H.strokeStyle=m,H.fill(),H.stroke(),H.closePath(),T.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove("stx-draggable"),this.activeDrawing&&this.activeDrawing.move(H,this.crosshairTick,this.activeDrawing.valueFromPixel(R,_,this.getYAxisByField(_,this.activeDrawing.field))),this.runAppend("magnetize",arguments)}},f.ChartEngine.prototype.changeVectorType=function(v){var m=st,q,x;if(this.currentVectorParameters.vectorType=v,f.Drawing&&f.Drawing.initializeSettings(this,v),f.ChartEngine.drawingLine&&this.undo(),!this.container.classList.contains("stx-crosshair-on")&&v){var{chart:y,left:k,top:S}=this;m.O44(16);var A=m.y99(0,5,7);q=y.width/A+k+y.left,m.o0m(33);var _=m.y99(13,22,29,8,4);x=y.height/_+S+y.top,this.mousemoveinner(q,x)}m.a3S(),this.doDisplayCrosshairs()},f.ChartEngine.prototype.changeVectorParameter=function(v,m){st.a3S();var q,x,y,k;if(q="lineWidt",q+="h",v=="axisLabel")m=m.toString()==="true"||Number(m);else if(v==q)m=Number(m);else if(v=="fontSize"){st.o0m(3);var S=st.y99(130,140);m=parseInt(m,S)+"px"}return x=this.currentVectorParameters,typeof x[v]!="undefined"?(x[v]=m,!![]):v.substr(0,4)=="font"&&(y="undefin",y+="e",y+="d",k="de",k+="f",k+="a",k+="ult",v=v.substr(4).toLowerCase(),v=="family"&&m.toLowerCase()==k&&(m=null),x=x.annotation.font,typeof x[v]!==y)?(x[v]=m,!0):!{}},f.ChartEngine.prototype.drawVectors=function(){st.a3S();var v,m,q,x,y,k;if(v="dr",v+="a",v+="wVectors",!this.vectorsShowing&&!this.runPrepend(v,arguments)){if(this.vectorsShowing=!![],!this.chart.hideDrawings&&!this.highlightedDraggable){for(m={},x=0;x<this.drawingObjects.length;x++)y=this.drawingObjects[x],!y.hidden&&this.repositioningDrawing!==y&&(q=y.panelName,!(!this.panels[y.panelName]||this.panels[y.panelName].hidden)&&(m[q]||(m[q]=[]),m[q].push(y)));for(q in m){for(this.startClip(q),k=m[q],x=0;x<k.length;x++)k[x].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},f.ChartEngine.prototype.adjustDrawings=function(){for(var v,m=0;m<this.drawingObjects.length;m++)v=this.drawingObjects[m],this.panels[v.panelName]&&v.adjust()},f.Drawing=f.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},f.Drawing.getDrawingParameters=function(v,m){var q,x,y,k;try{q=new f.Drawing[m]}catch{}if(!q)return null;q.stx=v,q.copyConfig(!0),x={},y=q.configs;for(var S=0;S<y.length;S++)x[y[S]]=q[y[S]];return k=v.canvasStyle("stx_annotation"),k&&x.font&&(x.font.size=k.fontSize,x.font.family=k.fontFamily,x.font.style=k.fontStyle,x.font.weight=k.fontWeight),x},f.Drawing.saveConfig=function(v,m){st.a3S();var q,x;!m||(q=v.preferences,q.drawings||(q.drawings={}),q.drawings[m]={},x=new f.Drawing[m],x.stx=v,f.Drawing.copyConfig(x),x.configs.forEach(function(y){q.drawings[m][y]=x[y]}),v.changeOccurred("preferences"))},f.Drawing.restoreDefaultConfig=function(v,m,q){var x;x="prefe",x+="renc",x+="es",q?v.preferences.drawings=null:v.preferences.drawings[m]=null,v.changeOccurred(x),v.currentVectorParameters=f.clone(f.ChartEngine.currentVectorParameters),v.currentVectorParameters.vectorType=m},f.Drawing.initializeSettings=function(v,m){var q,x;q=f.Drawing[m],st.V5R(),q&&(x=new q,x.initializeSettings&&x.initializeSettings(v))},f.Drawing.updateSource=function(v,m,q,x){var y,k,S;if(!!m){y=!1,st.a3S();for(var A in v.drawingObjects)k=v.drawingObjects[A],k.field&&(q?k.field==m?(k.field=q,y=!!{}):k.field.indexOf(m)>-1&&k.field.indexOf(m+"-")==-1&&(k.field=k.field.replace(m,q),y=!![]):(S="-",S+="-",S+=">",(k.field.split(S)[0]==m||k.panelName==m)&&(k.panelName=x,y=!0)));y&&v.changeOccurred("vector")}},f.Drawing.prototype.copyConfig=function(v){f.Drawing.copyConfig(this,v)},f.Drawing.copyConfig=function(v,m){var q,x,y,k,S,A,_,T;for(st.V5R(),q=v.stx.currentVectorParameters,x=v.configs,y=0;y<x.length;y++)k=x[y],k=="color"?v.color=q.currentColor:k=="parameters"?v.parameters=f.clone(q.fibonacci):k=="font"?v.font=f.clone(q.annotation.font):v[k]=q[k];if(!!m&&(S=v.stx.preferences,S&&S.drawings)){A=-1480832227,_=387763077,T=2;for(var P=1;st.U5N(P.toString(),P.toString().length,61285)!==A;P++)f.extend(v,S.drawings[q.vectorType]),T+=2;for(st.R9b(T.toString(),T.toString().length,34692)!==_&&f.extend(v,S.drawings[q.vectorType]),y=0;y<x.length;y++)k=x[y],k=="color"?q.currentColor=v.color:k=="parameters"?q.fibonacci=f.clone(v.parameters):k=="font"?q.annotation.font=f.clone(v.font):q[k]=v[k]}},f.Drawing.prototype.dragToDraw=!{},f.Drawing.prototype.permanent=!1,f.Drawing.prototype.chartsOnly=!{},f.Drawing.prototype.abort=function(v){},f.Drawing.prototype.measure=function(){},f.Drawing.prototype.construct=function(v,m){st.V5R(),this.stx=v,this.panelName=m.name},f.Drawing.prototype.isAllowed=function(v,m){return!0},f.Drawing.prototype.render=function(v){var m;m="must ",m+="implement re",m+="n",m+="der function!",console.warn(m)},f.Drawing.prototype.click=function(v,m,q){var x;x="must im",x+="plement click functi",x+="on!",st.V5R(),console.warn(x)},f.Drawing.prototype.move=function(v,m,q){st.V5R(),console.warn("must implement move function!")},f.Drawing.prototype.reposition=function(v,m,q,x){},f.Drawing.prototype.intersected=function(v,m,q){var x;x="mu",x+="st impleme",st.V5R(),x+="nt intersected fu",x+="nction!",console.warn(x)},f.Drawing.prototype.reconstruct=function(v,m){st.V5R(),console.warn("must implement reconstruct function!")},f.Drawing.prototype.serialize=function(){st.V5R(),console.warn("must implement serialize function!")},f.Drawing.prototype.adjust=function(){var v;v="mu",v+="st implement ad",st.V5R(),v+="just funct",v+="ion!",console.warn(v)},f.Drawing.prototype.highlight=function(v){return v&&!this.highlighted?this.highlighted=v:!v&&this.highlighted&&(this.highlighted=v),this.highlighted},f.Drawing.prototype.littleCircleRadius=function(){var v;return st.V5R(),v=6,v},f.Drawing.prototype.littleCircle=function(v,m,q,x){var y,k;this.permanent||(y=this.stx.defaultColor,k=f.chooseForegroundColor(y),v.beginPath(),v.lineWidth=+"1",v.arc(m,q,this.littleCircleRadius(),0,2*Math.PI,!{}),x?v.fillStyle=y:v.fillStyle=k,v.strokeStyle=y,v.setLineDash([]),v.fill(),v.stroke(),v.closePath())},f.Drawing.prototype.rotator=function(v,m,q,x){var y=st,k,S,A;this.permanent||(k=this.littleCircleRadius(),S=this.stx.defaultColor,v.beginPath(),v.lineWidth=2,x||(v.globalAlpha=.5),y.o0m(0),A=y.b_h(k,4),v.arc(m,q,A,0,3*Math.PI/2,!1),y.o0m(14),v.moveTo(y.y99(2,A,m),y.b_h(2,q,y.o0m(0))),y.O44(0),v.lineTo(y.b_h(A,m),q),y.O44(16),v.lineTo(y.b_h(m,2,A),y.y99("2",1,q,y.O44(34))),y.O44(3),v.moveTo(y.b_h(2,m),y.b_h("2",q,A,y.O44(35))),y.o0m(3),v.lineTo(m,y.y99(A,q)),y.O44(3),v.lineTo(y.y99(2,m),y.y99(A,2,q,y.o0m(15))),v.strokeStyle=S,v.stroke(),v.closePath(),v.globalAlpha=1)},f.Drawing.prototype.mover=function(v,m,q,x){var y=st,k,S,A,_;if(!this.permanent){k=this.littleCircleRadius(),S=this.stx.defaultColor,A=5,y.o0m(36),_=y.b_h(k,"1",0),v.save(),v.lineWidth=2,v.strokeStyle=S,v.translate(m,q),x||(v.globalAlpha=.5);for(var T=0;T<+"4";T++)v.rotate(Math.PI/2),v.beginPath(),v.moveTo(0,_),y.O44(0),v.lineTo(0,y.b_h(A,_)),y.O44(4),v.moveTo(-y.y99("2",1),y.b_h(2,_,A,y.o0m(18))),y.O44(0),v.lineTo(0,y.b_h(A,_)),y.O44(18),v.lineTo(2,y.b_h(2,_,A)),v.closePath(),v.stroke();v.globalAlpha=1,v.restore()}},f.Drawing.prototype.resizer=function(v,m,q,x){var y=st,k,S,A,_;if(!this.permanent){k=this.littleCircleRadius(),S=this.stx.defaultColor,y.o0m(24);var T=y.y99(17,12);y.o0m(37);var P=y.b_h(11,75,5,18);A=T*Math.sqrt(P),y.O44(38),_=y.y99(k,"1"),v.save(),v.lineWidth=2,v.strokeStyle=S,v.translate(m,q),v.rotate(-(m*q)/Math.abs(m*q)*Math.PI/4),x||(v.globalAlpha=.5);for(var E="0"-0;E<2;E++)v.rotate(Math.PI),v.beginPath(),v.moveTo(0,_),y.O44(2),v.lineTo(y.y99("0",0),y.b_h(A,_,y.O44(0))),y.O44(39),v.moveTo(-2,y.b_h(A,_,"2")),y.o0m(0),v.lineTo(0,y.b_h(A,_)),y.O44(40),v.lineTo(2,y.y99(_,A,"2",1)),v.closePath(),v.stroke();y.a3S(),v.globalAlpha=+"1",v.restore()}},f.Drawing.prototype.pointIntersection=function(v,m,q,x){var y=st,k,S,A,_,T;if(k=this.stx,S=k.panels[this.panelName],!S)return![];if(this.field&&!x&&(m=this.pixelFromValue(S,v,m,k.getYAxisByField(S,this.field)),v=k.pixelFromTick(v,S.chart),x=!0),x){A=787652987,y.o0m(25),_=-y.y99("1378316873",32),T=2;for(var P=+"1";y.R9b(P.toString(),P.toString().length,1596)!==A;P++){if(v>=q.cx0&&v<=q.cx1&&m>=q.cy0&&m<=q.cy1)return!![];T+=2}if(y.U5N(T.toString(),T.toString().length,30358)!==_&&(v<=q.cx0||v>=q.cx1||m<q.cy0||m>q.cy1))return![]}else if(v>=q.x0&&v<=q.x1&&m>=Math.min(q.y0,q.y1)&&m<=Math.max(q.y0,q.y1))return!![];return!1},f.Drawing.prototype.setPoint=function(v,m,q,x){var y=st,k,S,A,_,T,P,E,z,U,N,C,D,F,M;k="nu",k+="mbe",k+="r";var{stx:I}=this,{maxTicks:L=100,dataSet:O=[]}=x||I.chart||{};S=-L,y.o0m(23);var B=y.b_h(47,16,3);A=O.length-B+L,_=null,T=null,typeof m==k?_=m:m.length>=8?T=m:_=Number(m),(q||q===0)&&(y.O44(0),this[y.b_h(v,"v")]=q),_!==null?(P="t",P+="z",P+="o",_=Math.max(_,S),_=Math.min(_,A),E=I.dateFromTick(_,x,!![]),y.o0m(0),this[y.b_h(v,P)]=E.getTimezoneOffset(),y.o0m(0),this[y.y99(v,"d")]=f.yyyymmddhhmmssmmm(E),y.o0m(0),this[y.b_h(v,"p")]=[_,q]):T!==null&&(z="f",z+="reef",z+="orm",U="t",U+="z",U+="o",N="t",N+="z",N+="o",C="t",C+="z",C+="o",D=f.strToDateTime(T),!this[C+v]&&this["tzo"+v]!==0&&(y.O44(0),this[y.y99(v,N)]=D.getTimezoneOffset()),y.O44(0),this[y.y99(v,"d")]=T,F=this[U+v]-D.getTimezoneOffset(),D.setMinutes(D.getMinutes()+F),M=![],this.name!=z&&!f.ChartEngine.isDailyInterval(I.layout.interval)&&!D.getHours()&&!D.getMinutes()&&!D.getSeconds()&&!D.getMilliseconds()&&(M=!!{}),y.o0m(0),this[y.b_h(v,"p")]=[I.tickFromDate(f.yyyymmddhhmmssmmm(D),x,null,M),q])},f.Drawing.prototype.getLineColor=function(v,m){var q,x,y,k,S,A,_,T,P,E;if(v||(v=this.color),q=this.stx,x=v,st.a3S(),!m&&this.highlighted)y="stx_highlig",y+="ht",y+="_ve",y+="ctor",x=q.getCanvasColor(y);else if(f.isTransparent(x))x=q.defaultColor;else if(x=="auto"&&(x=q.defaultColor,this.field)){for(k in q.layout.studies)if(S=q.layout.studies[k],A=S.outputs[S.outputMap[this.field]],A){x=A.color||A;break}for(k in q.chart.seriesRenderers){T=q.chart.seriesRenderers[k];for(var z=0;z<T.seriesParams.length;z++){if(P=T.seriesParams[z],E=P.field,!E&&!T.highLowBars&&(E=this.defaultPlotField||"Close"),P.symbol&&P.subField&&(E+="-->"+P.subField),this.field==E){x=P.color;break}P.field&&P.field==this.field.split("-->")[0]&&(_=P.color)}}_&&(x=_)}return x=="auto"&&(x=q.defaultColor),x},f.Drawing.prototype.valueFromPixel=function(v,m,q){var x,y,k;return st.V5R(),x=m.chart.untransformFunc,y=this.field,x&&m.chart.series[y]&&(m.chart.untransformFunc=(S,A,_,T)=>(st.V5R(),x(S,A,_,T,y))),k=this.stx.valueFromPixel(v,m,q),m.chart.untransformFunc=x,k},f.Drawing.prototype.pixelFromValue=function(v,m,q,x){var y,k,S;return y=v.chart.transformFunc,k=this.field,y&&v.chart.series[k]&&(v.chart.transformFunc=(A,_,T,P)=>(st.a3S(),y(A,_,T,P,k))),S=this.stx.pixelFromValueAdjusted(v,m,q,x),v.chart.transformFunc=y,st.V5R(),S},f.Drawing.prototype.boxToPixels=function(v,m,q,x){var y,k,S,A;return y=v.panels[m],k=y.chart.transformFunc,S=this.field,k&&y.chart.series[S]&&(y.chart.transformFunc=(_,T,P,E)=>(st.a3S(),k(_,T,P,E,S))),A=f.convertBoxToPixels(v,m,q,x),y.chart.transformFunc=k,A},f.Drawing.BaseTwoPoint=function(){this.p0=null,st.V5R(),this.p1=null,this.color=""},f.inheritsFrom(f.Drawing.BaseTwoPoint,f.Drawing),f.Drawing.BaseTwoPoint.prototype.configs=[],f.Drawing.BaseTwoPoint.prototype.lineIntersection=function(v,m,q,x,y,k,S){var A,_;return y||(y=this.p0),k||(k=this.p1),A=this.stx,y&&k?q.cx0===void 0?![]:(_={x0:y[0],x1:k["0"^0],y0:y[1],y1:k[1]},S||(_=this.boxToPixels(A,this.panelName,_,A.getYAxisByField(A.panels[this.panelName],this.field))),f.boxIntersects(q.cx0,q.cy0,q.cx1,q.cy1,_.x0,_.y0,_.x1,_.y1,x)):![]},f.Drawing.BaseTwoPoint.prototype.boxIntersection=function(v,m,q){var x,y;if(!this.p0||!this.p1)return!1;var{x0:k,x1:S,y0:A,y1:_,cy0:T,cy1:P}=q;if(k>Math.max(this.p0[0],this.p1[0])||S<Math.min(this.p0[0],this.p1[0]))return![];var{field:E,panelName:z,stx:U}=this;return st.a3S(),E&&(x=U.panels[z],y=U.getYAxisByField(x,E),A=this.valueFromPixel(T,x,y),_=this.valueFromPixel(P,x,y)),_>Math.max(this.p0[1],this.p1[+"1"])||A<Math.min(this.p0[1],this.p1[1])?![]:!0},f.Drawing.BaseTwoPoint.prototype.accidentalClick=function(v,m){var q=st,x,y,k,S,A,_,T,P,E,z;if(x=this.stx,y=x.panels[this.panelName],k=x.pixelFromTick(this.p0[0],y.chart),S=x.pixelFromTick(v,y.chart),A=x.getYAxisByField(y,this.field),_=this.pixelFromValue(y,this.p0["0"^0],this.p0[+"1"],A),T=this.pixelFromValue(y,v,m,A),q.O44(3),P=Math.abs(q.y99(k,S)),q.O44(3),E=Math.abs(q.y99(_,T)),q.o0m(41),z=Math.sqrt(q.y99(P,P,E,E)),z<10)return this.penDown=!1,x.undo(),!0},f.Drawing.BaseTwoPoint.prototype.click=function(v,m,q){var x,y;return this.copyConfig(),x=this.stx,st.a3S(),y=x.panels[this.panelName],this.penDown?this.accidentalClick(m,q)?!!{}:(this.setPoint(1,m,q,y.chart),this.penDown=!1,!0):(this.setPoint(0,m,q,y.chart),this.penDown=!!{},![])},f.Drawing.BaseTwoPoint.prototype.adjust=function(){var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),st.a3S(),st.o0m(30),this.setPoint(st.b_h("1",0),this.d1,this.v1,v.chart))},f.Drawing.BaseTwoPoint.prototype.move=function(v,m,q){!this.penDown||(this.copyConfig(),this.p1=[m,q],this.render(v))},f.Drawing.BaseTwoPoint.prototype.measure=function(){var v,m,q,x,y,k,S,A,_;v=952001836,m=245587343,q=2;for(var T=1;st.U5N(T.toString(),T.toString().length,30794)!==v;T++)x=this.stx,q+=2;st.R9b(q.toString(),q.toString().length,51308)!==m&&(x=this.stx),this.p0&&this.p1&&(y=".mStickyIn",y+="teri",y+="or",x.setMeasure(this.p0["1"<<64],this.p1[1],this.p0[0],this.p1[0],!![],this.name),k=x.controls.mSticky,S=k&&k.querySelector(y),S&&(A="<b",A+="r",A+=">",_=[],_.push(f.capitalize(this.name)),this.getYValue&&_.push(this.field||x.defaultPlotField||"Close"),_.push(S.innerHTML),S.innerHTML=_.join(A)))},f.Drawing.BaseTwoPoint.prototype.reposition=function(v,m,q,x){var y,k,S;!m||(y=this.stx.panels[this.panelName],k=m.tick-q,S=m.value-x,m.action=="move"?(this.setPoint(0,m.p0[0]-k,m.p0[1]-S,y.chart),st.o0m(25),this.setPoint(st.b_h("1",64),m.p1[0]-k,m.p1[1]-S,y.chart),this.render(v)):m.action=="drag"&&(this[m.point]=[q,x],this.setPoint(0,this.p0[0],this.p0[1],y.chart),this.setPoint(1,this.p1[0],this.p1[1],y.chart),this.render(v)))},f.Drawing.BaseTwoPoint.prototype.drawDropZone=function(v,m,q,x,y){var k=st,S,A,_,T,P,E,z;S=this.stx.panels[this.panelName],S&&(A=this.stx,_=S.left,T=S.width,(x||x===+"0")&&(_=A.pixelFromTick(x,S.chart)),(y||y===0)&&(T=A.pixelFromTick(y,S.chart)),P=A.getYAxisByField(S,this.field),E=this.pixelFromValue(S,x,m,P),z=this.pixelFromValue(S,y,q,P),k.a3S(),v.fillStyle="#008000",v.globalAlpha=.2,k.O44(3),v.fillRect(_,E,k.y99(_,T),k.y99(E,z)),v.globalAlpha=1)},f.Drawing.BaseTwoPoint.prototype.valueOnDrawingAxis=function(v,m){var q,{stx:x,panelName:y,field:k}=this;return q=x.panels[y],this.valueFromPixel(x.pixelFromValueAdjusted(q,v,m),q,x.getYAxisByField(q,k))},f.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=+"5",this.text="",this.ta=null,this.border=!!{},this.fontSize=0,this.font={},this.defaultWidth=25,this.whitespace=30,this.fontModifier=+"3"},f.inheritsFrom(f.Drawing.annotation,f.Drawing.BaseTwoPoint),f.Drawing.annotation.prototype.getFontString=function(){var v,m;st.a3S(),this.fontDef={style:null,weight:null,size:"12px",family:null},v=this.stx.canvasStyle("stx_annotation"),v&&(v.fontStyle&&(this.fontDef.style=v.fontStyle),v.fontWeight&&(this.fontDef.weight=v.fontWeight),v.fontSize&&(this.fontDef.size=v.fontSize),v.fontFamily&&(this.fontDef.family=v.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",m=!0;for(var q in this.fontDef)this.fontDef[q]&&(m?m=!1:this.fontString+=" ",this.fontString+=this.fontDef[q])},f.Drawing.annotation.prototype.configs=["color","font"],f.Drawing.annotation.prototype.measure=function(){},f.Drawing.annotation.prototype.render=function(v){var m=st,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I;if(!this.ta&&(q=this.stx,x=q.panels[this.panelName],y=q.getYAxisByField(x,this.field),!(!x||this.field&&!y))){if(k=q.pixelFromTick(this.p0[0],x.chart),S=this.pixelFromValue(x,this.p0[0],this.p0[1],y),v.font=this.fontString,v.textBaseline="middle",A=k,_=S,T=this.w,P=this.h,E=this.getLineColor(),this.stem&&(this.stem.d?(z=q.pixelFromTick(this.stem.t),N=this.pixelFromValue(x,this.stem.t,this.stem.v,y),m.o0m(42),U=m.y99(T,A,"2"),m.O44(43),C=m.b_h(_,P,2)):this.stem.x&&(z=A,N=_,A+=this.stem.x,_+=this.stem.y,m.o0m(42),U=m.y99(T,A,"2"),m.O44(43),C=m.b_h(_,P,2)),v.beginPath(),this.borderColor?v.strokeStyle=this.borderColor:v.strokeStyle=E,v.moveTo(z,N),v.lineTo(U,C),v.stroke()),m.V5R(),D=v.lineWidth,this.highlighted)q.canvasColor("stx_annotation_highlight_bg",v),m.o0m(3),v.fillRect(m.y99(D,A),m.b_h(_,P,D,2,m.O44(44)),m.y99(2,D,T,m.o0m(34)),m.b_h(2,D,P,m.o0m(34)));else if(this.fillColor)v.fillStyle=this.fillColor,m.o0m(45),v.fillRect(A,m.y99(P,2,_),T,P);else if(this.stem){v.fillStyle=q.containerColor,F=-2021191904,M=133215775,I=+"2";for(var L=1;m.U5N(L.toString(),L.toString().length,74145)!==F;L++)m.o0m(46),v.fillRect(A,m.y99(3,_,P),T,P),I+=2;m.U5N(I.toString(),I.toString().length,30498)!==M&&(m.o0m(45),v.fillRect(A,m.b_h(P,2,_),T,P))}this.borderColor&&(v.beginPath(),v.strokeStyle=this.highlighted?q.getCanvasColor("stx_highlight_vector"):this.borderColor,m.O44(3),v.rect(m.y99(D,A),m.b_h("2",D,_,0,P,m.O44(47)),m.y99(2,D,T,m.o0m(34)),m.b_h(D,P,"2",m.O44(48))),v.stroke()),this.highlighted?q.canvasColor("stx_annotation_highlight",v):v.fillStyle=E,m.O44(23);var O=m.b_h(158,20,8);if(_+=this.padding/O,!this.ta)for(var B=0;B<this.arr.length;B++){v.fillText(this.arr[B],A+this.padding,_-P/2+this.fontSize/2),m.o0m(49);var R=m.b_h(5,17,3,12);_+=this.fontSize+R}v.textBaseline="alphabetic"}},f.Drawing.annotation.prototype.onChange=function(v){st.a3S()},f.Drawing.annotation.prototype.edit=function(v,m){var q=st,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B;if(x="p",x+="x",y="p",y+="x",k=this.stx.panels[this.panelName],!k||(S=this.stx.controls.annotationSave,A=this.stx.controls.annotationCancel,!S||!A))return;_=this.stx,T=this.ta,_.editingAnnotation=!!{},_.undisplayCrosshairs(),_.openDialog="annotation";function R(j){return function(Q){q.V5R(),j.manageTouchAndMouse&&f.ChartEngine.drawingLine&&j.mouseup(Q)}}function H(j){return function(Q){var et,V;et="v",et+="ect",et+="or",j.ta.value!==""&&(j.text=j.ta.value,V=j.stx,q.a3S(),V.editingAnnotation=!{},j.adjust(),V.drawingSnapshot?V.undoStamp(f.shallowClone(V.drawingSnapshot),V.exportDrawings()):(f.ChartEngine.completeDrawing(V),V.addDrawing(j)),V.undo(),V.cancelTouchSingleClick=!!{},V.changeOccurred(et))}}T||(P="pla",P+="cehol",P+="d",P+="er",E="wr",E+="ap",z="stx_ann",z+="otatio",z+="n",T=this.ta=document.createElement("TEXTAREA"),T.className=z,T.onkeyup=X(this),T.onmouseup=R(_),T.setAttribute(E,"hard"),f.isIOS7or8&&T.setAttribute(P,"Enter Text"),_.chart.container.appendChild(T),T.style.position="absolute",T.style.paddingLeft=this.padding+"px",T.value=this.text,f.touchDevice&&(T.ontouchstart=function(j){q.V5R(),j.stopPropagation()})),U=this;function W(j){return q.V5R(),function(Q){var et;et=j.stx,et.editingAnnotation=!1,et.undo(),et.cancelTouchSingleClick=!0}}T.oninput=function(j){var Q;Q="hi",Q+="stor",Q+="yRedo",j.inputType!="historyUndo"&&j.inputType!=Q&&U.onChange(j)},T.style.font=this.fontString,this.color&&(this.color=="transparent"||this.color=="auto"?(N=getComputedStyle(T),N&&f.isTransparent(N.backgroundColor)?T.style.color=this.getLineColor():(C="#",C+="0",C+="0",C+="0",T.style.color=C)):T.style.color=this.color),D=_.pixelFromTick(this.p0[+"0"],k.chart),F=this.pixelFromValue(k,this.p0[0],this.p0[+"1"],_.getYAxisByField(k,this.field)),T.style.left=D+140<_.chart.canvasRight?D+y:_.chart.canvasRight-+"200"+"px",T.style.top=F+60<_.chart.canvasHeight?F-(isNaN(this.h)?this.defaultHeight:this.h/2)+x:F-+"60"+"px",this.repositionTextArea&&this.repositionTextArea(T);function X(j){return function(Q){var et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt;if(et="non",et+="e",Q)switch(V=Q.keyCode,V){case 27:j.stx.undo();return}K=j.stx,tt=j.ta,J=tt.value.split(`
`),at=0,K.chart.context.font=j.fontString;for(var ut=0;ut<J.length;ut++)ct=K.chart.context.measureText(J[ut]).width,ct>at&&(at=ct);q.O44(50);var mt=q.y99(59,808,15,13);if(G=(J.length+("1">>mt))*(j.fontSize+j.fontModifier),at=Math.max(at,j.defaultWidth*2),tt.style.width=at+j.whitespace+"px",q.O44(0),tt.style.height=q.y99("px",G),Y=parseInt(f.stripPX(tt.style.top),10),it=f.stripPX(tt.style.left),at=tt.clientWidth,G=tt.clientHeight,tt.focus(),j.border===![]&&(tt.style.border=et),it+at+100<j.stx.chart.canvasWidth){rt="in",rt+="line-block",lt="inli",lt+="ne-bloc",lt+="k",dt="p",dt+="x",ht="p",ht+="x",q.O44(0),S.style.top=q.b_h("px",Y),q.o0m(0),A.style.top=q.b_h(ht,Y),q.O44(51),S.style.left=q.b_h(dt,at,it,"10"),S.style.display=lt,q.o0m(24);var gt=q.y99(9,4);A.style.left=it+at+S.clientWidth+gt+"px",A.style.display=rt}else if(Y+G+30<j.stx.chart.canvasHeight){q.o0m(1),S.style.top=q.y99("px",Y,10,G),q.O44(1),A.style.top=q.y99("px",Y,10,G),q.O44(0),S.style.left=q.b_h("px",it),S.style.display="inline-block",q.O44(23);var bt=q.b_h(14,1,19);A.style.left=it+S.clientWidth-bt+"px",A.style.display="inline-block"}else{pt="inl",pt+="ine-bloc",pt+="k",q.O44(52),S.style.top=q.b_h(Y,0,"px","35"),q.O44(16),A.style.top=q.y99(Y,35,"px"),q.o0m(0),S.style.left=q.b_h("px",it),S.style.display=pt,q.O44(23);var yt=q.y99(46,3,17);A.style.left=it+S.clientWidth-yt+"px",A.style.display="inline-block"}}}if(f.safeClickTouch(S,H(this)),f.safeClickTouch(A,W(this)),X(this)(),m&&(_.drawingSnapshot=_.exportDrawings(),this.hidden=!0,_.draw(),_.activeDrawing=this,f.ChartEngine.drawingLine=!![],v=_.chart.tempCanvas.context,_.chart.tempCanvas.style.display="block",this.w=T.clientWidth,this.h=T.clientHeight,f.clearCanvas(v.canvas,_),this.render(v),this.highlighted=![],this.edit(v)),f.isAndroid&&!f.is_chrome&&!f.isFF){this.priorBottom=_.container.style.bottom,M=400,q.O44(3);var Z=q.b_h(2,102);I=_.resolveY(F)+Z,L=_.container.ownerDocument.defaultView,I>f.pageHeight(L)-M&&(O=f.pageHeight(L)-I,q.O44(3),B=q.y99(O,M),q.O44(0),_.chart.container.style.bottom=q.y99("px",B))}},f.Drawing.annotation.prototype.click=function(v,m,q){var x;if(!(this.stx.overXAxis||this.stx.overYAxis))return x=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(+"0",m,q,x.chart),this.adjust(),this.edit(v),!1},f.Drawing.annotation.prototype.reposition=function(v,m,q,x){var y,k,S;st.a3S(),m&&(y=this.stx.panels[this.panelName],k=m.tick-q,S=m.value-x,this.setPoint(0,m.p0[0]-k,m.p0[1]-S,y.chart),this.render(v))},f.Drawing.annotation.prototype.intersected=function(v,m,q){var x=st,y,k,S,A,_,T,P,E,z;if(y=this.stx,k=y.panels[this.panelName],!this.p0)return null;S=y.pixelFromTick(this.p0[+"0"],k.chart),A=y.getYAxisByField(k,this.field),x.O44(3);var U=x.b_h(5,6);x.o0m(16);var N=x.y99(0,13,15);return _=this.pixelFromValue(k,this.p0[0],this.p0[U],A)-this.h/N,T=S+this.w,P=_+this.h,this.stem&&this.stem.x&&(S+=this.stem.x,T+=this.stem.x,_+=this.stem.y,P+=this.stem.y),E=y.pixelFromTick(v,k.chart),x.a3S(),z=y.pixelFromValueAdjusted(k,v,m),E+q.r>=S&&E-q.r<=T&&z+q.r>=_&&z-q.r<=P?(this.highlighted=!0,{p0:f.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,m)}):!{}},f.Drawing.annotation.prototype.abort=function(){var v,m,q,x;v="n",v+="o",v+="n",v+="e",m=this.stx,q=m.controls.annotationSave,x=m.controls.annotationCancel,q&&(q.style.display="none"),x&&(x.style.display=v),this.ta&&m.chart.container.removeChild(this.ta),this.ta=null,m.openDialog="",m.showCrosshairs(),m.editingAnnotation=![],f.clearCanvas(m.chart.tempCanvas,m),f.isAndroid&&!f.is_chrome&&!f.isFF&&(m.chart.container.style.bottom=this.priorBottom),f.fixScreen()},f.Drawing.annotation.prototype.reconstruct=function(v,m){var q;q="siz",q+="e",this.stx=v,this.color=m.col,this.panelName=m.pnl,this.d0=m.d0,this.tzo0=m.tzo0,this.v0=m.v0,this.field=m.fld,this.text=v.escapeOnSerialize?decodeURIComponent(m.text):m.text,this.stem=m.stem,this.borderColor=m.bc,this.fillColor=m.bg,this.lineWidth=m.lw,this.pattern=m.ptrn,this.font=f.replaceFields(m.fnt,{st:"style",sz:q,wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},f.Drawing.annotation.prototype.serialize=function(){var v,m,q;return v={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,fld:this.field,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},st.a3S(),this.font&&(m="s",m+="z",q=f.removeNullValues(f.replaceFields(this.font,{style:"st",size:m,weight:"wt",family:"fl"})),f.isEmpty(q)||(v.fnt=q)),this.stem&&(v.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(v.bc=this.borderColor),this.fillColor&&(v.bg=this.fillColor),this.lineWidth&&(v.lw=this.lineWidth),this.pattern&&(v.ptrn=this.pattern),v},f.Drawing.annotation.prototype.renderText=function(){var v=st,m,q,x,y,k,S,A,_;if(this.getFontString(),m=this.stx,q=m.panels[this.panelName],!!q){this.arr=this.text.split(`
`),v.a3S(),x=0,m.chart.context.font=this.fontString;for(var T=0;T<this.arr.length;T++)y=m.chart.context.measureText(this.arr[T]).width,y>x&&(x=y);x===+"0"&&(x=("2"<<0)*this.defaultWidth),this.fontSize=f.stripPX(this.fontDef.size),v.o0m(3);var P=v.y99(4,5);k=(this.arr.length+P)*(this.fontSize+this.fontModifier),f.touchDevice&&(k+=5),this.w=x+this.whitespace+this.padding,this.h=k,S=m.pixelFromTick(this.p0[+"0"],q.chart)+x,A=m.getYAxisByField(q,this.field),v.O44(0);var E=v.y99(1,0);_=this.pixelFromValue(q,this.p0[0],this.p0[E],A)+k,this.p1=[m.tickFromPixel(S,q.chart),this.valueFromPixel(_,q,A)],this.stem&&this.stem.d&&(this.stem.t=m.tickFromDate(this.stem.d,q.chart))}},f.Drawing.annotation.prototype.adjust=function(){st.V5R();var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(+"0",this.d0,this.v0,v.chart),this.renderText())},f.Drawing.segment=function(){this.name="segment"},f.inheritsFrom(f.Drawing.segment,f.Drawing.BaseTwoPoint),f.Drawing.segment.prototype.render=function(v){var m=st,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O;if(q="no",q+="n",q+="e",x=this.stx,y=x.panels[this.panelName],k=x.getYAxisByField(y,this.field),!(!y||this.field&&!k)){if(k=k||y.yAxis,S=x.pixelFromTick(this.p0[0],y.chart),A=x.pixelFromTick(this.p1[0],y.chart),_=this.pixelFromValue(y,this.p0[+"0"],this.p0[1],k),T=this.pixelFromValue(y,this.p1[0],this.p1[1],k),P=this.lineWidth,E=this.getLineColor(),z={pattern:this.pattern,lineWidth:P},z.pattern==q&&(z.pattern="solid"),x.plotLine(S,A,_,T,E,this.name,v,y,z),this.axisLabel&&!this.repositioner){if(U="ve",U+="rti",U+="ca",U+="l",this.name=="horizontal")x.endClip(),N=this.p0[1],y.chart.transformFunc&&(N=y.chart.transformFunc(x,y.chart,N)),k.priceFormatter?N=k.priceFormatter(x,y,N):N=x.formatYAxisPrice(N,y,null,k),x.createYAxisLabel(y,N,_,E,null,null,k),x.startClip(y.name);else if(this.name==U&&this.p0[+"0"]>=0&&!x.chart.xAxis.noDraw){if(C=x.dateFromTick(this.p0[0],y.chart,!0),f.ChartEngine.isDailyInterval(x.layout.interval))m.o0m(3),C.setHours(m.y99(0,"0"),0,0,0);else{m.o0m(23);var B=m.b_h(103e3,13e3,8);F=C.getSeconds()*B+C.getMilliseconds(),w.Date&&x.displayZone&&(D=new w.Date(C.getTime(),x.displayZone),C=new Date(D.getFullYear(),D.getMonth(),D.getDate(),D.getHours(),D.getMinutes()),C=new Date(C.getTime()+F))}M=f.mmddhhmm(f.yyyymmddhhmm(C)),y.chart.xAxis.formatter?M=y.chart.xAxis.formatter(C,this.name,null,null,M):this.stx.internationalizer&&(M=f.displayableDate(x,x.chart,C)),x.endClip(),x.createXAxisLabel({panel:y,txt:M,x:S,backgroundColor:E,color:null,pointed:!0,padding:2}),x.startClip(y.name)}}this.highlighted&&this.name!="horizontal"&&this.name!="vertical"&&(I="p",I+="0",L=this.highlighted==I?!![]:![],O=this.highlighted=="p1"?!!{}:!1,this.littleCircle(v,S,_,L),this.littleCircle(v,A,T,O))}},f.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!{})},f.Drawing.segment.prototype.intersected=function(v,m,q){var x,y,k,S,A;if(x="l",x+="i",x+="n",x+="e",!this.p0||!this.p1)return null;if(y=this.name,y!="horizontal"&&y!="vertical"&&y!="gartley"){k={0:this.p0,1:this.p1};for(var _ in k)if(this.pointIntersection(k[_][0],k[_][1],q))return st.o0m(0),this.highlighted=st.b_h(_,"p"),{action:"drag",point:"p"+_}}return(y=="horizontal"||y=="vertical")&&(y=x),S=this.lineIntersection(v,m,q,y),S?(A="m",A+="o",A+="v",A+="e",this.highlighted=!0,{action:A,p0:f.clone(this.p0),p1:f.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,m)}):null},f.Drawing.segment.prototype.configs=[e,"lineWidth","pattern"],f.Drawing.segment.prototype.copyConfig=function(v){var m;m="f",m+="illColor",f.Drawing.copyConfig(this,v),this.pattern=="none"&&this.configs.indexOf(m)==-1&&(this.pattern="solid")},f.Drawing.segment.prototype.reconstruct=function(v,m){this.stx=v,this.color=m.col,this.panelName=m.pnl,this.pattern=m.ptrn,this.lineWidth=m.lw,this.d0=m.d0,this.d1=m.d1,this.tzo0=m.tzo0,st.a3S(),this.tzo1=m.tzo1,this.v0=m.v0,this.v1=m.v1,this.field=m.fld,this.adjust()},f.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},f.Drawing.line=function(){st.V5R(),this.name="line"},f.inheritsFrom(f.Drawing.line,f.Drawing.segment),f.Drawing.line.prototype.dragToDraw=!{},f.Drawing.line.prototype.click=function(v,m,q){var x;if(st.V5R(),x=this.stx.panels[this.panelName],!!x)return this.copyConfig(),this.penDown?(this.accidentalClick(m,q)||(st.O44(4),this.setPoint(st.b_h("1",1),m,q,x.chart),this.penDown=!{}),!0):(this.setPoint(0,m,q,x.chart),this.penDown=!0,![])},f.Drawing.line.prototype.reconstruct=function(v,m){this.stx=v,this.color=m.col,this.panelName=m.pnl,this.pattern=m.ptrn,this.lineWidth=m.lw,this.v0=m.v0,this.v1=m.v1,this.d0=m.d0,st.V5R(),this.d1=m.d1,this.tzo0=m.tzo0,this.tzo1=m.tzo1,this.field=m.fld,this.adjust()},f.Drawing.line.prototype.serialize=function(){return st.V5R(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},f.Drawing.line.prototype.adjust=function(){st.a3S();var v;v=this.stx.panels[this.panelName],v&&(this.setPoint(0,this.d0,this.v0,v.chart),this.setPoint(1,this.d1,this.v1,v.chart),f.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,v.chart),this.setPoint(1,this.d1B,this.v1B,v.chart)))},f.Drawing.horizontal=function(){this.name="horizontal"},f.inheritsFrom(f.Drawing.horizontal,f.Drawing.segment),f.Drawing.horizontal.prototype.dragToDraw=![],f.Drawing.horizontal.prototype.measure=function(){},f.Drawing.horizontal.prototype.click=function(v,m,q){var x;if(x=this.stx.panels[this.panelName],!!x)return this.copyConfig(),this.setPoint(0,m,q,x.chart),!0},f.Drawing.horizontal.prototype.intersected=function(v,m,q){var x,y,k,S;return this.lineIntersection(v,m,q,"line")?(x="m",x+="o",x+="v",x+="e",y=this.stx,k=y.chart.dataSet.length,S=this.p0[+"1"],this.highlighted=!![],{action:x,p0:[k-2,S],p1:[k-1,S],tick:v,value:this.valueOnDrawingAxis(v,m)}):null},f.Drawing.horizontal.prototype.reconstruct=function(v,m){this.stx=v,this.color=m.col,this.panelName=m.pnl,this.pattern=m.ptrn,this.lineWidth=m.lw,this.v0=m.v0,this.d0=m.d0,this.tzo0=m.tzo0,this.axisLabel=m.al,this.field=m.fld,this.adjust()},f.Drawing.horizontal.prototype.serialize=function(){var v;return v={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel,fld:this.field},v},f.Drawing.horizontal.prototype.adjust=function(){var v;if(v=this.stx.panels[this.panelName],!!v){this.setPoint(0,this.d0,this.v0,v.chart),st.o0m(53),st.V5R();var m=st.y99(4,107,4,13,6);this.p1=[this.p0[0]+m,this.p0[1]]}},f.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern",n],f.Drawing.vertical=function(){this.name="vertical"},f.inheritsFrom(f.Drawing.vertical,f.Drawing.horizontal),f.Drawing.vertical.prototype.measure=function(){},f.Drawing.vertical.prototype.intersected=f.Drawing.segment.prototype.intersected,f.Drawing.vertical.prototype.adjust=function(){var v=st,m;if(m=this.stx.panels[this.panelName],!!m){this.setPoint(0,this.d0,this.v0,m.chart),v.O44(54);var q=v.y99(5,4,10,69);v.o0m(3);var x=v.y99(4,5);this.p1=[this.p0[0],this.p0[q]+x]}},f.Drawing.measure=function(){var v;v="m",v+="eas",v+="ur",v+="e",this.name=v},f.inheritsFrom(f.Drawing.measure,f.Drawing.segment),f.Drawing.measure.prototype.click=function(v,m,q){return this.copyConfig(),this.penDown?(st.V5R(),this.stx.undo(),this.penDown=!1,!!{}):(this.p0=[m,q],this.penDown=!![],![])},f.Drawing.rectangle=function(){var v=st,m,q,x;m=1965925884,q=-1290129475,x=2;for(var y="1">>32;v.U5N(y.toString(),y.toString().length,67836)!==m;y++)this.name="rectangle",v.o0m(31),x+=v.b_h("2",0);v.R9b(x.toString(),x.toString().length,+"1902")!==q&&(this.name="")},f.inheritsFrom(f.Drawing.rectangle,f.Drawing.BaseTwoPoint),f.Drawing.rectangle.prototype.render=function(v){var m=st,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L;q="segm",q+="ent",x="se",x+="gment",y=this.stx,k=y.panels[this.panelName],S=y.getYAxisByField(k,this.field),!(!k||this.field&&!S)&&(A=y.pixelFromTick(this.p0[0],k.chart),_=y.pixelFromTick(this.p1[0],k.chart),T=this.pixelFromValue(k,this.p0[0],this.p0[1],S),P=this.pixelFromValue(k,this.p1[0],this.p1[1],S),E=Math.round(Math.min(A,_))+.5,z=Math.min(T,P),U=Math.max(A,_)-E,N=Math.max(T,P)-z,C=this.getLineColor(),D=this.fillColor,D&&!f.isTransparent(D)&&D!="auto"&&(v.beginPath(),v.rect(E,z,U,N),v.fillStyle=D,v.globalAlpha=.2,v.fill(),v.closePath(),v.globalAlpha=1),F={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&F.pattern=="none"&&(F.pattern="solid",F.lineWidth==.1&&(F.lineWidth=1)),m.V5R(),y.plotLine(A,_,T,T,C,"segment",v,k,F),m.o0m(55),y.plotLine(_,_,m.y99("0.5",T,1),m.b_h(P,"0.5",m.o0m(38)),C,x,v,k,F),y.plotLine(_,A,P,P,C,"segment",v,k,F),m.O44(0),y.plotLine(A,A,m.y99(.5,P),m.b_h(.5,T,m.o0m(3)),C,q,v,k,F),this.highlighted&&(M="p",M+="1",I=this.highlighted=="p0"?!![]:!1,L=this.highlighted==M?!!{}:!1,this.littleCircle(v,A,T,I),this.littleCircle(v,_,P,L)))},f.Drawing.rectangle.prototype.intersected=function(v,m,q){var x,y;if(!this.p0||!this.p1)return null;x={0:this.p0,1:this.p1};for(var k in x)if(this.pointIntersection(x[k]["0"^0],x[k][1],q))return st.O44(0),this.highlighted=st.b_h(k,"p"),{action:"drag",point:"p"+k};return this.boxIntersection(v,m,q)?(y="m",y+="ov",y+="e",this.highlighted=!0,{action:y,p0:f.clone(this.p0),p1:f.clone(this.p1),tick:v,value:this.valueOnDrawingAxis(v,m)}):null},f.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],f.Drawing.rectangle.prototype.reconstruct=function(v,m){this.stx=v,this.color=m.col,this.fillColor=m.fc,this.panelName=m.pnl,this.pattern=m.ptrn,this.lineWidth=m.lw,this.d0=m.d0,this.d1=m.d1,this.tzo0=m.tzo0,this.tzo1=m.tzo1,this.v0=m.v0,this.v1=m.v1,this.field=m.fld,this.adjust()},f.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},f.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=![],this.configurator="shape",st.O44(30),this.dimension=[st.y99("0",0),0],this.points=[]},f.inheritsFrom(f.Drawing.shape,f.Drawing.BaseTwoPoint),f.Drawing.shape.prototype.setRotationOnInitialDraw=![],f.Drawing.shape.prototype.measure=function(){},f.Drawing.shape.prototype.render=function(v){var m=st,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j;if(!!this.points.length&&(q=this.stx,x=q.panels[this.panelName],y=q.getYAxisByField(x,this.field),!(!x||this.field&&!y))){if(k=q.pixelFromTick(this.p0[0],x.chart),S=this.pixelFromValue(x,this.p0[0],this.p0["1"-0],y),this.p1){if(A=q.pixelFromTick(this.p1[0],x.chart),_=this.pixelFromValue(x,this.p1[0],this.p1[1],y),v.globalAlpha=.5,v.fillStyle=this.getLineColor(),this.rotating){if(m.O44(56),this.radians=Math.atan(m.y99(_,A,k,S)),A<k)this.radians+=Math.PI;else if(_<S){m.O44(3);var Q=m.y99(28,30);this.radians+=Q*Math.PI}m.o0m(57);var et=m.y99(15,13,7471,576);m.o0m(58);var V=m.y99(0,9,16,12);this.a=parseInt((this.radians*("36"*1)/Math.PI).toFixed(0),"10"<<et)*V,this.a%=360,m.o0m(5);var K=m.b_h(7,155,175);this.radians=this.a*Math.PI/K,this.textMeasure&&v.fillText(this.a+"\xB0",A+10,_+10)}else this.penDown&&(this.sx=Math.max(1,parseFloat(Math.abs(2*(A-k)/this.dimension[0]).toFixed(1))),A<k&&(this.sx*=-1),this.sy=Math.max(+"1",parseFloat(Math.abs(2*(_-S)/this.dimension[1]).toFixed(1))),_<S&&(this.sy*=-1),this.textMeasure&&v.fillText(this.sx+"x,"+this.sy+"x",A+this.sx+5,_+this.sy+5));m.O44(3),v.globalAlpha=m.b_h(0,"1")}m.V5R(),typeof this.sx=="undefined"&&(this.sx=this.sy=1),T=this.lineWidth,T||(T=1.1),P={pattern:this.pattern,lineWidth:T},this.highlighted&&P.pattern=="none"&&(P.pattern="solid",P.lineWidth==.1&&(P.lineWidth=+"1")),E=this.getLineColor(),this.highlighted&&T==+"0.1"&&(T=1.1),z=this.fillColor,m.O44(18);var tt=m.y99(36,18,20);for(T/=Math.abs(this.sx*this.sy)*tt/(Math.abs(this.sx)+Math.abs(this.sy)),v.save(),v.translate(k,S),v.rotate(this.radians),v.scale(this.sx,(y||x.yAxis).flipped?-this.sy:this.sy),C={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-("1"^0))/("2"-0)},U=+"0";U<this.points.length;U++){for(D="n",D+="o",D+="ne",v.beginPath(),N=0;N<this.points[U].length;N++)R=this.points,R[U][N]=="M"?(F=R[U][++N]-C.x,M=R[U][++N]-C.y,v.moveTo(F,M)):R[U][N]=="L"?(F=R[U][++N]-C.x,M=R[U][++N]-C.y,v.lineTo(F,M)):R[U][N]=="Q"?(I=R[U][++N]-C.x,O=R[U][++N]-C.y,F=R[U][++N]-C.x,M=R[U][++N]-C.y,v.quadraticCurveTo(I,O,F,M)):R[U][N]=="B"&&(I=R[U][++N]-C.x,O=R[U][++N]-C.y,L=R[U][++N]-C.x,B=R[U][++N]-C.y,F=R[U][++N]-C.x,M=R[U][++N]-C.y,v.bezierCurveTo(I,O,L,B,F,M));v.closePath(),z&&!f.isTransparent(z)&&z!="auto"&&(v.fillStyle=z,v.fill()),E&&this.pattern!=D&&(v.strokeStyle=E,v.lineWidth=T,v.setLineDash&&(v.setLineDash(f.borderPatternToArray(T,this.pattern)),v.lineDashOffset=0),v.stroke())}v.restore(),v.save(),v.translate(k,S),v.rotate(this.radians),this.highlighted?(H="p",H+="2",W="p",W+="0",X=this.highlighted==W?!0:![],Z=this.highlighted=="p1"?!![]:!{},j=this.highlighted==H?!![]:!{},this.littleCircle(v,0,0,X),m.o0m(2),this.mover(v,0,m.b_h("0",0),X),this.littleCircle(v,this.sx*this.dimension[0]/2,this.sy*this.dimension["1"-0]/2,Z),this.resizer(v,this.sx*this.dimension[0]/+"2",this.sy*this.dimension[1]/+"2",Z),this.littleCircle(v,this.sx*this.dimension[0]/2,0,j),this.rotator(v,this.sx*this.dimension["0"|0]/2,0,j),v.globalAlpha=.5,v.fillStyle=this.getLineColor(null,![]),this.textMeasure&&(v.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),v.fillText(this.a+"\xB0",this.sx*this.dimension[0]/2+("12"<<0),5)),v.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(v,this.sx*this.dimension[0]/+"2",0,!0):this.resizer(v,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!![])),v.restore()}},f.Drawing.shape.prototype.reposition=function(v,m,q,x){var y=st,k,S,A,_,T,P,E,z,U,N,C;if(!!m){if(k=this.stx,S=k.panels[this.panelName],y.a3S(),m.action=="move")A=m.tick-q,_=m.value-x,this.setPoint(0,m.p0[0]-A,m.p0[+"1"]-_,S.chart),this.render(v);else if(T="rot",T+="a",T+="t",T+="e",P="s",P+="c",P+="ale",E=k.getYAxisByField(S,this.field),z=k.pixelFromTick(this.p0[0],S.chart),U=this.pixelFromValue(S,this.p0[+"0"],this.p0[1],E),N=k.pixelFromTick(q,S.chart),C=this.pixelFromValue(S,q,x,E),m.action==P)this[m.point]=[q,x],this.sx=parseFloat((((N-z)*Math.cos(this.radians)+(C-U)*Math.sin(this.radians))/(this.dimension[+"0"]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((C-U)*Math.cos(this.radians)-(N-z)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(+"1")),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(v);else if(m.action==T){this[m.point]=[q,x],y.O44(56),this.radians=Math.atan(y.y99(C,N,z,U)),N<z?this.radians+=Math.PI:C<U&&(this.radians+=+"2"*Math.PI),y.O44(37);var D=y.b_h(4,73,11,19);y.o0m(59);var F=y.y99(16,19,2,13,14);if(this.a=parseInt((this.radians*36/Math.PI).toFixed(0),D)*F,this.sx<0){y.o0m(23);var M=y.y99(3420,900,4);this.a=this.a+M}this.a%=360,y.O44(0);var I=y.b_h(90,90);this.radians=this.a*Math.PI/I,this.render(v)}}},f.Drawing.shape.prototype.intersected=function(v,m,q){var x=st,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X;if(y=this.stx,!this.p0)return null;if(y.repositioningDrawing==this&&y.repositioningDrawing.repositioner)return y.repositioningDrawing.repositioner;k=y.panels[this.panelName],S=y.getYAxisByField(k,this.field),A=y.pixelFromTick(this.p0[0],k.chart),_=this.pixelFromValue(k,this.p0[0],this.p0[1],S),T=y.pixelFromTick(v,k.chart),P=y.pixelFromValueAdjusted(k,v,m),T-=A,P-=_,E=P,z=T,T=Math.cos(this.radians)*z+Math.sin(this.radians)*E,P=Math.cos(this.radians)*E-Math.sin(this.radians)*z,T/=this.sx,P/=this.sy,this.padding=f.ensureDefaults(this.padding||{},{left:0,right:+"0",top:0,bottom:0}),U=this.padding.right+this.padding.left,N=this.padding.bottom+this.padding.top,C=Math.pow(f.touchDevice?25:5+this.littleCircleRadius(),2),D=Math.abs(C/(this.sx*this.sy)),F=+"3",x.o0m(18);var Z=x.b_h(24,15,11);x.o0m(3);var j=x.b_h(4,6);x.o0m(3);var Q=x.y99(9,10);x.O44(18);var et=x.b_h(16,11,7);x.O44(22);var V=x.y99(7,9,1);x.O44(23);var K=x.b_h(178,9,20);x.O44(3);var tt=x.b_h(4,5);x.O44(15);var J=x.b_h(1,14,17);x.o0m(23);var at=x.y99(30,8,4);M=Math.pow((this.dimension[0]-U+F)/Z,j)+Math.pow((this.dimension[Q]-N+F)/et,V)>Math.pow(T-U/K,"2"*tt)+Math.pow(P-N/J,at),x.O44(37);var ct=x.y99(2,55,19,15);x.O44(3);var G=x.b_h(18,20);I=(C-(Math.pow(T*this.sx,ct)+Math.pow(P*this.sy,G)))/Math.abs(this.sx*this.sy),x.o0m(60);var Y=x.y99(12,14,14,10);x.o0m(58);var it=x.y99(0,11,13,4);x.O44(23);var rt=x.y99(41,6,7);x.O44(61);var lt=x.b_h(3,14,17,1,3);x.o0m(62);var dt=x.b_h(16,8,18,6,18);L=D-Math.pow(T-this.dimension["0"-0]/Y,it)-Math.pow(P-this.dimension[rt]/lt,dt),x.O44(63);var ht=x.b_h(13,1,13,1,1);x.o0m(50);var pt=x.b_h(36,567,16,7);x.o0m(0);var ut=x.b_h(2,0);return O=D-Math.pow(T-this.dimension[0]/ht,pt)-Math.pow(P,ut),M?(B="mov",B+="e",R="p",R+="0",L>=O&&L>=I&&L>-1?(H="p",H+="1",this.highlighted=H,{action:"scale"}):O>=L&&O>=I&&O>-+"1"?(W="r",W+="ota",W+="te",X="p",X+="2",this.highlighted=X,{action:W}):(this.highlighted=I>-1?R:!0,{action:B,p0:f.clone(this.p0),tick:v,value:this.valueOnDrawingAxis(v,m)})):null},f.Drawing.shape.prototype.configs=[i,"fillColor","lineWidth",t],f.Drawing.shape.prototype.littleCircleRadius=function(){return st.O44(3),st.y99(0,"3")},f.Drawing.shape.prototype.click=function(v,m,q){st.V5R();var x;return this.points.length?(this.copyConfig(),x=this.stx.panels[this.panelName],this.penDown?(this.setPoint(1,m,q,x.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=![],this.rotating=![],!0):(this.rotating=!0,!1)):(this.setPoint(0,m,q,x.chart),this.penDown=!!{},!1)):!{}},f.Drawing.shape.prototype.adjust=function(){var v,m,q;if(v=this.stx.panels[this.panelName],!!v){m=this.name+"_v"+(this.version||0),f.Drawing[m]&&(q=new f.Drawing[m],this.name=q.name,this.dimension=q.dimension,this.padding=q.padding,this.points=q.points,this.version=q.version),this.setPoint(0,this.d0,this.v0,v.chart),st.O44(64);var x=st.y99(1,3,2,4,12);this.radians=Math.round(this.a/x)*Math.PI/("36">>0)}},f.Drawing.shape.prototype.reconstruct=function(v,m){this.stx=v,this.color=m.col,this.fillColor=m.fc,this.panelName=m.pnl,this.pattern=m.ptrn,this.lineWidth=m.lw,this.d0=m.d0,this.v0=m.v0,this.tzo0=m.tzo0,this.a=m.a,this.sx=m.sx,this.sy=m.sy,this.field=m.fld,this.version=m.ver,st.V5R(),this.adjust()},f.Drawing.shape.prototype.serialize=function(){return st.a3S(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,fld:this.field,ver:this.version}},f.Drawing.arrow=function(){this.name="arrow",this.version=1,this.dimension=[11,+"22"],this.padding={left:0,right:0,top:11,bottom:0},st.a3S(),st.o0m(4),this.points=[["M",3,21,"L",7,st.b_h("21",1),"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},f.inheritsFrom(f.Drawing.arrow,f.Drawing.shape),f.Drawing.getDrawingToolList=function(v){var m,q;m={},st.a3S(),q={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!!{},shape:!0},f.extend(q,v);for(var x in f.Drawing)!q[x]&&f.Drawing[x].prototype.render&&(m[new f.Drawing[x]().name]=x);return m}};Tl=b=>{var t=st,i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.EaseMachine=function(n,e,a,o){typeof n=="string"?this.fc=i.EaseMachine[n]:this.fc=n,t.V5R(),this.ms=e,(a||a===0)&&this.reset(a,o)},i.EaseMachine.prototype.reset=function(n,e){!n&&n!==0&&(n=this.currentValues),this.hasCompleted=!{},this.running=!{},this.okayToRun=!0,t.o0m(65),t.a3S(),this.useNameValuePairs=t.y99("object",typeof e),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=n,this.endValues=e):(this.startValues={default:n},this.endValues={default:e}),this.changeValues={},this.currentValues={};for(var a in this.startValues)this.changeValues[a]=this.endValues[a]-this.startValues[a]},i.EaseMachine.prototype.next=function(){var n;n=Date.now(),n>=this.startTime+this.ms&&(n=this.startTime+this.ms,this.hasCompleted=!![],this.running=![]),this.currentValues={};for(var e in this.changeValues)this.currentValues[e]=this.fc(n-this.startTime,this.startValues[e],this.changeValues[e],this.ms);return t.a3S(),this.useNameValuePairs?this.currentValues:this.currentValues.default},i.EaseMachine.prototype.hasCompleted=!![],i.EaseMachine.prototype.run=function(n,e,a,o){var r;this.afid&&cancelAnimationFrame(this.afid),e||e===0?this.reset(e,a):(a||a===+"0")&&this.reset(this.currentValues,a),t.a3S();function c(){t.V5R();var l;r.afid=null,r.okayToRun&&(l=r.next(),n(l),!r.hasCompleted&&(r.afid=requestAnimationFrame(c)))}r=this,this.running=!![],o?this.afid=requestAnimationFrame(c):c()},t.V5R(),i.EaseMachine.prototype.stop=function(){var n,e;return n="d",n+="efau",n+="lt",e="u",e+="ndefined",this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,typeof this.useNameValuePairs==e?{}:this.useNameValuePairs?this.currentValues:this.currentValues[n]},i.EaseMachine.easeInOutQuad=function(n,e,a,o){return t.o0m(19),n/=t.b_h(o,"2"),n<1?(t.o0m(66),t.y99(e,2,n,a,n)):(t.V5R(),n--,t.O44(67),t.y99(n,1,a,2,2,n,e))},i.EaseMachine.easeInOutCubic=function(n,e,a,o){return t.o0m(9),n/=t.y99(2,o),n<1?(t.o0m(68),t.b_h(e,a,"2",n,n,n)):(n-=2,t.a3S(),t.O44(69),t.y99(a,n,"2",n,2,n,e))},i.EaseMachine.easeOutCubic=function(n,e,a,o){return n/=o,n--,t.O44(70),t.y99(e,n,a,n,n,1)},i.ChartEngine.prototype.animations.zoom.isStub&&(i.ChartEngine.prototype.animations.zoom=new i.EaseMachine("easeOutCubic",400))};_l=b=>{var t=st,i,n;t.V5R(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,n=function(){var e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;function y(G){return t.a3S(),Math.trunc?Math.trunc(G):G<0?Math.ceil(G):Math.floor(G)}function k(G,Y,it){return G?Y:it}function S(G){return Math.acosh?Math.acosh(G):Math.log(G+Math.sqrt(G*G-1))}function A(G,Y){return Object.prototype.toString.call(G)!="[object Array]"?[G,Y]:(t.a3S(),G=G.slice(),G.push(Y),G)}e="\\";function _(G,Y,it,rt){this.tokens=G,this.ops1=Y,this.ops2=it,this.functions=rt}function T(G){return Math.asinh?Math.asinh(G):G===-1/0?G:Math.log(G+Math.sqrt(G*G+1))}function P(G,Y){return t.O44(71),t.y99(Y,G)}function E(G,Y){return t.O44(65),t.b_h(Y,G)}function z(G,Y){return t.a3S(),t.o0m(4),t.y99(G,Y)}function U(G,Y,it,rt){this.type_=G,t.a3S(),this.index_=Y||0,this.prio_=it||0,this.number_=rt!=null?rt:0,this.toString=function(){var lt,dt,ht,pt,ut;t.a3S(),lt=1194897839,dt=-841435078,t.o0m(25),ht=t.y99("2",64);for(var mt=+"1";t.R9b(mt.toString(),mt.toString().length,38011)!==lt;mt++){switch(this.type_){case o:return this.number_;case r:case c:case l:return this.index_;case s:return"CALL";default:return"Invalid Token"}ht+=2}if(t.R9b(ht.toString(),ht.toString().length,56127)!==dt)switch(this.type_){case o:return this.number_;case r:case c:case l:return this.index_;case s:return pt="C",pt+="ALL",pt;default:return ut="Invali",ut+="d Token",ut}}}e+="'",a="\\";function N(G){return Math.cosh?Math.cosh(G):(Math.exp(G)+Math.exp(-G))/2}function C(G){var Y;return Y="s",t.a3S(),Y+="tring",typeof G===Y?(d.lastIndex=0,d.test(G)?"'"+G.replace(d,function(it){var rt;return rt=h[it],typeof rt=="string"?rt:"\\u"+("0000"+it.charCodeAt("0"<<64).toString(16)).slice(-4)})+"'":"'"+G+"'"):G}function D(G){t.V5R();var Y;for(G=Math.floor(G),Y=G;G>1;)t.o0m(72),Y=t.y99(Y,--G);return Y}a+="r";function F(G,Y){return t.O44(9),t.a3S(),t.b_h(Y,G)}function M(G){return t.V5R(),Math.atanh?Math.atanh(G):Math.log((1+G)/(1-G))/2}function I(G,Y){return t.o0m(14),t.a3S(),t.y99(G,Y,"")}function L(){this.success=![],this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:J,cosh:N,tanh:K,asinh:T,acosh:S,atanh:M,sqrt:Math.sqrt,log:Math.log,lg:ct,log10:ct,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:y,"-":et,exp:Math.exp},this.ops2={"+":Z,"-":Q,"*":z,"/":F,"%":X,"^":Math.pow,",":A,"||":I,"==":E,"!=":B,">":R,"<":H,">=":W,"<=":P,and:at,or:tt},this.functions={random:j,fac:D,min:Math.min,max:Math.max,hypot:V,pyt:V,pow:Math.pow,atan2:Math.atan2,if:k},this.consts={E:Math.E,PI:Math.PI}}o=0,r=1;function O(G){Y.prototype=G;function Y(){}return t.a3S(),new Y}c=2,t.a3S(),l=3,s=+"4";function B(G,Y){return t.O44(73),t.y99(G,Y)}d=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":a,"'":e,"\\":"\\\\"};function R(G,Y){return t.o0m(74),t.V5R(),t.b_h(Y,G)}function H(G,Y){return t.O44(75),t.y99(G,Y)}function W(G,Y){return t.o0m(76),t.b_h(Y,G)}function X(G,Y){return t.O44(77),t.a3S(),t.y99(G,Y)}function Z(G,Y){return t.a3S(),Number(G)+Number(Y)}i.extend(_.prototype,{simplify:function(G){var Y,it,rt,lt,dt,ht,pt,ut,mt;for(G=G||{},Y=[],it=[],ht=this.tokens.length,ut=0,ut=0;ut<ht;ut++)if(pt=this.tokens[ut],mt=pt.type_,mt===o)Y.push(pt);else if(mt===l&&pt.index_ in G)pt=new U(o,0,0,G[pt.index_]),Y.push(pt);else if(mt===c&&Y.length>+"1")lt=Y.pop(),rt=Y.pop(),dt=this.ops2[pt.index_],t.O44(25),pt=new U(o,t.b_h("0",64),0,dt(rt.number_,lt.number_)),Y.push(pt);else if(mt===r&&Y.length>0)rt=Y.pop(),dt=this.ops1[pt.index_],pt=new U(o,0,0,dt(rt.number_)),Y.push(pt);else{for(;Y.length>0;)it.push(Y.shift());it.push(pt)}for(;Y.length>0;)it.push(Y.shift());return new _(it,O(this.ops1),O(this.ops2),O(this.functions))},substitute:function(G,Y){var it,rt,lt,dt,ht,pt,ut,mt;for(Y instanceof _||(Y=new L().parse(String(Y))),it=[],rt=this.tokens.length,dt=0,dt=0;dt<rt;dt++)if(lt=this.tokens[dt],ht=lt.type_,ht===l&&lt.index_===G)for(var gt=0;gt<Y.tokens.length;gt++)pt=Y.tokens[gt],ut=new U(pt.type_,pt.index_,pt.prio_,pt.number_),it.push(ut);else it.push(lt);return mt=new _(it,O(this.ops1),O(this.ops2),O(this.functions)),mt},evaluate:function(G){var Y,it,rt,lt,dt,ht,pt,ut,mt;for(G=G||{},Y=[],dt=this.tokens.length,pt=0,pt="0"<<32;pt<dt;pt++)if(ht=this.tokens[pt],ut=ht.type_,ut===o)Y.push(ht.number_);else if(ut===c)rt=Y.pop(),it=Y.pop(),lt=this.ops2[ht.index_],Y.push(lt(it,rt));else if(ut===l)if(ht.index_ in G)Y.push(G[ht.index_]);else if(ht.index_ in this.functions)Y.push(this.functions[ht.index_]);else throw new Error("undefined variable: "+ht.index_);else if(ut===r)it=Y.pop(),lt=this.ops1[ht.index_],Y.push(lt(it));else if(ut===s)if(it=Y.pop(),lt=Y.pop(),lt.apply&&lt.call)mt="[obje",mt+="ct Array]",Object.prototype.toString.call(it)==mt?Y.push(lt.apply(void 0,it)):Y.push(lt.call(void 0,it));else throw t.O44(0),new Error(t.y99(" is not a function",lt));else throw new Error("invalid Expression");if(t.a3S(),Y.length>+"1")throw new Error("invalid Expression (parity)");return Y[0]},toString:function(G){var Y,it,rt,lt,dt,ht,pt,ut;for(Y=[],dt=this.tokens.length,pt=0,pt="0"<<32;pt<dt;pt++)if(ht=this.tokens[pt],ut=ht.type_,ut===o)Y.push(C(ht.number_));else if(ut===c)rt=Y.pop(),it=Y.pop(),lt=ht.index_,G&&lt=="^"?(t.O44(78),Y.push(t.b_h(it,rt,"Math.pow(",",",")"))):(t.O44(78),Y.push(t.b_h(it,rt,"(",lt,")")));else if(ut===l)Y.push(ht.index_);else if(ut===r)it=Y.pop(),lt=ht.index_,lt==="-"?(t.o0m(1),Y.push(t.b_h(")","(",it,lt))):(t.O44(1),Y.push(t.y99(")",lt,it,"(")));else if(ut===s)it=Y.pop(),lt=Y.pop(),t.o0m(1),Y.push(t.y99(")",lt,it,"("));else throw new Error("invalid Expression");if(Y.length>1)throw new Error("invalid Expression (parity)");return Y[0]},variables:function(){var G,Y,it;t.a3S(),G=this.tokens.length,Y=[];for(var rt=0;rt<G;rt++)it=this.tokens[rt],it.type_===l&&Y.indexOf(it.index_)==-1&&Y.push(it.index_);return Y}},!![]),L.parse=function(G){return new L().parse(G)},L.evaluate=function(G,Y){return t.V5R(),L.parse(G).evaluate(Y)};function j(G){t.a3S(),t.O44(3);var Y=t.y99(11,12);return Math.random()*(G||Y)}L.Expression=_,L.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:J,cosh:N,tanh:K,asinh:T,acosh:S,atanh:M,sqrt:Math.sqrt,log:Math.log,lg:ct,log10:ct,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:y,random:j,fac:D,exp:Math.exp,min:Math.min,max:Math.max,hypot:V,pyt:V,pow:Math.pow,atan2:Math.atan2,if:k,E:Math.E,PI:Math.PI},t.o0m(79),p=t.b_h(0,"1");function Q(G,Y){return t.o0m(3),t.b_h(Y,G)}t.O44(80),u=t.b_h("1","1");function et(G){return t.V5R(),-G}t.O44(81),g=t.y99(0,1,"2"),t.O44(25),f=t.b_h(1,3);function V(){var G,Y;if(Math.hypot)return Math.hypot.apply(this,arguments);t.a3S(),G=0,Y=arguments.length;for(var it=+"0";it<Y;it++){if(arguments[it]===1/0||arguments[it]===-1/0)return 1/0;G+=arguments[it]*arguments[it]}return Math.sqrt(G)}t.O44(82),w=t.y99("1",4,0),t.O44(25),v=t.b_h(1,5),t.o0m(25),m=t.y99(1,6);function K(G){return Math.tanh?Math.tanh(G):G===1/0?+"1":G===-1/0?-1:(Math.exp(G)-Math.exp(-G))/(Math.exp(G)+Math.exp(-G))}function tt(G,Y){return t.a3S(),Boolean(G||Y)}function J(G){return Math.sinh?Math.sinh(G):(Math.exp(G)-Math.exp(-G))/2}function at(G,Y){return Boolean(G&&Y)}t.o0m(83),q=t.y99("7",1,1);function ct(G){return t.a3S(),Math.log(G)*Math.LOG10E}return t.O44(84),x=t.y99(0,"8",1),i.extend(L.prototype,{parse:function(G){var Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt;for(this.errormsg="",this.success=!0,Y=[],it=[],this.tmpprio=0,t.o0m(85),rt=t.b_h(p,g,f,m),lt=0,this.expression=G,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&rt&m?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",lt++,this.addfunc(it,Y,r)),t.o0m(85),rt=t.y99(p,g,f,m)):this.isComment()||((rt&u)===0&&(ht="unex",ht+="pect",ht+="ed operator",this.error_parsing(this.pos,ht)),lt+=2,this.addfunc(it,Y,c),t.O44(85),rt=t.b_h(p,g,f,m)):this.isNumber()?((rt&p)===("0"|0)&&this.error_parsing(this.pos,"unexpected number"),dt=new U(o,0,0,this.tokennumber),it.push(dt),t.o0m(86),rt=t.y99(w,v,u)):this.isString()?((rt&p)===0&&this.error_parsing(this.pos,"unexpected string"),dt=new U(o,0,0,this.tokennumber),it.push(dt),t.O44(86),rt=t.b_h(w,v,u)):this.isLeftParenth()?((rt&f)===0&&this.error_parsing(this.pos,'unexpected "("'),rt&q&&(lt+=2,this.tokenprio=-2,t.o0m(4),this.tokenindex=-t.y99("1",1),this.addfunc(it,Y,s)),t.O44(87),rt=t.b_h(p,f,m,g,x)):this.isRightParenth()?(rt&x?(dt=new U(o,0,0,[]),it.push(dt)):(rt&w)===0&&this.error_parsing(this.pos,'unexpected ")"'),t.O44(87),rt=t.b_h(u,w,f,v,q)):this.isComma()?((rt&v)===0&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(it,Y,c),lt+=2,t.O44(85),rt=t.b_h(p,g,f,m)):this.isConst()?((rt&p)===0&&this.error_parsing(this.pos,"unexpected constant"),pt=new U(o,0,0,this.tokennumber),it.push(pt),t.O44(86),rt=t.y99(w,v,u)):this.isOp2()?((rt&g)===0&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(it,Y,c),lt+=2,rt=f):this.isOp1()?((rt&g)===0&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(it,Y,r),lt++,rt=f):this.isVar()?((rt&p)===0&&this.error_parsing(this.pos,"unexpected variable"),ut=new U(l,this.tokenindex,0,0),it.push(ut),t.o0m(87),rt=t.b_h(u,w,f,v,q)):this.isWhite()||(this.errormsg===""?(mt="unk",mt+="nown char",mt+="ac",mt+="ter",this.error_parsing(this.pos,mt)):this.error_parsing(this.pos,this.errormsg));if(this.tmpprio<+"0"||this.tmpprio>=10){gt=-1522740791,bt=547838057,yt=+"2";for(var St=1;t.R9b(St.toString(),St.toString().length,21851)!==gt;St++)this.error_parsing(this.pos,'unmatched "()"'),yt+=2;t.R9b(yt.toString(),yt.toString().length,73022)!==bt&&this.error_parsing(this.pos,"")}for(;Y.length>0;)qt=Y.pop(),it.push(qt);return lt+1!==it.length&&this.error_parsing(this.pos,"parity"),new _(it,O(this.ops1),O(this.ops2),O(this.functions))},evaluate:function(G,Y){return t.a3S(),this.parse(G).evaluate(Y)},error_parsing:function(G,Y){var it;throw it="]:",it+=" ",this.success=!{},t.O44(1),this.errormsg=t.b_h(Y,"parse error [column ",it,G),this.column=G,new Error(this.errormsg)},addfunc:function(G,Y,it){var rt;for(rt=new U(it,this.tokenindex,this.tokenprio+this.tmpprio,0);Y.length>+"0"&&rt.prio_<=Y[Y.length-1].prio_;)G.push(Y.pop());Y.push(rt)},isNumber:function(){var G,Y,it;for(G=!1,Y="";this.pos<this.expression.length&&(it=this.expression.charCodeAt(this.pos),it>=48&&it<=("57"^0)||it===46);)Y+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(Y),G=!!{};return G},unescape:function(G,Y){var it,rt,lt,dt;it=[],t.a3S(),rt=!{};for(var ht=0;ht<G.length;ht++)if(lt=G.charAt(ht),rt){switch(lt){case"'":it.push("'");break;case"\\":it.push("\\");break;case"/":it.push("/");break;case"b":it.push("\b");break;case"f":it.push("\f");break;case"n":it.push(`
`);break;case"r":it.push("\r");break;case"t":it.push("	");break;case"u":dt=parseInt(G.substring(ht+1,ht+5),16),it.push(String.fromCharCode(dt)),ht+=4;break;default:throw t.O44(0),this.error_parsing(t.b_h(ht,Y),t.b_h(lt,"'","Illegal escape sequence: '\\",t.O44(14)))}rt=![]}else lt=="\\"?rt=!0:it.push(lt);return it.join("")},isString:function(){var G,Y,it,rt;if(G=!{},Y="",it=this.pos,this.pos<this.expression.length&&this.expression.charAt(this.pos)=="'")for(this.pos++;this.pos<this.expression.length;)if(rt=this.expression.charAt(this.pos),rt!="'"||Y.slice(-1)=="\\")Y+=this.expression.charAt(this.pos),this.pos++;else{this.pos++,this.tokennumber=this.unescape(Y,it),G=!!{};break}return G},isConst:function(){var G,Y;for(var it in this.consts)if(Y=it.length,G=this.expression.substr(this.pos,Y),it===G)return this.tokennumber=this.consts[it],this.pos+=Y,!0;return![]},isOperator:function(){var G,Y;if(G=this.expression.charCodeAt(this.pos),G===43)this.tokenprio=2,this.tokenindex="+";else if(G===45)this.tokenprio=2,this.tokenindex="-";else if(G===62)this.expression.charCodeAt(this.pos+1)===61?(this.pos++,this.tokenprio=+"1",this.tokenindex=">="):(t.o0m(3),this.tokenprio=t.b_h(0,"1"),this.tokenindex=">");else if(G==="60"*1)this.expression.charCodeAt(this.pos+1)==="61"*1?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=+"1",this.tokenindex="<");else if(G===124)if(this.expression.charCodeAt(this.pos+1)===124)Y="|",Y+="|",this.pos++,this.tokenprio=1,this.tokenindex=Y;else return!{};else if(G===61)if(this.expression.charCodeAt(this.pos+("1"|0))===61)this.pos++,this.tokenprio=1,this.tokenindex="==";else return!1;else if(G===33)if(this.expression.charCodeAt(this.pos+1)===61)this.pos++,this.tokenprio=1,this.tokenindex="!=";else return![];else if(G===+"97")if(this.expression.charCodeAt(this.pos+1)===110&&this.expression.charCodeAt(this.pos+2)===100)this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and";else return![];else if(G===111)if(this.expression.charCodeAt(this.pos+ +"1")===114)this.pos++,this.tokenprio=0,this.tokenindex="or";else return![];else if(G===42||G===8729||G===8226)this.tokenprio=3,this.tokenindex="*";else if(G===47)this.tokenprio=4,this.tokenindex="/";else if(G===37)this.tokenprio=4,this.tokenindex="%";else if(G===94)this.tokenprio=5,this.tokenindex="^";else return![];return this.pos++,!![]},isSign:function(){t.a3S();var G;return G=this.expression.charCodeAt(this.pos-1),G===45||G===43?!!{}:!{}},isPositiveSign:function(){t.a3S();var G,Y,it,rt,lt,dt,ht;G=-393253251,Y=-784807285,t.o0m(4),it=t.b_h("2",1);for(var pt=1;t.R9b(pt.toString(),pt.toString().length,86137)!==G;pt++)rt=this.expression.charCodeAt(this.pos-1),it+=2;if(t.U5N(it.toString(),it.toString().length,38350)!==Y&&(rt=this.expression.charCodeAt(this.pos/3)),rt===43){lt=-1506279389,dt=-1837594480,ht=2;for(var ut=1;t.U5N(ut.toString(),ut.toString().length,90166)!==lt;ut++)return!0;if(t.U5N(ht.toString(),ht.toString().length,+"4412")!==dt)return!{}}return!{}},isNegativeSign:function(){var G;return G=this.expression.charCodeAt(this.pos-1),G===45},isLeftParenth:function(){var G;return G=this.expression.charCodeAt(this.pos),G===+"40"?(this.pos++,this.tmpprio+=10,!0):(t.V5R(),!1)},isRightParenth:function(){var G;return G=this.expression.charCodeAt(this.pos),t.a3S(),G===41?(this.pos++,this.tmpprio-=10,!!{}):!1},isComma:function(){var G;return G=this.expression.charCodeAt(this.pos),G===44?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!![]):!{}},isWhite:function(){var G;return G=this.expression.charCodeAt(this.pos),G===32||G===9||G===10||G==="13"<<0?(this.pos++,!0):!1},isOp1:function(){var G,Y;G="";for(var it=this.pos;it<this.expression.length&&(Y=this.expression.charAt(it),!(Y.toUpperCase()===Y.toLowerCase()&&(it===this.pos||Y!="_"&&(Y<"0"||Y>"9"))));it++)G+=Y;return G.length>0&&G in this.ops1?(this.tokenindex=G,this.tokenprio=5,this.pos+=G.length,!0):(t.V5R(),!{})},isOp2:function(){var G,Y;G="";for(var it=this.pos;it<this.expression.length&&(Y=this.expression.charAt(it),!(Y.toUpperCase()===Y.toLowerCase()&&(it===this.pos||Y!="_"&&(Y<"0"||Y>"9"))));it++)G+=Y;return G.length>0&&G in this.ops2?(this.tokenindex=G,this.tokenprio=5,this.pos+=G.length,!0):!1},isVar:function(){var G,Y;G="";for(var it=this.pos;it<this.expression.length&&(Y=this.expression.charAt(it),!(Y.toUpperCase()===Y.toLowerCase()&&(it===this.pos||Y!="_"&&(Y<"0"||Y>"9"))));it++)G+=Y;return G.length>0?(this.tokenindex=G,t.O44(3),this.tokenprio=t.b_h(0,"4"),this.pos+=G.length,!0):!{}},isComment:function(){var G;if(G=this.expression.charCodeAt(this.pos-1),G==="47">>64&&this.expression.charCodeAt(this.pos)===42){t.O44(3);var Y=t.b_h(36,38);return this.pos=this.expression.indexOf("*/",this.pos)+Y,this.pos===1&&(this.pos=this.expression.length),!![]}return!{}}},!0),L},i.computeEquationChart=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;e=e.replace(/[:]/,"/"),o=0;function P(C){if(C.i++,a[C.s]){if(C.i>=a[C.s].length)return 0;u=a[C.s][C.i]}return u.DT||(u.DT=i.strToDateTime(u.Date)),C.d=u.DT,t.o0m(30),t.a3S(),t.y99("1",0)}for(var E in a)r="\\",r+="$",c="\\",c+="[",l=new RegExp(c+E.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,r).replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),t.O44(0),e=e.replace(l,t.b_h(o,"symbol")),o++;s=n().parse(e),d=[],h={},p=0,g=null,f=!1,w=[];function z(){var C,D;C=null,D=null;for(var F in h)D?h[F].d.getTime()<D.d.getTime()?C=D=h[F]:h[F].d.getTime()>D.d.getTime()&&(C=D):D=h[F];return C?P(C)?-1:0:1}for(E in a)v={sym:E,map:a[E]},a[E]?w.unshift(v):w.push(v);for(var U=0;U<w.length;U++)m=w[U],h[m.sym]={i:0,s:m.sym},m.map?(p++,u=m.map[0]):p==1&&(f=m.sym),u.DT||(u.DT=i.strToDateTime(u.Date)),h[m.sym].d=u.DT,g||(g=h[m.sym]);t.O44(88),q=t.b_h(0,p),x=p=="1"*1&&e.indexOf("%")==-1;t:for(;y=z(),!!y;)if(y==1){if(f)S=a[g.s][g.i][f],S&&(S.Close||S.Close===0)&&(S=S.Close),A=s.evaluate({symbol0:a[g.s][g.i].Close,symbol1:S}),A=Number(A.toFixed(8)),k={DT:g.d,Close:A,Adj_Close:A},k[g.s]=a[g.s][g.i].Close,!isNaN(A)&&A!=1/0&&d.push(k);else{if(q)throw _=s.evaluate({}),t.O44(14),i.alert(t.y99("=",_,e)),{name:"NoException",message:""};o=0,T={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}};for(E in a){for(var N in T)t.O44(0),T[N][t.y99(o,"symbol")]=a[E][h[E].i][N];o++}k={DT:g.d},k.Adj_Close=s.evaluate(T.Adj_Close),k.Close=s.evaluate(T.Close),k.Open=s.evaluate(T.Open),k.Volume=s.evaluate(T.Volume),isNaN(k.Volume)&&(k.Volume=0),x?(k.High=s.evaluate(T.High),k.Low=s.evaluate(T.Low)):(k.High=Math.max(k.Open,k.Close),k.Low=Math.min(k.Open,k.Close)),!isNaN(k.Close)&&k.Close!=1/0&&d.push(k),isNaN(k.High)||(k.High=Number(k.High.toFixed(8))),isNaN(k.Low)||(k.Low=Number(k.Low.toFixed(8))),isNaN(k.Open)||(k.Open=Number(k.Open.toFixed(+"8"))),isNaN(k.Close)||(k.Close=Number(k.Close.toFixed(8))),isNaN(k.Adj_Close)?k.Adj_Close=k.Close:k.Adj_Close=Number(k.Adj_Close.toFixed(8))}for(E in a)if(!P(h[E]))break t}return d}};Fl=b=>{var t=st,i,n,e;i="E",i+="ngli",i+="s",i+="h",n="unde",n+="fined",t.V5R(),e=typeof _CIQ!==n?_CIQ:b.CIQ,e.ChartEngine.prototype.setLocale=function(a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(r="nu",r+="meri",r+="c",c="num",c+="e",c+="ri",c+="c",l="num",l+="eric",s="nume",s+="r",s+="ic",d="n",t.a3S(),d+="umeri",d+="c",h="n",h+="umer",h+="ic",p="h",p+="2",p+="3",typeof Intl!="undefined"){if(this.locale!=a){u=862908831,g=11975030,f=2;for(var y="1"-0;t.U5N(y.toString(),y.toString().length,11463)!==u;y++)this.locale=a,f+=2;t.R9b(f.toString(),f.toString().length,+"42893")!==g&&(this.locale=a)}else return;for(v=this.internationalizer={},v.hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:p}),v.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:h,minute:d,second:s,hourCycle:"h23"}),v.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),v.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),v.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:l,month:c,day:r}),v.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),v.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),v.numbers=new Intl.NumberFormat(this.locale),v.priceFormatters=[],o||(o=8),w=0;w<o+1;w++)v.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:w,minimumFractionDigits:w}));for(w=+"0";w<5;w++)m="p",m+="er",m+="cent",q=w,x=w,w||(q="",t.O44(31),x=t.y99("2",0)),t.o0m(0),v[t.y99(q,"percent")]=new Intl.NumberFormat(this.locale,{style:m,minimumFractionDigits:x,maximumFractionDigits:x});e.I18N.createMonthArrays&&e.I18N.createMonthArrays(this,v.month,this.locale)}},e.ChartEngine.prototype.translateUI=function(a){e.I18N.localized&&e.I18N.translateUI(this.preferences.language,a)},e.I18N=function(){},e.I18N.hereDoc=function(a){return a.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},e.I18N.language="en",e.I18N.longMonths={zh:!0},e.I18N.reverseColorsByLocale={zh:!0,ja:!0},e.I18N.findAllTextNodes=function(a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;if(a||(a=document.body),a==document.body&&!document.querySelector(".ciq_stashed_texts")){o="in",o+="put,textarea,.editable_content",r="n",r+="on",r+="e",c=document.createElement("div"),c.className="ciq_stashed_texts",c.style.display=r,a.appendChild(c),l=document.querySelectorAll(o);for(var A=0;A<l.length;A++)s=l[A].getAttribute("placeholder"),s&&(d=c.appendChild(document.createElement("translate")),d.setAttribute("original",s),d.placeholderFor=l[A],d.appendChild(document.createTextNode(s)))}for(h=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!{}),p=h.nextNode(),t.V5R(),u=new RegExp("^\\s*$"),g=new RegExp(`
|	|\f`,"g"),f={},w={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};p;)v=p.nodeValue,u.test(v)||(m=p.parentNode,q=p.nextSibling,x=m.tagName,w[x]||(x!="TRANSLATE"?(y=document.createElement("translate"),y.setAttribute("original",v),y.appendChild(p),m.insertBefore(y,q)):v=m.getAttribute("original"),g.test(v)&&(v=v.replace(g,"")),f[v]||(f[v]=[]),f[v].push(p))),p=h.nextNode();if(a==document.body&&(k=e.Studies?e.Studies.studyLibrary:null,k))for(var _ in k){if(f[_]===null&&(f[_]=[]),S=k[_],S.inputs)for(var T in S.inputs)f[T]||(f[T]=[]);if(S.outputs)for(var P in S.outputs)f[P]||(f[P]=[])}return f},e.I18N.missingWordList=function(a){var o,r,c,l,s,d,h;a||(a=e.I18N.language),o=e.I18N.findAllTextNodes(),r={},c=e.I18N.wordLists[a],c||(c={}),l=function(v){var m;m="undefine",m+="d",typeof c[v]==m&&(r[v]="")};for(var p in o)l(p);if(!(e.Studies&&e.Studies.studyLibrary))return r;for(var u in e.Studies.studyLibrary){s=e.Studies.studyLibrary[u],l(s.name);for(var g in s.inputs)switch(h="[obj",h+="e",h+="ct",h+=" String]",l(g),d=s.inputs[g],Object.prototype.toString.call(d)){case h:l(d);break;case"[object Array]":for(var f=0;f<d.length;++f)l(d[f]);break}for(var w in s.outputs)l(w)}return l("Show Zones"),l("OverBought"),l("OverSold"),l("Panel"),l("Show as Underlay"),l("Y-Axis"),l("Invert Y-Axis"),r},e.I18N.printableMissingWordList=function(a){var o,r;return o='"',o+=",",o+=`
`,o+='"',r=JSON.stringify(e.I18N.missingWordList(a)),r=r.replace(/","/g,o),r},e.I18N.translateUI=function(a,o){var r,c,l,s,d,h,p,u;if(a=="pu"&&(a="pt"),!!e.I18N.wordLists&&(a||(a=e.I18N.language),r=e.I18N.findAllTextNodes(o),c=e.I18N.wordLists[a],!!c))for(var g in r){l=e.I18N.translateSections(g,c),s=r[g];for(var f=0;f<s.length;f++)d=s[f],h=d.parentNode,p=h.getAttribute("original"),(l===","||!l)&&(l=p),u=h.placeholderFor,u?u.placeholder=l:d.data=l}},e.I18N.translate=function(a,o){var r,c;return o||(o=e.I18N.language),e.I18N.wordLists?(r=e.I18N.wordLists[o],t.V5R(),c=null,r&&(c=e.I18N.translateSections(a,r)||a),c===","?a:c):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),a)},e.I18N.translateSections=function(a,o){var r,c,l;return t.a3S(),r="\u200C",typeof a=="string"&&a.indexOf(r)!=-1?(c="$",c+="1",t.o0m(14),a=a.replace(/([(),])/g,t.b_h(c,r,r)),l=a.split(r),l.forEach(function(s,d,h){var p,u;if(p=s.match(/^(\s*).*\S(\s*)$/),u=o[s.trim()],u){if(p){t.O44(89);var g=t.b_h(10,1,20,1);u=p[g]+u+p[+"2"]}h[d]=u}}),l.join("")):o[a]},e.I18N.convertCSV=function(a){var o,r,c,l,s,d,h,p,u,g,f;if(o="^",t.a3S(),o+='("',o+=')|(")$',r=new RegExp("[\u201C\u201D]|[\u2018\u2019]","g"),c=new RegExp(o,"g"),l=e.I18N.wordLists,a||(a=e.I18N.csv),!!a){s=a.split(`
`),d=s[0],h=d.split(",");for(var w=+"0";w<h.length;w++)p=h[w],l[p]||(l[p]={});for(var v=+"1";v<s.length;v++){u=s[v].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[],g=u[0],c.test(g)&&(g=g.replace(c,"")),r.test(g)&&(g=g.replace(r,'"'));for(var m=1;m<u.length;m++)f=u[m],c.test(f)&&(f=f.replace(c,"")),l[h[m]][g]=f}}},e.I18N.setLanguage=function(a,o,r,c,l){l||(l=(a.uiContext||{}).topNode||document.body),o=="pu"&&(o="pt"),e.I18N.convertCSV(c),e.I18N.language=o,e.I18N.translateUI(o,l),t.V5R(),r||(r=e.I18N.translate),a.translationCallback=r},e.I18N.setLocale=function(a,o,r,c,l){var s,d,h,p,u,g;if(s="S",s+="CR",s+="IPT",d=".j",d+="s",h="u",h+="ndefi",h+="n",h+="ed",e.xor(this.reverseColorsByLocale[o],this.reverseColorsByLocale[a.locale])&&this.reverseCandles(a),typeof Intl=="undefined"||!Intl.__addLocaleData){a.setLocale(o,l),r&&r(null);return}c=typeof c==h?"locale-data/jsonp":c,t.o0m(1),p=t.y99(d,c,o,"/"),u=document.createElement(s),u.async=!0,u.src=p,g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(u,g.nextSibling),u.onload=function(){t.a3S(),a.setLocale(o,l),r&&r(null)},u.onerror=function(){var f,w,v,m;f=1068852290,t.V5R(),w=-984636025,v=2;for(var q=1;t.R9b(q.toString(),q.toString().length,79105)!==f;q++)m="cannot load s",m+="cr",m+="ip",m+="t",r&&r(m),v+=+"2";t.R9b(v.toString(),v.toString().length,242)!==w&&r&&r("")}},e.I18N.createMonthArrays=function(a,o,r){var c,l,s,d,h,p;a.monthAbv=[],a.monthLetters=[],t.a3S(),c=new Date,l=!0,e.I18N.longMonths&&e.I18N.longMonths[r]&&(l=!1);for(var u=0;u<12;u++)if(c.setDate(1),c.setMonth(u),s=o.format(c),l){d="";for(var g=0;g<s.length;g++)h=s.charAt(g),p=h.charCodeAt(0),!(p<65)&&(d+=h);a.monthAbv[u]=d,a.monthLetters[u]=d[0]}else a.monthAbv[u]=s,a.monthLetters[u]=s},e.I18N.localize=function(a,o){o=this.langConversionMap[o]||o,this.setLocale(a,o),this.setLanguage(a,o),t.a3S(),e.I18N.localized=!0},e.I18N.reverseCandles=function(a){var o,r,c;o=a.styles,r=a.cloneStyle(o.stx_candle_down),c=a.cloneStyle(o.stx_candle_up),o.stx_candle_up=r,o.stx_candle_down=c},e.I18N.wordLists={en:{}},e.I18N.languages={en:i},e.I18N.langConversionMap={},e.I18N.localized=![]};Ml=b=>{var t=st,i,n,e,a,o,r,c;i="<",i+='div class="stx-ico-handle" style="display: none;"><span>',i+="</span></div>",i+=" ",n="<div ",n+='class="stx_chart_controls" style="display: none;"><div class="chartSize"><span',n+=' class="stx-',n+='zoom-out"></span><span class="stx-zoom-in"></span></div></div>',e='<div class="stx_crosshair stx_crosshair_y',e+='" style="di',e+="splay",e+=': none;"></div>',a='<div class="stx_drag_ok"><div class="icon"></div><div cl',a+='ass="field"></div></div>',o='<span class="s',o+="tx-bt",o+='n stx_annotation_save" style="display: none;"></span>',t.V5R(),r=typeof _CIQ!="undefined"?_CIQ:b.CIQ,r.ChartEngine.prototype.pointerEvents={down:[],up:[]},r.ChartEngine.prototype.manageTouchAndMouse=!0,r.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;l=".stx-zoo",l+="m-in",!this.touchAndMouseEventsRegistered&&(this.touchAndMouseEventsRegistered=!0,s=this.controls.chartControls||document,d=s.querySelector(l),h=s.querySelector(".stx-zoom-out"),p=this.chart.container,u=this,g=function(P,E,z){var U,N,C;U=274318573,N=-804532616,C=2;for(var D=1;t.R9b(D.toString(),D.toString().length,"17705"^0)!==U;D++)u.addDomEventListener(p,P,F,z),C+=2;t.R9b(C.toString(),C.toString().length,"71186"*1)!==N&&u.addDomEventListener(p,P,F,z);function F(M){u.mainSeriesRenderer&&u.mainSeriesRenderer.nonInteractive||E(M)}},r.touchDevice?r.isSurface?(w="poin",w+="ter",w+="up",v="pointer",v+="enter",m="poin",m+="termove",q="m",q+="ou",q+="seu",q+="p",x="mous",x+="edo",x+="wn",y="mo",y+="u",y+="semove",g(y,function(P){u.msMouseMoveProxy(P)}),g("mouseenter",function(P){u.msMouseMoveProxy(P)}),g(x,function(P){u.msMouseDownProxy(P)}),g(q,function(P){t.V5R(),u.msMouseUpProxy(P)}),g("pointerdown",function(P){return u.startProxy(P)}),g(m,function(P){t.a3S(),u.moveProxy(P)}),g(v,function(P){return t.V5R(),u.moveProxy(P)}),g(w,function(P){return t.V5R(),u.endProxy(P)})):(k="to",k+="uche",k+="nd",r.isMobile||(S="m",S+="ouse",S+="down",g("mousemove",function(P){t.a3S(),u.iosMouseMoveProxy(P)}),g("mouseenter",function(P){u.iosMouseMoveProxy(P)}),g(S,function(P){u.iosMouseDownProxy(P)}),g("mouseup",function(P){t.a3S(),u.iosMouseUpProxy(P)})),g("touchstart",function(P){u.touchstart(P)},{passive:![]}),g("touchmove",function(P){t.a3S(),u.touchmove(P)},{passive:![]}),g(k,function(P){t.V5R(),u.touchend(P)}),g("pointerdown",function(P){u.touchPointerType=P.pointerType}),d&&(d.removeAttribute("onMouseOver"),d.removeAttribute("onMouseOut")),h&&(A="onM",A+="ous",A+="eOut",_="on",_+="Mouse",_+="Ove",_+="r",h.removeAttribute(_),h.removeAttribute(A))):(f="m",f+="o",f+="use",f+="up",g("mousemove",function(P){u.mousemove(P)}),g("mouseenter",function(P){u.mousemove(P)}),g("mousedown",function(P){u.mousedown(P)}),g(f,function(P){u.mouseup(P)})),T=r.wheelEvent,this.captureMouseWheelEvents&&g(T,function(P){t.a3S(),u.mouseWheel(P)},{passive:![]}))},r.ChartEngine.prototype.mousedown=function(l){var s,d,h,p,u,g,f;if(s="mous",s+="edow",s+="n",!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!{},!!this.displayInitialized&&!!this.displayCrosshairs&&!this.repositioningDrawing&&!this.editingAnnotation&&!(l.button&&l.button>=2))){if(d=this.container.getBoundingClientRect(),this.top=d.top,this.left=d.left,this.right=this.left+this.width,this.bottom=this.top+this.height,l.clientX>=this.left&&l.clientX<=this.right&&l.clientY>=this.top&&l.clientY<=this.bottom)this.insideChart=!![];else{this.insideChart=![];return}if(!!this.currentPanel){this.manageTouchAndMouse&&l&&l.preventDefault&&this.captureTouchEvents&&l.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!!{},this.openDialog===""&&this.registerPointerEvent({x:l.clientX,y:l.clientY,time:this.mouseTimer},"down"),h=this.currentPanel.chart;for(var w=0;w<this.drawingObjects.length;w++)if(p=this.drawingObjects[w],p.highlighted&&!p.permanent){if(this.cloneDrawing){u=r.ChartEngine.drawingTools[p.name],g=new u,g.reconstruct(this,p.serialize()),this.drawingObjects.push(g),this.activateRepositioning(g),g.repositioner=p.repositioner;return}if(f=this.currentVectorParameters.vectorType,!r.Drawing||!f||!r.Drawing[f]||!new r.Drawing[f]().dragToDraw){this.activateRepositioning(p);return}}this.mainSeriesRenderer;var{baselineHelper:v}=this;if(!(v.size&&this.findBaselineHandle(l,!0))){var{anchorHandles:m}=this.controls;if(m)for(var q in m){var{handle:x,sd:y,highlighted:k}=m[q];if(k){this.repositioningAnchorSelector={sd:y},x.classList.add("stx-grab");return}}this.drawingClick&&(this.currentPanel.subholder===l.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)||(this.grabbingScreen=!![],h.spanLock=![],this.yToleranceBroken=!1,this.grabStartX=l.clientX,this.grabStartY=l.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=h.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout(function(S){return function(){S.grabbingHand()}}(this),100),this.swipeStart&&this.swipeStart(h),(this.longHoldTime||this.longHoldTime===0)&&this.startLongHoldTimer(),this.runAppend(s,arguments))}}}},r.ChartEngine.prototype.mousemove=function(l){var s,d,h;if(s="mous",s+="em",s+="ov",s+="e",d="e",d+="n",d+="ter",h=l,r.ChartEngine.crosshairX=h.clientX,r.ChartEngine.crosshairY=h.clientY,h.type.toLowerCase().indexOf(d)>-1){this.positionCrosshairsAtPointer();return}this.runPrepend(s,arguments)||(t.V5R(),!!this.displayInitialized&&this.openDialog===""&&(this.baselineHelper.size&&this.findBaselineHandle(h),this.grabbingScreen&&h.buttons!==1&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!{},this.findHighlights(!1,!!{})),this.mousemoveinner(h.clientX,h.clientY),this.runAppend("mousemove",arguments)))},r.ChartEngine.prototype.mouseup=function(l){var s,d,h,p,u,g,f,w,v,m,q,x;if(s="mo",s+="useup",!this.runPrepend(s,arguments)){if(this.swipe.end=!!{},this.cancelLongHold=!![],this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250){d=2103545279,h=-796796606,p=2;for(var y=1;t.R9b(y.toString(),y.toString().length,+"1448")!==d;y++)this.changeOccurred("vector"),r.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),p+=2;t.R9b(p.toString(),p.toString().length,58815)!==h&&(this.changeOccurred(""),r.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(1),this.adjustDrawings()),this.draw();return}this.activateRepositioning(null)}if(this.repositioningBaseline){var{handle:k}=this.repositioningBaseline,{mainSeriesRenderer:S={}}=this;this.repositioningBaseline=null,k.classList.remove("stx-grab"),S.params&&S.params.baseline&&S.params.type!="mountain",this.draw();return}if(this.repositioningAnchorSelector){var{sd:A}=this.repositioningAnchorSelector;r.Studies.repositionAnchor(this,A),this.repositioningAnchorSelector=null,this.controls.anchorHandles[A.uniqueId].highlighted=!1,r.Studies.displayAnchorHandleAndLine(this,A,this.chart.dataSegment),Object.values(this.controls.anchorHandles||{}).forEach(({handle:_})=>{t.a3S();var T;return T="stx-",T+="gr",T+="a",T+="b",_.classList.remove(T)}),this.findHighlights();return}if(u=this.userPointerDown,this.userPointerDown=![],!!this.displayInitialized){if(g=this.backOutY(l.clientY),f=this.backOutX(l.clientX),w=l.which&&l.which>=2||l.button&&l.button>=2,t.a3S(),v=this.openDialog!=="",!v&&!w&&this.registerPointerEvent({x:l.clientX,y:l.clientY,time:Date.now()},"up"),m=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(f,g),this.currentPanel=this.whichPanel(g)),q=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),this.openDialog!==""){this.insideChart&&this.container.classList.remove("stx-drag-chart");return}if(this.grabOverrideClick){!this.overXAxis&&!this.overYAxis&&this.swipeRelease&&this.swipeRelease(),this.container.classList.remove("stx-drag-chart"),this.grabOverrideClick=![],this.doDisplayCrosshairs(),this.updateChartAccessories();return}if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),r.ChartEngine.resizingPanel){this.releaseHandle();return}if(w||l.ctrlKey)return this.anyHighlighted&&this.bypassRightClick!==!!{}?(this.rightClickHighlighted(),l.preventDefault&&this.captureTouchEvents&&l.preventDefault(),l.stopPropagation(),!{}):(this.dispatch("rightClick",{stx:this,panel:q,x:f,y:g}),!!{});l.clientX<this.left||l.clientX>this.right||l.clientY<this.top||l.clientY>this.bottom||(x=q&&q.subholder===l.target,m&&(x||this.overYAxis||this.overXAxis)?this.doubleClick(l.button,f,g):(u&&x&&((!this.longHoldTookEffect||this.activeDrawing)&&this.drawingClick(q,f,g),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:f,cy:g,panel:q})),!this.longHoldTookEffect&&!this.activeDrawing&&this.dispatch("tap",{stx:this,panel:q,x:f,y:g})),this.runAppend("mouseup",arguments))}}},r.ChartEngine.prototype.registerPointerEvent=function(l,s){this.pointerEvents[s].length>1&&this.pointerEvents[s].pop(),this.pointerEvents[s].unshift(l)},r.ChartEngine.prototype.resetPointerEvent=function(l){this.pointerEvents[l].splice(+"0")},r.ChartEngine.prototype.isDoubleClick=function(l){var s,d,h,p;s=l?1200:400;var{up:u,down:g}=this.pointerEvents;return this.cancelTouchSingleClick=!1,t.a3S(),u.length<"2"<<32||g.length<+"2"?![]:(d=g[0].time-u[1].time<this.doubleClickTime&&Math.pow(g[1].x-g[0].x,2)+Math.pow(g[1].y-g[0].y,2)<=s&&Math.pow(u[1].x-u[0].x,2)+Math.pow(u[1].y-u[0].y,+"2")<=s&&u[1].time-g[1].time<this.longHoldTime&&u[0].time-g[0].time<this.longHoldTime,d&&(h="d",h+="ow",h+="n",p="u",p+="p",this.resetPointerEvent(p),this.resetPointerEvent(h),this.cancelTouchSingleClick=!![]),d)},r.ChartEngine.prototype.doubleClick=function(l,s,d){var h,p;if(h="dou",h+="bl",h+="eClic",h+="k",t.V5R(),!this.runPrepend(h,arguments)&&!this.editingAnnotation){if(r.ChartEngine.drawingLine)return this.currentVectorParameters.vectorType=="continuous"&&r.ChartEngine.completeDrawing(this),this.undo();this.activeDrawing||(p=this.activeMarker&&this.activeMarker.doubleClick({cx:s,cy:d,panel:this.currentPanel}),p||this.dispatch("doubleClick",{stx:this,button:l,x:s,y:d}),this.runAppend("doubleClick",arguments))}},r.ChartEngine.prototype.handleMouseOut=function(l){var s,d,h;if(l=l||window.event,!l.relatedTarget||!r.withinElement(this.chart.container,l.pageX,l.pageY)){if(s="h",s+="andleMouseOu",s+="t",this.runPrepend(s,arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=![],this.drawingLine=!1,d=this.backOutY(l.pageY),h=this.backOutX(l.pageX),this.drawingClick(this.currentPanel,h,d));var{sd:p,tapToAdd:u}=this.repositioningAnchorSelector||{};p&&!u&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[p.uniqueId].highlighted=!1,r.Studies.displayAnchorHandleAndLine(this,p,this.chart.dataSegment),this.draw()),this.insideChart=!{},this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend("handleMouseOut",arguments)}},r.ChartEngine.prototype.startLongHoldTimer=function(l){var s,d;s=this,this.cancelLongHold=!{},this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),d=function(){t.a3S(),!s.cancelLongHold&&(s.longHoldTookEffect=!![],l&&l(),s.dispatch("longhold",{stx:s,panel:s.currentPanel,x:s.cx,y:s.cy}),s.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(d,this.longHoldTime):this.longHoldTime===0&&d()},r.ChartEngine.prototype.grabHandle=function(l){var s,d;s="grabH",s+="an",s+="d",s+="le",d="grabHan",d+="d",d+="l",t.a3S(),d+="e",!this.runPrepend(d,arguments)&&(!l||(r.ChartEngine.crosshairY=this.resolveY(l.top),r.ChartEngine.resizingPanel=l,l.handle.classList.add("stx-grab"),this.runAppend(s,arguments)))},r.ChartEngine.prototype.grabbingHand=function(){!this.allowScroll||!this.grabbingScreen||r.touchDevice||this.container.classList.add("stx-drag-chart")},r.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;r.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),r.ChartEngine.resizingPanel&&r.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),r.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},r.ChartEngine.prototype.findHighlights=function(l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt;d="highlightsRadiu",d+="s",h=this.preferences[l?"highlightsTapRadius":d],this.highlightViaTap=l;var{cx:ut,cy:mt}=this;if(this.anyHighlighted=![],!this.currentPanel)return;var{chart:gt}=this.currentPanel;if(this.activeDrawing&&(s=!!{}),p=!1,u=null,g=s?{}:{forceShow:!!{},type:"drawing"},f={x0:this.tickFromPixel(ut-h,gt),x1:this.tickFromPixel(ut+h,gt),y0:this.valueFromPixel(mt-h,this.currentPanel),y1:this.valueFromPixel(mt+h,this.currentPanel),cx0:ut-h,cx1:ut+h,cy0:mt-h,cy1:mt+h,r:h},this.repositioningDrawing&&f.x1-f.x0<+"2"?(f.x1++,f.x0--):f.x1==f.x0&&(f.x0-=.5,f.x1+=.5),!gt.hideDrawings)for(var bt=this.drawingObjects.length-1;bt>=0;bt--)w=this.drawingObjects[bt],this.panels[w.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=w||(v=w.highlighted,m=w.panelName==this.currentPanel.name,m&&(w.repositioner=w.intersected(this.crosshairTick,this.crosshairValue,f)),m=m&&w.repositioner&&!this.overXAxis&&!this.overYAxis,!s&&m?(v?(u=w,this.anyHighlighted&&this.singleDrawingHighlight&&(w.highlighted=![]),w.highlighted&&w.highlighted!=v&&(p=!![])):v!=w.highlight(!0)&&(u||(u=w),this.anyHighlighted&&this.singleDrawingHighlight&&(w.highlighted=!1),p=!0),this.anyHighlighted=!0):v!=w.highlight(!1)&&(p=!0),w.highlighted&&(g.noDelete=w.permanent,g.noEdit=!this.callbackListeners.drawingEdit.length,g.noText=g.noEdit||!w.edit,g.message=r.capitalize(w.name))));for(q in this.layout.studies)x=this.layout.studies[q],x.prev=x.highlight,x.highlight=this.yaxisMatches(x,this.grabStartYAxis);for(q in gt.seriesRenderers){A=gt.seriesRenderers[q],A.params.highlight=this.yaxisMatches(A,this.grabStartYAxis);for(var yt=0;yt<A.seriesParams.length;yt++)S=A.seriesParams[yt],S.prev=S.highlight,S.highlight=A.params.highlight}var{anchorHandles:qt}=this.controls;if(qt)for(var St in qt)qt[St].highlighted=!{};for(_=this.markerHelper&&this.markerHelper.visibleCanvasMarkers,y=0;_&&y<_.length;y++)k=_[y],this.activeMarker=null,k.prev=_[y].highlight,k.highlight=!1;if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!s&&!this.anyHighlighted&&qt){for(var Tt in qt)if(T="sd.sign",T+="alDa",T+="ta.",T+="reveal",P=qt[Tt],r.getFromNS(P,T)!==!{}){if(!this.anyHighlighted){var{sd:wt,currentPixel:Ct}=P;t.O44(3),E=t.y99(h,Ct),t.O44(0),z=t.y99(h,Ct),U=this.panels[wt.panel];var{top:Rt,bottom:Ht}=U.yAxis;if(N=r.boxIntersects(E,Rt,z,Ht,ut,mt,ut,mt),N){C="anc",C+="h",C+="orHand",C+="le",this.anyHighlighted=!![],P.highlighted=!0,p=!![],g={message:wt.name,type:C,noDelete:!0};continue}}P.highlighted===!0&&(P.highlighted=!1,p=!0)}}if(!s&&!this.anyHighlighted&&gt.dataSegment&&(D=this.barFromPixel(ut),D>=0&&D<gt.dataSegment.length)){for(M=r.convertBoxToPixels(this,this.currentPanel.name,f),I=Number.MAX_VALUE,y=0;_&&y<_.length;y++)if(k=_[y],L=k.params.box,!!L&&k.params.panelName===this.currentPanel.name){if(r.boxIntersects(M.x0,M.y0,M.x1,M.y1,L.x0,L.y0,L.x1,L.y1)){t.o0m(24);var jt=t.b_h(11,9);t.o0m(3);var $t=t.y99(24,26);t.o0m(90);var Bt=t.y99(20,21,12,4);t.O44(24);var zt=t.y99(4,2);O=Math.pow(mt-(L.y1+L.y0)/jt,$t)+Math.pow(ut-(L.x1+L.x0)/Bt,zt),O<=I&&(I=O,this.activeMarker=k),k.highlight=!!{},this.markerHelper.highlighted.push(k)}k.prev!=k.highlight&&(p=!![])}I=Number.MAX_VALUE,B=null;for(q in this.overlays){if(_&&this.markerHelper.highlighted.length)break;if(x=this.overlays[q],!(x.signalData&&!x.signalData.reveal)&&x.panel==this.currentPanel.name&&x.study.isHighlighted!==!{}){if(typeof x.study.isHighlighted=="function"){if(x.study.isHighlighted(this,ut,mt)){B={o:x,out:Pt},I=0;break}continue}if(R=gt.dataSegment[D],!!R)for(var Pt in x.outputMap)H=Vt.call(this,D,f,Pt,x.getYAxis(this)),H!==!{}&&H<=I&&(B={o:x,out:Pt},I=H)}}for(q in gt.seriesRenderers){if(this.highlightedDataSetField)break;if(W=gt.seriesRenderers[q],X=W.params.panel,W!=this.mainSeriesRenderer&&!(!W.params.highlightable&&!this.currentVectorParameters.vectorType)&&X==this.currentPanel.name)for(y=0;y<W.seriesParams.length;y++)if(S=W.seriesParams[y],Z=S.field,!Z&&!W.highLowBars&&(Z=this.defaultPlotField||"Close"),S.symbol&&S.subField&&(Z+="-->"+S.subField),j=W.params.yAxis,!j&&X&&(j=this.panels[X].yAxis),W.params.step&&D>0){if(!W.caches[S.id]||(F=W.caches[S.id][D],!F&&F!==0))continue;if(t.o0m(91),Q=W.caches[S.id][t.b_h(D,"1")],(Q||Q===0)&&mt+h>=F&&mt-h<=Q||mt-h<=F&&mt+h>=Q){B={s:S,fullField:Z};break}}else et=Vt.call(this,D,f,Z,j,W,S.id),et!==!1&&et<=I&&(B={s:S,fullField:Z},I=et)}B&&(x=B.o,x?(x.name!=x.panel&&(this.anyHighlighted=!0),x.highlight=B.out,this.highlightedDataSetField=B.out):(this.anyHighlighted=!0,B.s.highlight=!!{},this.highlightedDataSetField=B.fullField))}K=this.preferences.dragging;for(q in this.overlays)x=this.overlays[q],x.highlight&&(this.anyHighlighted=!0,J=x.inputs.display||x.name,J=this.translateIf(J),g={message:J,noDelete:x.permanent,noEdit:!x.editFunction,noText:!x.textFunction,type:"study"},u=null,(K===!0||K&&K.study)&&(x.undraggable(this)||(V=x)),tt=x.getYAxis(this)),x.prev!=x.highlight&&(p=!0);for(q in gt.seriesRenderers){at=gt.seriesRenderers[q],ct=at.params.yAxis?at.params.yAxis.textStyle:null;for(var Nt=0;Nt<at.seriesParams.length;Nt++)S=at.seriesParams[Nt],at.params.highlightable&&S.highlight&&(this.anyHighlighted=!![],G=S.color||ct,G=="auto"&&(G=this.defaultColor),S.opacity&&S.opacity!==1&&(G=r.hexToRgba(r.colorToHex(G),parseFloat(S.opacity))),g={message:S.display||S.symbol,backgroundColor:G,noDelete:S.permanent,type:"series"},u=null,(K===!0||K&&K.series)&&(V=at,at.params.highlight=!![]),tt=at.getYAxis(this)),S.prev!=S.highlight&&(p=!0)}for(q in this.plugins)Y=this.plugins[q],it={},Y.findHighlights&&(it=Y.findHighlights(this,l,s),it.somethingChanged&&(p=!![]),it.anyHighlighted&&(this.anyHighlighted=!0,g=it.stickyArgs||{}));rt=this.whichPanel(mt),lt=this.whichYAxis(rt,ut),tt||(tt=lt),this.currentBaseline&&(tt=this.currentBaseline.getYAxis(this)),tt&&(tt.highlight||(p=!!{}),tt.highlight=!0),dt=[];for(var _t in this.panels)dt=dt.concat(this.panels[_t].yaxisLHS).concat(this.panels[_t].yaxisRHS);for(q=0;q<dt.length;q++)tt==dt[q]&&!s||(dt[q].highlight&&(p=!0),dt[q].highlight=![]);(K===!!{}||K&&K.yaxis)&&lt&&!lt.noDraw&&(this.anyHighlighted=!![],V=lt,g={});function Vt(ee,xe,ae,Te,Ue,_e){var Oe,de,se,he,Ve,ye,qe,Se,ge,ue,te,fe,oe,me,be,ce,Lt,Wt,Zt,je,Ce,Re,ze,Ee;if(Oe="-",Oe+="-",Oe+=">",de=this,se=de.chart,he=de.currentPanel,Te||(Te=he.yAxis),Ve=ae.split(Oe),ye=Ve[0],t.O44(4),qe=Ve[t.y99("1",1)],qe||(qe="Close"),Se=se.dataSegment[D],me=null,be=null,ce=null,Lt=new Array(3),Wt=Ue&&Ue.caches[_e],Se&&Wt){for(te=Wt[D],me=Se.tick,(te||te===0)&&(Lt[0]=1),Zt=D-1;Zt>=0;Zt--)if(Wt[Zt]||Wt[Zt]===0){fe=Wt[Zt],t.o0m(92),be=t.y99(me,D,Zt),Lt[1]=1;break}for(Zt=D+1;Zt<se.dataSegment.length;Zt++)if(Wt[Zt]||Wt[Zt]===0){oe=Wt[Zt],t.O44(92),ce=t.b_h(me,D,Zt),Lt[2]=1;break}}be===null&&(ge=de.getPreviousBar.call(de,se,ae,D),ge&&(be=ge.tick,fe=Me(ge))),ce===null&&(ue=de.getNextBar.call(de,se,ae,D),ue&&(ce=ue.tick,oe=Me(ue)));function Me(Xe){var ve;return Xe?(ve=Xe[ye],ve&&(ve[qe]||ve[qe]===0)&&(ve=ve[qe]),Ue&&Ue.getBasis&&(ve+=Ue.getBasis(Xe,ye,qe)),!se.transformFunc||Te!=se.yAxis?ve:Xe.transform&&ye in Xe.transform?(ve=Xe.transform[ye],ve&&(ve[qe]||ve[qe]===0)&&(ve=ve[qe]),ve):(t.V5R(),se.transformFunc(de,se,ve))):null}if(be===null&&ce===null)return!1;if(Wt||(te=Me(Se),fe=Me(ge),oe=Me(ue),me=Se.tick,ge&&(be=ge.tick),ue&&(ce=ue.tick)),t.a3S(),!fe&&fe!==0&&(fe=0,be=0),!oe&&oe!==0)if(te||te===0?(oe=te,Lt[2]=Lt[0]):(oe=fe,Lt[2]=Lt[1]),_e&&se.series[_e].parameters.extendToEndOfDataSet){t.o0m(0);var ia=t.b_h(1,0);ce=se.dataSet.length-ia}else ce=be;return!te&&te!==0&&(te=oe,me=ce,Lt[0]=Lt[2],fe===("0"|0)&&be===0&&(fe=te,be=me,Lt[1]=Lt[0])),je=de.pixelFromTransformedValue.bind(de),Ce=de.valueFromPixel.bind(de),te=Ce(Lt[+"0"]?te:je(te,he,Te),he),fe=Ce(Lt[1]?fe:je(fe,he,Te),he),oe=Ce(Lt["2"^0]?oe:je(oe,he,Te),he),Re=r.convertBoxToPixels(de,he.name,xe),ze=r.convertBoxToPixels(de,he.name,{x0:be,y0:fe,x1:me,y1:te}),Ee=r.convertBoxToPixels(de,he.name,{x0:me,y0:te,x1:ce,y1:oe}),r.boxIntersects(Re.x0,Re.y0,Re.x1,Re.y1,ze.x0,ze.y0,ze.x1,ze.y1,"segment")||r.boxIntersects(Re.x0,Re.y0,Re.x1,Re.y1,Ee.x0,Ee.y0,Ee.x1,Ee.y1,"segment")?Math.min(Math.pow(mt-(ze.y1+ze.y0)/2,2)+Math.pow(ut-(ze.x1+ze.x0)/2,2),Math.pow(mt-(Ee.y1+Ee.y0)/2,2)+Math.pow(ut-(Ee.x1+Ee.x0)/2,2)):!{}}if(p&&(this.draw(),g.panel=rt,this.anyHighlighted&&!this.grabStartYAxis?g.panel=rt:g={},this.displaySticky(g),this.clearMeasure(),u&&u.measure()),this.anyHighlighted?this.controls.mSticky&&(g&&g.positioner?g.positioner.call(this,this.controls.mSticky):this.positionSticky(this.controls.mSticky)):this.setMeasure(),t.V5R(),V&&rt&&!rt.noDrag){if(ht="stx",ht+="-dra",ht+="g",ht+="gable",this.longHoldTookEffect&&!this.cancelLongHold){if(V.params){V.params.dependentOf&&(V=gt.seriesRenderers[V.params.dependentOf],V.params.highlight=!0);for(q in gt.seriesRenderers)gt.seriesRenderers[q].params.dependentOf==V.params.name&&(gt.seriesRenderers[q].params.highlight=!0)}if(this.highlightedDraggable=V,V.getDependents){pt=V.getDependents(this,!![]);for(q in this.overlays)x=this.overlays[q],pt.indexOf(x)>-1&&(x.highlight=!![])}}this.container.classList.add(ht)}else this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()},r.ChartEngine.prototype.rightClickHighlighted=function(){t.a3S();var l,s;l="rightClickHi",l+="ghlighted",s="rightClick",s+="Highlighted",!this.runPrepend(s,arguments)&&(this.deleteHighlighted(!0),this.runAppend(l,arguments))},r.ChartEngine.prototype.deleteHighlighted=function(l,s,d){var h,p,u,g,f,w,v,m,q,x,y,k;if(t.V5R(),!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!![],r.clearCanvas(this.chart.tempCanvas,this),h=this.bypassRightClick===!{},h||!this.bypassRightClick.drawing)for(var S=this.drawingObjects.length-1;S>=0;S--)p=this.drawingObjects[S],p.highlighted&&(l?this.rightClickDrawing(p,s,d):p.permanent||(u=p.abort(),u||(g=this.exportDrawings(),t.o0m(25),this.drawingObjects.splice(S,t.y99("1",0)),this.undoStamp(g,this.exportDrawings())),this.changeOccurred("vector")));if(h||!this.bypassRightClick.study)for(var A in this.overlays)f=this.overlays[A],(f.overlay||f.underlay)&&f.highlight&&!f.permanent&&(l||s?this.rightClickOverlay(A,s):this.removeOverlay(A));if(w=this.currentPanel&&this.currentPanel.chart,w&&(h||!this.bypassRightClick.series)){for(var _ in w.seriesRenderers)if(v=w.seriesRenderers[_],v.params.highlightable){m=this.panels[v.params.panel],q=m&&m.yAxis.name;for(var T=v.seriesParams.length-1;T>=0;T--)x=v.seriesParams[T],(v.params.highlight||x.highlight)&&!x.permanent&&(v.removeSeries(x.id),v.seriesParams.length<1&&(this.removeSeriesRenderer(v),v.params.name==q?this.electNewPanelOwner(v.params.panel):(this.checkForEmptyPanel(v.params.panel),y=this.getYAxisByName(m,v.params.name),y&&(y.name=y.studies[0]||y.renderers[1]))))}}this.draw(),this.resizeChart(),this.clearMeasure(),k=this.controls.mSticky,k&&(k.style.display="none",k.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},r.ChartEngine.prototype.displayDragOK=function(l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A;s=this,d=this.controls.dragOk;function _(P){var E,z,U;E="t",E+="e",E+="xt",z=s.translateIf(P.querySelector(".field").getAttribute(E)),U=s.whichYAxis(s.whichPanel(s.cy),s.cx,s.cy),U&&U.dropzone=="all"&&(z+="-->"+s.translateIf(U.name)),P.querySelector(".field").innerHTML=z}if(d){if(l||(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(this.highlightViaTap),h=this.highlightedDraggable,p=h&&h.undraggable&&h.undraggable(this),u=this.cx,g=this.cy,!l){if(h&&!p&&this.longHoldTookEffect&&!this.cancelLongHold)f=".f",f+="i",f+="eld",w=h.inputs&&h.inputs.display||h.params&&(h.params.display||h.params.name)||h.name,d.querySelector(f).setAttribute("text",w),_.call(this,d),d.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else{v="stx-drag-",v+="se",v+="ries",m="n",m+="o",m+="ne",d.style.display=m,this.draw(),this.container.classList.remove(v),this.container.classList.remove("stx-drag-axis");for(var T in this.panels){for(q="ri",q+="ght",x=this.panels[T].subholder.classList,x.remove("dropzone"),x.remove("all"),x.remove("left"),x.remove(q),x.remove("top"),x.remove("bottom"),y=0;y<this.panels[T].yaxisLHS.length;y++)this.panels[T].yaxisLHS[y].dropzone=null;for(y=0;y<this.panels[T].yaxisRHS.length;y++)this.panels[T].yaxisRHS[y].dropzone=null}}this.draw()}h&&(k="p",k+="x",S=g+d.offsetHeight,A=Math.max(0,u-d.offsetWidth),t.O44(0),d.style.top=t.y99("px",S),t.o0m(0),d.style.left=t.y99(k,A),_.call(this,d))}},r.ChartEngine.prototype.displayDrawOK=function(){var l,s,d,h,p,u,g,f,w;if(l=this.controls.drawOk,l&&r.Drawing){s="n",s+="one",d=r.Drawing[this.currentVectorParameters.vectorType],h=1408996007,p=-853413585,u=2;for(var v=1;t.U5N(v.toString(),v.toString().length,20983)!==h;v++)d&&(d=new d),u+=2;t.U5N(u.toString(),u.toString().length,70364)!==p&&d&&(d=new d),this.highlightedDataSetField&&d&&d.isAllowed(this,this.highlightedDataSetField)?(g="p",g+="x",l.style.display="inline-block",f=this.cy+l.offsetHeight,w=this.cx-l.offsetWidth,t.O44(0),l.style.top=t.y99("px",f),t.o0m(0),l.style.left=t.b_h(g,w),l.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):l.style.display=s}},r.ChartEngine.prototype.mouseWheel=function(l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A;if(s="mou",s+="se",s+="W",s+="heel",d="ve",d+="rti",d+="cal",h="mouseWh",h+="e",h+="el",!this.runPrepend(h,arguments)&&(l.preventDefault&&l.preventDefault(),this.openDialog===""&&(p=l.deltaX,u=l.deltaY,Math.abs(u)>Math.abs(p)?(t.o0m(31),p=t.b_h("0",64)):u=0,this.lastMouseWheelEvent=Date.now(),!(Math.abs(p)===0&&Math.abs(u)==="0">>64)))){if(l.shiftKey&&u&&(p=u,t.o0m(31),u=t.y99("0",64)),this.allowSideswipe&&p!==0){if(this.lastMove="horizontal",f=p,this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=r.ChartEngine.crosshairX,this.grabStartY=r.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mouseWheelAcceleration){w=181271895,v=-849208335,m=2;for(var _=1;t.R9b(_.toString(),_.toString().length,33367)!==w;_++)g=Math.max(Math.pow(Math.abs(f),"503"*1),2),m+=2;t.R9b(m.toString(),m.toString().length,63993)!==v&&(g=Math.max(Math.pow(Math.abs(f),424),3)),g=Math.max(Math.pow(Math.abs(f),.3),1),f*=g}this.mousemoveinner(r.ChartEngine.crosshairX-f,r.ChartEngine.crosshairY),this.updateChartAccessories(),this.grabbingScreen=!{};return}if(this.lastMove=d,!(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom)&&!!this.displayInitialized){if(!u)if(r.wheelEvent=="mousewheel"){t.o0m(93);var T=t.y99(0,3,10,20);t.O44(94);var P=t.y99(3,28,2,4,20);if(u=T/("40"|P)*l.wheelDelta,l.wheelDeltaX){t.o0m(95);var E=t.y99(17,17,13,11);t.O44(96);var z=t.b_h(38,7,18,32,1);p=-("1"*E)/z*l.wheelDeltaX}}else u=l.detail;if(typeof l.deltaMode=="undefined"&&(l.deltaMode=l.type=="MozMousePixelScroll"?0:1),q=-u,l.deltaMode==1&&(q*=33),x=null,y=null,this.mouseWheelAcceleration){g=Math.max(Math.pow(Math.abs(q),.3),1),x=Math.max(Number.MIN_VALUE,1-.1*g),k=-+"1316722452",S=-1545328751,A=2;for(var U=1;t.R9b(U.toString(),U.toString().length,"5932"^0)!==k;U++)t.o0m(4),y=t.b_h(4,x),t.O44(25),A+=t.b_h("2",0);t.R9b(A.toString(),A.toString().length,61635)!==S&&(t.O44(77),y=t.y99(8,x)),t.o0m(9),y=t.y99(x,1)}if(this.zoomInitiatedByMouseWheel=!![],q>0?this.reverseMouseWheel?this.zoomOut(null,y):this.zoomIn(null,x):q<0&&(this.reverseMouseWheel?this.zoomIn(null,x):this.zoomOut(null,y)),!this.runAppend(s,arguments))return!1}}},r.ChartEngine.handleContextMenu=function(l){var s,d;s=r.ChartEngine.registeredContainers;for(var h=0;h<s.length;h++)if(l.target.ownerDocument===s[h].ownerDocument&&(d=s[h].stx,d&&d.anyHighlighted))return l.preventDefault&&l.preventDefault(),![]},r.ChartEngine.registerGlobalEvent("contextmenu",r.ChartEngine.handleContextMenu),r.ChartEngine.htmlControls={annotationSave:o,annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;"></span>',mSticky:`
		<div class="stx_sticky">
			<span class="mStickyInterior"></span>
			<span class="mStickyRightClick">
				<span class="overlayText stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayEdit stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="overlayTrashCan stx-btn" style="display:none">
					<span>&nbsp;</span>
				</span>
				<span class="mouseDeleteInstructions">
					<span>(</span>
					<span class="mouseDeleteText">right-click to delete</span>
					<span class="mouseManageText">right-click to manage</span>
					<span>)</span>
				</span>	
			</span>
			<span class="stickyLongPressText">(long-press to drag)</span>
			<span class="customInstructions">
				<span>(</span>
				<span class="dragAnchorText" type="anchorHandle">
					drag to change anchor time
				</span>
				<span>)</span>
			</span>
		</div>
	`,drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:a,crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:e,chartControls:n,home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:i,iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},r.ChartEngine.prototype.registerChartControl=function(l,s,d){var h,p,u,g,f;if(h=this.controls,!(!h||!h.chartControls)&&!h.chartControls.querySelector("."+l)&&(p=null,u=h.chartControls.querySelector(".stx-zoom-in"),u))return g="</sp",g+="a",g+="n",g+=">",f="s",f+="p",f+="an",p=document.createElement(f),t.o0m(14),p.innerHTML=t.b_h(s,g,'<span class="stx-tooltip">'),t.O44(0),p.className=t.b_h(l,"stx-chart-control-button "),u.parentNode.appendChild(p),d&&r.safeClickTouch(p,d),r.touchDevice||this.makeModal(p),p},r.ChartEngine.prototype.zoomOut=function(l,s){var d,h,p,u,g;d="zo",d+="omOut";function f(v){return function(m){if(h.zoomSet(m,v),h.animations.zoom.hasCompleted){if(h.runAppend("zoomOut",arguments))return;h.changeOccurred("layout"),h.continuousZoom&&h.continuousZoom.execute(!!{})}}}if(!this.runPrepend(d,arguments)){this.preferences.zoomOutSpeed?s=this.preferences.zoomOutSpeed:s||(t.o0m(19),s=t.b_h(1,"0.7")),l&&l.preventDefault&&l.preventDefault(),this.cancelTouchSingleClick=!![],h=this;for(var w in this.charts)p=this.charts[w],u=p.width*s/this.layout.candleWidth,p.allowScrollFuture===![]&&p.allowScrollPast===!1&&u>p.dataSet.length&&(u=p.dataSet.length),g=this.chart.width/u,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(f(p),this.layout.candleWidth,g)}},r.ChartEngine.prototype.zoomIn=function(l,s){var d,h,p,u;if(this.runPrepend("zoomIn",arguments))return;this.preferences.zoomInSpeed?s=this.preferences.zoomInSpeed:s||(s=.7),l&&l.preventDefault&&l.preventDefault(),this.cancelTouchSingleClick=!0;function g(v){return function(m){if(d.zoomSet(m,v),t.V5R(),d.animations.zoom.hasCompleted){if(d.runAppend("zoomIn",arguments))return;d.changeOccurred("layout"),d.continuousZoom&&d.continuousZoom.execute()}}}d=this;for(var f in this.charts){if(h=this.charts[f],p=h.width*s/this.layout.candleWidth,h.maxTicks-p<("1"|0)){t.o0m(97);var w=t.b_h(14,0,19,49,10);p=h.maxTicks-w}p<this.minimumZoomTicks&&(p=this.minimumZoomTicks),u=this.chart.width/p,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(g(h),this.layout.candleWidth,u)}},r.ChartEngine.prototype.createCrosshairs=function(){var l,s,d;l="creat",l+="eCros",l+="s",l+="hairs",!this.runPrepend(l,arguments)&&(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(s=this.controls.crossX,d=this.controls.crossY,s&&(s.onmousedown||(s.onmousedown=function(h){return t.a3S(),h.preventDefault&&h.preventDefault(),![]})),d&&(d.onmousedown||(d.onmousedown=function(h){return h.preventDefault&&h.preventDefault(),!1})),this.runAppend("createCrosshairs",arguments)))},c=!{},r.ChartEngine.prototype.mousemoveinner=r.ChartEngine.prototype.mousemoveinner||function(l,s){t.V5R(),c||console.error("interaction feature requires activating movement feature."),c=!0}};Pl=b=>{var t=st,i,n;i="unde",i+="f",i+="ine",i+="d",n=typeof _CIQ!==i?_CIQ:b.CIQ,t.V5R(),n.Marker||(n.ChartEngine.helpersToRegister.push(function(e){e.markerHelper={chartMap:{},classMap:{},domMarkers:[],visibleCanvasMarkers:[],highlighted:[],placementMap:{}}}),n.ChartEngine.prototype.addToHolder=function(e){var a,o,r,c;a=this.panels[e.params.panelName],a&&(o=e.params,r=e.node,c=e.stxNodeCreator,c&&c.prepareForHolder&&(r=c.prepareForHolder(e)),o.chartContainer?this.container.appendChild(e.node):o.includeAxis?a.holder.appendChild(e.node):a.subholder.appendChild(r),e.chart=a.chart,c&&c.addToHolder&&c.addToHolder(e),c&&c.expand&&n.Marker.initializeScrollBehavior(c))},n.ChartEngine.prototype.getMarkerArray=function(e,a){t.a3S();var o,r,c;o=[];for(var l in this.markers)for(var s=+"0";s<this.markers[l].length;s++)r="al",r+="l",c=this.markers[l][s],e=="panelName"?c.params.panelName==a&&o.push(c):e=="label"?l==a&&o.push(c):e==r&&o.push(c);return o},n.ChartEngine.prototype.removeFromHolder=function(e){var a,o,r,c,l,s;if(a=this.panels[e.params.panelName],a&&(e.node.parentNode==a.holder?a.holder.removeChild(e.node):e.node.parentNode==a.subholder?a.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),o=this.markers[e.params.label],!!o){for(r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1);break}if(c=this.markerHelper.chartMap[e.chart.name],c){for(r=0;r<c.markers.length;r++)if(c.markers[r]===e){c.markers.splice(r,1);break}}if(l=this.markerHelper.classMap[e.className],t.V5R(),l&&(s=l[e.params.panelName],s)){for(r=0;r<s.length;r++)if(s[r]===e){s.splice(r,1);break}}}},n.ChartEngine.prototype.moveMarkers=function(e,a){var o,r;o=this.getMarkerArray("panelName",e);for(var c=0;c<o.length;c++)o[c].params.panelName=a;t.a3S();for(var l in this.markerHelper.classMap)r=this.markerHelper.classMap[l][e],r&&(this.markerHelper.classMap[l][a]=r,delete this.markerHelper.classMap[l][e])},n.ChartEngine.prototype.establishMarkerTicks=function(){var e,a;e=this.markerHelper.chartMap;for(var o in e){a=e[o];for(var r=0;r<a.markers.length;r++)this.setMarkerTick(a.markers[r])}},n.ChartEngine.prototype.futureTickIfDisplayed=function(e){var a,o,r,c,l,s,d,h,p;if(a=e.chart,!(a.dataSet.length<1)){o=a.xaxis[a.xaxis.length-1].DT,t.O44(98);var u=t.y99(54996,6,5e3,10);if(o=new Date(o.getTime()-this.timeZoneOffset*u),!(e.params.x>o)){r=a.maxTicks-a.dataSegment.length,c=a.dataSet.length+r,d=new Date(+a.dataSet[a.dataSet.length-1].DT),h=this.standardMarketIterator(d,null,a),p=e.params.x.getTime();for(var g=a.dataSet.length;g<c;g++)if(l=d.getTime(),d=h.next(),s=d.getTime(),s==p){e.tick=g;return}else if(s>p&&l<p){t.o0m(3),e.tick=Math.max(t.b_h(1,g),0);return}}}},n.ChartEngine.prototype.setMarkerTick=function(e){var a,o,r,c,l,s,d,h;if(a="da",a+="t",a+="e",o="mas",o+="ter",r=e.chart,e.params.xPositioner==o&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if(e.params.xPositioner=="tick"&&e.params.x)e.tick=e.params.x;else if(e.params.xPositioner==a&&e.params.x){s=e.params.x.getTime();for(var p="0"*1;p<r.dataSet.length;p++)if(d=r.dataSet[p],l=d.DT.getTime(),c=l,p>0&&(c=r.dataSet[p-1].DT.getTime()),l==s){e.tick=p;return}else if(l>s&&c<s){t.o0m(91),e.tick=Math.max(t.b_h(p,"1"),0);return}else if(s<l){e.tick=null;return}if(r.dataSet.length<1)return;h=new Date(+r.dataSet[p-1].DT),h.getTime()<s&&(e.params.future=!!{}),e.tick=null}},n.ChartEngine.prototype.positionMarkers=function(){var e,a,o,r,c,l,s,d,h,p;if(e="a",e+="ll",a="ti",a+="ck",o=this,r=this.chart,!o.markerHelper)return;this.markerHelper.placementMap={},this.markerDelay||this.markerDelay===0?this.markerTimeout||(this.markerTimeout=setTimeout(u,this.markerDelay)):u();function u(){var f,w,v,m,q;if(f="posi",f+="tion",f+="Mar",f+="kers",!o.runPrepend("positionMarkers",arguments)){o.markerTimeout=null;for(var x in o.markerHelper.classMap)for(var y in o.markerHelper.classMap[x])w=o.markerHelper.classMap[x][y],v=o.panels[y],w.length&&(m={stx:o,arr:w,panel:v},m.firstTick=v.chart.dataSet.length-v.chart.scroll,m.lastTick=m.firstTick+v.chart.dataSegment.length,q=w[0].constructor.placementFunction,q?q(m):o.defaultMarkerPlacement(m));o.runAppend(f,arguments)}}if(c=this.getFirstLastDataRecord(r.dataSegment,a),l=this.getFirstLastDataRecord(r.dataSegment,"tick",!!{}),!(!c||!l)){s=this.getMarkerArray(e),this.markerHelper.visibleCanvasMarkers=[];for(var g=0;g<s.length;g++)d=s[g],h=d.stxNodeCreator,c.tick<=d.tick&&d.tick<=l.tick?(this.markerHelper.visibleCanvasMarkers.push(d),h&&h.drawMarker&&h.drawMarker(d)):(d.highlight=!1,d.params.box=null,d.attached&&h&&h.expand&&(p="hidde",p+="n",h.expand.style.visibility=p))}},n.Marker=n.Marker||function(e){var a,o,r,c,l,s,d,h;if(a="g",a+="eneric",o="c",o+="ha",o+="r",o+="t",r="v",r+="alu",r+="e",this.params={xPositioner:"date",yPositioner:r,panelName:o,permanent:!1,label:a,includeAxis:!1},n.extend(this.params,e),this.params.node||(this.params.node=document.createElement("DIV")),c=this.params.stx,!c){console.log("Marker created without specifying stx");return}this.className||(this.className="CIQ.Marker"),n.derivedFrom(this.params.node,n.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,l=this.params.label,c.markers[l]||(c.markers[l]=[]),c.markers[l].push(this),s=c.panels[this.params.panelName],this.chart=s.chart,c.markerHelper.chartMap[this.chart.name]||(c.markerHelper.chartMap[this.chart.name]={markers:[]}),c.markerHelper.chartMap[this.chart.name].markers.push(this),d=c.markerHelper.classMap[this.className],d||(d=c.markerHelper.classMap[this.className]={}),d[this.params.panelName]||(d[this.params.panelName]=[]),d[this.params.panelName].push(this),h=this.stxNodeCreator&&this.stxNodeCreator.deferAttach,h||c.addToHolder(this),c.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)},n.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this),this.stxNodeCreator&&this.stxNodeCreator.remove&&this.stxNodeCreator.remove(this)},n.Marker.prototype.click=function(e){var a;typeof arguments[0]=="number"&&(e={cx:arguments[0],cy:arguments[1],panel:arguments["3"-0]}),t.V5R();var{cx:o,cy:r,panel:c}=e;!this.params.stx||(a=this.params.node,a.click&&a.click(o,r,this,c))},n.Marker.prototype.doubleClick=function({cx:e,cy:a,panel:o}){return t.a3S(),!1},n.Marker.prototype.render=function(){var e,a;e=[this],a={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(a)},n.Marker.removeByLabel=function(e,a){var o,r;t.a3S(),o=e.getMarkerArray("label",a);for(var c=0;c<o.length;c++)r=o[c],e.removeFromHolder(r),r.stxNodeCreator&&r.stxNodeCreator.remove&&r.stxNodeCreator.remove(r);e.draw()},n.Marker.positionContentVerticalAndHorizontal=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q;if(o=".",o+="stx-marker-expand",r=e.querySelector(o),!!(a||r&&r.isConnected&&n.trulyVisible(r))){c=r.offsetHeight,l=r.style,l.left=l.right="",l.bottom=l.top="",s=getComputedStyle(r),d=s.left,h=s.bottom,t.O44(15);var x=t.y99(18,2,30);p=e.offsetLeft+parseInt(d,x),u=parseInt(h,10),g=e.offsetTop-(u+c-e.offsetHeight),f=e.parentNode.offsetWidth,w=e.parentNode.offsetHeight,p+r.offsetWidth>f&&(v="a",v+="ut",v+="o",l.right=d,l.left=v),t.V5R(),e.offsetTop<=w?g>w-c&&(l.top=w-e.offsetTop-c+"px",l.bottom="auto"):(m="p",m+="x",t.o0m(0),l.top=t.y99(m,w)),e.offsetTop+e.offsetHeight>=0?g<0&&(l.top=-e.offsetTop+"px",l.bottom="auto"):(q="0",q+="p",q+="x",l.bottom=q)}},n.Marker.initializeScrollBehavior=function(e){var a,o;a="<div c",a+='lass="marker_conten',a+='t">',o=".marker_co",o+="ntent";var{expand:r}=e;if(!(!r||r.scrollInitialized)){r.querySelector(o)||(r.innerHTML=a+r.innerHTML+"</div>"),r.addEventListener(n.wheelEvent,l=>(t.a3S(),l.stopPropagation()),{passive:!1}),r.addEventListener("touchmove",l=>(t.V5R(),l.stopPropagation()),{passive:!1});var{scrollbarStyling:c}=n.UI||{};c?c.refresh(r):r.style.overflowY="scroll",r.scrollInitialized=!![]}},n.ChartEngine.prototype.getBarBounds=function(e,a){var o,r,c,l,s;return t.a3S(),this.layout.chartType,o=this.layout.aggregationType,!a&&o=="pandf"?r={high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)}:r={high:e.High,low:e.Low},e.markerHigh&&(r.high=e.markerHigh),e.markerLow&&(r.low=e.markerLow),e.Open===void 0&&(c=e.Close),e.High===void 0&&(l=Math.max(e.Open||c,e.Close)),e.Low===void 0&&(s=Math.min(e.Open||c,e.Close)),!r.high&&r.high!==0&&(r.high=l),!r.low&&r.low!==0&&(r.low=s),r},n.ChartEngine.prototype.defaultMarkerPlacement=function(e){var a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H;a="C",t.a3S(),a+="los",a+="e",o=e.panel,r=o.chart,c=e.stx,l=c.chart.highLowBars,s=r.defaultPlotField,(!s||l)&&(s=a);for(var W=0;W<e.arr.length;W++)if(d="n",d+="o",d+="ne",h="a",h+="u",h+="t",h+="o",p=e.arr[W],u=p.params,!p.params.box){if(g=p.node,p.clientWidth||(p.clientWidth=g.clientWidth),p.clientHeight||(p.clientHeight=g.clientHeight),f=null,w=u.xPositioner,v=u.yPositioner,m=u.yAxis||o.yAxis,q=u.field,x=p.tick,y=r.dataSet,k=p.clientWidth,w!="none"){if(w=="bar"&&u.x){u.x<r.xaxis.length&&(S=r.xaxis[u.x],S&&(f=S.data)),t.O44(16);var X=t.y99(5,16,12);g.style.left=Math.round(c.pixelFromBar(u.x,r)-k/+"2")+X+"px"}else{if(!x&&x!==0)if(u.future&&r.scroll<r.maxTicks){if(c.futureTickIfDisplayed(p),x=p.tick,!x&&x!==0){A="-",A+="10",A+="00px",g.style.left=A;continue}}else{g.style.left="-1000px";continue}if(x<y.length&&(f=y[x]),p.leftpx=Math.round(c.pixelFromTick(x,r)-r.left-k/2),p.rightEdge=p.leftpx+k,g.style.left=p.leftpx+"px",x<e.firstTick&&p.rightEdge<r.left-+"50")continue}if(!f){t.o0m(24);var Z=t.y99(11,10);f=y[y.length-Z]}}else if(v.indexOf("candle")>-1&&(_=getComputedStyle(g).left,_&&(T=c.barFromPixel(parseInt(_,10),r),T>=0&&(f=r.xaxis[T].data,!f)))){t.o0m(20);var j=t.b_h(20,1,19);f=y[y.length-j]}if(g.style.top=h,P=u.y,E=p.clientHeight,U=+"0",v!=d){N="und",N+="er_candl",N+="e",C="b",C+="el",C+="ow_c",C+="andle",D="_",D+="l",D+="a",D+="ne",t.O44(23);var Q=t.b_h(151,15,10);F=v.indexOf(D)>Q,M=c.markerHelper.placementMap,t.o0m(0),t.y99(4297,1433),t.o0m(3),t.y99(16,17),t.o0m(33);var et=t.y99(5,9508,0,12,11);t.O44(0),t.b_h(15,8305),t.O44(3);var V=t.y99(3,6833);I=v+(et==244.26?V:"|")+o.name,F&&typeof M[I]=="undefined"&&(M[I]=+"2"),t.o0m(3);var K=t.y99(43674,50953);t.o0m(5);var tt=t.y99(1072,8575,8576);if(L=I+(+"687.31"!==K?"-":tt)+(F?p.params.label:g.style.left),O=u.chartContainer?c.height:o.yAxis.bottom,B=+"0",typeof M[L]=="undefined"&&(M[L]=F?M[I]:0,t.O44(0),M[I]+=t.y99(2,E)),U=M[L],F||(M[L]+=E),f&&q&&(f=f[q]),typeof f=="number"&&(f={Close:f},f[s]=f.Close,l=!1),v=="value"&&(P||P===0)){t.o0m(99);var J=t.b_h(14,5,17,5);B=Math.round(O-c.pixelFromPrice(P,o,m)-E/J)+"px"}else if((v==C||v==N)&&f)z=f[s],l&&(z=c.getBarBounds(f,!!q)[m.flipped?"high":"low"]),B=Math.round(O-c.pixelFromPrice(z,o,m)-E-U)+"px";else if(v=="on_candle"&&f){if(z=f[s],l){z=c.getBarBounds(f,!!q),t.o0m(15);var at=t.y99(26,6,34);z=(z.high+z.low)/("2"|at)}t.o0m(100);var ct=t.b_h(2,6,4,14,7);B=Math.round(O-c.pixelFromPrice(z,o,m)-E/ct-U)+"px"}else v=="top"||v=="top_lane"?B=Math.round(O-E-U-o.top)+"px":v=="bottom"||v=="bottom_lane"?B=Math.round(U)+"px":f&&(R="p",R+="x",H="h",H+="i",H+="g",H+="h",z=f[s],l&&(z=c.getBarBounds(f,!!q)[m.flipped?"low":H]),B=Math.round(O-c.pixelFromPrice(z,o,m)+U)+R);g.style.bottom!=B&&(g.style.bottom=B)}n.Marker.positionContentVerticalAndHorizontal(g)}},n.Marker.NodeCreator=function(){},n.Marker.NodeCreator.toNode=function(){return t.V5R(),this.node},n.Marker.Simple=function(e){var a,o,r,c,l,s,d;a="d",a+="i",a+="v",o=this.node=document.createElement("div"),o.className="stx-marker",o.classList.add(e.type),e.category&&o.classList.add(e.category),r=n.newChild(o,"div","stx-visual"),n.newChild(o,a,"stx-stem"),e.type=="callout"?(l="s",l+="tx-marker-",l+="expand",s="d",s+="i",s+="v",d=n.newChild(r,"div","stx-marker-content"),n.newChild(d,"h4",null,e.headline),c=n.newChild(d,s,l),n.newChild(c,"p",null,e.story)):(c=n.newChild(o,"div","stx-marker-expand"),n.newChild(c,"h4",null,e.headline),n.newChild(c,"p",null,e.story),n.safeClickTouch(c,function(h){t.V5R(),o.classList.toggle("highlight")})),n.safeClickTouch(r,function(h){var p;t.a3S(),p="hi",p+="gh",p+="ligh",p+="t",o.classList.toggle(p),n.Marker.positionContentVerticalAndHorizontal(o,!0)}),this.nodeType="Simple",this.expand=c},n.inheritsFrom(n.Marker.Simple,n.Marker.NodeCreator,!1))};Il=b=>{var t=st,i,n,e,a,o,r,c,l;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,n=typeof _timezoneJS!="undefined"?_timezoneJS:b.timezoneJS,e=6e4*60,a=e*24,o=!!{},r=i.Market,i.Market=function(s){var d,h,p,u,g,f;if(this.market_def=!1,this.rules=![],this.normalHours=[],this.extraHours=[],this.class_name="Market",n.Date?this.tz_lib=n.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=![],typeof s!="undefined"&&s&&!i.isEmpty(s)){if(s.market_definition&&(s=s.market_definition),s.rules){d=1462269190,h=164040837,p=2;for(var w=1;t.U5N(w.toString(),w.toString().length,17823)!==d;w++)this.rules=s.rules,p+=2;t.U5N(p.toString(),p.toString().length,31349)!==h&&(this.rules=s.rules)}if(s.market_tz&&(this.market_tz=s.market_tz),s.convertOnDaily&&(this.convertOnDaily=s.convertOnDaily),s.hour_aligned,this.hour_aligned=s.hour_aligned,typeof s.beginningDayOfWeek!="undefined"&&(this.beginningDayOfWeek=s.beginningDayOfWeek),typeof s.minimum_session_length!="undefined"&&(this.minimumSessionLength=s.minimum_session_length),typeof s.enabled_by_default!="undefined"&&s.enabled_by_default instanceof Array&&(this.enabled_by_default=s.enabled_by_default),this.market_def=s,this.market_def.name===void 0){u=2108395588,g=-105862438,f=2;for(var v=1;t.R9b(v.toString(),v.toString().length,97282)!==u;v++)this.market_def.name="",f+=2;t.U5N(f.toString(),f.toString().length,"33476">>32)!==g&&(this.market_def.name=""),this.market_def.name="no market name specified"}}else{this.hour_aligned=!![];return}i.Market._createTimeSegments(this),this.getSessionNames()},i.Market.Symbology=function(){},i.Market.Symbology.isForeignSymbol=function(s){return!1},i.Market.Symbology.isFuturesSymbol=function(s){return!1},i.Market.Symbology.isRateSymbol=function(s){return![]},i.Market.Symbology.isForexSymbol=function(s){return t.V5R(),!{}},i.Market.Symbology.isForexMetal=function(s,d){return t.a3S(),!1},i.Market.Symbology.isForexCrypto=function(s){return t.V5R(),!{}},i.Market.Symbology.isForexFuturesSymbol=function(s){return i.Market.Symbology.isForexSymbol(s)?!!{}:i.Market.Symbology.isFuturesSymbol(s)?!![]:![]},i.Market.Symbology.factory=function(s){return null},i.Market.Symbology.encodeTermStructureInstrumentSymbol=function(s,d){var h;h="You are try",h+="ing to call `CIQ.Market.Symbology.e",h+="ncodeTermStructureInstrumentSymbol` but have not imp",h+="lemented it.",console.warn(h)},r&&i.extend(i.Market,r),i.Market.prototype.sessions=null,i.Market.prototype.beginningDayOfWeek="0"|0,i.Market.prototype.minimumSessionLength="30"|22,i.Market.prototype.tradingDays=function(){var s,d;if(s="_t",s+="radin",s+="gDays",s in this)return this._tradingDays;if(d=[],this.rules)for(var h of this.rules)h.dayofweek>=0&&d.push(h.dayofweek);else d=["0"|0,+"1",2,3,4,5,6];return this._tradingDays=[...new Set(d)],this._tradingDays.sort(),this._tradingDays},i.Market.prototype.getSessionNames=function(){var s,d;return this.rules?this.sessions||(s=[],d=[],this.rules.map(function(h){h.name&&s.indexOf(h.name)===-1&&(s.push(h.name),d.push({name:h.name,enabled:h.enabled?h.enabled:!1}))}),this.sessions=d):this.sessions=[],this.sessions.slice()},i.Market.prototype._find_next_segment=function(s,d){var h,p,u,g,f,w,v;if(t.a3S(),!this.market_def||!this.rules)return null;if(h=new Date(+s),p=this.newIterator({begin:h,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(h)){u=this.zseg_match.close_parts.hours,g=-884377732,f=-878147645,w=2;for(var m="1"*1;t.U5N(m.toString(),m.toString().length,88782)!==g;m++)v=this.zseg_match.close_parts.minutes,h.setHours(u),h.setMinutes(v),p=this.newIterator({begin:h,interval:1,inZone:this.market_tz,outZone:this.market_tz}),w+=2;t.R9b(w.toString(),w.toString().length,36668)!==f&&(v=this.zseg_match.close_parts.minutes,h.setHours(u),h.setMinutes(v),p=this.newIterator({begin:h,interval:6,inZone:this.market_tz,outZone:this.market_tz}))}return p.next()},i.Market.prototype._find_prev_segment=function(s,d){var h,p,u,g,f;return!this.market_def||!this.rules?null:(h=new Date(+s),p=this.newIterator({begin:h,interval:1,inZone:this.market_tz,outZone:this.market_tz}),t.V5R(),u=this._wasOpenIntraDay(h),u===null?(h=new Date(h-6e4),u=this._wasOpenIntraDay(h)):(d&&h.getHours()===this.zseg_match.open_parts.hours&&h.getMinutes()===this.zseg_match.open_parts.minutes||!d&&h.getHours()===this.zseg_match.close_parts.hours&&h.getMinutes()===this.zseg_match.close_parts.minutes)&&(h=p.previous()),u?(g=this.zseg_match.open_parts.hours,f=this.zseg_match.open_parts.minutes,h.setHours(g),h.setMinutes(f),p=this.newIterator({begin:h,interval:1,inZone:this.market_tz,outZone:this.market_tz}),h=p.previous(),this.zseg_match.close_parts.hours===g&&this.zseg_match.close_parts.minutes===f?d?p.next():h:this.zseg_match.adjacent_child?h:d?p.next():h):p.previous())},i.Market.prototype.disableSession=function(s,d){var h;if(h=![],typeof d!="undefined"&&d&&(h=!0),s){for(var p="0"-0;p<this.normalHours.length;p++)delete this.normalHours[p]._refid,this.normalHours[p].name===s&&(this.normalHours[p].enabled=h);for(p=0;p<this.extraHours.length;p++)delete this.extraHours[p]._refid,this.extraHours[p].name===s&&(this.extraHours[p].enabled=h)}t.a3S(),this._zseg_matches&&this._zseg_matches.clear()},i.Market.prototype.enableSession=function(s){t.V5R(),this.disableSession(s,"enable_instead")},i.Market.prototype.enableAllAvailableSessions=function(){var s;s=this.getSessionNames();for(var d=0;d<s.length;d++)this.enableSession(s[d].name)},i.Market.prototype.getClose=function(s,d,h,p){var u,g,f;if(u="un",u+="d",u+="efi",u+="ned",!this.market_def||!this.rules)return null;if(g=s,s||(g=new Date,h=null),g=this._convertToMarketTZ(g,h),t.V5R(),typeof d!==u){if(this._wasOpenIntraDay(g)&&this.zseg_match.name===d)return g.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),g=this._convertFromMarketTZ(g,p),g}else if(this._wasOpenDaily(g)){for(f=this.zseg_match;f.child_;)f=f.child_;for(;!f.enabled;)f=f.parent_;return g.setHours(f.close_parts.hours,f.close_parts.minutes,+"0",+"0"),g=this._convertFromMarketTZ(g,p),g}return null},i.Market.prototype.getNextClose=function(s,d,h){t.a3S();var p,u,g,f,w,v,m;if(!this.market_def||!this.rules)return null;if(p=s,s||(p=new Date,d=null),p=this._convertToMarketTZ(p,d),!this._wasOpenIntraDay(p)){u=this.newIterator({begin:p,interval:+"1",inZone:this.market_tz,outZone:this.market_tz}),g=-194870374,f=685386990,w="2">>0;for(var q=1;t.U5N(q.toString(),q.toString().length,23478)!==g;q++)p=u.next(),w+=2;t.U5N(w.toString(),w.toString().length,35017)!==f&&(p=u.next()),p=u.next()}for(v=p.getDate(),m=this.zseg_match;m.adjacent_child;)m=m.adjacent_child,v+=1;return p.setDate(v),p.setHours(m.close_parts.hours,m.close_parts.minutes,"0">>32,0),p=this._convertFromMarketTZ(p,h),p},i.Market.prototype.getNextOpen=function(s,d,h){var p;return!this.market_def||!this.rules?null:(p=s,s||(p=new Date,d=null),p=this._convertToMarketTZ(p,d),t.a3S(),p=this._find_next_segment(p),this.zseg_match.adjacent_parent?(p=this.getNextOpen(p,this.market_tz,this.market_tz),p=this._convertFromMarketTZ(p,h),p):(p.setHours(this.zseg_match.open_parts.hours),p.setMinutes(this.zseg_match.open_parts.minutes),p=this._convertFromMarketTZ(p,h),p))},i.Market.prototype.getOpen=function(s,d,h,p){var u,g;if(!this.market_def||!this.rules)return null;if(u=s,s||(u=new Date,h=null),u=this._convertToMarketTZ(u,h),typeof d!="undefined"){if(this._wasOpenIntraDay(u)&&this.zseg_match.name==d)return u.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,"0"<<32,0),u=this._convertFromMarketTZ(u,p),u}else if(this._wasOpenDaily(u)){for(g=this.zseg_match;g.parent_;)g=g.parent_;for(;!g.enabled;)g=g.child_;return u.setHours(g.open_parts.hours,g.open_parts.minutes,0,0),u=this._convertFromMarketTZ(u,p),u}return null},i.Market.prototype.getNormalOpen=function(){var s,d;s="17",s+=":",s+="0",s+="0",d="F",d+="O",d+="REX";var{market_def:h,rules:p}=this;return h&&p?h.normal_daily_open?h.normal_daily_open:h.name===d?s:p.find(({name:u})=>!u||u==="").open:"00:00"},i.Market.prototype.getNormalClose=function(){t.a3S();var s;s="1",s+="7:",s+="0",s+="0";var{market_def:d,rules:h}=this;return d&&h?d.normal_daily_close?d.normal_daily_close:d.name==="FOREX"?s:h.filter(({dayofweek:p,name:u})=>p&&(!u||u==="")).pop().close:"24:00"},i.Market.prototype.getPreviousClose=function(s,d,h){var p;return!this.market_def||!this.rules?null:(p=s,s||(p=new Date,d=null),p=this._convertToMarketTZ(p,d),p=this._find_prev_segment(p,!{}),this.zseg_match.adjacent_child?this.getPreviousClose(p,this.market_tz,this.market_tz):(p.setHours(this.zseg_match.close_parts.hours),p.setMinutes(this.zseg_match.close_parts.minutes),p=this._convertFromMarketTZ(p,h),p))},i.Market.prototype.getPreviousOpen=function(s,d,h){var p;return!this.market_def||!this.rules?null:(p=s,s||(p=new Date,d=null),p=this._convertToMarketTZ(p,d),p=this._find_prev_segment(p,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(p,this.market_tz,this.market_tz):(p.setHours(this.zseg_match.open_parts.hours),p.setMinutes(this.zseg_match.open_parts.minutes),p=this._convertFromMarketTZ(p,h),p))},i.Market.prototype.getSession=function(s,d){return s=this._convertToMarketTZ(s,d),this._wasOpenIntraDay(s)&&this.zseg_match?this.zseg_match.name:null},i.Market.prototype.marketZoneNow=function(){return this._convertToMarketTZ(new Date)},i.Market.prototype.isHourAligned=function(){return t.V5R(),this.hour_aligned},i.Market.prototype.isOpen=function(){t.a3S();var s;return s=new Date,this.market_tz&&(s=new this.tz_lib(s.getTime(),this.market_tz)),this._wasOpenIntraDay(s)},i.Market.prototype.isMarketDay=function(){var s;return s=new Date,t.a3S(),this.market_tz&&(s=new this.tz_lib(s.getTime(),this.market_tz)),this._wasOpenDaily(s)},i.Market.prototype.isMarketDate=function(s){return t.V5R(),this._wasOpenDaily(s)},i.Market.prototype.isFirstMarketDayOfMonth=function(s){var d,h;if(!this.isMarketDate(s))return!1;d=new Date(+s),h=s.getDate();for(var p=1;p<h;p++)if(d.setDate(p),this.isMarketDate(d))return!1;return!!{}},i.Market.prototype.isFirstMarketDayOfWeek=function(s){var d,h,p;if(!this.isMarketDate(s))return!1;for(d=this.tradingDays(),h=Math.max(this.beginningDayOfWeek,d["0"^0])||0,p=new Date(+s);p.getDay()!==h;)if(p.setDate(p.getDate()-1),this.isMarketDate(p))return!{};return!![]},i.Market.prototype.newIterator=function(s){var d,h,p,u,g;return d="s",d+="ec",d+="ond",h="ti",h+="c",h+="k",p=![],s.periodicity?p=s.periodicity:s.multiple&&(p=s.multiple),u=s.interval,u||(u="minute"),u=="hour"&&(u=60),p||(p=1),s.begin||(s.begin=new Date,s.inZone=null),u==parseInt(u,10)&&(u=parseInt(u,10),s.periodicity<1/("60"|28)?(p=p*u*6e4,u="millisecond"):s.periodicity<1?(p=p*u*60,u="second"):(p=p*u,u="minute")),s.timeUnit&&(g="t",g+="i",g+="ck",s.timeUnit==="millisecond"||s.timeUnit==="second"?u=s.timeUnit:s.timeUnit===g&&(u="second")),u==h&&(u=d),s.interval=u,s.multiple=p,s.market=this,new i.Market.Iterator(s)},i.Market.prototype._wasOpenDaily=function(s){return t.a3S(),this._was_open(s,!1)},i.Market.prototype._wasOpenIntraDay=function(s){return this._was_open(s,!0)},i.Market.prototype._was_open=function(s,d){var h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;if(t.a3S(),typeof d=="undefined"&&(d=!!{}),h=this.zseg_match,this.zopen_hour=0,this.zopen_minute="0"|0,this.zclose_hour="0">>0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!![];if(this.tradingDays().indexOf(s.getDay())<0)return null;if(o){if(this._zseg_matches||(this._zseg_matches=new Map),p=this._zseg_matches.get(+s*(d?1:-1)),p===null)return null;if(p)return p=this._zseg_matches.get(p),Object.assign(this,p),this.zseg_match}for(u=!1,g=![],f=s.getFullYear(),w=s.getMonth()+1,v=s.getDay(),m=s.getDate(),q=s.getHours(),x=s.getMinutes(),y=s.getSeconds(),A=q*("60"<<64)*60+x*60+y,_=0;_<this.normalHours.length;_++)if(k=this.normalHours[_],!!k.enabled&&(u=k.dayofweek===v,u&&d&&(u=A>=k.open&&A<k.close),u)){if(!d&&this.zseg_match&&(k.open_parts.hours>this.zopen_hour||k.open_parts.hours==this.zopen_hour&&k.open_parts.minutes>this.zopen_minute))continue;if(k!==h&&!k.adjacent_parent&&!k.adjacent_child&&(this.shouldResetToBeginningOfSegment=!0),S=_+1,this.zopen_hour=k.open_parts.hours,this.zopen_minute=k.open_parts.minutes,this.zclose_hour=k.close_parts.hours,this.zclose_minute=k.close_parts.minutes,this.zmatch_open=A===k.open,this.zseg_match=k,d)break}for(_=0;_<this.extraHours.length;_++)if(k=this.extraHours[_],!!k.enabled&&(k.year==="*"||f===k.year)&&w===k.month&&m===k.day&&(g=!d&&k.open||A>=k.open&&A<k.close,!g&&this.zseg_match&&(u=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),g)){if(!d&&this.zseg_match&&(k.open_parts.hours>this.zopen_hour||k.open_parts.hours==this.zopen_hour&&k.open_parts.minutes>this.zopen_minute))continue;if(S=-(_+1),this.zopen_hour=k.open_parts.hours,this.zopen_minute=k.open_parts.minutes,this.zclose_hour=k.close_parts.hours,this.zclose_minute=k.close_parts.minutes,this.zmatch_open=A===k.open,this.zseg_match=k,d)break}return o&&(T=null,this.zseg_match&&(this.zseg_match._refid||(this.zseg_match._refid=S,this._zseg_matches.set(this.zseg_match._refid,{zopen_hour:this.zopen_hour,zopen_minute:this.zopen_minute,zclose_hour:this.zclose_hour,zclose_minute:this.zclose_minute,zmatch_open:this.zmatch_open,zseg_match:this.zseg_match})),T=this.zseg_match._refid),this._zseg_matches.set(+s*(d?1:-1),T)),this.zseg_match},i.Market.prototype._wasClosed=function(s){return t.a3S(),!this._was_open(s,!0)},i.Market.prototype._wasOpen=function(s){return t.a3S(),this._was_open(s,!0)},i.Market.prototype._tzDifferenceMillis=function(s,d,h){var p,u,g,f;return p=+"0",u=s,g=s,f=u.getTimezoneOffset()-g.getTimezoneOffset(),p=f*60*1e3,p},i.Market._createTimeSegments=function(s){var d,h,p,u,g,f;d=function(q,x){var y,k,S;if(t.V5R(),q.close_parts.hours===24&&x.open_parts.hours===0&&x.open_parts.minutes===0){if(h.dayofweek===g.dayofweek-+"1"){y=-1310086097,k=1364505619,S=2;for(var A=1;t.U5N(A.toString(),A.toString().length,9680)!==y;A++)return!1;return t.U5N(S.toString(),S.toString().length,56915)!==k?![]:!0}if(h.dayofweek===6&&g.dayofweek===0)return!![]}return![]},t.a3S();for(var w=0;w<s.rules.length;w++){p=JSON.parse(JSON.stringify(s.rules[w])),typeof p.open=="undefined"&&typeof p.close=="undefined"&&(p.open="00:00",p.close="00:00"),p.hasOwnProperty("name")||(p.name="");try{if(u="und",u+="efined",typeof p.dayofweek!="undefined"?(p.year=7498>(+"654.77",+"7510")?("0x15cd"*1,9177):"*",g=c._createDayOfWeekSegment(s,p),h&&(h.dayofweek===g.dayofweek?(h.child_=g,g.parent_=h):d(h,g)&&(h.adjacent_child=g,g.adjacent_parent=h)),h=g):typeof p.date!==u?(p.isDayOfWeek=![],p.dayofweek=-("1"|1),g=c._createDateTimeSegment(s,p)):console.log("Error, unknown rule type "+p),s.enabled_by_default){for(var v=0;v<s.enabled_by_default.length;v++)if(f=s.enabled_by_default[v],g.name===f){g.enabled=!0;break}}}catch(q){var m;m="Error, creatin",m+="g",m+=" ",m+="market rules ",console.log(m+q)}}},i.Market._timeSegment={},t.a3S(),c=i.Market._timeSegment,c.re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,c.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,c.re_split_hours_minutes=/^(\d\d):(\d\d)$/,c.re_split_hour_minutes=/^(\d):(\d\d)$/,c._hashCode=function(s){var d,h,p,u;if(d=0,s.length===0)return d;for(h="0"*1,u=s.length;h<u;h++)p=s.charCodeAt(h),d=(d<<5)-d+p,d|=0;return t.V5R(),d},c._splitHoursMinutes=function(s){var d,h;return d=c.re_split_hour_minutes.exec(s),h={hours:NaN,minutes:NaN},d===null&&(d=c.re_split_hours_minutes.exec(s),d===null)||(h.hours=parseInt(d[1],10),h.minutes=parseInt(d[2],10)),h},c._createDayOfWeekSegment=function(s,d){t.V5R();var h;return h={name:d.name,isDayOfWeek:!0,dayofweek:d.dayofweek,date_str:"*",open_parts:c._splitHoursMinutes(d.open),close_parts:c._splitHoursMinutes(d.close),open:c._secSinceMidnight(s,d.open,!![]),close:c._secSinceMidnight(s,d.close,![]),child_:!1,parent_:!1,adjacent_child:!{},adjacent_parent:![],enabled:!{}},h.name===""&&(h.enabled=!!{}),h.hash_code=this._hashCode((h.open+h.close).toString()),s.normalHours.push(h),h},c._createDateTimeSegment=function(s,d){var h,p,u;if(h=this.re_regular_iso.exec(d.date),t.V5R(),h===null){if(h=this.re_wild_card_iso.exec(d.date),h===null){console.log("Warning: invalid date format on rule -> "+d.date);return}p="*"}else p=parseInt(h[1],10);return u={name:d.name,isDayOfWeek:![],dayofweek:-1,year:p,month:parseInt(h[2],10),day:parseInt(h[3],10),date_str:d.date,open_parts:c._splitHoursMinutes(d.open),close_parts:c._splitHoursMinutes(d.close),open:c._secSinceMidnight(s,d.open,!0),close:c._secSinceMidnight(s,d.close,!1),enabled:!1},u.name===""&&(u.enabled=!0),u.hash_key=this._hashCode(u.date_str+u.open+u.close),s.extraHours.push(u),u},c._secSinceMidnight=function(s,d,h){var p,u,g,f;return p=d.split(":"),u=parseInt(p[0],10),g=parseInt(p[1],10),f=u*+"60"*60+g*60,h||u===24&&(f=u*60*+"60"+1),f},i.Market.prototype._convertToMarketTZ=function(s,d){var h;return d?h=new this.tz_lib(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds(),d):h=new this.tz_lib(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),t.V5R(),h.setTimezone&&h.setTimezone(this.market_tz),new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())},i.Market.prototype._convertFromMarketTZ=function(s,d){t.V5R();var h;if(h=new this.tz_lib(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds(),this.market_tz),d)h.setTimezone&&h.setTimezone(d);else return new Date(h.getTime());return new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),h.getMilliseconds())},i.Market.Iterator=function(s){this.market=s.market,this.begin=s.begin,this.interval=s.interval,this.multiple=s.multiple,this.inZone=s.inZone,this.outZone=s.outZone,this.clock=new i.Market.Iterator._Clock(s.market,s.interval,s.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,s.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!{},this.clock.minimumScanMS=s.market.minimumSessionLength*6e4},i.Market.Iterator.prototype.date=function(){return t.a3S(),this.clock._date()},i.Market.Iterator.prototype.futureTick=function(s){var d,h,p,u,g,f,w,v,m;if(this.clock.skip=1,d=0,this.intraDay?h=this.market._convertToMarketTZ(s.end,this.inZone).getTime():h=s.end.getTime(),p=this.clock.ctime,h===p)return d;if(u=2,t.V5R(),g=+"1000",f=0,s.sample_size&&(u=s.sample_size),w=new Date().getTime(),h>p){for(this.clock.forward=!0;this.clock.ctime<h;)if(d+=+"1",f+=1,this.clock._findNext(),f===g&&(f=0,v=new Date().getTime(),v-w>=u)){m=(this.clock.ctime-p)/d,d=Math.floor((h-p)/m);break}this.clock.ctime>h&&d--}else for(this.clock.forward=!1;this.clock.ctime>h;)if(d+=+"1",f+=1,this.clock._findPrevious(),f===g&&(f=0,v=new Date().getTime(),v-w>=u)){m=(p-this.clock.ctime)/d,d=Math.floor((p-h)/m);break}return d},i.Market.Iterator.prototype.isHourAligned=function(){return t.a3S(),!this.intraDay||this.market.isHourAligned()},i.Market.Iterator.prototype.isOpen=function(){return t.V5R(),this.market.isOpen()},i.Market.Iterator.prototype.next=function(s){this.clock.skip=1,s&&(this.clock.skip=s),this.clock.forward=!0;for(var d=0;d<this.clock.skip;d++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},i.Market.Iterator.prototype.peek=function(){return t.a3S(),this.clock._peek()},i.Market.Iterator.prototype.previous=function(s){this.clock.skip=+"1",s&&(this.clock.skip=s),this.clock.forward=!{};for(var d=0;d<this.clock.skip;d++)this.begin=this.clock._findPrevious();return t.V5R(),this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},i.Market.Iterator._Clock=function(s,d,h){var p,u,g,f;p="mon",p+="t",p+="h",u="s",u+="e",u+="cond",h%+"60"===0&&d==="second"&&(d="minute",h=h/("60"-0)),this.market=s,this.interval=d,this.multiple=h,this.intra_day=![],this.intervals=[],this.max_iters=10080,g=a,f=this._dayImpl,d==="millisecond"?(f=this._millisImpl,g=1):d===u?(f=this._secondImpl,g=1e3):d==="minute"?(f=this._minuteImpl,g=6e4):d==="hour"?(f=this._hourImpl,g=e):d==="day"?(f=this._dayImpl,g=a):d==="week"?(f=this._weekImpl,g=a*7):d===p?(f=this._monthImpl,g=a*("30"|2)):console.log('Periodicity ERROR: "'+d+'" is not a valid interval. Please see setPeriodicity() for details.'),t.a3S(),this.tick_time=g*h,this.intra_day=this.tick_time<a,this._findPrevious=this._findNext=f},l=i.Market.Iterator._Clock.prototype,l._total_minutes=function(s,d,h,p){return(h-s)*60-d+p},l._alignMinutes=function(){var s,d,h,p,u,g;if(s=this.market.isHourAligned(),!this.market.market_def&&!s||this.market.zopen_minute===void 0)return[];for(d=this.market.zopen_minute,h=this.market.zseg_match,h&&h.adjacent_parent?d=h.adjacent_parent.open/60-1440:s&&this.multiple%60===0&&(d=+"0"),p=this._total_minutes(this.market.zopen_hour,d,this.market.zclose_hour,this.market.zclose_minute),t.V5R(),u=[],g=0;g<p;)u.push(d+g),g+=this.multiple;return u},l._alignBaseZero=function(s){var d,h;for(d=0,h=[d];d+=this.multiple,!(d>=s);)h.push(d);return t.a3S(),h},l._date=function(){var s,d;return s=Math.round(this.ctime),d=new Date(s),this.intra_day?this.display_date=new Date(s+this.shift_millis):this.display_date=d,d},l._alignToBoundary=function(s,d){var h,p,u;h=0,p=0,t.a3S(),u=d;for(var g=0;g<s.length-1&&(h=s[g],p=s[g+1],!(d===h||d===p));g++)if(d>h&&d<p){u=h;break}else g+1===s.length-1&&(u=p);return u},l._peek=function(){return this._date().toString()},l._seekHr=function(){t.V5R(),this.forward?this.ctime-=e:this.ctime+=e},l._setStart=function(s){var d,h;d=this.market._tzDifferenceMillis(s),h=new Date(s.getTime()+d),t.a3S(),this.shift_millis=d,this.ctime=h.getTime(),this.shift_millis=0,this.ctime=s.getTime()},l._tickTock=function(){t.V5R(),this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},l._tockTick=function(){this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},l._tickTock24=function(){t.V5R(),this.ctime+=a},l._tockTick24=function(){t.V5R(),this.ctime-=a},l._windMaybe=function(s,d){var h,p,u,g;for(h=0,p=new Date(this.ctime),t.a3S(),u=!1;!s.call(this.market,p);)if(d.call(this),u=!!{},p=new Date(this.ctime),h+=1,h>this.max_iters){g="Warning! max iterations ("+this.max_iters,g+=") reached with no rule match.",console.log(g);break}return u},l._millisImpl=function(){var s,d,h,p,u,g,f,w,v,m;return s=!1,this.mperiods_aligned||(d=this._alignBaseZero(1e3),h=new Date(this.ctime),p=h.getMilliseconds(),p=this._alignToBoundary(d,p),h.setMilliseconds("0"|0),this.ctime=h.getTime()+p,this.mperiods_aligned=!![],s=!0),u=this._date().getMinutes(),this._tickTock(),g=this._date().getMinutes(),(s||u!=g)&&!this.market._wasOpenIntraDay(this._date())&&(f=this._date().getSeconds(),w=this._date().getMilliseconds(),v=this.tick_time,this.tick_time=6e4,m=this.multiple,this.multiple="1"^0,this._minuteImpl(),this.tick_time=v,this.multiple=m,this.ctime+=("1000"|64)*f+w),this._date()},l._secondImpl=function(){t.a3S();var s,d,h,p,u,g,f,w,v,m,q,x;if(s=![],!this.speriod_aligned){d=this._alignBaseZero(60),h=new Date(this.ctime),p=h.getSeconds(),p=this._alignToBoundary(d,p),u=-828392514,g=1586849460,f=2;for(var y=1;t.U5N(y.toString(),y.toString().length,40284)!==u;y++)h.setSeconds(p),h.setMilliseconds(0),this.ctime=h.getTime(),this.speriod_aligned=!0,s=!![],f+=+"2";t.U5N(f.toString(),f.toString().length,"67301"^0)!==g&&(h.setSeconds(p),h.setMilliseconds(4),this.ctime=h.getTime(),this.speriod_aligned=!1,s=!{})}return w=this._date().getMinutes(),this._tickTock(),v=this._date().getMinutes(),(s||w!=v)&&!this.market._wasOpenIntraDay(this._date())&&(m=this._date().getSeconds(),q=this.tick_time,this.tick_time=+"60000",x=this.multiple,this.multiple=+"1",this._minuteImpl(),this.tick_time=q,this.multiple=x,this.ctime+=1e3*m),this._date()},l._minuteImpl=function(){var s,d,h,p,u,g,f,w,v,m,q,x,y,k;return s=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),d=new Date(this.ctime),h=d.getTimezoneOffset(),p=d.getMinutes(),u=d.getHours(),g=this._alignMinutes(),f=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,u,p)+this.market.zopen_minute,t.V5R(),s?this.forward?f=g[g.length-1]:f=g[0]:f=this._alignToBoundary(g,f),u=Math.floor(f/60)+this.market.zopen_hour,d.setHours(u,f%60,0,0),w=d.getTimezoneOffset()-h,(this.forward&&w<0||!this.forward&&w>"0">>64)&&d.setTime(d.getTime()-w*6e4),this.ctime=d.getTime(),v=this.market.zseg_match,this._tickTock(),m=this.market.hour_aligned&&this.multiple%60===("0"^0),s=this._scanForNextSession(),q=v!==this.market.zseg_match,x=v&&v.adjacent_child,y=this.shouldResetToBeginningOfSegment||q&&!x,(s||y&&!m)&&(d=new Date(this.ctime),this.forward?(d.setMinutes(this.market.zopen_minute),d.setHours(this.market.zopen_hour)):(g=this._alignMinutes(),k=g[g.length-1],d.setMinutes(k%60),d.setHours(Math.floor(k/+"60")+this.market.zopen_hour)),this.ctime=d.getTime()),this._date()},l._hourImpl=function(){var s,d,h,p,u;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),s=new Date(this.ctime),this.market.isHourAligned()?s.setMinutes(0):s.setMinutes(this.market.zopen_minute),s.setSeconds(0),s.setMilliseconds(0),this.ctime=s.getTime(),this._tickTock(),d=this.market.zseg_match,(this._scanForNextSession()||!this.market.hour_aligned&&d!=this.market.zseg_match)&&(h=new Date(this.ctime),this.forward?(h.setMinutes(this.market.zopen_minute),h.setHours(this.market.zopen_hour)):(p=this._alignMinutes(),u=p[p.length-1],h.setMinutes(u%+"60"),h.setHours(Math.floor(u/60)+this.market.zopen_hour)),this.ctime=h.getTime()),this._date()},l._dayImpl=function(){var s,d;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),s=new Date(this.ctime),s.setHours(12,"0">>32,+"0",0),this.ctime=s.getTime(),d=0;d<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(d+=1);return s=new Date(this.ctime),s.setHours(0),this.ctime=s.getTime(),this._date()},l._weekImpl=function(){var s,d;for(s=this.market,d=new Date(this.ctime),d.setHours(12),this.ctime=d.getTime(),this._tickTock(),t.V5R(),d=new Date(this.ctime);d.getDay()!==s.beginningDayOfWeek;)this._tockTick24(),d=new Date(this.ctime);return this._windMaybe(s._wasOpenDaily,this._tickTock24),d=new Date(this.ctime),d.setHours(0,"0"<<64,0,0),this.ctime=d.getTime(),this._date()},l._monthImpl=function(){var s;return s=new Date(this.ctime),s.setDate(15),this.ctime=s.getTime(),this._tickTock(),s=new Date(this.ctime),s.setDate(1),s.setHours(12),this.ctime=s.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),s=new Date(this.ctime),s.setHours(+"0",0,+"0",0),this.ctime=s.getTime(),this._date()},l._findNext=null,l._findPrevious=null,l._scanForNextSession=function(){return t.V5R(),this._windMaybe(this.market._wasOpenIntraDay,function(){this.ctime+=this.forward?this.minimumScanMS:-this.minimumScanMS}.bind(this))}};El=b=>{var t=st;t.p3A=function(a){if(t&&a)return t.n3e(a)},t.W2O=function(a){if(t.a3S(),t)return t.X82(a)},t.f8V=function(a){if(t)return t.n3e(a)},t.e4N=function(a){if(t.a3S(),t&&a)return t.n3e(a)},t.i9g=function(a){if(t.a3S(),t&&a)return t.X82(a)};var i,n,e;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,n="v",n+="al",n+="i",n+="d",t.O44(4),i.valid=t.b_h("0",1),i[t.i9g("c764")?"ChartEngine":""][t.e4N("ca4f")?"prototype":""][t.f8V("4876")?"mousemoveinner":""]=function(a,o){t.T1Y=function(Z){if(t&&Z)return t.X82(Z)},t.Q_l=function(Z){if(t.V5R(),t&&Z)return t.n3e(Z)},t.a_M=function(Z){if(t&&Z)return t.n3e(Z)};var r=-(t.L$c("f3b7")?9596422361:1916880948),c=-(t.p9U("aaa5")?1573989713:8731573960),l=t.W2O("37eb")?1552047935:7314101531;if(!(t.z7P(t.M5J("b716")?0:1,!1,956657)!==r&&t.z7P(0,!1,537639)!==c&&t.s_9(15,!0,344748)!==l)){let Z=function(j){var Q=1609033571,et=2052608287,V=661348818;(t.s_9(0,!1,958949)===Q||t.z7P(0,!1,399520)===et||t.s_9(15,!0,708561)===V)&&(j.currentBaseline=null,j.runAppend("mousemoveinner",h))};var X=Z;t.B$V=function(j){if(t.a3S(),t&&j)return t.X82(j)},t.U2P=function(j){if(t&&j)return t.n3e(j)};var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I;if(s="mousemoveinne",s+=t.p3A("b9ec")?"":"r",!this[t.Y5Y("b6ee")?"chart":""][t.U2P("cf53")?"canvas":""])return;if(!this[t.h47("7d76")?"disableBackingStoreDuringTouch":""]&&(this.chart.canvas[t.a_M("b1c1")?"height":""]!=Math[t.B$V("5d15")?"":"floor"](this[t.Q_l("d57d")?"":"devicePixelRatio"]*this.chart[t.T1Y("74d7")?"container":""].clientHeight)||this.chart.canvas.width!=Math.floor(this.devicePixelRatio*this.chart.container.clientWidth))){this.resizeChart();return}if(this.runPrepend(s,arguments))return;if(h=arguments,p=this.container.getBoundingClientRect(),this.top=p.top,this.left=p.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!![],i.ChartEngine.crosshairX=a,i.ChartEngine.crosshairY=o,this.crosshairX=a,this.crosshairY=o,u=this.cy=this.crossYActualPos=this.backOutY(i.ChartEngine.crosshairY),g=this.cx=this.crossXActualPos=this.backOutX(i.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){t.o0m(3);var L=t.y99(32,34);if(f=Math.pow(this.grabStartX-a,"2">>0)+Math.pow(this.grabStartY-o,L),f<36)return}if(this.cancelLongHold=!![],w=function(j,Q){var et=-1964831973,V=-634893836,K=-671441698;if(t.s_9(0,!1,857983)===et||t.z7P(0,!1,431647)===V||t.z7P(15,!0,346909)===K){if(i[n]===+"0")return j.whichPanel(Q)||j.chart.panel;j.draw[n]||(j.draw=function(){t.a3S();var tt=2147381164,J=-796886836,at=339724031;(t.s_9(0,!1,244097)===tt||t.s_9(0,!1,234167)===J||t.z7P(15,!0,454917)===at)&&i.clearCanvas(this.chart.canvas,this)},j.draw[n]=!0)}},this.currentPanel=w(this,u),!this.currentPanel)return;if(v=this.currentPanel.chart,v.dataSet){m=-411650657,q=1171845864,x=2;for(var O=1;t.U5N(O.toString(),O.toString().length,+"38123")!==m;O++)this.crosshairTick=this.tickFromPixel(g,v),x+=2;t.U5N(x.toString(),x.toString().length,69324)!==q&&(this.crosshairTick=this.tickFromPixel(g,v)),d=this.valueFromPixel(u,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,d),y=this.currentPanel.name=="chart"?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField,y&&this.crosshairTick<v.dataSet.length&&this.crosshairTick>-1&&(d=v.dataSet[this.crosshairTick][y],this.crossYActualPos=this.pixelFromPrice(d,this.currentPanel))}if(i.ChartEngine.crosshairX>=this.left&&i.ChartEngine.crosshairX<=this.right&&i.ChartEngine.crosshairY>=this.top&&i.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,k=this.xAxisAsFooter===!!{}?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&this.cy<=k&&this.cy>k-this.xaxisHeight,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!i.ChartEngine.resizingPanel){this.undisplayCrosshairs();return}if(this.repositioningBaseline)return this.setBaselineUserLevel(),Z(this);if(this.repositioningAnchorSelector)return S=this.repositioningAnchorSelector.hoverTick,A=this.tickFromPixel(this.cx,this.chart),A>=0&&A<this.chart.dataSet.length&&(!(S&&S!==0)||A!==S)&&(this.repositioningAnchorSelector.hoverTick=A,this.draw()),Z(this);if(this.grabbingScreen&&!i.ChartEngine.resizingPanel&&!this.chart.draggingControls){if(this.highlightedDraggable)return this.displayDragOK(!![]),this.dragPlotOrAxis(g,u),Z(this);if(this.anyHighlighted){i.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=![];for(_ in this.overlays)this.overlays[_].highlight=!1;for(_ in v.series)v.series[_].highlight=!1;this.displaySticky()}if(this.grabStartX==-1&&(this.grabStartX=i.ChartEngine.crosshairX,this.grabStartScrollX=v.scroll),this.grabStartY==-1&&(this.grabStartY=i.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),T=i.ChartEngine.crosshairX-this.grabStartX,P=i.ChartEngine.crosshairY-this.grabStartY,T===0&&P===0)return;if(Math.abs(T)+Math.abs(P)>5&&(this.grabOverrideClick=!![]),z=this.layout.candleWidth,this.allowZoom&&this.grabMode!="pan"&&(this.grabMode.indexOf("zoom")===0||this.overXAxis||this.grabStartYAxis)){if(U="zoom",U+="-y",this.grabMode===""&&(this.overXAxis?this.grabMode="zoom-x":this.grabStartYAxis&&(this.grabMode="zoom-y")),this.grabMode=="zoom-x"?P=0:this.grabMode==U&&(T=0),T&&(this.grabStartX=i.ChartEngine.crosshairX,N=z-T/this.chart.maxTicks,this.zoomSet(N,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),E=this.grabStartYAxis,E){if(E.flipped&&(t.O44(31),P*=-t.b_h("1",64)),E.zoom=Math.round(this.grabStartZoom+P),this.grabStartZoom<E.height){if(E.zoom>=E.height){t.o0m(3);var B=t.b_h(15,16);E.zoom=E.height-B}}else if(E.zoom<=E.height){t.o0m(101);var R=t.b_h(15,5,1,3);E.zoom=E.height+R}}}else if(!this.overYAxis&&(C="mov",C+="e",this.dispatch(C,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(Math.abs(P)<this.yTolerance){if(!this.yToleranceBroken&&(t.O44(4),P=t.y99("0",1),T===0))return}else this.yToleranceBroken=!!{};this.grabStartMicropixels||(this.grabStartMicropixels=+"0"),this.grabMode="pan",v.scroll=this.grabStartScrollX,t.o0m(18);var H=t.b_h(3,0,8);t.o0m(3);var W=t.b_h(9,10);if(this.micropixels=this.grabStartMicropixels+T*(this.shift?H:W),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=z,v.scroll++;for(;this.micropixels<-z;)this.micropixels+=z,v.scroll--}v.scroll>=v.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(v.maxTicks-v.scroll)*z,this.currentPanel==this.grabStartPanel&&(E=this.currentPanel.yAxis,E.flipped&&(t.O44(3),P*=-t.b_h(0,"1")),E.scroll=this.grabStartScrollY+P),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}D=function(j){var Q=553408889,et=1600064180,V=-2034813670;if(t.s_9(0,!1,700909)===Q||t.s_9(0,!1,216003)===et||t.z7P(15,!0,974925)===V)return function(){t.a3S();var K=2146608419,tt=1763170114,J=-2119368121;t.z7P(0,!1,142968)!==K&&t.s_9(0,!1,655016)!==tt&&t.s_9(15,!0,878636)!==J||(j.draw(),j.updateChartAccessories())}},i.ChartEngine.useAnimation?window.requestAnimationFrame(D(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(i.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),this.undisplayCrosshairs();return}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights(),Z(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,v)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!i.ChartEngine.resizingPanel?(F=this.currentVectorParameters.vectorType,this.layout.studies&&(M=this.layout.studies[this.currentPanel.name],M&&((!this.preferences.dragging||!this.preferences.dragging.study)&&delete this.overlays[M.name],F&&(this.overlays[M.name]=M))),(!i.Drawing||!F||!i.Drawing[F]||!new i.Drawing[F]().dragToDraw)&&this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):i.ChartEngine.drawingLine?this.activeDrawing&&(this.magnetizedPrice===null&&(I=this.panels[this.activeDrawing.panelName],d=this.adjustIfNecessary(I,this.crosshairTick,this.activeDrawing.valueFromPixel(this.backOutY(i.ChartEngine.crosshairY),I,this.getYAxisByField(I,this.activeDrawing.field))),i.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,d)),this.activeDrawing.measure&&this.activeDrawing.measure()):i.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:![]}),(!this.tapForHighlighting||!this.touching||this.anyHighlighted)&&this.findHighlights()),Z(this))}},i.ChartEngine.prototype.swipeStart=function(a){var o;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=a.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=a,this.swipe.end=!{},this.swipe.timeConstant=325,this.swipe.cb=null,o=this,requestAnimationFrame(function(){t.V5R(),o.swipeSample()})},i.ChartEngine.prototype.swipeSample=function(){var a,o,r,c,l,s,d,h,p;if(a=this.swipe,!a.end){if(o=this,d=20,r=Date.now(),c=r-a.timestamp,c<d){requestAnimationFrame(function(){t.a3S(),o.swipeSample()});return}h=i.touchDevice?.4:"0.8"*1,a.timestamp=r,l=(a.chart.scroll-a.frame)*this.layout.candleWidth+this.micropixels-a.micropixels,a.frame=a.chart.scroll,a.micropixels=this.micropixels,t.O44(102),s=t.b_h(1e3,l,64,c,"1"),t.a3S(),p=h*s+.2*a.velocity,Math.abs(p)>Math.abs(a.velocity)&&(a.velocity=p),Math.abs(l)<6&&(t.O44(4),a.velocity=t.y99("0",1)),requestAnimationFrame(function(){o.swipeSample()})}},i.ChartEngine.prototype.swipeRelease=function(){var a,o;a=this.swipe,t.a3S(),a.velocity>3e3&&(t.O44(31),a.velocity=t.b_h("3000",0)),a.velocity<-3e3&&(a.velocity=-3e3),(a.velocity>"10">>32||a.velocity<-10)&&(a.amplitude=+"0.8"*a.velocity,a.scroll=a.chart.scroll,a.target=a.amplitude,a.timestamp=Date.now(),o=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame(function(){o.autoscroll()}))},i.ChartEngine.prototype.allowDragControls=function(){var a;t.a3S(),a={down:function(o){return function(r){o.modalBegin(),t.a3S(),o.chart.draggingControls={bottom:o.chart.chartControls.style.bottom}}}(this),move:function(o){return t.V5R(),function(r){t.a3S();var c,l,s,d,{draggingControls:h,chartControls:p,home:u}=o.chart;if(h){c="p",c+="x";var{style:g,offsetHeight:f}=p;l=o.height-f,s=0,d=i.stripPX(h.bottom)-r.displacementY,d=Math.min(Math.max(d,s),l),t.O44(0),g.bottom=t.b_h(c,d),u.style.bottom=g.bottom}}}(this),up:function(o){return t.a3S(),function(r){var c,l,s;t.a3S(),c=-1609462585,t.O44(25),l=t.b_h("1080057418",64),t.o0m(31),s=t.y99("2",0);for(var d=+"1";t.U5N(d.toString(),d.toString().length,86266)!==c;d++)t.O44(25),o.chart.draggingControls=t.y99("1",32),o.modalEnd(),s+=2;t.R9b(s.toString(),s.toString().length,96129)!==l&&(o.chart.draggingControls=null,o.modalEnd())}}(this)},this.chart.chartControls&&i.safeDrag(this.chart.chartControls,a),this.chart.home&&i.safeDrag(this.chart.home,a)},i.ChartEngine.prototype.dragPlotOrAxis=function(a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt;if(r="dropz",r+="o",r+="ne",c="no",c+="ne",l="n",l+="o",l+="n",l+="e",s=this,!wt.call(this)&&!this.grabbingScreen||(d=null,h=this.whichPanel(o),p=this.highlightedDraggable,u=0,!h)||p.undraggable&&p.undraggable(this))return;this.xAxisAsFooter&&h==Object.values(this.panels).pop()&&(u=this.xaxisHeight,d&&(d+=u)),g=Math.min(20,(h.height-u)/3),f=Math.min(10,h.width/3),w=this.whichYAxis(h,a,o),t.O44(3),v=this.whichYAxis(h,t.b_h(f,a),o),t.o0m(0),m=this.whichYAxis(h,t.y99(f,a),o),t.O44(3),q=this.whichPanel(t.b_h(g,o)),t.O44(14),x=this.whichPanel(t.b_h(g,u,o)),y=![],k=!{},S=!1,i.Renderer&&(y=p instanceof i.Renderer),i.Studies&&(k=p instanceof i.Studies.StudyDescriptor),S=p instanceof i.ChartEngine.YAxis,A=function(zt){if(!S){if(zt=="right"){t.o0m(16);var Pt=t.y99(0,11,17);return h.right-h.width/Pt}if(zt=="left")return h.left+h.width/+"6"}t.V5R(),t.o0m(0);var Nt=t.y99(2,0);return(h.left+h.right)/Nt},!S&&!w&&(a<A("left")?v=this.whichYAxis(h,h.left-1,o):a>A("right")&&(m=this.whichYAxis(h,h.right+1,o))),_=[],p.getDependents&&(_=p.getDependents(this,!0)),T=p.panel,P=p.getYAxis(this),y?T=p.params.panel:S&&(T=this.grabStartPanel.name);function wt(){var zt,Pt,Nt;function _t(ee){return function(xe){ee.subholder.classList.contains(xe)&&(ee.subholder.classList.remove(xe),zt=!!{})}}zt=!1;for(var Vt in s.panels){for(Pt="dr",Pt+="opz",Pt+="on",Pt+="e",[Pt,"all","left","right","top","bottom"].forEach(_t(s.panels[Vt])),Nt="0"^0;Nt<s.panels[Vt].yaxisLHS.length;Nt++)s.panels[Vt].yaxisLHS[Nt].dropzone&&(zt=!0),s.panels[Vt].yaxisLHS[Nt].dropzone=null;for(Nt=0;Nt<s.panels[Vt].yaxisRHS.length;Nt++)s.panels[Vt].yaxisRHS[Nt].dropzone&&(zt=!0),s.panels[Vt].yaxisRHS[Nt].dropzone=null}return zt}E=this.panels[T];for(z in this.panels)this.panels[z].soloing&&(U=!![]);if(N=P.isShared(this),C=!w&&!S&&!U&&(E!==h&&E!=q&&E!=x||!this.checkForEmptyPanel(E,!![],[p].concat(_))),D=T==h.name&&P!==w&&P!==m&&P!==v||N,C&&(!q||h!==q))I="d",I+="ropzone",h.subholder.classList.add(I),h.subholder.classList.add("top"),x=h;else if(C&&(!x||h!==x))L="drop",L+="z",L+="on",L+="e",h.subholder.classList.add(L),h.subholder.classList.add("bottom");else if(h!==E)!S&&!h.noDrag&&(O="a",O+="l",O+="l",h.subholder.classList.add("dropzone"),h.subholder.classList.add(O),F=h.name);else if((!h.yaxisRHS.length||h.yaxisRHS.length==1&&h.yaxisRHS[+"0"]==P&&P.position==l)&&!w&&!m&&a>A("right"))B="rig",B+="ht",h.subholder.classList.add("dropzone"),h.subholder.classList.add("right"),M=B;else if((!h.yaxisLHS.length||h.yaxisLHS.length=="1"<<32&&h.yaxisLHS["0"*1]==P&&P.position==c)&&!w&&!v&&a<A("left"))R="l",R+="eft",h.subholder.classList.add("dropzone"),h.subholder.classList.add("left"),M=R;else if(D){if(S&&a>h.left&&a<h.right){t.o0m(103);var Ct=t.y99(13,5,58,4,3);H=h.yaxisLHS[h.yaxisLHS.length-Ct],W=h.yaxisRHS[+"0"],X=A(),a<X&&H!=P?v=H:a>X&&W!=P&&(m=W)}(!S||w!==P)&&(Z=!S&&N,m&&(m!==P||Z)&&(!w||w!==m)?(m.dropzone="left",M=m.position||this.chart.panel.yAxis.position||"right"):v&&(v!==P||Z)&&(!w||w!==v)?(j="righ",j+="t",v.dropzone="right",M=v.position||this.chart.panel.yAxis.position||j):w&&(Q="ri",Q+="gh",Q+="t",!m&&(w!==P||Z)?w.dropzone="right":!v&&(w!==P||Z)?w.dropzone="left":w!==P&&(w.dropzone="all"),w.dropzone&&(M=w.position||this.chart.panel.yAxis.position||Q)))}if(this.grabbingScreen||!h.subholder.classList.contains(r)&&!M){this.draw();return}if(V=-1,!F&&!M&&C){F=k?p.inputs.id:p.params.name||i.uniqueID();for(var Rt in this.panels)if(V++,this.panels[Rt]==x)break;x||V++,this.panels[T].yAxis.name==F&&(T=this.electNewPanelOwner(T)),K=k?p.inputs.display:null,T?this.createPanel(K||F,F,d,this.chart.name,new i.ChartEngine.YAxis({name:F})):T=F,k?p.panel=T:p.params.panel=T}if(F){if(k)p.parameters||(p.parameters={}),p.parameters.panelName=F,this.highlightedDraggable=i.getFn("Studies.replaceStudy")(this,p.inputs.id,p.type,p.inputs,p.outputs,p.parameters,null,p.study);else if(y)for(var Ht in p.seriesParams)tt=p.seriesParams[Ht],J=null,p.params.yAxis&&p.params.yAxis!==this.chart.panel.yAxis&&(J=p.params.yAxis,J.name=p.params.name),this.modifySeries(tt.id,{panel:F,yAxis:J});if(V>-1){at={},ct=0;for(z in this.panels)V==ct++&&(at[F]=this.panels[F]),z!=F&&(at[z]=this.panels[z]);at[F]||(at[F]=this.panels[F]),this.panels=at}this.checkForEmptyPanel(T);for(var jt=0;jt<_.length;jt++)_[jt].params?this.checkForEmptyPanel(_[jt].params.name):this.checkForEmptyPanel(_[jt].name);this.adjustPanelPositions()}else if(M){if(G=function(zt,Pt,Nt,_t){var Vt,ee,xe;if(Vt="stu",t.V5R(),Vt+="d",Vt+="y",Nt==Vt&&(Pt.parameters||(Pt.parameters={}),_t?Pt.parameters.yaxisDisplayValue=_t.position:delete Pt.parameters.yaxisDisplayValue,ee=i.getFn("Studies.replaceStudy")(zt,Pt.inputs.id,Pt.type,Pt.inputs,Pt.outputs,Pt.parameters,Pt.panel,Pt.study)),Nt=="renderer")for(var ae in Pt.seriesParams)xe=Pt.seriesParams[ae],ee=zt.modifySeries(xe.id,{panel:F,yAxis:_t});return ee},Y=w&&w.dropzone=="all",!Y){if(S){if(p.position=M,this.layout.studies&&(it=this.layout.studies[p.name],it)){rt=-+"1971224467",lt=343240666,dt=2;for(var $t=1;t.R9b($t.toString(),$t.toString().length,+"52591")!==rt;$t++)it.parameters||(it.parameters={}),it.parameters.yaxisDisplayValue=M,dt+=2;t.R9b(dt.toString(),dt.toString().length,4552)!==lt&&(+it.parameters&&(it.parameters={}),it.parameters.yaxisDisplayValue=M)}}else k?this.highlightedDraggable=G(this,p,"study",{position:M}):y&&(ht="ren",ht+="derer",G(this,p,ht,new i.ChartEngine.YAxis({name:p.params.name||i.uniqueID(),position:M})));P=this.highlightedDraggable.getYAxis(this)}if(!N||!Y||S){for(pt=P,Y&&P==this.chart.panel.yAxis&&(pt=w),et=0;et<h.yaxisLHS.length;et++)if(h.yaxisLHS[et]==pt){h.yaxisLHS.splice(et,1);break}for(et=0;et<h.yaxisRHS.length;et++)if(h.yaxisRHS[et]==pt){h.yaxisRHS.splice(et,1);break}}if(Y)if(this.getYAxisByName(h,P.name)==h.yAxis&&this.electNewPanelOwner(h,w),S){gt=P,bt=w,P==this.chart.panel.yAxis&&(gt=w,bt=P);for(mt in gt.studies)G(this,this.layout.studies[gt.studies[mt]],"study",bt===this.chart.panel.yAxis?null:{position:bt.name});for(mt in gt.renderers)G(this,this.chart.seriesRenderers[gt.renderers[mt]],"renderer",bt);this.highlightedDraggable=bt}else k?this.highlightedDraggable=G(this,p,"study",{position:w.name}):y&&G(this,p,"renderer",w);else{for(yt="l",yt+="e",yt+="f",yt+="t",qt="n",qt+="on",qt+="e",P.position==qt&&(P.width=i.ChartEngine.YAxis.prototype.width),P.position=M,ut=M==yt?h.yaxisLHS:h.yaxisRHS,et="0"|0;et<ut.length;et++){if(ut[et]!==P)if(ut[et].dropzone=="left")ut.splice(et,0,P);else if(ut[et].dropzone=="right")t.o0m(0),ut.splice(t.b_h(1,et),0,P);else continue;break}et==ut.length&&ut.push(P)}}for(var Bt in this.panels)for(St=this.panels[Bt],Tt=St.yaxisLHS.concat(St.yaxisRHS),et="0"*1;et<Tt.length;et++)Tt[et].height=St.yAxis.height,Tt[et].lockScale||this.calculateYAxisMargins(Tt[et]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!!{}),this.savePanels()},e=!{},i.ChartEngine.prototype.findHighlights=i.ChartEngine.prototype.findHighlights||function(a,o){var r;r="movement f",r+="eature requires activating interaction feature.",t.a3S(),e||console.error(r),e=!!{}}};Ll=b=>{var t;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(i){var n;if(i.constructor==String)return i;try{return n=JSON.stringify(i),n}catch{return st.o0m(0),console.log(st.b_h(i,"Cannot convert to JSON: ")),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(i){st.a3S();var n;try{return n=JSON.parse(i),n}catch{return i}},t.NameValueStore.prototype.get=function(i,n){var e;e=t.localStorage.getItem(i),n(null,this.fromJSONIfNecessary(e))},t.NameValueStore.prototype.set=function(i,n,e){t.localStorageSetItem(i,this.toJSONIfNecessary(n)),e&&e(null)},t.NameValueStore.prototype.remove=function(i,n){st.V5R(),t.localStorage.removeItem(i),n&&n(null)}};Ul=b=>{var t=st,i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.ChartEngine||(i.ChartEngine=function(){}),i.QuoteFeed=i.QuoteFeed||function(){},i.QuoteFeed.prototype.fetch=function(n,e){t.V5R();var a;this.v2QuoteFeed||(a="You must implement",a+=" CIQ.QuoteFeed.[yourfeedname].prototype.fet",a+="ch()",console.log(a))},i.QuoteFeed.prototype.announceError=function(n,e){n.suppressErrors||e.suppressAlert||(t.V5R(),n.startDate||n.endDate||e.error&&i.alert("Error fetching quote:"+e.error))},i.QuoteFeed.prototype.multiFetch=function(n,e){return n.length===+"0"&&e([]),n[0].stx.driver.multiFetch(n,e)},i.QuoteFeed.Subscriptions=function(){t.a3S(),this.subscriptions=[]},i.inheritsFrom(i.QuoteFeed.Subscriptions,i.QuoteFeed),i.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(n){var e,a,o,r,c,l,s,d,h;o=n.getSymbols({"breakout-equations":!0}),r=this,o=o.filter(function(g){t.a3S();var f;return f=n.quoteDriver.getQuoteFeed(g),f&&f.engine==r});for(var p=0;p<this.subscriptions.length;p++)this.subscriptions[p].match=!1;for(var u=0;u<o.length;u++)for(c="we",c+="e",c+="k",l="mo",l+="n",l+="t",l+="h",a=o[u],s=a.interval,(s==l||s==c)&&!n.dontRoll&&(d="da",d+="y",s=d),a.interval=s,a.period=1,a.match=!1,isNaN(a.interval)||(a.period=a.interval,a.interval=a.timeUnit,a.interval||(a.interval="minute")),delete a.periodicity,delete a.timeUnit,delete a.setSpan,p=0;p<this.subscriptions.length;p++)if(e=this.subscriptions[p],e.symbol==a.symbol&&e.period==a.period&&e.interval==a.interval){a.match=!0,e.match=!!{};break}else e.symbol!=a.symbol?(h="s",h+="ymb",h+="ol",a.reason!="period"&&(a.reason="symbol"),e.reason=h):(a.reason="period",e.reason="period");this.subscriptions=this.subscriptions.filter(function(g){return t.a3S(),g.match||(g.stx||(g.stx=n),r.unsubscribe(g)),g.match}),o.forEach(function(g){g.match||(g.stx||(g.stx=n),g.reason||(g.reason="initialize"),g.symbol!==n.chart.symbol&&(g.series=!![]),r.subscribe(g),r.subscriptions.push(g))})},i.QuoteFeed.Subscriptions.prototype.fetch=function(n,e){t.V5R();var a;a=this,this.fetchFromSource(n,function(o){o.error||a.checkSubscriptions(n.stx),e(o)})},i.QuoteFeed.Subscriptions.prototype.subscribe=function(n){var e;e="sub",e+="scribe",console.log(e,n)},i.QuoteFeed.Subscriptions.prototype.unsubscribe=function(n){var e;e="unsu",t.a3S(),e+="bscri",e+="be",console.log(e,n)},i.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(n,e){console.log("Please provide implementation of fetchFromSource")},i.QuoteFeed.prototype.requiresImmediateRefresh=function(n){return!{}},i.ChartEngine.prototype.attachQuoteFeed=function(n,e,a){var o,r,c;e||(e={}),(typeof n.fetchInitialData=="function"||typeof n.fetchUpdateData=="function"||typeof n.fetchPaginationData=="function")&&(o="mult",o+="iFetch",r="f",r+="u",r+="n",r+="ction",typeof n.fetchPaginationData!="function"&&typeof n.fetchUpdateData!==r&&(e.noLoadMore=!0),n.v2QuoteFeed=!0,[o,"announceError","requiresImmediateRefresh"].forEach(function(l){t.V5R(),!n[l]&&n[l]!==!1&&(n[l]=i.QuoteFeed.prototype[l])}),typeof n.subscribe=="function"&&(n.checkSubscriptions=i.QuoteFeed.Subscriptions.prototype.checkSubscriptions,n.subscriptions=[])),e.maximumTicks||(e.maximumTicks=n.maxTicks?n.maxTicks:2e4),(!e.bufferSize||e.bufferSize<+"0")&&(t.o0m(25),e.bufferSize=t.y99("0",0)),e.bufferSize=Math.round(e.bufferSize),n.intervalTimer=null,this.quoteDriver&&(!a&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(c=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:n,behavior:e,filter:a}),c&&this.quoteDriver.quoteFeeds.push(c),this.quoteDriver.updateChartLoop(null,e,n))),this.quoteDriver||(this.quoteDriver=new i.ChartEngine.Driver(this,n,e,a)),a||(this.quoteDriver.hasUnfilteredQuoteFeed=!![])},t.V5R(),i.ChartEngine.prototype.detachQuoteFeed=function(n){var e;if(e=this.quoteDriver,t.V5R(),!!e){for(var a=e.quoteFeeds.length-1;a>="0"*1;a--)(!n||e.quoteFeeds[a].engine==n)&&(e.die(e.quoteFeeds[a]),e.quoteFeeds.splice(a,1));e.quoteFeeds.length?n==e.quoteFeed&&(e.quoteFeed=e.quoteFeeds[0].quoteFeed,e.behavior=e.quoteFeeds[0].behavior):e=this.quoteDriver=null}},i.ChartEngine.Driver=function(n,e,a,o){this.stx=n,a||(a={}),this.quoteFeeds=[{engine:e,behavior:a,filter:o}],this.id=i.uniqueID(!!{}),this.behavior=a,this.quoteFeed=e,this.loadingNewChart=!1,this.updatingChart=!1,t.V5R(),o||(this.hasUnfilteredQuoteFeed=!!{}),this.updateChartLoop()},i.ChartEngine.Driver.prototype.die=function(n){var e;t.V5R();for(var a=0;a<this.quoteFeeds.length;a++)(!n||this.quoteFeeds[a]==n)&&(e=this.quoteFeeds[a],clearInterval(e.intervalTimer),e.intervalTimer=-1)},i.ChartEngine.Driver.prototype.getQuoteFeed=function(n){var e;n.symbolObject||(n.symbolObject={symbol:n.symbol});for(var a="0"*1;a<this.quoteFeeds.length;a++)if(e=this.quoteFeeds[a],e.behavior.generator==n.symbolObject.generator&&(!e.filter||e.filter(n)))return e;return null},i.ChartEngine.Driver.prototype.multiFetch=function(n,e){var a,o,r;n.length===0&&e([]),a={counter:+"0",finished:n.length,results:[]};for(var c="0"^0;c<n.length;c++)o=n[c],o.stx.isEquationChart(o.symbol)?i.fetchEquationChart(o,l(o,a,e)):(r=this.getQuoteFeed(o),r&&i.ChartEngine.Driver.fetchData(i.QuoteFeed.SERIES,r.engine,o,l(o,a,e)));function l(s,d,h){return function(p){var u;d.results.push({dataCallback:p,params:s}),d.counter++,d.counter>=d.finished&&(u=d.results,d.results=[],h(u))}}},i.ChartEngine.Driver.prototype.updateSubscriptions=function(){t.V5R();for(var n=0;n<this.quoteFeeds.length;n++)this.quoteFeeds[n].checkSubscriptions&&this.quoteFeeds[n].checkSubscriptions(this.stx)},i.ChartEngine.Driver.prototype.loadDependents=function(n,e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;if(r=this,!o){c=0,l=[],s=[],d=function(C){t.V5R(),e&&++c>=r.quoteFeeds.length&&e(null)},h=function(C){++c<l.length||(s.length||d(C),t.a3S(),s.forEach(function(D){r.loadDependents(n,d,a,D.behavior)}))},r.quoteFeeds.forEach(function(C){C.behavior.generator?s.push(C):l.push(C)}),l.forEach(function(C){r.loadDependents(n,h,a,C.behavior)});return}u=n.stx,g=n.chart,f=g.series,u.masterData,m=[],q={},x=a==i.QuoteFeed.UPDATE,y=a==i.QuoteFeed.PAGINATION,k=i.shallowClone(n);for(p in f)if(w=f[p],S=w.parameters,!(!x&&(!n.future&&w.moreAvailable===!1||n.future&&w.upToDate===!0))&&!w.loading&&S.loadData!==![]&&!((x||y)&&(!w.endPoints||!Object.keys(w.endPoints).length))&&!(S.data&&!S.data.useDefaultQuoteFeed)&&(v=S.symbolObject,!!v.symbol&&v.generator==o.generator&&(k.symbolObject=v,k.symbol=v.symbol,A=this.getQuoteFeed(k),o==(A&&A.behavior)))){_=!0,x||(w.loading=!!{});for(var z=+"0";z<m.length;z++)i.symbolEqual(m[z],v)&&(_=![]);_&&(m.push(v),q[v.symbol]=w.endPoints)}T=[];for(var U=0;U<m.length;U++)v=m[U],P=i.shallowClone(n.originalState),P.symbol=v.symbol,P.symbolObject=v,P.update||P.future?(P.endDate||(P.endDate=n.endDate),P.startDate=q[v.symbol].end):(P.startDate||(P.startDate=n.startDate),P.endDate=y&&!n.future?q[v.symbol].begin:n.endDate,P.ticks=n.ticks),T.push(P);if(!T.length&&x){E={appending:n.appending||n.originalState.update},E.appending&&(E.appendToDate=n.startDate),u.createDataSet(null,null,E),n.nodraw||u.draw(),e&&e(null);return}this.multiFetch(T,N(x));function N(C){return function(D){var F,M,I,L,O,B,R,H,W,X;F=null,t.a3S();for(var Z=0;Z<D.length;Z++)if(M=D[Z],I=M.dataCallback.error,!I&&I!=="0"<<64){L=M.params.symbolObject,O=M.dataCallback,B=O.quotes,R=O.moreAvailable,H=O.upToDate,W=[],u.getSeries&&(W=u.getSeries({symbolObject:L})),X=!{};for(var j=0;j<W.length;j++)w=W[j],C||(n.future?(w.upToDate=H===!!{}?!!{}:H||B.length<=(M.params.startDate?1:0),u.isHistoricalModeSet&&B.length<2&&(w.mostRecentForwardAttempt=new Date)):w.moreAvailable=R===![]?!{}:R||B.length>(M.params.endDate?1:0),w.loading=!1),X=w.parameters.fillGaps||X;B=r.cleanup(u,w,B,a,n,X),u.updateChartData(B,g,{secondarySeries:L.symbol,noCreateDataSet:!0,noCleanupDates:!!{},allowReplaceOHL:!0}),B&&B.length&&(!F||F>B[0].DT)&&(F=B[0].DT)}D.length&&(u.createDataSet(null,null,{appending:n.originalState.update||n.future,appendToDate:F}),n.nodraw||u.draw(),a==i.QuoteFeed.INITIAL&&r.resetRefreshInterval(o.refreshInterval,o)),e&&e(null)}}},i.ChartEngine.Driver.prototype.cleanup=function(n,e,a,o,r,c){var l,s,d,h,p,u,g,f,w;if(n.doCleanupDates(a,n.layout.interval),!r.missingBarsCreated&&a&&a.length&&n.cleanupGaps&&c!==![]){if(d=r.chart,e?(d=e,s=e.parameters.symbol||e.id):s=d.defaultPlotField,o==i.QuoteFeed.PAGINATION&&!r.loadMoreReplace)d.endPoints.begin&&d.endPoints.begin>a[a.length-1].DT&&(h=n.getFirstLastDataRecord(n.masterData,s,![]),e&&(h=h[s]),a.push(h),l="pop");else if(o==i.QuoteFeed.UPDATE&&d.endPoints.end&&d.endPoints.end<a[0].DT){p="sh",p+="ift",u=n.getFirstLastDataRecord(n.masterData,s,!![]),e&&(u=u[s]),g=-316036303,t.O44(31),f=-t.y99("709150966",64),w=2;for(var v=1;t.U5N(v.toString(),v.toString().length,88692)!==g;v++)a.unshift(u),w+=2;t.U5N(w.toString(),w.toString().length,87951)!==f&&a.unshift(u),l=p}a=n.doCleanupGaps(a,r.chart,{cleanupGaps:c,noCleanupDates:!!{}}),l&&a[l]()}return a},i.ChartEngine.Driver.prototype.updateChart=function(n){var e,a,o,r,c,l,s,d,h;if(this.updatingChart||this.loadingNewChart)return;e=Object.keys(this.stx.charts).length,a=+"0",o=this.stx,r=o.layout.interval,c=o.layout.timeUnit;for(var p in o.charts)if(l=o.charts[p],!!l.symbol){if(s=this.makeParams(l.symbol,l.symbolObject,l),d=this.getQuoteFeed(s),l.masterData&&l.masterData.length&&(s.startDate=l.endPoints.end),s.update=!![],s.originalState=i.shallowClone(s),n&&n!=s.behavior){this.loadDependents(s,null,i.QuoteFeed.UPDATE,n);continue}this.updatingChart=!0,h=u(this,s,l.symbol,d),o.isEquationChart(s.symbol)?i.fetchEquationChart(s,h):d&&i.ChartEngine.Driver.fetchData(i.QuoteFeed.UPDATE,d.engine,s,h)}function u(g,f,w,v){return f.behavior.prefetchAction&&f.behavior.prefetchAction("updateChart"),function(m){var q,x;if(a++,q=f.chart,q.masterData,w==q.symbol&&r==o.layout.interval&&c==o.layout.timeUnit&&!o.isHistoricalMode())v===g.getQuoteFeed(f)&&!m.error?(x=m.quotes,x=g.cleanup(o,null,x,i.QuoteFeed.UPDATE,f),o.updateChartData(x,q,{noCreateDataSet:!0,noCleanupDates:!0}),q.attribution=m.attribution):v&&v.engine.announceError(f.originalState,m);else{g.updatingChart=!1;return}a==e&&(g.updatingChart=![]),f.behavior.callback&&f.behavior.callback(f),g.loadDependents(f,null,i.QuoteFeed.UPDATE,f.behavior)}}},i.ChartEngine.Driver.prototype.updateChartLoop=function(n,e,a){var o,r;if(e||(e=this.behavior),a||(this.quoteFeeds.forEach(function(l){l.behavior===e&&(a=l)}),a||(a=this.quoteFeed)),a.intervalTimer!==-1){clearInterval(a.intervalTimer),a.intervalTimer=null,o=function(l,s){return function(){t.V5R(),!s.noUpdate&&l.updateChart(s)}};for(var c=0;c<this.quoteFeeds.length;c++)r=this.quoteFeeds[c].behavior,e==r&&!r.noUpdate&&(!n&&n!==0&&(n=r.refreshInterval),n&&(a.intervalTimer=setInterval(o(this,r),n*1e3)))}},i.ChartEngine.Driver.prototype.resetRefreshInterval=function(n,e){(e||this.behavior).refreshInterval=n,this.updateChartLoop(null,e)},i.ChartEngine.Driver.prototype.pause=function(n){this.paused={symbol:n,interval:this.behavior.refreshInterval},t.V5R(),this.resetRefreshInterval(0)},i.ChartEngine.Driver.prototype.resume=function(){var{interval:n,symbol:e}=this.paused;t.a3S(),!i.symbolEqual(e,this.stx.chart.symbol)&&(this.resetRefreshInterval(n),this.paused=null)},i.ChartEngine.Driver.prototype.loadAll=function(n,e){var a,o;t.a3S();function r(){return t.V5R(),function(c){var l;c?e(c):a.stx.currentlyImporting||!n.moreAvailable&&n.upToDate?e(null):++o>20?(l="moreAvailable and upToDate not imp",l+="lemented correctly in",l+=" quotefeed",console.warn(l),e()):(n.loadingMore=!{},a.checkLoadMore(n,!![],!0,r(),!0))}}a=this,o=0,r()()},i.ChartEngine.Driver.prototype.checkLoadMore=function(n,e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N;if(c=this.stx,l=this,n.loadingMore||this.loadingNewChart){n.initialScroll=n.scroll,o&&o(null);return}if(s=c.isHistoricalMode(),s||(c.isHistoricalModeSet=!{}),d=this.makeParams(n.symbol,n.symbolObject,n),c.currentlyImporting){o&&o(null);return}h=d.behavior,u=n.dataSet;function C(R,H){return h.prefetchAction&&h.prefetchAction("checkLoadMore"),function(W){var X,Z,j,Q,et,V,K,tt,J;if(X=R.stx,Z=H.chart,H.symbol==Z.symbol&&S==X.layout.interval&&A==X.layout.timeUnit)if(H.loadMore||(H.chart.loadingMore=!1),p===R.getQuoteFeed(H)&&!W.error){if(W.quotes||(W.quotes=[]),j=W.quotes,Q=Z.masterData,j=R.cleanup(X,null,j,i.QuoteFeed.PAGINATION,H),j.length&&Z.masterData&&Z.masterData.length)if(H.future)et=j[0],et.DT&&et.DT==Z.masterData[Z.masterData.length-1].DT&&Q.pop();else{t.O44(18);var at=t.b_h(9,0,10);V=j[j.length-at],V.DT&&+V.DT==+Z.masterData[0].DT&&j.pop()}H.future?(Z.maximumForwardPagination=null,W.upToDate?Z.upToDate=!0:W.upToDate===!1||j.length>1?Z.upToDate=!{}:(!j.length||j.length===1&&+H.startDate==+W.quotes[+"0"].DT)&&(H.fetchMaximumBars?Z.upToDate=!0:Z.maximumForwardPagination=!!{}),X.isHistoricalModeSet&&j.length<"2">>32&&(Z.mostRecentForwardAttempt=new Date)):W.moreAvailable?Z.moreAvailable=!0:W.moreAvailable===!{}||!j.length?Z.moreAvailable=!1:Z.moreAvailable=!!{},R.tickMultiplier=j.length?2:R.tickMultiplier*2,K=j[0]?j[0].DT:H.startDate,tt=j[0]?j[j.length-1].DT:H.endDate,(!Z.endPoints.begin||Z.endPoints.begin>K)&&(Z.endPoints.begin=K),(!Z.endPoints.end||Z.endPoints.end<tt)&&(Z.endPoints.end=tt),Z.loadingMore=![],H.loadMoreReplace?X.setMasterData(j,Z,{noCleanupDates:!!{}}):H.future?X.updateChartData(j,Z,{noCreateDataSet:!0,noCleanupDates:!0}):i.addMemberToMasterdata({stx:X,chart:Z,data:j,fields:["*"],noCleanupDates:!0}),H.future&&(J={appending:!!{},appendToDate:j[+"0"]&&j[0].DT}),X.createDataSet(void 0,void 0,J),r||X.draw(),h.callback&&h.callback(H),R.loadDependents(H,o,i.QuoteFeed.PAGINATION)}else R.quoteFeed.announceError(H.originalState,W),H.chart.loadingMore=!1,o&&o(W.error);else return}}t.o0m(104);var D=t.b_h(18,734,1019,14,1019);t.O44(54);var F=t.b_h(17,10,45,930);f=D*(h.forwardPaginationRetryInterval||F);function M(R){return l.paused?![]:!R.endPoints.begin||u.length-n.scroll<h.bufferSize||u.length-n.scroll-c.tickFromDate(R.endPoints.begin,n)<h.bufferSize}if(w=!{},v=!1,n.dataSet.length)for(var I in n.series)m=n.series[I],!m.loading&&m.parameters.loadData!==!1&&(g=!m.mostRecentForwardAttempt||m.mostRecentForwardAttempt.getTime()+f<Date.now(),m.moreAvailable!==!{}&&M(m)&&(w=!0),g&&!m.upToDate&&B(m)&&(v=!0));function L(R){n.loadingMore=![],t.a3S(),o&&o(R)}if(g=!n.mostRecentForwardAttempt||n.mostRecentForwardAttempt.getTime()+f<Date.now(),q=(M(n)||e)&&n.moreAvailable!==![],x=(B(n)||e)&&!n.upToDate&&g,y=q||w,k=(c.isHistoricalModeSet||!n.upToDate)&&!y&&(x||v),S=c.layout.interval,A=c.layout.timeUnit,_=!{},T=h.findHeadOfData||n.masterData&&n.masterData.length,!h.noLoadMore&&T&&(k||!c.maxDataSetSize||n.dataSet.length<c.maxDataSetSize)&&(y||k)){if(n.initialScroll=n.scroll,n.loadingMore=!![],d=this.makeParams(n.symbol,n.symbolObject,n),d.pagination=!!{},d.future=k,n.masterData&&n.masterData.length?(k?d.startDate=n.endPoints.end:d.endDate=n.endPoints.begin,k&&!d.startDate?(P=c.getFirstLastDataRecord(n.masterData,"DT",!![]),P&&(d.startDate=P.DT)):y&&!d.endDate&&(P=c.getFirstLastDataRecord(n.masterData,"DT"),P&&(d.endDate=P.DT))):d.endDate=new Date,d.originalState=i.shallowClone(d),d.nodraw=r,!q&&(w||!x&&v)){this.loadingMore=!0,this.loadDependents(d,L,i.QuoteFeed.PAGINATION),o&&o(null);return}if(n.maximumForwardPagination||c.fetchMaximumBars[c.layout.aggregationType]){E=1154406027,z=-1271653017,U=2;for(var O=1;t.R9b(O.toString(),O.toString().length,+"42696")!==E;O++)d.fetchMaximumBars=!0,!c.maxMasterDataSize||h.maximumTicks<c.maxMasterDataSize?d.ticks=h.maximumTicks:d.ticks=c.maxMasterDataSize,U+=2;t.R9b(U.toString(),U.toString().length,41317)!==z&&(d.fetchMaximumBars=![],-c.maxMasterDataSize&&h.maximumTicks<=c.maxMasterDataSize?d.ticks=h.maximumTicks:d.ticks=c.maxMasterDataSize)}N=C(this,d),c.isEquationChart(d.symbol)?i.fetchEquationChart(d,N):(k&&(d.appending=!!{}),p=l.getQuoteFeed(d),p&&i.ChartEngine.Driver.fetchData(i.QuoteFeed.PAGINATION,p.engine,d,N)),_=!![]}!_&&o&&o(null);function B(R){return t.V5R(),l.paused?!1:!R.endPoints.end||n.scroll-n.maxTicks+1<h.bufferSize||c.tickFromDate(R.endPoints.end,n,null,!![])-u.length+n.scroll-n.maxTicks+2<h.bufferSize}},i.ChartEngine.Driver.prototype.extendHistoricalData=function({from:n},e=()=>{}){var a,o,{stx:r}=this,{chart:c,layout:l}=r,{masterData:s,dataSet:d}=c,{interval:h,timeUnit:p}=l;if(a=this.makeParams(c.symbol,c.symbolObject,c),o=this.getQuoteFeed(a),c.loadingMore||this.loadingNewChart||r.currentlyImporting||!s.length||!o||r.maxDataSetSize&&d.length>r.maxDataSetSize)return e(null);function u(g,f){return t.a3S(),function({quotes:w,moreAvailable:v,error:m}){if(!(f.symbol!==c.symbol||h!==l.interval||p!==l.timeUnit)){if(c.loadingMore=!{},m)return e(m);w=g.cleanup(r,null,w,i.QuoteFeed.PAGINATION,f),typeof v=="boolean"?c.moreAvailable=v:c.moreAvailable=!!w.length,c.endPoints.begin=n,t.V5R(),i.addMemberToMasterdata({stx:r,chart:c,data:w,fields:["*"],noCleanupDates:!0}),r.createDataSet(),r.draw()}}}c.loadingMore=!!{},a.originalState=Object.assign({},a),a.startDate=n,a.endDate=s[0].DT,i.ChartEngine.Driver.fetchData(i.QuoteFeed.PAGINATION,o.engine,a,u(this,a))},i.ChartEngine.Driver.prototype.barsToFetch=function(n){var e,a,o,r,c,l,s;t.a3S(),e="m",e+="o",e+="nt",e+="h",i.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),a=this.stx.layout.interval,o=n.stx.layout.periodicity,(a==e||a=="week")&&!this.stx.dontRoll&&(o*=a=="week"?7:30),r=644284677,t.o0m(2),c=-t.y99("1678253949",61),l=2;for(var d=+"1";t.R9b(d.toString(),d.toString().length,74232)!==r;d++)s=n.stx.chart.maxTicks+o,l+=2;return t.U5N(l.toString(),l.toString().length,99618)!==c&&(s=n.stx.chart.maxTicks*o),s*this.tickMultiplier},i.ChartEngine.Driver.determineStartDate=function(n,e,a){return t.a3S(),this.determineStartOrEndDate(n,e,a,!0)},i.ChartEngine.Driver.determineStartOrEndDate=function(n,e,a,o){t.V5R();var r;return o?r=n.startDate||e.previous(a):r=n.future?e.next(a):new Date,r},i.ChartEngine.Driver.prototype.makeParams=function(n,e,a){var o,r,c,l,s,d,h,p,u;o=this.stx,r=o.layout.interval,c=this.barsToFetch({stx:o}),(r=="month"||r=="week")&&!o.dontRoll&&(r="day"),l=this.getQuoteFeed({interval:r,symbol:n,symbolObject:e}),s=l&&l.behavior,d=i.shallowClone(s)||{},d.behavior=s,h=![],p=[],a.market&&a.market.getSessionNames&&(p=a.market.getSessionNames()),o.extendedHours?o.extendedHours.filter?h=!0:(h=o.layout.extended,p=p.filter(function(f){return f.enabled||o.layout.marketSessions[f.name]})):p=p.filter(function(f){return t.V5R(),f.enabled});for(var g=0;g<p.length;g++)p[g]=p[g].name;return i.extend(d,{stx:o,symbol:n,symbolObject:e,chart:a,interval:r,extended:h,period:"1">>64,ticks:c,additionalSessions:p,quoteDriverID:this.id},!![]),d.symbolObject||(d.symbolObject={symbol:n}),isNaN(d.interval)||(u="m",u+="i",u+="n",u+="ute",d.period=parseInt(d.interval,"10"-0),d.interval=o.layout.timeUnit,d.interval||(d.interval=u)),d},i.ChartEngine.Driver.prototype.newChart=function(n,e){var a,o,r,c,l,s,d,h,p;a=this.stx,o=n.symbol,r=a.layout.interval,c=a.layout.timeUnit,l=n.chart,l.moreAvailable=null,l.upToDate=null,l.loadingMore=!1,l.attribution=null,s=this.makeParams(o,n.symbolObject,l),i.extend(s,n,!!{}),d=this.getQuoteFeed(s),h=s.behavior,(a.fetchMaximumBars[a.layout.aggregationType]||n.fetchMaximumBars)&&(!a.maxMasterDataSize||h.maximumTicks<a.maxMasterDataSize?s.ticks=h.maximumTicks:s.ticks=a.maxMasterDataSize,s.fetchMaximumBars=!0),this.loadingNewChart=!!{},this.updatingChart=!1,s.originalState=i.shallowClone(s),p=u(this,s),this.stx.isEquationChart(s.symbol)?i.fetchEquationChart(s,p):d&&i.ChartEngine.Driver.fetchData(i.QuoteFeed.INITIAL,d.engine,s,p);function u(g,f){return h.prefetchAction&&h.prefetchAction("newChart"),t.a3S(),function(w){var v,m,q,x;if(v=f.chart,m=w.quotes,q=![],o==v.symbol&&r==a.layout.interval&&c==a.layout.timeUnit)g.loadingNewChart=!{},d===g.getQuoteFeed(f)&&!w.error?(m=g.cleanup(a,null,m,i.QuoteFeed.INITIAL,f),a.setMasterData(m,v,{noCleanupDates:!0}),v.endPoints={},v.endPoints.begin=m[0]?m[0].DT:f.startDate,v.endPoints.end=m[0]?m[m.length-1].DT:f.endDate,m?(v.moreAvailable=w.moreAvailable!==![],v.upToDate=w.upToDate):(v.moreAvailable=!{},v.upToDate=!!{}),v.attribution=w.attribution,n.initializeChart&&a.initializeChart(),a.createDataSet(),q=!!{}):d.engine.announceError(f.originalState,w);else{e&&e("orphaned");return}for(var y in v.series)v.series[y].endPoints={},v.series[y].moreAvailable=null,v.series[y].upToDate=null;x=v.masterData,x&&x.length&&(f.startDate=x[0].DT,f.endDate=x[x.length-1].DT),h.callback&&h.callback(f),g.loadDependents(f,function(){q&&!f.nodraw&&g.stx.home(),e&&e(w.error),g.stx.dispatch("newChart",{stx:g.stx,symbol:g.stx.chart.symbol,symbolObject:g.stx.chart.symbolObject,moreAvailable:g.stx.chart.moreAvailable,upToDate:g.stx.chart.upToDate,quoteDriver:g}),g.resetRefreshInterval(h.refreshInterval,h)},i.QuoteFeed.INITIAL)}}},i.QuoteFeed.INITIAL=1,i.QuoteFeed.UPDATE=2,i.QuoteFeed.PAGINATION=+"3",i.QuoteFeed.SERIES=4,i.ChartEngine.Driver.fetchData=function(n,e,a,o){t.a3S();var r;if(!a.symbol)return o({quotes:[]});e.v2QuoteFeed?(r="fun",r+="ction",typeof e.subscribe!==r?i.ChartEngine.Driver.fetchDataInContext(n,e,a,o):i.ChartEngine.Driver.fetchDataInContext(n,e,a,function(c){c.error||this.checkSubscriptions(a.stx),o(c)}.bind(e))):(a.stx.convertToDataZone(a.startDate),a.stx.convertToDataZone(a.endDate),e.fetch(a,o))},i.ChartEngine.Driver.fetchDataInContext=function(n,e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v;if(r="fu",r+="nction",h=a.stx,!h.chart.market.newIterator){p="quot",p+="eFeed f",p+="eature requires first activati",p+="ng market feature.",console.error(p);return}switch(n===i.QuoteFeed.SERIES&&(a.series=!0,n=i.QuoteFeed.INITIAL,a.endDate&&!a.startDate||a.future?n=i.QuoteFeed.PAGINATION:a.startDate&&!a.endDate&&(n=i.QuoteFeed.UPDATE)),u=Math.min(a.ticks,a.maximumTicks),e.maxTicks&&(u=Math.min(u,e.maxTicks)),g=a.symbolObject.masterSymbol||a.symbol,n){case i.QuoteFeed.UPDATE:if(h.isHistoricalModeSet){h.quoteDriver.updatingChart=!{};return}a.startDate?f=a.startDate:(f=new Date,f.setHours(0,0,0,0)),typeof e.fetchUpdateData=="function"&&e.fetchUpdateData(g,h.convertToDataZone(f),a,o);break;case i.QuoteFeed.INITIAL:d=a.endDate||new Date,c={begin:d,interval:a.interval,periodicity:a.interval=="tick"?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},l=h.chart.market.newIterator(c),s=i.ChartEngine.Driver.determineStartDate(a,l,u),a.endDate&&(d=a.endDate),typeof e.fetchInitialData===r&&e.fetchInitialData(g,s,h.convertToDataZone(d),a,o);break;case i.QuoteFeed.PAGINATION:if(w="t",w+="i",w+="c",w+="k",c={begin:a.endDate||a.startDate,interval:a.interval,periodicity:a.interval==w?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},l=h.chart.market.newIterator(c),v=i.ChartEngine.Driver.determineStartOrEndDate(a,l,u,!a.future),s=a.startDate||v,d=a.endDate||v,a.startDate?a.stx.convertToDataZone(s):a.stx.convertToDataZone(d),typeof e.fetchPaginationData=="function"){if(h.maxMasterDataSize&&h.maxMasterDataSize<=h.masterData.length)return;e.fetchPaginationData(g,s,d,a,function(m){d>=Date.now()&&(h.isHistoricalModeSet=!1),o&&o(m)})}break;default:console.error("Illegal fetchData constant")}}};zl=b=>{var t=st,i,n;i="undefine",i+="d",n=typeof _CIQ!==i?_CIQ:b.CIQ,t.V5R(),n.ChartEngine.prototype.addSeries=function(e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;if(r="a",r+="d",r+="dSeri",r+="es",c="dis",c+="p",c+="l",c+="ay",l="add-",l+="series",s=this.runPrepend("addSeries",arguments),s)return s;d=e||null,h=e,e||(e=n.uniqueID());function P(z,U){var N,C,D,F;if(N=a.renderer||"Lines",C=a.name||e,a.yAxis&&!(a.yAxis instanceof n.ChartEngine.YAxis)&&!q&&(a.yAxis.name=C),!(!a.renderer&&!a.name&&!a.color&&!a.chartType)){if(D=z.getSeriesRenderer(C),!D){if(F={name:C,overChart:a.overChart!==!1,useChartLegend:!0},a.chartType?D=n.Renderer.produce(a.chartType,n.extend({highlightable:a.highlightable,dependentOf:a.dependentOf,panel:a.panel,yAxis:a.yAxis,baseline:a.baseline},F)):(n.ensureDefaults(a,F),D=new n.Renderer[N]({params:a})),!D)return;z.setSeriesRenderer(D)}D.attachSeries(e,a),a.loadData!==![]&&D.ready(),z.layout.symbols=z.getSymbols({"include-parameters":!0,"exclude-studies":!0})}}function E(z){return function(U){var N,C;U.error||(N=U.quotes,C=a.fillGaps,m.cleanupGaps||(C=!{}),N=m.doCleanupGaps(N,m.chart,{cleanupGaps:C}),m.updateChartData(N,m.chart,{secondarySeries:h,noCreateDataSet:!![],noCleanupDates:!!{},allowReplaceOHL:!![]}),p.loading=![],p.moreAvailable=U.moreAvailable,p.upToDate=U.upToDate,P(m)),t.a3S(),a.action!==null&&!f.length&&m.dispatch(q?"symbolImport":"symbolChange",{stx:m,symbol:z.symbol,symbolObject:z.symbolObject,action:a.action,id:p.id,parameters:a}),o&&o.call(m,U.error,p)}}return a&&a.panel===!0&&(a.panel=e),p={parameters:a?n.clone(a):{},yValueCache:[],display:d,id:e,loading:a?a.loadData!==!1:!0},p.parameters.yAxis=a&&a.yAxis,a=p.parameters,a.symbol&&(h=a.symbol),a.isComparison&&(a.shareYAxis=!!{}),a.yAxis&&!(a.yAxis instanceof n.ChartEngine.YAxis)&&(a.yAxis=new n.ChartEngine.YAxis(a.yAxis)),n.ensureDefaults(a,{chartName:this.chart.name,symbolObject:{symbol:h},panel:this.chart.panel.name,fillGaps:!{},action:l}),c in a&&(p.display=a.display),u=this.charts[a.chartName],g=a.symbolObject,h=a.symbol=g.symbol,p.display||(p.display=h||a.field),p.endPoints={},!a.gapDisplayStyle&&a.gapDisplayStyle!==!1&&(a.gapDisplayStyle=a.gaps),a.isComparison&&a.gapDisplayStyle===void 0&&(a.gapDisplayStyle="transparent"),f=this.getSeries({symbolObject:g,chart:u,includeMaster:!![]}),w=a.panel,this.panels[w]?!a.yAxis&&!a.shareYAxis&&(a.yAxis=new n.ChartEngine.YAxis({name:e,position:"none"})):(v=a.yAxis||new n.ChartEngine.YAxis,v.name=e,this.createPanel(e,w,null,null,v),(!this.preferences.dragging||!this.preferences.dragging.series)&&(a.highlightable=![])),u.series[e]=p,m=this,q=this.currentlyImporting,a.isComparison&&u.forcePercentComparison&&a.panel==u.panel.name&&(!a.yAxis||a.yAxis==u.yAxis)&&this.setChartScale("percent"),x=u.masterData,x||(x=u.masterData=this.masterData=[]),y=x.length,a.data&&!a.data.useDefaultQuoteFeed?(k={symbol:h,symbolObject:g,action:a.action},E(k)({quotes:a.data})):f.length?(p.endPoints=f[0].endPoints,p.loading=f[0].loading,P(this),o&&setTimeout(function(){var z,U,N;z=226037298,U=-423262311,N=2;for(var C=1;t.R9b(C.toString(),C.toString().length,87334)!==z;C++)o.call(m,null,p),N+=2;t.U5N(N.toString(),N.toString().length,86605)!==U&&(t.o0m(30),o.call(m,t.b_h("1",0),p))},0)):this.quoteDriver&&a.loadData!==!{}?(S=this.quoteDriver,A=S.makeParams(h,g,u),y&&(A.startDate=x[0].DT,A.endDate=this.isHistoricalMode()?x[x.length-1].DT:new Date),A.stx.isEquationChart(A.symbol)?n.fetchEquationChart(A,E(A)):(_=S.getQuoteFeed(A),_&&n.ChartEngine.Driver.fetchData(4,_.engine,A,E(A)))):(T="symbolC",T+="hang",T+="e",P(this),a.action!==null&&!f.length&&m.dispatch(q?"symbolImport":T,{stx:m,symbol:h,symbolObject:g,action:a.action,id:p.id,parameters:a}),o&&o.call(this,null,p)),this.runAppend(r,arguments),p},n.ChartEngine.prototype.getSeries=function(e){var a,o,r,c,l;a=e.chart?e.chart:this.chart,t.a3S(),o=a.series,r=e.symbolObject,r||(r={symbol:e.symbol}),c=[];for(var s in o)l=o[s],n.symbolEqual(r,l.parameters.symbolObject)&&c.push(l);return e.includeMaster&&n.symbolEqual(r,a.symbolObject)&&c.push({}),c},n.ChartEngine.prototype.modifySeries=function(e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S;if(r="mod",r+="i",r+="fySer",r+="ies",!this.runPrepend(r,arguments)&&!!a){if(typeof e=="string"){s=a.chartName?this.charts[a.chartName]:this.chart,l=e,d=-1351058543,h=1373072839,t.O44(4),p=t.b_h("2",1);for(var A=1;t.R9b(A.toString(),A.toString().length,+"84470")!==d;A++)c=s.series[l],p+=2;t.R9b(p.toString(),p.toString().length,90563)!==h&&(c=s.series[l]),c=s.series[l]}else c=e,l=c.id,s=this.charts[c.parameters.chartName];if(!!c){n.extend(c.parameters,a,!0),this.getRendererFromSeries(l).modifyRenderer(a),u=c.parameters,t.a3S();for(var _ in s.seriesRenderers){f=s.seriesRenderers[_],w=f.params,v=f.seriesParams;for(var T=0;T<v.length;++T)if(m=v[T],q=this.panels[m.panel],x=q&&q.yAxis.name,m.id===c.id){u.panel===!0&&(u.panel=u.dependentOf||u.name),w.panel=u.panel,a.yAxis&&(a.yAxis instanceof n.ChartEngine.YAxis||(a.yAxis=new n.ChartEngine.YAxis(a.yAxis)),w.yAxis=a.yAxis),u.panel!=m.panel&&w.name==x?this.electNewPanelOwner(m.panel):(y=this.getYAxisByName(u.panel,w.name),y&&u.yAxis&&y.name!==u.yAxis.name&&(y.name=this.electNewYAxisOwner(y))),u.field||(u.field=null),f.attachSeries(l,n.ensureDefaults(u,m)),u.field||(u.field=u.subField),delete u.subField,u.isComparison&&s.forcePercentComparison&&u.panel==s.panel.name&&(!c.parameters.yAxis||u.yAxis.name==s.yAxis.name)&&this.setChartScale("percent"),g=f;break}}if(n.getFn("Drawing.updateSource")(this,c.parameters.symbol||l,null,c.parameters.panel),this.runAppend("modifySeries",arguments),o!==!!{}){k=g.getDependents(this);for(var P=+"0";P<k.length;P++)this.modifySeries(k[P].params.name,{panel:g.params.panel,yAxis:c.parameters.yAxis},!![]);S=s.seriesRenderers[g.params.dependentOf],S&&(S.params.yAxis!=c.parameters.yAxis||S.params.panel!=g.params.panel)&&this.modifySeries(g.params.dependentOf,{panel:g.params.panel,yAxis:c.parameters.yAxis},!!{})}return this.draw(),c}}},n.ChartEngine.prototype.deleteSeries=function(e,a,o){var r,c,l,s,d,h,p,u,g;r="symbo",r+="lChan",r+="ge",c="r",c+="emove-seri",c+="e",c+="s",!this.runPrepend("deleteSeries",arguments)&&(o=o||{},l=o.action?o.action:c,typeof e=="object"?(s=e.id,a=a||this.charts[e.parameters.chartName]):(s=e,a=a||this.chart),d=a.series[s],d&&(h=d.parameters.loadData,p=d.parameters.symbolObject,delete a.series[s],this.layout.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0}),u=this.getSeries({symbolObject:p,includeMaster:!![]}),h!==!1&&!u.length&&this.cleanMasterData(p,a),g=this.panels[d.parameters.panel],g&&this.checkForEmptyPanel(g),this.createDataSet(),u.length||this.dispatch(this.currentlyImporting?"symbolImport":r,{stx:this,symbol:p.symbol,symbolObject:p,id:s,action:l}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},n.ChartEngine.prototype.removeSeries=function(e,a){var o,r,c,l,s,d,h;if(!this.runPrepend("removeSeries",arguments)){r=!{},typeof e=="object"?(o=e.id,a=a||this.charts[e.parameters.chartName]):(o=e,a=a||this.chart);for(var p in a.seriesRenderers){c=a.seriesRenderers[p],l=this.panels[c.params.panel],s=l&&l.yAxis.name;for(var u=c.seriesParams.length-1;u>=0;u--)d=c.seriesParams[u],d.id===o&&(c.removeSeries(o),c.seriesParams.length<1&&(this.removeSeriesRenderer(c),c.params.name==s?this.electNewPanelOwner(c.params.panel):this.checkForEmptyPanel(c.params.panel)||(h=this.getYAxisByName(l,c.params.name),h&&(h.name=h.studies[0]||h.renderers[1]))),r=!0)}r||this.deleteSeries(o,a),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},n.Comparison=n.Comparison||function(){},n.Comparison.initialPrice=100,n.Comparison.getInitialPrice=function(e){var a,o,r;if(e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,a=n.Comparison.initialPrice,typeof a=="number"&&(e.initialComparisonPrice=a),typeof a=="string"&&(e.series[a]||a==="")){o="Close",e.defaultPlotField&&(e.highLowBars||(o=e.defaultPlotField));for(var c=e.dataSet.length-e.scroll-1;c<e.dataSet.length;c++)if(r=e.dataSet[c],r){if(r[a]&&r[a][o]){e.initialComparisonPrice=r[a][o];break}else if(a===""&&r[o]){e.initialComparisonPrice=r[o];break}}}return t.V5R(),e.initialComparisonPrice},n.Comparison.priceToPercent=function(e,a,o,r,c){var l,s;l="Cl",l+="o",l+="se",s=e.comparisonBaseline,s&&c in s&&(s=s[c]),s&&typeof s=="object"&&(s=s[a.defaultPlotField||l]),s=s||o,t.o0m(105);var d=t.y99(7,9,12,97);t.O44(3);var h=t.b_h(16,10016);t.O44(0);var p=t.y99(8,9992);return Math.round((o-s)/s*d*h)/p},n.Comparison.percentToPrice=function(e,a,o,r,c){var l,s;return l="o",l+="bjec",l+="t",s=e.comparisonBaseline,s&&c in s&&(s=s[c]),s&&typeof s===l&&(s=s[a.defaultPlotField||"Close"]),s=s||1,t.o0m(106),t.y99(1,o,s,"100",1)},n.Comparison.priceToRelative=function(e,a,o,r,c){var l,s,d;return l="Clos",t.V5R(),l+="e",s=e.comparisonBaseline,d=n.Comparison.getInitialPrice(a),s&&c in s&&(s=s[c]),s&&typeof s=="object"&&(s=s[a.defaultPlotField||l]),t.o0m(107),t.y99(d,o,s||o)},n.Comparison.relativeToPrice=function(e,a,o,r,c){var l,s,d;return l="C",l+="l",l+="ose",s=e.comparisonBaseline,d=n.Comparison.getInitialPrice(a),s&&c in s&&(s=s[c]),s&&typeof s=="object"&&(s=s[a.defaultPlotField||l]),t.V5R(),t.O44(107),t.y99(s||1,o,d)},n.Comparison.createComparisonSegmentInner=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U;o="Op",o+="en",r=[];for(c in a.series)d=a.series[c].parameters,(!d.yAxis&&d.shareYAxis||d.yAxis===a.yAxis)&&r.push(d.symbol);h=["Close",o,"High","Low","iqPrevClose"],p=e.chart.highLowBars,a.defaultPlotField&&!p&&h.unshift(a.defaultPlotField),u=h[0],g=e.layout.studies;for(var N in g)if(f=g[N],l=e.panels[f.panel],s=f.getYAxis(e),!(!l||l.yAxis!=s)){for(c in f.outputMap)h.push(c);for(var C=0;C<=2;C++)h.push(f.name+"_hist"+(C||""));f.referenceOutput&&h.push(f.referenceOutput+" "+f.name)}for(var D in e.plugins)if(w=e.plugins[D],!!w.transformOutputs)for(c in w.transformOutputs)h.push(c);a.initialComparisonPrice=null,a.dataSegment=[],v=null,t.o0m(16);var F=t.b_h(0,17,18);m=a.dataSet.length-a.scroll-F,e.startComparisonsAtFirstVisibleBar&&(m+=1),t.o0m(3);var M=t.b_h(24,27);q=a.maxTicks+M;for(var I=0;I<=q;I++){if(I==q&&(I=-1),t.O44(0),x=t.y99(I,m),x<a.dataSet.length&&x>=0){if(y=a.dataSet[x],k=y[u],!v){if(k===+"0"||k===null){if(I<0)break;continue}v=n.clone(y)}for(y.transform||(y.transform={cache:{},DT:y.DT,Date:y.Date}),!(v&&v[u])&&k&&(v=n.clone(y)),e.comparisonBaseline=v,S=0;S<h.length;S++)c=h[S],A=y[c],(A||A===0)&&(y.transform[c]=a.transformFunc(e,a,A));for(S=0;S<r.length;S++){if(c=r[S],_=a.series[c],I==-1&&_&&_.parameters.isComparison){delete y.transform[c];continue}T=y[c];for(var L=0;T&&L<h.length;L++)P=T[h[L]],(P||P===+"0")&&(E=v[c]&&v[c][h[0]],!E&&E!==0&&(v[c]||(v[c]={}),v[c][h[L]]=E=P*v[u]/y[u]),E!==0&&(z=v[u]||+"1",t.o0m(108),U=t.y99(E,P,z),y.transform[c]||(y.transform[c]={}),y.transform[c][h[L]]=a.transformFunc(e,a,U)))}a.dataSegment.push(y)}else x<0&&a.dataSegment.push(null);if(I<"0"*1)break}},n.Comparison.priceFormat=function(e,a,o){var r,c,l;if(r="undefin",r+="ed",o===null||typeof o==r||isNaN(o))return"";if(c=a.yAxis.priceTick,l=e.internationalizer,l)c>=5?(t.O44(9),o=l.percent.format(t.b_h(100,o))):c>=.5?(t.O44(9),o=l.percent1.format(t.y99(100,o))):c>=+"0.05"?(t.o0m(9),o=l.percent2.format(t.y99(100,o))):c>=.005?(t.O44(9),o=l.percent3.format(t.y99(100,o))):(t.O44(9),o=l.percent4.format(t.y99(100,o)));else if(c>=5)o=o.toFixed(0)+"%";else if(c>=.5){t.O44(0);var s=t.y99(1,0);t.o0m(109);var d=t.y99(8,883,6,1);t.o0m(0);var h=t.y99(20,3930);t.o0m(109);var p=t.y99(350,1765,2,1765);t.o0m(110);var u=t.y99(20,25203,12,14,2290);t.O44(3);var g=t.b_h(74210,81631);t.O44(3);var f=t.b_h(3,67);t.O44(111);var w=t.b_h(1446,2,18,24,10);o=o.toFixed(s)+(d==351.52?h:p==u?g!==+"640"?"0x2186"<<f:w:"%")}else if(c>="0.05"-0){t.O44(18);var v=t.b_h(33,17,18);o=o.toFixed(v)+"%"}else if(c>=.005){t.O44(112);var m=t.y99(3,14,6,12,7);t.o0m(13);var q=t.b_h(15,2,8379,3);t.o0m(0);var x=t.b_h(5,7340);o=o.toFixed(m)+(q!=x?"%":283.79)}else{t.O44(3);var y=t.y99(11,15);t.O44(113);var k=t.y99(7,949,5711,17,5717);t.o0m(114);var S=t.y99(450,12,11,2642,7);t.o0m(3);var A=t.b_h(171648,181184);t.o0m(115);var _=t.b_h(1300,1310,16,18,260);t.O44(116);var T=t.y99(6595,6621,18,6621);o=o.toFixed(y)+(k>=S?A==_?T:730.34:"%")}return parseFloat(o)===+"0"&&o.charAt(0)=="-"&&(o=o.substring(1)),o},n.ChartEngine.prototype.setComparison=function(e,a,o){var r,c,l,s,d;if(r="s",r+="trin",r+="g",a||(a=this.chart),typeof a==r&&(a=this.charts[a]),(o||o==="")&&(n.Comparison.initialPrice=o),t.V5R(),e===!0){if(c="p",c+="erc",c+="ent",a.isComparison)return;e=c}switch(this.resetDynamicYAxis(),l=a.panel.yAxis,s=l.priceFormatter==n.Comparison.priceFormat,e){case"relative":this.setTransform(a,n.Comparison.priceToRelative,n.Comparison.relativeToPrice),s&&(l.priceFormatter=l.originalPriceFormatter?l.originalPriceFormatter.func:null,l.originalPriceFormatter=null),l.whichSet="dataSegment",a.isComparison=!0;break;case"percent":d="dataSe",d+="gment",this.setTransform(a,n.Comparison.priceToPercent,n.Comparison.percentToPrice),s||(l.originalPriceFormatter={func:l.priceFormatter},l.priceFormatter=n.Comparison.priceFormat),l.whichSet=d,a.isComparison=!!{};break;default:this.unsetTransform(a),s&&(l.priceFormatter=l.originalPriceFormatter?l.originalPriceFormatter.func:null,l.originalPriceFormatter=null),l.whichSet="dataSet",a.isComparison=!{};break}},n.ChartEngine.prototype.setChartScale=function(e){var a,o,r;a=this.chart,o={percent:!0,relative:!![]},e||(e="linear"),o[e]?this.setComparison(e,a,n.Comparison.initialPrice):o[this.layout.chartScale]&&this.setComparison(![],a),r=this.layout.chartScale!==e,this.layout.chartScale=e,a.canvas&&this.draw(),r&&this.changeOccurred("layout")}};Bl=b=>{var t,i;function n(){st.V5R();var r,c,l;if(r="js/thi",r+="rdpart",r+="y/",t.Share.html2canvasLocation)return t.Share.html2canvasLocation;c=document.getElementsByTagName("script");for(var s=0;s<c.length;s++)if(l=c[s],l.src&&l.src.indexOf("share.js")>-1)return l.src.replace(/standard\/share\.js/,"")+"thirdparty/";return r}t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;function e(r,c,l){var s=st,d,h,p,u,g,f,w,v,m,q;if(d="sharin",d+="g",c||(c={}),h="ciq-no-share",p=r.container.ownerDocument.querySelector("body"),c.hide&&c.hide instanceof Array){u=",",u+=" ",g=c.hide.join(u),f=p.querySelectorAll(g);for(var x=0;x<f.length;x++)f[x].classList.add(h)}for(p.classList.add(d),r.draw(),w=r.chart.container.getElementsByTagName("svg"),v=[],s.O44(30),m=s.b_h("0",0);m<w.length;m++)q=w[m],v.push(q.innerHTML),a(q);i(r.chart.container,{allowTaint:!1,logging:!1,width:c.width||null,height:c.height||null,backgroundColor:c.background||null,useCORS:!![]}).then(function(y){var k;for(l&&(k="i",k+="mage",k+="/p",k+="ng",l(null,c.data?y.toDataURL(k):y)),m=0;m<w.length;m++)w[m].innerHTML=v[m];s.V5R(),p.classList.remove("sharing")}).catch(function(y){for(l&&l(y),m=0;m<w.length;m++)w[m].innerHTML=v[m];s.a3S(),p.classList.remove("sharing")})}function a(r){var c,l,s,d,h;if(c="font",c+="-vari",c+="a",c+="nt",l="fon",l+="t-f",l+="amil",l+="y",s="f",s+="il",s+="l",!!r.style){d=getComputedStyle(r),h=["alignment-baseline","dominant-baseline",s,"fill-opacity",l,"font-size",c,"font-weight","text-align","text-anchor"],h.forEach(function(u){!r.style[u]&&d[u]&&(r.style[u]=d[u])});for(var p in r.children)a(r.children[p])}}t.Share=t.Share||function(){},t.Share.fullChart2PNG=function(r,c,l){if(!(!r||!r.chart)){if(typeof html2canvas=="undefined")return o(function(){return st.a3S(),e(r,c,l)});i=html2canvas,e(r,c,l)}},t.Share.createImage=function(r,c,l){var s,d,h,p,u,g,f,w,v,m,q,x;s="i",s+="mage/",d=[].slice.call(arguments),l=d.pop(),(c===null||typeof c!="object")&&(c={widthPX:d[1],heightPX:d[2],imageType:d[+"3"]}),h=c.widthPX,p=c.heightPX,u=c.imageType,g=r.chart.canvas.height,f=r.chart.canvas.width,r.chart.canvas.style.height&&(g=t.stripPX(r.chart.canvas.style.height),f=t.stripPX(r.chart.canvas.style.width)),h&&p?(g=p,f=h):p?f=r.chart.canvas.width*(g/r.chart.canvas.height):h&&(f=h,g=r.chart.canvas.height*(h/r.chart.canvas.width)),w=u?s+u:"image/png",v=document.createElement("img"),v.onload=function(){t.Share.fullChart2PNG(r,{image:this,width:f,height:g,hide:c.hide},function(k,S){st.V5R();var A;if(k)A="Error ",A+="producing canvas snapshot: ",st.O44(0),console.warn(st.y99(k,A));else try{l(S.toDataURL(w))}catch{console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),l(v.src)}})},m=882786878,q=-460968560,x=2;for(var y=1;st.R9b(y.toString(),y.toString().length,73712)!==m;y++)v.src=r.chart.canvas.toDataURL(w),x+=2;st.U5N(x.toString(),x.toString().length,7912)!==q&&(v.src=r.chart.canvas.toDataURL(w))};function o(r){var c;if(typeof html2canvas=="undefined"){if(c="h",c+="tml2canvas.min.js",typeof requirejs!="undefined")try{return requirejs(["html2canvas.min.js"],function(l){return i=l,r()})}catch{console.warn("Require loading has failed, attempting to load html2canvas manually.")}t.loadScript(n()+c,function(){var l,s,d;l=928757506,s=+"1430710211",d=2;for(var h=1;st.R9b(h.toString(),h.toString().length,74011)!==l;h++)i=html2canvas,d+=+"2";return st.U5N(d.toString(),d.toString().length,25747)!==s&&(i=html2canvas),r()})}else return i=html2canvas,r()}t.Share.uploadImage=function(r,c,l,s){var d=st,h;d.V5R(),l||(l={}),l.image=r,h=t.postAjax(c,JSON.stringify(l),function(p,u){var g,f,w;if(d.a3S(),p!=200){g=1605424915,d.O44(4),f=d.y99("2053190542",1),w=+"2";for(var v=1;d.U5N(v.toString(),v.toString().length,"44066"^0)!==g;v++)s(p,1),w+=2;d.R9b(w.toString(),w.toString().length,7369)!==f&&s(p,2),s(p,null);return}s(null,u)}),h||s(0,null)},t.Share.shareChart=function(r,c,l){var s=st;s.a3S(),t.Share.createImage(r,{},function(d){var h,p,u,g,f,w;if(h=t.uniqueID(),p="htt",p+="ps://share.chartiq.com",s.o0m(14),u=s.y99("/upload/",h,p),c&&(c.host&&(p=c.host),c.path)){s.o0m(113);var v=s.b_h(4,301,305,4,4875);s.O44(0);var m=s.y99(1390,347);s.o0m(13);var q=s.b_h(1,3,2713,5);s.o0m(0);var x=s.y99(15,630);u=p+c.path+(v==597.61?m:q>x?"/":!1)+h}g=r.getStartDateOffset(),f={layout:r.exportLayout(),drawings:r.exportDrawings(),xOffset:g,startDate:r.chart.dataSegment[g].Date,endDate:r.chart.dataSegment[r.chart.dataSegment.length-+"1"].Date,id:h,symbol:r.chart.symbol},w={id:h,image:d,config:f},t.Share.uploadImage(d,u,w,function(y,k){s.a3S();var S;y!==null?(S="error",S+=" ",S+="shar",S+="ing chart: ",t.alert(S,y)):(s.o0m(0),l(s.y99(k,p)))})})}};Ol=b=>{var t;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.ChartEngine.prototype.setRange=function(i,n){var e=st,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B;function R(j){if(j&&p===+"0"){c.scroll=T,h.setCandleWidth(P),h.layout.interval=E,h.layout.periodicity=z,h.layout.timeUnit=U,n&&n(j);return}if(p++,p>10){console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),Z();return}Z()}a="st",a+="r",a+="in",a+="g",o="s",o+="tring",t.isEmpty(i)&&(i={dtLeft:arguments[+"0"],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},n=arguments[4]),this.staticRange&&(i.goIntoPast=i.goIntoFuture=!!{}),i.chart||(i.chart=this.chart),typeof i.padding=="undefined"&&(i.padding=0),r=!{},c=i.chart,l=typeof i.dtLeft===o?new Date(i.dtLeft):i.dtLeft,s=new Date,i.dtRight&&(s=typeof i.dtRight===a?new Date(i.dtRight):i.dtRight),l||(d=this.standardMarketIterator(s,null,c),l=d.previous(c.maxTicks),i.periodicity||(r=!0)),c.inflectionPoint=l,this.layout.range={dtLeft:l,dtRight:s},h=this,p=0;function H(j,Q,et,V,K,tt){var J,at;return J=0,e.O44(3),at=e.y99(Q,j),t.ChartEngine.isDailyInterval(et)?et=="month"?J=at/t.MONTH/V:et=="week"?J=at/t.WEEK/V:J=at/t.DAY/V:isNaN(et)||(K=="millisecond"?(e.O44(117),J=e.y99(V,at,et)):K=="second"?J=at/t.SECOND/(V*et):J=at/t.MINUTE/(V*et)),Math.round(J)}if(this.quoteDriver){if(r)u=this.layout.interval,f=this.layout.timeUnit,g=this.layout.periodicity;else if(i.periodicity)w=t.cleanPeriodicity(i.periodicity.period,i.periodicity.interval,i.periodicity.timeUnit),u=w.interval,f=w.timeUnit,g=w.period;else if(v=s.getTime()-l.getTime(),this.autoPickCandleWidth.turnOn){y=0,this.autoPickCandleWidth.candleWidth?y=this.autoPickCandleWidth.candleWidth:y=this.chart.barsHaveWidth?5:2,k=c.width/y,S=this.dynamicRangePeriodicityMap,u=S[+"0"].interval,g=1;for(var X="0"*1;X<S.length;X++){if(_=v/S[X].rangeInMS,_<k){S[X-1]?(u=S[X-1].interval,f=S[X-1].timeUnit,e.o0m(9),g=Math.ceil(e.b_h(k,A))):(u=S[X].interval,f=S[X].timeUnit,g=1);break}A=_}}else{m=this.staticRangePeriodicityMap,q=null;for(var W=0;W<m.length;W++)if(x=m[W],v/x.rangeInMS<1.001){q=x;break}u=q.interval,g=q.periodicity,f=q.timeUnit}T=this.chart.scroll,P=this.layout.candleWidth,E=this.layout.interval,z=this.layout.periodicity,U=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=H(s.getTime(),l.getTime(),u,g,f,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,N=this.needDifferentData({period:g,interval:u,timeUnit:f}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>l||this.chart.endPoints.end<s)&&(N=!0),!this.chart.masterData||!this.chart.masterData.length||N||i.forceLoad?(C="w",C+="e",C+="e",C+="k",D="mo",D+="nth",F="ti",F+="ck",this.layout.interval=u,this.layout.periodicity=g,this.layout.timeUnit=f,this.layout.timeUnit||(M="t",M+="ick",I="s",I+="econd",t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:this.layout.interval==I?this.layout.timeUnit="second":this.layout.interval!=M&&(this.layout.timeUnit="minute")),L={symbol:c.symbol,symbolObject:c.symbolObject,chart:c,nodraw:!!{}},this.layout.interval==F&&(L.startDate=l,L.endDate=s),this.displayInitialized||(L.initializeChart=!![]),O={symbol:c.symbol,symbolObject:c.symbolObject,interval:this.layout.interval},(O.interval==D||O.interval==C)&&!this.dontRoll&&(O.interval="day"),B=Math.max(this.quoteDriver.getQuoteFeed(O).behavior.bufferSize+50,200),d=this.standardMarketIterator(l,null,c),L.startDate=new Date(d.previous(B).getTime()),d=this.standardMarketIterator(s,null,c),L.endDate=new Date(d.next(B).getTime()),L.endDate<Date.now()&&(this.isHistoricalModeSet=!!{}),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(L,R)):((this.layout.interval!=u||this.layout.periodicity!=g||this.layout.timeUnit!=f||!this.chart.dataSegment||!this.chart.dataSegment[0]||this.chart.dataSegment[0].DT!=c.inflectionPoint)&&(this.layout.interval=u,this.layout.periodicity=g,this.layout.timeUnit=f,this.createDataSet()),R())}else Z();function Z(j){e.V5R();var Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt;if(Q="lay",Q+="out",et="d",et+="a",et+="y",typeof j=="undefined"&&(j=null),V=0,K=0,tt=new Date,J=i.base,at=i.periodicity,ct=h.layout,i.goIntoFuture&&(!c.masterData.length||l>c.masterData[c.masterData.length-1].DT)&&(G="g",G+="a",G+="p",Y=c.masterData.length?c.masterData.pop():{DT:l},it=h.doCleanupGaps([Y,{DT:s}],c,{cleanupGaps:G,noCleanupDates:!0}),h.setMasterData(c.masterData.concat(it),c,{noCleanupDates:!![]}),h.createDataSet(null,null,{appending:!0})),rt=c.dataSet,lt=rt.length,!rt||lt==="0"<<32){n&&n(j);return}if(J===et&&at&&at.interval==="day")ht=i.multiplier,V=lt<ht?"0"^0:lt-ht,e.o0m(3),K=e.y99(1,lt);else if(J==="today"&&rt[lt-1].DT.getDate()<tt.getDate()){pt=new Date(rt[lt-("1"-0)].DT.getTime()),pt.getTime(),e.O44(31),dt=e.b_h("0",64);for(var yt=lt-1;yt>=0;yt--)if(rt[yt]&&rt[yt].DT.getDate()!=pt.getDate()){pt=new Date(+rt[yt+1].DT),e.o0m(0),dt=e.b_h(1,yt);break}V=dt,e.o0m(3),K=e.b_h(1,lt)}else ut="a",ut+="l",ut+="l",i.base!=ut&&(l.getTime()>=rt[0].DT.getTime()||i.goIntoPast)?V=h.tickFromDate(l,c,null,!![]):V=0,i.base!="all"&&(s.getTime()<=rt[lt-1].DT.getTime()||i.goIntoFuture)?(K=h.tickFromDate(s,c),K>lt-1&&K--):(e.O44(55),K=e.y99("1",lt,1));if(e.o0m(118),mt=e.b_h("1",V,K),mt<1){n&&n(j);return}gt=i.padding||"0"<<64,K<lt-1&&(gt=0),bt=(c.width-gt)/mt,h.setCandleWidth(bt,c),e.O44(119),c.scroll=e.b_h(mt,K,1,lt),e.O44(25),h.micropixels=e.b_h("1",64);for(var qt in h.panels)h.calculateYAxisMargins(h.panels[qt].yAxis);i.dontSaveRangeToLayout?delete ct.range:(delete i.chart,delete ct.setSpan,ct.range=i),h.draw(),h.changeOccurred(Q),r||h.dispatch("periodicity",{stx:h,differentData:N,prevPeriodicity:{interval:E,periodicity:z,timeUnit:U}}),n&&n(j)}},t.ChartEngine.prototype.setSpan=function(i,n){var e=st,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;a="to",a+="da",a+="y";function k(A,_){var T,P,E,z;if(!w)return A;if(T=7,_)A.setHours(A.getHours()+T);else{A.setHours(A.getHours()-T),P=343952509,e.O44(30),E=-e.b_h("1568680173",0),z=2;for(var U=+"1";e.U5N(U.toString(),U.toString().length,81995)!==P;U++)s.isMarketDate(A)||A.setDate(A.getDate()-2),z+=2;e.R9b(z.toString(),z.toString().length,76152)!==E&&+s.isMarketDate(A)&&A.setDate(A.getDate()%1)}return A}if(o=arguments[0],r=arguments[1],e.o0m(31),c=arguments[e.b_h("2",64)],l=arguments[3],typeof i=="object"?(o=i.period?i.period:i.multiplier?i.multiplier:1,r=i.interval?i.interval:i.base?i.base:i.span?i.span:i.period,c=i.padding,l=i.chart):(i={period:o,interval:r,padding:c,chart:l},n=arguments[5]),l||(l=this.chart),s=l.market,r=r.toLowerCase(),r=="all"){i.dontSaveRangeToLayout=!0,this.displayAll(i,n);return}h=r,p=1,r=="today"?h="day":r=="year"&&(h="month",p=12),u=t.shallowClone(i);function S(A){return A.setHours(0),A.setMinutes(0),A.setSeconds(0),e.a3S(),A.setMilliseconds(0),A}g={begin:s.marketZoneNow(),interval:h,period:p},f=g.begin,w=t.Market.Symbology.isForexSymbol(l.symbol),r==="ytd"?(f=S(f),f.setMonth(0),f.setDate(1)):r==="month"?(f=S(new Date),f.setMonth(f.getMonth()-o)):r==="year"?(f=S(new Date),f.setFullYear(f.getFullYear()-o)):r==="week"?(f=S(new Date),f.setDate(f.getDate()-o*("7"|4))):r==="day"&&o==1&&s.isMarketDay()?(v=f.getHours(),m=f.getMinutes(),q=f.getSeconds(),x=f.getMilliseconds(),d=s.newIterator(g),f=d.previous(),f.setHours(v,m,q,x),f=s._convertFromMarketTZ(f)):r===a?(g.begin=k(f,!0),d=s.newIterator(g),(s.isOpen()||s.getPreviousOpen().getDate()==f.getDate())&&d.next(),f=d.previous(),k(f),u.goIntoFuture=!!{},u.dtRight=new Date(+f),u.dtRight.setDate(f.getDate()+1),u.dtRight=s._convertFromMarketTZ(u.dtRight),w||(f.setHours(d.market.zopen_hour),f.setMinutes(d.market.zopen_minute),f.setSeconds(0)),f=s._convertFromMarketTZ(f)):(r=="day"&&(g.begin=k(f,!![])),d=s.newIterator(g),o==1&&o++,e.o0m(3),f=d.previous(e.b_h(1,o)),r=="day"&&(f=s._convertFromMarketTZ(k(f)))),u.dtLeft=f,u.maintainPeriodicity&&(u.periodicity={},u.periodicity.interval=this.layout.interval,u.periodicity.period=this.layout.periodicity),l.spanLock=!1,u.dontSaveRangeToLayout=!0,y=this,this.setRange(u,function(A){y.layout.setSpan=i,y.changeOccurred("layout"),e.V5R(),r=="today"&&(l.spanLock=!![]),n&&n(A)})},t.ChartEngine.prototype.getSpanCandleWidth=function(i){var n=st,e,a,o,r,c,l,s,d,h;if(e="YT",e+="D",a="d",a+="a",a+="y",o="m",o+="onth",!(!i||!i.base||!i.multiplier)){r=parseFloat(i.multiplier),c=i.base,l=new Date,s=new Date,c=="year"?s.setFullYear(s.getFullYear()-r):c==o?s.setMonth(s.getMonth()-r):c==a?s.setDate(s.getDate()-r):c=="week"?s.setDate(s.getDate()-7*r):c==e&&(s.setMonth(0),s.setDate(1)),n.o0m(109);var p=n.b_h(956,111,7,3);n.O44(32);var u=n.b_h(18,69,5,14);n.o0m(115);var g=n.y99(5,360,14,6,1);n.o0m(50);var f=n.y99(34,406,13,12);return d=(l.getTime()-s.getTime())/p/u/g/f,n.O44(107),d=n.b_h(d,5,7),h=this.chart.width/d,h}},t.ChartEngine.prototype.displayAll=function(i,n){var e,a,o;function r(d){st.a3S(),d||e.quoteDriver.loadAll(c,s)}var{chart:c,layout:l}=this;if(i&&i.chart&&(c=i.chart),e=this,!this.quoteDriver){s();return}a=i.maintainPeriodicity?{period:l.periodicity,interval:l.interval,timeUnit:l.timeUnit}:{period:1,interval:"month",timeUnit:null},st.a3S(),a=i.periodicity?i.periodicity:a,a=t.cleanPeriodicity(a.period,a.interval,a.timeUnit),o=this.needDifferentData(a),this.layout.periodicity=a.period,this.layout.interval=a.interval;function s(){var d;!c.masterData||!c.masterData.length||(d=t.clone(i),st.V5R(),d.dtLeft=c.endPoints.begin,d.dtRight=c.endPoints.end,d.periodicity={},d.periodicity.interval=l.interval,d.periodicity.period=l.periodicity,d.periodicity.timeUnit=l.timeUnit,e.setRange(d,function(h){e.layout.setSpan={base:i.base,multiplier:i.multiplier},e.changeOccurred("layout"),st.a3S();for(var p in e.panels)e.calculateYAxisMargins(e.panels[p].yAxis);e.draw(),n&&n(h)}))}this.layout.timeUnit=a.timeUnit,i.forceLoad||o?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({nodraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!!{},fetchMaximumBars:!!{}},r)):c.moreAvailable||!c.upToDate?r():(this.createDataSet(),s())}};Rl=b=>{var t=st,i,n;i="u",i+="n",i+="defined",t.a3S(),n=typeof _CIQ!==i?_CIQ:b.CIQ,n.ChartEngine.prototype.importLayout=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(o="o",o+="b",o+="ject",!e){a.cb&&a.cb();return}r=this,c=[],typeof a!==o&&(a={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),l=this.layout,s=n.shallowClone(l),d=a.managePeriodicity,h=a.cb,p=a.seriesCB,u=a.noDataLoad,g=a.preserveTicksAndCandleWidth,f=null,this.exportDrawings&&(f=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!!{};function X(at){var ct,G,Y;if(f&&r.importDrawings(f),r.currentlyImporting=!1,at)return;t.V5R();function it(){r.createDataSet(),j(r.panels),r.calculateYAxisPositions(),r.draw()}Y=[];for(var rt in r.chart.series){if(!r.removeSeries)break;G=r.chart.series[rt],G.parameters.bucket=="study"&&(ct=!![],r.removeSeries(G),Y.push(G))}for(var lt=0;lt<Y.length;lt++)G=Y[lt],r.addSeries(G.id,G.parameters,it);ct||r.draw(),r.updateListeners("layout"),r.changeOccurred("layout")}for(var Z in l.studies)w="Stud",w+="ies.removeStudy",v=l.studies[Z],n.getFn(w)(this,v);this.overlays={},m=n.shallowClone(this.panels),this.panels={},q=n.clone(e),l.periodicity=s.periodicity,l.interval=s.interval,l.timeUnit=s.timeUnit,l.setSpan=s.setSpan,l.range=s.range,g?l.candleWidth=s.candleWidth:l.candleWidth||(l.candleWidth=8),this.setCandleWidth(l.candleWidth),l.flipped&&this.flipChart(l.flipped),x=q.panels,A=function(at,ct){return at.index<ct.index?-1:1};for(y in x)_="in",_+="dex",_ in x[y]||(A=null),k=x[y],k.name=y,c.push(k);l.panels={},T=null;function j(at){for(var ct,G,Y,it="0"<<0;it<c.length;it++)ct="yax",ct+="isRHS",G="y",G+="a",G+="xis",G+="LHS",Y=c[it],rt(Y,G),rt(Y,ct);r.chart.yAxis=r.chart.panel.yAxis;function rt(dt,ht){var pt,ut,mt,gt;if(!(!dt[ht]||!dt[ht].length)&&(pt=at[dt.name],!!pt)){ut=pt[ht],mt=new Array(ut.length);for(var bt=+"0";bt<ut.length;bt++)gt=dt[ht].indexOf(ut[bt].name),gt>-("1"<<32)?mt[gt]=ut[bt]:mt.push(ut[bt]);mt.length&&(pt[ht]=mt.filter(lt))}}function lt(dt){return t.V5R(),!!dt}}if(c.length>0){A&&c.sort(A);for(var Q=0;Q<c.length;++Q)k=c[Q],S=k.yAxis?new n.ChartEngine.YAxis(k.yAxis):null,this.stackPanel(k.display,k.name,k.percent,k.chartName,S),k.soloing&&(T=this.panels[k.name])}function et(){r.calculateYAxisPositions(),j(r.panels),p&&p()}n.isEmpty(x)&&this.stackPanel("chart","chart",+"1","chart"),this.resizeCanvas();for(var V in m)if(P=m[V],E=this.panels[V],E){this.container.removeChild(E.holder),P.handle&&this.container.removeChild(P.handle),z={holder:!![],subholder:!0,display:!!{},icons:!![]};for(var K in z)E[K]=P[K];this.configurePanelControls(E),P.chart.panel==P&&(P.chart.panel=E)}else this.privateDeletePanel(P);this.chart.panel=this.panels.chart,j(this.panels),n.extend(l,n.clone(q)),U=n.clone(l.studies),delete l.studies;for(var tt in U)N=U[tt],C=n.getFn("Studies.addStudy")(this,N.type,N.inputs,N.outputs,N.parameters,N.panel),N.signalData&&(C.signalData=N.signalData,D=this.panels[C.panel],this.checkForEmptyPanel(D,!!{},C)&&(D.hidden=!0,D.percent=0));if(this.extendedHours&&this.extendedHours.prepare(l.extended,l.marketSessions),typeof l.chartType=="undefined"&&(l.chartType="line"),this.setMainSeriesRenderer(),T&&this.panelSolo(T),this.adjustPanelPositions(),j(this.panels),this.storePanels(),!u){if(q.symbols&&q.symbols.length){t.o0m(2),F=-t.y99("94648552",96),t.o0m(2),M=t.b_h("1945934534",66),I=2;for(var J=1;t.U5N(J.toString(),J.toString().length,82701)!==F;J++)L={chart:this.chart},I+=2;t.R9b(I.toString(),I.toString().length,34528)!==M&&(L={chart:this.chart}),!g&&d&&q.range&&Object.keys(q.range).length?L.range=q.range:!g&&d&&q.setSpan&&Object.keys(q.setSpan).length?L.span=q.setSpan:d&&q.interval?L.periodicity={interval:q.interval,period:q.periodicity,timeUnit:q.timeUnit}:L.periodicity={interval:s.interval,period:s.periodicity,timeUnit:s.timeUnit},O=q.symbols[0].symbolObject||q.symbols[+"0"].symbol,this.loadChart(O,L,function(at){var ct,G;if(!at){for(var Y,it=1;it<q.symbols.length&&r.addSeries;++it)Y=q.symbols[it],Y.parameters||(Y.parameters={}),ct=n.clone(Y.parameters),this.panels[ct.panel]?r.addSeries(Y.id,ct,et):(G='" could not ',G+="be imported due to a miss",G+='ing corresponding panel "',console.warn('Warning: Series "'+Y.id+G+ct.panel+'"'));q.chartScale&&r.setChartScale(q.chartScale)}X(at),t.V5R(),h&&h.apply(null,arguments)});return}if(d){if(!g&&this.setRange){if(B=q.range,B&&Object.keys(B).length&&this.chart.symbol){this.setRange(B,function(){t.V5R(),X(),h&&h()});return}else if(q.setSpan&&Object.keys(q.setSpan).length&&this.chart.symbol){this.setSpan(q.setSpan,function(){X(),h&&h()});return}}R=q.interval,H=q.periodicity,W=q.timeUnit,isNaN(H)&&(H=+"1"),R||(R="day"),this.setPeriodicity({period:H,interval:R,timeUnit:W},function(){X(),t.a3S(),h&&h()});return}}d&&(l.periodicity=q.periodicity,l.interval=q.interval,l.timeUnit=q.timeUnit,l.setSpan=q.setSpan),this.createDataSet(),g||this.home(),X(),h&&h()},n.ChartEngine.prototype.exportLayout=function(e){var a,o,r,c,l,s,d,h;a={},t.a3S();for(var p in this.layout)o="s",o+="tu",o+="dies",r="s",r+="tu",r+="die",r+="s",p!=r&&p!="panels"&&p!="drawing"?a[p]=n.clone(this.layout[p]):p==o?a.studies={}:p=="panels"&&(a.panels={});c=0;for(var u in this.panels)l=this.panels[u],l.exportable!==!1&&(s=a.panels[u]={},s.percent=l.percent,s.display=l.display,s.chartName=l.chart.name,s.soloing=l.soloing,s.index=c++,s.yAxis={name:l.yAxis.name,position:l.yAxis.position},l.yaxisLHS&&(s.yaxisLHS=f(l.yaxisLHS)),l.yaxisRHS&&(s.yaxisRHS=f(l.yaxisRHS)));for(var g in this.layout.studies)d=a.studies[g]={},h=this.layout.studies[g],d.type=h.type,d.inputs=n.clone(h.inputs),d.outputs=n.clone(h.outputs),d.panel=h.panel,d.parameters=n.clone(h.parameters),h.signalData&&(h.signalData.cloneForExport?d.signalData=h.signalData.cloneForExport():d.signalData=n.clone(h.signalData));e?(a.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!![],"exclude-generated":!!{}}),a.symbols.length&&a.symbols["0">>32].symbolObject&&a.symbols["0"<<64].symbolObject.static&&delete a.symbols[0].symbolObject.static):delete a.symbols;function f(w){var v;v=[];for(var m=+"0";m<w.length;m++)v.push(w[m].name);return v}return a},n.ChartEngine.prototype.importPreferences=function(e){n.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),e.language&&n.I18N&&n.I18N.localize(this,e.language),t.V5R(),this.changeOccurred("preferences")},n.ChartEngine.prototype.exportPreferences=function(){return this.preferences}};Nl=b=>{var t,i,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q;t="#",t+="f",t+="4",t+="932f",i="#e",i+="90",i+="8",i+="8c",n="m",n+="a",e="T",e+="rue ",e+="R",e+="ange",a="m",a+="a",o="f",o+="i",o+="e",o+="ld",r="Ex",r+="po",r+="nentia",r+="l",c="Triangula",c+="r",l="Tria",l+="n",l+="gula",l+="r",s="W",s+="e",s+="ight",s+="ed",d="Tria",d+="ng",d+="ul",d+="ar",h="weig",h+="h",h+="ted",p="v",p+="id",p+="ya",u="expon",u+="ential",g="si",g+="mp",g+="le",f="s",f+="m",f+="m",f+="a",w="t",w+="ma",v="unde",v+="f",v+="i",v+="ned",m=typeof _CIQ!="undefined"?_CIQ:b.CIQ,q=typeof _timezoneJS!==v?_timezoneJS:b.timezoneJS,m.ChartEngine&&(m.ChartEngine.prototype.rightClickOverlay=function(x,y){var k;st.V5R(),!this.runPrepend("rightClickOverlay",arguments)&&(k=this.overlays[x],k.editFunction?k.editFunction(y):this.removeOverlay(x),this.runAppend("rightClickOverlay",arguments))},m.ChartEngine.prototype.addOverlay=function(x){var y;y="addOve",st.V5R(),y+="rlay",!this.runPrepend(y,arguments)&&(this.overlays[x.name]=x,this.runAppend("addOverlay",arguments))},m.ChartEngine.prototype.removeOverlay=function(x){st.a3S();var y,k,S,A;if(!this.runPrepend("removeOverlay",arguments)){if(y=this.overlays[x],y){for(var _ in this.overlays){k="F",k+="i",k+="eld",S=this.overlays[_],A=[k],m.Studies&&(A=m.Studies.getFieldInputs(S));for(var T="0"-0;T<A.length;T++)y.outputMap[S.inputs[A[T]]]&&this.removeOverlay(S.name)}this.cleanupRemovedStudy(y),this.panels[y.panel],delete this.overlays[x],this.checkForEmptyPanel(y.panel)}this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},m.ChartEngine.prototype.cleanupRemovedStudy=function(x){if(!!x){x.study.removeFN&&x.study.removeFN(this,x);for(var y in this.plugins)y.indexOf("{"+x.id+"}")>-1&&delete this.plugins[y];x.removeSignals&&x.removeSignals(),this.layout.studies&&delete this.layout.studies[x.name],this.chart.state.studies.sorted=null,delete this.overlays[x.name];var{sd:k}=this.repositioningAnchorSelector||{};if(k&&k===x){this.repositioningAnchorSelector=null;var{anchorHandles:S}=this.controls;S&&S[x.uniqueId]&&(S[x.uniqueId].highlighted=!1,m.Studies.displayAnchorHandleAndLine(this,x,this.chart.dataSegment))}m.Studies&&m.Studies.removeStudySymbols(x,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),m.Studies=m.Studies||function(){},m.Studies.DEFAULT_INPUTS={Period:+"14"},m.Studies.DEFAULT_OUTPUTS={Result:"auto"},m.Studies.impliedVolatilityAvailable=!1,m.Studies.sortForProcessing=x=>{var y,k;y=[],k=x.layout.studies,k&&S(Object.values(k),y),st.V5R();function S(A,_){st.a3S(),A.forEach(T=>{var P;st.V5R(),_.indexOf(T)==-1&&(P=T.getDependents(x),P.length&&S(P,_),_.unshift(T))})}return y},m.Studies.StudyDescriptor=function(x,y,k,S,A,_){var T,P,E;T="u",T+="nd",T+="efine",T+="d",this.name=x,this.type=y,this.panel=k,this.inputs=S,this.outputs=A,this.parameters=_,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",st.V5R(),P=m.Studies.studyLibrary[y],P||(E="c",E+="ha",E+="r",E+="t",P={},(k==E||!k&&_&&_.chartName=="chart")&&(this.overlay=!0)),typeof P.inputs==T&&(P.inputs=m.clone(m.Studies.DEFAULT_INPUTS)),typeof P.outputs=="undefined"&&(P.outputs=m.clone(m.Studies.DEFAULT_OUTPUTS)),this.study=P,this.libraryEntry=P},m.Studies.StudyDescriptor.prototype.getYAxis=function(x){var y=st;y.a3S();var k,S,A,_,T,P;k=this.yAxis,this.parameters&&(S=this.parameters.yaxisDisplayValue),k||(A=x.panels[this.panel],A&&(k=x.getYAxisByName(A,S)||x.getYAxisByName(A,this.name)||A.yAxis)),k||(k=x.getYAxisByName(x.chart.panel,S)||x.chart.panel.yAxis),_=-+"602516019",y.o0m(2),T=y.y99("1306920886",22),P=2;for(var E=1;y.R9b(E.toString(),E.toString().length,52358)!==_;E++)return k;if(y.U5N(P.toString(),P.toString().length,"8351"|9)!==T)return k},m.Studies.StudyDescriptor.prototype.getContext=function(x){return st.a3S(),x.chart.context},m.Studies.StudyDescriptor.prototype.getDependents=function(x,y){var k,S,A;k=[],st.V5R();for(var _ in x.layout.studies)if(S=x.layout.studies[_],S!=this){A=m.Studies.getFieldInputs(S);for(var T="0">>64;T<A.length;T++)if(S.inputs[A[T]].includes(this.name)){if(y&&S.parameters&&S.parameters.panelName)continue;k.push(S),k=k.concat(S.getDependents(x,y));break}}return k},m.Studies.StudyDescriptor.prototype.undraggable=function(x){var y;if(this.signalData)return!0;if(y=this.study.attributes,y){if(y.panelName&&y.panelName.hidden)return!![];if(y.yaxisDisplayValue&&y.yaxisDisplayValue.hidden)return!0}return![]},m.Studies.StudyDescriptor.prototype.appendFutureTicks=function(x,y){var k,S,A,_;if(k=x.chart.scrubbed,st.a3S(),!!k.length){for(S=x.standardMarketIterator(k[k.length-1].DT),A=y.length-1;A>=0;A--){_=y[A];for(var T in _)if(_[T]||_[T]===0){A=-1;break}if(A==-1)break;y.pop()}for(A=0;A<y.length;A++)_=y[A],_.DT||(_.DT=S.next()),_.displayDate||x.setDisplayDate(_),_.futureTick=!0,k.push(_)}},m.Studies.generateID=function(x,y,k,S,A){var _=st,T,P,E,z,U,N,C,D,F,M;if(T=m.Studies.studyLibrary[y],_.o0m(14),P=_.y99(A||y,"\u200C","\u200C"),E=P,T&&T.customRemoval)return E;if(!m.isEmpty(k)){z=!0;for(var I in k)U="f",U+="ie",U+="ld",N="Anchor Selecto",N+="r",C="displa",C+="y",D="i",D+="d",![D,C,"Shading",N].includes(I)&&(F=k[I],F!=U&&(F=F.toString(),m.Studies.prettify[F]!==void 0&&(F=m.Studies.prettify[F]),z?(z=!{},E+=" ("):F&&(E+=","),E+=F));z||(E+=")")}if(S&&S.indexOf(E)===0)return S;if(x.layout.studies&&x.layout.studies[E]){for(var L="2"|2;L<50;L++)if(_.o0m(14),M=_.y99("-",L,E),!x.layout.studies[M]){E=M;break}}return E},m.Studies.DialogHelper=function(x){var y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut;function mt(Bt){var zt,Pt,Nt,_t;zt="se",zt+="l",zt+="ect",Pt={},Nt=Bt.defaults,_t={name:Bt.name,heading:y.translateIf(Bt.label),defaultValue:Nt[0],value:Bt.value,options:Pt,type:zt};for(var Vt="0"-0;Vt<Nt.length;Vt++)Pt[Nt[Vt]]=y.translateIf(Nt[Vt]);return Bt.color!==void 0&&(_t.defaultColor=y.defaultColor,_t.color=Bt.color),_t}y=this.stx=x.stx,k=this.sd=x.sd,this.name=k?k.type:x.name,this.signal=1,this.inputs=[];function gt(Bt){var zt;return zt={name:Bt.name,heading:y.translateIf(Bt.label),defaultValue:Bt.defaults,value:Bt.value,type:"checkbox"},st.V5R(),zt}this.outputs=[],this.parameters=[],S=this.libraryEntry=k?k.study:m.Studies.studyLibrary[x.name],typeof S.inputs=="undefined"&&(S.inputs=m.clone(m.Studies.DEFAULT_INPUTS)),typeof S.outputs=="undefined"&&(S.outputs=m.clone(m.Studies.DEFAULT_OUTPUTS)),A=k&&y.panels[k.panel]?y.panels[k.panel]:y.chart.panel;function bt(Bt){var zt;if(it=="alias"){zt=1;for(var Pt in y.panels){if(Pt==Bt)return Nt(Pt,zt);zt++}}function Nt(_t,Vt){st.a3S();var ee;return ee="Pane",ee+="l ",ee+Vt.toString()}return Bt}_=A.chart,this.title=y.translateIf(S.name),this.attributes=m.clone(S.attributes),this.attributes||(this.attributes={});for(var yt in this.attributes){T=this.attributes[yt];for(var qt in T)typeof T[qt]=="function"&&(T[qt]=T[qt].call(k))}P=[],E=y.layout.studies,z=[],k&&(z=Array.prototype.concat(k,k.getDependents(y)));for(var St in E)if(!E[St].signalData&&!(z.indexOf(E[St])>-("1"^0)))for(var Tt in E[St].outputMap)P.push(Tt);for(var wt in S.inputs)if(U={},this.inputs.push(U),U.name=wt,U.heading=y.translateIf(wt),N=S.inputs[wt],k&&k.inputs&&typeof k.inputs[wt]!="undefined"&&k.inputs[wt]!==null?U.value=k.inputs[wt]:U.value=S.inputs[wt],U.defaultInput=S.inputs[wt],this.attributes[wt]||(this.attributes[wt]=m.Studies.inputAttributeDefaultGenerator(U.defaultInput)),N.constructor==Number)U.type="number";else if(N.constructor==String)if(C=m.Studies.movingAverageHelper(y,U.defaultInput),C)U.type="select",U.defaultInput=C,D=m.Studies.movingAverageHelper(y,U.value),D||(D=U.value),U.value=D,U.options=m.Studies.movingAverageHelper(y,"options");else if(N=="field"){F="f",F+="iel",F+="d",M="o",M+="hl",M+="c/4",I="h",I+="l",I+="c",I+="/3",L="h",L+="l",L+="/",L+="2",O="A",O+="dj_Close",B="s",B+="e",B+="lec",B+="t",U.type=B,U.options={},R=["Open","High","Low","Close",O,L,I,"hlcc/4",M,_.defaultPlotField].concat(P);for(var Ct=0;Ct<R.length;Ct++)H=R[Ct],U.options[H]=y.translateIf(H);U.value==F&&(U.value="Close"),U.defaultInput=="field"&&(U.defaultInput="Close")}else W="d",W+="at",W+="e",U.type="text",this.attributes[wt].placeholder=="yyyy-mm-dd"?U.type=W:this.attributes[wt].placeholder=="hh:mm:ss"&&(U.type="time");else if(N.constructor==Boolean)X="t",X+="r",X+="ue",Z="c",Z+="he",Z+="ckbox",U.type=Z,(U.value===!0||U.value==X||U.value=="on")&&(U.value=!0);else if(N.constructor==Array){U.type="select",U.options={};for(var Rt=0;Rt<N.length;Rt++)U.options[N[Rt]]=y.translateIf(N[Rt]);U.value.constructor==Array&&(U.value=U.value[0]),this.attributes[wt].defaultSelected?U.defaultInput=this.attributes[wt].defaultSelected:U.defaultInput=N[0]}this.dateTimeInputs=[];for(var Ht=0;Ht<this.inputs.length;Ht++)if(j="d",j+="a",j+="t",j+="e",Q=this.inputs[Ht],Q.type==j){et=Q.name.substring(0,Q.name.indexOf(" Date"));for(var jt=+"0";jt<this.inputs.length;jt++)if(V="t",V+="ime",K=this.inputs[jt],K.type==V&&K.name==et+" Time"){this.dateTimeInputs.push(et);break}}this.adjustInputTimesForDisplayZone();for(wt in S.outputs)tt={name:wt,heading:y.translateIf(wt)},tt.color=tt.defaultOutput=S.outputs[wt],k&&k.outputs&&k.outputs[wt]&&(tt.color=k.outputs[wt]),tt.color=="auto"&&(tt.color=y.defaultColor),this.outputs.push(tt);J=k?k.parameters:null,S.parameters&&(at=S.parameters.init,at&&(at.studyOverZonesEnabled!==void 0&&(G="Sho",G+="w Zones",ct={name:"studyOverZones",heading:y.translateIf(G),defaultValue:at.studyOverZonesEnabled,value:at.studyOverZonesEnabled},J&&(J.studyOverZonesEnabled||J.studyOverZonesEnabled===!{})&&(ct.value=J.studyOverZonesEnabled),ct.type="checkbox",this.parameters.push(ct)),at.studyOverBoughtValue!==void 0&&(Y="a",Y+="u",Y+="to",ct={name:"studyOverBought",heading:y.translateIf("OverBought"),defaultValue:at.studyOverBoughtValue,value:at.studyOverBoughtValue,defaultColor:at.studyOverBoughtColor,color:at.studyOverBoughtColor},J&&J.studyOverBoughtValue&&(ct.value=J.studyOverBoughtValue),J&&J.studyOverBoughtColor&&(ct.color=J.studyOverBoughtColor),ct.color==Y&&(ct.color=y.defaultColor),ct.type="text",this.parameters.push(ct)),at.studyOverSoldValue!==void 0&&(ct={name:"studyOverSold",heading:y.translateIf("OverSold"),defaultValue:at.studyOverSoldValue,value:at.studyOverSoldValue,defaultColor:at.studyOverSoldColor,color:at.studyOverSoldColor},J&&J.studyOverSoldValue&&(ct.value=J.studyOverSoldValue),J&&J.studyOverSoldColor&&(ct.color=J.studyOverSoldColor),ct.color=="auto"&&(ct.color=y.defaultColor),ct.type="text",this.parameters.push(ct)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})));function $t(Bt,zt){var Pt;Pt=this,Pt.attributes[Bt]||(Pt.attributes[Bt]={}),zt&&(Pt.attributes[Bt].hidden=!![])}it=this.panelSelect=x.panelSelect,rt=this.axisSelect=x.axisSelect,x.addWhenDone&&(rt=it=![]),(rt||it)&&(lt="pa",lt+="nel",lt+="Na",lt+="me",dt="flippedEn",dt+="abled",k||(k=m.Studies.addStudy(y,x.name,null,null,{calculateOnly:!0}),m.Studies.removeStudy(y,k)),it&&this.parameters.push(mt({label:"Panel",name:"panelName",defaults:function(){var Bt;st.V5R(),Bt=[],Bt.push("Auto");for(var zt in y.panels)(zt!=k.panel||!J||!J.panelName)&&(y.panels[zt].noDrag||Bt.push(bt(zt)));return y.checkForEmptyPanel(k.panel,!![],k)||Bt.push("New panel"),Bt}(),value:J&&J.panelName?bt(J.panelName):"Auto"}),gt({label:"Show as Underlay",name:"underlay",defaults:!{},value:k.underlay||k.parameters&&k.parameters.underlayEnabled})),ht=y.getYAxisByName(A,k.name),rt&&(pt="Invert Y",pt+="-Axis",ut="yaxi",ut+="s",ut+="Dis",ut+="play",this.parameters.push(mt({label:"Y-Axis",name:ut,defaults:function(){var Bt,zt,Pt;Bt="non",Bt+="e",zt=A.yaxisLHS.concat(A.yaxisRHS),Pt=[],Pt.push("default","right","left",Bt,"shared");for(var Nt=0;Nt<zt.length;Nt++)zt[Nt]!=ht&&Pt.push(zt[Nt].name);return Pt}(),value:J&&J.yaxisDisplayValue||ht&&ht.position||(ht?"default":"shared"),color:ht&&ht.textStyle?ht.textStyle:"auto"}),gt({label:pt,name:"flipped",defaults:![],value:J&&J.flippedEnabled!==void 0?J.flippedEnabled:ht?ht.flipped:!{}}))),$t.call(this,dt,!ht&&k.panel!=k.name),$t.call(this,"underlayEnabled",S.underlay),$t.call(this,lt,S.seriesFN===null),$t.call(this,"yaxisDisplayValue",S.seriesFN===null||S.yAxis&&S.yAxis.noDraw))},m.Studies.DialogHelper.prototype.updateStudy=function(x){var y,k,S,A;y={},k=this.sd;function _(P){var E,z,U;E="a",E+="lia",E+="s";function N(D){var F;return F=D.match(/.* (\d)/),F&&F[1]}if(z=this,z.panelSelect==E&&(U=N(P),U)){for(var C in z.stx.panels)if(!--U)return C}return P}S=this.libraryEntry,S||(S={}),k||(k=S),y.inputs=m.clone(k.inputs),y.outputs=m.clone(k.outputs),y.parameters=m.clone(k.parameters),this.adjustInputTimesForDisplayZone(x),x.parameters&&x.parameters.panelName&&(x.parameters.panelName=_.call(this,x.parameters.panelName)),m.extend(y,x),y.parameters||(y.parameters={}),y.inputs&&y.inputs.id?k=m.Studies.replaceStudy(this.stx,y.inputs.id,this.name,y.inputs,y.outputs,y.parameters,null,k.study):k=m.Studies.addStudy(this.stx,this.name,y.inputs,y.outputs,y.parameters,null,k.study),A=new m.Studies.DialogHelper({stx:this.stx,sd:k,axisSelect:this.axisSelect,panelSelect:this.panelSelect});for(var T in A)T!="signal"&&(this[T]=A[T]);this.signal*=-1},m.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(x){var y=st,k,S,A,_,T,P,E,z,U;if(this.stx.displayZone)for(var N=0;N<this.dateTimeInputs.length;N++){for(k=this.dateTimeInputs[N],P="",x&&x.inputs&&(y.O44(0),A=x.inputs[y.y99(" Date",k)],y.o0m(0),_=x.inputs[y.y99(" Time",k)],A&&(P=A),_&&(P+=_)),S="0"^0;S<this.inputs.length;S++)E=" ",E+="Da",E+="te",T=this.inputs[S],!A&&A!==""&&T.name==k+E?P=T.value+P:!_&&_!==""&&T.name==k+" Time"&&(P+=T.value);if(P=P.replace(/\D/g,""),P.length<12)return;if(z=m.strToDateTime(P),!isNaN(z.valueOf()))if(x)x.inputs||(x.inputs={}),U=m.convertTimeZone(z,this.stx.displayZone),y.o0m(0),x.inputs[y.b_h(" Date",k)]=m.yyyymmdd(U),y.o0m(0),x.inputs[y.y99(" Time",k)]=m.hhmmss(U);else for(U=m.convertTimeZone(z,null,this.stx.displayZone),S=0;S<this.inputs.length;S++)T=this.inputs[S],T.name==k+" Date"&&(T.value=m.yyyymmdd(U)),T.name==k+" Time"&&(T.value=m.hhmmss(U))}},m.Studies.prepareStudy=function(x,y,k){var S=st,A;if(A="undefine",A+="d",typeof y.calculateFN==A&&(y.useRawValues=!![]),m.isEmpty(k.outputMap))for(var _ in k.outputs)if(y.useRawValues)k.outputMap[_]=_;else{S.O44(120);var T=S.y99(295,3,9,5317,10);S.O44(115);var P=S.y99(154470,12246490,14,17,3);S.O44(109);var E=S.b_h(8154,8184,18,1023);k.outputMap[_+(T!=61.47?P!=E?" ":!{}:"B")+k.name]=_}},m.Studies.rejiggerDerivedStudies=function(x,y,k){var S,A,_,T,P,E,z;S=y.name,y.panel,A=y.getDependents(x);for(var U=0;U<A.length;U++)if(_=A[U],T=m.clone(_.inputs),P=T.id,!!P){E=m.Studies.getFieldInputs(_);for(var N=0;N<E.length;N++)T[E[N]]=T[E[N]].replace(S,k);z=m.Studies.replaceStudy(x,P,_.type,T,_.outputs,m.extend(_.parameters,{rejiggering:!0}),null,_.study),delete z.parameters.rejiggering}},m.Studies.removeStudySymbols=function(x,y){var k;if(x.series)for(var S in x.series)k="rem",k+="ove-",k+="stu",k+="dy",y.deleteSeries(x.series[S],null,{action:k});st.a3S()},m.Studies.replaceStudy=function(x,y,k,S,A,_,T,P){var E,z,U,N,C;_||(_={}),y&&(_.replaceID=y),y=_.replaceID,E=x.layout.studies[y],m.Studies.removeStudySymbols(E,x),E.attribution&&x.removeFromHolder(E.attribution.marker),x.quoteDriver&&x.quoteDriver.updateSubscriptions(),S&&(S.id==S.display&&delete S.display,delete S.id),z=m.Studies.addStudy(x,k,S,A,_,T,P),z.highlight=E.highlight,z.uniqueId=E.uniqueId,E.signalData&&(z.signalData=E.signalData,z.signalData.updateConditions&&z.signalData.updateConditions(y,z.inputs.id)),N={};for(U in x.layout.studies)U==y?N[z.name]=z:N[U]=x.layout.studies[U];x.layout.studies=N,N={};for(U in x.overlays)U==y?(z.overlay||z.underlay)&&(N[z.name]=z):N[U]=x.overlays[U];return x.overlays=N,!x.overlays[z.name]&&(z.overlay||z.underlay)&&x.addOverlay(z),x.checkForEmptyPanel(E.panel),_.rejiggering||(x.initializeDisplay(x.chart),m.Studies.rejiggerDerivedStudies(x,E,z.inputs.id,z.panel)),m.transferObject(E,z),x.layout.studies[z.name]=E,x.overlays[z.name]=E,x.chart.state.studies.sorted=null,_.rejiggering||(C="l",C+="ay",C+="out",x.changeOccurred(C),!E.currentlyImporting&&!_.calculateOnly&&E.chart.dataSet&&x.createDataSet(null,E.chart),x.draw()),E},m.Studies.addStudy=function(x,y,k,S,A,_,T){var P=st,E,z,U,N,C,D,F,M,I,L,O,B,R,H;if(E="Default",E+=" panel",z=T||m.Studies.studyLibrary[y],A||(A={}),z){if(z.inputs){U=m.clone(z.inputs);for(var W in U)U[W]instanceof Array&&(z.attributes&&z.attributes[W]&&z.attributes[W].defaultSelected?U[W]=z.attributes[W].defaultSelected:U[W]=U[W][+"0"]);k=m.extend(U,k)}z.outputs&&(S=m.extend(m.clone(z.outputs),S)),N=z.parameters,N&&N.init&&(A=m.extend(m.clone(N.init),A)),N&&!A.display&&(A.display=N.display)}if(k||(k=m.clone(m.Studies.DEFAULT_INPUTS)),S||(S=m.clone(m.Studies.DEFAULT_OUTPUTS)),A.chartName||(A.chartName="chart"),(A.panelName=="Auto"||A.panelName==E)&&(A.panelName=""),k.Period<1&&(k.Period=1),C=null,x.layout.studies||(x.layout.studies={}),z&&z.initializeFN?C=z.initializeFN(x,y,k,S,A,_,T):C=m.Studies.initializeFN(x,y,k,S,A,_,T),C){if(C==="abort")return}else{P.O44(0),console.log(P.b_h(y,"CIQ.Studies.addStudy: initializeFN() returned null for "));return}if(T=C.study,C.chart=x.charts[A.chartName],C.type=y,C.permanent=T.permanent,C.customLegend=T.customLegend,C.uniqueId=m.uniqueID(),m.Studies.prepareStudy(x,T,C),D=x.chart.state.studies,D||(D=x.chart.state.studies={}),D.sorted=null,A.replaceID?(F=!![],delete A.replaceID):(x.layout.studies[C.inputs.id]=C,(C.overlay||C.underlay)&&x.addOverlay(C),!x.currentlyImporting&&!A.calculateOnly&&C.chart.dataSet&&x.createDataSet(null,C.chart)),x.quoteDriver&&x.quoteDriver.updateSubscriptions(),A.calculateOnly)return x.changeOccurred("layout"),C;if(M=x.panels[C.panel],I=!{},L=!(C.overlay||C.underlay),P.V5R(),L&&T.horizontalCrosshairFieldFN&&(M.horizontalCrosshairField=T.horizontalCrosshairFieldFN(x,C)),x.editCallback?I=!!{}:L?x.callbackListeners.studyPanelEdit&&x.callbackListeners.studyPanelEdit.length&&(I=!0):x.callbackListeners.studyOverlayEdit&&x.callbackListeners.studyOverlayEdit.length&&(I=!0),I){A.editMode=!!{},O=!1;for(var X in C.inputs)if(X!="id"&&X!="display"){O=!0;break}if(!O)for(var Z in C.outputs){O=!0;break}O&&(B="u",B+="n",B+="d",B+="efined",typeof C.study.edit!=B?C.study.edit&&(R=function(j,Q,et,V){return P.a3S(),function(){m.clearCanvas(j.chart.tempCanvas,j),Q.study.edit(Q,{stx:j,inputs:et,outputs:V,parameters:A})}}(x,C,k,S),x.setPanelEdit(M,R),C.editFunction=R):L?x.editCallback?(H="cha",H+="rt",R=function(j,Q,et,V){return function(){var K;K=j.editCallback(j,Q),P.V5R(),m.clearCanvas(j.chart.tempCanvas,j),m.Studies.studyDialog(j,y,K,{inputs:et,outputs:V,parameters:A})}}(x,C,k,S),M.name!=H&&x.setPanelEdit(M,R)):(R=function(j,Q,et,V,K){return function(){P.a3S(),m.clearCanvas(j.chart.tempCanvas,j),j.dispatch("studyPanelEdit",{stx:j,sd:Q,inputs:et,outputs:V,parameters:K})}}(x,C,k,S,A),M.name!="chart"&&(x.setPanelEdit(M,R),C.editFunction=R)):(R=function(j,Q,et,V,K){return P.V5R(),function(tt){P.V5R(),m.clearCanvas(j.chart.tempCanvas,j),j.dispatch("studyOverlayEdit",{stx:j,sd:Q,inputs:et,outputs:V,parameters:K,forceEdit:tt})}}(x,C,k,S,A),C.editFunction=R))}return x.changeOccurred("layout"),F||x.draw(),C},m.Studies.removeStudy=function(x,y){var k,S,A,_;k=x.panels[y.panel],st.a3S(),S=k&&k.yAxis.name,(y.overlay||y.underlay)&&x.removeOverlay(y.name),A=x.panels[y.panel],y.attribution&&x.removeFromHolder(y.attribution.marker),x.cleanupRemovedStudy(y),A&&!x.checkForEmptyPanel(A)&&(S==y.name&&x.electNewPanelOwner(A),_=x.getYAxisByName(y.panel,y.name),_&&(_.name=_.studies[1]||_.renderers[+"0"])),x.draw(),x.resizeChart()},m.Studies.getPanelFromFieldName=function(x,y){var k,S,A,_,T;if(k=m.Studies.getFieldInputs(y),!k.length||(S=x.layout.studies,!S))return null;A={};for(var P in S)for(var E in S[P].outputMap)A[E]=S[P].panel;for(var z=0;z<k.length;z++)if(_=y.inputs[k[z]],_&&(T=A[_],T))return T;return null},m.Studies.createLibraryHash=function(){return Object.keys(m.Studies.studyLibrary).join("|")},m.Studies.displayStudies=function(x,y,k){var S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O;if(k&&(y.studyLibraryHash=m.Studies.createLibraryHash()),S=x.layout.studies,!!S){A={},A[y.name]=!0;for(var B in S)if(_="u",_+="nde",_+="fined",T=S[B],P=T.study,!!P&&!(T.signalData&&!T.signalData.reveal)&&(E=T.underlay||T.parameters&&T.parameters.underlayEnabled,!(k&&!E||!k&&E))){if(z=m.clone(P.renderer),z&&!(z instanceof Array)&&(z=[z]),U=x.panels[T.panel],U){if(U.chart!=y||U.hidden)continue;A[U.name]||(N=T.permanent||!x.manageTouchAndMouse,U.closeX?N&&(U.closeX.style.display="none"):U.close&&N&&(U.close.style.display="none"),U.edit&&N&&(U.edit.style.display="none"),A[U.name]=N)}else{x.currentlyImporting&&delete S[B];continue}if(C=T.chart.dataSegment,T.panel==T.parameters.chartName&&(!T.parameters||!T.parameters.panelName)&&(D=m.Studies.getPanelFromFieldName(x,T),D&&T.panel!=D&&(T.panel=D)),typeof P.seriesFN==_){if(z){T.overlay||m.Studies.createYAxis(x,T,C,U);for(var R=0;R<z.length;R++){F=z[R];for(var H in T.outputMap)T.outputMap[H]==F.field&&(F.field=H);if(!!F.field){if(F.panel=T.panel,M=F.binding,M)for(var W in M)I="a",I+="uto",L=m.Studies.determineColor(T.outputs[M[W]]),L&&L!=I&&(F[W]=L);F.yAxis=null,O=m.Renderer.produce(F.type,F),O.stx=x,O.attachSeries(null,F).draw()}}}else m.Studies.displaySeriesAsLine(x,T,C);U&&m.Studies.displayError(x,T)}else P.seriesFN&&U&&(P.seriesFN(x,T,C),m.Studies.displayError(x,T))}}},m.Studies.displayError=function(x,y,k){var S,A;if(!!y.error){if(S=k&&k.panel?k.panel:y.panel,A=y.error===!![]?x.translateIf("Not enough data to compute ")+x.translateIf(y.study.name):x.translateIf(y.error),k&&(k.h!=="center"||k.v!=="bottom")){x.watermark(S,k);return}x.displayErrorAsWatermark(S,A)}},m.Studies.calculateMinMaxForDataPoint=function(x,y,k){var S,A,_;S=Number.MAX_VALUE,st.o0m(3);var T=st.y99(1,0);A=Number.MAX_VALUE*T;for(var P=0;P<k.length;P++)_=k[P][y],!(_===null||typeof _=="undefined")&&(isNaN(_)||(S=Math.min(_,S),A=Math.max(_,A)));return{min:S,max:A}},m.Studies.getYAxisParameters=function(x,y){st.a3S();var k,S,A,_,T;return k={},S=x.layout.studies&&x.layout.studies[y.name],S&&(A=S.study,A.yaxis||A.yAxisFN?k.noDraw=!0:(A.parameters&&A.parameters.excludeYAxis&&(k.noDraw=!0),k.ground=A.yAxis&&A.yAxis.ground,y&&(A.range!="bypass"&&(_="-1 ",_+="t",_+="o",_+=" 1",T="0",T+=" to",T+=" 10",T+="0",A.range==T?k.range=[0,100]:A.range==_?k.range=[-1,1]:A.range=="0 to max"?k.range=[0,Math.max(0,y.high)]:(A.centerline||A.centerline==="0">>32)&&(k.range=[Math.min(A.centerline,y.low),Math.max(A.centerline,y.high)])),k.range&&(y.low=k.range[0],y.high=k.range[1]),S.min&&(y.min=S.min),S.max&&(y.max=S.max),S.parameters&&S.parameters.studyOverZonesEnabled&&(k.noDraw=!0)))),k},m.Studies.doPostDrawYAxis=function(x,y){var k,S,A,_,T;for(var P in x.layout.studies)k=x.layout.studies[P],S=x.panels[k.panel],!(!S||S.hidden)&&(A=k.getYAxis(x),A==y&&(_=k.study,y.name==k.name&&(_.yaxis&&_.yaxis(x,k),_.yAxisFN&&_.yAxisFN(x,k)),m.Studies.drawZones(x,k),k.error||(T=_.centerline,(T||T===0||T!==null&&y.highValue-+"0.000000000001">0&&y.lowValue+("0.000000000001"-0)<0)&&m.Studies.drawHorizontal(x,k,null,T||0,y))))},m.Studies.displaySeriesAsLine=function(x,y,k){var S;if(!!k.length&&(S=x.panels[y.panel],st.a3S(),!(!S||S.hidden)))for(var A in y.outputMap)m.Studies.displayIndividualSeriesAsLine(x,y,S,A,k)},m.Studies.displaySeriesAsHistogram=function(x,y,k){var S,A,_,T,P,E,z,U,N,C,D;if(!!k.length&&(S=x.panels[y.panel],!!S&&!S.hidden)){A=[];for(var F in y.outputMap)_=y.outputs[y.outputMap[F]],_&&(T=.3,typeof _=="object"&&(T=_.opacity,_=_.color),P={field:F,fill_color_up:_,border_color_up:_,fill_color_down:_,border_color_down:_},y.underlay&&(P.opacity_up=P.opacity_down=T||.3),A.push(P));E=y.getYAxis(x),st.a3S(),z=y.inputs,U=z.WidthFactor,y.study&&y.study.parameters&&(N="u",N+="n",N+="def",N+="ined",C=y.study.parameters,typeof C.widthFactor!==N&&(U=C.widthFactor)),D={name:y.name,type:z.HistogramType?z.HistogramType:"overlaid",panel:y.panel,yAxis:E,widthFactor:U||.5,bindToYAxis:!0,highlight:y.highlight},x.drawHistogram(D,A)}},m.Studies.displayIndividualSeriesAsLine=function(x,y,k,S,A){var _=st,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(T="ste",T+="p",P="au",P+="to",k.height||(k.height=k.bottom-k.top),E=y.getContext(x),z=y.outputs[y.outputMap[S]],!!z){if(E.save(),typeof z=="string"&&(z={color:z,width:1}),E.lineWidth=z.width||1,U=z.color,U==P&&(U=x.defaultColor),E.strokeStyle=U,N=z.pattern,E.setLineDash(m.borderPatternToArray(E.lineWidth,N)),_.o0m(4),E.lineDashOffset=_.y99("0",1),C=0,D=y.study,F=y.getYAxis(x),C=x.decimalPlacesFromPriceTick(F.priceTick,F.idealTickSizePixels),(y.overlay||y.underlay)&&(C=null),(F.decimalPlaces||F.decimalPlaces===+"0")&&(C=F.decimalPlaces),M=null,y.parameters&&(M=y.parameters.label),I=D.parameters,I||(I={}),L=I.plotType==T,y.series)for(var X in y.series)O=y.series[X].parameters.type,O&&(_.O44(65),L=_.b_h("step",O));I.noLabels&&(M=!1),!y.noSlopes&&y.noSlopes!==![]&&(y.noSlopes=I.noSlopes),!y.extendToEnd&&y.extendToEnd!==![]&&(y.extendToEnd=I.extendToEnd),B=M||x.preferences.labels&&M!==!1,R=y.gaplines,R===!{}&&(R="transparent"),_.V5R(),H=y.inputs.Symbol,W=R?x.getGapColorFunction(H,S,z,R):null,x.plotDataSegmentAsLine(S,k,{yAxis:F,skipTransform:x.panels[y.panel].name!=y.chart.name,label:B,labelDecimalPlaces:C,noSlopes:y.noSlopes,step:L,alignStepToSide:y.alignStepToSide,extendToEndOfLastBar:y.extendToEndOfLastBar,width:y.lineWidth,extendToEndOfDataSet:y.extendToEnd,gapDisplayStyle:R,highlight:y.highlight},W),D.appendDisplaySeriesAsLine&&D.appendDisplaySeriesAsLine(x,y,A,S,k),E.restore()}},m.Studies.drawHorizontal=function(x,y,k,S,A,_){var T,P,E;T=x.panels[y.panel],P=x.getBackgroundCanvas().context,T&&(_||(_=A.textStyle),E=x.pixelFromPrice(S,T,A),E>A.top&&E<A.bottom&&x.plotLine(T.left,T.right,E,E,_,"segment",P,!1,{opacity:_&&_.opacity?_.opacity:+"0.5"}))},m.Studies.displayHistogramWithSeries=function(x,y,k){var S;x.panels[y.panel],S=.5,y.underlay&&(S=.3),m.Studies.createHistogram(x,y,k,![],S),m.Studies.displaySeriesAsLine(x,y,k)},m.Studies.drawZones=function(x,y,k){var S=st,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G;if(A="a",A+="u",A+="t",A+="o",_="a",_+="uto",!(!y.parameters||!y.parameters.studyOverZonesEnabled)){if(T=parseFloat(y.parameters.studyOverSoldValue),P=parseFloat(y.parameters.studyOverBoughtValue),E=y.parameters.studyOverSoldColor,z=y.parameters.studyOverBoughtColor,U=y.zoneOutput,U||(U="Result"),N=m.Studies.determineColor(y.outputs[U]),(!N||N==_||m.isTransparent(N))&&(N=x.defaultColor),E||(E=N),(!E||E==A||m.isTransparent(E))&&(E=x.defaultColor),z||(z=N),(!z||z=="auto"||m.isTransparent(z))&&(z=x.defaultColor),C=x.panels[y.panel],D=y.getYAxis(x),F=D.displayBorder,x.axisBorders===!1&&(F=!1),x.axisBorders===!0&&(F=!!{}),D.width===0&&(F=!{}),M=x.getYAxisCurrentPosition(D,C),S.o0m(65),I=S.b_h("left",M),L=D.justifyRight,!L&&L!==!1&&(x.chart.yAxis.justifyRight||x.chart.yAxis.justifyRight===![]?L=x.chart.yAxis.justifyRight:L=I),O=Math.round(D.left+(I?D.width:0))+.5,B=F?+"3":0,R=x.getBackgroundCanvas().context,H=R.fillStyle,R.globalAlpha=.2,x.startClip(C.name,!0),R.beginPath(),W=Math.round(x.pixelFromPrice(P,C,D))-.5,R.strokeStyle=z,R.moveTo(C.left,W),R.lineTo(C.right,W),R.stroke(),R.closePath(),R.beginPath(),X=Math.round(x.pixelFromPrice(T,C,D))+.5,S.a3S(),R.strokeStyle=E,R.moveTo(C.left,X),R.lineTo(C.right,X),R.stroke(),R.closePath(),Z=new m.Plotter,Z.newSeries("border","stroke",x.canvasStyle("stx_grid_border")),F&&(j="b",j+="order",Q=I?O-B:O-.5,et=I?O+.5:O+B,Z.moveTo("border",Q,W),Z.lineTo(j,et,W),Z.moveTo("border",Q,X),Z.lineTo("border",et,X)),R.fillStyle=H,V={skipTransform:x.panels[y.panel].name!=y.chart.name,panelName:y.panel,band:U+" "+y.name,yAxis:D,opacity:.3},!y.highlight&&x.highlightedDraggable&&(V.opacity*=.3),m.preparePeakValleyFill(x,m.extend(V,{threshold:P,direction:D.flipped?-1:1,color:z})),m.preparePeakValleyFill(x,m.extend(V,{threshold:T,direction:D.flipped?1:-1,color:E})),S.o0m(4),R.globalAlpha=S.b_h("1",1),(!y.study||!y.study.yaxis)&&(F&&(K="bo",K+="r",K+="der",tt=Math.round(D.bottom)+.5,Z.moveTo(K,O,D.top),Z.lineTo("border",O,tt),Z.draw(R,"border")),D.width!==0)){J="st",J+="x_yaxi",J+="s",at="l",at+="eft",x.canvasFont("stx_yaxis",R),x.canvasColor("stx_yaxis",R),R.textAlign=L?"right":at,S.O44(121);var Y=S.b_h(10,4,12,3358,7);if(ct=x.getCanvasFontSize(J)/Y,I){S.o0m(122);var it=S.y99(15,15,672,3);if(G=D.left+it,L){S.o0m(23);var rt=S.y99(123,7,18);G=D.left+D.width-B-rt}}else{S.o0m(0);var lt=S.y99(3,0);G=D.left+B+lt,L&&(G=D.left+D.width)}W>D.top+ct&&(R.fillStyle=z,R.fillText(P,G,W)),X<D.bottom-ct&&(R.fillStyle=E,R.fillText(T,G,X)),R.fillStyle=H}x.endClip(),R.globalAlpha=1,D.name==y.name&&(D.yAxisPlotter=new m.Plotter)}},m.Studies.createHistogram=function(x,y,k,S,A){var _=st,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z;T=x.panels[y.panel],P=y.getContext(x),E=y.getYAxis(x),x.startClip(T.name),_.O44(22);var j=_.y99(2,4,1);z=x.layout.candleWidth-j,z<2&&(_.O44(3),z=_.y99(0,"1")),U=x.pixelFromPrice(+"0",T,E),_.V5R(),E.min>("0"|0)&&(U=x.pixelFromPrice(E.min,T,E)),S&&(U=Math.floor(T.top+T.height/2)),N=y.name+"_hist",x.canvasColor("stx_histogram"),C=P.fillStyle,(A||A===0)&&(P.globalAlpha=A),!y.highlight&&x.highlightedDraggable&&(P.globalAlpha*=.3),D=null,F=null,M=y.outputs;for(var Q=0;Q<k.length;Q++)if(I=k[Q],!!I){if(I.candleWidth&&(z=Math.floor(Math.max("1"*1,I.candleWidth-2))),L=Math.floor(x.pixelFromBar(Q,T.chart)-z/2),O=Math.floor(z),D===null){_.o0m(18);var et=_.y99(19,0,20);B=x.tickFromPixel(L,T.chart)-et,B<0?D=F:D=x.pixelFromPrice(x.chart.dataSet[B][N],T,E)-U}else D=F;F=x.pixelFromPrice(I[N],T,E)-U,R=m.Studies.determineColor(M["Decreasing Bar"]),H=m.Studies.determineColor(M["Increasing Bar"]),W=m.Studies.determineColor(M["Positive Bar"]),X=m.Studies.determineColor(M["Negative Bar"]),Z=E.flipped,P.fillStyle=C,R&&(Z?F<D:F>D)?P.fillStyle=R:H&&(Z?F>D:F<D)?P.fillStyle=H:W&&(Z?F>0:F<0)?P.fillStyle=W:X&&(Z?F<"0">>0:F>0)&&(P.fillStyle=X),P.fillRect(L,U,O,Math.floor(F))}P.globalAlpha=1,x.endClip()},m.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:w,VIDYA:"vdma",weighted:"wma","welles wilder":f,true:"y",false:"n"},m.Studies.prettyRE=/^.*\((.*?)\).*$/,m.Studies.prettyDisplay=function(x){var y,k;if(y=m.Studies.prettyRE.exec(x),!y)return x;if(k=y[1],k){for(var S in m.Studies.prettify)k=k.replace(S,m.Studies.prettify[S]);x=x.replace(y[1],k)}return x},m.Studies.getFieldInputs=function(x){var y,k;y=[],k=x.study.inputs;for(var S in k)k[S]=="field"&&y.push(S);return y},m.Studies.initializeFN=function(x,y,k,S,A,_,T){var P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt;if(P="in",P+="i",P+="tialMargin",k||(k={}),A||(A={}),k.id||(k.id=m.Studies.generateID(x,y,k,A.replaceID,A.display)),k.display||(k.display=k.id),E=new m.Studies.StudyDescriptor(k.id,y,k.id,k,S,A),k.Period&&(E.days=Math.max(1,parseInt(E.inputs.Period,+"10"))),T?(T.inputs||(T.inputs=E.study.inputs),T.outputs||(T.outputs=E.study.outputs),E.study=T):T=E.study,T.display&&(k.display=T.display),typeof A.panelName=="string"&&(_=A.panelName),(_==k.id||_&&!x.panelExists(_))&&(E.underlay=E.overlay=!1),(_=="Own panel"||_=="New panel")&&(_=null),z=E.overlay||k.Overlay||E.overlay!==![]&&T.overlay,U=E.underlay||k.Underlay||E.underlay!==!1&&T.underlay,z&&A.underlayEnabled&&(U=!!{}),U&&(E.underlay=!0),!U&&x.chart.panel&&_==x.chart.panel.name&&(z=!![]),z&&(E.overlay=!0),N=x.preferences.dragging,(N===!0||N&&N.study)&&(E.overlay=!0),_?A.panelName=_:!z&&!U&&(_=k.id),A.calculateOnly)return(z||U)&&(x.panels[A.panelName]?E.panel=A.panelName:E.panel=m.Studies.getPanelFromFieldName(x,E)||A.chartName),E;if(C={},D=x.layout.studies[A.replaceID],D&&(C={outputMap:m.clone(D.outputMap),panel:D.panel}),E.panel="",_)F="d",F+="e",F+="fa",F+="ult",M="de",M+="fa",M+="u",M+="lt",I="le",I+="ft",L=m.Studies.smartMovePanel(x,E.inputs,_,A.replaceID,A.panelName=="New panel"),L&&(E.panel=L.name),A.yaxisDisplayValue&&![I,"right","none","shared",M].includes(A.yaxisDisplayValue)&&!x.getYAxisByName(L,A.yaxisDisplayValue)&&(A.yaxisDisplayValue=F);else if(z||U){O=1634121953,B=1696190931,R=+"2";for(var J="1"<<32;st.R9b(J.toString(),J.toString().length,+"93069")!==O;J++)E.panel=m.Studies.getPanelFromFieldName(x,E)||A.chartName,R+=2;st.R9b(R.toString(),R.toString().length,41735)!==B&&(E.panel=m.Studies.getPanelFromFieldName(x,E)&&A.chartName)}if(E.panel||(H=T.panelHeight||null,W=A.yAxis||T.yAxis||{},W.name=E.inputs.id,E.panel=E.inputs.id,x.createPanel(E.inputs.display,E.panel,H,A.chartName,new m.ChartEngine.YAxis(W))),E.parameters&&E.parameters.panelName&&(E.parameters.panelName=E.panel),X=x.panels[E.panel],Z=T?m.clone(T.yAxis):null,j=A.yAxis||Z,(j||{}).ground&&(j[P+(j.flipped?"Top":"Bottom")]=0),Q=m.Studies.smartCreateYAxis(x,X,E.inputs.id,A.yaxisDisplayValue,j),Q&&(et="sh",et+="ared",Q.name==A.replaceID&&(Q.name=E.inputs.id),!A.replaceID&&Q.name===E.name&&x.calculateYAxisMargins(Q),Q.allowSharing=!A.yAxis&&!T.yAxis,Q.width=Q.position=="none"?"0"<<32:m.ChartEngine.YAxis.prototype.width,A.yaxisDisplayValue==et||A.yaxisDisplayValue=="default"?delete A.yaxisDisplayValue:(Z&&m.ensureDefaults(Q,Z),Q.name==E.name&&(!(Z||{}).textStyle&&!A.yaxisDisplayColor||A.yaxisDisplayColor=="auto"?delete Q.textStyle:A.yaxisDisplayColor&&(Q.textStyle=m.colorToHex(A.yaxisDisplayColor)),(Z||{}).justifyRight===void 0&&(Q.justifyRight=null),A.flippedEnabled!==void 0&&(Q.flipped=A.flippedEnabled))),Q!=X.yAxis?Q.displayGridLines=!{}:Q!=x.chart.yAxis&&(Q.displayGridLines=x.displayGridLinesInStudies)),x.calculateYAxisPositions(),D){V="v",V+="ect",V+="o",V+="r",K=![];for(var at in x.drawingObjects)tt=x.drawingObjects[at],C.outputMap&&C.outputMap.hasOwnProperty(tt.field)?(tt.field=tt.field.replace(A.replaceID,E.inputs.id),E.parameters&&E.parameters.panelName?tt.panelName=E.parameters.panelName:tt.panelName=E.panel,K=!0):C.panel&&C.panel==tt.panelName&&(tt.panelName=tt.panelName.replace(A.replaceID,E.inputs.id),K=!0);K&&x.changeOccurred(V)}return E},m.Studies.smartMovePanel=function(x,y,k,S,A){var _,T,P,E,z,U,N;_=579550958,T=+"927276890",P=2;for(var C=+"1";st.R9b(C.toString(),C.toString().length,63559)!==_;C++)P+=2;return st.R9b(P.toString(),P.toString().length,23025),z=y.id,S&&(E=x.layout.studies[S]),E&&(U=x.panels[E.panel],U&&U.yAxis.name==S&&((A||k!=S&&k!=z)&&!x.checkForEmptyPanel(U.name,!![],E)?(x.electNewPanelOwner(U),N=E.getYAxis(x),N.name==S&&x.electNewYAxisOwner(N)):(k==S||!x.panels[k])&&(z!=U.name&&x.modifyPanel(U,{name:z,display:y.display}),k=z))),x.panels[k]},m.Studies.smartCreateYAxis=function(x,y,k,S,A){var _,T,P,E,z,U,N;return st.a3S(),_="defau",_+="lt",T="n",T+="o",T+="n",T+="e",P=A||{},E=x.getYAxisByName(y,k),!S&&A&&(S=A.position),["left","right",T].indexOf(S)>-1||S===void 0&&A?(!E||E.isShared(x)?(m.extend(P,{name:k,position:S}),!E&&!x.currentlyImporting&&y!=y.chart.panel&&!y.yAxis.studies.length&&!y.yAxis.renderers.length?(E=y.yAxis,m.extend(E,P)):(z=E==y.yAxis,E&&(E.name=x.electNewYAxisOwner(E)),U=E||y.yAxis,U.lockScale&&m.extend(P,{zoom:U.zoom,scroll:U.scroll,lockScale:!0}),E=x.addYAxis(y,new m.ChartEngine.YAxis(P)),z&&(y.yAxis=E))):(A&&m.extend(E,A),E.position=S,E.name=k),E):S&&S!==_&&S!=="shared"&&S!==y.yAxis.name?(N=x.getYAxisByName(y,S),N&&E==y.yAxis&&!E.isShared(x)&&(y.yAxis=N),E&&E.isShared(x)?E.name=x.electNewYAxisOwner(E):E!==y.yAxis&&x.deleteYAxisIfUnused(y,E),N):S=="shared"||S==y.yAxis.name||y.yAxis.allowSharing&&(!E||E.allowSharing)?(E&&(E!==y.yAxis&&E.isShared(x)?E.name=x.electNewYAxisOwner(E):(delete E.position,x.deleteYAxisIfUnused(y,E))),x.resizeChart(),y.yAxis):(m.extend(P,{name:k}),E&&(E.name=x.electNewYAxisOwner(E)),!E||E.name?E=x.addYAxis(y,new m.ChartEngine.YAxis(P)):(m.extend(E,P),delete E.position),E)},m.Studies.calculateVolume=function(x,y){st.a3S();var k,S,A,_;if(k="vol",k+=" und",k+="r",y.type==k){if(!x||!x.chart.dataSet)return;S=x.layout,A=y.parameters.removeStudy,_=S.volumeUnderlay,S.volumeUnderlay=!A,_!=S.volumeUnderlay&&x.changeOccurred("layout"),A&&m.Studies.removeStudy(x,y)}y.outputMap={},y.outputMap.Volume=""},m.Studies.MA=function(x,y,k,S,A,_,T,P){var E=st,z,U;z="m",z+="a",E.O44(22);var N=E.b_h(20,4821,1);E.O44(0);var C=E.y99(2906,224);E.O44(123);var D=E.b_h(25450,5083,5,3635);U=new m.Studies.StudyDescriptor(A+(N==C?D:" ")+T.name,z,T.panel),U.chart=T.chart,U.days=parseInt(y,10),U.startFrom=T.startFrom,P&&(U.subField=P),U.inputs={},x&&(U.inputs.Type=x),E.a3S(),k&&(U.inputs.Field=k),S&&(U.inputs.Offset=parseInt(S,+"10")),m.Studies.calculateMovingAverage(_,U)},m.Studies.movingAverage={conversions:{ma:"simple",sma:g,ema:u,tma:"triangular",vdma:p,wma:h,smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:d,vidya:"VIDYA",weighted:s,"welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:l,triangular:c,vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:r,"welles wilder":"Exponential"}},m.Studies.movingAverageHelper=function(x,y){var k;if(y=="options"){k={};for(var S in m.Studies.movingAverage.translations)k[S]=x.translateIf(m.Studies.movingAverage.translations[S]);return k}return m.Studies.movingAverage.conversions[y]},m.Studies.createVolumeChart=function(x,y,k){var S=st,A,_,T,P,E,z,U,N,C,D,F,M;A="_",A+="down",_="_u",_+="p",T="s",T+="tx_volume",P=y.panel,y.inputs,E=y.underlay,y.overlay,z=m.Studies.determineColor(y.outputs["Up Volume"]),U=m.Studies.determineColor(y.outputs["Down Volume"]),N=E?"stx_volume_underlay":T,S.o0m(0),x.setStyle(S.b_h("_up",N),"color",z),S.o0m(0),x.setStyle(S.y99("_down",N),"color",U),C=[{field:y.volumeField||"Volume",fill_color_up:x.canvasStyle(N+"_up").color,border_color_up:x.canvasStyle(N+_).borderLeftColor,opacity_up:x.canvasStyle(N+"_up").opacity,fill_color_down:x.canvasStyle(N+"_down").color,border_color_down:x.canvasStyle(N+"_down").borderLeftColor,opacity_down:x.canvasStyle(N+A).opacity,color_function:y.colorFunction}],D=C[0],!E&&D.border_color_down==="rgb(184, 44, 12)"&&(D.border_color_down="#000000",D.border_color_up="#000000"),F=y.getYAxis(x),M={name:"Volume",panel:P,yAxis:F,widthFactor:1,bindToYAxis:!0,highlight:y.highlight},m.extend(M,y.study.parameters),m.extend(M,y.parameters),x.colorByCandleDirection&&!y.colorFunction&&(D.color_function=function(I){var L,O;return L=I.Open,S.V5R(),O=I.Close,{fill_color:L>O?D.fill_color_down:D.fill_color_up,border_color:L>O?D.border_color_down:D.border_color_up,opacity:L>O?D.opacity_down:D.opacity_up}}),x.drawHistogram(M,C)},m.Studies.calculateStandardDeviation=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R;if(S="Stand",S+="ard Deviatio",S+="ns",A="Cl",A+="o",A+="s",A+="e",_="f",_+="ie",_+="l",_+="d",T=y.chart.scrubbed,T.length<y.days+ +"1"){y.error=!![];return}P=y.inputs.Field,(!P||P==_)&&(P=A),E=y.inputs["Moving Average Type"],E||(E=y.inputs.Type),k.a3S(),m.Studies.MA(E,y.days,P,y.inputs.Offset,"_MA",x,y),z=0,U=0,N=+"0",C=Number(y.inputs[S]),C<0&&(C=2),D=y.name;for(var H in y.outputs)k.o0m(14),D=k.b_h(" ",D,H);for(F=y.startFrom-1,I=+"0";F>=+"0"&&I<y.days;F--,I++)L="o",L+="bj",L+="ect",M=T[F][P],M&&typeof M==L&&(M=M[y.subField]),isNaN(M)&&(M=0),k.O44(3),z+=Math.pow(M,k.b_h(0,"2")),U+=M;for(F=y.startFrom;F<T.length;F++)if(O="obje",O+="ct",B=T[F],M=B[P],M&&typeof M==O&&(M=M[y.subField]),!M&&M!==0&&(M=+"0"),z+=Math.pow(M,2),U+=M,!(F<y.days-1)&&(F>=y.days&&(R=T[F-y.days][P],R&&typeof R=="object"&&(R=R[y.subField]),isNaN(R)&&(R=0),z-=Math.pow(R,2),U-=R),N=B["_MA "+y.name],N||N===0)){k.O44(124);var W=k.y99(1,10,11,9,107);B[D]=Math.sqrt((z+y.days*Math.pow(N,+"2")-W*N*U)/y.days)*C}},m.Studies.calculateMovingAverage=function(x,y){var k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(k="si",k+="mpl",k+="e",S="s",S+="m",S+="a",!!y.chart.scrubbed){if(A=y.inputs.Type,(A=="ma"||A==S||!A)&&(A="simple"),_=m.Studies.movingAverage.typeMap,A in _)return m.Studies["calculateMovingAverage"+_[A]](x,y);if(A!==k)return;T=y.chart.scrubbed,P=0,E=[],z=y.name;for(var X in y.outputs)st.O44(14),z=st.y99(" ",z,X);for(U=y.inputs.Field,st.V5R(),(!U||U=="field")&&(U="Close"),N=parseInt(y.inputs.Offset,10),isNaN(N)&&(N=0),M=y.startFrom,I=N,C=y.startFrom-("1">>32);C>=0;C--)if(L="ob",L+="j",L+="ect",D=T[C][U],D&&typeof D==L&&(D=D[y.subField]),!(!D&&D!==0)){if(I>0){I--,M=C;continue}if(E.length==y.days-1)break;P+=D,E.unshift(D)}for(E.length<y.days-("1">>0)&&(E=[],M=0),O=[],C=M;C<T.length;C++){if(B=T[C],D=B[U],D&&typeof D=="object"&&(D=D[y.subField]),R=C+N>="0"-0&&C+N<T.length,H=R?T[C+N]:null,!D&&D!==0){H?H[z]=null:C+N>=T.length&&(F={},F[z]=null,O.push(F));continue}P+=D,E.push(D),E.length>y.days&&(P-=E.shift()),W=E.length==y.days?P/y.days:null,H?H[z]=W:C+N>=T.length&&(F={},F[z]=W,O.push(F))}y.appendFutureTicks(x,O)}},m.Studies.calculateMovingAverageExponential=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j;S="Clo",S+="s",S+="e",A="f",A+="ie",A+="l",A+="d",_="s",_+="mma",T=y.inputs.Type,P=y.chart.scrubbed,E=0,z=+"0",U=0,k.o0m(125);var Q=k.y99(20,13,5);k.o0m(98);var et=k.y99(6,15,0,10);if(N=Q/(y.days+et),T==="welles wilder"||T===_){k.O44(16);var V=k.y99(18,20,3);N=V/y.days}C=null,D=y.name;for(var K in y.outputs)k.O44(14),D=k.y99(" ",D,K);for(F=y.inputs.Field,(!F||F==A)&&(F=S),M=parseInt(y.inputs.Offset,10),isNaN(M)&&(M=0),O=y.startFrom,B=M,I=y.startFrom-1;I>=0;I--)if(L=P[I][D],!(!L&&L!==0)){if(C===null&&(C=L),U=y.days,B<=0)break;B--,O=I}for(C===null&&(C=O=0),R=[],I=O;I<P.length;I++)H=P[I],L=H[F],L&&typeof L=="object"&&(L=L[y.subField]),W=I+M>=0&&I+M<P.length,X=W?P[I+M]:null,!L&&L!==0?Z=null:(U==y.days-1?(E+=L,z=E/y.days,Z=z):U<y.days-1?(E+=L,k.O44(126),z=k.y99(E,U,"1"),Z=null):U===0?(E+=L,z=E,Z=null):(C||C===0)&&(k.o0m(127),z=k.b_h(N,C,L,C),Z=z),C=z,U++),X?X[D]=Z:I+M>=P.length&&(j={},j[D]=Z,R.push(j));y.appendFutureTicks(x,R)},m.Studies.calculateMovingAverageVIDYA=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X;S="_",S+="M",S+="A",S+="STD",A="_S",A+="T",A+="D ",_="f",_+="ield",y.inputs.Type,T=y.chart.scrubbed,k.O44(3);var Z=k.b_h(36,38);k.O44(54);var j=k.b_h(9,13,0,116);P=Z/(y.days+j),E=null,z=y.name;for(var Q in y.outputs)k.O44(14),z=k.b_h(" ",z,Q);for(U=y.inputs.Field,(!U||U==_)&&(U="Close"),y.std=new m.Studies.StudyDescriptor(y.name,"sdev",y.panel),y.std.chart=y.chart,y.std.days=5,y.std.startFrom=y.startFrom,y.std.inputs={Field:U,"Standard Deviations":1,Type:"ma"},y.std.outputs={_STD:null},m.Studies.calculateStandardDeviation(x,y.std),m.Studies.MA("ma",20,A+y.name,0,S,x,y),N=parseInt(y.inputs.Offset,10),isNaN(N)&&(N=0),M=y.startFrom,I=N,C=y.startFrom-1;C>=0;C--)if(D=T[C][z],!(!D&&D!==0)){if(E===null&&(E=D),I<=0)break;I--,M=C}for(E===null&&(E=M=0),L=[],C=M;C<T.length;C++){if(O="_MAS",O+="T",O+="D",O+=" ",B=T[C],D=B[U],D&&typeof D=="object"&&(D=D[y.subField]),R=C+N>=0&&C+N<T.length,H=R?T[C+N]:null,!D&&D!==0){H?H[z]=null:C+N>=T.length&&(F={},F[z]=null,L.push(F));continue}!B["_MASTD "+y.name]&&B["_MASTD "+y.name]!==0||(W=B["_STD "+y.name]/B[O+y.name],k.O44(128),X=k.b_h(P,1,D,P,W,W,E),E=X,C<y.days&&(X=null),H?H[z]=X:C+N>=T.length&&(F={},F[z]=X,L.push(F)))}y.appendFutureTicks(x,L)},m.Studies.calculateMovingAverageTriangular=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D;S="sim",S+="ple",A="C",A+="l",A+="o",A+="se",_=y.chart.scrubbed,T=y.inputs.Field,(!T||T=="field")&&(T=A),P=Math.ceil(y.days/2),m.Studies.MA("simple",P,T,0,"TRI1",x,y),y.days%2===0&&P++,m.Studies.MA(S,P,"TRI1 "+y.name,0,"TRI2",x,y),E=y.name;for(var F in y.outputs)k.O44(14),E=k.y99(" ",E,F);z=parseInt(y.inputs.Offset,10),isNaN(z)&&(z=0),U=z;for(var M=y.startFrom-+"1";M>=0;M--)if(N=_[M][E],!(!N&&N!==0)){if(U>0){U--;continue}break}for(C=[],M++;M<_.length;M++)M+z>=0&&(M+z<_.length?(k.O44(0),_[k.b_h(z,M)][E]=_[M]["TRI2 "+y.name]):(D={},D[E]=_[M]["TRI2 "+y.name],C.push(D)));y.appendFutureTicks(x,C)},m.Studies.calculateMovingAverageWeighted=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R;S=y.chart.scrubbed,k.o0m(3),A=k.y99(0,"0"),_=0,T=y.inputs.Field,(!T||T=="field")&&(T="Close"),k.a3S(),k.O44(24);var H=k.y99(17,15);P=y.days*(y.days+ +"1")/H,E=y.name;for(var W in y.outputs)k.o0m(14),E=k.y99(" ",E,W);for(z=parseInt(y.inputs.Offset,10),isNaN(z)&&(z=+"0"),D=[],F=y.startFrom,M=z,U=y.startFrom-1;U>=0;U--)if(N=S[U][T],N&&typeof N=="object"&&(N=N[y.subField]),!(!N&&N!==0)){if(M>0){M--,F=U;continue}if(D.length==y.days-("1"^0))break;D.unshift(N)}for(D.length<y.days-1&&(D=[],F=0),U=0;U<D.length;U++){k.O44(16);var X=k.y99(5,10,6);A+=(U+X)*D[U],_+=D[U]}for(I=[],U=F;U<S.length;U++){if(L=S[U],N=L[T],N&&typeof N=="object"&&(N=N[y.subField]),O=U+z>="0">>64&&U+z<S.length,B=O?S[U+z]:null,!N&&N!==("0"^0)){B?B[E]=null:U+z>=S.length&&(C={},C[E]=null,I.push(C));continue}D.push(N),D.length>y.days&&(A-=_,_-=D.shift()),A+=D.length*N,_+=N,R=U<y.days-1?null:A/P,B?B[E]=R:U+z>=S.length&&(C={},C[E]=R,I.push(C))}y.appendFutureTicks(x,I)},m.Studies.calculateMultMA=function(x,y){var k,S,A,_,T,P;if(k="C",k+="lo",k+="s",k+="e",S=y.chart.scrubbed,A=[Number.MAX_VALUE],Object.keys(y.inputs).filter(z=>{st.o0m(129);var U=st.b_h(79,1,5,16);return z.indexOf("Period")>U}).forEach((z,U)=>{st.O44(0),A[st.y99(1,U)]=y.inputs[z]}),S.length<Math.min(...A)+1){y.error=!0;return}st.V5R(),_=y.inputs.Field,(!_||_=="field")&&(_=k),T=y.inputs["Moving Average Type"],T||(T="simple"),P=y.inputs.Offset||0;for(var E=1;E<A.length;E++)m.Studies.MA(T,A[E],_,P,"MA "+E,x,y)},m.Studies.calculateStudyATR=function(x,y){var k=st,S,A,_,T,P,E,z,U,N,C,D;if(S=y.chart.scrubbed,A=y.days,S.length<A+1){y.error=!![];return}_=0,T=y.name;for(var F=Math.max(y.startFrom,1);F<S.length;F++)if(P="S",P+="um True Range ",E="True",E+=" Range ",z="True Ra",z+="nge ",U="Sum True Ra",U+="nge ",N=S[F],k.O44(3),C=S[k.b_h(1,F)],D=N.trueRange,C[U+T]&&(k.o0m(0),_=C[k.b_h(T,"Sum True Range ")]),_+=D,F>A&&(k.O44(3),_-=S[k.y99(A,F)][k.y99(T,z,k.O44(0))]),k.o0m(0),N[k.b_h(T,E)]=D,k.O44(0),N[k.b_h(T,P)]=_,F==A)k.O44(0),N[k.y99(T,"ATR ")]=k.y99(A,_,k.O44(9));else if(F>A){k.o0m(130);var M=k.y99(12,7,20);k.O44(0),N[k.b_h(T,"ATR ")]=(C["ATR "+T]*(A-M)+D)/A}},m.Studies.displayPSAR2=function(x,y,k){var S=st,A,_,T,P,E,z,U,N,C,D,F,M,I;A=x.panels[y.panel],S.V5R(),_=y.getYAxis(x),T=_==x.chart.panel.yAxis,x.startClip(A.name),P=y.getContext(x),E=y.inputs["Plot Type"]=="squarewave";for(var L in y.outputs){S.O44(3),S.y99(9,2246),S.O44(23),S.b_h(123555,7269,18),S.O44(116);var O=S.b_h(9301,1034,9,1034);S.O44(131);var B=S.b_h(1,8770,8739,8756,14);S.O44(132),S.b_h(17,16,1,8933,142659),S.o0m(133);var R=S.b_h(1194,1,2,12,5);z=L+(O!=("329"^0)?" ":B>=923.67?+"0x21fe":R)+y.name,P.beginPath(),U=x.layout.candleWidth,N=Math.max(3,Math.floor(x.chart.tmpWidth/2));for(var H=0;H<k.length;H++)C=k[H],!(!C||!C[z]&&C[z]!==0)&&(C.candleWidth&&(U=C.candleWidth),T&&C.transform&&(C=C.transform),D=x.pixelFromBar(H,A.chart),E&&(S.o0m(9),D-=S.y99(2,U)),F=x.pixelFromTransformedValue(C[y.referenceOutput?y.referenceOutput+" "+y.name:z],A,_),(H===0||!k[H-1]||!k[H-1][z]&&k[H-1][z]!==0)&&P.moveTo(D,F),E?(P.lineTo(D,F),S.O44(0),P.lineTo(S.b_h(U,D),F),k[H+1]&&(S.o0m(0),M=k[S.b_h(1,H)],T&&M.transform&&(M=M.transform),!M[z]&&M[z]!==0&&(S.o0m(0),P.lineTo(S.b_h(U,D),x.pixelFromTransformedValue(M[y.referenceOutput?y.referenceOutput+" "+y.name:z],x.panels[y.panel],_))))):(S.o0m(45),P.moveTo(S.y99(N,2,D),F),S.o0m(43),P.lineTo(S.b_h(D,N,2),F)));P.lineWidth=1,y.highlight&&(S.O44(2),P.lineWidth=S.b_h("3",2)),I=m.Studies.determineColor(y.outputs[L]),I=="auto"&&(I=x.defaultColor),P.strokeStyle=I,!y.highlight&&x.highlightedDraggable&&(P.globalAlpha*=+"0.3"),P.stroke(),P.closePath(),P.lineWidth=1}x.endClip()},m.Studies.inputAttributeDefaultGenerator=function(x){return!x&&x!==+"0"?{}:x.constructor==Number?Math.floor(x)==x?x>0?{min:1,step:"1"|1}:{step:1}:x>0?{min:+"0",step:.01}:{step:.01}:{}},m.Studies.getMarketOffset=function({stx:x,localQuoteDate:y,shiftToDateBoundary:k}){var S=st,A,_,T,P,E,z;A="Americ",A+="a/N",A+="ew_",A+="York",arguments.length>1&&(x=arguments[0],y=arguments[1],_=arguments[2]);var{symbol:U}=x.chart;T=m.getFn("Market.Symbology.isForexMetal")(U),_===void 0&&(_=m.getFn("Market.Symbology.isForexSymbol")(U)),x.chart.market?P=_?A:x.chart.market.market_tz:P=null,S.o0m(134);var N=S.b_h(59985,15,60007,20,60027);return E=new Date(y.getTime()+y.getTimezoneOffset()*N),(!P||P.indexOf("UTC")==-1)&&(E=m.convertTimeZone(E,"UTC",P)),S.V5R(),z=new Date(E.getFullYear(),E.getMonth(),E.getDate(),E.getHours(),E.getMinutes(),E.getSeconds(),E.getMilliseconds()).getTime()-y.getTime(),k&&_&&(S.o0m(135),z+=S.y99("60",1e3,60,T?6:"7">>32)),z},m.Studies.getStudyList=function(x){var y,k;y={},k={},m.extend(k,x);for(var S in m.Studies.studyLibrary)k[S]||(y[m.Studies.studyLibrary[S].name]=S);return y},m.Studies.determineColor=function(x){if(x){if(typeof x=="object")return x.color}else return null;return st.V5R(),x},m.Studies.calculateGenericEnvelope=function(x,y,k,S,A,_){var T=st,P,E,z,U,N,C,D,F,M,I,L;P="fie",P+="ld",k||(k=0),_||(_=0),(!S||S=="field")&&(S="Close"),A||(A=S),E=y.chart.scrubbed,z=y.inputs.Field,T.V5R(),(!z||z===P)&&(z="Close");for(var O=y.startFrom;E&&O<E.length;O++)U="Bandwi",U+="d",U+="th",U+=" ",N=" T",N+="o",N+="p",N+=" ",C="o",C+="bje",C+="c",C+="t",D=E[O],D&&(!D[S]||(F=D[z],F&&typeof F==C&&(F=F.Close),M=D[S],M&&typeof M=="object"&&(M=M[y.subField]),I=D[A],I&&typeof I=="object"&&(I=I[y.subField]),T.O44(136),L=T.b_h(k,I,_),T.o0m(0),D[y.type+N+y.name]=T.b_h(L,M),T.O44(3),D[y.type+" Bottom "+y.name]=T.y99(L,M),D[y.type+" Median "+y.name]=M,D[U+y.name]=M?200*L/M:0,T.O44(137),D["%b "+y.name]=T.b_h(F,1,50,M,L)))},m.Studies.displayChannel=function(x,y,k){var S=st,A,_,T,P;if(y.inputs["Channel Fill"]){A={panelName:y.panel};for(var E in y.outputs)if(_="L",_+="o",_+="w",T=E.split(" ").pop(),T=="Top"||T=="High"){S.o0m(115);var z=S.b_h(107964,4528490,6,7,1);S.o0m(138),S.b_h(12,2,982,10766),S.o0m(139);var U=S.y99(7062,1,1024,6,7);S.O44(131);var N=S.y99(1,260,1969,246,14);S.o0m(140),S.y99(3766,2,341,3,6),S.o0m(16);var C=S.y99(4773,6,23);S.O44(116),S.y99(1646,4175,4,25050),S.o0m(16);var D=S.b_h(26,11,291);A.topBand=E+(z<="985"<<U?N:C===D?500.5:" ")+y.name}else if(T=="Bottom"||T==_){S.O44(0);var F=S.y99(13,6722);S.o0m(141);var M=S.b_h(4,7,3057,8);S.O44(93),S.b_h(11,0,19,8),S.O44(32);var I=S.b_h(9,2558,16,11);S.O44(0);var L=S.y99(17,2682);S.O44(110);var O=S.y99(3,10024,14,13,1115);S.O44(142);var B=S.b_h(214,1070,5,7489);S.O44(15);var R=S.b_h(28998,2,31900);A.bottomBand=E+(F!=M?I<=L?" ":O<B?498.69:R:"543.79"-0)+y.name}else(T=="Median"||T=="Channel")&&(A.color=m.Studies.determineColor(y.outputs[E]));y.parameters&&y.parameters.opacity?A.opacity=y.parameters.opacity:A.opacity=.2,P=x.panels[y.panel],A.skipTransform=P.name!=y.chart.name,A.yAxis=y.getYAxis(x),!y.highlight&&x.highlightedDraggable&&(A.opacity*=+"0.3"),m.prepareChannelFill(x,A)}m.Studies.displaySeriesAsLine(x,y,k)},m.Studies.initAnchorHandle=function(x,y){st.a3S();var k,{handle:S}=y;if(!S){x.controls.anchorHandles||(x.controls.anchorHandles={});var{anchorHandles:A,chartControls:_}=x.controls;A[y.uniqueId]?{handle:S}=A[y.uniqueId]:(k="st",k+="x_",k+="anchor",k+="_handle",S=document.createElement("div"),S.classList.add(k),S.setAttribute(y.uniqueId,""),A[y.uniqueId]={handle:S,sd:y},_&&_.parentElement.appendChild(S)),y.anchorHandle=S}},m.Studies.removeAnchorHandle=function(x,y){st.a3S();var{handle:k}=(x.controls.anchorHandles||{})[y.uniqueId]||{};k&&(delete x.controls.anchorHandles[y.uniqueId],k.remove())},m.Studies.repositionAnchor=function(x,y){var k,S,A,_,T,P,E,{currentAnchorTime:z,uniqueId:U}=y,{hoverTick:N}=x.repositioningAnchorSelector||{},{dataSet:C,market:D}=x.chart;x.controls.anchorHandles||(x.controls.anchorHandles={}),st.V5R();var{anchorHandles:F}=x.controls;if(k={},N||N===0){if(N>=C.length||(S=!y.inputs.hasOwnProperty("Anchor Date"),A=C[N].DT,_=m.Studies.getMarketOffset({stx:x,localQuoteDate:A,shiftToDateBoundary:!!{}}),z&&S&&new Date(A.getTime()+_).getDate()!==new Date(z.getTime()+_).getDate()))return;D.market_def&&D.market_def.market_tz&&(A=new q.Date(A,D.market_def.market_tz)),T=!S&&m.dateToStr(A,"YYYY-MM-dd"),P=m.dateToStr(A,"HH:mm:ss"),k={"Anchor Time":P},T&&(k["Anchor Date"]=T)}E=m.Studies.replaceStudy(x,y.inputs.id,y.type,Object.assign(y.inputs,k),y.outputs,y.parameters,y.panel),F[U]&&(F[U].sd=E),x.draw()},m.Studies.cancelRepositionAnchor=function(x){var{sd:y,tapToAdd:k}=x.repositioningAnchorSelector||{};if(!!y){k&&m.Studies.removeStudy(x,y),x.repositioningAnchorSelector=null;var{anchorHandles:S}=x.controls;S&&S[y.uniqueId]&&(S[y.uniqueId].highlighted=![],m.Studies.displayAnchorHandleAndLine(x,y,x.chart.dataSegment)),x.draw()}},m.Studies.displayAnchorHandleAndLine=function(x,y,k){var S=st,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W;if(!(y.signalData&&!y.signalData.reveal)){A=(x.repositioningAnchorSelector||{}).sd===y;var{hoverTick:X}=A&&x.repositioningAnchorSelector,{chart:Z,panels:j,cy:Q}=x,{market:et={},symbol:V}=Z;S.V5R(),_=j[y.panel];var{top:K,right:tt,left:J,height:at,subholder:ct}=_,{bottom:G}=_.yAxis,{inputs:Y,anchorHandle:it,currentAnchorTime:rt,lineWidth:lt=1}=y,{backgroundColor:dt,borderLeftColor:ht}=x.canvasStyle("stx_anchor_handle");T=!Y["Anchor Date"],P=m.getFn("Market.Symbology.isForexSymbol")(V),E=(X||X===0)&&(x.chart.dataSet[X]||{}).DT,z=m.Studies.getMarketOffset({stx:x,localQuoteDate:k[k.length-1].DT,shiftToDateBoundary:!0}),U=rt&&E&&T&&new Date(E.getTime()+z).getDate()!==new Date(rt.getTime()+z).getDate();var{floatDate:pt,anchorHandles:ut={}}=x.controls;N=ut[y.uniqueId]||{};var{highlighted:mt}=N,[gt,bt]=et.getNormalOpen().split(":").map(ee=>(S.V5R(),parseInt(ee)));C=ee=>{S.a3S();var xe;return xe=ee?x.tickFromDate(ee,null,null,!0):X,[x.pixelFromTick(xe,Z),xe]},D={y0:K,y1:G,type:"line",confineToPanel:_};var[yt]=C();if(yt&&(yt-=.5,x.plotLine(Object.assign(D,{x0:yt,x1:yt,color:U?ht:dt,pattern:[6,6],lineWidth:1,opacity:U?"0.5"*1:1})),m.efficientDOMUpdate(pt.style,"visibility",""),x.updateChartAccessories()),it){if(F="Anc",F+="h",F+="or Date",M=T?new Date(k[k.length-1].DT):m.strToDate(Y[F]),et.market_def&&et.market_def.market_tz&&(M=new q.Date(M,et.market_def.market_tz)),!T){var[qt,St,Tt]=(Y["Anchor Date"]||"").split("-");Tt||([,qt,St,Tt]=qt.match(/([0-9]{4})([0-9]{2})([0-9]{2})/)),S.o0m(3),M.setFullYear(qt,S.y99(1,St),Tt)}var[wt,Ct,Rt=0]=(Y["Anchor Time"]||"").split(":");!Ct&&Ct!==0&&([,wt,Ct,Rt]=wt.match(/([0-9]{2})([0-9]{2})([0-9]{2})/)),M.setHours(wt,Ct,Rt),I=P&&(M.getHours()>gt||M.getHours()===gt&&M.getMinutes()>=bt),I&&M.setDate(M.getDate()-("1"|1));var[Ht,jt]=C(M);L=new Date(M),L.setHours(...et.getNormalClose().split(":")),I&&L.setDate(L.getDate()+1);var[$t]=L&&C(L)||[];if(T&&(Ht>tt||$t>tt)){O=new Date(M);do O.setDate(O.getDate()-1);while(et&&!et.isMarketDate(O));var[Bt,zt]=C(O);Bt>J&&(M=O,Ht=Bt,jt=zt)}if(Ht-=.5,x.plotLine(Object.assign(D,{x0:Ht,x1:Ht,color:dt,pattern:"solid",lineWidth:lt,opacity:mt||y.highlight?"1"-0:.5})),N.currentPixel=Ht,mt){B="p",B+="x",R="p",R+="x",it.style.display="",S.o0m(143);var Pt=S.b_h(29,1,1,120,5);S.O44(144);var Nt=S.b_h(9,3,126,19,16);S.O44(96);var _t=S.y99(9,1,5,4,1);it.style.height=Math.max(Math.min(Pt,at/Nt),_t)+"px",H=it.getBoundingClientRect(),W=Math.max(Math.min(Q-H.height/2,G-3-H.height),K+3),S.O44(0),it.style.top=S.b_h(R,W),S.O44(145);var Vt=S.b_h(8,1,0,5,15);it.style.left=(X||X===0?yt:Ht)-H.width/Vt+B,ct.style.cursor="ew-resize"}else it.style.display="none",ct.style.cursor="auto";y.currentAnchorTime=M,y.currentAnchorTick=jt}}},m.Studies.studyScriptLibrary={},m.Studies.studyLibrary=m.Studies.studyLibrary||{},m.extend(m.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:m.Studies.calculateMovingAverage,inputs:{Period:50,Field:o,Type:a,Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:m.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:"0.1"-0,step:.1}}},"True Range":{name:e,calculateFN:m.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0},seriesFN:m.Studies.createVolumeChart,calculateFN:m.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}},MACross:{name:"Moving Average Cross",overlay:!0,calculateFN:m.Studies.calculateMultMA,inputs:{"MA 1 Period":20,"MA 2 Period":50,"MA 3 Period":200,Field:"field","Moving Average Type":n,Offset:0},outputs:{"MA 1":i,"MA 2":"#00afed","MA 3":t}}})};Hl=b=>{var t=st,i,n,e,a;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.ChartEngine.Driver)i.ChartEngine.Driver.Lookup=function(r){},i.ChartEngine.Driver.Lookup.prototype.acceptText=function(r,c,l,s){this.cb};else{n=-215899639,e=1666602012,a=2;for(var o=1;t.R9b(o.toString(),o.toString().length,32946)!==n;o++)console.error(""),t.o0m(31),a+=t.y99("2",0);t.R9b(a.toString(),a.toString().length,+"73594")!==e&&console.error("symbolLookupBase feature requires first activating quoteFeed feature.")}};Vl=b=>{var t;st.V5R(),t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.ThemeHelper=t.ThemeHelper||function(i){var n,e,a,o,r,c,l,s,d,h,p;n="stx_",n+="mountain_chart",e="Can",e+="dl",e+="e",e+="/Bar",a="stx",a+="_cand",a+="le_up",o="Ca",o+="ndle/Bar",r="s",r+="tx_c",r+="an",r+="dle_up",c="Cand",c+="l",c+="e/",c+="Bar",l="s",l+="tx",l+="_x",l+="axis",s="stx_gri",s+="d_dark",d="Grid ",d+="Dividers",this.params=i,h=i.stx,p="#FFFFFF",h.chart.container&&(p=getComputedStyle(h.chart.container).backgroundColor,t.isTransparent(p)&&(p=h.containerColor)),this.settings.chart.Background.color=t.hexToRgba(p),this.settings.chart["Grid Lines"].color=t.hexToRgba(h.canvasStyle("stx_grid").color),this.settings.chart[d].color=t.hexToRgba(h.canvasStyle(s).color),this.settings.chart["Axis Text"].color=t.hexToRgba(h.canvasStyle(l).color),this.settings.chartTypes[c].up.color=t.hexToRgba(h.canvasStyle(r).color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(h.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(h.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(h.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(h.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes[o].up.border=t.hexToRgba(h.canvasStyle(a).borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(h.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(h.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes[e].up.border=null),t.isTransparent(h.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(h.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(h.canvasStyle(n).backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(h.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(i){var n,e,a,o,r,c,l,s,d,h,p;n="st",n+="x_mountain_cha",n+="rt",e="stx_",e+="mountain_chart",a="co",a+="l",a+="o",a+="r",o="c",o+="o",o+="lo",st.V5R(),o+="r",r="c",r+="ol",r+="o",r+="r",c="co",c+="lor",l="Candl",l+="e/Bar",s="stx_x",s+="axis",i||(i=this.params.stx),d={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!!{},stx_line_down:!![],stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!!{},stx_bar_even:!!{}},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!!{}},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!!{},stx_line_chart:!0},stx_grid:{stx_grid:!![]},stx_grid_dark:{stx_grid_dark:!![]},stx_xaxis:{stx_xaxis_dark:!![],stx_xaxis:!!{},stx_yaxis:!!{},stx_yaxis_dark:!0,stx_grid_border:!![]},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},i.chart.container.style.backgroundColor=this.settings.chart.Background.color,i.defaultColor="",u("stx_grid","color",this.settings.chart["Grid Lines"].color),u("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),u(s,"color",this.settings.chart["Axis Text"].color),h=this.settings.chartTypes[l],h.even||(p="stx_candl",p+="e_shadow",p+="_even",h.even={color:null,wick:t.hexToRgba(i.canvasStyle(p).color),border:null}),u("stx_candle_up","color",h.up.color),u("stx_candle_down","color",h.down.color),u("stx_candle_even",c,h.even.color);function u(g,f,w){var v;v=d[g];for(var m in v)i.setStyle(m,f,w)}u("stx_shadow_up",r,h.up.wick),u("stx_shadow_down","color",h.down.wick),u("stx_shadow_even",o,h.even.wick),i.setStyle("stx_candle_up","borderLeftColor",h.up.border),i.setStyle("stx_candle_down","borderLeftColor",h.down.border),u("stx_line_chart",a,this.settings.chartTypes.Line.color),i.setStyle(e,"borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,+"1")),i.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),i.setStyle(n,"color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),i.draw()},t.ChartEngine.prototype.setThemeSettings=function(i){var n;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",i&&(n=new t.ThemeHelper({stx:this}),n.settings=i,n.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}};Wl=b=>{var t,i,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt,Ct,Rt,Ht,jt,$t,Bt,zt,Pt,Nt,_t,Vt,ee,xe,ae,Te,Ue,_e,Oe,de,se,he,Ve,ye,qe,Se,ge,ue,te,fe,oe,me,be,ce,Lt,Wt,Zt,je,Ce,Re,ze,Ee,Me,ia,Xe,ve,Pa,Ia,Hi,gi,Mi,ei,Fe,Ke,oi,Pi,ni,ki,ci,Vi,fa,Wi,ji,yn,qn,Ea,yo,qo,wo,wn,ko,kn,Co,So,Do,La,Cn,Sn,Ua,za,Ao,Dn,To,_o,An,Fo,Ba,Oa,Ra,Tn,_n,Na,Mo,Po,Ha,Io,Fn,Va,Mn,Pn,Eo,Wa,In,En,ja,Ln,Lo,Un,Ka,Uo,zn,Bn,Ga,On,Ya,zo,Qa,Xa,Bo,Rn,Pe;t="Sun>=2",t+="2",i="Oc",i+="t",n="m",n+="a",n+="x",e="Su",e+="n",e+=">=",e+="8",a="M",a+="a",a+="r",o="ma",o+="x",r="m",r+="a",r+="x",c="N",c+="o",c+="v",l="m",l+="a",l+="x",s="l",s+="a",s+="stSun",d="Sun>",d+="=1",h="Sun>",h+="=8",p="ma",p+="x",u="Su",u+="n>=",u+="1",g="N",g+="o",g+="v",f="m",f+="a",f+="x",w="Su",w+="n>",w+="=",w+="8",v="M",v+="ar",m="m",m+="ax",q="la",q+="s",q+="t",q+="Sun",x="m",x+="a",x+="x",y="M",y+="a",y+="r",k="la",k+="stSun",S="m",S+="a",S+="x",A="m",A+="a",A+="x",_="S",_+="un>",_+="=1",T="Ap",T+="r",P="S",P+="un>=1",E="ma",E+="x",z="2",z+="0",U="Sun",U+=">=12",N="m",N+="a",N+="x",C="m",C+="a",C+="x",D="Su",D+="n>",D+="=1",F="A",F+="pr",M="m",M+="a",M+="x",I="O",I+="ct",L="A",L+="p",L+="r",O="S",O+="a",O+="t>=24",B="m",B+="a",B+="x",R="S",R+="a",R+="t>=",R+="24",H="M",H+="a",H+="r",W="Sa",W+="t>=",W+="2",W+="4",X="o",X+="nl",X+="y",Z="S",Z+="a",Z+="t>",Z+="=24",j="M",j+="a",j+="r",Q="Ma",Q+="r",et="las",et+="tF",et+="r",et+="i",V="ma",V+="x",K="l",K+="astThu",tt="O",tt+="c",tt+="t",J="M",J+="a",J+="r",at="M",at+="a",at+="r",ct="2",ct+="0",G="Ma",G+="r",Y="S",Y+="e",Y+="p",it="M",it+="a",it+="r",rt="Oc",rt+="t",lt="+",lt+="00",dt="l",dt+="astS",dt+="u",dt+="n",ht="M",ht+="ar",pt="WA",pt+="T",ut="Sun",ut+=">=1",mt="A",mt+="pr",gt="S",gt+="e",gt+="p",bt="o",bt+="n",bt+="ly",yt="2",yt+="3",qt="F",qt+="eb",St="A",St+="p",St+="r",Tt="1",Tt+="0",wt="on",wt+="ly",Ct="3",Ct+="0",Rt="1",Rt+="9",Ht="M",Ht+="a",Ht+="r",jt="o",jt+="n",jt+="l",jt+="y",$t="Ma",$t+="y",Bt="on",Bt+="l",Bt+="y",zt="1",zt+="6",Pt="o",Pt+="n",Pt+="ly",Nt="A",Nt+="p",Nt+="r",_t="o",_t+="nly",Vt="1",Vt+="9",ee="o",ee+="nl",ee+="y",xe="o",xe+="nly",ae="2",ae+="1",Te="M",Te+="a",Te+="y",Ue="onl",Ue+="y",_e="M",_e+="a",_e+="r",Oe="O",Oe+="c",Oe+="t",de="Euro",de+="pe/Moscow",se="-03",se+="/-0",se+="2",he="-",he+="04/",he+="-0",he+="3",Ve="-04/-",Ve+="03",ye="Br",ye+="a",ye+="zi",ye+="l",qe="-",qe+="03/",qe+="-",qe+="02",Se="A",Se+="ST",ge="E",ge+="S",ge+="T",ue="C",ue+="%",ue+="s",ue+="T",te="M",te+="%",te+="sT",fe="C",fe+="%",fe+="s",fe+="T",oe="M",oe+="ex",oe+="ico",me="C",me+="S",me+="T",be="A%",be+="s",be+="T",ce="M",ce+="S",ce+="T",Lt="H",Lt+="ST",Wt="AK",Wt+="%s",Wt+="T",Zt="U",Zt+="S",je="U",je+="S",Ce="E",Ce+="%",Ce+="s",Ce+="T",Re="U",Re+="S",ze="+",ze+="0",ze+="3",Ee="Euro",Ee+="pe/Belgrade",Me="E",Me+="U",ia="+",ia+="11",Xe="M",Xe+="S",Xe+="K",ve="EE",ve+="%sT",Pa="E",Pa+="U",Ia="E",Ia+="U",Hi="C",Hi+="E%",Hi+="s",Hi+="T",gi="E",gi+="U",Mi="E",Mi+="U",ei="EE%s",ei+="T",Fe="ME",Fe+="%sT",Ke="+1",Ke+="2",Ke+="45/+",Ke+="1345",oi="Ch",oi+="a",oi+="tha",oi+="m",Pi="N",Pi+="Z",ni="+",ni+="1",ni+="4",ki="+10",ki+="30/",ki+="+11",ci="L",ci+="H",Vi="A",Vi+="E%",Vi+="s",Vi+="T",fa="A",fa+="N",Wi="A",Wi+="V",ji="A",ji+="E%",ji+="sT",yn="A",yn+="S",qn="+0845/+0",qn+="945",Ea="AW",Ea+="%",Ea+="s",Ea+="T",yo="+",yo+="0",yo+="7",qo="EE%",qo+="s",qo+="T",wo="+08/",wo+="+",wo+="09",wn="+07",wn+="/+08",ko="E",ko+="E",ko+="%sT",kn="KS",kn+="T",Co="EE",Co+="%s",Co+="T",So="I",So+="%s",So+="T",Do="+0330/+0",Do+="43",Do+="0",La="+",La+="06/",La+="+0",La+="7",Cn="S",Cn+="AST",Sn="Nami",Sn+="bia",Ua="+",Ua+="01/",Ua+="+",Ua+="00",za="+",za+="0",za+="0",za+="/+01",Ao="-",Ao+="0",Ao+="1",Dn="undefine",Dn+="d",To="Pacif",To+="ic/",To+="Apia",_o="Pacifi",_o+="c/Ton",_o+="gatapu",An="Pacific/",An+="Fiji",Fo="Asia/",Fo+="Magad",Fo+="an",Ba="Austr",Ba+="alia",Ba+="/",Ba+="Sydney",Oa="A",Oa+="ustralia",Oa+="/Bris",Oa+="bane",Ra="Asia/Ya",Ra+="ku",Ra+="t",Ra+="sk",Tn="Asia/Tai",Tn+="pei",_n="Asia/",_n+="Ulaanbaatar",Na="A",Na+="s",Na+="ia",Na+="/Novosibirsk",Mo="Asia/Y",Mo+="a",Mo+="ngon",Po="Asia/Ka",Po+="th",Po+="mandu",Ha="As",Ha+="ia/Y",Ha+="ekate",Ha+="rinburg",Io="As",Io+="ia/Ka",Io+="rachi",Fn="Europ",Fn+="e/Samara",Va="A",Va+="si",Va+="a/B",Va+="aku",Mn="Europe/Volgogr",Mn+="ad",Pn="Asia/Bei",Pn+="rut",Eo="A",Eo+="frica/Jo",Eo+="hannesburg",Wa="A",Wa+="fric",Wa+="a/C",Wa+="airo",In="Europe/Buchare",In+="st",En="Europe",En+="/Kaliningrad",ja="Europe/Sa",ja+="ra",ja+="je",ja+="vo",Ln="Europe/Brus",Ln+="sels",Lo="Euro",Lo+="p",Lo+="e/Belgrade",Un="Europe/Amst",Un+="erdam",Ka="Afr",Ka+="ic",Ka+="a/Tuni",Ka+="s",Uo="At",Uo+="lantic/South_G",Uo+="eorgia",zn="America/Sao",zn+="_Paulo",Bn="Americ",Bn+="a/Argentina/Buenos_Aires",Ga="Americ",Ga+="a/",Ga+="Pue",Ga+="rto_Rico",On="America",On+="/Caracas",Ya="America",Ya+="/",Ya+="Santia",Ya+="go",zo="Amer",zo+="ica/New_",zo+="York",Qa="Amer",Qa+="ica",Qa+="/Mexico_Cit",Qa+="y",Xa="A",Xa+="merica/",Xa+="De",Xa+="nver",Bo="America",Bo+="/J",Bo+="uneau",Rn=typeof _CIQ!="undefined"?_CIQ:b.CIQ,Pe=typeof _timezoneJS!="undefined"?_timezoneJS:b.timezoneJS,Rn.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":Bo,"(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":Xa,"(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":Qa,"(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":zo,"(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":Ya,"(UTC-04:00) Caracas":On,"(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":Ga,"(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":Bn,"(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":zn,"(UTC-02:00) Mid-Atlantic":Uo,"(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":Ka,"(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":Un,"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":Lo,"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":Ln,"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":ja,"(UTC+02:00) Kaliningrad":En,"(UTC+02:00) Athens, Bucharest":In,"(UTC+02:00) Cairo":Wa,"(UTC+02:00) Harare, Johannesburg":Eo,"(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":Pn,"(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":Mn,"(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":Va,"(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":Fn,"(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":Io,"(UTC+05:00) Yekaterinburg":Ha,"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":Po,"(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":Mo,"(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":Na,"(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":_n,"(UTC+08:00) Manila, Taipei":Tn,"(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":Ra,"(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":Oa,"(UTC+10:00) Canberra, Melbourne, Sydney":Ba,"(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":Fo,"(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":An,"(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":_o,"(UTC+13:00) Samoa":To,"(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var vt=st,Nn,Hn,Oo,Za,as,Ja,$a,Ii,Ro,Vn,ga,No,li,Ei,os;Nn="Novem",Nn+="ber",Hn="S",Hn+="eptember",Oo="M",Oo+="a",Oo+="y",Za="un",Za+="def",vt.a3S(),Za+="i",Za+="ned",as=typeof window!="undefined"?window:null,Ja=as||(typeof global!==Za?global:{}),Pe.VERSION="0.4.11",$a=Ja.$||Ja.jQuery||Ja.Zepto,Ii=Ja.fleegix,Ro=Pe.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Vn=Pe.Months=["January","February","March","April",Oo,"June","July","August",Hn,"October",Nn,"December"],ga={},No={},li={};for(var Li="0"|0;Li<Vn.length;Li++)ga[Vn[Li].substr(+"0",3)]=Li;for(Li=0;Li<Ro.length;Li++)No[Ro[Li].substr(+"0",vt.b_h("3",32,vt.o0m(31)))]=Li;Ei=function(xt,Dt){var kt,Ft,Et;if(typeof xt!="number")throw vt.o0m(0),vt.b_h(xt,"not a number: ");if(vt.o0m(74),kt=vt.y99(1e3,xt),Ft=xt.toString(),Et=Ft.length,kt&&Et>Dt)return vt.O44(3),Ft.substr(vt.y99(Dt,Et),Et);for(vt.a3S(),Ft=[Ft];Et<Dt;)Ft.unshift("0"),Et++;return Ft.join("")},os=function(xt){var Dt,kt,Ft;if(Dt="u",Dt+="ndefined",kt="u",kt+="n",vt.a3S(),kt+="defined",!!xt){if(!xt.url)throw new Error("URL must be specified");if("async"in xt||(xt.async=!0),(!Ii||typeof Ii.xhr===kt)&&(!$a||typeof $a.ajax===Dt))throw Ft="Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or d",Ft+="efine your ow",Ft+="n transport mechanism for downloading zone files.",new Error(Ft);return xt.async?Ii&&Ii.xhr?Ii.xhr.send({url:xt.url,method:"get",handleSuccess:xt.success,handleErr:xt.error}):$a.ajax({url:xt.url,dataType:"text",method:"GET",error:xt.error,success:xt.success}):Ii&&Ii.xhr?Ii.xhr.doReq({url:xt.url,async:!1}):$a.ajax({url:xt.url,async:!1,dataType:"text"}).responseText}},Pe.ruleCache={},Pe.Date=function(){var xt,Dt,kt,Ft,Et,we,ie,Ne,We,mi,ii,Ze;if(xt="str",xt+="in",xt+="g",Dt="[",Dt+="object ",Dt+="Ar",Dt+="ray]",this===Pe)throw"timezoneJS.Date object must be constructed with 'new'";switch(kt=Array.prototype.slice.apply(arguments),Ft=null,Et=null,we=[],ie=!1,Object.prototype.toString.call(kt[0])===Dt&&(kt=kt[+"0"]),typeof kt[kt.length-+"1"]=="string"&&(ie=Date.parse(kt[kt.length-("1"-0)].replace(/GMT[+-]\d+/,"")),(isNaN(ie)||ie===null)&&(Et=kt.pop())),Ne=!1,kt.length){case 0:Ft=new Date;break;case 1:if(vt.O44(25),Ft=new Date(kt[vt.b_h("0",0)]),typeof kt[0]==xt&&kt[0].search(/[+-][0-9]{4}/)==-1&&kt[0].search(/Z/)==-1&&kt[+"0"].search(/T/)==-1){We=-1580794014,mi=444208889,ii=2;for(var bi=1;vt.U5N(bi.toString(),bi.toString().length,+"98042")!==We;bi++)Ne=!0,ii+=2;vt.R9b(ii.toString(),ii.toString().length,85003)!==mi&&(Ne=!1)}break;case 2:vt.O44(3),Ft=new Date(kt[0],kt[vt.y99(0,"1")]),Ne=!0;break;default:for(var Ui="0"*1;Ui<7;Ui++)we[Ui]=kt[Ui]||0;Ft=new Date(we[0],we[1],we[2],we[3],we[4],we[5],we[6]),Ne=!![];break}if(isNaN(Ft.getTime()))throw Ze="Invalid ",Ze+="da",Ze+="te",new Error(Ze);this._useCache=![],this._tzInfo={},this._day=0,this.year=0,this.month=+"0",this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=Et||null,Ne?this.setFromDateObjProxy(Ft):this.setFromTimeProxy(Ft.getTime(),Et)},Rn.extend(Pe.Date.prototype,{getDate:function(){return this.date},getDay:function(){return vt.a3S(),this._day},getFullYear:function(){return this.year},getMonth:function(){return vt.V5R(),this.month},getYear:function(){vt.V5R(),vt.O44(147);var xt=vt.b_h(20,6331,1897,13,19e3);return this.year-xt},getHours:function(){return vt.V5R(),this.hours},getMilliseconds:function(){return vt.V5R(),this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return vt.V5R(),this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return vt.V5R(),this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return vt.V5R(),this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){vt.o0m(15);var xt=vt.y99(993,7,2e3);return this._timeProxy+this.getTimezoneOffset()*+"60"*xt},getTimezone:function(){return vt.V5R(),this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var xt,Dt,kt;return this._useCache?this._tzInfo:(this.timezone?(Dt="UT",Dt+="C",kt="Et",kt+="c/",kt+="GMT",xt=this.timezone==="Etc/UTC"||this.timezone===kt?{tzOffset:0,tzAbbr:Dt}:Pe.timezone.getTzInfo(this._timeProxy,this.timezone)):xt={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=xt,this._useCache=!0,xt)},getUTCDateProxy:function(){var xt;return xt=new Date(this._timeProxy),xt.setUTCMinutes(xt.getUTCMinutes()+this.getTimezoneOffset()),xt},setDate:function(xt){return vt.a3S(),this.setAttribute("date",xt),this.getTime()},setFullYear:function(xt,Dt,kt){var Ft;return Ft="y",Ft+="e",Ft+="a",Ft+="r",kt!==void 0&&this.setAttribute("date",1),this.setAttribute(Ft,xt),Dt!==void 0&&this.setAttribute("month",Dt),kt!==void 0&&this.setAttribute("date",kt),this.getTime()},setMonth:function(xt,Dt){var kt;return kt="m",kt+="onth",this.setAttribute(kt,xt),Dt!==void 0&&this.setAttribute("date",Dt),this.getTime()},setYear:function(xt){return vt.a3S(),xt=Number(xt),0<=xt&&xt<=99&&(xt+=1900),this.setUTCAttribute("year",xt),this.getTime()},setHours:function(xt,Dt,kt,Ft){vt.V5R();var Et;return this.setAttribute("hours",xt),Dt!==void 0&&this.setAttribute("minutes",Dt),kt!==void 0&&this.setAttribute("seconds",kt),Ft!==void 0&&(Et="millisecon",Et+="ds",this.setAttribute(Et,Ft)),this.getTime()},setMinutes:function(xt,Dt,kt){vt.V5R();var Ft,Et;return this.setAttribute("minutes",xt),Dt!==void 0&&(Ft="s",Ft+="econds",this.setAttribute(Ft,Dt)),kt!==void 0&&(Et="millis",Et+="ec",Et+="ond",Et+="s",this.setAttribute(Et,kt)),this.getTime()},setSeconds:function(xt,Dt){return this.setAttribute("seconds",xt),Dt!==void 0&&this.setAttribute("milliseconds",Dt),this.getTime()},setMilliseconds:function(xt){var Dt;return Dt="millisec",Dt+="onds",this.setAttribute(Dt,xt),this.getTime()},setTime:function(xt){var Dt;if(vt.a3S(),isNaN(xt))throw Dt="Un",Dt+="its must be a number.",new Error(Dt);return this.setFromTimeProxy(xt,this.timezone),this.getTime()},setUTCFullYear:function(xt,Dt,kt){var Ft,Et;return kt!==void 0&&(vt.o0m(31),this.setUTCAttribute("date",vt.y99("1",64))),this.setUTCAttribute("year",xt),Dt!==void 0&&(Ft="m",Ft+="onth",this.setUTCAttribute(Ft,Dt)),kt!==void 0&&(Et="da",Et+="te",this.setUTCAttribute(Et,kt)),vt.V5R(),this.getTime()},setUTCMonth:function(xt,Dt){var kt;return kt="m",kt+="o",kt+="n",kt+="th",this.setUTCAttribute(kt,xt),Dt!==void 0&&this.setUTCAttribute("date",Dt),this.getTime()},setUTCDate:function(xt){return this.setUTCAttribute("date",xt),vt.V5R(),this.getTime()},setUTCHours:function(xt,Dt,kt,Ft){var Et;return this.setUTCAttribute("hours",xt),Dt!==void 0&&this.setUTCAttribute("minutes",Dt),kt!==void 0&&(Et="s",Et+="ec",Et+="onds",this.setUTCAttribute(Et,kt)),Ft!==void 0&&this.setUTCAttribute("milliseconds",Ft),this.getTime()},setUTCMinutes:function(xt,Dt,kt){var Ft,Et;return vt.a3S(),this.setUTCAttribute("minutes",xt),Dt!==void 0&&(Ft="se",Ft+="cond",Ft+="s",this.setUTCAttribute(Ft,Dt)),kt!==void 0&&(Et="m",Et+="ill",Et+="isec",Et+="onds",this.setUTCAttribute(Et,kt)),this.getTime()},setUTCSeconds:function(xt,Dt){var kt;return this.setUTCAttribute("seconds",xt),Dt!==void 0&&(kt="m",kt+="illise",kt+="cond",kt+="s",this.setUTCAttribute(kt,Dt)),this.getTime()},setUTCMilliseconds:function(xt){return this.setUTCAttribute("milliseconds",xt),vt.V5R(),this.getTime()},setFromDateObjProxy:function(xt){this.year=xt.getFullYear(),this.month=xt.getMonth(),this.date=xt.getDate(),this.hours=xt.getHours(),this.minutes=xt.getMinutes(),this.seconds=xt.getSeconds(),this.milliseconds=xt.getMilliseconds(),this._day=xt.getDay(),vt.V5R(),this._dateProxy=xt,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(xt,Dt){var kt,Ft;kt=new Date(xt),vt.a3S(),Ft=Dt?Pe.timezone.getTzInfo(xt,Dt,!0).tzOffset:kt.getTimezoneOffset(),kt.setTime(xt+(kt.getTimezoneOffset()-Ft)*6e4),this.setFromDateObjProxy(kt)},setAttribute:function(xt,Dt){var kt,Ft,Et;if(isNaN(Dt))throw kt="Units must",kt+=" b",kt+="e a number.",new Error(kt);Ft=this._dateProxy,Et=xt==="year"?"FullYear":xt.substr(+"0",+"1").toUpperCase()+xt.substr(1),vt.a3S(),Ft["set"+Et](Dt),this.setFromDateObjProxy(Ft)},setUTCAttribute:function(xt,Dt){var kt,Ft,Et;if(kt="Full",kt+="Ye",vt.a3S(),kt+="ar",isNaN(Dt))throw new Error("Units must be a number.");Ft=xt==="year"?kt:xt.substr(0,1).toUpperCase()+xt.substr(+"1"),Et=this.getUTCDateProxy(),Et["setUTC"+Ft](Dt),Et.setUTCMinutes(Et.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(Et.getTime()+this.getTimezoneOffset()*6e4,this.timezone)},setTimezone:function(xt){var Dt;vt.a3S(),Dt=this.getTimezoneInfo().tzOffset,this.timezone=xt,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+Dt)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return vt.V5R(),this.timezone?new Pe.Date(this.getTime(),this.timezone):new Pe.Date(this.getTime())},toGMTString:function(){var xt;return xt="EEE, dd M",xt+="M",vt.a3S(),xt+="M yy",xt+="yy HH:mm:ss Z",this.toString(xt,"Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){var xt;return xt="E",xt+="tc",xt+="/UT",xt+="C",this.toString("yyyy-MM-ddTHH:mm:ss.SSS",xt)+"Z"},toJSON:function(){return vt.V5R(),this.toISOString()},toDateString:function(){return vt.V5R(),this.toString("EEE MMM dd yyyy")},toTimeString:function(){return vt.a3S(),this.toString("H:mm k")},toString:function(xt,Dt){var kt,Ft,Et,we;return xt||(xt="yyyy-MM-ddTHH:mm:ss.SSS"),kt=xt,Ft=Dt?Pe.timezone.getTzInfo(this.getTime(),Dt):this.getTimezoneInfo(),Et=this,Dt&&(Et=this.clone(),Et.setTimezone(Dt)),we=Et.getHours(),kt.replace(/a+/g,function(){return vt.V5R(),"k"}).replace(/y+/g,function(ie){return vt.V5R(),Ei(Et.getFullYear(),ie.length)}).replace(/d+/g,function(ie){return vt.V5R(),Ei(Et.getDate(),ie.length)}).replace(/m+/g,function(ie){return Ei(Et.getMinutes(),ie.length)}).replace(/s+/g,function(ie){return vt.V5R(),Ei(Et.getSeconds(),ie.length)}).replace(/S+/g,function(ie){return Ei(Et.getMilliseconds(),ie.length)}).replace(/h+/g,function(ie){return vt.a3S(),Ei(we%12===0?12:we%12,ie.length)}).replace(/M+/g,function(ie){var Ne,We,mi,ii,Ze;if(Ne=Et.getMonth(),We=ie.length,We>3)return Pe.Months[Ne];if(We>2){mi=747667242,ii=409342864,Ze=+"2";for(var bi=1;vt.R9b(bi.toString(),bi.toString().length,62691)!==mi;bi++)return Pe.Months[Ne].substring(1,We);if(vt.U5N(Ze.toString(),Ze.toString().length,22068)!==ii)return vt.O44(25),Pe.Months[Ne].substring(vt.b_h("0",32),We)}return vt.o0m(0),Ei(vt.y99(1,Ne),We)}).replace(/k+/g,function(){var ie;return we>=+"12"?(ie="P",ie+="M",we>12&&(we-=12),ie):"AM"}).replace(/H+/g,function(ie){return Ei(we,ie.length)}).replace(/E+/g,function(ie){return vt.V5R(),Ro[Et.getDay()].substring(0,ie.length)}).replace(/Z+/gi,function(){return Ft.tzAbbr})},toUTCString:function(){return vt.a3S(),this.toGMTString()},civilToJulianDayNumber:function(xt,Dt,kt){var Ft,Et,we;Dt++,Dt>12&&(vt.O44(9),Ft=parseInt(vt.b_h(12,Dt),10),vt.O44(77),Dt=vt.b_h(Dt,12),xt+=Ft),Dt<=2&&(xt-=1,Dt+=12),vt.O44(9),Ft=Math.floor(vt.y99(100,xt)),vt.O44(13);var ie=vt.y99(23,15,0,6);vt.O44(148);var Ne=vt.y99(110,20,18,11,11);Et=ie-Ft+Math.floor(Ft/Ne),vt.O44(3);var We=vt.b_h(19,20);vt.o0m(127);var mi=vt.y99(2,6,393,3942);vt.o0m(24);var ii=vt.y99(3,2);vt.o0m(123);var Ze=vt.y99(1530,1521,9,507);return we=Math.floor("365.25"*We*(xt+mi))+Math.floor(30.6001*(Dt+ii))+kt+Et-Ze,we},getLocalOffset:function(){return vt.a3S(),this._dateProxy.getTimezoneOffset()}},!![]),Pe.timezone=new function(){var xt,Dt,kt,Ft,Et,we,ie,Ne,We,mi,ii,Ze,bi,Ui,Wn,to,jn,Kn,Gn,Yn,ne,ns,rs;xt="la",xt+="z";function mh(Mt,It,At,Ut){var Ot,pe,Be,Je,Ci,Si,Ki,aa,Zn,eo,di,io,Vo,ma;if(Ot="nu",Ot+="m",Ot+="be",Ot+="r",pe=typeof Mt===Ot?new Date(Mt):Mt,Be=It[1],Je=It[0],Ci=Be.match(/^([0-9]):([0-9][0-9])$/),Ci){vt.O44(60);var yh=vt.b_h(18,10,2,89);vt.O44(23);var qh=vt.y99(313,19,17);vt.o0m(3);var wh=vt.b_h(6,66);vt.O44(129);var kh=vt.y99(42,2,4,20);vt.O44(54);var Ch=vt.y99(15,6,20,380);return[-1e6,"max","-","Jan",1,[0,0,0],parseInt(Ci[yh],qh)*wh+parseInt(Ci["2"|kh],Ch),"-"]}if(Si=function(Le,le,De){var Xt;if(Xt=0,le==="u"||le==="g"||le==="z")Xt=0;else if(le==="s")Xt=Je;else if(le==="w"||!le)Xt=ls(Je,De[6]);else throw vt.o0m(0),new Error(vt.y99(le,"unknown type "));return vt.O44(4),Xt*=vt.b_h(60,1e3),new Date(Le.getTime()+Xt)},Ki=function(Le,le){var De,Xt,Ae,Ie,ba,Jn,oo;return De=Le[0],Xt=Le[1],Ae=Xt[+"5"],vt.V5R(),li[De]||(li[De]={}),li[De][Xt]?Ie=li[De][Xt]:(isNaN(Xt[4])?(Xt[4].substr("0">>96,+"4")==="last"?(Ie=new Date(Date.UTC(De,ga[Xt[3]]+1,1,Ae[0]-24,Ae[1],Ae["2">>0],+"0")),ba=No[Xt[4].substr(4,3)],Jn="<="):(Ie=new Date(Date.UTC(De,ga[Xt[3]],Xt[4].substr(5),Ae[0],Ae[1],Ae[2],0)),ba=No[Xt["4"-0].substr(0,3)],Jn=Xt[4].substr(3,2)),oo=Ie.getUTCDay(),Jn===">="?Ie.setUTCDate(Ie.getUTCDate()+(ba-oo+(ba<oo?7:0))):Ie.setUTCDate(Ie.getUTCDate()+(ba-oo-(ba>oo?7:0)))):Ie=new Date(Date.UTC(De,ga[Xt[3]],Xt[4],Ae["0"|0],Ae[1],Ae[2],0)),li[De][Xt]=Ie),le&&(Ie=Si(Ie,Ae[3],le)),Ie},aa=function(Le,le){var De,Xt,Ae;De=[];for(var Ie=0;le&&Ie<le.length;Ie++)Xt="m",Xt+="a",Xt+="x",Ae="o",Ae+="n",Ae+="l",Ae+="y",le[Ie][0]<=Le&&(le[Ie][1]>=Le||le[Ie][0]===Le&&le[Ie][1]===Ae||le[Ie][1]===Xt)&&De.push([Le,le[Ie]]);return vt.V5R(),De},Zn=function(Le,le,De){vt.V5R();var Xt,Ae;return Le instanceof Date?De&&(Le=Si(Le,At?"u":"w",De)):(Xt=Le[0],Ae=Le[+"1"],Le=!De&&li[Xt]&&li[Xt][Ae]?li[Xt][Ae]:Ki(Le,De)),le instanceof Date?De&&(le=Si(le,At?"u":"w",De)):(Xt=le[0],vt.o0m(2),Ae=le[vt.b_h("1",0)],le=!De&&li[Xt]&&li[Xt][Ae]?li[Xt][Ae]:Ki(le,De)),Le=Number(Le),le=Number(le),vt.o0m(3),vt.y99(le,Le)},eo=pe.getUTCFullYear(),io=Pe.ruleCache[Ut],io||(io=Pe.ruleCache[Ut]={}),di=io[eo],di||(vt.O44(3),di=aa(vt.y99(1,eo),ne.rules[Be]),di=di.concat(aa(eo,ne.rules[Be])),di.sort(Zn),io[eo]=di),!di||!di.length)return null;for(var ao=di.length-1;ao>=0;ao--)if(ao>0?(vt.O44(3),Vo=di[vt.b_h(1,ao)][1]):Vo=null,ma=di[ao],ma[2]||(ma[2]=Ki(ma,Vo)),Zn(pe,ma,Vo)>=0)return ma[1];return null}xt+="yLoad",Dt="eu";function Ho(Mt){var It,At,Ut,Ot;if(It=rs[Mt],vt.a3S(),It)return It;if(At=Mt.split("/")[0],Ut=ns[At],Ut)return Ut;if(Ot=ne.zones[Mt],typeof Ot=="string")return Ho(Ot);if(!ne.loadedZones.backward)return ne.loadZoneFile("backward"),Ho(Mt);ss(Mt)}Dt+="ro",Dt+="p",Dt+="e",kt="e",kt+="tcete",kt+="r",kt+="a",Ft="e",Ft+="uro",Ft+="p",Ft+="e",Et="e",Et+="u",Et+="rope",we="e",we+="ur",we+="o",we+="pe",ie="europ",ie+="e",Ne="as",Ne+="ia",We="antar",We+="ct",We+="ic",We+="a",mi="af",mi+="rica",ii="euro";function ss(Mt){throw vt.O44(14),vt.V5R(),new Error(vt.y99(Mt,"' is either incorrect, or not loaded in the timezone registry.","Timezone '"))}function Qn(Mt,It){var At,Ut,Ot,pe,Be;for(At=typeof Mt=="number"?Mt:new Date(+Mt).getTime(),Ut=It,Ot=ne.zones[Ut],vt.V5R();typeof Ot=="string";)Ut=Ot,Ot=ne.zones[Ut];if(!Ot){if(ne.loadedZones.backward){if(Ut&&Ut!==It)return ne.lazyLoadZoneFiles(Ut),Qn(Mt,Ut)}else return ne.loadZoneFile("backward"),Qn(Mt,It);ss(Ut)}if(Ot.length===0)throw pe="No Zone found",pe+=" for ",pe+="'",vt.o0m(1),new Error(vt.y99(Mt,pe,"' on ",It));for(var Je=Ot.length-1;Je>=0&&(Be=Ot[Je],!(Be[3]&&At>Be[3]));Je--);return vt.o0m(0),Ot[vt.y99(1,Je)]}ii+="p",ii+="e",Ze="anta",Ze+="rctic",Ze+="a",bi="afri",bi+="ca",Ui="a",Ui+="fri",Ui+="ca",Wn="eur",Wn+="ope",to="no",to+="rtha",to+="me",to+="rica",jn="northamer",jn+="ica",Kn="nor",Kn+="thamerica";function bh(Mt){var It,At,Ut,Ot;if(!!Mt[3])return It=parseInt(Mt[3],10),At=11,Ut=31,Mt[4]&&(At=ga[Mt[4].substr(vt.b_h("0",0,vt.O44(2)),vt.b_h("3",1,vt.o0m(2)))],Ut=parseInt(Mt[5],+"10")||1),Ot=Mt[6]?Xn(Mt[6]):[0,+"0",0],[It,At,Ut,Ot[0],Ot[1],Ot[2]]}function cs(Mt){var It,At;It=Xn(Mt),At=Mt.charAt(0)==="-"?-("1"^0):"1"-0,vt.O44(16);var Ut=vt.y99(69,14,5);vt.o0m(101);var Ot=vt.y99(18,2,3,11);vt.o0m(149);var pe=vt.b_h(14,12,2,12,41);vt.o0m(150);var Be=vt.y99(3,40,4,20,2);vt.O44(133);var Je=vt.b_h(67,4,992,11,6);return vt.V5R(),It=At*(((It[0]*Ut+It[Ot])*pe+It["2"*Be])*Je),vt.o0m(151),vt.y99(1e3,60,It)}Gn="northameri";function Xn(Mt){var It,At;return It=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,At=Mt.match(It),At[1]=parseInt(At[1],10),At[2]=At["2"^0]?parseInt(At[2],"10"-0):0,At[3]=At[3]?parseInt(At[3],10):"0"<<32,vt.V5R(),At.slice(1,5)}Gn+="ca",Yn="etce",Yn+="tera",ne=this,ns={Etc:Yn,EST:"northamerica",MST:Gn,HST:Kn,EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:jn,PST8PDT:to,America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:Wn,Africa:Ui,Indian:bi,Antarctica:Ze,Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:ii,EET:"europe"},rs={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":mi,"Indian/Kerguelen":We,"Indian/Chagos":Ne,"Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":ie,"Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":we,"Asia/Sakhalin":Et,"Asia/Magadan":Ft,"Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward",kt,Dt,"northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:xt,MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=Ho,this.loadingScheme=this.loadingSchemes.LAZY_LOAD;function vh(Mt,It){var At,Ut;return vt.V5R(),At=Mt[+"2"],At.indexOf("%s")>-("1"|0)?(It?Ut=It[7]==="-"?"":It[7]:Ut="S",At.replace("%s",Ut)):At.indexOf("/")>-1?At.split("/",+"2")[It&&It[6]?1:0]:At}this.loadedZones={},this.zones={},this.rules={},this.init=function(Mt){var It,At;It={async:!![]},vt.V5R(),At=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica";for(var Ut in Mt)It[Ut]=Mt[Ut];return this.loadZoneFiles(At,It)},this.loadZoneFiles=function(Mt,It){var At,Ut;if(Ut=0,typeof Mt=="string")return this.loadZoneFile(Mt,It);It=It||{},At=It.callback,It.callback=function(){vt.a3S();var pe;pe="func",pe+="tion",Ut++,Ut===Mt.length&&typeof At===pe&&At()};for(var Ot=0;Ot<Mt.length;Ot++)this.loadZoneFile(Mt[Ot],It)},this.loadZoneFile=function(Mt,It){if(vt.V5R(),typeof this.zoneFileBasePath=="undefined")throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[Mt])return this.loadedZones[Mt]=!!{},xh(Mt,It)};function ls(Mt,It){return vt.O44(3),-Math.ceil(vt.y99(Mt,It))}function xh(Mt,It){vt.a3S();var At;return At=ne.zoneFileBasePath+"/"+Mt,!It||!It.async?ne.parseZones(ne.transport({url:At,async:!{}})):ne.transport({async:!!{},url:At,success:function(Ut){var Ot;return Ot="fun",Ot+="ct",Ot+="ion",vt.V5R(),ne.parseZones(Ut)&&typeof It.callback===Ot&&It.callback()},error:function(){var Ut;throw Ut="' zo",Ut+="nei",Ut+="nfo files",vt.O44(14),new Error(vt.y99(At,Ut,"Error retrieving '"))}})}this.loadZoneJSONData=function(Mt,It){var At;return At=function(Ut){Ut=JSON.parse(Ut);for(var Ot in Ut.zones)ne.zones[Ot]=Ut.zones[Ot];for(var pe in Ut.rules)ne.rules[pe]=Ut.rules[pe]},It?At(ne.transport({url:Mt,async:!1})):ne.transport({url:Mt,success:At})},this.loadZoneDataFromObject=function(Mt){if(!!Mt){for(var It in Mt.zones)ne.zones[It]=Mt.zones[It];vt.a3S();for(var At in Mt.rules)ne.rules[At]=Mt.rules[At]}},this.getAllZones=function(){var Mt;Mt=[],vt.a3S();for(var It in this.zones)Mt.push(It);return Mt.sort()},this.parseZones=function(Mt){var It,At,Ut,Ot,pe,Be,Je,Ci,Si,Ki;if(!Mt)return!{};It=Mt.split(`
`),At=[],Ut="",vt.V5R(),pe=null,Be=null;for(var aa=0;aa<It.length;aa++)if(Ot=It[aa],Ot.match(/^\s/)&&(Je="Zo",Je+="n",Je+="e ",vt.O44(14),Ot=vt.b_h(pe,Ot,Je)),Ot=Ot.split("#")[0],Ot.length>3)switch(Ci="L",Ci+="i",Ci+="n",Ci+="k",Si="R",Si+="u",Si+="l",Si+="e",At=Ot.split(/\s+/),Ut=At.shift(),Ut){case"Zone":if(pe=At.shift(),ne.zones[pe]||(ne.zones[pe]=[]),At.length<3)break;At.splice(3,At.length,bh(At)),At[3]&&(At[3]=Date.UTC.apply(null,At[3])),At[0]=-cs(At[0]),ne.zones[pe].push(At);break;case Si:Be=At.shift(),ne.rules[Be]||(ne.rules[Be]=[]),At[+"0"]=parseInt(At[+"0"],10),At[1]=parseInt(At[1],10)||At[1],At[5]=Xn(At[+"5"]),At[6]=cs(At["6"|0]),ne.rules[Be].push(At);break;case Ci:if(ne.zones[At[1]])throw Ki=". Cannot create link of a preexiste",Ki+="d zone.",new Error("Error with Link "+At["1"^0]+Ki);isNaN(At[0])?ne.zones[At[1]]=At[0]:ne.zones[At[1]]=parseInt(At["0"|0],10);break}return!!{}},this.transport=os,this.getTzInfo=function(Mt,It,At){var Ut,Ot,pe,Be;return this.lazyLoadZoneFiles(It),Ut=Qn(Mt,It),Ot=+Ut[+"0"],pe=mh(Mt,Ut,At,It),pe&&(Ot=ls(Ot,pe[6])),Be=vh(Ut,pe),{tzOffset:Ot,tzAbbr:Be}},this.lazyLoadZoneFiles=function(Mt){var It;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(It=Ho(Mt),!It)throw new Error("Not a valid timezone ID.");this.loadZoneFiles(It)}}}}.call(typeof window!==Dn?window:globalThis),Pe.timezone.loadingScheme=Pe.timezone.loadingSchemes.MANUAL_LOAD,Pe.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-",Ao,null]],"Africa/Cairo":[[-120,"","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco",za,+"1540695600000"],[-60,"Morocco",Ua,null]],"Africa/Windhoek":[[-120,Sn,"%s",null]],"Africa/Johannesburg":[[-120,"",Cn,null]],"Africa/Tunis":[[-+"60","","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-+"270","-","+0430",null]],"Asia/Baku":[[-240,"","+04/+05",null]],"Asia/Dhaka":[[-360,"",La,null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"","C%sT",null]],"Asia/Hong_Kong":[[-480,"","HK%sT",null]],"Asia/Taipei":[[-480,"","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran",Do,null]],"Asia/Jerusalem":[[-120,"Zion",So,null]],"Asia/Tokyo":[[-540,"","J%sT",null]],"Asia/Amman":[[-120,"Jordan",Co,null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"","K%sT",null]],"Asia/Pyongyang":[[-510,"-",kn,15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon",ko,null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"",wn,null]],"Asia/Ulaanbaatar":[[-480,"Mongol",wo,null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-+"180","-","+03",null]],"Asia/Damascus":[[-120,"Syria",qo,null]],"Asia/Bangkok":[[-420,"-",yo,null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"","AC%sT",null]],"Australia/Perth":[[-480,"",Ea,null]],"Australia/Eucla":[[-525,"AW",qn,null]],"Australia/Brisbane":[[-600,"","AE%sT",null]],"Australia/Adelaide":[[-+"570",yn,"AC%sT",null]],"Australia/Hobart":[[-600,"AT",ji,null]],"Australia/Melbourne":[[-600,Wi,"AE%sT",null]],"Australia/Sydney":[[-600,fa,Vi,null]],"Australia/Lord_Howe":[[-630,ci,ki,null]],"Pacific/Fiji":[[-("720"^0),"Fiji","+12/+13",null]],"Pacific/Guam":[[-+"600","-","ChST",null]],"Pacific/Kiritimati":[[-840,"-",ni,null]],"Pacific/Noumea":[[-660,"","+11/+12",null]],"Pacific/Auckland":[[-720,Pi,"NZ%sT",null]],"Pacific/Chatham":[[-765,oi,Ke,null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-+"780","","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[+"0","EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur",Fe,null]],EET:[[-120,"EU",ei,null]],"Europe/Brussels":[[-("60"^0),Mi,"CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,gi,"EE%sT",null]],"Europe/Paris":[[-60,"EU",Hi,null]],"Europe/Berlin":[[-60,Ia,"CE%sT",null]],"Europe/Amsterdam":[[-("60"^0),"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,Pa,ve,null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-",Xe,null]],"Europe/Volgograd":[[-180,"-","+03","1540692000000"-0],[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-+"300","-","+05",null]],"Asia/Omsk":[[-("360"|8),"-","+06",null]],"Asia/Novosibirsk":[[-+"420","-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-",ia,null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,Me,"CE%sT",null]],"Europe/Sarajevo":Ee,"Europe/Istanbul":[[-("180"<<0),"-",ze,null]],"America/New_York":[[300,Re,Ce,null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,je,"M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,Zt,Wt,null]],"Pacific/Honolulu":[[600,"-",Lt,null]],"America/Phoenix":[[420,"-",ce,null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada",be,null]],"America/Regina":[[360,"-",me,null]],"America/Mexico_City":[[360,oe,fe,null]],"America/Chihuahua":[[420,"Mexico",te,null]],"America/Costa_Rica":[[360,"","C%sT",null]],"America/Havana":[[300,"Cuba",ue,null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-",ge,null]],"America/Puerto_Rico":[["240"*1,"-",Se,null]],"America/Argentina/Buenos_Aires":[[180,"",qe,null]],"America/Sao_Paulo":[[180,ye,"-03/-02",null]],"America/Santiago":[["240"<<32,"Chile",Ve,null]],"America/Punta_Arenas":[[180,"-","-03",null]],"America/Bogota":[[300,"","-05/-04",null]],"America/Asuncion":[[240,"Para",he,null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"",se,null]],"America/Caracas":[["240"<<32,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":de,"Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Morocco:[[2013,"2018"<<0,"-",Oe,"lastSun",[+"3",0,0,null],0,"-"],[2014,2018,"-",_e,"lastSun",["2"<<32,0,0,null],60,"-"],[2017,Ue,"-",Te,ae,[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,+"0","0"|0,null],60,"-"],[+"2018","only","-","May","13",[3,0,0,null],0,"-"],[2018,xe,"-","Jun","17",[2,0,0,null],60,"-"],["2019"|35,ee,"-","May","5",[3,0,+"0",null],-60,"-"],["2019"*1,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr",Vt,[3,0,0,null],-60,"-"],[+"2020",_t,"-","May","31",[2,0,0,null],"0"-0,"-"],[2021,"only","-",Nt,"11",[3,0,0,null],-60,"-"],[2021,Pt,"-","May",zt,[2,0,+"0",null],0,"-"],[2022,"only","-","Mar","27",[3,0,+"0",null],-60,"-"],["2022"<<32,Bt,"-",$t,"8",[+"2",0,0,null],0,"-"],[+"2023",jt,"-",Ht,Rt,[+"3",0,"0">>0,null],-("60">>64),"-"],[2023,"only","-","Apr",Ct,["2"-0,0,0,null],+"0","-"],[2024,wt,"-","Mar",Tt,[3,0,0,null],-60,"-"],[2024,"only","-",St,"14",[2,0,0,null],0,"-"],[+"2025","only","-",qt,yt,[3,0,0,null],-60,"-"],[2025,bt,"-","Apr","6",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-",gt,"Sun>=1",[2,0,0,null],0,"CAT"],[1995,2017,"-",mt,ut,[2,0,0,null],-60,pt]],Troll:[[2005,"max","-",ht,"lastSun",[1,0,0,"u"],"120"|8,"+02"],["2004"-0,"max","-","Oct",dt,[1,+"0","0"-0,"u"],0,lt]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-",rt,"lastSun",[1,+"0",0,"u"],0,"-"]],Iran:[[2017,"2019"*1,"-",it,"21",[24,"0"<<0,0,null],60,"-"],[2017,2019,"-",Y,"21",["24"-0,0,0,null],0,"-"],[2020,"only","-",G,"20",["24"|16,0,0,null],60,"-"],[2020,"only","-","Sep",ct,[24,0,0,null],+"0","-"],[2021,+"2023","-","Mar","21",[24,0,"0"-0,null],"60"<<32,"-"],[2021,2023,"-","Sep","21",[+"24",0,0,null],"0"^0,"-"],[2024,"only","-",at,"20",[24,0,0,null],60,"-"],[+"2024","only","-","Sep","20",[24,0,0,null],0,"-"],[2025,2027,"-",J,"21",[24,0,"0"-0,null],60,"-"],[2025,+"2027","-","Sep","21",["24"^0,0,0,null],+"0","-"]],Zion:[[2013,"max","-","Mar","Fri>=23",["2"-0,0,0,null],60,"D"],[2013,"max","-",tt,"lastSun",[2,0,+"0",null],0,"S"]],Jordan:[[2014,"max","-","Mar",K,[24,0,0,null],60,"S"],[2014,V,"-","Oct",et,[0,0,0,"s"],0,"-"]],Lebanon:[[1993,"max","-",Q,"lastSun",[0,0,+"0",null],60,"S"],[+"1999","max","-","Oct","lastSun",[+"0",0,0,null],+"0","-"]],Palestine:[[2016,+"2018","-",j,"Sat>=24",[1,0,0,null],"60"-0,"S"],[2016,2018,"-","Oct",Z,[1,0,0,null],0,"-"],[2019,"only","-","Mar","29",[0,0,0,null],60,"S"],[2019,X,"-","Oct",W,[0,+"0",0,null],60,"-"],[2020,"max","-",H,R,[0,0,0,null],60,"S"],[2020,B,"-","Oct",O,[1,+"0",+"0",null],60,"-"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,+"0",null],60,"S"],[2009,"max","-","Oct","lastFri",[0,+"0",0,null],0,"-"]],AS:[[+"2008","max","-",L,"Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],"60"-0,"D"]],AT:[[2001,"max","-",I,"Sun>=1",[2,0,"0">>64,"s"],"60"^0,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,M,"-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[["2008"^0,"max","-",F,D,[2,0,"0"-0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",["2"<<64,0,+"0","s"],"60"*1,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],"0"^0,"-"],[+"2008",C,"-","Oct","Sun>=1",[2,+"0",0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,+"0",0,null],60,"-"],[2015,N,"-","Jan",U,[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],+"60","-"],[2020,"only","-","Dec",z,[2,+"0",0,null],+"60","-"],[2021,"max","-","Nov","Sun>=8",[+"2",0,0,null],+"60","-"]],NZ:[[2007,E,"-","Sep","lastSun",[2,0,+"0","s"],60,"D"],[2008,"max","-","Apr",P,[2,"0"|0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[+"2",45,0,"s"],60,"-"],[2008,"max","-",T,_,[2,45,0,"s"],0,"-"]],WS:[[2012,A,"-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",["3">>0,0,0,null],60,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,"0"-0,+"0","u"],0,"-"],["1996"*1,S,"-","Oct","lastSun",[1,0,0,"u"],-+"60","-"]],EU:[[1981,"max","-","Mar",k,["1"*1,0,0,"u"],"60"*1,"S"],[+"1996","max","-","Oct","lastSun",["1"^0,0,+"0","u"],0,"-"]],"C-Eur":[[1981,"max","-",y,"lastSun",[2,0,0,"s"],60,"S"],[1996,x,"-","Oct",q,[+"2",+"0",0,"s"],0,"-"]],Thule:[[2007,m,"-",v,"Sun>=8",["2">>0,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar",w,[2,0,0,null],60,"D"],[2007,f,"-",g,u,[2,0,0,null],0,"S"]],Canada:[[2007,p,"-","Mar",h,[2,0,0,null],60,"D"],[2007,"max","-","Nov",d,[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",["2"<<32,0,0,null],+"60","D"],[2002,"max","-","Oct",s,[2,0,0,null],+"0","S"]],Cuba:[["2012">>0,l,"-",c,"Sun>=1",[0,0,0,"s"],+"0","S"],[2013,r,"-","Mar","Sun>=8",[0,0,0,"s"],"60"-0,"D"]],Haiti:[[2017,o,"-",a,e,[2,+"0",0,null],60,"D"],[2017,n,"-","Nov","Sun>=1",[+"2",+"0",0,null],0,"S"]],Brazil:[[2008,2017,"-",i,"Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-","Feb","Sun>=15",["0"|0,+"0",0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",["0">>64,"0"-0,0,null],60,"-"]],Chile:[[+"2016",2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,"0"*1,"u"],"60"|32,"-"]],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[+"2013","max","-","Mar",t,[0,0,0,null],0,"-"]]}})};jl=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.ChartEngine.prototype.touchSingleClick=function(e,a,o){var r,c;return r=this,c=arguments,function(){(function(){var l,s,d,h;if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",c)||this.editingAnnotation||(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-("1"^0)},!this.displayCrosshairs)||!this.displayInitialized||this.openDialog!==""||a<this.left||a>this.right||o<this.top||o>this.bottom)return;l=this.crossYActualPos,s=this.crossXActualPos,this.currentPanel=this.whichPanel(l),d=this.currentVectorParameters.vectorType,(!t.Drawing||!d||!t.Drawing[d]||!new t.Drawing[d]().dragToDraw)&&(this.drawingClick(this.currentPanel,s,l)||n(this,a,o),this.currentVectorParameters.vectorType||(h=this.activeMarker&&this.activeMarker.click({cx:s,cy:l,panel:this.currentPanel}),h||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:s,y:l})))}st.V5R(),this.runAppend("touchSingleClick",c)}).apply(r,c)}},t.ChartEngine.prototype.touchDoubleClick=function(e,a,o){var r,c,l;if(r="tou",r+="chDoubleCli",r+="ck",c="double",c+="T",c+="a",c+="p",!this.runPrepend("touchDoubleClick",arguments)&&!this.editingAnnotation){if(t.ChartEngine.drawingLine)return this.undo();st.V5R(),!this.activeDrawing&&(n(this,a,o),l=this.activeMarker&&this.activeMarker.doubleClick({cx:a,cy:o,panel:this.currentPanel}),l||this.dispatch(c,{stx:this,finger:e,x:a,y:o}),this.runAppend(r,arguments))}},t.ChartEngine.prototype.startProxy=function(e){if(this.touchPointerType=e.pointerType,this.touchPointerType!="touch"){this.mouseMode=!![];return}this.mouseMode=![],this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],this.touches.length==1&&(this.gesturePointerId=e.pointerId),this.touchstart(e)},t.ChartEngine.prototype.moveProxy=function(e){var a;if(a="t",a+="ou",a+="ch",e.pointerType&&e.pointerType!=a){this.mouseMode=!!{};return}this.mouseMode=!1,this.touchmove(e)},t.ChartEngine.prototype.endProxy=function(e){var a,o;if(a="tou",a+="ch",this.touchPointerType!=a){this.mouseMode=!0;return}this.mouseMode=!1,o=this.touches.length;for(var r=0;r<this.touches.length;r++)if(this.touches[r].pointerId==e.pointerId){this.touches.splice(r,+"1");break}if(r==o){this.touches=[],this.grabbingScreen=![],this.touching=!1;return}this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],st.a3S(),this.touchend(e)},t.ChartEngine.prototype.msMouseMoveProxy=function(e){this.touches.length||!this.mouseMode||this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){!this.mouseMode||this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){st.a3S(),this.mouseMode&&this.mouseup(e)},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){this.touching||this.mousemove(e)},t.ChartEngine.prototype.iosMouseDownProxy=function(e){if(this.touching){this.mouseMode=![];return}st.a3S(),this.mouseMode=!0,this.mousedown(e)},t.ChartEngine.prototype.iosMouseUpProxy=function(e){this.touching||this.mouseup(e)},t.ChartEngine.prototype.touchmove=function(e){var a=st,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z;if(o="t",o+="ouchmo",o+="ve",r="non",r+="e",!!this.displayInitialized&&this.openDialog===""&&t.ChartEngine.ignoreTouch!==!!{}){if(c=[],(!this.overYAxis||this.controls&&this.controls.crossX&&this.controls.crossX.style.display!=r)&&(e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),l=new Date().getTime(),this.clicks.s2MS==-+"1"){if(this.clicks.e1MS=l,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=l,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var j=0;j<this.touches.length;j++)if(this.touches[j].pointerId==e.pointerId){if(s=Math.abs(this.touches[j].pageX-e.clientX),d=Math.abs(this.touches[j].pageY-e.clientY),a.o0m(41),h=Math.sqrt(a.b_h(s,s,d,d)),!h||(this.clicks.e1MS=new Date().getTime(),this.clicks.e1MS-this.clicks.s1MS<50)||this.touches[j].pageX==e.clientX&&this.touches[j].pageY==e.clientY)return;this.touches[j].pageX=this.touches[j].clientX=e.clientX,this.touches[j].pageY=this.touches[j].clientY=e.clientY;break}if(j===0?this.movedPrimary=!!{}:this.movedSecondary=!![],j==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],c=this.touches.length?this.touches:this.changedTouches}else c=e.touches,this.changedTouches=e.changedTouches;if(!(c.length==1&&Math.pow(this.clicks.x-c[0].clientX,2)+Math.pow(this.clicks.y-c[0].clientY,+"2")<=16)&&(p=this.crosshairXOffset,u=this.crosshairYOffset,g=this.currentVectorParameters.vectorType&&this.currentVectorParameters.vectorType!=="",f=!this.layout.crosshair&&!g&&!this.touchNoPan,(e.pointerType=="pen"||f||this.activeDrawing&&this.activeDrawing.name=="freeform")&&(p=u=0),!this.runPrepend("touchmove",arguments))){if(t.ChartEngine.resizingPanel){m=c[0],w=m.clientX,v=m.clientY,a.o0m(0),this.mousemoveinner(a.b_h(p,w),a.y99(u,v));return}if(this.moveB!=-1&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=c[0].pageX,c.length==1&&!this.twoFingerStart)a.o0m(25),x=c[a.y99("0",64)],w=x.clientX,v=x.clientY,this.pinchingScreen=+"0",a.O44(0),this.mousemoveinner(a.b_h(p,w),a.y99(u,v)),y=this.whichPanel(v),k=this.xAxisAsFooter===!![]?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=v<=this.top+k&&v>=k-this.xaxisHeight+this.top&&this.insideChart,y?this.overYAxis=(w>=y.right||w<=y.left)&&this.insideChart:this.overYAxis=![];else if(c.length==2){if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom||!this.displayCrosshairs)return;if(S=c[0],A=S.clientX,_=S.clientY,T=c[1],P=T.clientX,E=T.clientY,a.O44(152),q=Math.sqrt(a.b_h(E,A,A,P,_,P,_,E)),this.pinchingCenter=(Math.min(A,P)-Math.max(A,P))/+"2",z=Math.round(this.gestureStartDistance-q),f&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(A<this.pt.x1&&P<this.pt.x2||A>this.pt.x1&&P>this.pt.x2||_<this.pt.y1&&E<this.pt.y2||_>this.pt.y1&&E>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:A,x2:P,y1:_,y2:E},this.pinchingScreen===0)U="p",U+="an",this.grabMode=U,a.O44(0),this.mousemoveinner(a.b_h(p,A),a.y99(u,_)),this.gestureStartDistance=q;else if(this.grabStartValues){if(N=Math.asin((Math.max(E,_)-Math.min(E,_))/q),Math.abs(z)<12&&!f){if(this.moveCount++,this.moveCount==4){this.pinchingScreen=0,this.moveCount=+"0";return}}else this.moveCount=0;if(N<1||!this.goneVertical&&N<1.37){if(!this.currentPanel)return;C=this.currentPanel.chart,this.goneVertical=![],q=this.pt.x2-this.pt.x1,D=this.grabStartValues.t2-this.grabStartValues.t1||1,a.O44(153);var Q=a.b_h(1,5,18,17,4);if(F=this.grabStartValues.t1+D/("2"*Q),a.o0m(9),M=Math.abs(a.b_h(D,q)),C.allowScrollFuture===!1&&C.allowScrollPast===![]&&(M=Math.max(M,C.width/C.dataSet.length)),I=this.layout.candleWidth,this.setCandleWidth(M,C),C.maxTicks<this.minimumZoomTicks){this.setCandleWidth(I,C);return}this.micropixels=0,L=this.pixelFromTick(Math.round(F),C),O=this.pt.x1-this.left+Math.round(q/("2"^0)),a.O44(3),B=a.y99(O,L),a.O44(9),R=a.y99(M,B),H=Math.round(R),C.scroll-=H,a.O44(3),this.microscroll=a.y99(R,H),this.micropixels=M*this.microscroll,this.draw()}else if(W=this.grabStartYAxis,this.goneVertical=!0,W){if(W.zoom=this.grabStartZoom+(this.gestureStartDistance-q),this.grabStartZoom<W.height){if(W.zoom>=W.height){a.O44(154);var et=a.y99(4105,1,12,18,19);W.zoom=W.height-et}}else W.zoom<=W.height&&(W.zoom=W.height+("1">>0));this.draw()}this.updateChartAccessories()}}else if(c.length==3&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;X=c[0],Z=X.clientX,q=this.grabStartX-Z,a.o0m(155);var V=a.b_h(2,5,10,1,7);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(q/V),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=+"1")}this.runAppend(o,arguments)}}};function n(e,a,o){var r=st,c;e.layout.crosshair||(r.O44(30),t.ChartEngine.crosshairY=r.b_h("0",0),t.ChartEngine.crosshairX=0,r.o0m(31),e.cx=e.backOutX(r.b_h("0",32)),e.cy=e.backOutY(0),e.findHighlights(null,!0),t.ChartEngine.crosshairY=o,t.ChartEngine.crosshairX=a,c=e.container.getBoundingClientRect(),e.top=c.top,e.left=c.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(a),e.cy=e.backOutY(o),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR()),e.findHighlights(!0),e.draw()}t.ChartEngine.prototype.touchstart=function(e){var a=st,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I;if(o="to",o+="u",o+="chstart",!t.ChartEngine.ignoreTouch&&(a.a3S(),t.isSurface?(this.movedPrimary=!1,this.movedSecondary=![]):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),r=this.crosshairXOffset,c=this.crosshairYOffset,this.touchPointerType=="pen"&&(r=c=0),!this.runPrepend(o,arguments))){var{layout:L}=this,{vectorType:O}=this.currentVectorParameters;if(l=L.crosshair&&O!==""||O,this.manageTouchAndMouse&&e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!{},this.doubleFingerMoves=0,a.O44(3),this.moveCount=a.b_h(0,"0"),this.twoFingerStart=!1,this.touches.length==1||this.touches.length==2){if(g="floa",g+="t",g+="ing",this.touchMoveTime=Date.now(),f=this.touches[+"0"],h=f.clientX,p=f.clientY,this.moveA=h,this.moveB=-+"1",this.openDialog===""&&(w="do",w+="wn",this.registerPointerEvent({x:h,y:p,time:this.touchMoveTime},w),this.changedTouches.length==("1"|1)&&!this.isDoubleClick(!0)&&t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-("1"-0),e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches["0"|0].pageY})),v=this.container.getBoundingClientRect(),this.top=v.top,this.left=v.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.touches.length==1&&(m=this.backOutY(p),this.currentPanel=this.whichPanel(m)),this.currentPanel||(this.currentPanel=this.chart.panel),u=this.currentPanel,h>=this.left&&h<=this.right&&p>=this.top&&p<=this.bottom){this.insideChart=!0,q=this.xAxisAsFooter===!0?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=p<=this.top+q&&p>=this.top+q-this.xaxisHeight,this.overYAxis=h>=this.left+u.right||h<=this.left+u.left,x=-1,this.cy=this.backOutY(p),this.cx=this.backOutX(h),this.crosshairTick=this.tickFromPixel(this.cx,u.chart),this.crosshairValue=this.adjustIfNecessary(u,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var B=0;B<this.drawingObjects.length;B++)if(y=this.drawingObjects[B],y.highlighted){if(x<0&&(x=B),k=y.highlighted,this.findHighlights(!![]),B==x&&y.highlighted&&!y.permanent){this.clicks.s2MS==-1?this.activateRepositioning(y):this.findHighlights(!{},!0);return}this.anyHighlighted=!!{},y.highlighted=k}}else this.insideChart=!1;if(this.insideChart&&!l&&L.headsUp!==g&&!(L.headsUp&&L.headsUp.floating)&&!O&&!this.touchNoPan){r=c=0;var{baselineHelper:R}=this;if(R.size&&this.findBaselineHandle(e,!0))return;if(this.controls.anchorHandles){S=Object.values(this.controls.anchorHandles),A=![];for(var H=0;H<S.length;H++){_=S[H];var{handle:W,sd:X}=_;T=this.resolveX(this.cx),P=this.resolveY(this.cy);var{left:Z,top:j,right:Q,bottom:et}=W.getBoundingClientRect();E=this.preferences.highlightsTapRadius,a.o0m(3),z=t.boxIntersects(a.b_h(E,Z),j,a.b_h(E,Q,a.o0m(0)),et,T,P,T,P),z&&(U="st",U+="x-",U+="grab",this.repositioningAnchorSelector={sd:X},W.classList.add(U),A=!0),_.highlighted=z}if(A)return}for(s in this.panels)if(d=this.panels[s],d.highlighted){this.grabHandle(d);return}this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),u.chart.spanLock=![],this.yToleranceBroken=!{},a.O44(0),this.grabStartX=a.b_h(r,h),a.O44(0),this.grabStartY=a.y99(c,p),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=u.chart.scroll,this.grabStartScrollY=u.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(u.chart),this.grabStartYAxis=this.whichYAxis(u,this.backOutX(h)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout(function(V){return function(){V.grabbingHand()}}(this),100)}else if(this.grabbingScreen=!{},this.insideChart&&u.subholder===e.target&&(N=this.currentVectorParameters.vectorType,t.Drawing&&N&&t.Drawing[N]&&new t.Drawing[N]().dragToDraw)){this.userPointerDown=!0,t.ChartEngine.crosshairX=h,t.ChartEngine.crosshairY=p,u&&u.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(u,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(u,this.backOutX(h),this.backOutY(p)),this.headsUpHR();return}this.touches.length==("1"^0)&&(l?!O&&u.subholder===e.target&&(a.O44(0),this.mousemoveinner(a.b_h(r,h),a.y99(c,p))):(this.mouseTimer=Date.now(),this.longHoldTookEffect=!{},(this.longHoldTime||this.longHoldTime===("0"^0))&&this.startLongHoldTimer((V=>(a.V5R(),()=>n(V,h,p)))(this))))}if(this.touches.length==2){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;C=this.touches[1],D=C.clientX,F=C.clientY;for(s in this.panels)if(d=this.panels[s],d.highlighted){this.grabHandle(d);return}u=this.currentPanel,a.o0m(152),this.gestureStartDistance=Math.sqrt(a.y99(F,h,h,D,p,D,p,F)),this.pt={x1:h,x2:D,y1:p,y2:F},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),u.chart.spanLock=!1,a.O44(0),this.grabStartX=a.y99(r,h),a.o0m(0),this.grabStartY=a.b_h(c,p),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=u.chart.scroll,this.grabStartScrollY=u.yAxis.scroll,this.grabStartPanel=u,this.swipeStart&&this.swipeStart(u.chart),this.grabStartCandleWidth=L.candleWidth,this.grabStartYAxis=this.whichYAxis(u,this.backOutX((h+D)/("2"^0)))||u.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,u),y2:this.valueFromPixel(this.pt.y2-this.top,u),t1:this.tickFromPixel(this.pt.x1-this.left,u.chart),t2:this.tickFromPixel(this.pt.x2-this.left,u.chart)},this.twoFingerStart=!0,setTimeout(function(V){return a.V5R(),function(){V.grabbingHand()}}(this),100)}else if(this.touches.length==3){if(!this.displayCrosshairs)return;M=this.touches[0],I=M.clientX,this.grabStartX=I,this.grabStartPeriodicity=L.periodicity}this.runAppend("touchstart",arguments)}},t.ChartEngine.prototype.touchend=function(e){var a=st,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;if(!t.ChartEngine.ignoreTouch&&(this.swipe.end=!!{},t.isSurface||(this.touches=e.touches,this.changedTouches=e.changedTouches),!this.runPrepend("touchend",arguments))){var{touches:S,layout:A}=this,{vectorType:_}=this.currentVectorParameters;if(o=A.crosshair&&_!==""||_,this.cancelLongHold=!![],S.length<=1&&o&&(!S.length||!this.twoFingerStart)&&(this.grabbingScreen=!1),S.length&&(this.grabStartX=-1,this.grabStartY=-1),r=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),S.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout(function(C){return a.a3S(),function(){C.touching=!1}}(this),500),t.ChartEngine.resizingPanel&&(this.releaseHandle(),this.changedTouches.length!==1||this.grabStartY!==this.changedTouches[0].clientY))return;this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=![],this.grabbingScreen=![],this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}a.o0m(8),a.a3S();var T=a.y99(2,5,5);if(c=S.length+T,this.changedTouches.length===1){if(l=Date.now(),s=this.changedTouches[0],d=this.backOutY(s.pageY)+this.crosshairYOffset,h=this.backOutX(s.pageX)+this.crosshairXOffset,p=this.currentPanel,u=p&&p.subholder===e.target,this.repositioningDrawing){this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),o||this.findHighlights(!1,!0);return}if(this.repositioningBaseline){g="mo",g+="un",g+="tain",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),f=this.mainSeriesRenderer||{},f.params&&f.params.baseline&&f.params.type!=g,this.draw();return}if(this.repositioningAnchorSelector){this.repositioningAnchorSelector.hoverTick||(this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(h-this.crosshairXOffset,this.chart)),w=this.repositioningAnchorSelector.sd,t.Studies.repositionAnchor(this,w),this.repositioningAnchorSelector=null,this.controls.anchorHandles[w.uniqueId].highlighted=![],t.Studies.displayAnchorHandleAndLine(this,w,this.chart.dataSegment),Object.values(this.controls.anchorHandles).forEach(({handle:C})=>{a.V5R();var D;return D="stx-gr",D+="ab",C.classList.remove(D)});return}if(this.openDialog===""&&(v="u",v+="p",this.registerPointerEvent({x:s.clientX,y:s.clientY,time:l},v)),this.clicks.s2MS==-1){if(this.clicks.e1MS=l,!t.Drawing||!_||!t.Drawing[_]||!new t.Drawing[_]().dragToDraw){var{up:P,down:E}=this.pointerEvents;m=1200,a.o0m(156);var z=a.y99(10,11,7,86,1);a.O44(0);var U=a.b_h(6,58);if(q=Math.pow(E[+"0"].x-P[0].x,"2"|z)+Math.pow(E[0].y-P[0].y,"2"<<U)<=m,q&&this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||o))setTimeout(this.touchSingleClick(c,this.clicks.x,this.clicks.y),this.doubleClickTime+1);else{x=364733966,y=425399060,k=2;for(var N=1;a.R9b(N.toString(),N.toString().length,59496)!==x;N++)this.clicks={s1MS:+("5"|1),e1MS:!0,s2MS:0,e2MS:!1},k+=2;a.U5N(k.toString(),k.toString().length,64302)!==y&&(this.clicks={s1MS:5,e1MS:!0,s2MS:0,e2MS:!1}),this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-("1"-0)}}}if(this.userPointerDown=!1,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&u){this.drawingClick(p,h,d);return}this.isDoubleClick(!0)&&(u||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(c,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=l,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&this.grabEndPeriodicity!=-1&&!isNaN(this.grabEndPeriodicity)&&((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-+"1");this.changedTouches.length&&((!o&&!this.currentVectorParameters.vectorType&&c==1||this.twoFingerStart&&!r&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(![],!0)),r&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!![]))),S.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!{},t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,a){var o;o="touch fe",o+="ature r",o+="equires activa",o+="ting movement feature.",i||console.error(o),st.V5R(),i=!!{}}};Kl=b=>{var t=st,i;t.V5R(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Visualization=i.Visualization||function(n){if(!n){console.log("CIQ.Visualization() missing attributes argument.");return}if(typeof n.renderFunction!="function"){console.log("CIQ.Visualization() missing renderFunction property in attributes.");return}this.container=null,this.attributes=n,this.data=null,this.object=null},i.extend(i.Visualization.prototype,{destroy:function(n){var e;e=this.container,i.resizeObserver(e,null,e.resizeHandle),e.autoGenerated?(e.remove(),delete this.container):e.innerHTML="",!n&&(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){t.V5R()})},draw:function(n){var e,a,o,r,c,l,s,d,h;if(e="ob",e+="j",e+="ec",e+="t",!this.data||typeof this.data!==e){a="CIQ.Visu",a+="alization.dra",a+="w() missing data.",console.log(a);return}o=this.attributes,r=o.document||document,c=o.container||this.container,typeof c=="string"&&(c=r.querySelector(c)),c||(l="di",l+="v",c=document.createElement(l),c.style.height=c.style.width="300px",r.body.appendChild(c),c.autoGenerated=!0),o.stx&&(s=o.stx.chart.canvasShim,o.useCanvasShim&&s&&s!==c&&s!==c.parentNode&&(c.autoGenerated||(c=c.cloneNode(),c.id="",c.autoGenerated=!!{}),s.appendChild(c)));function p(u,g){return t.V5R(),u.index<g.index?-("1"^0):u.index>g.index?+"1":0}this.container&&this.container!==c&&this.destroy(!![]),c.resizeHandle||(d=function(u){return function(){t.a3S(),u.data&&u.container&&r.body.contains(u.container)&&u.draw.call(u,!0)}},c.resizeHandle=i.resizeObserver(c,d(this),null)),this.container=c,this.attributes=o,o=i.ensureDefaults({container:this.container},this.attributes),h=o.renderFunction(Object.values(this.data).sort(p),o),h&&(o.id&&(h.id=o.id),(n||o.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(h))),this.attributes=o,this.object=h},setAttributes:function(n,e){var a,o,r,c,l,s,d;if(a="forceRep",a+="lace",o="i",o+="d",r="useCanvasShi",r+="m",c="s",c+="t",c+="x",l=["renderFunction","container",c,r,o,a],s=!1,d=n,typeof n=="string"&&(d={},d[n]=e),typeof d=="object")for(var h in d)this.attributes[h]!==d[h]&&l.indexOf(h)!==-1&&(s=!!{}),this.attributes[h]=d[h];this.draw(s)},updateData:function(n,e){var a,o,r,c,l;t.V5R(),r=Array.isArray(n)?n.reduce(function(d,h){return d[h.name]=h,d},{}):i.shallowClone(n);for(a in r)o=r[a],Object.prototype.toString.call(o)!=="[object Object]"&&(r[a]={value:o}),r[a].name||(r[a].name=a),r[a].value||(r[a].value=0);switch(e||(e="replace"),e.toLowerCase()){case"delete":for(a in r)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in r){c="[object Nu",c+="mbe",c+="r",c+="]",this.data[a]||(this.data[a]={name:a}),o=r[a].value,Object.prototype.toString.call(o)==c?(l="u",l+="pd",l+="a",l+="te",(!this.data[a].value||e==l)&&(t.O44(4),this.data[a].value=t.y99("0",1)),this.data[a].value+=o):this.data[a].value=o;for(var s in r[a])s!=="value"&&(this.data[a][s]=r[a][s])}break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),i.ChartEngine.prototype.embedVisualization=function(n){var e,a,o;e=-2133601010,a=1956200051,t.O44(31),o=t.y99("2",32);for(var r=1;t.R9b(r.toString(),r.toString().length,35823)!==e;r++)n||(n={}),t.o0m(31),o+=t.y99("2",64);return t.U5N(o.toString(),o.toString().length,85952)!==a&&+n&&(n={}),n.stx=this,n.useCanvasShim=!!{},n.translator=function(c){return t.V5R(),n.stx.translateIf(c)},n.document=this.container.ownerDocument,new i.Visualization(n)}};Gl=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(t.Studies.calculateTypicalPrice=function(n,e){var a=st,o,r,c,l,s;if(o=e.chart.scrubbed,r=e.days,o.length<r+1){e.overlay||(e.error=!0);return}c=e.name;for(var d in e.outputs)a.O44(14),c=a.b_h(" ",c,d);l="hlc/3",a.V5R(),e.type=="Med Price"?l="hl/2":e.type=="Weighted Close"&&(l="hlcc/4"),s=0,e.startFrom<=r&&(e.startFrom=0);for(var h=e.startFrom;h<o.length;h++){if(h&&o[h-1][c]){a.o0m(157);var p=a.b_h(2,0,16,20,2);s=o[h-p][c]*r}s+=o[h][l],h>=r&&(a.o0m(3),s-=o[a.b_h(r,h)][l],a.o0m(9),o[h][c]=a.y99(r,s))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):(i="medianPrice feature r",i+="equires first activ",i+="ating ",i+="studies feature.",console.error(i))};Yl=b=>{var t,i,n;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="Mom",i+="entum Indicator",n="f",n+="ield",t.Studies.calculateRateOfChange=function(e,a){var o=st,r,c,l,s,d,h,p,u,g,f,w;if(r="Center ",r+="Line",c="Vo",c+="l",c+="um",c+="e",l="f",l+="i",l+="eld",s=a.chart.scrubbed,s.length<a.days+1){a.error=!!{};return}d=a.inputs.Field,(!d||d==l)&&(d="Close"),a.parameters.isVolume&&(d=c),h=a.name;for(var v in a.outputs)o.o0m(14),h=o.y99(" ",h,v);p=a.inputs[r],p?(o.o0m(3),p=parseInt(p,o.b_h(0,"10"))):p=0;for(var m=Math.max(a.startFrom,a.days);m<s.length;m++)u="o",u+="bje",u+="c",u+="t",g=s[m][d],g&&typeof g=="object"&&(g=g[a.subField]),f=s[m-a.days][d],f&&typeof f==u&&(f=f[a.subField]),a.type=="Momentum"?(o.o0m(16),s[m][h]=o.b_h(g,f,p)):(w=f,w&&(o.O44(158),s[m][h]=o.y99(100,w,g,1,p)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:n}},Momentum:{name:i,calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")};Ql=b=>{var t=st,i,n;t.a3S(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(n="Pr",n+="ice Rel",n+="ati",n+="ve",i.Studies.initPriceRelative=function(e,a,o,r,c,l){var s,d,h;return s="Comp",s+="a",s+="ris",s+="on Symbol",d=i.Studies.initializeFN(e,a,o,r,c,l),h=[d.inputs[s].toUpperCase()],t.V5R(),i.Studies.fetchAdditionalInstruments(e,d,h),d},i.Studies.calculatePriceRelative=function(e,a){var o,r,c,l,s,d,h;if(o="C",o+="omparison",o+=" Symbol",r=a.chart.scrubbed,c=a.inputs["Comparison Symbol"].toUpperCase(),c||(c=a.study.inputs[o]),l={},t.V5R(),s=e.chart.symbol||"",s=s.replace(/[=+\-*\\%]/g,""),l[s]=r.slice(a.startFrom),!!l[s].length){s!=c&&(l[c]=null),t.O44(78),d=i.computeEquationChart(t.y99(s,c,"[","]/[","]"),l),h=+"0";for(var p=a.startFrom;p<r.length&&h<d.length;p++){for(;h<d.length&&r[p].DT.getTime()>d[h].DT.getTime();)h++;r[p].DT.getTime()<d[h].DT.getTime()||(r[p]["Result "+a.name]=d[h].Close,h++)}}},i.Studies.displayVsComparisonSymbol=function(e,a,o){var r,c,l,s,d;if(r="Result",r+=" ",c=a.inputs["Comparison Symbol"].toUpperCase(),!e.getSeries({symbol:c,chart:a.chart}).length){e.displayErrorAsWatermark(a.panel,e.translateIf(a.study.name)+": "+e.translateIf("Not Available"));return}l={skipTransform:e.panels[a.panel].name!=a.chart.name,panelName:a.panel,band:r+a.name,threshold:a.study.centerline,yAxis:a.getYAxis(e),gapDisplayStyle:!![]},s=l.yAxis?l.yAxis.flipped:e.panels[a.panel].yAxis.flipped,d=.3,!a.highlight&&e.highlightedDraggable&&(d*=.3);for(var h=o.length-1;h>=0;h--)if(o[h]&&o[h][c]){i.Studies.displaySeriesAsLine(e,a,o),(a.study.centerline||a.study.centerline===0)&&(a.outputs.Gain&&i.preparePeakValleyFill(e,i.extend(l,{direction:s?-1:1,color:i.Studies.determineColor(a.outputs.Gain),opacity:d})),a.outputs.Loss&&i.preparePeakValleyFill(e,i.extend(l,{direction:s?1:-1,color:i.Studies.determineColor(a.outputs.Loss),opacity:d})));return}},i.Studies.fetchAdditionalInstruments=function(e,a,o,r){t.V5R();var c,l,s,d,h,p,u;if(!e.quoteDriver){c="CIQ.Studies.fetchAdditionalInstruments: No ",c+="quotefeed to fetch symbol",console.log(c);return}l=e.panels[a.panel].chart,a.symbols=o;function g(){e.createDataSet(),e.draw()}for(s=0;s<o.length;s++)d=h=o[s],typeof h=="object"?d=h.symbol:h={symbol:d},p={symbol:d,symbolObject:h,bucket:"study",studyName:a.name,chartName:l.name,action:"add-study"},i.extend(p,r),u=p.loadData,e.currentlyImporting&&(p.loadData=!{}),a.series||(a.series={}),a.series[d]=e.addSeries(null,p,g),a.series[d].parameters.loadData=u},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"P Rel":{name:n,initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculatePriceRelative,centerline:"0"-0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!![]}})):console.error("priceRelative feature requires first activating studies feature.")};Xl=b=>{var t=st,i,n,e,a,o,r,c,l;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.a3S(),n=typeof _timezoneJS!="undefined"?_timezoneJS:b.timezoneJS,i.Studies?(e="#",e+="e1",e+="e1e1",a="#FF",a+="0",a+="0",a+="00",o="V",o+="WA",o+="P",r="yyyy-m",r+="m-",r+="d",r+="d",c="#",c+="85c99e",l="f",l+="i",l+="e",l+="ld",i.Studies.calculateVWAP=function(s,d){var h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D;if(!(d.parameters.state||{}).interactiveAdd){var{inputs:F,name:M,chart:I}=d,{market:L}=I;if(h=d.type==="AVWAP",p=I.scrubbed,!!p.length){if(!h&&i.ChartEngine.isDailyInterval(s.layout.interval)){d.error="VWAP is Intraday Only";return}if(u="h",u+="l",u+="c",u+="/3",h&&(u=F.Field,(!u||u=="field")&&(u=F.Field="hlc/3",s.changeOccurred("layout"))),g=null,f=0,w=0,v=0,m=!1,d.startFrom>1&&(q="_",q+="V",q+=" ",f=p[d.startFrom-1][q+M]||0,w=p[d.startFrom-1]["_VxP "+M]||"0"*1,v=p[d.startFrom-1]["_VxP2 "+M]||0),h){var{market_tz:O}=L.market_def||{},[,B,R,H]=(F["Anchor Date"]||"").match(/^(\d{4})-?(\d{2})-?(\d{2})$/)||[],[,W=0,X=0,Z=+"0"]=(F["Anchor Time"]||"").match(/^(\d{2}):?(\d{2}):?(\d{2})?$/)||[];if(![B,R,H].every(V=>V||V==="0"-0)){x="Invalid An",x+="chor Date",d.error=x;return}t.o0m(3),y=new n.Date(B,t.b_h(1,R),H,W,X,Z,O||""),!d.startFrom&&y>=p[0].DT&&(d.startFrom=s.tickFromDate(y,s.chart,null,!!{})),F["Anchor Selector"]?i.Studies.initAnchorHandle(s,d):i.Studies.removeAnchorHandle(s,d)}for(var j=d.startFrom;j<p.length;j++)if(k="VW",k+="AP",k+=" ",S="_V",S+="xP",S+=" ",h||(g===null&&(g=i.Studies.getMarketOffset({stx:s,localQuoteDate:p[j].DT,shiftToDateBoundary:!![]})),p[j-1]&&p[j-1].DT&&(A=new Date(new Date(+p[j].DT).setMilliseconds(p[j].DT.getMilliseconds()+g)),_=new Date(new Date(+p[j-1].DT).setMilliseconds(p[j-+"1"].DT.getMilliseconds()+g)),_.getDate()!==A.getDate()&&s.chart.market.isMarketDate(A)&&(g=null,f=w=v=0))),T=p[j][u],P=p[j].Volume,h&&!P&&(P=1),f+=P,t.o0m(4),w+=t.y99(P,T),t.O44(159),v+=t.b_h(T,T,P),!(!h&&!f)){t.o0m(0),p[j][t.b_h(M,"_V ")]=f,t.o0m(0),p[j][t.b_h(M,S)]=w,t.o0m(0),p[j][t.b_h(M,"_VxP2 ")]=v,t.O44(0),E=p[j][t.y99(M,"_SDVWAP ")]=Math.sqrt(Math.max(0,v/f-Math.pow(w/f,2))),t.o0m(0),z=p[j][t.y99(M,k)]=t.y99(f,w,t.o0m(9));for(var Q=+"1";Q<=3;Q++)U="SDV",U+="W",U+="A",U+="P",t.o0m(1),p[j][t.y99(M,"SDVWAP","+ ",Q)]=t.y99(Q,E,z,t.o0m(34)),t.O44(1),p[j][t.b_h(M,U,"- ",Q)]=t.y99(Q,z,E,t.O44(55));m=!0}for(var et=1;et<=3;et++)N="Displ",N+="a",N+="y ",F[N+et+" Standard Deviation ("+et+"\u03C3)"]&&(C="S",C+="DVWA",C+="P",t.o0m(1),d.outputMap[t.y99(M,"SDVWAP","+ ",et)]=t.b_h("\u03C3)",et,et," Standard Deviation ("),t.o0m(1),d.outputMap[t.b_h(M,C,"- ",et)]=t.b_h("\u03C3)",et,et," Standard Deviation ("));!h&&!m&&(D="VWAP Requi",D+="res ",D+="Volume",d.error=D)}}},i.Studies.initAnchoredVWAP=function(s,d,h,p,u,g){var f,w,v,m,q;u.state||(u.state={});var{interactiveAdd:x,interactiveAddCB:y,state:k}=u;if(f=!(h["Anchor Date"]||h["Anchor Time"]),w="Click to select AVWAP anchor time",f&&(k.interactiveAdd||s.repositioningAnchorSelector))return"abort";if(f&&!x){for(var{dataSegment:S}=s.chart,A=0;S&&A<S.length;A++)if(S[A]){v="YYYY-",v+="MM-dd",m="An",m+="chor Date";var{DT:_}=S[A];h[m]=i.dateToStr(_,v),h["Anchor Time"]=i.dateToStr(_,"HH:mm:ss");break}}return f&&x?k.interactiveAdd=!![]:(delete k.interactiveAdd,delete u.interactiveAdd,y&&setTimeout(y)),q=i.Studies.initializeFN(s,d,h,p,u,g),k.interactiveAdd?(s.repositioningAnchorSelector={sd:q,tapToAdd:!0},s.dispatch("notification",{message:w,type:"info",displayTime:"0">>32})):s.dispatch("notification",{message:w,remove:!0}),q},i.Studies.displayVWAP=function(s,d,h){var p,u,g,f,w,v,m,q,x,y,k,S,A,_;p="Di",p+="splay 3 Standard Deviation (3\u03C3)",u="Display",u+=" 1 Standard De",u+="viation (1\u03C3)",i.Studies.displaySeriesAsLine(s,d,h),g=d.inputs[u],t.V5R(),f=d.inputs["Display 2 Standard Deviation (2\u03C3)"],w=d.inputs[p],(g||f||w)&&d.inputs.Shading&&(v="V",v+="W",v+="A",v+="P ",m=s.panels[d.panel],q={opacity:d.parameters.opacity?d.parameters.opacity:.2,skipTransform:m.name!=d.chart.name,yAxis:d.getYAxis(s)},!d.highlight&&s.highlightedDraggable&&(q.opacity*=+"0.3"),x=v+d.name,y="VWAP "+d.name,g&&(k="S",k+="DVW",k+="A",k+="P1- ",S="S",S+="DVWAP1+ ",A="S",A+="DVWA",A+="P1+ ",i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:A+d.name,bottomBand:x,color:i.Studies.determineColor(d.outputs[d.outputMap["SDVWAP1+ "+d.name]])},q)),i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:"SDVWAP1- "+d.name,bottomBand:y,color:i.Studies.determineColor(d.outputs[d.outputMap["SDVWAP1- "+d.name]])},q)),x=S+d.name,y=k+d.name),f&&(_="SDVWA",_+="P2- ",i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:"SDVWAP2+ "+d.name,bottomBand:x,color:i.Studies.determineColor(d.outputs[d.outputMap["SDVWAP2+ "+d.name]])},q)),i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:"SDVWAP2- "+d.name,bottomBand:y,color:i.Studies.determineColor(d.outputs[d.outputMap[_+d.name]])},q)),x="SDVWAP2+ "+d.name,y="SDVWAP2- "+d.name),w&&(i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:"SDVWAP3+ "+d.name,bottomBand:x,color:i.Studies.determineColor(d.outputs[d.outputMap["SDVWAP3+ "+d.name]])},q)),i.prepareChannelFill(s,i.extend({panelName:d.panel,topBand:"SDVWAP3- "+d.name,bottomBand:y,color:i.Studies.determineColor(d.outputs[d.outputMap["SDVWAP3- "+d.name]])},q)))),(d.anchorHandle||(d.parameters.state||{}).interactiveAdd)&&i.Studies.displayAnchorHandleAndLine(s,d,h)},i.Studies.removeAnchoredVWAP=function(s,d){var h,p;h="Cli",h+="ck to",h+=" select AVWAP anchor time",p="no",p+="tific",p+="ati",p+="on",s.dispatch(p,{message:h,remove:!0}),i.Studies.removeAnchorHandle(s,d)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:i.Studies.calculateVWAP,seriesFN:i.Studies.displayVWAP,initializeFN:i.Studies.initAnchoredVWAP,removeFN:i.Studies.removeAnchoredVWAP,inputs:{Field:l,"Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1\u03C3)":!1,"Display 2 Standard Deviation (2\u03C3)":![],"Display 3 Standard Deviation (3\u03C3)":!{},Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1\u03C3)":"#e1e1e1","2 Standard Deviation (2\u03C3)":c,"3 Standard Deviation (3\u03C3)":"#fff69e"},parameters:{init:{opacity:.2,interactiveAdd:!!{}}},attributes:{"Anchor Date":{placeholder:r},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:o,overlay:!0,calculateFN:i.Studies.calculateVWAP,seriesFN:i.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1\u03C3)":!{},"Display 2 Standard Deviation (2\u03C3)":!1,"Display 3 Standard Deviation (3\u03C3)":![],Shading:!1},outputs:{VWAP:a,"1 Standard Deviation (1\u03C3)":e,"2 Standard Deviation (2\u03C3)":"#85c99e","3 Standard Deviation (3\u03C3)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")};Zl=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="Zig",i+="Zag",t.Studies.calculateZigZag=function(n,e){var a=st,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P;if(o="_s",o+="t",o+="ate ",r="Cl",r+="ose",c="H",c+="igh",l="Lo",l+="w",s=e.chart.scrubbed,a.V5R(),!s||!s.length)return;d=e.highLowChart,h=null,p=null,u=e.inputs["Distance(%)"],g=0,f=0,w=0,v=null,m=null,q=+"0";function E(C,D){for(var F=C+ +"1";F<D;F++)s[F]["ShadowResult "+e.name]=(s[D]["Result "+e.name]-s[C]["Result "+e.name])*(F-C)/(D-C)+s[C]["Result "+e.name],delete s[F]["Result "+e.name]}for(var z=Math.min(s.length-1,e.startFrom);z>=+"0";z--)if(q=z,s[z]["_state "+e.name]){x=s[z]["_state "+e.name],h=x[0],p=x[1],a.o0m(4),g=x[a.b_h("2",1)],f=x[3],w=x[4],v=x[5],m=x[6];break}for(var U=q;U<s.length;U++){if(y="Cl",y+="os",y+="e",k=s[U][d?"High":y],S=s[U][d?"Low":"Close"],p===null||p<k)if(p=k,g<"0"*1&&(h=S),a.O44(160),v=a.y99(1,p,u,100),g>-1){if(m!==null&&p>m){A="C",A+="los",A+="e",s[f]["Result "+e.name]=s[f][d?"Low":A],E(w,f),g=-1,h=S,w=f,f=U;continue}}else f=U;if(h===null||h>S)if(h=S,g>0&&(p=k),a.O44(161),m=a.b_h(u,100,0,h,"1"),g<1){if(v!==null&&h<v){_="Cl",_+="o",_+="se",s[f]["Result "+e.name]=s[f][d?"High":_],E(w,f),g=1,p=k,w=f,f=U;continue}}else f=U}s[f]["Result "+e.name]=s[f][d?g==1?l:c:r],s[f][o+e.name]=[h,p,g,f,w,v,m],E(w,f),a.o0m(97);var N=a.y99(4,13,14,183,8);for(T=s.length-N;T>f;){if(s[T].Close||s[T].Close==="0">>0){P="Hig",P+="h",s[T]["Result "+e.name]=s[T][d?g==1?P:"Low":"Close"];break}T--}E(f,T)},t.Studies.displayZigZag=function(n,e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q;o="Sha",o+="d",o+="owResult",o+=" ",r=n.chart.highLowBars,e.highLowChart!=r&&(e.highLowChart=r,e.startFrom=0,e.study.calculateFN(n,e)),c=n.chart;for(var x=0;x<a.length;x++)l=a[x],l&&(s="_shado",s+="wCo",s+="py",s+=" ",l[s+e.name]&&(d="_shadow",d+="Copy ",h="Re",h+="s",h+="ul",h+="t ",delete l[h+e.name],delete l[d+e.name]),l["Result "+e.name]||l.transform&&delete l.transform["Result "+e.name]);p=a[0],st.O44(16);var y=st.y99(0,16,17);u=a[a.length-"1"*y],p&&p["ShadowResult "+e.name]&&(g="Sh",g+="adowR",g+="esult ",f="R",f+="esul",f+="t ",w="ShadowR",w+="esul",w+="t ",v="Resu",v+="l",v+="t ",p[v+e.name]=p[w+e.name],p.transform&&(p.transform[f+e.name]=c.transformFunc(n,c,p[g+e.name])),p["_shadowCopy "+e.name]=1),st.V5R(),u&&u[o+e.name]&&(m="ShadowRe",m+="sul",m+="t ",q="Resu",q+="lt ",u[q+e.name]=u["ShadowResult "+e.name],u.transform&&(u.transform["Result "+e.name]=c.transformFunc(n,c,u[m+e.name])),u["_shadowCopy "+e.name]=1),t.Studies.displaySeriesAsLine(n,e,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:i,overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:+"0.1"}}}})):console.error("zigzag feature requires first activating studies feature.")};Jl={CIQ:nt,SplinePlotter:yl,timezoneJS:ql,$$:wl,$$$:kl};st.V5R();(typeof __TREE_SHAKE__=="undefined"||!__TREE_SHAKE__)&&Jl.CIQ.activateImports(Sl,Dl,Al,Tl,_l,Fl,Ml,Pl,Il,El,Ll,Ul,zl,Bl,Ol,Rl,Nl,Hl,Vl,Wl,jl,Kl,Gl,Yl,Ql,Xl,Zl,null);ft[94245]=function(){for(var b=2;b!==9;)switch(b){case 1:return globalThis;case 5:var t;try{for(var i=2;i!==6;)switch(i){case 2:Object.defineProperty(Object.prototype,"nsGou",{get:function(){for(var e=2;e!==1;)switch(e){case 2:return this}},configurable:!0}),t=nsGou,t.vQd9q=t,i=4;break;case 4:i=typeof vQd9q=="undefined"?3:9;break;case 3:throw"";case 9:delete t.vQd9q;var n=Object.prototype;delete n.nsGou,i=6;break}}catch{t=window}return t;case 2:b=typeof globalThis=="object"?1:5;break}}();gf(ft[94245]);ft.c5Q=function(){return typeof ft[228646].c0zxy_1=="function"?ft[228646].c0zxy_1.apply(ft[228646],arguments):ft[228646].c0zxy_1};ft[49247]=function(b){return{D$iDCh4:function(){var t,i=arguments;switch(b){case 15:t=(-i[4]+i[1])/i[0]*i[2]+i[3];break;case 33:t=i[1]*i[2]<i[0];break;case 115:t=(i[3]/i[2]+i[4])/i[0]+i[1];break;case 4:t=i[1]|i[0];break;case 154:t=i[0]+i[2]-i[3]+i[4]-i[1];break;case 180:t=i[1]-i[3]*i[2]-i[0];break;case 75:t=(i[0]>>i[2])/i[1];break;case 104:t=i[4]+i[7]+i[1]+i[5]+i[6]+i[2]+i[3]+i[0];break;case 62:t=i[1]*i[0]*i[3]-i[2];break;case 94:t=i[3]/i[2]/i[0]-i[1];break;case 12:t=i[1]/i[0];break;case 113:t=(-i[4]+i[3]-i[1])*i[0]+i[2];break;case 179:t=(-i[0]-i[3])*i[1]+i[2];break;case 139:t=(i[0]+i[1])/i[4]*i[2]-i[3];break;case 167:t=i[0]+i[1]-i[3]+i[2]+i[4];break;case 56:t=-i[2]+i[0]-i[1];break;case 30:t=(i[4]+i[1])*i[2]-i[3]-i[0];break;case 127:t=i[0]*i[3]+i[4]-i[1]-i[2];break;case 36:t=i[2]*i[3]-i[0]-i[1];break;case 54:t=i[2]*i[3]-i[0]+i[1];break;case 124:t=-i[2]/i[1]+i[0];break;case 44:t=-i[4]*i[0]-i[2]+i[3]+i[1];break;case 178:t=-i[4]/i[2]*i[0]*i[1]+i[3];break;case 116:t=i[0]-+i[1];break;case 136:t=-i[3]*i[0]*i[2]+i[1];break;case 46:t=-i[0]+i[1];break;case 112:t=i[1]/i[0]*i[3]-i[2];break;case 121:t=i[1]*i[2]/i[3]+i[0];break;case 73:t=(i[3]-i[1])*i[2]+i[0];break;case 22:t=i[0]*i[1]*i[4]-i[3]-i[2];break;case 122:t=(i[0]+i[2])*i[1];break;case 108:t=(i[1]/i[0]-i[3])/i[2]-i[4];break;case 64:t=(i[2]-i[4])/(i[0]-i[3])>+i[1];break;case 102:t=(-i[0]-i[3])/i[4]*i[1]+i[2];break;case 35:t=i[0]^i[1];break;case 131:t=(i[2]-i[4])*i[1]-i[3]-i[0];break;case 57:t=i[0]<i[1];break;case 166:t=i[1]*(i[0]+i[2]);break;case 133:t=i[0]+i[1]-i[3]+i[2];break;case 175:t=i[1]-i[4]*i[3]/(i[0]+i[5]/i[2]);break;case 83:t=(i[6]*i[2]-i[1]*i[5])/(i[0]*i[4]-i[3]);break;case 119:t=i[2]/i[4]/i[1]/i[3]+i[0];break;case 66:t=(i[3]-i[0])*(i[5]-i[1])/(i[2]-i[4])+i[6];break;case 14:t=(i[4]+i[2]+i[3]+i[0])/i[1];break;case 77:t=+i[1]/+i[0];break;case 78:t=i[0]+(i[1]-i[3])/i[2];break;case 161:t=(i[2]%i[0]+i[3])*i[1];break;case 134:t=(i[4]+i[0]-i[1])/i[3]-i[2];break;case 71:t=i[3]/i[1]*i[4]+i[0]-i[2];break;case 47:t=(i[2]-i[0])/i[1]+i[3];break;case 37:t=-i[1]-i[0]-i[2]+i[3];break;case 114:t=i[0]*i[4]+i[1]+i[3]-i[2];break;case 41:t=i[1]-i[0]/i[2];break;case 101:t=i[0]!==i[1];break;case 19:t=i[0]+i[2]*i[1];break;case 25:t=(-i[2]-i[3])/i[1]+i[0]+i[4];break;case 85:t=i[0]*i[2]+i[1];break;case 95:t=i[4]+(i[2]-i[0])/(i[6]-i[1])*(i[3]-i[5]);break;case 80:t=-i[2]/i[4]/i[1]-i[0]+i[3];break;case 45:t=(i[4]-i[0]+i[2])*i[1]-i[3];break;case 132:t=i[0]+i[3]+i[2]-i[1];break;case 183:t=i[1]==i[0];break;case 148:t=i[1]-i[4]/(i[2]+i[0]/i[3]);break;case 184:t=i[2]+i[3]/i[1]+i[0];break;case 91:t=i[0]+i[3]+i[2]-i[4]-i[1];break;case 163:t=i[0]-(i[2]^i[1]);break;case 186:t=i[3]+(i[0]/i[1]-i[4]/i[2]);break;case 0:t=i[0]<<i[1];break;case 111:t=i[3]*i[4]-i[2]-i[1]-i[0];break;case 99:t=(i[0]-i[2])/i[1];break;case 155:t=i[4]/i[2]/i[0]+i[3]+i[1];break;case 147:t=-i[2]/i[0]+i[1]+i[3];break;case 24:t=(i[1]-i[2])/+i[0];break;case 52:t=i[1]*i[0]*i[2]*i[3]-i[4];break;case 16:t=i[1]/(i[0]/i[2]);break;case 173:t=i[0]+(i[2]-i[3])*i[1];break;case 169:t=-i[0]-i[1]+i[2];break;case 137:t=-i[3]+i[0]-i[2]+i[1];break;case 145:t=(i[0]-i[3]-i[2])/i[4]+i[1];break;case 125:t=-i[4]/i[3]/i[0]*i[1]+i[2];break;case 58:t=(i[0]-i[1])/(i[3]-i[2]);break;case 40:t=(-i[0]+i[4]-i[1])/i[3]+i[2];break;case 69:t=-i[1]*i[3]+i[2]+i[0];break;case 176:t=i[1]*-+i[0];break;case 39:t=i[0]+ +i[1];break;case 7:t=i[2]-i[3]+i[0]+i[1];break;case 17:t=(i[2]-i[1])/i[4]*i[0]+i[3];break;case 65:t=-i[3]+i[0]+i[1]-i[2];break;case 151:t=i[2]+i[1]*(i[0]-i[3]);break;case 31:t=-i[3]-i[0]-i[1]-i[4]+i[2];break;case 74:t=i[2]/(i[0]<<i[1]);break;case 43:t=i[2]+i[0]/+i[1];break;case 165:t=i[0]>i[1];break;case 8:t=(i[1]+i[0])/i[2];break;case 123:t=i[0]/i[1]-i[3]-i[2];break;case 160:t=(i[0]*i[4]-i[1])/i[3]+i[2];break;case 146:t=i[1]*i[0]*i[2];break;case 177:t=i[1]*-i[0];break;case 53:t=i[0]+i[1]+i[2];break;case 138:t=i[2]/i[1]+i[3]-i[0]-i[4];break;case 18:t=i[0]*i[1];break;case 42:t=i[0]+i[2]/i[1];break;case 171:t=-i[2]/i[3]+i[0]+i[1]-i[4];break;case 103:t=(i[4]-i[2]-i[0])*i[3]+i[1];break;case 26:t=(i[3]+i[2])/i[1]-i[0];break;case 23:t=i[1]-(i[2]-i[0]);break;case 51:t=i[0]/i[2]+i[1]+i[4]-i[3];break;case 6:t=i[0]-i[1];break;case 156:t=i[3]-i[2]+i[1]-i[0];break;case 97:t=(i[3]*i[1]+i[0])/i[2];break;case 2:t=(-i[1]-i[0])/i[3]-i[4]+i[2];break;case 150:t=i[2]*(i[3]/i[1]-i[0]);break;case 82:t=i[2]*(i[5]*i[4]+(i[3]-i[0]))/i[1];break;case 93:t=i[1]/i[2]-i[4]+i[0]-i[3];break;case 109:t=(i[0]-(i[1]+i[2]))/i[3];break;case 86:t=-i[2]/i[1]/i[3]/i[0]+i[4];break;case 81:t=i[1]*(i[3]+i[0])/i[2];break;case 84:t=(i[1]-i[0]*i[2])/i[3];break;case 68:t=(i[3]+i[0]-i[1])*i[2]-i[4];break;case 20:t=i[1]-i[0]*i[2];break;case 153:t=(i[3]-i[4]+i[2])/i[1]-i[0];break;case 59:t=(i[4]-i[1])*i[0]-i[2]+i[3];break;case 28:t=i[2]*i[0]/i[4]/i[1]-i[3];break;case 107:t=i[2]-i[1]-+i[0];break;case 100:t=i[2]*i[0]/i[1];break;case 38:t=i[0]/i[3]+i[1]-i[4]+i[2];break;case 3:t=i[0]+i[1];break;case 61:t=(i[4]-i[0])*i[1]*i[3]-i[2];break;case 89:t=(i[3]/i[2]-i[4])*i[0]-i[1];break;case 1:t=(i[4]+i[3])/i[1]/i[2]-i[0];break;case 60:t=(i[1]-i[3])/i[4]-i[2]+i[0];break;case 34:t=i[0]+(i[1]-i[2]);break;case 174:t=(i[4]+i[2]-i[1])*i[0]+i[3];break;case 72:t=-i[1]*i[2]+i[0];break;case 87:t=(i[0]+i[2])/(i[3]*i[1]);break;case 9:t=i[2]+i[1]-i[0];break;case 76:t=+i[1]/i[0];break;case 126:t=i[0]*i[2]*i[1]+(i[4]-i[5]*i[3])*i[6];break;case 157:t=i[1]/i[2]*i[0]+i[3];break;case 63:t=(i[1]+i[4])*i[0]/i[2]+i[3];break;case 50:t=(i[1]-i[0])/(i[4]-i[3])>i[2];break;case 48:t=i[1]-i[0]-i[3]+i[2];break;case 168:t=i[0]-+i[3]/(i[2]+i[1]);break;case 32:t=i[0]*i[2]-i[1];break;case 88:t=i[1]/i[2]+i[0];break;case 27:t=i[1]>>i[0];break;case 120:t=-i[1]*i[3]*i[4]-i[0]+i[2];break;case 29:t=(i[2]/i[0]-i[4])/i[3]+i[1];break;case 67:t=i[0]/i[2]-i[1]+i[3];break;case 172:t=i[4]/i[2]/i[1]-i[0]+i[3];break;case 96:t=(i[1]*i[2]+i[3])/+i[0];break;case 162:t=i[1]/(i[2]*i[3])<=i[0];break;case 21:t=i[0]/i[3]+i[2]-i[1];break;case 158:t=(i[0]+i[3]+i[4])/i[2]-i[1];break;case 79:t=i[1]-i[3]*(i[2]-i[0]);break;case 49:t=i[4]/i[3]*i[2]*i[1]-i[0];break;case 143:t=i[1]*i[3]/(i[2]+i[0]);break;case 98:t=(i[0]+ +i[1]*i[2])/i[3];break;case 128:t=(i[2]+i[0])/i[3]+i[1];break;case 182:t=i[3]+i[1]*i[2]+i[0];break;case 159:t=i[3]/i[2]*i[4]-i[0]+i[1];break;case 152:t=i[0]/i[2]/i[1]+i[3];break;case 13:t=(i[2]+i[1])*i[0]-i[3];break;case 11:t=i[2]/i[1]-i[0];break;case 90:t=(i[3]-i[1])*i[4]+i[0]-i[2];break;case 129:t=(i[2]-i[0])*i[1]/i[4]-i[3];break;case 181:t=i[0]+i[3]*(i[2]|i[4])+i[1];break;case 140:t=-i[2]/i[1]+i[3]-i[0];break;case 149:t=i[2]/(i[0]-i[1]);break;case 118:t=(i[0]-i[3])/i[1]-i[2]-i[4];break;case 185:t=i[3]*i[1]*i[0]*i[2];break;case 164:t=-i[0]/i[1]-i[2];break;case 130:t=(i[3]+i[0])/i[1]*i[4]+i[2];break;case 142:t=-i[1]/i[3]-i[0]+i[2];break;case 144:t=(-i[0]+i[2])/i[3]+i[1];break;case 55:t=(i[3]+i[0])*i[1]+i[2]-i[4];break;case 10:t=i[1]+i[3]-i[0]-i[2];break;case 170:t=i[1]-i[0]+ +i[2];break;case 5:t=i[2]-i[0]+i[1];break;case 106:t=i[2]-i[1]-i[0];break;case 110:t=i[2]+i[1]+i[3]+i[0];break;case 105:t=i[0]*+i[1];break;case 92:t=-(i[2]-i[0])*i[1]+i[3];break;case 141:t=i[0]*i[4]*i[3]+i[2]-i[1];break;case 117:t=-i[2]+i[1]+i[0];break;case 70:t=i[0]*i[1]+i[2]-i[3];break;case 135:t=(i[0]+i[1]+i[4])*i[2]-i[3];break}return t},X_cHgq6:function(t){b=t}}}();ft[512664]=ft[49247];ft.B40=function(){return typeof ft[49247].X_cHgq6=="function"?ft[49247].X_cHgq6.apply(ft[49247],arguments):ft[49247].X_cHgq6};function ft(){}ft[228646]=function(){for(var b=2;b!==9;)switch(b){case 2:var t=[arguments];t[4]=void 0,t[5]={},b=4;break;case 4:return t[5].c0zxy_1=function(){for(var i=2;i!==90;)switch(i){case 2:var n=[arguments];i=1;break;case 39:n[28]={},i=38;break;case 75:n[71]={},n[71][n[10]]=n[76][n[83]][n[35]],n[71][n[59]]=n[23],n[17].R$RC5(n[71]),i=71;break;case 4:n[7]=[],n[6]={},i=9;break;case 51:n[7].R$RC5(n[99]),n[7].R$RC5(n[2]),i=49;break;case 22:n[93].j26=["O0d"],n[93].C7m=function(){var e=typeof L0z80k=="function";return e},n[12]=n[93],n[69]={},n[69].j26=["O0d"],i=32;break;case 70:n[65]++,i=57;break;case 17:n[5].j26=["o$s"],n[5].C7m=function(){var e=function(){return["a","a"].join()},a=!/(\u005b|\u005d)/.B9JdT(e+[]);return a},n[2]=n[5],n[78]={},n[78].j26=["o$s"],i=25;break;case 11:n[8]={},n[8].j26=["O0d"],i=20;break;case 60:n[53]="C7m",n[10]="v8j",i=58;break;case 67:return t[4]=47,79;case 43:n[34]={},n[34].j26=["o$s"],n[34].C7m=function(){var e=function(){return"aaaa|a".substr(0,3)},a=!/\x7c/.B9JdT(e+[]);return a},n[60]=n[34],i=39;break;case 58:n[65]=0,i=57;break;case 1:i=t[4]?5:4;break;case 77:n[35]=0,i=76;break;case 9:n[6].j26=["O0d"],n[6].C7m=function(){var e=!1,a=[];try{for(var o in console)a.R$RC5(o);e=a.length===0}catch{}var r=e;return r},n[9]=n[6],n[4]={},n[4].j26=["o$s"],n[4].C7m=function(){var e=function(){return decodeURIComponent("%25")},a=!/\u0032\x35/.B9JdT(e+[]);return a},n[3]=n[4],i=11;break;case 25:n[78].C7m=function(){var e=function(){return"aa".endsWith("a")},a=/\x74\u0072\x75\u0065/.B9JdT(e+[]);return a},n[99]=n[78],n[93]={},i=22;break;case 57:i=n[65]<n[7].length?56:69;break;case 53:n[7].R$RC5(n[62]),n[7].R$RC5(n[80]),i=51;break;case 76:i=n[35]<n[76][n[83]].length?75:70;break;case 5:return 97;case 69:i=function(e){for(var a=2;a!==22;)switch(a){case 20:o[7][o[9][n[10]]].h+=!0,a=19;break;case 15:o[3]=o[6][o[1]],o[5]=o[7][o[3]].h/o[7][o[3]].t,a=26;break;case 1:a=o[0][0].length===0?5:4;break;case 10:a=o[9][n[59]]===n[19]?20:19;break;case 26:a=o[5]>=.5?25:24;break;case 4:o[7]={},o[6]=[],o[1]=0,a=8;break;case 2:var o=[arguments];a=1;break;case 17:o[1]=0,a=16;break;case 16:a=o[1]<o[6].length?15:23;break;case 6:o[9]=o[0][0][o[1]],a=14;break;case 25:o[8]=!0,a=24;break;case 8:o[1]=0,a=7;break;case 12:o[6].R$RC5(o[9][n[10]]),a=11;break;case 23:return o[8];case 18:o[8]=!1,a=17;break;case 14:a=typeof o[7][o[9][n[10]]]=="undefined"?13:11;break;case 19:o[1]++,a=7;break;case 5:return;case 7:a=o[1]<o[0][0].length?6:18;break;case 24:o[1]++,a=16;break;case 13:o[7][o[9][n[10]]]=function(){for(var r=2;r!==9;)switch(r){case 4:return c[6].t=0,c[6];case 2:var c=[arguments];c[6]={},c[6].h=0,r=4;break}}.p4qag6(this,arguments),a=12;break;case 11:o[7][o[9][n[10]]].t+=!0,a=10;break}}(n[17])?68:67;break;case 68:i=68;break;case 46:n[7].R$RC5(n[1]),n[7].R$RC5(n[3]),n[17]=[],n[19]="U5W",n[91]="c64",n[83]="j26",n[59]="G8o",i=60;break;case 20:n[8].C7m=function(){var e=typeof b_MKj=="function";return e},n[1]=n[8],n[5]={},i=17;break;case 71:n[35]++,i=76;break;case 32:n[69].C7m=function(){var e=typeof g3bQgV=="function";return e},n[80]=n[69],n[70]={},n[70].j26=["o$s"],n[70].C7m=function(){var e=function(){return"a|a".split("|")},a=!/\x7c/.B9JdT(e+[]);return a},n[43]=n[70],i=43;break;case 49:n[7].R$RC5(n[60]),n[7].R$RC5(n[12]),n[7].R$RC5(n[9]),i=46;break;case 56:n[76]=n[7][n[65]];try{n[23]=n[76][n[53]]()?n[19]:n[91]}catch{n[23]=n[91]}i=77;break;case 38:n[28].j26=["o$s"],n[28].C7m=function(){var e=function(){return encodeURIComponent("%")},a=/\u0032\x35/.B9JdT(e+[]);return a},n[62]=n[28],n[7].R$RC5(n[43]),i=53;break}},t[5]}}();ft.S0g=function(){return typeof ft[228646].c0zxy_1=="function"?ft[228646].c0zxy_1.apply(ft[228646],arguments):ft[228646].c0zxy_1};ft[350012]=!1;ft[92481]=!0;ft[477550]=!1;ft[41283]=ft[228646];ft[94245].t0xx=ft;ft.G0i=function(){return typeof ft[49247].X_cHgq6=="function"?ft[49247].X_cHgq6.apply(ft[49247],arguments):ft[49247].X_cHgq6};ft.J3W=function(){return typeof ft[415188].g9PZ1tV=="function"?ft[415188].g9PZ1tV.apply(ft[415188],arguments):ft[415188].g9PZ1tV};ft.h3u=function(){return typeof ft[415188].g9PZ1tV=="function"?ft[415188].g9PZ1tV.apply(ft[415188],arguments):ft[415188].g9PZ1tV};ft[415188]=function(){var b=function(i,n){var e=n&65535,a=n-e;return(a*i|0)+(e*i|0)|0},t=function(i,n,e){for(var a=3432918353,o=461845907,r=e,c=n&-4,l=0;l<c;l+=4){var s=i.K6rbc(l)&255|(i.K6rbc(l+1)&255)<<8|(i.K6rbc(l+2)&255)<<16|(i.K6rbc(l+3)&255)<<24;s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s,r=(r&524287)<<13|r>>>19,r=r*5+3864292196|0}switch(s=0,n%4){case 3:s=(i.K6rbc(c+2)&255)<<16;case 2:s|=(i.K6rbc(c+1)&255)<<8;case 1:s|=i.K6rbc(c)&255,s=b(s,a),s=(s&131071)<<15|s>>>17,s=b(s,o),r^=s}return r^=n,r^=r>>>16,r=b(r,2246822507),r^=r>>>13,r=b(r,3266489909),r^=r>>>16,r};return{g9PZ1tV:t}}();function gf(b){function t(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0]}}function i(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Array}}for(var n=2;n!==83;)switch(n){case 86:a(t,e[23],e[32],e[91]),n=85;break;case 38:e[74]="",e[74]="p",e[37]=2,e[37]=1,n=53;break;case 2:var e=[arguments];e[7]="",e[7]="c",e[9]="",n=3;break;case 59:e[23]+=e[8],e[67]=e[2],e[67]+=e[31],e[67]+=e[92],n=55;break;case 88:a(c,"test",e[37],e[63]),n=87;break;case 66:var a=function(s,d,h,p){for(var u=2;u!==5;)switch(u){case 2:var g=[arguments];o(e[0][0],g[0][0],g[0][1],g[0][2],g[0][3]),u=5;break}};n=90;break;case 68:e[41]+=e[4],e[41]+=e[7],n=66;break;case 55:e[61]=e[43],e[61]+=e[6],e[61]+=e[1],e[63]=e[35],n=74;break;case 74:e[63]+=e[3],e[63]+=e[5],e[59]=e[9],e[59]+=e[21],e[59]+=e[93],e[41]=e[31],n=68;break;case 53:e[32]=0,e[96]=e[74],e[96]+=e[28],e[96]+=e[72],e[88]=e[56],e[88]+=e[80],n=47;break;case 85:a(t,e[14],e[32],e[88]),n=84;break;case 63:e[91]+=e[42],e[91]+=e[50],e[23]=e[24],e[23]+=e[89],n=59;break;case 15:e[93]="RC5",e[21]="$",e[89]="t",e[57]="ct",n=24;break;case 87:a(t,e[61],e[32],e[67]),n=86;break;case 43:e[56]="g",e[72]="",e[72]="g6",e[28]="4qa",e[74]="",n=38;break;case 84:a(r,"apply",e[37],e[96]),n=83;break;case 20:e[8]="",e[43]="_",e[8]="imize",e[89]="",e[92]="j",n=15;break;case 30:e[77]="__ab",e[19]="QgV",e[56]="",e[80]="3b",n=43;break;case 3:e[4]="6rb",e[9]="R",e[5]="",e[5]="T",e[3]="",e[3]="9Jd",n=13;break;case 89:a(i,"push",e[37],e[59]),n=88;break;case 90:a(l,"charCodeAt",e[37],e[41]),n=89;break;case 34:e[31]="K",e[90]="",e[90]="stra",e[77]="",n=30;break;case 24:e[35]="B",e[50]="k",e[42]="0z80",e[24]="__op",e[22]="L",n=34;break;case 13:e[6]="",e[6]="_residua",e[1]="l",e[2]="b_M",n=20;break;case 47:e[88]+=e[19],e[14]=e[77],e[14]+=e[90],e[14]+=e[57],e[91]=e[22],n=63;break}function o(s,d,h,p,u){for(var g=2;g!==13;)switch(g){case 2:var f=[arguments];f[5]="",f[5]="rty",f[7]="",g=3;break;case 3:f[7]="",f[7]="finePrope",f[6]="de",f[8]=!0,g=6;break;case 6:f[8]=!1;try{for(var w=2;w!==13;)switch(w){case 2:f[9]={},f[2]=(0,f[0][1])(f[0][0]),f[1]=[f[2],f[2].prototype][f[0][3]],w=4;break;case 4:w=f[1].hasOwnProperty(f[0][4])&&f[1][f[0][4]]===f[1][f[0][2]]?3:9;break;case 3:return;case 9:f[1][f[0][4]]=f[1][f[0][2]],f[9].set=function(m){for(var q=2;q!==5;)switch(q){case 2:var x=[arguments];f[1][f[0][2]]=x[0][0],q=5;break}},f[9].get=function(){for(var m=2;m!==14;)switch(m){case 6:return typeof f[1][f[0][2]]==q[6]?void 0:f[1][f[0][2]];case 3:q[1]="u",q[6]=q[1],q[6]+=q[8],q[6]+=q[4],m=6;break;case 2:var q=[arguments];q[4]="d",q[8]="",q[8]="ndefine",m=3;break}},f[9].enumerable=f[8],w=14;break;case 14:try{for(var v=2;v!==3;)switch(v){case 4:f[0][0].Object[f[4]](f[1],f[0][4],f[9]),v=3;break;case 2:f[4]=f[6],f[4]+=f[7],f[4]+=f[5],v=4;break}}catch{}w=13;break}}catch{}g=13;break}}function r(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].Function}}function c(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].RegExp}}function l(s){for(var d=2;d!==5;)switch(d){case 2:var h=[arguments];return h[0][0].String}}}ft.B1g=function(){return typeof ft[49247].D$iDCh4=="function"?ft[49247].D$iDCh4.apply(ft[49247],arguments):ft[49247].D$iDCh4};ft.K73=function(){return typeof ft[49247].D$iDCh4=="function"?ft[49247].D$iDCh4.apply(ft[49247],arguments):ft[49247].D$iDCh4};var $l,td,ed,id,ad,od,nd,rd,sd,cd,ld,dd,hd,pd,ud,fd,gd,md,bd,vd,xd,yd,qd,wd,kd,Cd,Sd,Dd,Ad,Td,_d,Fd,Md,Pd,Id,Ed,Ld,Ud,zd,Bd,Od,Rd,Nd,Hd,Vd,Wd,jd,Kd,Gd,Yd,Qd,Xd,Zd,Jd,$d,th,eh,ih,ah,oh,nh,rh,sh,ch,lh,dh,hh,ph,uh;$l=b=>{var t=ft,i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.S0g(),i.Renderer.Aggregations=function(e){var a,o;this.construct(e),a=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.S0g(),this.isAggregation=!![],a.highlightable=!1,a.name!="_main_series"&&(o="Aggregations are",o+=" only all",o+="owed on main series.",console.warn(o),a.invalid=!![])},i.inheritsFrom(i.Renderer.Aggregations,i.Renderer.OHLC,!1),i.Renderer.Aggregations.requestNew=function(e,a){var o,r,c,l,s,d,h,p,u;o="O",o+="HLC",r="ca",r+="n",r+="dle",c=-1756661134,l=1834476367,s=2;for(var g=1;t.J3W(g.toString(),g.toString().length,4782)!==c;g++)d=null,t.B40(0),s+=t.B1g("2",64);t.J3W(s.toString(),s.toString().length,29921)!==l&&(d=1);for(var f=0;f<e.length;f++)switch(h="heikin",h+="ashi",p=e[f],p){case"kagi":case"pandf":d=p;break;case h:case"linebreak":case"rangebars":case"renko":d="candle";break;default:return null}return d===null?null:(u=new i.Renderer[d==r?o:"Aggregations"]({params:i.extend(a,{type:d})}),t.c5Q(),u.isAggregation=!0,u)},i.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,a){var o,r,c,l,s,d;if(t.c5Q(),o="pa",o+="n",o+="d",o+="f",!a.invalid)return r=this.stx,c={colors:[]},a.type=="kagi"?(l="stx",l+="_kagi_up",s="stx_ka",s+="gi_d",s+="own",r.drawKagiSquareWave(e.panel,"stx_kagi_up",s,a),c.colors.push(r.getCanvasColor(l)),c.colors.push(r.getCanvasColor("stx_kagi_down"))):a.type==o&&(d="stx",d+="_",d+="pandf_u",d+="p",r.drawPointFigureChart(e.panel,"stx_pandf_up","X",a),c.colors.push(r.getCanvasColor(d)),r.drawPointFigureChart(e.panel,"stx_pandf_down","O",a),c.colors.push(r.getCanvasColor("stx_pandf_down"))),c},i.ChartEngine.prototype.setAggregationType=function(e){var a;this.layout.chartType="candle",a=this.chart,a.baseline.userLevel!==!1&&(a.baseline.userLevel=a.baseline.defaultLevel,a.panel.yAxis.scroll=i.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=e,this.setMainSeriesRenderer(),a.canvas&&(this.createDataSet(),this.draw()),t.S0g(),this.changeOccurred("layout")},i.ChartEngine.prototype.drawKagiSquareWave=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;c=e.chart,this.startClip(e.name),l=c.dataSegment,s=c.context,d=e.yAxis,d.flipped&&(h=a,a=o,o=h),p=this.canvasStyle(a),t.c5Q(),u=this.canvasStyle(o),this.canvasColor(a),r.border_color_up&&(s.strokeStyle=r.border_color_up),g=s.strokeStyle,this.canvasColor(o),r.border_color_down&&(s.strokeStyle=r.border_color_down),f=s.strokeStyle,w=+"1",p.width&&parseInt(p.width,10)<=25&&(w=Math.max(+"1",i.stripPX(p.width))),v=1,u.width&&parseInt(u.width,10)<=25&&(v=Math.max(1,i.stripPX(u.width))),this.highlightedDraggable&&(s.globalAlpha*=.3),s.beginPath(),t.B40(1);var P=t.K73(0,4,9,16,20);m=c.dataSet.length-c.scroll-P,q=!0,x=null,y=null,t.B40(2);var E=t.B1g(16,6,32,2,20);k=e.left-.5*this.layout.candleWidth+this.micropixels-E;for(var z=0;z<=l.length;z++)if(k+=this.layout.candleWidth,S=l[z],!!S){if((!S.cache||c.pixelCacheExpired)&&(S.cache={}),S.projection)break;y=S.kagiTrend,d.flipped&&(y*=-1),S.transform&&c.transformFunc&&(A=S.kagiPrevOpen,S=S.transform,S.kagiPrevOpen=c.transformFunc(this,c,A)),_=S.cache,t.B40(3),T=t.K73(m,z),(T<e.cacheLeft||T>e.cacheRight||!_.kagiOpen)&&(_.kagiOpen=d.semiLog?d.height*(1-(Math.log(Math.max(S.Open,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-S.Open)*d.multiplier,_.kagiClose=d.semiLog?d.height*(1-(Math.log(Math.max(S.Close,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-S.Close)*d.multiplier,d.flipped?(_.kagiOpen=d.bottom-_.kagiOpen,_.kagiClose=d.bottom-_.kagiClose):(_.kagiOpen+=d.top,_.kagiClose+=d.top)),_.kagiClose,x=d.semiLog?d.height*(1-(Math.log(Math.max(S.kagiPrevOpen,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-S.kagiPrevOpen)*d.multiplier,d.flipped?x=d.bottom-x:x+=d.top,q?(s.moveTo(m>=0?e.left:Math.floor(k),_.kagiOpen),s.lineTo(Math.floor(k),_.kagiOpen),_.kagiClose<_.kagiOpen?(s.strokeStyle=g,s.lineWidth=w):(s.strokeStyle=f,s.lineWidth=v)):y!=-1&&_.kagiClose<x&&x<_.kagiOpen?(s.lineTo(Math.floor(k),x),s.stroke(),s.beginPath(),s.moveTo(Math.floor(k),x),s.strokeStyle=g,s.lineWidth=w):y!=1&&_.kagiClose>x&&x>_.kagiOpen&&(s.lineTo(Math.floor(k),x),s.stroke(),s.beginPath(),s.moveTo(Math.floor(k),x),s.strokeStyle=f,s.lineWidth=v),s.lineTo(Math.floor(k),_.kagiClose),z+1<l.length&&s.lineTo(Math.floor(k+this.layout.candleWidth),_.kagiClose),q=!1}s.stroke(),this.endClip(),t.B40(4),s.lineWidth=t.K73(1,"1"),c.pixelCacheExpired=!1},i.ChartEngine.prototype.drawPointFigureChart=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C;c=e.chart;function D(O,B,R){t.G0i(3),s.moveTo(t.B1g(O,u),t.B1g(p,y,R,t.B40(5))),t.B40(6),t.S0g(),s.lineTo(t.K73(B,g),t.B1g(h,y,R,x,t.B40(7))),t.B40(3),s.moveTo(t.K73(O,u),t.K73(h,y,R,x,t.G0i(7))),t.B40(6),s.lineTo(t.B1g(B,g),t.B1g(p,y,R,t.G0i(5)))}this.startClip(e.name),l=c.dataSegment,s=c.context;function F(O,B,R){t.G0i(8),s.moveTo(t.K73(B,O,2),t.K73(y,h,R,t.G0i(9))),t.B40(3),s.bezierCurveTo(t.K73(B,g),t.B1g(y,h,R,t.G0i(9)),t.K73(B,g,t.B40(3)),t.B1g(p,R,y,x,t.B40(10)),t.B1g(B,O,2,t.G0i(8)),t.K73(p,R,y,x,t.G0i(10))),t.G0i(6),s.bezierCurveTo(t.B1g(O,u),t.B1g(p,R,y,x,t.G0i(10)),t.B1g(O,u,t.G0i(6)),t.B1g(y,h,R,t.B40(9)),t.B1g(B,O,2,t.B40(8)),t.K73(y,h,R,t.G0i(9)))}this.canvasColor(a),o=="X"&&r.border_color_up?s.strokeStyle=r.border_color_up:o=="O"&&r.border_color_down&&(s.strokeStyle=r.border_color_down),d=this.canvasStyle(a),h=parseInt(d.paddingTop,+"10"),p=parseInt(d.paddingBottom,10),u=parseInt(d.paddingLeft,10),g=parseInt(d.paddingRight,+"10"),d.width&&parseInt(d.width,10)<=25?s.lineWidth=Math.max(1,i.stripPX(d.width)):s.lineWidth=2,this.highlightedDraggable&&(s.globalAlpha*=.3),s.beginPath(),f=this.chart.state.aggregation.box,t.G0i(11);var M=t.K73(18,1,19);w=c.dataSet.length-c.scroll-M,v=e.yAxis,x=f*v.multiplier,t.B40(12),y=t.B1g(2,x),k=this.layout.candleWidth,t.B40(13),t.S0g();var I=t.B1g(13,12,19,402);S=e.left-k+this.micropixels-I;for(var L=0;L<l.length;L++)if(S+=k,A=l[L],!!A){if((!A.cache||c.pixelCacheExpired)&&(A.cache={}),A.projection)break;if(_=A.pfOpen,T=A.pfClose,P=A.pfTrend,E=A.pfStepBack,A.transform&&c.transformFunc&&(A=A.transform,_=c.transformFunc(this,c,_),T=c.transformFunc(this,c,T)),z=A.cache,t.B40(3),U=t.K73(w,L),(U<e.cacheLeft||U>e.cacheRight||!z.pfOpen)&&(v.flipped?(z.pfOpen=v.bottom-(v.high-_)*v.multiplier,z.pfClose=v.bottom-(v.high-T)*v.multiplier):(z.pfOpen=(v.high-_)*v.multiplier+v.top,z.pfClose=(v.high-T)*v.multiplier+v.top)),N=Math.round(S),t.G0i(3),C=Math.round(t.B1g(S,k)),m=Math.abs(Math.round((T-_)/f)),q=z.pfOpen,o==E&&(E=="X"?(t.B40(6),D(N,C,t.B1g(q,x))):E=="O"&&(t.G0i(3),F(N,C,t.B1g(q,x)))),o==P)for(;m>=("0"|0);m--)o=="X"?(D(N,C,q),q-=v.flipped?-x:x):o=="O"&&(F(N,C,q),q+=v.flipped?-x:x)}s.stroke(),this.endClip(),s.lineWidth=1,c.pixelCacheExpired=!1},i.ChartEngine.calculateAggregation=function(e,a,o,r){var c,l;return l=e.layout,["heikinashi","heikenashi"].indexOf(a)>-1?c=i.calculateHeikinAshi(e,o,r):a=="rangebars"?c=i.calculateRangeBars(e,o,l.rangebars,r):a=="kagi"?c=i.calculateKagi(e,o,l.kagi,r):a=="linebreak"?c=i.calculateLineBreak(e,o,l.priceLines,r):a=="renko"?c=i.calculateRenkoBars(e,o,l.renko,r):a=="pandf"&&(c=i.calculatePointFigure(e,o,l.pandf,r)),c},i.calculateHeikinAshi=function(e,a,o){var r,c,l,s,d,h,p,u,g,f,w;if(!a.length)return a;o||(o=[]),r=[];for(var v=0;v<a.length;v++)if(c=a[v],!!c){t.G0i(5);var m=t.K73(16,2,15);if(l=r[r.length-m],!l&&!v){t.G0i(6);var q=t.K73(12,11);l=o[o.length-q]}l||(l=c),s=c.Close,d=c.Open,h=c.High,p=c.Low,u=l.Open,d=d||d===0?d:s,h=h||h===0?h:s,p=p||p===0?p:s,u=u||u===0?u:l.Close,t.B40(3);var x=t.K73(0,2);g=(u+l.Close)/x,t.G0i(14),f=t.B1g(s,4,h,p,d),w={DT:c.DT,displayDate:c.displayDate,Date:c.Date,Open:g,Close:f,High:Math.max(h,Math.max(g,f)),Low:Math.min(p,Math.min(g,f)),Volume:c.Volume,iqPrevClose:l.Close};for(var y in c)!w[y]&&w[y]!==0&&(w[y]=c[y]);r.push(w)}return r},i.calculateKagi=function(e,a,o,r){var c,l,s,d,h,p,u,g;if(!a.length)return a;r||(r=[]),c=e.layout,l=e.chart,o=parseFloat(o),l.defaultChartStyleConfig.kagi=i.ChartEngine.isDailyInterval(c.interval)?4:.4,(isNaN(o)||o<=0)&&(o=l.defaultChartStyleConfig.kagi,i.Market.Symbology.isForexSymbol(l.symbol)&&(o/=4),c.kagi!==null&&(c.kagi=null,e.changeOccurred("layout"))),o/=100,s=[],t.B40(9);var f=t.K73(29,15,15);d=r[r.length-f],h=d?d.DT:0;for(var w=0;w<a.length;w++)if(p=a[w],!!p&&(d||(t.B40(6),d=a[t.B1g(w,1)]),!!d)){if(u=d.Open||d.Open===0?d.Open:d.Close,u>d.Close){if(p.Close>d.Close*(("1"|1)+o))p.Open=d.Close;else if(d.Close>p.Close&&(d.Close=p.Close),d.Volume+=p.Volume,w<a.length-1)continue}else if(u<d.Close){if(p.Close<d.Close*(1-o))p.Open=d.Close;else if(d.Close<p.Close&&(d.Close=p.Close),d.Volume+=p.Volume,w<a.length-1)continue}else if(d.Close=p.Close,d.Volume+=p.Volume,w<a.length-1)continue;g={DT:d.DT,displayDate:d.displayDate,Date:d.Date,Open:d.Open,Close:d.Close,High:Math.max(d.Open,d.Close),Low:Math.min(d.Open,d.Close),Volume:d.Volume,iqPrevClose:d.iqPrevClose};for(var v in d)!g[v]&&g[v]!==0&&(g[v]=d[v]);s.length?g.kagiPrevOpen=s[s.length-1].Open:g.kagiPrevOpen=g.Open,g.Close>g.kagiPrevOpen&&g.kagiPrevOpen>g.Open?g.kagiTrend=1:g.Close<g.kagiPrevOpen&&g.kagiPrevOpen<g.Open&&(g.kagiTrend=-1),h<g.DT&&s.push(g),d=p,l.currentQuote={Close:p.Close}}return s},i.calculateLineBreak=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x;if(!a.length)return a;r||(r=[]),c=e.layout,l=e.chart,l.defaultChartStyleConfig.priceLines=3,o=parseInt(o,10),isNaN(o)||o<=0?(o=l.defaultChartStyleConfig.priceLines,c.priceLines!==null&&(c.priceLines=null,e.changeOccurred("layout"))):o>10&&(c.priceLines=o=10),s=r.slice(-o),d=s.length,h=0;t:for(var y=+"0";y<a.length;y++)if(p=a[y],!!p){h+=p.Volume,t.B40(15);var k=t.K73(11,7,11,12,18);if(u=s[s.length-k],u||(u={Open:p.Open,Close:p.Open,High:p.Open,Low:p.Open}),g=u.Close,f=u.High,w=u.Low,v=u.Open,f=f||f===0?f:g,w=w||w===0?w:g,v=v||v===0?v:g,m={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Close:p.Close,Volume:h,iqPrevClose:g},l.currentQuote={Close:p.Close},!(p.Close>g&&u.Close>v)){if(!(p.Close<g&&u.Close<v))if(p.Close>f){for(q=2;q<=o;q++)if(x=s[s.length-q],x&&p.Close<=x.High)continue t}else if(p.Close<w){for(q=2;q<=o;q++)if(x=s[s.length-q],x&&p.Close>=x.Low)continue t}else continue}p.Close<u.Close?m.Open=Math.min(v,g):m.Open=Math.max(v,g),m.Low=Math.min(m.Open,m.Close),m.High=Math.max(m.Open,m.Close);for(var S in p)!m[S]&&m[S]!==0&&(m[S]=p[S]);s.push(m),h=0}return s.slice(d)},i.getMaxRenkoBarsPerRecord=function(e){return t.S0g(),200},i.calculateRenkoBars=function(e,a,o,r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M;if(!a.length)return[];r||(r=[]);function I(B,R){var H;B=Number(B.toFixed(8)),R=Number(R.toFixed(8)),H={DT:A.DT,displayDate:A.displayDate,Date:A.Date,Open:B,Close:R,High:Math.max(B,R),Low:Math.min(B,R),Volume:0,iqPrevClose:B!=R?B:null};for(var W in A)!H[W]&&H[W]!==0&&(H[W]=A[W]);y.push(H)}if(l=e.layout,s=e.chart,d=o,h=s.state.aggregation,h||(h=s.state.aggregation={}),p=Math.min(300,a.length),h.minMax||(u="L",u+="o",u+="w",h.minMax=e.determineMinMax(a.slice(a.length-p),["Close","High",u])),g=h.minMax[+"1"]-h.minMax[0],f=e.panels[s.name].height,!f)return[];if(w=r.length>0,t.B40(16),v=n(t.K73(f,g,30)),m=i.getMaxRenkoBarsPerRecord(s.symbolObject),c&&(q=a.reduce((B,R)=>{var H;return H=Math.abs(R.Close-R.iqPrevClose),H>B?H:B},0),t.G0i(12),h.minAutoRenko=n(t.K73(m,q))),s.defaultChartStyleConfig.renko=h.minAutoRenko||v,t.S0g(),o===null||isNaN(o)||o<=0?(o=s.defaultChartStyleConfig.renko,l.renko!==null&&(x="layou",x+="t",l.renko=null,e.changeOccurred(x))):(t.G0i(12),o=Math.max(o,t.B1g(f,g)),l.renko!==o&&(l.renko=o,e.changeOccurred("layout"))),y=[],k=null,S=null,A=null,r.length){t.B40(17);var L=t.B1g(11,2,0,23,1);_=r[r.length-L],k=_.Low-o,S=_.High+o}for(var O=0;O<a.length;O++)if(T=a[O],!!T){if(!k&&!S&&(P=T.Open||T.Open===0?T.Open:T.Close,E=Math.floor(P/o)*o,z=isNaN(E)?P:E,t.B40(6),k=t.K73(z,o),t.B40(3),S=t.B1g(z,o)),t.G0i(18),U=t.B1g(o,m),N=!l.renko,C=k-T.Close,D=T.Close-S,F=C>U||D>U,M=N&&F&&!c&&!w,M)return i.calculateRenkoBars(e,a,d,r,!![]);for(;;)if(A||(A=T),T.Close<=k)t.G0i(3),I(t.B1g(k,o),k),t.G0i(19),S=t.K73(k,o,2),k-=o,A=null;else if(T.Close>=S)t.B40(6),I(t.K73(S,o),S),t.B40(20),k=t.B1g(2,S,o),S+=o,A=null;else break;s.currentQuote=T}return k<a[a.length-1].Close&&k+o>a[a.length-+"1"].Close?(t.G0i(3),I(t.K73(k,o),a[a.length-1].Close)):S>a[a.length-1].Close&&S-o<a[a.length-1].Close&&(t.B40(6),I(t.B1g(S,o),a[a.length-1].Close)),y},i.calculateRangeBars=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;function z(M,I){for(;;){if(x||(x=M),w<I){if(w=Math.min(I,v),t.B40(6),m=Math.max(m,t.K73(w,o)),I<v)break}else if(w>=I&&(w=Math.max(I,m),t.B40(3),v=Math.min(v,t.B1g(w,o)),I>m))break;if(typeof w=="undefined"){console.log("Uh oh undefined in calculateRangeBars:processMove");return}U(w),x=null,N()}}function U(M){var I;I={DT:x.DT,displayDate:x.displayDate,Date:x.Date,Open:Number(q.toFixed("8"<<64)),Close:Number(M.toFixed(8)),High:Number(v.toFixed(8)),Low:Number(m.toFixed(8)),Volume:0},I.iqPrevClose=I.Open;for(var L in x)!I[L]&&I[L]!==0&&(I[L]=x[L]);f.push(I)}c="L";function N(){t.B40(3),v=t.B1g(w,o),t.G0i(6),m=t.B1g(w,o),q=w}if(c+="o",c+="w",!a.length)return a;r||(r=[]),l=e.layout,s=e.chart,t.S0g(),d=s.state.aggregation,d||(d=s.state.aggregation={}),h=Math.min(300,a.length),d.minMax||(d.minMax=e.determineMinMax(a.slice(a.length-h),["Close","High",c])),t.B40(21);var C=t.B1g(7,8,2,1);if(p=d.minMax[C]-d.minMax[0],u=e.panels[s.name].height,!u)return[];t.G0i(16),s.defaultChartStyleConfig.range=n(t.K73(u,p,30)),o===null||isNaN(o)||o<"0"<<64?(o=s.defaultChartStyleConfig.range,l.range!==null&&(g="l",g+="ayo",g+="u",g+="t",l.range=null,e.changeOccurred(g))):(t.G0i(12),o=Math.max(o,t.K73(u,p)),l.range!==o&&(l.range=o,e.changeOccurred("layout"))),f=[],w=null,v=null,m=null,q=null,x=null;for(var D=+"0";D<a.length;D++)if(y=a[D],!!y){if(t.B40(6),k=a[t.K73(D,1)],!D){if(!k){t.G0i(10);var F=t.K73(5,0,11,17);k=r[r.length-F]}k&&(w=k.Close,(w||w===0)&&N())}!k||(S=y.Close,A=y.Open,_=y.High,T=y.Low,!(!S&&S!==0)&&(A=A||A===0?A:S,_=_||_===+"0"?_:S,T=T||T===0?T:S,!w&&w!==0&&(P=Math.floor(A/o)*o,w=isNaN(P)?A:P,N(),z(k,A)),D&&z(y,A),_-A<A-T?(_&&z(y,_),T&&z(y,T)):(T&&z(y,T),_&&z(y,_)),z(y,S),D==a.length-1&&S!=q&&(E=v,t.B40(3),v=t.B1g(m,o),t.G0i(6),m=t.B1g(E,o),U(S))))}return f},i.calculatePointFigure=function(e,a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P;if(!a.length)return a;r||(r=[]),c=e.layout,l=e.chart,s=l.state.aggregation,s||(s=l.state.aggregation={});function E(D,F,M,I,L,O,B,R,H){return t.S0g(),{DT:D.DT,Date:D.Date,pfOpen:R,pfClose:H,Open:F,Close:L,High:M,Low:I,Volume:O,iqPrevClose:B}}l.defaultChartStyleConfig.box=1,l.defaultChartStyleConfig.reversal=3;function z(D,F,M,I,L){D.High=Math.max(F,D.High),D.Low=Math.min(M,D.Low),D.Close=I,t.S0g(),D.Volume+=L}o||(o={}),d=o.box,d||(c.pandf&&c.pandf.box!==null&&(c.pandf.box=null,e.changeOccurred("layout")),d=l.defaultChartStyleConfig.box,h=a[a.length-1].Close,h&&(h<.25?d=+"0.0625":h<1?d=.125:h<5?d=.25:h<20?d=+"0.5":h<100?d=1:h<200?d=+"2":h<500?d=4:h<1e3?d=5:h<25e3?(t.B40(6),d=t.K73("50",0)):d=500),i.ChartEngine.isDailyInterval(c.interval)||(t.G0i(18),d/=t.B1g("10",1)),i.Market.Symbology.isForexSymbol(l.symbol)&&(h&&(h<1?d=.001:h<2?d=.002:h<50?d=.02:h<200&&(d=.2)),i.ChartEngine.isDailyInterval(c.interval)&&(d*=10)),l.defaultChartStyleConfig.box=d),d=parseFloat(d),(isNaN(d)||d<=0)&&(c.pandf&&c.pandf.box!==null&&(p="l",p+="ay",p+="ou",p+="t",c.pandf.box=null,e.changeOccurred(p)),l.defaultChartStyleConfig.box=d=1),u=Math.ceil(parseFloat(o.reversal)),u>0&&u>o.reversal?(c.pandf.reversal=u,e.changeOccurred("layout")):(isNaN(u)||u<=0)&&(c.pandf&&c.pandf.reversal!==null&&(g="l",g+="ay",g+="out",c.pandf.reversal=null,e.changeOccurred(g)),u=l.defaultChartStyleConfig.reversal),s.box=d,u*=d,f=1e-8,w=(d.toString()+".").split(".")[1].length,v=[];function U(D,F){for(var M in D)!F[M]&&F[M]!==0&&(F[M]=D[M]);return F}m=0;for(var N=0;N<a.length;N++)if(x=a[N],!!x){if(m+=x.Volume,k=x.Close,S=x.Open,A=x.High,_=x.Low,S=S||S==="0"*1?S:k,A=A||A===0?A:k,_=_||_==="0"*1?_:k,!v.length&&!r.length){q=U(x,E(x,S,A,_,k,m,A+d,Number((Math.ceil(_/d-f)*d).toFixed(w)),Number((Math.floor(A/d+f)*d).toFixed(w)))),q.pfTrend="X",q.pfOpen==q.pfClose&&(q.pfStepBack="-"),v.push(q),m=+"0";continue}t.B40(22);var C=t.K73(4,6,245,18,11);y=v[v.length-C],y||(y=i.clone(r[r.length-1])),y.pfTrend=="O"?(_<=y.pfClose-d?(y.pfClose=Number((Math.ceil(_/d-f)*d).toFixed(w)),y.pfStepBack=="O"&&(y.pfStepBack=null),z(y,A,_,k,m)):A>=y.pfClose+u?(T=y.pfClose+d,P=Number((Math.floor(A/d+f)*d).toFixed(w)),q=E(x,S,A,_,k,m,y.pfClose,T,P),T==P&&(q.pfStepBack="X"),y.pfStepBack=="O"?(y.pfOpen=T,y.pfClose=P,y.pfTrend="X",z(y,A,_,k,m)):(q=U(x,q),q.pfTrend="X",v.push(q))):z(y,A,_,k,m),m=0):y.pfTrend=="X"&&(A>=y.pfClose+d?(y.pfClose=Number((Math.floor(A/d+f)*d).toFixed(w)),(y.pfStepBack=="X"||y.pfStepBack=="-")&&(y.pfStepBack=null),z(y,A,_,k,m)):_<=y.pfClose-u?(T=y.pfClose-d,P=Number((Math.ceil(_/d-f)*d).toFixed(w)),q=E(x,S,A,_,k,m,y.pfClose,T,P),T==P&&(q.pfStepBack="O"),y.pfStepBack=="X"||y.pfStepBack=="-"?(y.pfOpen=T,y.pfClose=P,y.pfTrend="O",z(y,A,_,k,m),T!=P&&y.pfStepBack=="-"&&(y.pfStepBack=null)):(q=U(x,q),q.pfTrend="O",v.push(q))):z(y,A,_,k,m),m=0)}return v};function n(e){return e>.001?Number(e.toFixed(4)):e}};td=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N;i="un",t.S0g(),i+="def",i+="in",i+="ed",n="undefin",n+="ed",e=typeof _CIQ!==n?_CIQ:b.CIQ,a=typeof _timezoneJS!==i?_timezoneJS:b.timezoneJS,e.Drawing?(o="cq-wave-parame",o+="ters",r="l",r+="i",r+="ne",r+="Color",c="lineW",c+="idth",l="I",l+="V",s="pat",s+="t",s+="e",s+="rn",d="lin",d+="eWid",d+="t",d+="h",h="fil",h+="lC",h+="olor",p="c",p+="o",p+="l",p+="or",u="l",u+="in",u+="eWidt",u+="h",g="fil",g+="lColor",f="cq-cvp-controller[cq-cvp-header=",f+='"2"]',w="cq-cvp-",w+="co",w+="ntroller",w+='[cq-cvp-header="1"]',v="patt",v+="er",v+="n3",m="l",m+="ine",m+="W",m+="idth3",q="l",q+="ineW",q+="idt",q+="h",x="lineWid",x+="th",y="pa",y+="tte",y+="rn",k="p",k+="l",S="p",S+="atte",S+="r",S+="n",A="c",A+="ol",A+="o",A+="r",_="lin",_+="eWidt",_+="h",T="f",T+="illC",T+="o",T+="lor",P="c",P+="o",P+="l",P+="or",E="patte",E+="r",E+="n",z="l",z+="in",z+="eWidth",U="c",U+="o",U+="lo",U+="r",N="lin",N+="eW",N+="id",N+="th",e.Drawing.ray=function(){var C;C="r",C+="a",C+="y",this.name=C},e.inheritsFrom(e.Drawing.ray,e.Drawing.line),e.Drawing.ray.prototype.adjust=function(){var C;C=this.stx.panels[this.panelName],C&&(this.setPoint(0,this.d0,this.v0,C.chart),this.setPoint(1,this.d1,this.v1,C.chart),e.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,C.chart))},e.Drawing.continuous=function(){var C;C="co",C+="nt",C+="inuous",this.name=C,this.dragToDraw=!1,this.maxSegments=null},e.inheritsFrom(e.Drawing.continuous,e.Drawing.segment),e.Drawing.continuous.prototype.click=function(C,D,F){var M,I,L,O,B,R;if(M="ve",M+="cto",M+="r",I=this.stx,L=I.panels[this.panelName],!!L)return this.copyConfig(),this.penDown?this.accidentalClick(D,F)?(I.undo(),!![]):(this.setPoint(1,D,F,L.chart),O=e.Drawing.segment,B=new O,R=this.serialize(I),B.reconstruct(I,R),I.addDrawing(B),I.changeOccurred(M),I.draw(),B++,this.maxSegments&&this.segment>this.maxSegments?!!{}:(this.setPoint(0,D,F,L.chart),![])):(this.setPoint(0,D,F,L.chart),this.penDown=!![],![])},e.Drawing.ellipse=function(){t.S0g(),this.name="ellipse"},e.inheritsFrom(e.Drawing.ellipse,e.Drawing.BaseTwoPoint),e.Drawing.ellipse.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J;D="aut",D+="o",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(L=F.pixelFromTick(this.p0["0"|0],M.chart),O=F.pixelFromTick(this.p1[0],M.chart),B=this.pixelFromValue(M,this.p0[0],this.p0[1],I),R=this.pixelFromValue(M,this.p1[0],this.p1[1],I),t.B40(23),H=t.K73(L,L,O),W=O,X=B,Z=R,t.B40(23),j=t.B1g(B,B,R),t.G0i(24),Q=t.K73("6",Z,j),et=this.lineWidth,et||(et=1.1),V=this.color,(V==D||e.isTransparent(V))&&(V=this.getLineColor()),this.highlighted&&et==.1&&(et=1.1),K=this.fillColor,C.beginPath(),C.moveTo(H,X),t.G0i(3),C.bezierCurveTo(H,t.K73(Z,Q),W,t.K73(Z,Q),W,X),t.G0i(6),C.bezierCurveTo(W,t.K73(j,Q),H,t.B1g(j,Q),H,X),K&&!e.isTransparent(K)&&K!="auto"&&(C.fillStyle=K,C.globalAlpha=.2,C.fill(),C.globalAlpha=1),V&&this.pattern!="none"&&(C.strokeStyle=V,C.lineWidth=et,C.setLineDash&&(C.setLineDash(e.borderPatternToArray(et,this.pattern)),C.lineDashOffset=0),C.stroke()),C.closePath(),this.highlighted&&(tt="p",tt+="1",J=this.highlighted==tt,this.littleCircle(C,O,R,J)))},e.Drawing.ellipse.prototype.intersected=function(C,D,F){var M,I,L,O,B,R,H,W,X;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],F)){M=-1230034388,I=+"1660410349",L=2;for(var Z=1;t.J3W(Z.toString(),Z.toString().length,52799)!==M;Z++)return this.highlighted="p1",{action:"drag",point:"p1"};if(t.J3W(L.toString(),L.toString().length,62340)!==I)return this.highlighted="drag",{action:"drag",point:"p1"}}O=this.p0[0]-(this.p1[0]-this.p0[0]),B=this.p1[+"0"],R=this.p1[1],t.B40(25);var j=t.B1g(18,1,9,9,1);t.B40(5);var Q=t.K73(12,13,0);t.B40(3);var et=t.K73(0,1);H=this.p0[j]-(this.p1[Q]-this.p0[et]);var{x0:V,x1:K,y0:tt,y1:J,cy0:at,cy1:ct}=F;if(V>Math.max(O,B)||K<Math.min(O,B))return![];var{field:G,panelName:Y,stx:it}=this;return G&&(W=it.panels[Y],X=it.getYAxisByField(W,G),tt=this.valueFromPixel(at,W,X),J=this.valueFromPixel(ct,W,X)),J>Math.max(H,R)||tt<Math.min(H,R)?!1:(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)})},e.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.ellipse.prototype.reconstruct=function(C,D){this.stx=C,this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.v0=D.v0,this.v1=D.v1,this.field=D.fld,this.adjust()},e.Drawing.ellipse.prototype.serialize=function(){return t.c5Q(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},e.Drawing.channel=function(){this.name="channel",t.c5Q(),this.dragToDraw=!1,this.p2=null},e.inheritsFrom(e.Drawing.channel,e.Drawing.segment),e.Drawing.channel.prototype.configs=["color","fillColor",N,"pattern"],e.Drawing.channel.prototype.move=function(C,D,F){var M;if(!!this.penDown){if(this.copyConfig(),t.c5Q(),this.p2===null)this.p1=[D,F];else{t.G0i(3);var I=t.K73(0,1);t.G0i(26);var L=t.K73(2,2,6,0);M=F-(this.p1[I]-this.p0[L])/(this.p1[0]-this.p0[0])*(D-this.p1[0]),this.p2=[this.p1[0],M]}this.render(C)}},e.Drawing.channel.prototype.click=function(C,D,F){var M,I;if(M=this.stx,I=M.panels[this.panelName],!!I)return this.copyConfig(),this.penDown?this.accidentalClick(D,F)?(M.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],I.chart),this.penDown=![],!!{}):(this.setPoint(1,D,F,I.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(t.G0i(6),this.p2=[this.p1[t.B1g("0",0)],this.p1[t.K73(32,"1",t.G0i(27))]],!{})):(this.setPoint(0,D,F,I.chart),this.penDown=!![],![])},e.Drawing.channel.prototype.boxIntersection=function(C,D,F){var M,I,L,O,{p0:B,p1:R,p2:H}=this;if(!B||!R||!H)return![];var{x0:W,x1:X,y0:Z,y1:j,cy0:Q,cy1:et}=F;if(W>Math.max(B[0],R[0])||X<Math.min(B[0],R[+"0"]))return!1;var{field:V,panelName:K,stx:tt}=this;V&&(M=tt.panels[K],I=tt.getYAxisByField(M,V),Z=this.valueFromPixel(Q,M,I),j=this.valueFromPixel(et,M,I)),t.G0i(28);var J=t.B1g(19,38,16,1,4);t.B40(29);var at=t.K73(11,6,11,1,6);t.B40(30);var ct=t.B1g(349,20,18,10,0);t.B40(5);var G=t.B1g(10,5,6);t.B40(31);var Y=t.K73(20,5,47,9,12);L=(R[0]-B[0])*((H[J]<B[at]?j:Z)-B[ct])-(R[G]-B[Y])*(C-B[0]),t.B40(32);var it=t.B1g(8,127,16);t.G0i(6);var rt=t.K73(7,6);t.B40(3);var lt=t.K73(0,1);t.G0i(11);var dt=t.K73(0,17,17);return O=(H[0]-B[0])*((H[+"1"]>B[+"1"]?j:Z)-(B["1"<<0]+H[it]-R[rt]))-(R[lt]-B["1"|dt])*(C-B[0]),t.G0i(33),t.B1g(0,L,O)},e.Drawing.channel.prototype.intersected=function(C,D,F){var M;if(!this.p0||!this.p1||!this.p2)return null;M={0:this.p0,1:this.p1,2:this.p2};for(var I in M)if(this.pointIntersection(M[I][+"0"],M[I][1],F))return t.B40(3),this.highlighted=t.K73("p",I),{action:"drag",point:"p"+I};return this.boxIntersection(C,D,F)?(this.highlighted=!!{},{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},e.Drawing.channel.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt;D="do",D+="t",D+="ted",F="n",F+="o",F+="ne",M=2047085330,I=778798298,L=2;for(var dt=1;t.J3W(dt.toString(),dt.toString().length,"9143"<<64)!==M;dt++){if(O=this.stx,B=O.panels[this.panelName],R=O.getYAxisByField(B,this.field),!B||this.field&&!R)return;L+=2}if(!(t.J3W(L.toString(),L.toString().length,71962)!==I&&(O=this.stx,B=O.panels[this.panelName],R=O.getYAxisByField(B,this.field),-B&&(this.field||-R)))&&(H=O.pixelFromTick(this.p0[0],B.chart),W=O.pixelFromTick(this.p1[0],B.chart),X=this.pixelFromValue(B,this.p0[0],this.p0[1],R),Z=this.pixelFromValue(B,this.p1[0],this.p1[1],R),j=null,this.p2&&(j=this.pixelFromValue(B,this.p2[0],this.p2[1],R)),Q=this.lineWidth,et=this.getLineColor(),V=this.fillColor,this.p2&&V&&!e.isTransparent(V)&&V!="auto"&&(C.beginPath(),C.moveTo(H,X),C.lineTo(W,Z),C.lineTo(W,j),t.G0i(34),C.lineTo(H,t.K73(X,j,Z)),C.closePath(),C.globalAlpha=.2,C.fillStyle=V,C.fill(),C.globalAlpha=1),K={pattern:this.pattern,lineWidth:Q},(this.penDown||this.highlighted)&&this.pattern==F&&(K.pattern=D),O.plotLine(H,W,X,Z,et,"segment",C,B,K),this.p2&&(t.B40(34),O.plotLine(H,W,t.K73(X,j,Z),j,et,"segment",C,B,K)),this.highlighted)){tt="p",tt+="2",J="p",J+="0",at=this.highlighted==J?!!{}:![],ct=-2112893236,G=-117847973,Y=2;for(var ht=1;t.h3u(ht.toString(),ht.toString().length,31697)!==ct;ht++)it="p",it+="2",rt=this.highlighted!==it?![]:!0,lt=this.highlighted!="p2"?!1:!![],this.littleCircle(C,H,X,at),this.littleCircle(C,W,Z,rt),Y+=2;t.J3W(Y.toString(),Y.toString().length,12500)!==G&&(rt=this.highlighted=="p2"?!!{}:![],lt=this.highlighted!=="p2"?!!{}:!1,this.littleCircle(C,H,X,at),this.littleCircle(C,W,Z,rt)),rt=this.highlighted=="p1"?!![]:!1,lt=this.highlighted==tt,this.littleCircle(C,H,X,at),this.littleCircle(C,W,Z,rt),this.littleCircle(C,W,j,lt)}},e.Drawing.channel.prototype.reposition=function(C,D,F,M){var I,L,O,B;I="mo",I+="v",I+="e",D&&(t.c5Q(),L=this.stx.panels[this.panelName],O=D.tick-F,B=D.value-M,D.action==I?(this.setPoint(0,D.p0[+"0"]-O,D.p0[1]-B,L.chart),t.G0i(27),this.setPoint(t.K73(32,"1"),D.p1[0]-O,D.p1[1]-B,L.chart),this.setPoint(2,D.p2["0"|0]-O,D.p2["1"*1]-B,L.chart),this.render(C)):D.action=="drag"&&(this[D.point]=[F,M],this.setPoint(0,this.p0[0],this.p0["1"<<0],L.chart),this.setPoint(1,this.p1[0],this.p1[1],L.chart),t.G0i(35),this.setPoint(t.K73("2",0),this.p2[0],this.p2[1],L.chart),this.render(C)))},e.Drawing.channel.prototype.adjust=function(){var C;t.c5Q(),C=this.stx.panels[this.panelName],C&&(this.setPoint(0,this.d0,this.v0,C.chart),this.setPoint(1,this.d1,this.v1,C.chart),this.setPoint(2,this.d1,this.v2,C.chart))},e.Drawing.channel.prototype.reconstruct=function(C,D){this.stx=C,this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.v0=D.v0,this.v1=D.v1,this.v2=D.v2,this.field=D.fld,this.adjust()},e.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},e.Drawing.pitchfork=function(){this.name="pitchfork",t.c5Q(),this.dragToDraw=![],this.p2=null},e.inheritsFrom(e.Drawing.pitchfork,e.Drawing.channel),e.Drawing.pitchfork.prototype.configs=[U,z,E],e.Drawing.pitchfork.prototype.move=function(C,D,F){!this.penDown||(this.copyConfig(),this.p2===null?this.p1=[D,F]:this.p2=[D,F],this.render(C))},e.Drawing.pitchfork.prototype.intersected=function(C,D,F){var M,I,L,O;if(!this.p0||!this.p1||!this.p2)return null;M={0:this.p0,1:this.p1,2:this.p2};for(var B in M)if(this.pointIntersection(M[B][0],M[B][1],F))return t.B40(3),this.highlighted=t.B1g("p",B),{action:"drag",point:"p"+B};I=this.rays;for(var R=0;R<I.length;R++)if(L="s",L+="egme",L+="n",L+="t",O="ra",O+="y",this.lineIntersection(C,D,F,R?O:L,I[R][0],I[R][1],!0))return this.highlighted=!![],{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:C,value:this.valueOnDrawingAxis(C,D)};return null},e.Drawing.pitchfork.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)){I=this.p2,I||(I=this.p1),t.S0g(),L=D.pixelFromTick(this.p0[0],F.chart),O=D.pixelFromTick(this.p1[+"0"],F.chart),B=D.pixelFromTick(I[0],F.chart),R=this.pixelFromValue(F,this.p0["0"^0],this.p0[1],M),H=this.pixelFromValue(F,this.p1[0],this.p1[1],M),W=this.pixelFromValue(F,I[0],I[+"1"],M),X=this.lineWidth,Z=this.getLineColor(),j={pattern:this.pattern,lineWidth:X},Q=50,t.G0i(36),et=t.K73(H,W,2,R),t.G0i(36),V=t.B1g(O,B,2,L),V<0&&(Q*=-1),t.B40(12),et*=t.B1g(V,Q),t.B40(8),this.rays=[[[O,H],[B,W]],[[L,R],[t.B1g(B,O,2),t.B1g(W,H,2)]]],O==B&&H==W||(t.G0i(6),this.rays.push([[O,H],[t.B1g(O,Q),t.K73(H,et)]],[[B,W],[t.K73(B,Q),t.B1g(W,et)]]));for(var Y=0;Y<this.rays.length;Y++)K=this.rays[Y],tt=Y?"ray":"segment",D.plotLine(K[0][0],K[1][0],K[0][1],K[1][+"1"],Z,tt,C,F,j);this.highlighted&&(J="p",J+="2",at=this.highlighted=="p0"?!![]:!1,ct=this.highlighted=="p1"?!0:!{},G=this.highlighted==J?!0:![],this.littleCircle(C,L,R,at),this.littleCircle(C,O,H,ct),this.littleCircle(C,B,W,G))}},e.Drawing.pitchfork.prototype.adjust=function(){var C;C=this.stx.panels[this.panelName],C&&(this.setPoint(0,this.d0,this.v0,C.chart),this.setPoint(1,this.d1,this.v1,C.chart),this.setPoint(2,this.d2,this.v2,C.chart))},e.Drawing.pitchfork.prototype.reconstruct=function(C,D){this.stx=C,this.color=D.col,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.d2=D.d2,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.tzo2=D.tzo2,t.S0g(),this.v0=D.v0,this.v1=D.v1,this.v2=D.v2,this.field=D.fld,this.adjust()},e.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},e.Drawing.gartley=function(){var C;C="gar",C+="tl",C+="ey",this.name=C,this.dragToDraw=![],this.maxSegments=4,this.shape=null,this.points=[]},e.inheritsFrom(e.Drawing.gartley,e.Drawing.continuous),e.Drawing.gartley.prototype.check=function(C,D){if(!D)return!0;if(C[0]>=D[0]||C[1]==D[1])return!1;if(this.segment==1)C[1]<D[1]?this.shape="M":this.shape="W";else if(this.segment==+"2"){if(this.shape=="M"&&C[1]<D[1])return!1;if(this.shape=="W"&&C[+"1"]>D[1])return![];if((D[+"1"]-C[1])/(this.points[0][1]-C[+"1"])<.618)return!{};if((D[1]-C[1])/(this.points[0][1]-C[1])>=.786)return!1}else if(this.segment==3){if(this.shape=="M"&&C[1]>D[1])return!{};if(this.shape=="W"&&C[1]<D[1])return!1;if((D[1]-C[1])/(this.points[1][1]-C[1])<.618)return!1;if((D[1]-C[1])/(this.points["1"|1][1]-C[1])>=.786)return!1}else if(this.segment==4){if(this.shape=="M"&&(C[1]<D[1]||D[1]<this.points[0][+"1"]))return![];if(this.shape=="W"&&(C[1]>D[1]||D["1"^0]>this.points[0][1]))return!{};if((this.points[1][1]-D[1])/(this.points[1][+"1"]-this.points[2][1])<1.27)return![];if((this.points[+"1"][1]-D[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return t.S0g(),!0},e.Drawing.gartley.prototype.click=function(C,D,F){var M;if(M=this.stx.panels[this.panelName],!!M){if(this.copyConfig(),!this.penDown)return this.setPoint(0,D,F,M.chart),this.pts=[],this.penDown=!![],this.segment=1,![];if(this.accidentalClick(D,F))return this.penDown=!!{},!1;if(this.check(this.p0,this.p1)){if(this.segment==1&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,D,F,M.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points["0"*1][+"1"],M.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,D,F,M.chart)}return!1}},e.Drawing.gartley.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)){if(I=D.pixelFromTick(this.p0[0],F.chart),L=D.pixelFromTick(this.p1[+"0"],F.chart),O=this.pixelFromValue(F,this.p0[0],this.p0["1"<<0],M),B=this.pixelFromValue(F,this.p1["0"^0],this.p1["1"<<0],M),this.segment==2)this.drawDropZone(C,+"0.618"*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(this.segment==3)this.drawDropZone(C,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[+"0"]);else if(this.segment==4){t.G0i(37);var tt=t.B1g(3,1,4,10);R=1.618*this.points[tt][+"1"]-.618*this.points["1"^0][+"1"],this.shape=="M"?R=Math.max(R,this.points[0][1]):R=Math.min(R,this.points[+"0"][1]),this.drawDropZone(C,R,1.27*this.points["2"*1][1]-.27*this.points[1][1],this.p0[0])}if(H=this.lineWidth,W=this.getLineColor(),X={pattern:this.pattern,lineWidth:H},(this.penDown||this.highlighted)&&this.pattern=="none"&&(X.pattern="dotted"),this.segment<=this.maxSegments&&D.plotLine(I,L,O,B,W,this.name,C,F,X),Z=this.fillColor,j=[],this.points.length){C.beginPath();for(var J=1;J<this.points.length&&J<=4;J++)Q=D.pixelFromTick(this.points[J-+"1"][0],F.chart),et=D.pixelFromTick(this.points[J][0],F.chart),V=this.pixelFromValue(F,this.points[J-1][0],this.points[J-1][1],M),K=this.pixelFromValue(F,this.points[J][0],this.points[J]["1"-0],M),J==1&&j.push(Q,V),j.push(et,K),D.plotLine(Q,et,V,K,W,this.name,C,F,X);if((this.points.length==+"2"||this.points.length==4)&&j.push(L,B),this.points[2]&&j.push(D.pixelFromTick(this.points[2][0],F.chart),this.pixelFromValue(F,this.points[+"2"]["0"<<32],this.points[2][1],M)),Z&&Z!="auto"&&!e.isTransparent(Z)){for(var at=0;at<j.length;at+=2)at===("0"^0)&&C.moveTo(j[0],j[1]),C.lineTo(j[at],j[at+1]);C.fillStyle=Z,C.globalAlpha=.2,C.closePath(),C.fill(),C.globalAlpha=1}}}},e.Drawing.gartley.prototype.lineIntersection=function(C,D,F,M){var I,L,O;if(I=this.points,L=this.stx.panels[this.panelName],I.length!=this.maxSegments+1||!L)return!1;for(var B="0">>0;B<I.length-1;B++)if(O="segme",O+="n",O+="t",e.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,C,D,F,O,I[B],I[B+1]))return!0;return!1},e.Drawing.gartley.prototype.boxIntersection=function(C,D,F){var M,I;if(!this.p0||!this.p1)return![];if(F.x0>Math.max(this.p0["0"^0],this.p1[0])||F.x1<Math.min(this.p0[0],this.p1["0"<<32]))return!1;t.S0g(),M=Math.min(this.p0[1],this.p1[1]),I=Math.max(this.p0[1],this.p1[1]);for(var L=0;L<this.points.length;L++)M=Math.min(M,this.points[L][1]),I=Math.max(I,this.points[L][1]);return F.y1>I||F.y0<M?![]:!0},e.Drawing.gartley.prototype.reposition=function(C,D,F,M){var I,L,O;if(!!D&&(I=this.stx.panels[this.panelName],L=D.tick-F,D.tick=F,O=D.value-M,t.c5Q(),D.value=M,D.action=="move")){this.pts=[];for(var B=0;B<this.points.length;B++)this.points[B][0]-=L,this.points[B][1]-=O,this.setPoint(1,this.points[B][0],this.points[B][1],I.chart),B&&B<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[B]=this.p1;this.setPoint(0,this.points[+"0"]["0"*1],this.points[0][1],I.chart),this.render(C)}},e.Drawing.gartley.prototype.configs=[P,T,_,"pattern"],e.Drawing.gartley.prototype.adjust=function(){var C;C=this.stx.panels[this.panelName],C&&(this.reconstructPoints(),this.setPoint(+"0",this.d0,this.v0,C.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,C.chart),this.points.push(this.p1))},e.Drawing.gartley.prototype.reconstructPoints=function(){var C,D;if(C=this.stx.panels[this.panelName],!!C){this.points=[];for(var F=0;F<this.pts.length;F+=3)D=e.strToDateTime(this.pts[F]),D.setMinutes(D.getMinutes()+Number(this.pts[F+1])-D.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(e.yyyymmddhhmmssmmm(D),C.chart),this.pts[F+2]])}},e.Drawing.gartley.prototype.reconstruct=function(C,D){this.stx=C,this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.v0=D.v0,this.v1=D.v1,this.field=D.fld,t.c5Q(),this.pts=D.pts.split(","),this.adjust()},e.Drawing.gartley.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,pts:this.pts.join(",")}},e.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},e.inheritsFrom(e.Drawing.freeform,e.Drawing.segment),e.Drawing.freeform.prototype.measure=function(){},e.Drawing.freeform.prototype.intersected=function(C,D,F){var M,I,L;M="m",M+="ov",M+="e";var{x0:O,x1:B,y0:R,y1:H,cy0:W,cy1:X}=F;if(O>this.hiX||B<this.lowX)return!1;var{field:Z,panelName:j,stx:Q}=this;return Z&&(I=Q.panels[j],L=Q.getYAxisByField(I,Z),R=this.valueFromPixel(W,I,L),H=this.valueFromPixel(X,I,L)),H>this.hiY||R<this.lowY?![]:(this.highlighted=!![],{action:M,p0:e.clone(this.p0),tick:C,value:this.valueOnDrawingAxis(C,D)})},e.Drawing.freeform.prototype.reposition=function(C,D,F,M){var I,L,O;!D||(I=this.stx.panels[this.panelName],L=D.tick-F,O=D.value-M,D.action=="move"&&(this.setPoint(0,D.p0[0]-L,D.p0[1]-O,I.chart),this.adjust(),this.render(C)))},e.Drawing.freeform.prototype.click=function(C,D,F){var M,I,L,O;if(M=this.stx,I=M.panels[this.panelName],!!I)return L=M.getYAxisByField(I,this.field)||I.yAxis,this.penDown===![]?(this.copyConfig(),this.startX=Math.round(M.resolveX(M.pixelFromTick(D,I.chart))),this.startY=Math.round(M.resolveY(this.pixelFromValue(I,D,F,L))),O=M.dateFromTick(D,I.chart,!![]),this.d0=e.yyyymmddhhmmssmmm(O),this.tzo0=O.getTimezoneOffset(),this.v0=F,this.p0=[e.ChartEngine.crosshairX-this.startX,e.ChartEngine.crosshairY-this.startY],t.B40(4),this.nodes=[this.p0[0],this.p0[t.B1g(0,"1")]],this.pNodes=[this.p0],this.candleWidth=M.layout.candleWidth,this.multiplier=L.multiplier,this.interval=M.layout.interval,this.periodicity=M.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,M.container.ownerDocument.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,M.container.ownerDocument.body.style.cursor="auto",this.nodes.length===2&&M.undo(),!0)},e.Drawing.freeform.prototype.move=function(C,D,F){var M,I,L,O;if(!!this.penDown)return M=this.stx,t.S0g(),I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field)||I.yAxis,O=M.dateFromTick(D,I.chart,!0),this.d1=e.yyyymmddhhmmssmmm(O),this.tzo1=O.getTimezoneOffset(),this.v1=F,this.p1=[e.ChartEngine.crosshairX-this.startX,L.flipped?this.startY-e.ChartEngine.crosshairY:e.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(C),![]},e.Drawing.freeform.prototype.intervalRatio=function(C,D,F,M,I,L){var O,B,R,H;O=0;function W(V,K){return+"30"}t.S0g();function X(V,K){return t.c5Q(),5}if(C==D)O=1;else if(!isNaN(C)&&!isNaN(D))t.B40(12),O=t.B1g(D,C);else if(isNaN(C)){if(B="mo",B+="nth",C==B)R="d",R+="a",R+="y",D=="week"?O=X():D==R?O=W():isNaN(D)||(O=W()*et(I,L)/D);else if(C=="week"){if(D=="month"){t.G0i(38);var Z=t.K73(3,6,13,3,19);O="1"*Z/X()}D=="day"?O=Q():isNaN(D)||(O=Q()*et(I,L)/D)}else if(C=="day")if(D=="week")O=("1"-0)/Q();else if(D=="month"){t.B40(6);var j=t.K73(1,0);O=j/W()}else isNaN(D)||(O=et(I,L)/D)}else isNaN(C)||(H="w",H+="e",H+="e",H+="k",D=="month"?O=C/(W()*et(I,L)):D==H?O=C/(Q()*et(I,L)):D=="day"&&(O=C/et(I,L)));t.B40(12),O*=t.B1g(M,F);function Q(V,K){return 5}function et(V,K){return e.Market.Symbology.isForexSymbol(K)?1440:390}return O},e.Drawing.freeform.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)&&(M=M||F.yAxis,I=this.intervalRatio(this.interval,D.layout.interval,this.periodicity,D.layout.periodicity,this.d0,F.chart.symbol),t.c5Q(),I!==0)){L=D.layout.candleWidth/this.candleWidth,O=M.multiplier/this.multiplier,t.G0i(4),this.setPoint(t.K73(0,"0"),this.d0,this.v0,F.chart),B=D.pixelFromTick(this.p0[0],F.chart),R=this.pixelFromValue(F,this.p0[0],this.p0[1],M),H=[],W=this.lineWidth,X=this.getLineColor(),Z={pattern:this.pattern,lineWidth:W};for(var et=0;et<this.pNodes.length;et++){j=I*L*this.pNodes[et][0]+B,t.B40(32);var V=t.K73(4,27,7);Q=O*this.pNodes[et][V],M.flipped?(t.B40(6),Q=t.K73(R,Q)):Q+=R,H.push(j,Q)}!H.length||(this.splineTension<0?D.connectTheDots(H,X,this.name,C,F,Z):D.plotSpline(H,this.splineTension,X,this.name,C,!0,Z))}},e.Drawing.freeform.prototype.adjust=function(){var C,D,F,M,I,L,O,B,R,H;if(C=this.stx,D=C.panels[this.panelName],!!D){F=[this.nodes[0],this.nodes[1]],this.pNodes=[F],this.lowX=this.nodes[0],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var W="2">>64;W<this.nodes.length;W+=+"2")t.B40(39),M=[this.nodes[W],this.nodes[t.B1g(W,"1")]],this.pNodes.push(M),this.lowX=Math.min(this.lowX,M[0]),this.hiX=Math.max(this.hiX,M[0]),this.lowY=Math.max(this.lowY,M[1]),this.hiY=Math.min(this.hiY,M[1]);I=this.intervalRatio(this.interval,C.layout.interval,this.periodicity,C.layout.periodicity,this.d0,D.chart.symbol),I!=="0"<<0&&(L=C.getYAxisByField(D,this.field)||D.yAxis,O=C.layout.candleWidth/this.candleWidth,B=L.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,D.chart),R=C.pixelFromTick(this.p0[0],D.chart),H=this.pixelFromValue(D,this.p0[0],this.p0[1],L),this.lowX=C.tickFromPixel(Math.floor(I*O*this.lowX)+R,D.chart),this.hiX=C.tickFromPixel(Math.ceil(I*O*this.hiX)+R,D.chart),L.flipped?(this.lowY=this.valueFromPixel(H-Math.floor(B*this.lowY),D,L),this.hiY=this.valueFromPixel(H-Math.ceil(B*this.hiY),D,L)):(this.lowY=this.valueFromPixel(Math.floor(B*this.lowY)+H,D,L),this.hiY=this.valueFromPixel(Math.ceil(B*this.hiY)+H,D,L)))}},e.Drawing.freeform.prototype.serialize=function(){return t.S0g(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(+"4")),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes,fld:this.field}},e.Drawing.freeform.prototype.reconstruct=function(C,D){this.stx=C,this.color=D.col,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.candleWidth=D.cw,this.multiplier=D.mlt,this.d0=D.d0,this.tzo0=D.tzo0,this.v0=D.v0,this.interval=D.inter,this.periodicity=D.pd,this.nodes=D.nodes,this.field=D.fld,this.adjust()},e.Drawing.callout=function(){this.name="callout",this.arr=[],t.c5Q(),this.w=0,this.h=0,this.padding=+"5",this.text="",this.ta=null,this.border=!1,t.G0i(6),this.fontSize=t.K73("12",0),this.font={},this.stemEntry="",this.defaultWidth=35},e.inheritsFrom(e.Drawing.callout,e.Drawing.annotation),e.Drawing.callout.prototype.configs=[A,"fillColor","lineWidth",S,"font"],e.Drawing.callout.prototype.copyConfig=function(C){e.Drawing.copyConfig(this,C),this.borderColor=this.color},e.Drawing.callout.prototype.move=function(C,D,F){!this.penDown||(this.copyConfig(),this.p0=[D,F],this.render(C))},e.Drawing.callout.prototype.onChange=function(C){var D,F,M;D=this.stx.panels[this.panelName],D&&(F=C.target,this.w=F.clientWidth,this.h=F.clientHeight,M=this.context||this.stx.chart.tempCanvas.context,e.clearCanvas(M.canvas,this.stx),this.render(M),this.edit(M))},e.Drawing.callout.prototype.repositionTextArea=function(C){var D;t.G0i(9);var F=t.B1g(1,3,0);t.S0g(),D=this.defaultWidth*F+this.whitespace+this.padding,D=Math.max(this.w,D),C.style.left=e.stripPX(C.style.left)-(isNaN(D)?this.defaultWidth*+"2":D/+"2")+"px",this.ta=C},e.Drawing.callout.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct;if(D="t",D+="o",D+="p",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(this.context=C,L=F.pixelFromTick(this.p0[0],M.chart),O=this.pixelFromValue(M,this.p0[+"0"],this.p0[1],I),!isNaN(O))){C.font=this.fontString,C.textBaseline=D,B=L,R=O,t.B40(6);var G=t.B1g(11,9);H=this.w/G,t.B40(11);var Y=t.B1g(2,3,12);if(W=this.h/Y,this.penDown){t.B40(40);var it=t.B1g(3,17,4,8,4);H=this.defaultWidth+this.whitespace/+"2"+this.padding/it,W=this.fontSize+this.fontModifier}if(X=this.lineWidth,X||(X=1.1),Z=this.getLineColor(),j=this.getLineColor(this.borderColor),V=Math.min(Math.min(H,W)/2,8),this.stem&&(this.stem.t?(Q=F.pixelFromTick(this.stem.t),et=this.pixelFromValue(M,this.stem.t,this.stem.v,I)):this.stem.x&&(Q=B,et=R,B+=this.stem.x,R+=this.stem.y),K="",Q>=B+H?(t.G0i(3),t.K73(B,H),K="r"):Q>B-H&&Q<B+H?K="c":Q<=B-H&&(t.B40(6),t.B1g(B,H),K="l"),et>=R+W?(t.G0i(3),t.B1g(R,W),K+="b"):et>R-W&&et<R+W?K+="m":et<=R-W&&(t.G0i(6),t.K73(R,W),K+="t"),this.stemEntry=K,K!="cm"&&(Q=Math.round(Q),et=Math.round(et))),this.highlighted?F.canvasColor("stx_annotation_highlight_bg",C):this.fillColor?(C.fillStyle=this.fillColor,C.globalAlpha=+"0.4"):this.stem&&(C.fillStyle=F.containerColor),C.strokeStyle=j,C.setLineDash&&(C.setLineDash(e.borderPatternToArray(X,this.pattern)),C.lineDashOffset=0),j&&(tt="c",tt+="b",J="r",J+="t",C.beginPath(),C.lineWidth=X,t.G0i(9),C.moveTo(t.B1g(V,H,B),t.K73(R,W,t.G0i(6))),this.stemEntry!=J?(t.B40(3),C.quadraticCurveTo(t.K73(B,H),t.B1g(R,W,t.B40(6)),t.B1g(B,H,t.G0i(3)),t.K73(W,V,R,t.B40(5)))):(C.lineTo(Q,et),t.B40(3),C.lineTo(t.K73(B,H),t.B1g(W,V,R,t.B40(5)))),t.G0i(3),C.lineTo(t.B1g(B,H),t.B1g(V,R,2,t.G0i(41))),this.stemEntry=="rm"&&C.lineTo(Q,et),t.G0i(3),C.lineTo(t.B1g(B,H),t.K73(R,2,V,t.B40(42))),t.B40(3),C.lineTo(t.B1g(B,H),t.B1g(V,W,R,t.G0i(9))),this.stemEntry!="rb"?(t.G0i(3),C.quadraticCurveTo(t.B1g(B,H),t.K73(R,W,t.B40(3)),t.B1g(V,H,B,t.B40(9)),t.B1g(R,W,t.B40(3)))):(C.lineTo(Q,et),t.G0i(9),C.lineTo(t.B1g(V,H,B),t.B1g(R,W,t.B40(3)))),t.B40(42),C.lineTo(t.B1g(B,2,V),t.K73(R,W,t.G0i(3))),this.stemEntry==tt&&C.lineTo(Q,et),t.B40(41),C.lineTo(t.K73(V,B,2),t.K73(R,W,t.B40(3))),t.G0i(5),C.lineTo(t.B1g(H,V,B),t.K73(R,W,t.G0i(3))),this.stemEntry!="lb"?(t.B40(6),C.quadraticCurveTo(t.K73(B,H),t.K73(R,W,t.G0i(3)),t.K73(B,H,t.G0i(6)),t.K73(V,W,R,t.B40(9)))):(C.lineTo(Q,et),t.G0i(6),C.lineTo(t.K73(B,H),t.K73(V,W,R,t.B40(9)))),t.B40(6),C.lineTo(t.K73(B,H),t.K73(V,"2",R,t.G0i(43))),this.stemEntry=="lm"&&C.lineTo(Q,et),t.G0i(6),C.lineTo(t.K73(B,H),t.B1g(V,R,2,t.B40(41))),t.B40(6),C.lineTo(t.K73(B,H),t.K73(W,V,R,t.B40(5))),this.stemEntry!="lt"?(t.B40(6),C.quadraticCurveTo(t.K73(B,H),t.B1g(R,W,t.B40(6)),t.B1g(H,V,B,t.G0i(5)),t.B1g(R,W,t.B40(6)))):(C.lineTo(Q,et),t.G0i(5),C.lineTo(t.B1g(H,V,B),t.B1g(R,W,t.B40(6)))),t.B40(41),C.lineTo(t.B1g(V,B,2),t.B1g(R,W,t.B40(6))),this.stemEntry=="ct"&&C.lineTo(Q,et),t.G0i(42),C.lineTo(t.B1g(B,2,V),t.K73(R,W,t.G0i(6))),t.G0i(9),C.lineTo(t.K73(V,H,B),t.K73(R,W,t.G0i(6))),C.fill(),t.G0i(35),C.globalAlpha=t.K73("1",0),this.pattern!="none"&&C.stroke()),this.highlighted?(at="stx_annota",at+="tion_high",at+="light",F.canvasColor(at,C)):C.fillStyle=Z,R+=this.padding,!this.ta)for(var rt=0;rt<this.arr.length;rt++)C.fillText(this.arr[rt],B-H+this.padding,R-W),R+=this.fontSize;C.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(ct=this.highlighted=="p0",this.littleCircle(C,Q,et,ct))}},e.Drawing.callout.prototype.click=function(C,D,F){var M;if(!(this.stx.overXAxis||this.stx.overYAxis))return M=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,D,F,M.chart),this.penDown?(this.adjust(),this.edit(C),this.penDown=!1,!{}):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),![])},e.Drawing.callout.prototype.reposition=function(C,D,F,M){var I,L,O,B,R,H,W;if(!!D){if(t.S0g(),I=this.stx.panels[this.panelName],L=D.tick-F,O=D.value-M,D.stem){B="d",B+="r",B+="a",B+="g",D.action==B?this.stem={d:this.stx.dateFromTick(F,I.chart,!0),v:M}:D.action=="move"&&(this.setPoint(0,D.p0[0]-L,D.p0[1]-O,I.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(D.stem.d,I.chart)-L),v:D.stem.v-O}),R=-1988163919,H=1542499008,W=2;for(var X=1;t.h3u(X.toString(),X.toString().length,"20894"<<64)!==R;X++)this.adjust(),W+=2;t.J3W(W.toString(),W.toString().length,89110)!==H&&this.adjust()}else this.setPoint(0,D.p0[0]-L,D.p0[1]-O,I.chart);this.render(C)}},e.Drawing.callout.prototype.lineIntersection=function(C,D,F,M){var I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt;if(I="str",I+="ing",L=this.stem,O=this.p0,B=this.stx,R=B.panels[this.panelName],!O||!L||!R)return!1;if(H=L.t||B.tickFromDate(L.d,R.chart),W={x0:O[0],x1:H,y0:O[1],y1:L.v},X=this.boxToPixels(B,this.panelName,W,B.getYAxisByField(R,this.field)),Z=X.x0,j=X.y0,Q=X.x1,et=X.y1,typeof this.stemEntry==I){V=542399874,K=108069001,tt=2;for(var J=1;t.J3W(J.toString(),J.toString().length,80474)!==V;J++){if(this.stemEntry.indexOf("l")>=0)Z/=this.w-0;else if(this.stemEntry.indexOf("r")<=-7){t.B40(5);var at=t.B1g(3,5,2);Z-=this.w%at}tt+=2}if(t.J3W(tt.toString(),tt.toString().length,47365)!==K){if(this.stemEntry.indexOf("r")<=-2){t.B40(44);var ct=t.B1g(20,328,13,7,16);Z*=this.w+ct}else if(this.stemEntry.indexOf("l")<-("0"<<0)){t.G0i(45);var G=t.K73(9,14,12,3146,224);Z+=this.w+("6">>G)}}if(this.stemEntry.indexOf("l")>-+"1"){t.G0i(6);var Y=t.K73(21,19);Z-=this.w/Y}else if(this.stemEntry.indexOf("r")>-1){t.G0i(46);var it=t.K73(9,11);Z+=this.w/it}if(this.stemEntry.indexOf("t")>-1){t.B40(5);var rt=t.B1g(14,16,0);j-=this.h/rt}else if(this.stemEntry.indexOf("b")>-1){t.B40(47);var lt=t.K73(20,20,0,3);j+=this.h/lt}}return e.boxIntersects(F.cx0,F.cy0,F.cx1,F.cy1,Z,j,Q,et,M)},e.Drawing.callout.prototype.intersected=function(C,D,F){var M,I,L,O,B,R,H,W,X,Z,j,Q;if(M="s",M+="e",M+="gment",I=this.stx,L=I.panels[this.panelName],t.S0g(),!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,F))return O="d",O+="r",O+="a",O+="g",this.highlighted="p0",{action:O,stem:!0};t.B40(48);var et=t.B1g(16,5,17,4);B=I.pixelFromTick(this.p0[0],L.chart)-this.w/et,R=I.getYAxisByField(L,this.field),t.G0i(49);var V=t.K73(89,3,15,3,6);t.B40(9);var K=t.K73(13,15,0);return H=this.pixelFromValue(L,this.p0[0],this.p0[V],R)-this.h/K,W=B+this.w,X=H+this.h,this.stem&&this.stem.x&&(B+=this.stem.x,W+=this.stem.x,H+=this.stem.y,X+=this.stem.y),Z=I.pixelFromTick(C,L.chart),j=I.pixelFromValueAdjusted(L,C,D),Z+F.r>=B&&Z-F.r<=W&&j+F.r>=H&&j-F.r<=X?(this.highlighted=!!{},{p0:e.clone(this.p0),tick:C,value:this.valueOnDrawingAxis(C,D)}):(Q=this.lineIntersection(C,D,F,M),Q?(this.highlighted=!0,{action:"move",stem:e.clone(this.stem),p0:e.clone(this.p0),tick:C,value:this.valueOnDrawingAxis(C,D)}):null)},e.Drawing.fibonacci=function(){t.S0g(),this.name="fibonacci",this.configurator="fibonacci"},e.inheritsFrom(e.Drawing.fibonacci,e.Drawing.BaseTwoPoint),e.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:k,printValues:"pv",timezone:"tz",display:"d"},t.G0i(18),e.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,+"0.5",t.K73("0.618",1),t.K73(1,"1",t.G0i(4)),1.382,t.B1g("1.618",0,t.B40(6))],e.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth",y,"parameters"],e.Drawing.fibonacci.prototype.initializeSettings=function(C){var D,F,M,I,L;if(D=this.recommendedLevels,D&&!C.currentVectorParameters.fibonacci.fibsAlreadySet){F=-566002527,M=+"1322305066",I=2;for(var O=+"1";t.h3u(O.toString(),O.toString().length,16878)!==F;O++)L=C.currentVectorParameters.fibonacci.fibs,I+=2;t.J3W(I.toString(),I.toString().length,54355)!==M&&(L=C.currentVectorParameters.fibonacci.fibs);for(var B=0;B<L.length;B++){delete L[B].display;for(var R=0;R<D.length;R++)L[B].level==D[R]&&(L[B].display=!![])}}},e.Drawing.fibonacci.prototype.setOuter=function(){var C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q;if(C=this.stx,D=C.panels[this.panelName],!!D){F=Math.max(this.p0[1],this.p1[1]),M=Math.min(this.p0["1"-0],this.p1[1]),t.B40(6),I=t.K73(F,M),this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)},t.S0g(),L=C.pixelFromTick(this.p0[0],D.chart),O=C.pixelFromTick(this.p1[0],D.chart),B=C.getYAxisByField(D,this.field),R=this.pixelFromValue(D,this.p0[0],this.p0[+"1"],B),H=this.pixelFromValue(D,this.p1[0],this.p1[1],B),W=0,X=1;for(var et=0;et<this.parameters.fibs.length;et++)Z=this.parameters.fibs[et],!(Z.level>=W&&Z.level<=X||!Z.display)&&(j=this.pixelFromValue(D,this.p0[0],H<R?F-I*Z.level:M+I*Z.level,B),Q=e.xIntersection({x0:L,x1:O,y0:R,y1:H},j),Z.level<W?(W=Z.level,this.outer.p1[1]=this.valueFromPixel(j,D,B),this.outer.p1[+"0"]=C.tickFromPixel(Q,D.chart)):Z.level>X&&(X=Z.level,this.outer.p0[+"1"]=this.valueFromPixel(j,D,B),this.outer.p0[0]=C.tickFromPixel(Q,D.chart)))}},e.Drawing.fibonacci.prototype.click=function(C,D,F){var M;if(M=this.stx.panels[this.panelName],!!M)return this.copyConfig(),this.penDown?this.accidentalClick(D,F)?!![]:(t.G0i(35),this.setPoint(t.B1g("1",0),D,F,M.chart),this.setOuter(),t.c5Q(),this.parameters=e.clone(this.parameters),this.penDown=!1,!0):(this.setPoint(0,D,F,M.chart),this.penDown=!!{},!1)},e.Drawing.fibonacci.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt,Ct;if(D="mid",D+="dle",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(I=I||M.yAxis,!!this.p1)){L=Math.max(this.p0[+"1"],this.p1[1]),O=Math.min(this.p0[1],this.p1[1]),B=I.flipped?O-L:L-O,R=F.pixelFromTick(this.p0[0],M.chart),H=F.pixelFromTick(this.p1[0],M.chart),W=this.pixelFromValue(M,this.p0[0],this.p0[1],I),X=this.pixelFromValue(M,this.p1[0],this.p1[1],I),Z=Math.min(X,W),j=Math.max(X,W),t.B40(6),Q=t.B1g(j,Z),t.G0i(50),et=t.B1g(W,X,0,R,H),V={color:"auto",parameters:{pattern:"solid",opacity:+"0.25",lineWidth:1}},this.parameters.trend||(this.parameters.trend=V),K=this.getLineColor(this.parameters.trend.color),C.textBaseline=D,F.canvasFont("stx_yaxis",C),t.B40(51);var Rt=t.B1g(1,7,1,3,5);tt=C.measureText("161.8%").width+Rt,J=Number.MAX_VALUE,at=Number.MAX_VALUE,t.B40(17);var Ht=t.K73(18,14,0,125,2);ct=Number.MAX_VALUE*Ht,t.B40(9);var jt=t.B1g(10,9,0);G=Number.MAX_VALUE*jt,Y=this.getLineColor(),this.rays=[];for(var $t=0;$t<this.parameters.fibs.length;$t++)if(it="un",it+="d",it+="efined",C.textAlign="left",C.fillStyle=Y,rt=this.parameters.fibs[$t],!!rt.display){if(lt=this.pixelFromValue(M,this.p0[0],X<W?L-B*rt.level:O+B*rt.level,I),dt=e.xIntersection({x0:R,x1:H,y0:W,y1:X},lt),ht=this.parameters.extendLeft?0:dt,pt=M.left+M.width,this.parameters.printLevels){t.G0i(3);var Bt=t.B1g(984,16);t.B40(52);var zt=t.B1g(18,190,2,20,136790);ut=Math.round(rt.level*Bt)/zt+"%",pt-=tt,this.parameters.printValues&&(C.fillStyle=Y,F.canvasFont("stx_yaxis",C)),pt<ht&&(C.textAlign="right"),C.fillText(ut,pt,lt),pt<ht?(t.G0i(27),pt+=t.B1g(64,"5")):pt-=5}this.parameters.printValues&&dt<M.width&&(mt=this.valueFromPixel(lt,M,I),I.priceFormatter?mt=I.priceFormatter(F,M,mt):mt=F.formatYAxisPrice(mt,M,null,I),C==F.chart.context&&F.endClip(),F.createYAxisLabel(M,mt,lt,this.getLineColor(null,!0),null,C,I),C==F.chart.context&&F.startClip(M.name)),gt=rt.color,(gt=="auto"||e.isTransparent(gt))&&(gt=this.getLineColor()),bt=rt.color,(bt=="auto"||e.isTransparent(bt))&&(bt=this.fillColor),(bt=="auto"||e.isTransparent(bt))&&(bt=F.defaultColor),C.fillStyle=bt,yt=e.clone(rt.parameters),this.highlighted&&(yt.opacity=1),F.plotLine(ht,pt,lt,lt,gt,"segment",C,M,yt),this.rays.push([[ht,lt],[pt,lt]]),C.globalAlpha=.05,C.beginPath(),C.moveTo(pt,lt),C.lineTo(ht,lt),ht?C.lineTo(H,X):C.lineTo(ht,X),C.lineTo(pt,X),typeof bt!=it&&C.fill(),C.globalAlpha=1,lt<at&&(J=dt,at=lt),lt>G&&(ct=dt,G=lt)}for(var Pt=0;Pt<=1;Pt++)qt=et?j-Q*Pt:Z+Q*Pt,qt=Math.round(qt),qt<at&&(J=e.xIntersection({x0:R,x1:H,y0:W,y1:X},qt),at=qt),qt>G&&(ct=e.xIntersection({x0:R,x1:H,y0:W,y1:X},qt),G=qt);St=e.clone(this.parameters.trend.parameters),this.highlighted&&(St.opacity=1),F.plotLine(J,ct,at,G,K,"segment",C,M,St),this.highlighted&&(Tt="p",Tt+="0",wt=this.highlighted==Tt?!!{}:![],Ct=this.highlighted=="p1",this.littleCircle(C,R,W,wt),this.littleCircle(C,H,X,Ct))}},e.Drawing.fibonacci.prototype.reposition=function(C,D,F,M){!D||(e.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},e.Drawing.fibonacci.prototype.intersected=function(C,D,F){var M,I,L,O,B,R,H;if(t.c5Q(),M=this.p0,I=this.p1,!M||!I)return null;L={0:M,1:I};for(var W in L)if(this.pointIntersection(L[W][0],L[W][1],F))return O="dra",O+="g",t.G0i(3),this.highlighted=t.B1g("p",W),{action:O,point:"p"+W};if(B=this.outer,R=this.rays,H=B&&this.lineIntersection(C,D,F,"segment",B.p0,B.p1),!H){for(var X=0;X<R.length;X++)if(this.lineIntersection(C,D,F,"ray",R[X][0],R[X][1],!![])){H=!0;break}}return H?(this.highlighted=!0,{action:"move",p0:e.clone(M),p1:e.clone(I),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},e.Drawing.fibonacci.prototype.reconstruct=function(C,D){D=e.replaceFields(D,e.reverseObject(e.Drawing.fibonacci.mapping)),this.stx=C,this.parameters=D.parameters,this.parameters||(this.parameters=e.clone(this.stx.currentVectorParameters.fibonacci)),this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.d0=D.d0,this.d1=D.d1,this.d2=D.d2,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.tzo2=D.tzo2,t.S0g(),this.v0=D.v0,this.v1=D.v1,this.v2=D.v2,this.field=D.fld,this.adjust()},e.Drawing.fibonacci.prototype.adjust=function(){var C;C=this.stx.panels[this.panelName],t.c5Q(),C&&(this.setPoint(0,this.d0,this.v0,C.chart),this.setPoint(1,this.d1,this.v1,C.chart),this.setOuter())},e.Drawing.fibonacci.prototype.serialize=function(){t.c5Q();var C;return C={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field},e.replaceFields(C,e.Drawing.fibonacci.mapping)},e.Drawing.retracement=function(){t.S0g(),this.name="retracement"},e.inheritsFrom(e.Drawing.retracement,e.Drawing.fibonacci),e.Drawing.fibprojection=function(){this.name="fibprojection",this.dragToDraw=!1,t.c5Q(),this.p2=null},e.inheritsFrom(e.Drawing.fibprojection,e.Drawing.fibonacci),t.G0i(6),e.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,+"1",1.272,t.B1g("1.618",0),2.618,4.236],e.Drawing.fibprojection.prototype.click=function(C,D,F){var M,I;if(M=this.stx,I=M.panels[this.panelName],!!I)return this.copyConfig(),this.penDown?this.accidentalClick(D,F)?(M.undo(),!0):this.p2!==null?(this.setPoint(2,this.p2[0],this.p2[1],I.chart),this.parameters=e.clone(this.parameters),!![]):(this.setPoint(+"1",D,F,I.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,D,F,I.chart),this.penDown=!!{},![])},e.Drawing.fibprojection.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt;if(D="stx_yax",D+="is",F="midd",F+="le",M=this.stx,I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field),!(!I||this.field&&!L)&&(L=L||I.yAxis,!!this.p1)){t.G0i(10);var qt=t.K73(13,2,6,18);t.G0i(9);var St=t.K73(18,19,0);O=this.p1[qt]-this.p0[St],B=M.pixelFromTick(this.p0[0],I.chart),R=M.pixelFromTick(this.p1[0],I.chart),H=this.pixelFromValue(I,this.p0[0],this.p0[1],L),W=this.pixelFromValue(I,this.p1[0],this.p1[1],L),X=null,Z=null,this.p2&&(X=M.pixelFromTick(this.p2[0],I.chart),Z=this.pixelFromValue(I,this.p2["0"<<64],this.p2[+"1"],L)),j={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=j),Q=this.getLineColor(this.parameters.trend.color),C.textBaseline=F,M.canvasFont(D,C),t.B40(9);var Tt=t.K73(170,20,160);if(et=C.measureText("161.8%").width+Tt,V=this.getLineColor(),this.p2){this.rays=[];for(var wt=0;wt<this.parameters.fibs.length;wt++)if(K="unde",K+="f",K+="in",K+="ed",C.textAlign="left",C.fillStyle=V,tt=this.parameters.fibs[wt],!!tt.display){if(J=this.pixelFromValue(I,this.p2["0"|0],this.p2["1"<<32]+O*tt.level,L),at=e.xIntersection({x0:B,x1:R,y0:H,y1:W},J),ct=this.parameters.extendLeft?0:B,G=I.left+I.width,this.parameters.printLevels){t.B40(53);var Ct=t.B1g(1,7,2);t.B40(54);var Rt=t.K73(5,57,4,3);t.B40(53),t.K73(3583,12,5),t.G0i(6),t.B1g(1057,12),t.B40(55);var Ht=t.B1g(20,7,3,8034,48366);t.G0i(56),t.K73(19,10,8),t.B40(36);var jt=t.B1g(2,15138,1684,10);Y=Math.round(tt.level*+"1000")/Ct+("4697"<<Rt<=66.6?Ht<jt?!1:293.95:"%"),G-=et,this.parameters.printValues&&(C.fillStyle=V,M.canvasFont("stx_yaxis",C)),G<ct&&(C.textAlign="right"),C.fillText(Y,G,J),G<ct?G+=5:G-=5}this.parameters.printValues&&at<I.width&&(it=this.valueFromPixel(J,I,L),L.priceFormatter?it=L.priceFormatter(M,I,it):it=M.formatYAxisPrice(it,I,null,L),C==M.chart.context&&M.endClip(),M.createYAxisLabel(I,it,J,this.getLineColor(null,!![]),null,C,L),C==M.chart.context&&M.startClip(I.name)),rt=tt.color,(rt=="auto"||e.isTransparent(rt))&&(rt=this.getLineColor()),lt=tt.color,(lt=="auto"||e.isTransparent(lt))&&(lt=this.fillColor),(lt=="auto"||e.isTransparent(lt))&&(lt=M.defaultColor),C.fillStyle=lt,dt=e.clone(tt.parameters),this.highlighted&&(dt.opacity=1),M.plotLine(ct,G,J,J,rt,"segment",C,I,dt),this.rays.push([[ct,J],[G,J]]),C.globalAlpha=+"0.05",C.beginPath(),C.moveTo(G,J),C.lineTo(ct,J),ct?C.lineTo(B,Z):C.lineTo(ct,Z),C.lineTo(G,Z),typeof lt!=K&&C.fill(),C.globalAlpha=1}}ht=-337760611,t.G0i(6),pt=-t.B1g("1164884121",0),ut=2;for(var $t=1;t.h3u($t.toString(),$t.toString().length,77852)!==ht;$t++)mt=e.clone(this.parameters.trend.parameters),this.highlighted&&(t.G0i(27),mt.opacity=t.B1g(96,"1")),M.plotLine(B,R,H,W,Q,"segment",C,I,mt),ut+=2;t.h3u(ut.toString(),ut.toString().length,5158)!==pt&&(mt=e.clone(this.parameters.trend.parameters),this.highlighted&&(mt.opacity=3),M.plotLine(B,R,H,W,Q,"",C,I,mt)),this.p2&&M.plotLine(R,X,W,Z,Q,"segment",C,I,mt),this.highlighted&&(gt=this.highlighted=="p0",bt=this.highlighted=="p1",yt=this.highlighted=="p2",this.littleCircle(C,B,H,gt),this.littleCircle(C,R,W,bt),this.littleCircle(C,X,Z,yt))}},e.Drawing.fibprojection.prototype.move=function(C,D,F){!this.penDown||(this.copyConfig(),this.p2===null?this.p1=[D,F]:this.p2=[D,F],t.S0g(),this.render(C))},e.Drawing.fibprojection.prototype.reposition=function(C,D,F,M){var I,L,O;!D||(I=this.stx.panels[this.panelName],L=D.tick-F,O=D.value-M,t.c5Q(),D.action=="move"?(this.setPoint(0,D.p0[0]-L,D.p0[1]-O,I.chart),this.setPoint(1,D.p1[0]-L,D.p1[1]-O,I.chart),this.setPoint(2,D.p2[0]-L,D.p2[1]-O,I.chart),this.render(C)):D.action=="drag"&&(this[D.point]=[F,M],this.setPoint(0,this.p0[0],this.p0[1],I.chart),this.setPoint(1,this.p1[0],this.p1[+"1"],I.chart),t.G0i(4),this.setPoint(t.K73(2,"2"),this.p2[0],this.p2[1],I.chart),this.render(C)))},e.Drawing.fibprojection.prototype.intersected=function(C,D,F){var M,I,L,O,B,R,H,W,X;if(M="segm",M+="ent",I=this.p0,L=this.p1,O=this.p2,!I||!L||!O)return null;B={0:I,1:L,2:O},t.S0g();for(var Z in B)if(this.pointIntersection(B[Z][0],B[Z][1],F))return R="d",R+="r",R+="a",R+="g",t.G0i(3),this.highlighted=t.K73("p",Z),{action:R,point:"p"+Z};if(H=this.rays,W=this.lineIntersection(C,D,F,M,I,L)||this.lineIntersection(C,D,F,"segment",L,O),!W){for(var j=0;j<H.length;j++)if(this.lineIntersection(C,D,F,"ray",H[j][0],H[j][1],!![])){W=!!{};break}}return W?(X="mo",X+="ve",this.highlighted=!0,{action:X,p0:e.clone(I),p1:e.clone(L),p2:e.clone(O),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},e.Drawing.fibprojection.prototype.adjust=function(){var C;C=this.stx.panels[this.panelName],C&&(this.setPoint(+"0",this.d0,this.v0,C.chart),this.setPoint(1,this.d1,this.v1,C.chart),this.setPoint(2,this.d2,this.v2,C.chart))},e.Drawing.fibarc=function(){t.c5Q(),this.name="fibarc"},e.inheritsFrom(e.Drawing.fibarc,e.Drawing.fibonacci),e.Drawing.fibarc.prototype.recommendedLevels=[+"0.382",.5,.618,1],e.Drawing.fibarc.prototype.setOuter=function(){var C,D,F,M,I,L,O,B,R;C=this.stx,D=C.panels[this.panelName],D&&(this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)},F=C.getYAxisByField(D,this.field),M=this.pixelFromValue(D,this.p0["0"<<32],this.p0[1],F),I=this.pixelFromValue(D,this.p1[0],this.p1[1],F),L=C.pixelFromTick(this.p0[0],D.chart),O=C.pixelFromTick(this.p1[0],D.chart),t.B40(32),B=t.B1g(2,I,M),R=e.xIntersection({x0:L,x1:O,y0:M,y1:I},B),this.outer.p0[1]=this.valueFromPixel(B,D,F),t.S0g(),this.outer.p0[0]=C.tickFromPixel(R,D.chart))},e.Drawing.fibarc.prototype.intersected=function(C,D,F){var M,I,L,O,B,R,H,W,X,Z,j,Q,et,V;if(M="m",M+="o",M+="ve",I=this.stx,L=I.panels[this.panelName],!!L){if(O=this.p0,B=this.p1,R=this.outer,!O||!B)return null;H={0:O,1:B};for(var K in H)if(this.pointIntersection(H[K][0],H[K][1],F))return t.B40(3),this.highlighted=t.B1g("p",K),{action:"drag",point:"p"+K};return W=this.valueOnDrawingAxis(C,D),this.lineIntersection(C,W,F,"segment",R.p0,R.p1)?(this.highlighted=!0,{action:"move",p0:e.clone(O),p1:e.clone(B),tick:C,value:W}):(X=I.getYAxisByField(L,this.field),Z={x0:O[0],x1:B[0],y0:O["1"<<64],y1:B[1]},j=this.boxToPixels(I,this.panelName,Z,X),Q={x:Math.abs(Math.sqrt(2)*(j.x1-j.x0)),y:Math.abs(Math.sqrt(2)*(j.y1-j.y0))},et=I.pixelFromTick(C,L.chart),V=I.pixelFromValueAdjusted(L,C,D),et+F.r<j.x1-Q.x||et-F.r>j.x1+Q.x||V+F.r<j.y1-Q.y||V-F.r>j.y1+Q.y||j.y0<j.y1&&V-F.r>j.y1||j.y0>j.y1&&V+F.r<j.y1?null:(this.highlighted=!0,{action:M,p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:W}))}},e.Drawing.fibarc.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht;if(D="s",D+="e",D+="gm",D+="ent",F="l",F+="e",F+="ft",M=this.stx,I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field),!(!I||this.field&&!L)&&(L=L||I.yAxis,!!this.p1)){O=M.pixelFromTick(this.p0[+"0"],I.chart),B=M.pixelFromTick(this.p1[0],I.chart),R=this.pixelFromValue(I,this.p0[0],this.p0[1],L),H=this.pixelFromValue(I,this.p1[0],this.p1[1],L),t.G0i(57),W=t.K73(H,R),t.G0i(58),X=Math.abs(t.K73(H,R,O,B)),Z=this.getLineColor(this.parameters.trend.color),C.textBaseline="middle",M.canvasFont("stx_yaxis",C),j=this.getLineColor();for(var pt=+"0";pt<this.parameters.fibs.length;pt++)if(Q="a",Q+="uto",C.fillStyle=j,et=this.parameters.fibs[pt],!(et.level<+"0"||!et.display)){t.B40(59);var ut=t.K73(20,8,18,179,0);t.B40(11);var mt=t.B1g(19,1,20);t.B40(3);var gt=t.K73(0,2);V=Math.abs(this.p1[ut]-this.p0[mt])*Math.sqrt(gt)*et.level,t.B40(60);var bt=t.B1g(12,0,10,4,4);t.G0i(46);var yt=t.K73(20,19);t.B40(46);var qt=t.K73(6,7);t.B40(5);var St=t.B1g(3,2,0);if(K=this.p1[bt]+V*(W?yt:qt)*(L.flipped?St:+"1"),tt=this.pixelFromValue(I,this.p0[+"0"],K,L),J=e.xIntersection({x0:O,x1:B,y0:R,y1:H},tt),this.parameters.printLevels){at="c",at+="e",at+="nt",at+="er",C.textAlign=at,t.B40(61);var Tt=t.B1g(5,16,1024,2,38);t.G0i(62);var wt=t.K73(14,1,214,16);t.B40(63);var Ct=t.K73(8,885,890,3532,5);t.G0i(9);var Rt=t.K73(89297,17,96720);ct=Math.round(et.level*("1000">>Tt))/wt+(Ct>Rt?"u":"%"),this.parameters.printValues&&(C.fillStyle=j,M.canvasFont("stx_yaxis",C)),C.fillText(ct,B,Math.round(tt-5))}C.textAlign="left",this.parameters.printValues&&J<I.width&&(G=K,L.priceFormatter?G=L.priceFormatter(M,I,G):G=M.formatYAxisPrice(G,I,null,L),C==M.chart.context&&M.endClip(),M.createYAxisLabel(I,G,tt,this.getLineColor(null,!![]),null,C,L),C==M.chart.context&&M.startClip(I.name)),Y=et.color,(Y==Q||e.isTransparent(Y))&&(Y=this.getLineColor()),C.strokeStyle=Y,it=et.color,(it=="auto"||e.isTransparent(it))&&(it=this.fillColor),(it=="auto"||e.isTransparent(it))&&(it=M.defaultColor),C.fillStyle=it,C.globalAlpha=this.highlighted?1:et.parameters.opacity,C.lineWidth=et.parameters.lineWidth,C.setLineDash&&(C.setLineDash(e.borderPatternToArray(C.lineWidth,et.parameters.pattern)),C.lineDashOffset=0),C.save(),C.beginPath(),t.G0i(12),C.scale(t.K73(X,1),1),t.B40(18),C.arc(t.K73(B,X),H,Math.abs(tt-H),0,Math.PI,!W),this.pattern!="none"&&C.stroke(),C.globalAlpha=+"0.05",C.fill(),C.restore(),C.setLineDash&&C.setLineDash([]),C.globalAlpha=1}C.textAlign=F,rt=e.clone(this.parameters.trend.parameters),this.highlighted&&(rt.opacity=+"1"),t.B40(32),M.plotLine(B,t.B1g(2,B,O),H,t.B1g(2,H,R),Z,D,C,I,rt),this.highlighted&&(lt="p",lt+="1",dt=this.highlighted=="p0"?!![]:![],ht=this.highlighted==lt?!0:!{},this.littleCircle(C,O,R,dt),this.littleCircle(C,B,H,ht))}},e.Drawing.fibfan=function(){this.name="fibfan"},e.inheritsFrom(e.Drawing.fibfan,e.Drawing.fibonacci),e.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],e.Drawing.fibfan.prototype.setOuter=function(){},e.Drawing.fibfan.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut;if(D="mi",D+="dd",D+="l",t.c5Q(),D+="e",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(I=I||M.yAxis,!!this.p1)){L=F.pixelFromTick(this.p0[+"0"],M.chart),O=F.pixelFromTick(this.p1[0],M.chart),B=this.pixelFromValue(M,this.p0[0],this.p0[1],I),R=this.pixelFromValue(M,this.p1[0],this.p1[1],I),H=Math.min(R,B),W=Math.max(R,B),t.G0i(6),t.B1g(W,H),t.G0i(64),t.K73(O,"0",R,L,B),this.getLineColor(this.parameters.trend.color),C.textBaseline=D,F.canvasFont("stx_yaxis",C),t.B40(5);var mt=t.B1g(18,20,0);X=C.measureText("161.8%").width+("10"|mt),t.G0i(65),t.B1g(17,8,20,6),Z=this.getLineColor(),this.rays=[];for(var gt=0;gt<this.parameters.fibs.length;gt++)if(j="s",j+="egme",j+="nt",Q="a",Q+="u",Q+="to",et="l",et+="e",et+="f",et+="t",C.fillStyle=Z,V=this.parameters.fibs[gt],!!V.display&&(K=this.pixelFromValue(M,this.p0[0],(this.p0[1]-this.p1[1])*V.level+this.p1[1],I),tt=e.xIntersection({x0:O,x1:O,y0:B,y1:R},K),J=M.left,O>L&&(J+=M.width),t.G0i(66),at=t.K73(L,B,tt,J,L,K,B),!(L>J-(this.parameters.printLevels?X+5:0)&&O>L)&&!(L<J+(this.parameters.printLevels?X+5:0)&&O<L))){if(this.parameters.printLevels){t.B40(67);var bt=t.B1g(71,17,1,946);t.G0i(68);var yt=t.B1g(17,4,4,190,802);ct=Math.round(V.level*bt)/yt+"%",O>L?(G="l",G+="eft",J-=X,C.textAlign=G):(Y="r",Y+="i",Y+="gh",Y+="t",J+=X,C.textAlign=Y),this.parameters.printValues&&(it="s",it+="tx_y",it+="a",it+="xis",C.fillStyle=Z,F.canvasFont(it,C)),t.B40(66),at=t.K73(L,B,tt,J,L,K,B),C.fillText(ct,J,at),O>L?J-=5:J+=5}C.textAlign=et,this.parameters.printValues&&tt<M.width&&(rt=this.valueFromPixel(K,M,I),I.priceFormatter?rt=I.priceFormatter(F,M,rt):rt=F.formatYAxisPrice(rt,M,null,I),C==F.chart.context&&F.endClip(),F.createYAxisLabel(M,rt,K,this.getLineColor(null,!![]),null,C,I),C==F.chart.context&&F.startClip(M.name)),lt=V.color,(lt==Q||e.isTransparent(lt))&&(lt=this.getLineColor()),dt=V.color,(dt=="auto"||e.isTransparent(dt))&&(dt=this.fillColor),(dt=="auto"||e.isTransparent(dt))&&(dt=F.defaultColor),C.fillStyle=dt,this.parameters.printLevels&&(t.B40(66),at=t.K73(L,B,tt,J,L,K,B)),ht=e.clone(V.parameters),this.highlighted&&(t.G0i(18),ht.opacity=t.K73("1",1)),F.plotLine(L,J,B,at,lt,j,C,M,ht),this.rays.push([[L,B],[J,at]]),t.G0i(18),C.globalAlpha=t.K73("0.05",1),C.beginPath(),C.moveTo(J,at),C.lineTo(L,B),C.lineTo(J,B),C.fill(),C.globalAlpha=1}this.highlighted&&(pt=this.highlighted=="p0",ut=this.highlighted=="p1"?!!{}:!1,this.littleCircle(C,L,B,pt),this.littleCircle(C,O,R,ut))}},e.Drawing.fibtimezone=function(){this.name="fibtimezone",t.c5Q()},e.inheritsFrom(e.Drawing.fibtimezone,e.Drawing.fibonacci),e.Drawing.fibtimezone.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt;if(D="l",D+="e",D+="f",D+="t",F="a",F+="u",F+="t",F+="o",M="stx",M+="_yaxis",I=this.stx,L=I.panels[this.panelName],O=I.getYAxisByField(L,this.field),!(!L||this.field&&!O)&&(O=O||L.yAxis,!!this.p1)){B=I.pixelFromTick(this.p0[+"0"],L.chart),R=I.pixelFromTick(this.p1[+"0"],L.chart),H=this.pixelFromValue(L,this.p0[0],this.p0[1],O),W=this.pixelFromValue(L,this.p1[0],this.p1[1],O),X=[1,0],Z=this.getLineColor(this.parameters.trend.color),C.textBaseline="middle",I.canvasFont(M,C),j=20,t.G0i(69);var ht=t.B1g(103,10,8,11);Q=this.p1["0">>0]-this.p0["0"*ht],et=this.getLineColor(),C.textAlign="center",V=B,K=O.top,tt=O.bottom,J=0,at=this.parameters.timezone.color,(at=="auto"||e.isTransparent(at))&&(at=this.getLineColor()),ct=this.parameters.timezone.color,(ct==F||e.isTransparent(ct))&&(ct=this.fillColor),(ct=="auto"||e.isTransparent(ct))&&(ct=I.defaultColor),this.parameters.printLevels&&(t.G0i(6),tt-=t.K73(j,7)),G=e.clone(this.parameters.timezone.parameters),this.highlighted&&(G.opacity=1);do{if(Y="seg",Y+="m",Y+="en",Y+="t",V=I.pixelFromTick(this.p0[0]+J*Q,L.chart),B<R&&V>L.left+L.width)break;if(B>R&&V<L.left)break;this.parameters.printLevels&&(C.fillStyle=et,C.fillText(R>B?J:J*-1,V,tt+ +"7")),C.fillStyle=ct,I.plotLine(V,V,0,tt,at,Y,C,L,G),C.globalAlpha=.05,C.beginPath(),C.moveTo(B,K),C.lineTo(V,K),C.lineTo(V,tt),C.lineTo(B,tt),C.fill(),C.globalAlpha=1,t.B40(32);var pt=t.K73(14,167,12);J=X[0]+X[pt],X.unshift(J)}while(Q);C.textAlign=D,I.plotLine(B,R,H,W,Z,"segment",C,L,G),this.highlighted?(it="p",it+="1",rt=this.highlighted=="p0"?!!{}:!{},lt=this.highlighted==it,this.littleCircle(C,B,H,rt),this.littleCircle(C,R,W,lt)):(dt=this.valueFromPixel(L.height/2,L,O),this.setPoint(0,this.p0[0],dt,L.chart),this.setPoint(1,this.p1[0],dt,L.chart))}},e.Drawing.fibtimezone.prototype.intersected=function(C,D,F){var M,I,L,O,B,R;if(M=this.p0,I=this.p1,L=this.stx.panels[this.panelName],t.c5Q(),!M||!I||!L)return null;O={0:M,1:I};for(var H in O)if(this.pointIntersection(O[H][+"0"],O[H][1],F))return B="d",B+="r",B+="ag",t.G0i(3),this.highlighted=t.K73("p",H),{action:B,point:"p"+H};return R=this.lineIntersection(C,D,F,"segment"),R||F.x0<=this.p0[0]&&F.x1>=M[0]?(this.highlighted=!![],{action:"move",p0:e.clone(M),p1:e.clone(I),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},e.Drawing.arrow_v0=function(){var C;C="a",C+="r",C+="r",C+="ow",this.name=C,this.dimension=[11,11],t.B40(27),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",5,10,"L",0,5,"L",t.B1g(0,"3"),5,"L",3,0]]},e.inheritsFrom(e.Drawing.arrow_v0,e.Drawing.shape),e.Drawing.xcross=function(){t.S0g(),this.name="xcross",t.B40(18),this.dimension=[7,t.K73("7",1)],t.G0i(18),this.points=[["M",1,0,"L",3,2,"L",5,t.K73("0",1),"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",3,t.B1g("4",0,t.G0i(35)),"L",1,6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},e.inheritsFrom(e.Drawing.xcross,e.Drawing.shape),e.Drawing.check=function(){var C,D,F;this.name="check",C=1068123475,t.S0g(),D=1497212656,F=2;for(var M="1"^0;t.J3W(M.toString(),M.toString().length,"3479"|21)!==C;M++)this.dimension=[6,6],this.points=[["917490"*1,4,2,"L",1,1,"d",7,5,"L",2,3,"d",3,9,371374,1,+"4","L",9,+"4"]],F+=2;t.J3W(F.toString(),F.toString().length,24141)!==D&&(this.dimension=[8,9],t.B40(35),this.points=[["M",1,5,"L",+"0",6,"L",t.B1g("2",0),8,"L",t.K73("7",64,t.G0i(0)),t.B1g("1",1,t.G0i(18)),"L",6,0,"L",+"2",6,"L",1,+"5"]])},e.inheritsFrom(e.Drawing.check,e.Drawing.shape),e.Drawing.star=function(){this.name="star",t.B40(35),this.dimension=[t.K73("12",0),+"12"],t.B40(35),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",t.B1g("11",0),4,"L",8,7,"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",t.B1g("0",0,t.G0i(35)),t.K73("4",1,t.G0i(18))]]},e.inheritsFrom(e.Drawing.star,e.Drawing.shape),e.Drawing.heart=function(){var C;C="he",C+="art",this.name=C,this.dimension=[23,20],t.G0i(27),t.S0g(),this.points=[["M",t.K73(32,"11"),3,"B",11,2.4,10,0,6,0,"B",0,0,t.K73(64,"0",t.G0i(27)),7.5,0,7.5,"B",0,t.B1g(3,"11",t.B40(4)),t.K73(4,"4",t.B40(4)),15.4,11,19,"B",18,15.4,22,11,22,7.5,"B",22,7.5,+"22",0,16,0,"B",+"13",0,11,2.4,t.K73(3,"11",t.B40(4)),t.K73("3",0,t.B40(35))]]},e.inheritsFrom(e.Drawing.heart,e.Drawing.shape),e.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],t.B40(18),this.points=[["M",0,0,"L",2,2,"L",0,4,"L",t.B1g("0",1),0],["M",6,0,"L",+"4",2,"L",6,4,"L",6,0]]},e.inheritsFrom(e.Drawing.focusarrow,e.Drawing.shape),e.Drawing.crossline=function(){t.c5Q(),this.name="crossline"},e.inheritsFrom(e.Drawing.crossline,e.Drawing.horizontal),e.extend(e.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(C,D){return t.S0g(),!1},adjust:function(){var C;t.c5Q(),C=this.stx.panels[this.panelName],C&&(this.setPoint(0,this.d0,this.v0,C.chart),this.p1=e.clone(this.p0))},intersected:function(C,D,F){var M,I,L,O,B;M="m",M+="o",M+="v",t.c5Q(),M+="e",I=-629330954,t.G0i(18),L=t.K73("220409840",1),O=2;for(var R=+"1";t.J3W(R.toString(),R.toString().length,18357)!==I;R++){if(~this.p0&&+this.p1)return 1;t.B40(27),this.p1[t.B1g(32,"5")]*=6,O+=2}if(t.h3u(O.toString(),O.toString().length,37512)!==L){if(!this.p0||!this.p1)return 9;t.B40(0),this.p1[4]/=t.B1g("0",64)}return!this.p0||!this.p1||(this.p1[0]+=1,B=this.lineIntersection(C,D,F,"line"),this.p1=e.clone(this.p0),!B&&(this.p1[1]+=1,B=this.lineIntersection(C,D,F,"line"),this.p1=e.clone(this.p0),!B))?null:(this.highlighted=!!{},this.pointIntersection(this.p0[0],this.p0[+"1"],F)&&(this.highlighted="p0"),{action:M,p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)})},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)){if(M=M||F.yAxis,I=D.pixelFromTick(this.p0[0],F.chart),L=this.pixelFromValue(F,this.p0[0],this.p0["1"<<32],M),O=this.getLineColor(),B={pattern:this.pattern,lineWidth:this.lineWidth},t.G0i(3),D.plotLine(I,t.B1g(I,100),L,L,O,"horizontal",C,F,B),t.B40(3),D.plotLine(I,I,L,t.K73(L,100),O,"vertical",C,F,B),this.axisLabel&&!this.repositioner&&(D.endClip(),R=this.p0[1],F.chart.transformFunc&&(R=F.chart.transformFunc(D,F.chart,R)),M.priceFormatter?R=M.priceFormatter(D,F,R):R=D.formatYAxisPrice(R,F,null,M),D.createYAxisLabel(F,R,L,O,null,null,M),D.startClip(F.name),this.p0[+"0"]>=0&&!D.chart.xAxis.noDraw)){if(H=D.dateFromTick(this.p0[0],F.chart,!![]),e.ChartEngine.isDailyInterval(D.layout.interval))H.setHours(0,0,0,0);else{t.B40(6);var Q=t.B1g(75,11);X=H.getSeconds()*("1000"<<Q)+H.getMilliseconds(),a.Date&&D.displayZone&&(W=new a.Date(H.getTime(),D.displayZone),H=new Date(W.getFullYear(),W.getMonth(),W.getDate(),W.getHours(),W.getMinutes()),H=new Date(H.getTime()+X))}Z=e.mmddhhmm(e.yyyymmddhhmm(H)),F.chart.xAxis.formatter?Z=F.chart.xAxis.formatter(H,this.name,null,null,Z):this.stx.internationalizer&&(Z=e.displayableDate(D,D.chart,H)),D.endClip(),D.createXAxisLabel({panel:F,txt:Z,x:I,backgroundColor:O,color:null,pointed:!0,padding:2}),D.startClip(F.name)}this.highlighted&&(j=this.highlighted=="p0",this.littleCircle(C,I,L,j))}}},!0),e.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},e.inheritsFrom(e.Drawing.speedarc,e.Drawing.segment),e.extend(e.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor",x,"pattern"],copyConfig:function(){var C;C=this.stx.currentVectorParameters,this.color=C.currentColor,t.S0g(),this.fillColor=C.fillColor,this.lineWidth=C.lineWidth,this.pattern=C.pattern},intersected:function(C,D,F){var M,I,L,O,B,R,H;if(!this.p0||!this.p1)return null;M={0:this.p0,1:this.p1};for(var W in M)if(this.pointIntersection(M[W][0],M[W][1],F))return t.B40(3),this.highlighted=t.K73("p",W),{action:"drag",point:"p"+W};return I=this.valueOnDrawingAxis(C,D),L=this.lineIntersection(C,D,F,this.name),L?(this.highlighted=!!{},{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:I}):(O=this.p1[0]-(this.p0[+"0"]-this.p1[0]),B=this.p0[0],R=this.p1[1],H=this.p0[1],t.c5Q(),C>Math.max(O,B)||C<Math.min(O,B)||I>Math.max(H,R)||I<Math.min(H,R)?null:(this.highlighted=!!{},{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:I}))},render:function(C){t.S0g();var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G;if(D="segmen",D+="t",F="a",F+="uto",M=this.stx,I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field),!(!I||this.field&&!L)&&(L=L||I.yAxis,!!this.p1)){O=M.pixelFromTick(this.p0[0],I.chart),B=M.pixelFromTick(this.p1[0],I.chart),R=this.pixelFromValue(I,this.p0["0"-0],this.p0[+"1"],L),H=this.pixelFromValue(I,this.p1[0],this.p1["1"-0],L),t.B40(57),W=t.K73(H,R),t.G0i(58),X=Math.abs(t.B1g(H,R,O,B)),Z=this.getLineColor(),C.strokeStyle=Z,j=this.fillColor,(j==F||e.isTransparent(j))&&(j=M.defaultColor),C.fillStyle=j,C.setLineDash&&(C.setLineDash(e.borderPatternToArray(this.lineWidth,this.pattern)),C.lineDashOffset=0),M.canvasFont("stx_yaxis",C);for(var Y=1;Y<3;Y++){Q="n",Q+="one",t.G0i(70);var it=t.B1g(16,4,2,65);t.B40(32);var rt=t.B1g(4,19,5);t.G0i(9);var lt=t.B1g(41,15,28);t.G0i(7);var dt=t.B1g(18,50,6,10);et=Math.abs(this.p1[it]-this.p0[rt])*Math.sqrt(lt)*Y/("3">>dt),t.G0i(71);var ht=t.B1g(15,1,22,1,8);t.B40(9);var pt=t.B1g(20,19,0);t.B40(46);var ut=t.B1g(19,20);t.B40(72);var mt=t.B1g(207,16,13);t.G0i(73);var gt=t.K73(53,20,4,7);V=this.p1[ht]+et*(W?pt:ut)*(L.flipped?mt:gt),K=this.pixelFromValue(I,this.p0[0],V,L),C.save(),C.beginPath(),t.B40(12),C.scale(t.B1g(X,1),+"1"),t.G0i(18),C.arc(t.B1g(B,X),H,Math.abs(K-H),0,Math.PI,!W),C.globalAlpha=this.highlighted?1:this.defaultOpacity,this.pattern!=Q&&C.stroke(),C.globalAlpha=.1,C.fill(),C.restore(),C.globalAlpha=1,this.printLevels&&(C.fillStyle=Z,C.textAlign="center",t.B40(3),tt=t.B1g(Y,"/3"),C.fillText(tt,B,Math.round(K-5)),C.fillStyle=j)}C.textAlign="left",J={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},M.plotLine(O,B,R,H,Z,D,C,I,J),C.setLineDash&&C.setLineDash([]),this.highlighted&&(at="p",at+="1",ct=this.highlighted=="p0"?!![]:!1,G=this.highlighted==at,this.littleCircle(C,O,R,ct),this.littleCircle(C,B,H,G))}},reconstruct:function(C,D){this.stx=C,this.color=D.col,t.c5Q(),this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.v0=D.v0,this.v1=D.v1,this.field=D.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}}},!!{}),e.Drawing.speedline=function(){this.name="speedline",this.printLevels=!0},e.inheritsFrom(e.Drawing.speedline,e.Drawing.speedarc),e.extend(e.Drawing.speedline.prototype,{intersected:function(C,D,F){var M,I,L,O,B;if(M=this.p0,I=this.p1,!M||!I)return null;L={0:M,1:I};for(var R in L)if(this.pointIntersection(L[R][0],L[R][1],F))return t.B40(3),this.highlighted=t.K73("p",R),{action:"drag",point:"p"+R};O=this.rays,t.S0g();for(var H=0;H<O.length;H++)if(this.lineIntersection(C,D,F,"ray",O[H][0],O[H][1],!![]))return B="m",B+="ov",B+="e",this.highlighted=!0,{action:B,p0:e.clone(M),p1:e.clone(I),tick:C,value:this.valueOnDrawingAxis(C,D)};return null},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt;if(D="midd",D+="le",F="l",F+="eft",M=this.stx,I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field),!(!I||this.field&&!L)&&!!this.p1){O=M.pixelFromTick(this.p0[0],I.chart),B=M.pixelFromTick(this.p1[+"0"],I.chart),R=this.pixelFromValue(I,this.p0[0],this.p0[1],L),H=this.pixelFromValue(I,this.p1[0],this.p1[1],L),M.canvasFont("stx_yaxis",C),W=this.getLineColor(),C.strokeStyle=W,X=this.fillColor,(X=="auto"||e.isTransparent(X))&&(X=M.defaultColor),C.fillStyle=X,Z={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},et=["1","2/3","1/3","3/2","3"],t.G0i(12),V=[1,t.B1g(3,2),t.B1g(3,1,t.G0i(12)),t.B1g("2",32,3,t.B40(74)),3],K=[],this.rays=[];for(var ht=0;ht<V.length;ht++)tt="s",tt+="egm",tt+="en",tt+="t",J=V[ht],!(J>1&&!this.extension)&&(at=this.pixelFromValue(I,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*J,L),J>1?(ct=e.xIntersection({x0:O,x1:B,y0:R,y1:at},H),K.push(ct)):(ct=e.xIntersection({x0:B,x1:B,y0:R,y1:H},at),K.push(at)),G=J>1?ct:B,Y=J>1?H:at,this.confineToGrid||(G=I.left,B>O&&(G+=I.width),t.G0i(66),Y=t.K73(O,R,B,G,O,at,R)),this.printLevels&&(J!=1||this.extension)&&(C.fillStyle=W,it=0,rt=0,R>H?(rt=-5,C.textBaseline="bottom"):(rt=5,C.textBaseline="top"),O>B?(it=5,C.textAlign="right"):(it=-5,C.textAlign="left"),J>"1"-0?C.fillText(et[ht],ct+(this.confineToGrid?0:it),H):C.fillText(et[ht],B,at+(this.confineToGrid?+"0":rt)),C.fillStyle=X),M.plotLine(O,G,R,Y,W,tt,C,I,Z),J==1&&(j=G,Q=Y),this.rays.push([[O,R],[G,Y]]),C.globalAlpha=.1,C.beginPath(),C.moveTo(G,Y),C.lineTo(O,R),C.lineTo(j,Q),C.fill(),C.globalAlpha=1);C.textAlign=F,C.textBaseline=D,this.confineToGrid&&(t.B40(6),C.globalAlpha=t.B1g("0.3",0),C.beginPath(),t.G0i(6),C.strokeRect(O,R,t.K73(B,O),t.K73(H,R)),C.moveTo(O,K[1]),C.lineTo(B,K[1]),C.moveTo(O,K[2]),C.lineTo(B,K[2]),this.extension&&(C.moveTo(K[3],R),C.lineTo(K[3],H),C.moveTo(K[4],R),C.lineTo(K[4],H)),C.stroke(),C.globalAlpha=1),this.highlighted&&(lt=this.highlighted=="p0"?!0:![],dt=this.highlighted=="p1",this.littleCircle(C,O,R,lt),this.littleCircle(C,B,H,dt))}}},!![]),e.Drawing.gannfan=function(){this.name="gannfan",t.S0g(),this.printLevels=!![]},e.inheritsFrom(e.Drawing.gannfan,e.Drawing.speedline),e.extend(e.Drawing.gannfan.prototype,{render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)&&!!this.p1){I=D.pixelFromTick(this.p0[0],F.chart),L=D.pixelFromTick(this.p1[0],F.chart),O=this.pixelFromValue(F,this.p0[0],this.p0[1],M),B=this.pixelFromValue(F,this.p1[0],this.p1[1],M),D.canvasFont("stx_yaxis",C),R=this.getLineColor(),C.strokeStyle=R,H=this.fillColor,(H=="auto"||e.isTransparent(H))&&(H=D.defaultColor),C.fillStyle=H,W={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?"1"-0:this.defaultOpacity},t.B40(27),t.S0g(),j=[t.K73(32,"1"),2,3,4,8,t.B1g(2,1,t.G0i(12)),t.B1g("1",3,0,t.B40(75)),t.B1g(4,"1",t.G0i(76)),t.B1g("8","1",t.B40(77))],this.rays=[];for(var lt=0;lt<j.length;lt++)Q=j[lt],t.G0i(78),et=t.K73(I,L,Q,I),t.G0i(79),V=t.B1g(B,O,O,Q),K=F.left,L>I&&(K+=F.width),t.B40(66),tt=t.K73(I,O,L,K,I,V,O),this.printLevels&&(C.fillStyle=R,J=+"0",at=0,O>B?(ct="t",ct+="o",ct+="p",at=+"5",C.textBaseline=ct):(at=-5,C.textBaseline="bottom"),I>L?(G="l",G+="eft",J=+"5",C.textAlign=G):(Y="ri",Y+="g",Y+="h",Y+="t",J=-5,C.textAlign=Y),Q>1?(t.B40(3),C.fillText(t.K73(Q,"x1"),t.B1g(et,J),B)):(t.G0i(42),C.fillText(t.B1g("1x",Q,1),L,t.K73(V,at,t.G0i(3)))),C.fillStyle=H),D.plotLine(I,K,O,tt,R,"segment",C,F,W),this.rays.push([[I,O],[K,tt]]),Q==1&&(X=K,Z=tt),C.globalAlpha=.1,C.beginPath(),C.moveTo(K,tt),C.lineTo(I,O),C.lineTo(X,Z),C.fill(),C.globalAlpha=1;C.textAlign="left",C.textBaseline="middle",this.highlighted&&(it=this.highlighted=="p0",rt=this.highlighted=="p1",this.littleCircle(C,I,O,it),this.littleCircle(C,L,B,rt))}}},!0),e.Drawing.timecycle=function(){t.c5Q(),this.name="timecycle",this.printLevels=!![]},e.inheritsFrom(e.Drawing.timecycle,e.Drawing.speedarc),e.extend(e.Drawing.timecycle.prototype,{intersected:function(C,D,F){var M,I,L,O,B,R;if(M="se",M+="g",M+="me",t.S0g(),M+="nt",I=this.p0,L=this.p1,O=this.stx.panels[this.panelName],!I||!L||!O)return null;B={0:I,1:L};for(var H in B)if(this.pointIntersection(B[H][+"0"],B[H][1],F))return t.G0i(3),this.highlighted=t.B1g("p",H),{action:"drag",point:"p"+H};return R=this.lineIntersection(C,D,F,M),R||F.x0<=this.p0["0"<<32]&&F.x1>=I[0]?(this.highlighted=!0,{action:"move",p0:e.clone(I),p1:e.clone(L),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y;if(D="a",D+="u",D+="t",D+="o",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(I=I||M.yAxis,!!this.p1)){L=F.pixelFromTick(this.p0[+"0"],M.chart),O=F.pixelFromTick(this.p1["0"*1],M.chart),B=this.pixelFromValue(M,this.p0[0],this.p0[1],I),R=this.pixelFromValue(M,this.p1[0],this.p1[1],I),H=0,C.textBaseline="middle",F.canvasFont("stx_yaxis",C),W=20,X=this.p1[0]-this.p0[0],C.textAlign="center",Z=L,t.c5Q(),j=I.top,Q=I.bottom,et=this.getLineColor(),V=this.fillColor,(V==D||e.isTransparent(V))&&(V=F.defaultColor),this.printLevels&&(t.B40(6),Q-=t.K73(W,7)),K={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?"1"-0:this.defaultOpacity},tt=[],C.save(),C.fillStyle=V,t.B40(18),C.globalAlpha=t.K73("0.05",1);do{if(Z=F.pixelFromTick(this.p0[0]+H*X,M.chart),H++,L<O&&Z>M.left+M.width)break;if(L>O&&Z<M.left)break;if(Z<M.left||Z>M.left+M.width)continue;C.beginPath(),C.moveTo(L,j),C.lineTo(Z,j),C.lineTo(Z,Q),C.lineTo(L,Q),C.fill(),tt.push({c:H,x:Z})}while(X);C.globalAlpha=1,J=0;for(var it=0;it<tt.length;it++)if(F.plotLine(tt[it].x,tt[it].x,+"0",Q,et,"segment",C,M,K),this.printLevels){C.fillStyle=et,t.B40(46);var rt=t.B1g(1,4);at=F.chart.context.measureText(tt[it].c).width+rt,at<F.layout.candleWidth+J?(C.fillText(tt[it].c,tt[it].x,Q+7),J=+"0"):J+=F.layout.candleWidth}C.restore(),C.textAlign="left",F.plotLine(L,O,B,R,et,"segment",C,M,K),this.highlighted?(ct=this.highlighted=="p0"?!!{}:!1,G=this.highlighted=="p1"?!0:![],this.littleCircle(C,L,B,ct),this.littleCircle(C,O,R,G)):(Y=this.valueFromPixel(M.height/("2">>0),M,I),this.setPoint(0,this.p0[0],Y,M.chart),this.setPoint(1,this.p1[0],Y,M.chart))}}},!0),e.Drawing.regression=function(){var C;C="r",C+="egressio",t.c5Q(),C+="n",this.name=C},e.inheritsFrom(e.Drawing.regression,e.Drawing.segment),e.extend(e.Drawing.regression.prototype,{configs:["color",q,"pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3",m,v],copyConfig:function(C){var D;e.Drawing.copyConfig(this,C),D=this.stx.currentVectorParameters,this.active1=!!D.active1,this.active2=!!D.active2,this.active3=!!D.active3,this.color1=D.color1||"auto",this.color2=D.color2||"auto",this.color3=D.color3||"auto",this.lineWidth1=D.lineWidth1,this.lineWidth2=D.lineWidth2,this.lineWidth3=D.lineWidth3,this.pattern1=D.pattern1,this.pattern2=D.pattern2,this.pattern3=D.pattern3},$controls:[w,f,'cq-cvp-controller[cq-cvp-header="3"]'],click:function(C,D,F){var M,I;if(!(D<"0"<<32))return this.copyConfig(),M=this.stx,I=M.panels[this.panelName],this.penDown?this.accidentalClick(D,F)?!![]:(t.B40(4),this.setPoint(t.K73(0,"1"),D,F,I.chart),this.penDown=!1,!0):(this.setPoint(0,D,F,I.chart),this.isAllowed(M,this.field)?(this.penDown=!![],!1):(M.undo(),!0))},getYValue:function(C){var D,F,M,I,L,O,B,R,H,W,X;if(D=this.stx,F=D.chart.dataSet[C],M=D.chart.dataSet[C],!F||(I=D.panels[this.panelName],L=D.getYAxisByField(I,this.field)||I.yAxis,D.charts[I.name]&&I.chart.transformFunc&&L==I.yAxis&&(M=F.transform),!M))return null;if(O=null,B=null,R=D.defaultPlotField||"Close",this.field){if(B=e.existsInObjectChain(M,this.field),!B)return null;if(O=B=B.obj[B.member],F!=M){O=e.existsInObjectChain(F,this.field),H=-1278141163,W=1161338838,X=+"2";for(var Z=1;t.h3u(Z.toString(),Z.toString().length,87239)!==H;Z++)O=O.obj[O.member],X+=2;t.J3W(X.toString(),X.toString().length,86874)!==W&&(O=O.obj[O.member])}typeof B=="object"&&(B=B[R],O=O[R])}else B=M[R],O=F[R];return{transformed:B,untransformed:O}},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt;if(D=this.stx,F=D.panels[this.panelName],t.S0g(),M=D.getYAxisByField(F,this.field),!(!F||this.field&&!M)&&!!this.p1&&!(this.p0[0]<"0"*1||this.p1["0">>64]<0)&&(I=D.pixelFromTick(this.p0[0],F.chart),L=D.pixelFromTick(this.p1[0],F.chart),!(I<F.left&&L<F.left)&&!(I>F.right&&L>F.right))){O=[],B=[],R=0,H=0,W=0,X=0,Z=Math.min(this.p1[0],this.p0[0]),t.B40(80);var St=t.B1g(10,1,13,12,13);j=Math.max(this.p1[0],this.p0[0])+St,t.B40(6),Q=t.K73(j,Z);for(var Tt=Z;Tt<j;Tt++)et=this.getYValue(Tt),et&&(O.push(et.transformed),B.push(et.untransformed));for(V=O.length,t.G0i(81),K=t.K73(1,V,2,V),tt=Math.pow(K,2),t.B40(82),J=t.B1g(0,3,K,"1",V,2),Tt=0;Tt<V;Tt++)W+=V*O[Tt]-R,R+=O[Tt],X+=V*B[Tt]-H,H+=B[Tt];if(t.G0i(83),at=t.K73(V,K,W,tt,J,R,V),t.B40(84),ct=t.B1g(at,R,K,V),t.B40(83),G=t.K73(V,K,X,tt,J,H,V),t.B40(84),Y=t.K73(at,H,K,V),this.p0[0]<this.p1[0]?(it=ct,t.B40(85),rt=t.K73(at,ct,Q),this.p0[1]=Y,t.G0i(85),this.p1[1]=t.K73(G,Y,Q)):(t.G0i(85),it=t.B1g(at,ct,Q),rt=ct,t.G0i(85),this.p0[+"1"]=t.K73(G,Y,Q),this.p1[1]=Y),lt=D.pixelFromTransformedValue(it,F,M),dt=D.pixelFromTransformedValue(rt,F,M),ht=this.getLineColor(),pt={pattern:this.pattern,lineWidth:this.lineWidth},D.plotLine(I,L,lt,dt,ht,"segment",C,F,pt),t.G0i(6),D.plotLine(I,I,t.B1g(lt,20),t.K73(lt,20,t.B40(3)),ht,"segment",C,F,pt),t.B40(20),D.plotLine(L,L,t.K73("20",dt,1),t.K73(dt,20,t.B40(3)),ht,"segment",C,F,pt),this.active1||this.active2||this.active3){for(t.B40(12),ut=t.B1g(V,R),mt=0,Tt=0;Tt<V;Tt++)mt+=Math.pow(O[Tt]-ut,2);t.B40(12),gt=Math.sqrt(t.K73(V,mt)),bt={context:C,panel:F,points:{0:{x:I,v:it},1:{x:L,v:rt}},stddev:gt,yAxis:M},this.lines={},this.active1&&(this.renderStddev("1","p",bt),this.renderStddev("1","n",bt)),this.active2&&(this.renderStddev("2","p",bt),this.renderStddev("2","n",bt)),this.active3&&(this.renderStddev("3","p",bt),this.renderStddev("3","n",bt))}this.highlighted?(yt=this.highlighted=="p0"?!0:!{},qt=this.highlighted=="p1",this.littleCircle(C,I,lt,yt),this.littleCircle(C,L,dt,qt)):(this.pixelX=[I,L],this.pixelY=[lt,dt])}},renderStddev:function(C,D,F){var M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt;M="segme",M+="n",M+="t",I="l",I+="in",I+="eWid",I+="th",L="pa",L+="t",L+="t",L+="ern",O="st",O+="dd",O+="e",O+="v",t.B40(53),B=t.K73(O,C,D),t.G0i(3),R=t.K73("color",C),t.G0i(3),H=t.B1g(L,C),t.G0i(3),W=t.B1g(I,C),X=F.points,Z=X[+"0"].v,j=X[+"1"].v,Q=F.stddev,et=D==="n"?C*-1:C*1,V=this.stx,K=F.panel,tt=F.yAxis,J={name:B,color:this.getLineColor(this[R]),type:M,y0:V.pixelFromTransformedValue(Z+Q*et,K,tt),y1:V.pixelFromTransformedValue(j+Q*et,K,tt),params:{pattern:this[H],lineWidth:this[W]}},this.lines&&(this.lines[B]=J),at=F.context,ct=X[0].x,G=X[+"1"].x,V.plotLine(ct,G,J.y0,J.y1,J.color,J.type,at,K,J.params),V.plotLine(ct,ct,J.y0-10,J.y0+10,J.color,J.type,at,K,J.params),V.plotLine(G,G,J.y1-10,J.y1+10,J.color,J.type,at,K,J.params),t.G0i(3),t.S0g(),Y=t.B1g(C,"\u03C3"),t.B40(86);var dt=t.B1g(1,1,13,13,6);it=Math.max(ct,G)+dt,rt=ct<G?J.y1:J.y0,at.fillStyle=J.color,at.save(),at.textBaseline="middle",at.fillText(Y,it,rt),at.restore(),F.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(ct>=K.chart.left&&ct<=K.chart.right||G>=K.chart.left&&G<=K.chart.right)&&(t.G0i(19),lt=t.B1g(ct<G?j:Z,et,Q),V.endClip(),V.createYAxisLabel(K,F.formatPrice(lt,tt),rt,J.color,null,at,tt),V.startClip(K.name))},intersected:function(C,D,F){var M,I,L,O,B,R,H,W;if(!this.pixelX||!this.pixelY)return null;if(M=this.repositionIntersection(C,D),M)return M;I={0:this.pixelX,1:this.pixelY};for(var X=+"0";X<2;X++)if(this.pointIntersection(I[0][X],I["1">>32][X],F,!0))return t.G0i(3),this.highlighted=t.B1g("p",X),{action:"drag",point:"p"+X};if(L=this,t.B40(27),O=this.pixelX[t.K73(32,"0")],B=this.pixelX[1],R=function(j){t.c5Q();var Q,et;return Q=[O,j.y0],et=[B,j.y1],L.lineIntersection(C,D,F,L.name,Q,et,!0)},H=R({y0:this.pixelY["0"-0],y1:this.pixelY["1"|1]}),!H&&this.lines){for(var Z in this.lines)if(R(this.lines[Z])){H=!![];break}}return H?(W="m",W+="o",W+="v",W+="e",this.highlighted=!![],{action:W,p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},repositionIntersection:function(C,D){return!this.p0||!this.p1?!{}:this==this.stx.repositioningDrawing&&this.highlighted?this.highlighted===!![]?{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)}:{action:"drag",point:this.highlighted}:![]},lineIntersection:function(C,D,F,M,I,L,O){var B;return O?(I||(I=this.p0),L||(L=this.p1),I&&L?(this.stx,F.cx0===void 0?![]:(B={x0:I[0],x1:L["0"|0],y0:I[+"1"],y1:L[1]},e.boxIntersects(F.cx0,F.cy0,F.cx1,F.cy1,B.x0,B.y0,B.x1,B.y1))):!{}):(t.B40(3),console.log(t.K73(M," lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")),!1)},boxIntersection:function(C,D,F){return t.S0g(),F.cx0>Math.max(this.pixelX[0],this.pixelX["1"|1])||F.cx1<Math.min(this.pixelX[0],this.pixelX[+"1"])||!this.stx.repositioningDrawing&&(F.cy1<this.pixelY[0]||F.cy0>this.pixelY[1])?!1:!![]},reconstruct:function(C,D){this.stx=C,this.color=D.col,this.color1=D.col1,this.color2=D.col2,this.color3=D.col3,this.active1=D.dev1,this.active2=D.dev2,this.active3=D.dev3,this.panelName=D.pnl,this.pattern=D.ptrn,this.pattern1=D.ptrn1,this.pattern2=D.ptrn2,this.pattern3=D.ptrn3,this.lineWidth=D.lw,this.lineWidth1=D.lw1,this.lineWidth2=D.lw2,this.lineWidth3=D.lw3,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.field=D.fld,this.adjust()},serialize:function(){return t.S0g(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!!{}),e.Drawing.trendline=function(){this.name="trendline"},e.inheritsFrom(e.Drawing.trendline,e.Drawing.segment),e.Drawing.trendline.prototype.configs=["color",g,u,"pattern","font"],e.Drawing.trendline.prototype.measure=function(){},e.Drawing.trendline.prototype.reconstruct=function(C,D){t.S0g(),e.Drawing.segment.prototype.reconstruct.call(this,C,D),this.callout=new e.Drawing.callout,this.callout.reconstruct(C,D.callout)},e.Drawing.trendline.prototype.serialize=function(){var C;return t.c5Q(),C=e.Drawing.segment.prototype.serialize.call(this),C.callout=this.callout.serialize(),C},e.Drawing.trendline.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y;if(D="%",D+=")",D+=" ",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)&&(e.Drawing.segment.prototype.render.call(this,C),this.callout||(this.callout=new e.Drawing.callout,L=e.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(F,L)),this.callout.p0=e.clone(this.p0),O=F.pixelFromTick(this.p0[0],M.chart),B=F.pixelFromTick(this.p1[0],M.chart),R=this.pixelFromValue(M,this.p0[0],this.p0[1],I),H=this.pixelFromValue(M,this.p1[0],this.p1[+"1"],I),!(!isFinite(R)||!isFinite(H)))){t.G0i(8),W=t.K73(B,O,2),t.B40(87),X=t.B1g(R,1,H,"2"),this.fontSize=e.stripPX(this.font&&this.font.size||13),t.G0i(6);var it=t.K73(4048,20);t.B40(88),t.K73(1389,93,93),t.B40(5);var rt=t.B1g(20,5016,454);t.B40(89);var lt=t.K73(6,4939,1,991,3);t.G0i(90),t.B1g(13,19,2944,184,19),t.B40(13);var dt=t.K73(4,9,4796,14410);t.G0i(47);var ht=t.B1g(15,2,41,26);t.G0i(6);var pt=t.K73(457,18);t.B40(91);var ut=t.K73(35,18,12,5,2);Z=this.callout.w*1.2+(this.callout.stemEntry[+"0"]==(it>=rt?lt:dt!==226.88?"c":ht!=pt?!1:"0x8fd">>ut)?0:"50"-0),j=Math.sqrt(Math.pow(B-O,2)+Math.pow(H-R,2)),Q=Z/(j||Z)*(this.p1[+"1"]<this.p0[+"1"]?+"1":-("1"|0)),t.B40(92),et=t.K73(X,Q,H,W),t.B40(73),V=t.K73(X,W,Q,B),this.callout.p0[0]=F.tickFromPixel(et,M.chart),this.callout.p0[1]=this.valueFromPixel(V,M,I),this.callout.v0=this.callout.p0[1],this.callout.p1=e.clone(this.p0),this.callout.stx=F,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,t.G0i(49);var mt=t.B1g(143,2,18,2,8);t.G0i(62);var gt=t.B1g(18,9,485,3);K=this.p1[mt]-this.p0[gt],t.B40(13);var bt=t.B1g(13,19,24,557);t.G0i(93);var yt=t.K73(18,13,13,4,14);t.B40(94);var qt=t.K73(1,20,1,22);this.callout.text=""+Number(K).toFixed(bt)+(this.p0[yt]===0?"":" ("+Number(+"100"*K/this.p0[1]).toFixed(qt)+D)+Math.abs(this.p1[0]-this.p0[0])+" Bars",tt=Math.floor((this.p0[0]+this.p1["0"<<0])/+"2"),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<+"20"?(at=F.pixelFromTick(tt,M.chart),t.B40(95),ct=t.K73(R,O,H,at,R,O,B),J=this.valueFromPixel(ct,M,I)||X):J=this.valueFromPixel(X,M,I),this.callout.stem={t:tt,v:J},this.callout.renderText(),this.callout.render(C),this.highlighted&&(G=this.highlighted=="p0"?!!{}:!1,Y=this.highlighted=="p1"?!![]:!1,this.littleCircle(C,O,R,G),this.littleCircle(C,B,H,Y))}},e.Drawing.trendline.prototype.lineIntersection=function(C,D,F,M){return t.S0g(),e.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,C,D,F,"segment")},e.Drawing.trendline.prototype.intersected=function(C,D,F){var M,I,L;return!this.p0||!this.p1?null:(M=this.callout.intersected(C,D,F),I=e.Drawing.segment.prototype.intersected.call(this,C,D,F),this.callout.highlighted=!!(M||I),I||(M?(L="mov",L+="e",{action:L,p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)}):null))},e.Drawing.average=function(){var C;t.S0g(),C="ave",C+="r",C+="age",this.name=C},e.inheritsFrom(e.Drawing.average,e.Drawing.regression),e.extend(e.Drawing.average.prototype,{configs:e.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var C,D,F,M,I,L,O,B,R;C=this.stx,this.p0&&this.p1&&(D="&e",D+="nsp",D+=";",C.setMeasure(0,!1,this.p0[0],this.p1[0],!!{},this.name),F=[],M="",this.active1&&F.push("1"),this.active2&&F.push("2"),this.active3&&F.push("3"),F.length&&(M=D+F.join(", ")+" &sigma;"),I=(C.drawingContainer||document).querySelector(".mMeasure"),L=C.controls.mSticky,O=L&&L.querySelector(".mStickyInterior"),I&&(I.innerHTML+=M),O&&(B="<",B+="b",B+="r",B+=">",R=[],R.push(e.capitalize(this.name)),R.push(this.field||C.defaultPlotField||"Close"),R.push(O.innerHTML+M),O.innerHTML=R.join(B)))},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it;if(D=this.stx,F=D.panels[this.panelName],M=D.getYAxisByField(F,this.field),!F||this.field&&!M)return;M=M||F.yAxis;function rt(dt,ht){return ht&&ht.priceFormatter?dt=ht.priceFormatter(D,F,dt):dt=D.formatYAxisPrice(dt,F,null,ht),dt}if(!!this.p1&&!(this.p0[0]<0||this.p1[0]<("0"|0))&&(I=D.pixelFromTick(this.p0[+"0"],F.chart),L=D.pixelFromTick(this.p1[0],F.chart),!(I<F.left&&L<F.left)&&!(I>F.right&&L>F.right))){for(O=Math.min(this.p1[0],this.p0[0]),B=Math.max(this.p1[0],this.p0[0])+("1"|0),R=0,H=[],W=O;W<B;W++)X=this.getYValue(W),X!==null&&(R+=X.transformed,H.push(X));if(t.c5Q(),Z=H.length,!!Z){if(t.B40(12),j=t.K73(Z,R),Q=D.pixelFromTransformedValue(j,F,M),et=this.getLineColor(),V={pattern:this.pattern,lineWidth:this.lineWidth},D.plotLine(I,L,Q,Q,et,"segment",C,F,V),t.G0i(6),D.plotLine(I,I,t.K73(Q,20),t.K73(Q,20,t.B40(3)),et,"segment",C,F,V),t.G0i(6),D.plotLine(L,L,t.K73(Q,20),t.K73(Q,20,t.G0i(3)),et,"segment",C,F,V),this.axisLabel&&!this.highlighted&&!this.penDown&&(I>=F.chart.left&&I<=F.chart.right||L>=F.chart.left&&L<=F.chart.right)&&(D.endClip(),D.createYAxisLabel(F,rt(j,M),Q,et,null,C,M),D.startClip(F.name)),this.active1||this.active2||this.active3){for(t.B40(0),K=t.B1g("0",0),W=0;W<Z;W++)X=H[W],K+=Math.pow(X.transformed-j,2);t.B40(12),tt=Math.sqrt(t.K73(Z,K)),J={context:C,formatPrice:rt,panel:F,points:{0:{x:I,v:j},1:{x:L,v:j}},stddev:tt,yAxis:M},this.lines={},this.active1&&(this.renderStddev("1","p",J),this.renderStddev("1","n",J)),this.active2&&(this.renderStddev("2","p",J),this.renderStddev("2","n",J)),this.active3&&(this.renderStddev("3","p",J),this.renderStddev("3","n",J))}if(!this.highlighted)this.pixelX=[I,L],this.pixelY=[Q,Q];else{at=this.highlighted=="p0",ct=this.highlighted=="p1"?!0:![],this.littleCircle(C,I,Q,at),G=-540086686,Y=1184180006,it=2;for(var lt=1;t.J3W(lt.toString(),lt.toString().length,47644)!==G;lt++)this.littleCircle(C,L,Q,ct),it+=2;t.h3u(it.toString(),it.toString().length,64561)!==Y&&this.littleCircle(C,L,Q,ct)}}}},reconstruct:function(C,D){t.S0g(),this.axisLabel=D.al,e.Drawing.regression.prototype.reconstruct.call(this,C,D)},serialize:function(){t.S0g();var C;return C=e.Drawing.regression.prototype.serialize.call(this),C.al=this.axisLabel,C}},!0),e.Drawing.quadrant=function(){this.name="quadrant"},e.inheritsFrom(e.Drawing.quadrant,e.Drawing.regression),e.extend(e.Drawing.quadrant.prototype,{configs:[p,h,d,"pattern"],copyConfig:function(){var C;C=this.stx.currentVectorParameters,this.color=C.currentColor,this.fillColor=C.fillColor,this.lineWidth=C.lineWidth,this.pattern=C.pattern},$controls:[],render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht;if(t.c5Q(),D="s",D+="eg",D+="ment",F="a",F+="u",F+="to",M=this.stx,I=M.panels[this.panelName],L=M.getYAxisByField(I,this.field),!(!I||this.field&&!L)&&!!this.p1&&(O=M.pixelFromTick(this.p0[0],I.chart),B=M.pixelFromTick(this.p1[0],I.chart),!(O<I.left&&B<I.left)&&!(O>I.right&&B>I.right))){R=null,H=null;for(var pt=Math.max(0,Math.min(this.p1[0],this.p0[+"0"]));pt<=Math.min(M.chart.dataSet.length-1,Math.max(this.p1[0],this.p0[0]));pt++)W=this.getYValue(pt),W!==null&&((R===null||W.transformed>R)&&(R=W.transformed),(H===null||W.transformed<H)&&(H=W.transformed));X=M.pixelFromTransformedValue(R,I,L),t.G0i(96),Z=M.pixelFromTransformedValue(t.B1g("4",3,R,H),I,L),t.G0i(97),j=M.pixelFromTransformedValue(t.K73(H,R,3,2),I,L),t.B40(8),Q=M.pixelFromTransformedValue(t.K73(H,R,2),I,L),t.B40(98),et=M.pixelFromTransformedValue(t.B1g(R,"2",H,3),I,L),t.B40(98),V=M.pixelFromTransformedValue(t.B1g(R,"3",H,4),I,L),K=M.pixelFromTransformedValue(H,I,L),this.p0[1]=0,this.p1[+"1"]=!{},tt=this.getLineColor(),J=this.fillColor,(J==F||e.isTransparent(J))&&(J=M.defaultColor),C.fillStyle=J,at=864725389,ct=-+"769300938",G=+"2";for(var ut=1;t.J3W(ut.toString(),ut.toString().length,71609)!==at;ut++)Y={pattern:this.pattern,lineWidth:this.lineWidth},G+=2;t.h3u(G.toString(),G.toString().length,65917)!==ct&&(Y={pattern:this.pattern,lineWidth:this.lineWidth}),M.plotLine(O,B,X,X,tt,"segment",C,I,Y),M.plotLine(O,B,K,K,tt,D,C,I,Y),this.name=="quadrant"?(it="segme",it+="nt",M.plotLine(O,B,Z,Z,tt,it,C,I,Y),M.plotLine(O,B,V,V,tt,"segment",C,I,Y)):this.name=="tirone"&&(rt="seg",rt+="ment",M.plotLine(O,B,j,j,tt,rt,C,I,Y),M.plotLine(O,B,et,et,tt,"segment",C,I,Y)),M.plotLine(O,O,X,K,tt,"segment",C,I,Y),M.plotLine(B,B,X,K,tt,"segment",C,I,Y),M.plotLine(O,B,Q,Q,tt,"segment",C,I,e.extend(Y,{opacity:this.name=="tirone"?.2:1})),C.globalAlpha=.1,C.beginPath(),t.G0i(6),C.fillRect(O,X,t.K73(B,O),t.B1g(K,X)),this.name=="quadrant"?(t.B40(6),C.fillRect(O,Z,t.B1g(B,O),t.K73(V,Z))):this.name=="tirone"&&(t.G0i(6),C.fillRect(O,j,t.K73(B,O),t.B1g(et,j))),C.globalAlpha=1,this.highlighted?(lt="p",lt+="1",dt=this.highlighted=="p0"?!0:!{},ht=this.highlighted==lt?!0:![],this.littleCircle(C,O,Q,dt),this.littleCircle(C,B,Q,ht)):(this.pixelX=[O,B],this.pixelY=[X,K,Q],this.name==="quadrant"&&this.pixelY.push(Z,V),this.name==="tirone"&&this.pixelY.push(j,et))}},intersected:function(C,D,F){var M,I,L,O,{pixelX:B,pixelY:R}=this;if(t.S0g(),!B||!R)return null;if(M=this.repositionIntersection(C,D),M)return M;for(var H=0;H<2;H++)if(this.pointIntersection(B[H],R[2],F,!![]))return t.B40(3),this.highlighted=t.B1g("p",H),{action:"drag",point:"p"+H};return I=[],B.forEach(W=>{var X,Z,j;X=-1849585535,Z=1114622786,t.G0i(6),j=t.B1g("2",0);for(var Q="1"<<32;t.J3W(Q.toString(),Q.toString().length,52627)!==X;Q++)I.push({p0:[W,R[0]],p1:[W,R[1]]}),j+=2;t.h3u(j.toString(),j.toString().length,75053)!==Z&&I.push({p0:[W,R[5]],p1:[W,R[+"6"]]})}),R.forEach(W=>{I.push({p0:[B[+"0"],W],p1:[B[1],W]})}),L=I.some(({p0:W,p1:X})=>this.lineIntersection(C,D,F,this.name,W,X,!![])),L?(O="m",O+="ove",this.highlighted=!0,{action:O,p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:this.valueOnDrawingAxis(C,D)}):null},reconstruct:function(C,D){this.stx=C,this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,t.S0g(),this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.field=D.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!!{}),e.Drawing.tirone=function(){this.name="tirone"},e.inheritsFrom(e.Drawing.tirone,e.Drawing.quadrant),e.Drawing.volumeprofile=function(){t.c5Q(),this.name="volumeprofile"},e.inheritsFrom(e.Drawing.volumeprofile,e.Drawing.regression),e.extend(e.Drawing.volumeprofile.prototype,{configs:["color","fillColor","lineWidth",s,"parameters"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,t.S0g(),this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern,this.priceBuckets=this.stx.currentVectorParameters.volumeProfile.priceBuckets},$controls:[],getYValue:null,isAllowed:function(C,D){return t.c5Q(),!D||typeof C.getFirstLastDataRecord(C.chart.dataSegment,D)[D]=="object"},render:function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt,Ct,Rt,Ht,jt,$t,Bt,zt,Pt,Nt,_t,Vt,ee,xe;D="a",D+="u",D+="to";var{stx:ae}=this,{dataSet:Te}=ae.chart;if(F=ae.panels[this.panelName],M=ae.getYAxisByField(F,this.field),!(!F||this.field&&!M)&&!!this.p1&&(M=M||F.yAxis,I=ae.pixelFromTick(this.p0[0],F.chart),L=ae.pixelFromTick(this.p1[0],F.chart),!(I<F.left&&L<F.left)&&!(I>F.right&&L>F.right))){var{flipped:Ue}=M;O=null,B=null,R=Math.min(this.p1[0],this.p0[0]),H=Math.max(this.p1[0],this.p0[0]);for(var _e=R;_e<=H;_e++)if(W=Te[_e],W[this.field]&&(W=W[this.field]),!!W){var{High:Oe,Low:de}=W;(O===null||Oe>O)&&(O=Oe),(B===null||de<B)&&(B=de)}var{priceBuckets:se}=this;t.B40(99),X=t.K73(O,se,B),Z=[],Ue&&([O,B]=[B,O]),j=Ue?-1:+"1";for(var he=B,Ve=0;Ve<=se&&(Z.push([he,0]),B!==O);he+=X*j,Ve++);Q=0;for(var ye=R;ye<=H;ye++)if(et=Te[ye],(et[this.field]||et[this.field]===0)&&(et=et[this.field]),!!et){var{High:qe,Low:Se,Volume:ge}=et;if(!(!ge&&ge!==0)){V=[],K=Z[0][0],tt=null;for(var ue=1;ue<Z.length;ue++)tt=Z[ue][0],J=Se>=K&&Se<=tt,at=qe>=K&&qe<=tt,ct=Se<K&&qe>tt,(J||at||ct)&&V.push(ue),K=tt;if(V.length){G=ge/V.length;for(var te=0;te<V.length;te++)Y=Z[V[te]][1]+=G,Y>Q&&(Q=Y)}}}it=Q===0&&Z.length>1,it&&ae.displayErrorAsWatermark("chart",ae.translateIf("Not enough data to render the Volume Profile")),rt=Wt=>Math.round(Wt)+("0.5"-0),lt=(H-R)*ae.layout.candleWidth,t.B40(46);var fe=t.B1g(5,6);dt=rt(ae.pixelFromTick(R))-fe,t.B40(3),ht=rt(t.B1g(dt,lt)),t.G0i(78),pt=this.pixelFromValue(F,R,t.K73(B,O,2,B),M),ut=dt;var[oe]=Z[0];mt=this.getLineColor();var{fillColor:me}=this;(me===D||e.isTransparent(me))&&(me=ae.defaultColor),C.fillStyle=me,gt={pattern:this.pattern,lineWidth:this.lineWidth},bt=0,yt=0,qt=(Wt,Zt)=>[bt,yt]=[Wt,Zt],St=(Wt,Zt,je)=>{var Ce,Re,ze,Ee;je||(Ce="se",Ce+="gment",ae.plotLine(bt,Wt,yt,Zt,mt,Ce,C,F,gt)),Re=-1272690821,ze=1104646576,Ee=2;for(var Me=1;t.h3u(Me.toString(),Me.toString().length,17958)!==Re;Me++)[bt,yt]=[Wt,Zt],Ee+=2;t.h3u(Ee.toString(),Ee.toString().length,54818)!==ze&&([bt,yt]=[Wt,Zt]),[bt,yt]=[Wt,Zt]},(this.highlighted||it)&&ae.plotLine(dt,ht,pt,pt,ae.defaultColor,"segment",C,F,Object.assign({},gt,{opacity:.3}));for(var be=1;be<Z.length;be++){var[ce,Lt]=Z[be];Lt?(t.G0i(100),Tt=t.B1g(lt,Q,Lt),t.B40(3),wt=rt(t.K73(dt,Tt)),Ct=rt(this.pixelFromValue(F,R,ce,M)),Rt=rt(this.pixelFromValue(F,R,oe,M)),Ht=Math.max(Ct,M.top),jt=Math.min(Rt,M.bottom),t.G0i(101),$t=t.B1g(Ct,Ht),t.G0i(101),Bt=t.K73(Rt,jt),zt=Ht<=M.bottom&&jt>=M.top,zt&&(this.highlighted||(C.globalAlpha=+"0.3"),qt(dt,jt),St(dt,Ht),St(wt,Ht,$t),St(wt,jt),wt>ut&&St(ut,jt,Bt),t.B40(18),C.globalAlpha=t.B1g("0.2",1),t.G0i(6),C.fillRect(dt,Ht,t.B1g(wt,dt),t.B1g(jt,Ht)),C.globalAlpha=1),ut=wt):ut=dt,oe=ce}this.highlighted&&(Pt="p",Pt+="0",Nt=this.highlighted===Pt,_t=this.highlighted==="p1",Vt=this.p0[0]>this.p1[0],ee=Vt?_t:Nt,xe=Vt?Nt:_t,this.littleCircle(C,dt,pt,ee),this.littleCircle(C,ht,pt,xe)),t.G0i(3),this.pixelX=[dt,t.B1g(dt,lt)],this.pixelY=[this.pixelFromValue(F,R,O,M),this.pixelFromValue(F,R,B,M),pt],this.p0[1]=0,this.p1[1]=!{}}},intersected:function(C,D,F){var M,{p0:I,p1:L,stx:O}=this;if(!I||!L)return null;var[,,B]=this.pixelY||[];if(B!==void 0){if(M=this.repositionIntersection(C,D),M)return M;for(var[R,[H]]of[[0,I],[1,L]])if(this.pointIntersection(O.pixelFromTick(H),B,F,!![]))return t.G0i(3),this.highlighted=t.K73("p",R),{action:"drag",point:"p"+R};return this.boxIntersection(C,D,F)?(this.highlighted=!!{},{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:C,value:D}):null}},reconstruct:function(C,D){t.S0g(),this.stx=C,this.color=D.col,this.fillColor=D.fc,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.d0=D.d0,this.d1=D.d1,this.tzo0=D.tzo0,this.tzo1=D.tzo1,this.field=D.fld,this.priceBuckets=D.pb,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,pb:this.priceBuckets}}},!0),e.Drawing.elliottwave=function(){this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],this.dx=+"0",this.dy=-20,t.S0g(),this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},e.inheritsFrom(e.Drawing.elliottwave,e.Drawing.annotation),e.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III",l,"V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},e.Drawing.elliottwave.prototype.initializeSettings=function(C){C.currentVectorParameters.waveParameters=e.clone(e.Drawing.elliottwave.defaultTemplate)},e.Drawing.elliottwave.prototype.configs=["color",c,r,"pattern","font","waveParameters"],e.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]",o],e.Drawing.elliottwave.prototype.construct=function(C,D){var F;this.stx=C,t.S0g(),this.panelName=D.name,F=C.currentVectorParameters,Object.assign(this,F.waveParameters)},e.Drawing.elliottwave.prototype.serialize=function(){var C,D,F;C="f",C+="l",D={};for(var M=0;M<this.points.length;M++)F="t",F+="zo",t.B40(3),D[t.K73("d",M)]=this[t.B1g("d",M)],t.B40(3),D[t.K73("tzo",M)]=this[t.B1g(F,M)],t.G0i(3),D[t.K73("v",M)]=this[t.K73("v",M)];return D.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fld:this.field,fnt:e.removeNullValues(e.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:C}))},D)},e.Drawing.elliottwave.prototype.reconstruct=function(C,D){var F,M;F="f",F+="a",F+="mil",F+="y",M="s",M+="i",M+="z",M+="e",this.stx=C,this.color=D.col,this.panelName=D.pnl,this.pattern=D.ptrn,this.lineWidth=D.lw,this.font=e.replaceFields(D.fnt,{st:"style",sz:M,wt:"weight",fl:F}),this.decoration=D.decor,this.showLines=D.show,this.dx=D.dx,this.dy=D.dy,this.trend=D.trend,this.field=D.fld,this.annotationPoints=D.annotations.split(","),D.decor==="enclosed"&&this.calculateRadius(C.chart.tempCanvas.context),this.maxSegments=D.mxSeg,this.reconstructPoints(D),this.adjust()},e.Drawing.elliottwave.prototype.reconstructPoints=function(C){var D,F,M;if(t.c5Q(),D=this.stx.panels[this.panelName],!!D)for(var I=+"0";I<this.annotationPoints.length;I++)t.G0i(3),this[t.K73("d",I)]=C[t.B1g("d",I)],t.B40(3),this[t.B1g("v",I)]=C[t.B1g("v",I)],t.G0i(3),this[t.K73("tzo",I)]=C[t.K73("tzo",I)],F=e.strToDateTime(C["d"+I]),M=this.stx.tickFromDate(F,D.chart),this.points.push([M,C["v"+I]])},e.Drawing.elliottwave.prototype.calculateRadius=function(C){var D,F;this.getFontString(),t.S0g(),C.font=this.fontString,D=0;for(var M=+"0";M<this.annotationPoints.length;M++)F=C.measureText(this.annotationPoints[M]).width,D<F&&(D=F);this.enclosedRadius=D},e.Drawing.elliottwave.prototype.check=function(C,D,F){var M,I;if(t.B40(6),M=this.points[t.B1g(F,1)],M&&C<=M["0"^0])return!1;if(F===1&&this.points.length===("2"|0))return!!{};t.G0i(3),I=this.points[t.K73(F,1)];function L(O){for(var B=2;B<O.length;B++)if(Math.sign(O[B][1]-O[B-1][1])==Math.sign(O[B-1][1]-O[B-2][1]))return![];return t.S0g(),!!{}}return I&&C>=I[0]?!{}:!!L(this.points)},e.Drawing.elliottwave.prototype.move=function(C,D,F){this.copyConfig(),t.G0i(6);var M=t.B1g(1632,1536);this.points[this.lastPoint+("1"<<M)]=[D,F],this.render(C)},e.Drawing.elliottwave.prototype.adjust=function(){var C,D;if(t.c5Q(),C=this.stx.panels[this.panelName],!!C)for(var F=0;this.maxSegments+1>F;F++)t.G0i(3),D=this[t.B1g("d",F)],this.setPoint(F,D,this["v"+F],C.chart),this.points[F][+"0"]=this.stx.tickFromDate(e.strToDateTime(D),C.chart),t.G0i(3),this.points[F][1]=this[t.B1g("v",F)]},e.Drawing.elliottwave.prototype.click=function(C,D,F){t.S0g();var M,I;if(M=this.stx.panels[this.panelName],!!M)return this.copyConfig(),this.penDown?this.accidentalClick(D,F)?(this.penDown=!!{},!1):this.check(D,F,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,D,F,M.chart),this.lastPoint===1&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments)?(this.penDown=!{},!![]):!{}:(I="e",I+="nc",I+="lo",I+="sed",this.setPoint(0,D,F,M.chart),this.points.push(this.p0),this.penDown=!!{},t.G0i(35),this.segment=t.K73("0",0),t.G0i(4),this.lastPoint=t.K73(0,"0"),this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),this.decoration===I&&this.calculateRadius(C),this.maxSegments=this.annotationPoints.length-+"1",this.trend=1,!1)},e.Drawing.elliottwave.prototype.render=function(C){var D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt;if(D="m",D+="iddl",D+="e",F=this.stx,M=F.panels[this.panelName],I=F.getYAxisByField(M,this.field),!(!M||this.field&&!I)){if(I=I||M.yAxis,L=this.annotationPoints,O=this.pattern?e.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),C.font=this.fontString,C.textAlign="center",C.textBaseline=D,C.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(C),this.lastFontString=this.fontString,B=this.getLineColor(),C.fillStyle=C.strokeStyle=B,C.save(),C.setLineDash(O),R=this.dx,H=this.dy,W=this.points,X=this.pts,Z=!this.showLines&&this.highlighted,j=W.length,t.S0g(),this.penDown&&this.segment){t.G0i(13);var qt=t.B1g(12,2,0,22);Q=this.trend*(j%qt-.5)<+"0",et=554008367,V=-216602932,K=2;for(var St=1;t.J3W(St.toString(),St.toString().length,37487)!==et;St++)this.drawDropZone(C,W[j+4][8],I[Q?"high":"low"],W[j*1][8]),K+=2;t.h3u(K.toString(),K.toString().length,25498)!==V&&(tt="h",tt+="igh",this.drawDropZone(C,W[j-2][1],I[Q?tt:"low"],W[j-("2"-0)][0]))}else if(typeof this.highlighted=="string"&&F.repositioningDrawing){J="m",J+="ax",at=parseInt(this.highlighted.substring(1,this.highlighted.length),10),t.B40(102);var Tt=t.B1g(7,20,22,10,17);Q=this.trend*(at%Tt-.5)>0,t.G0i(6),ct=W[t.B1g(at,1)],t.B40(3),G=W[t.K73(at,1)],Y=at>0?ct[1]:G[1],G&&(Y=Math[Q?J:"min"](Y,G[1])),this.drawDropZone(C,Y,I[Q?"high":"low"],ct?ct[0]:null,G?G[0]:null)}for(var wt=0;wt<j;wt++)it=W[wt],rt=F.pixelFromTick(it[0],M.chart),lt=this.pixelFromValue(M,it[0],it[1],F.getYAxisByField(M,this.field)),X[wt]=[rt,lt];if(wt=0,this.showLines||Z){for(C.beginPath(),Z&&(C.globalAlpha=.3);wt<X.length;wt++)C.lineTo(X[wt][0],X[wt][1]);C.stroke(),wt=+"0"}for(C.restore();wt<j;wt++){dt="enc",dt+="losed",ht=wt%2?R:-R,pt=wt%2?H:-H,ht*=this.trend,pt*=this.trend,I.flipped&&(ht*=-1,pt*=-1),ut=X[wt],t.B40(6);var Ct=t.K73(16,15);mt=ut[2]=ut["0"*Ct]+ht,t.G0i(103);var Rt=t.B1g(3,289,15,16,0);gt=ut[3]=ut[Rt]+pt,bt=this.enclosedRadius||8,yt=L[wt],this.decoration==="parentheses"&&(t.G0i(53),yt=t.K73("(",yt,")")),C.fillText(yt,mt,gt),this.decoration===dt&&(C.beginPath(),C.arc(mt,gt,bt,0,2*Math.PI,!1),C.stroke()),this.highlighted&&(C.save(),this.littleCircle(C,this.pts[wt][0],this.pts[wt][1],this.highlighted==="p"+wt),C.restore())}}},e.Drawing.elliottwave.prototype.reposition=function(C,D,F,M){var I,L,O,B,R,H,W,X;if(I="dr",I+="a",I+="g",L="m",L+="o",L+="v",L+="e",!!D){if(O=this.stx.panels[this.panelName],B=D.tick-F,R=D.value-M,D.action===L)for(var Z=0;D.points.length>Z;Z++){H=D.points[Z],this.setPoint(Z,H[0]-B,H[1]-R,O.chart),t.B40(46);var j=t.B1g(8,9);this.points[Z]=[H[0]-B,H[j]-R]}D.action===I&&(W=D.point,X=this.points,X[W]=[F,M],this.check(F,M,W)&&this.setPoint(W,F,M,O.chart)),this.render(C)}},e.Drawing.elliottwave.prototype.intersected=function(C,D,F){var M,I,L,O;if(!this.p0||!this.p1)return null;for(var B=0;this.points.length>B;B++){if(I="se",I+="gm",I+="ent",L=this.points[B],this.pointIntersection(L[+"0"],L[+"1"],F))return O="d",O+="r",O+="ag",t.G0i(3),this.highlighted=t.K73("p",B),{action:O,point:B,tick:C,value:this.valueOnDrawingAxis(C,D)};this.points[B+1]&&this.lineIntersection(C,D,F,I,L,this.points[B+1])&&(this.highlighted=!0,M={action:"move",points:e.clone(this.points),tick:C,value:this.valueOnDrawingAxis(C,D)})}return M},e.Drawing.elliottwave.prototype.measure=function(){var C,D,F,M,I;this.points.length>=2&&(C=".mSticky",C+="I",C+="n",C+="terior",D=this.points,this.stx.setMeasure(D[0][1],D[D.length-1][1],D[0][0],D[D.length-1][0],!!{}),F=this.stx.controls.mSticky,M=F&&F.querySelector(C),M&&(I=[],I.push(e.capitalize("Elliott Wave")),this.getYValue&&I.push(this.field||this.stx.defaultPlotField||"Close"),I.push(M.innerHTML),M.innerHTML=I.join("<br>")))},e.Drawing.printProjection=function(C,D,F){var M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt;if(M=D.arr,M.length>1){I=M[0][0],L=Math.round(C.chart.maxTicks*.75);for(var J=1;J<M.length;J++){for(t.G0i(6),O=M[t.K73(J,1)][+"0"],B=M[J][0],R=e.strToDateTime(O),H=e.strToDateTime(B).getTime(),W=C.standardMarketIterator(R),X=0;R.getTime()<H;)R=W.next(),X+=1;if(Z=e.strToDateTime(O).getTime(),Z>e.strToDateTime(F[F.length-1].Date).getTime())j=F.length-+"1",X+=1;else for(j=F.length-1;j>=+"0"&&!(Z<=e.strToDateTime(F[j].Date).getTime());j--);Q={x0:0,x1:X,y0:F[j].Close,y1:M[J][1]},I=e.strToDateTime(O),W=C.standardMarketIterator(I),et=!{};for(var at=+"0";at<=X;at++)if(et?I=W.next():et=!0,!(I.getTime()<=F[F.length-1].DT.getTime())){V=e.yIntersection(Q,at),V||(V=0),t.G0i(5);var ct=t.K73(7,12,9995);if(K=Math.round(V*+"10000")/ct,K===0&&(K=M[J][1]),tt={Date:e.yyyymmddhhmmssmmm(I),DT:I,Open:K,Close:K,High:K,Low:K,Volume:0,Adj_Close:K,Split_Close:K,projection:!![]},C.layout.interval=="minute"&&L--<0)break;F[F.length]=tt}}}}):console.error("drawingAdvanced feature requires first activating drawing feature.")};ed=b=>{var t,i;t="und",t+="e",t+="fin",t+="ed",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.computeEquationChart?(i.formatEquation=function(n){var e=ft,a,o,r,c,l,s,d,h;a="",o=[],r="",c=![];for(var p=1;p<n.length;p++)l=n[p],l=="["&&!c?c=!![]:l=="]"&&c?(c=!1,r!==""&&(o.push(r),e.B40(53),a+=e.B1g("[",r,"]")),r=""):c?r+=l:l=="+"||l=="-"||l=="*"||l=="/"||l==":"||l=="%"||l=="("||l==")"?(r!==""&&isNaN(r)?(o.push(r),e.B40(53),a+=e.K73("[",r,"]")):a+=r,l==":"&&(l="/"),a+=l,r=""):l!=" "&&(r+=l);if(r!==""&&isNaN(r))o.push(r),e.B40(53),a+=e.K73("[",r,"]");else{s=446270466,d=-673060449,h=+"2";for(var u=+"1";e.h3u(u.toString(),u.toString().length,21986)!==s;u++)a*=r,h+=2;e.h3u(h.toString(),h.toString().length,11062)!==d&&(a+=r)}return e.c5Q(),{equation:a,symbols:o}},i.fetchEquationChart=function(n,e){var a,o,r,c,l;a=i.formatEquation(n.symbol),o=a.symbols,r=[],c=n.stx,n.stx=null;for(var s=0;s<o.length;s++)l=i.shallowClone(n),l.stx=c,l.symbol=o[s],l.symbolObject={symbol:o[s]},r.push(l);n.stx=c,c.quoteDriver.multiFetch(r,function(d){var h,p,u,g,f;h={},n.loadMoreReplace=!!{},p={charge:0};for(var w="0"^0;w<d.length;w++){if(u=d[w],u.dataCallback.error){e({error:u.dataCallback.error});return}h[u.params.symbol]=u.dataCallback.quotes,n.loadMoreReplace=n.loadMoreReplace&&u.params.loadMoreReplace,n.moreToLoad=n.moreToLoad||u.dataCallback.moreAvailable,g=u.dataCallback.attribution,g&&(g.charge&&(p.charge+=g.charge),p.source=g.source,p.exchange===void 0?p.exchange=g.exchange:p.exchange!=g.exchange&&(p.exchange=""))}if(r.length||!(n.loadMore||n.update))try{f=i.computeEquationChart(a.equation,h),e({quotes:f,moreAvailable:n.moreToLoad,attribution:p})}catch(S){var v,m,q,x,y;v=-1597766295,m=1739385669,q=2;for(var k=1;ft.J3W(k.toString(),k.toString().length,62391)!==v;k++)x="I",x+="nvalid equation",x+=": ",y={error:x+a.equation},q+=2;ft.h3u(q.toString(),q.toString().length,33296)!==m&&(y={error:""%a.equation}),S.name&&S.name=="NoException"&&(y.suppressAlert=!!{}),e(y)}})}):console.error("equationsAdvanced feature requires first activating equations feature.")};id=b=>{var t,i,n;t="und",t+="ef",t+="i",t+="ned",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Marker?i.Marker.Performance||(i.ChartEngine.prototype.removeDOMMarker=function(e){console.warn(`CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance#remove instead.`),i.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},i.ChartEngine.prototype.drawMarkers=function(){console.warn(`CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`),i.Marker.Performance.drawMarkers(this)},i.ChartEngine.prototype.calculateMarkerStyles=function(e,a){var o;o=`CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release
 Please use CIQ.M`,o+="ar",o+="ker.Performance.calculateStyles instead.",console.warn(o),i.Marker.Performance.calculateMarkerStyles(this,e,a)},i.ChartEngine.prototype.drawCircleMarker=function(e,a,o){ft.c5Q(),console.warn(`CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCircleMarker instead.`),i.Marker.Performance.drawCircleMarker(e,a,o)},i.ChartEngine.prototype.drawSquareMarker=function(e,a,o){var r;r="CIQ.ChartEngine#drawSquareMarker is schedule",r+=`d for deprecation in a future release
 Please use CIQ.Marker.Performance.drawSquareMarker instead.`,console.warn(r),i.Marker.Performance.drawSquareMarker(e,a,o)},i.ChartEngine.prototype.drawCalloutMarker=function(e,a,o){console.warn(`CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawCalloutMarker instead.`),ft.S0g(),i.Marker.Performance.drawCalloutMarker(e,a,o)},i.ChartEngine.prototype.drawMarkerStem=function(e,a,o){console.warn(`CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkerStem instead.`),i.Marker.Performance.drawMarkerStem(e,a,o)},i.ChartEngine.prototype.positionDOMMarkers=function(){console.warn(`CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release
 Please use CIQ.Marker.Performance.drawMarkers instead.`),ft.S0g(),i.Marker.Performance.drawMarkers(this)},i.Marker.Performance=function(e){var a,o,r,c,l,s,d,h,p,u,g,f,w,v,m;a="h",a+="4",o=".s",o+="tx-visual",r="<div clas",r+="s",r+='="stx-stem"></div>',c="</",c+="div",c+=">",l="<div cl",l+='ass="stx-marke',l+='r highlight">',s="TE",s+="MPLATE",this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},i.extend(this.params,e),d=this.template=document.createElement(s),ft.B40(104),d.innerHTML=ft.K73("</div>",'<div class="stx-marker-content">',c,r,l,'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>',"</div>",'<div class="stx-visual">'),h=this.template.content.cloneNode(!0),p=h.querySelector(".stx-marker"),p.classList.add(e.type),p.classList.add(e.category),e.size&&p.classList.add(e.size),u=h.querySelector(o),g=h.querySelector(".stx-marker-expand"),f=h.querySelector(a),ft.S0g(),w=h.querySelector("p"),f.innerText=this.params.headline,w.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,this.deferAttach=!![],this.node=h.firstChild,this.node.params=this.params,this.visual=u,this.expand=g,e.type==="callout"&&(v=".s",v+="t",v+="x-marker-",v+="content",m=g.removeChild(f),h.querySelector(v).insertBefore(m,g))},i.inheritsFrom(i.Marker.Performance,i.Marker.NodeCreator,!{}),i.Marker.Performance.consolidateExpanded=function(e){var a,o,r,c,l;if(a=e.markerHelper.highlighted,!a.length)return;o=e.activeMarker,o.consolidated||(o.consolidated=[]);function s(h){var p,u;return p=h.params.node,u=p.expand,u?(ft.S0g(),u.querySelector(".marker_content")||u):null}for(var d=a.length-1;d>=0;d--)o!==a[d]&&(r=s(a[d]),r&&(c="</co",c+="nsoli",c+="dated",c+=">",l="<consolidated><br><br>"+r.innerHTML.replace(/<consolidated>.*<\/consolidated>/g,"")+c,s(o).innerHTML+=l));ft.S0g(),o.stxNodeCreator.quickCache(o)},i.Marker.Performance.reconstituteExpanded=function(e){var a=ft,o,r,c;o=199840931,r=-2026574395,a.G0i(0),c=a.K73("2",0);for(var l=1;a.J3W(l.toString(),l.toString().length,98311)!==o;l++){if(!e.markerHelper.highlighted.length||!e.activeMarker)return;c+=+"2"}a.c5Q(),!(a.J3W(c.toString(),c.toString().length,76095)!==r&&+e.markerHelper.highlighted.length&&+e.activeMarker)&&Array.from(e.activeMarker.params.node.expand.querySelectorAll("consolidated")).forEach(s=>(a.S0g(),s.remove()))},i.Marker.Performance.drawMarkers=function(e){var a,o,r,c,l,s,d;a="a",a+="l",a+="l",o=e.getMarkerArray(a),r=e.chart;for(var h="0"*1;h<o.length;h++)c=o[h],l=c.stxNodeCreator,s=r.dataSegment[0].tick,d=r.dataSegment[r.dataSegment.length-1].tick,s<=c.tick<=d&&l&&l.drawMarker&&l.drawMarker(c)},i.Marker.Performance.calculateMarkerStyles=function(e,a,o){var r=ft,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;if(c=".stx-mark",c+="er",c+="-tem",c+="plates",l=e.container.ownerDocument,s=l.querySelector(c),!s){d=-707333787,h=-1063719175,p=2;for(var S=+"1";r.J3W(S.toString(),S.toString().length,11145)!==d;S++)u="-100",u+="0p",u+="x",g="D",g+="I",g+="V",s=document.createElement(g),s.style.visibility="hidden",s.style.left=u,l.body.append(s),p+=2;r.h3u(p.toString(),p.toString().length,965)!==h&&(f="-",f+="1000px",w="h",w+="i",w+="dd",w+="en",s=document.createElement("DIV"),s.style.visibility=w,s.style.left=f,l.body.append(s))}if(s.appendChild(a.node),v=getComputedStyle(a.stxNodeCreator.visual),!e.styles.stx_marker_stem){m=".stx-st",m+="em",q=321124018,r.G0i(0),x=-r.B1g("1838738539",64),y=2;for(var A=+"1";r.J3W(A.toString(),A.toString().length,24776)!==q;A++)k=getComputedStyle(a.node.querySelector("")),y+=2;r.J3W(y.toString(),y.toString().length,"67418"|88)!==x&&(k=getComputedStyle(a.node.querySelector(""))),k=getComputedStyle(a.node.querySelector(m)),e.styles.stx_marker_stem=e.cloneStyle(k)}e.styles[o]=e.cloneStyle(v),s.removeChild(a.node)},i.Marker.Performance.drawCircleMarker=function(e,a,o){var r=ft,c,l,s,d,h,p,u,g;c=e.params.stx,l=c.chart,s=l.context,d=o.x,r.S0g(),h=o.y,p=o.radius,u=o.label,g=o.color?o.color:a.backgroundColor,s.save(),s.beginPath(),s.setLineDash([]),s.lineWidth=1,s.fillStyle=g,s.strokeStyle=g,s.textAlign="center",r.G0i(47);var f=r.K73(2,1,0,3);s.font="normal bold "+Math.min("12"^0,("2"-0)*(p+f))+"px Roboto, Helvetica, sans-serif",s.arc(d,h,p,0,2*Math.PI,!1),s.fill(),s.stroke(),s.closePath(),u&&(s.fillStyle=i.chooseForegroundColor(s.fillStyle),r.B40(3),s.fillText(u,d,r.B1g(h,1))),(e.highlight||e.active)&&(s.beginPath(),r.B40(3),s.arc(d,h,r.B1g(p,4),0,2*Math.PI,![]),s.stroke(),s.closePath()),s.restore()},i.Marker.Performance.drawSquareMarker=function(e,a,o){var r=ft,c,l,s,d,h,p,u,g,f,w;if(c="d",c+="i",c+="amond",l=e.params.stx,s=l.chart,d=s.context,h=o.x,p=o.y,u=o.half,g=o.label,r.c5Q(),f=o.color?o.color:a.backgroundColor,r.G0i(105),w=r.B1g(u,"2"),d.setLineDash([]),d.lineWidth=1,d.fillStyle=f,d.strokeStyle=f,d.save(),d.beginPath(),e.node.params.type===c&&(d.translate(h,p),d.rotate(Math.PI/+"4"),d.translate(-h,-p),u/=1.42,r.B40(18),w=r.B1g(u,2)),r.B40(6),d.fillRect(r.B1g(h,u),r.B1g(p,u),w,w),(e.highlight||e.active)&&(r.B40(106),d.strokeRect(r.K73(4,u,h),r.B1g("4",u,p,r.B40(107)),r.B1g(w,8,r.G0i(3)),r.K73(w,8,r.B40(3)))),d.closePath(),d.restore(),g){d.save(),d.textAlign="center",r.G0i(108);var v=r.B1g(4,96,1,7,5);d.font="normal bold "+Math.min(v,+"2"*u)+"px Roboto, Helvetica, sans-serif",d.fillStyle=i.chooseForegroundColor(d.fillStyle),r.B40(3),d.fillText(g,h,r.B1g(p,1)),d.restore()}},i.Marker.Performance.drawCalloutMarker=function(e,a,o){var r,c,l,s,d,h,p,u,g,f,w,v,m;r=e.params.stx,c=r.chart,l=c.context,s=e.params,o.x,d=o.y,h=o.half,p=o.midWidth,u=o.headline,g=o.color?o.color:a.backgroundColor,f=h*2||25,w=Math.round(l.measureText(u).width),v=p?p*2:w+"8"*1,l.beginPath(),l.setLineDash([]),l.lineWidth=1,l.fillStyle=g,l.strokeStyle=g,l.font="normal bold 12px Roboto, Helvetica, sans-serif",l.rect(s.box.x0,s.box.y0,v,f),l.fill(),l.stroke(),l.closePath(),l.beginPath(),l.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",ft.G0i(109),m=ft.B1g(v,w,20,2),l.rect(s.box.x0+m,d-h,w+40,22),l.fill(),l.stroke(),l.closePath(),l.fillStyle="black",l.fillText(u,s.box.x0+m+10,d)},i.Marker.Performance.drawMarkerStem=function(e,a,o){var r,c,l,s,d,h,p;r=e.params.stx,c=r.chart,l=c.context,s=o.x,o.y,l.beginPath(),l.strokeStyle=a.borderLeftColor,l.setLineDash([1,1]),d=i.stripPX(a.height),h=o.invert?e.params.box.y0:e.params.box.y1,p=o.invert?e.params.box.y0-d:e.params.box.y1+d,l.moveTo(s,h),l.lineTo(s,p),l.stroke(),l.closePath()},i.Marker.Performance.prototype.drawMarker=function(e){var a=ft,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M;if(o="di",o+="amond",r="sq",r+="ua",r+="r",r+="e",c=e.params,l=e.params.stx,!!l&&(s=l.chart,d=s.dataSegment,!(!d||!d.length)&&(h=l.panels[e.params.panelName],!h.hidden&&(p=e.params.yAxis||h.yAxis,u=e.stxNodeCreator.params,!u.hide)))){g=u.type,f=u.category,w=u.headline,v=u.displayCategory,m=u.color,q=u.displayLabel,x=u.invert,y=u.size,m==="auto"&&(m=l.defaultColor),a.G0i(110),k=a.K73(f,g,"stx_marker_","_"),y&&(a.G0i(3),k+=a.B1g("_",y)),l.styles[k]||i.Marker.Performance.calculateMarkerStyles(l,e,k),a.c5Q(),S=e.style=l.styles[k],A=l.styles.stx_marker_stem,a.G0i(6);var I=a.B1g(70,60);a.B40(6);var L=a.K73(26,24);_=parseInt(S.height,I)/L,a.G0i(69);var O=a.K73(15,8,11,2);a.G0i(68);var B=a.K73(19,8,18,0,196);if(T=parseInt(S.width,O)/B,g==="diamond"){_*=1.42,P=1838415527,E=-417358706,z=2;for(var R=1;a.h3u(R.toString(),R.toString().length,78616)!==P;R++)T%=9556,z+=+"2";a.h3u(z.toString(),z.toString().length,89497)!==E&&(T*=1.42)}U=u.displayStem?parseInt(A.height,10)+parseInt(A.marginBottom,+"10"):"0"^0,a.G0i(19),N=a.K73(U,2,_),C=c.offset||0,D=l.pixelFromTick(e.tick),F=c.node.calculateYPosition({marker:e,panel:h,yAxis:p,height:N,half:_,offset:C,stemHeight:U,inverted:x,field:c.field,x:D}),!(!e.tick&&e.tick!==0)&&(c.box={x0:D-(T||_),y0:F-_,x1:D+(T||_),y1:F+_,midY:_,midX:T||_,stemHeight:U},v?f=f[0].toUpperCase():f="",l.startClip(h.name),g==="circle"?i.Marker.Performance.drawCircleMarker(e,S,{x:D,y:F,radius:_,label:q||f,color:m}):g===r||g===o?i.Marker.Performance.drawSquareMarker(e,S,{x:D,y:F,half:_,label:q||f,color:m}):g==="callout"?i.Marker.Performance.drawCalloutMarker(e,S,{x:D,y:F,half:_,midWidth:T,headline:w,color:m}):(M=" is unsupporte",M+=`d with canvas markers!
Supported Styles are `,M+="Square, Diamond, ",M+="Circle, and Callout.",a.B40(53),console.warn(a.B1g("Marker type: ",g,M))),u.displayStem&&i.Marker.Performance.drawMarkerStem(e,A,{x:D,y:F,invert:x}),l.endClip(),e.attached&&this.positionPopUpNode(e))}},i.Marker.Performance.prototype.positionPopUpNode=function(e){var a=ft,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T;if(o="px) ",o+="tran",o+="slate",o+="Y(",r="tran",r+="sla",r+="teX(",!(!e.attached||!e.params.box)){if(c=e.params,l=c.stx,s=c.box,d=e.params.node.expand,h=l.chart.dataSet,p=l.chart.dataSegment,u=l.panels[c.panelName],e.tick){f=[h[p[0]&&p["0"*1].tick-1],h[p[0]&&p[0].tick-2]],w=l.getFirstLastDataRecord(f.concat(p),"Date"),a.B40(111);var P=a.B1g(21,2,20,4,11);a.B40(72);var E=a.K73(205,17,12);a.G0i(112);var z=a.B1g(1,20,98,5);v=[h[p[p.length-+"1"].tick+P],h[p[p.length-E].tick+z]],m=l.getFirstLastDataRecord(p.concat(v),"Date",!!{}),g=w.DT<=h[e.tick].DT&&h[e.tick].DT<=m.DT&&e.params.box.y0<=u.yAxis.bottom&&e.params.box.y1>=u.yAxis.top}else g=!{};if(!e.highlight&&!e.active&&(g=!1),d.style.visibility=g?"":"hidden",!!g){d.style.height!==""&&(d.style.height=""),q=d.rects,a.G0i(3);var U=a.K73(0,2);if(x=q.height/U,k=e.node.params.infoOffset||0,e.node.params.infoOnLeft?y=s.x0-q.width-k<u.left?s.x1+k:s.x0-q.width-k:y=s.x0+q.width>u.right?s.x0-q.width-k:s.x1+k,y-=l.chart.left,S=c.avoidFlush?5:0,A=s.y0-x>=u.yAxis.top?s.y0+s.midY-x:u.yAxis.top+S,!c.avoidFlush&&s.y1+s.stemHeight===u.yAxis.bottom&&q.height>s.y1-s.y0+s.stemHeight&&(A=s.y1-q.height+s.stemHeight),s.y1+x>u.yAxis.bottom&&(A=u.yAxis.bottom-q.height-S),q.height>u.yAxis.height){_="p",_+="x",A=u.yAxis.top+S,a.B40(70);var N=a.K73(26,8,7,213);d.style.height=u.yAxis.height-N*S+_}A-=u.yAxis.top,T=r+Math.floor(y)+o+Math.floor(A)+"px) translateZ(0)",d.style.transform=T,d.transform={translateX:y,translateY:A}}}},i.Marker.Performance.prototype.quickCache=function(e){var a,o,r,c;a=e.params.node,o=a.expand,r=e.style,c=i.stripPX(r.marginLeft)+i.stripPX(r.marginRight)+i.stripPX(r.borderRight)+i.stripPX(r.borderLeft),o.rects=o.getBoundingClientRect(),ft.S0g(),o.scrollBarWidth=o.rects.width-o.clientWidth-c},i.Marker.Performance.prototype.calculateYPosition=function(e){var a=ft,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D;if(o="below_can",o+="dl",o+="e",a.S0g(),r="va",r+="l",r+="ue",c="lo",c+="w",l="hi",l+="g",l+="h",s="h",s+="i",s+="g",s+="h",d=e.marker,h=e.panel,p=e.yAxis,u=e.height,g=e.half,f=e.offset,w=e.stemHeight,v=e.inverted,m=e.field,q=d.params.stx,x=q.chart,y=q.chart.highLowBars,k=x.dataSet[d.tick],!!k&&(m&&(k=k[m]),!!k)){if(typeof k=="number"&&(k={Close:k},k[x.defaultPlotField]=k.Close,y=!1),S=q.getBarBounds(k,!!m),A=y?S[p.flipped?"low":s]:k[x.defaultPlotField],_=y?S[p.flipped?l:c]:k[x.defaultPlotField],T=d.params.yPositioner,isNaN(A)){a.G0i(46);var F=a.B1g(7,9);A=(p.high+p.low)/F}if(isNaN(_)){a.G0i(9);var M=a.B1g(17,19,0);_=(p.high+p.low)/M}if(E=0,T!="none"){z="_",z+="l",z+="ane",a.B40(113);var I=a.K73(5,5,9,9,6);U=T.indexOf(z)>I,N=q.markerHelper.placementMap,C=T+"|"+h.name,U&&typeof N[C]=="undefined"&&(N[C]=2),a.B40(13);var L=a.B1g(12,7,2113,19100);a.G0i(114),a.B1g(11,17,66,17,3),a.B40(22);var O=a.K73(2180,13,394547,13,14);a.G0i(115),a.B1g(6127,3060,2,24496,6),a.B40(106),a.B1g(80562,6,87282),a.G0i(5);var B=a.K73(18,6243,1245);a.B40(88);var R=a.B1g(9948,9969,3323);D=C+(L==O?!1:B!=+"6665"?"-":R)+(U?d.params.label:e.x),typeof N[D]=="undefined"&&(N[D]=U?N[C]:0,a.B40(39),N[C]+=a.B1g(u,"2")),E=N[D],U||(a.B40(3),N[D]+=a.B1g(u,1))}switch(T){case r:if(d.params.y||d.params.y===0){P=q.pixelFromPrice(d.params.y,h,p)-u*.5+g;break}case"above_candle":P=q.pixelFromPrice(A,h,p)-g-(!v&&w||f)-E;break;case o:P=q.pixelFromPrice(_,h,p)+g+(v&&w||f)+E;break;case"on_candle":a.B40(9);var H=a.B1g(36,8,30);P=q.pixelFromPrice((A+_)/H,h,p)-u*.5+g;break;case"top":case"top_lane":P=h.yAxis.top+g+(v&&w||f)+E;break;case"bottom":case"bottom_lane":P=h.yAxis.bottom-g-(!v&&w||f)-E;break}a.B40(5);var W=a.K73(19,10,11);a.G0i(6);var X=a.K73(12,10);return Math.round(W*P)/X}},i.Marker.Performance.prototype.prepareForHolder=function(e){var a,o;return a=this.expand,o=e.params.stx,a.classList.add(this.params.type),a.classList.add(this.params.category),ft.S0g(),o.markerHelper.domMarkers.push(e),a},i.Marker.Performance.prototype.addToHolder=function(e){var a,o,r;a="touchstar",ft.S0g(),a+="t",o=this.expand,r=e.params.stx,i.Marker.Performance.reconstituteExpanded(r),i.Marker.Performance.consolidateExpanded(r),this.quickCache(e);function c(l){ft.c5Q(),r.activeMarker=e,r.activeMarker.click({cx:l.clientX,cy:l.clientY,panel:r.currentPanel}),l.stopPropagation()}o.clickClosure||(o.addEventListener("mousedown",c),o.addEventListener(a,c,{passive:!{}}),o.clickClosure=c)},i.Marker.Performance.prototype.remove=function(e){var a,o,r,c,l;a=e.params.stx,a&&(!a.markerHelper.domMarkers||(o=a.markerHelper.domMarkers.indexOf(e),o!=-1&&(ft.G0i(6),a.markerHelper.domMarkers.splice(o,ft.K73("1",0))),e.attached&&(r="cl",r+="i",r+="ck",c=a.panels[e.params.panelName],l=e.params.node.expand,l.parentNode===c.subholder&&c.subholder.removeChild(l),l.removeEventListener(r,l.clickClosure))))},i.Marker.Performance.prototype.click=function(e){var a,o,r;if(!!this.hasText){arguments.length>1&&(e={cx:arguments[0],cy:arguments[1],marker:arguments["2"|0],panel:arguments[+"3"]});var{cx:c,cy:l,marker:s,panel:d}=e;if(a=s.params.stx,s.attached){if(r=this.expand,r.rects&&r.transform&&r.rects.width-r.scrollBarWidth+r.transform.translateX<a.backOutX(c)&&a.backOutX(c)<r.rects.width+r.transform.translateX)return;this.remove(s)}else a.addToHolder(s),o=!0;s.attached=!s.attached,s.active=!s.active,o&&s.stxNodeCreator.positionPopUpNode(s)}}):(n="h",n+="ighPerformanceMarkers feature requires first ac",n+="tivating markers feature.",console.error(n))};ad=b=>{var t=ft,i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Renderer.OHLC.requestNew=function(n,e){var a,o,r,c,l,s,d,h,p,u,g,f;a=null,o=e.hlc,r=e.colored,c=e.hollow,l=e.volume,s=e.histogram;for(var w=0;w<n.length;w++)switch(d="h",d+="i",d+="stogram",h="color",h+="ed",p="c",p+="a",p+="ndl",p+="e",u="b",u+="a",u+="r",g=n[w],g){case u:case p:a=g;break;case"volume":l=!![];break;case"hollow":c=!!{};break;case h:r=!![];break;case d:s=!0,a="candle";break;case"hlc":f="b",f+="a",f+="r",o=!!{},a=f;break;default:return null}return a===null?null:new i.Renderer.OHLC({params:i.extend(e,{type:a,hlc:o,colored:r,hollow:c,volume:l,histogram:s})})},i.Renderer.OHLC.getChartParts=function(n,e){var a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X;return a="stx_",a+="hollow",a+="_",a+="candle_even",o="cand",o+="le",r="stx_hollow",r+="_can",r+="dl",r+="e_down",c="can",c+="dle",l="b",l+="or",l+="der_col",l+="or_even",s="fi",s+="ll_color_e",s+="v",s+="en",d="stx_hollow_cand",d+="le_even",h="c",h+="a",h+="ndle",p="h",p+="ollow",u="s",u+="tx_hollow_candle_dow",u+="n",g="h",g+="oll",g+="o",g+="w",f="fill_c",f+="o",f+="lor_up",w="candl",w+="e",v="b",v+="order_color_eve",v+="n",m="ho",m+="ll",m+="o",m+="w",q="s",q+="ha",q+="dow",x="hol",x+="low",y="border_color_",y+="up",k="sh",k+="a",k+="do",k+="w",S="ca",S+="nd",S+="le",A="bo",A+="rder_",A+="c",A+="olor_down",_="sh",_+="a",_+="dow",T="bo",T+="rder_c",T+="olor",T+="_up",P="sha",P+="dow",E="bo",E+="rde",E+="r_col",E+="or_up",z="st",z+="x_c",z+="andle_shadow",U="s",U+="h",U+="ad",U+="ow",N="ba",N+="r",C="b",C+="order_co",C+="lor_down",D="b",D+="a",D+="r",F="stx_histogram_e",F+="ven",M="histogra",M+="m",I="stx_histogra",I+="m_down",L="border_c",L+="olor_up",O=1,B=2,R=4,H=8,W=16,X=32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:H,fill:"fill_color_up",border:L,useColorInMap:!![],useBorderStyleProp:!![]},{type:"histogram",drawType:"histogram",style:I,condition:W,fill:"fill_color_down",border:"border_color_down",useColorInMap:!![],useBorderStyleProp:!0},{type:"histogram",drawType:M,style:F,condition:X,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!![]},{type:"bar",drawType:"bar",style:n||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:D,drawType:"bar",style:"stx_bar_up",condition:e?H:O,border:"border_color_up",useColorInMap:!!{}},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:e?W:B,border:C,useColorInMap:!0},{type:"bar",drawType:N,style:"stx_bar_even",condition:e?X:R,border:"border_color_even",skipIfPass:!!{},useColorInMap:!0},{type:"candle",drawType:U,style:z,border:E},{type:"candle",drawType:P,style:"stx_candle_shadow_up",condition:H,border:T},{type:"candle",drawType:_,style:"stx_candle_shadow_down",condition:W,border:A},{type:S,drawType:k,style:"stx_candle_shadow_even",condition:X,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:H,fill:"fill_color_up",border:y,useColorInMap:!![],useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:W,fill:"fill_color_down",border:"border_color_down",useColorInMap:!!{},useBorderStyleProp:!![]},{type:x,drawType:q,style:"stx_hollow_candle_up",condition:O,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:B,border:"border_color_down"},{type:m,drawType:"shadow",style:"stx_hollow_candle_even",condition:R,border:v,skipIfPass:!!{}},{type:"hollow",drawType:w,style:"stx_hollow_candle_up",condition:O|W,fill:f,border:"border_color_up",useColorInMap:!0},{type:g,drawType:"candle",style:u,condition:B|W,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:p,drawType:h,style:d,condition:R|W,fill:s,border:l,skipIfPass:!![],useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:O|H,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:c,style:r,condition:B|H,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:o,style:a,condition:R|H,fill:"fill_color_even",border:"border_color_even"}]},i.Renderer.Bars=function(n){var e,a;e="b",e+="a",e+="r",this.construct(n),a=this.params,a.type=e,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,a.hlc=a.volume=a.hollow=a.histogram=!{}},t.c5Q(),i.inheritsFrom(i.Renderer.Bars,i.Renderer.OHLC,!1),i.Renderer.HLC=function(n){var e,a;e="ba",e+="r",this.construct(n),a=this.params,a.type=e,a.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!!{},a.volume=a.hollow=a.histogram=!{}},i.inheritsFrom(i.Renderer.HLC,i.Renderer.Bars,!{}),i.Renderer.Shading=function(n){this.construct(n),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!{},this.shading=[],this.params.type=="rangechannel"&&(this.highLowBars=!![])},i.inheritsFrom(i.Renderer.Shading,i.Renderer.Lines,!{}),i.Renderer.Shading.requestNew=function(n,e){var a,o,r,c,l,s;a=null,o=null,t.S0g();for(var d=0;d<n.length;d++)r="s",r+="t",r+="e",r+="p",c="rangec",c+="han",c+="nel",l="rang",l+="echannel",s=n[d],s==l?a=c:s==r&&(o=!0);return a===null?null:new i.Renderer.Shading({params:i.extend(e,{type:a,step:o})})},i.Renderer.Shading.prototype.setShading=function(n){t.c5Q(),n.constructor!=Array&&(n=[n]),this.shading=n},i.Renderer.Shading.prototype.draw=function(){var n,e,a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;for(n=this.stx,e=this.params,a=n.panels[e.panel].chart,e.type=="rangechannel"&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):(o="stx_",o+="li",o+="ne_up",r="a",r+="ut",r+="o",this.beenSetup=!!{},e.display=this.seriesParams[0].display,e.yAxis=this.seriesParams[0].yAxis,c=this.seriesParams[0].color||r,l=this.seriesParams[0].symbol,l&&(t.B40(3),t.K73(l,".")),this.removeAllSeries(!0),s=e.name,n.addSeries(null,{symbol:l,loadData:!!l,field:"High",renderer:"Shading",name:s,style:o,display:e.display,shareYAxis:!0}),n.addSeries(null,{symbol:l,loadData:!!l,field:"Low",renderer:"Shading",name:s,style:"stx_line_down",display:e.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:c}))),this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),d=this,this.errTimeout=setTimeout(function(){d.errTimeout=null},"10000"*1)),h={},p=0;p<this.seriesParams.length;p++)u={},a.series[this.seriesParams[p].id]&&(u=i.clone(a.series[this.seriesParams[p].id].parameters)),h[this.seriesParams[p].id]={parameters:i.extend(i.extend(u,e),this.seriesParams[p]),yValueCache:this.caches[this.seriesParams[p].id]};n.drawSeries(a,h,e.yAxis,this);function k(S){var A,_,T;return A=h[S],A?(_=A.parameters.field,T=A.parameters.subField,t.B40(3),t.K73(_,T?"."+T:"")):(t.S0g(),S)}a.legend&&e.type=="rangechannel"&&(a.legend.colorMap||(a.legend.colorMap={}),g=e.display,f=[n.getCanvasColor("stx_line_up"),n.getCanvasColor("stx_line_down")],a.legend.colorMap[g]={color:f,display:g,isBase:this==n.mainSeriesRenderer});for(p in h)this.caches[p]=h[p].yValueCache;for(t.S0g(),p=0;p<this.shading.length;p++){if(w="Cl",w+="o",w+="se",v=this.shading[p],m=v.color,v.color=="auto"&&(m=n.defaultColor),v.primary||(v.primary="Close"),!v.secondary&&this.seriesParams[+"0"]&&(v.secondary=this.seriesParams[0].field),v.secondary){if(!h[v.primary]&&v.primary!="Close")continue;if(h[v.secondary]){if(v.primary=="Close"&&e.yAxis&&e.yAxis!=a.yAxis)continue}else continue}else continue;q=k(v.primary).split("."),x=k(v.secondary).split("."),y={topBand:q[0],topSubBand:q[1],topColor:v.greater||m||n.containerColor,topAxis:e.yAxis,bottomBand:x[0],bottomSubBand:x[1],bottomColor:v.lesser||m||n.containerColor,bottomAxis:v.primary==w?null:e.yAxis,tension:e.tension||a.tension,opacity:.1,step:e.step},!(!y.topColor&&!y.bottomColor)&&(!e.highlight&&n.highlightedDraggable&&(y.opacity*=.3),i.fillIntersecting(n,e.panel,y))}},i.Renderer.Histogram=function(n){this.construct(n),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&(this.params.bindToYAxis=!!{},typeof this.params.yAxis.baseline=="number"&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},i.inheritsFrom(i.Renderer.Histogram,i.Renderer,!1),i.Renderer.Histogram.prototype.adjustYAxis=function(){var n;n=this.params.yAxis,!(!n||n.baseline)&&(n.min=0,n.highValue/=this.params.heightPercentage||+"1")},i.Renderer.Histogram.prototype.draw=function(){var n,e,a,o,r,c,l;if(n=i.clone(this.params),t.c5Q(),n.type=n.subtype,this.useSum=n.subtype=="stacked",(!n.yAxis||n.yAxis==this.stx.chart.yAxis)&&(n.bindToYAxis=!!{}),this.stx.drawHistogram(n,this.seriesParams),e=n.yAxis&&n.yAxis.baseline,e&&e.color){a=this.stx.panels[this.params.panel],o=this.stx.pixelFromPrice(e.value,a,this.params.yAxis)-.5,r=227828409,c=-330068042,l=2;for(var s=1;t.h3u(s.toString(),s.toString().length,84191)!==r;s++)this.stx.plotLine({x0:a.left,x1:a.right,y0:o,y1:o,color:e.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:e.pattern&&"solid",lineWidth:e.lineWidth&&"4"|4,opacity:e.opacity&&"302">>0,globalCompositeOperation:"line"}),l+=2;t.h3u(l.toString(),l.toString().length,"8369">>32)!==c&&this.stx.plotLine({x0:a.left,x1:a.right,y0:o,y1:o,color:e.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:e.pattern||"solid",lineWidth:e.lineWidth||"1"<<64,opacity:e.opacity||.8,globalCompositeOperation:"destination-over"})}},i.Renderer.Histogram.prototype.getBasis=function(n,e,a){var o,r,c;if(o=0,n&&this.useSum)for(var l=+"0";l<this.seriesParams.length&&(r=this.seriesParams[l].field,r!==e);l++)c=n[r],c&&typeof c=="object"&&(c=c[a||this.seriesParams[l].subField||this.stx.chart.defaultPlotField||"Close"]),c&&(o+=c);return o},i.Renderer.Heatmap=function(n){this.construct(n),this.params.type="heatmap",t.S0g(),this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!![]},i.inheritsFrom(i.Renderer.Heatmap,i.Renderer,!1),i.Renderer.Heatmap.requestNew=function(n,e){var a,o,r,c,l,s;a=1814679913,t.B40(0),o=t.B1g("101341712",0),r=+"2";for(var d=1;t.h3u(d.toString(),d.toString().length,3973)!==a;d++)c=1,r+=2;t.h3u(r.toString(),r.toString().length,95958)!==o&&(c=+"1"),c=null;for(var h=0;h<n.length;h++)l="heat",l+="m",l+="a",l+="p",s=n[h],s=="heatmap"&&(c=l);return t.S0g(),c===null?null:new i.Renderer.Heatmap({params:i.extend(e,{type:c})})},i.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(i.clone(this.params),this.seriesParams)},i.Renderer.Scatter=function(n){this.construct(n),this.standaloneBars=this.barsHaveWidth=!!{},t.S0g(),this.bounded=!0},i.inheritsFrom(i.Renderer.Scatter,i.Renderer.Lines,![]),i.Renderer.Scatter.requestNew=function(n,e){var a,o,r;a=null;for(var c=0;c<n.length;c++)o="scatte",o+="r",o+="pl",o+="ot",r=n[c],r==o&&(a="scatter");return a===null?null:new i.Renderer.Scatter({params:i.extend(e,{type:a})})},i.Renderer.Scatter.prototype.drawIndividualSeries=function(n,e){t.S0g();var a,o;return a=this.stx.panels[e.panel]||n.panel,o={colors:[]},this.stx.scatter?o=this.stx.scatter(a,e):console.warn("Error, Scatter renderer requires customChart.js"),o}};od=b=>{var t=ft,i,n,e,a,o,r;i="un",i+="d",i+="efine",i+="d",n=602005839,e=1262621186,t.B40(0),a=t.K73("2",0);for(var c="1"|0;t.h3u(c.toString(),c.toString().length,80428)!==n;c++)o=~_CIQ!=""?_CIQ:b.CIQ,a+=2;t.h3u(a.toString(),a.toString().length,40087)!==e&&(o=~_CIQ!=""?_CIQ:b.CIQ),o=typeof _CIQ!==i?_CIQ:b.CIQ,t.c5Q(),o.Studies?(o.Studies.calculateAccumulationDistribution=function(l,s){var d,h,p,u,g,f;d=s.chart.scrubbed,t.S0g();for(var w=s.startFrom;w<d.length;w++)if(h="Resul",h+="t ",!!w){if(p=d[w],p.futureTick)break;t.B40(116),u=d[t.B1g(w,"1")],g=0,p.Close>u.Close?g=p.Close-Math.min(p.Low,u.Close):p.Close<u.Close&&(g=p.Close-Math.max(p.High,u.Close)),s.inputs["Use Volume"]&&(g*=p.Volume),f=u["Result "+s.name],f||(f=0),f+=g,isNaN(p.Close)||(p[h+s.name]=f)}},o.Studies.studyLibrary=o.extend(o.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:o.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):(r="accumulationDistribution fe",r+="ature requires first activating studies ",r+="feature.",console.error(r))};nd=b=>{var t,i,n,e;t="u",t+="n",t+="defi",t+="ned",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(e="#",e+="0",e+="0DD0",e+="0",i.Studies.calculateADX=function(a,o){var r=ft,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z;if(i.Studies.calculateStudyATR(a,o),c=o.chart.scrubbed,l=o.days,s=parseInt(o.inputs["Smoothing Period"],10),!s&&s!==0&&(s=l),c.length<o.days+1){o.error=!![];return}d=0,h=+"0",r.B40(0),p=r.K73("0",64),u=0;for(var U=Math.max(1,o.startFrom);U<c.length;U++){if(f="-DI",f+=" ",w="_sm",w+="TR ",v="_",v+="sm-D",v+="M",v+=" ",g=c[U],m=Math.max(0,g.High-c[U-1].High),q=Math.max(+"0",c[U-1].Low-g.Low),m>q?q=0:q>m?m=0:m=q=0,U<=l)x="True Ran",x+="ge ",h+=m,p+=q,d+=g[x+o.name];else{r.G0i(46);var N=r.B1g(9,10);r.G0i(117);var C=r.B1g(12,5,16);h=c[U-N]["_sm+DM "+o.name]*(l-C)/l+m,r.G0i(9);var D=r.K73(23,5,19);p=c[U-D]["_sm-DM "+o.name]*(l-("1"|0))/l+q,r.G0i(46);var F=r.B1g(5,6);d=c[U-F]["_smTR "+o.name]*(l-("1"<<0))/l+g["True Range "+o.name]}if(g["_sm+DM "+o.name]=h,g[v+o.name]=p,g[w+o.name]=d,!(U<l)){r.G0i(100),y=r.B1g(h,d,100),r.B40(100),k=r.B1g(p,d,100),r.G0i(118);var M=r.K73(300,1,13,19,168);if(S=M*Math.abs(y-k)/(y+k),g["+DI "+o.name]=y,g[f+o.name]=k,o.inputs.Series!==!1&&s)if(U<l+s-1){if(U==o.startFrom)for(var I=l;I<o.startFrom;I++){A="+",A+="D",A+="I",A+=" ",r.B40(119);var L=r.B1g(99,4,500,1,125);u+=L*Math.abs(c[I][A+o.name]-c[I]["-DI "+o.name])/(c[I]["+DI "+o.name]+c[I]["-DI "+o.name])}u+=S}else if(U==l+s-1)r.B40(12),g["ADX "+o.name]=r.B1g(s,u);else{_="AD",_+="X ",r.G0i(120);var O=r.K73(8,5,144,9,3);r.G0i(3);var B=r.B1g(0,1);g["ADX "+o.name]=(c[U-O][_+o.name]*(s-B)+S)/s}if(o.inputs.Histogram){if(T="+",T+="D",T+="I",T+=" ",P="-D",P+="I ",E=o.name+"_hist",!g["+DI "+o.name]&&g["+DI "+o.name]!==0||!g[P+o.name]&&g["-DI "+o.name]!==0)continue;g[E]=g[T+o.name]-g["-DI "+o.name],o.inputs.Series===!{}&&(z="+",z+="D",z+="I",z+=" ",g[z+o.name]=null,g["-DI "+o.name]=null),o.outputMap[E]=""}}}},i.Studies.displayADX=function(a,o,r){var c=ft,l,s,d,h,p,u,g,f,w,v,m,q;if(l=":",l+=" ",s=o.underlay?.3:o.inputs.Series?.4:1,c.c5Q(),o.inputs.Series&&o.inputs.Shading){d="-",d+="DI ",h="+DI "+o.name,p=d+o.name,u=i.Studies.determineColor(o.outputs[o.outputMap[h]]),g=i.Studies.determineColor(o.outputs[o.outputMap[p]]),f=o.getYAxis(a),w=1224192181,v=-497333030,c.G0i(4),m=c.B1g(2,"2");for(var x=+"1";c.J3W(x.toString(),x.toString().length,"37166"<<64)!==w;x++)q={topBand:h,bottomBand:p,topColor:u,bottomColor:g,skipTransform:a.panels[o.panel].name!==o.chart.name,topAxis:f,bottomAxis:f,opacity:+"278"},m+=2;c.h3u(m.toString(),m.toString().length,+"28644")!==v&&(q={topBand:h,bottomBand:p,topColor:u,bottomColor:g,skipTransform:a.panels[o.panel].name!=o.chart.name,topAxis:f,bottomAxis:f,opacity:.3}),!o.highlight&&a.highlightedDraggable&&(q.opacity*=.3),i.fillIntersecting(a,o.panel,q)}o.inputs.Histogram&&i.Studies.createHistogram(a,o,r,!1,s),o.inputs.Series!==![]?i.Studies.displaySeriesAsLine(a,o,r):!o.inputs.Series&&!o.inputs.Histogram&&a.displayErrorAsWatermark(o.panel,a.translateIf(o.name)+l+a.translateIf("Nothing to display"))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:i.Studies.calculateADX,seriesFN:i.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:![]},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":e,"Negative Bar":"#FF0000"}}})):(n="a",n+="dx feature requires firs",n+="t activating st",n+="udies feature.",console.error(n))};rd=b=>{var t,i,n;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(n="G",n+="ator Osci",n+="l",n+="lator",t.Studies.calculateAlligator=function(e,a){var o=ft,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y;if(r="S",r+="how Lines",c="G",c+="at",c+="or",l="Teeth",l+=" Perio",l+="d",o.c5Q(),s={J:Number(a.inputs["Jaw Period"]),T:Number(a.inputs[l]),L:Number(a.inputs["Lips Period"])},d=a.chart.scrubbed,d.length<Math.max(s.J,s.T,s.L)+1){a.error=!0;return}(a.type===c||a.inputs[r])&&(h="L",h+="i",h+="p",h+="s",p="J",p+="a",p+="w",t.Studies.MA("welles wilder",s.J,"hl/2",a.inputs["Jaw Offset"],p,e,a),t.Studies.MA("welles wilder",s.T,"hl/2",a.inputs["Teeth Offset"],"Teeth",e,a),t.Studies.MA("welles wilder",s.L,"hl/2",a.inputs["Lips Offset"],h,e,a));for(var k=a.startFrom;k<d.length;k++)if(u="S",u+="how ",u+="Fractal",u+="s",!!d[k]&&(a.type=="Gator"&&(g="_",g+="his",g+="t2",f="T",f+="ee",f+="th ",w="L",w+="i",w+="p",w+="s ",v=d[k]["Jaw "+a.name],m=d[k][w+a.name],q=d[k][f+a.name],(q||q===0)&&(x="_hist",x+="2",(v||v===0)&&(o.G0i(6),d[k][a.name+"_hist1"]=Math.abs(o.B1g(v,q))),(m||m===0)&&(o.G0i(6),d[k][a.name+x]=-Math.abs(o.B1g(q,m)))),a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+g]=""),a.inputs[u])){if(!d[k-2]||!d[k-1]||!d[k]||!d[k+1]||!d[k+2])continue;d[k-2].High&&d[k-("1"<<0)].High&&d[k].High&&d[k+1].High&&d[k+2].High&&d[k].High>d[k-1].High&&d[k].High>d[k-2].High&&d[k].High>d[k+("1"-0)].High&&d[k].High>d[k+2].High&&(d[k]["Fractal High "+a.name]=1),d[k-2].Low&&d[k-("1">>64)].Low&&d[k].Low&&d[k+1].Low&&d[k+2].Low&&d[k].Low<d[k-1].Low&&d[k].Low<d[k-2].Low&&d[k].Low<d[k+1].Low&&d[k].Low<d[k+2].Low&&(y="Fract",y+="al Low ",d[k][y+a.name]=1)}},t.Studies.displayAlligator=function(e,a,o){var r,c;ft.S0g(),r=a.getContext(e);function l(d,h){var p,u,g,f;u=e.chart.panel.yAxis.flipped,d=="high"?(r.fillStyle=e.defaultColor,r.textBaseline=u?"top":"bottom",p=e.pixelFromPrice(o[h].High),r.fillText(u?"\u25BC":"\u25B2",e.pixelFromBar(s,e.chart)-r.measureText("\u25B2").width/2+1,u?p+5:p-5)):d=="low"&&(g="t",g+="o",g+="p",f="bo",f+="tt",f+="o",f+="m",r.fillStyle=e.defaultColor,r.textBaseline=u?f:g,p=e.pixelFromPrice(o[h].Low),r.fillText(u?"\u25B2":"\u25BC",e.pixelFromBar(s,e.chart)-r.measureText("\u25BC").width/2+"1"*1,u?p-5:p+5))}if(a.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,a,o),a.inputs["Show Fractals"]){e.startClip(),r.globalAlpha=a.underlay?.3:1,!a.highlight&&e.highlightedDraggable&&(r.globalAlpha*=+"0.3");for(var s=2;s<o.length-2;s++)o[s]&&(c="hi",c+="g",c+="h",o[s]["Fractal High "+a.name]&&l(c,s),o[s]["Fractal Low "+a.name]&&l("low",s));e.endClip()}},t.Studies.displayGator=function(e,a,o){var r=ft,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;c="#",c+="CC",c+="C",c+="CCC",l=523741886,s=-82578835,d=2;for(var S=1;r.h3u(S.toString(),S.toString().length,77677)!==l;S++){h=e.panels[a.panel],p=a.getContext(e),u=a.getYAxis(e),r.B40(18),g=e.pixelFromPrice(r.K73("0",1),h,u),r.G0i(5);var A=r.K73(17,19,0);f=e.layout.candleWidth-A,f<2&&(f=1),w=t.Studies.determineColor(a.outputs["Increasing Bar"]),v=t.Studies.determineColor(a.outputs["Decreasing Bar"]),d+=2}r.h3u(d.toString(),d.toString().length,44929)!==s&&(m="Dec",m+="reasing Bar",h=e.panels[a.panel],p=a.getContext(e),u=a.getYAxis(e),g=e.pixelFromPrice(+"5",h,u),f=e.layout.candleWidth%+"5",f<=0&&(f=6),w=t.Studies.determineColor(a.outputs[m]),v=t.Studies.determineColor(a.outputs["Decreasing Bar"])),e.canvasColor("stx_histogram"),a.underlay||(p.globalAlpha=1),p.fillStyle=c,e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(p.globalAlpha*=.3);for(var _=0;_<o.length;_++)if(q=o[_],r.G0i(23),x=o[r.B1g(0,_,"1")],!!q)for(var T=1;T<=2;T++)y="_",y+="hi",y+="s",y+="t",k="_h",k+="i",k+="st",x||(x=e.getPreviousBar(e.chart,a.name+"_hist"+T,_)),x?Math.abs(x[a.name+k+T])<Math.abs(q[a.name+y+T])?p.fillStyle=w:Math.abs(x[a.name+"_hist"+T])>Math.abs(q[a.name+"_hist"+T])&&(p.fillStyle=v):p.fillStyle="#CCCCCC",q.candleWidth&&(f=Math.floor(Math.max(+"1",q.candleWidth-2))),p.fillRect(Math.floor(e.pixelFromBar(_,h.chart)-f/2),Math.floor(g),Math.floor(f),Math.floor(e.pixelFromPrice(q[a.name+"_hist"+T],h,u)-g));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!!{},seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":"13"-0,"Jaw Offset":"8"-0,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!{}},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:n,seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:+"0"}})):(i="alli",i+="gator feature ",i+="requires first activating studies feature.",console.error(i))};sd=b=>{var t=ft,i,n,e,a;i="undefi",i+="ne",i+="d",t.S0g(),n=typeof _CIQ!==i?_CIQ:b.CIQ,n.Studies?(e="Aroo",e+="n Osc",e+="il",e+="lator",a="#0",a+="0D",a+="D00",n.Studies.calculateAroon=function(o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q;if(c=r.chart.scrubbed,t.S0g(),c.length<r.days+1){r.error=!!{};return}l=0,t.G0i(18),s=t.B1g("0",1),d=null,h=null,r.startFrom>0&&(p=c[r.startFrom-+"1"]["_state "+r.name],p&&(l=p[0],s=p[1],t.B40(4),d=p[t.B1g(0,"2")],h=p[3]));for(var x=r.startFrom;x<c.length&&(g="Aroon Do",g+="wn ",f=c[x],!f.futureTick);x++){if(d===null&&(d=f.High),h===null&&(h=f.Low),d=Math.max(d,f.High),d==f.High)l=0;else if(l++,l>r.days)for(d=f.High,l=0,u="1"|0;u<=r.days;u++)d=Math.max(d,c[x-u].High),d==c[x-u].High&&(l=u);if(h=Math.min(h,f.Low),h==f.Low)s=+"0";else if(s++,s>r.days)for(h=f.Low,s=0,u=1;u<=r.days;u++)h=Math.min(h,c[x-u].Low),h==c[x-u].Low&&(s=u);w=!isNaN(f.High),v=!isNaN(f.Low),t.G0i(6);var y=t.B1g(115,15);t.G0i(5);var k=t.K73(11,12,0);m=y*(k-l/r.days),w&&(f["Aroon Up "+r.name]=m),t.G0i(121);var S=t.K73(37,7,9,1);t.G0i(9);var A=t.B1g(33,13,21);q=S*(A-s/r.days),v&&(f["Aroon Down "+r.name]=q),w&&v&&(f["Aroon Oscillator "+r.name]=f["Aroon Up "+r.name]-f[g+r.name]),f["_state "+r.name]=[l,s,d,h]}},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:n.Studies.calculateAroon,outputs:{"Aroon Up":a,"Aroon Down":"#FF0000"}},"Aroon Osc":{name:e,calculateFN:n.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")};cd=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.S0g(),i.Studies)r="#F",r+="F0",r+="00",r+="0",c="square",c+="w",c+="av",c+="e",l="a",l+="u",l+="t",l+="o",s="STARC",s+=" Ban",s+="ds",d="Average",d+=" True Range",i.Studies.calculateATRBands=function(p,u){var g;i.Studies.calculateStudyATR(p,u),g=u.inputs.Field,(!g||g=="field")&&(g="Close"),t.c5Q(),i.Studies.calculateGenericEnvelope(p,u,u.inputs.Shift,g,"ATR "+u.name)},i.Studies.calculateSTARCBands=function(p,u){var g,f,w;g="A",g+="T",g+="R ",f="_MA",f+=" ",w="Cl",w+="ose",i.Studies.calculateStudyATR(p,u),i.Studies.MA("simple",u.inputs["MA Period"],w,0,"_MA",p,u),i.Studies.calculateGenericEnvelope(p,u,u.inputs.Multiplier,f+u.name,g+u.name)},i.Studies.calculateATRStops=function(p,u){var g,f,w,v,m,q,x,y,k,S,A,_,T;if(g="All",g+=" Stops ",f=u.chart.scrubbed,!!f){i.Studies.calculateStudyATR(p,u),w=u.inputs.HighLow;for(var P=Math.max(u.startFrom-1,1);P<f.length-1;P++)v="A",v+="T",v+="R",v+=" ",m="S",m+="e",m+="ll S",m+="tops ",q=f[P],t.G0i(6),x=f[t.K73(P,1)],y=q["Buy Stops "+u.name],y||(y=q[m+u.name]),y||(t.B40(6),y=t.K73("0",0)),!(!q||!x)&&(k=q.Close,S=k,A=q[v+u.name]*u.inputs.Multiplier,q.Close>y&&x.Close>y?(w&&(k=q.High),t.G0i(6),S=Math.max(y,t.B1g(k,A))):q.Close<=y&&x.Close<=y?(w&&(k=q.Low),t.B40(3),S=Math.min(y,t.B1g(k,A))):q.Close>y?(w&&(k=q.High),t.B40(6),S=t.K73(k,A)):q.Close<=y&&(w&&(k=q.Low),t.B40(3),S=t.K73(k,A)),k<=S?(_="Sell ",_+="St",_+="ops ",t.G0i(3),f[t.K73(P,1)]["Buy Stops "+u.name]=S,t.G0i(3),delete f[t.K73(P,1)][_+u.name]):k>S&&(T="Buy ",T+="St",T+="ops ",t.G0i(3),f[t.B1g(P,1)]["Sell Stops "+u.name]=S,t.B40(3),delete f[t.K73(P,1)][T+u.name]),t.B40(3),f[t.K73(P,1)]["All Stops "+u.name]=S);u.referenceOutput="All Stops",u.outputMap={},t.c5Q(),u.outputMap[g+u.name]=""}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{ATR:{name:d,calculateFN:i.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!!{}},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:"0.1"-0,step:"0.1"*1}}},"STARC Bands":{name:s,overlay:!![],seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":l},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:i.Studies.displayPSAR2,calculateFN:i.Studies.calculateATRStops,inputs:{Period:21,Multiplier:"3"-0,"Plot Type":["points",c],HighLow:![]},outputs:{"Buy Stops":r,"Sell Stops":"#00FF00"},attributes:{Multiplier:{min:"0.1"*1,step:.1}}}});else{n=1253018885,e=-626652324,a=2;for(var h="1">>64;t.h3u(h.toString(),h.toString().length,12046)!==n;h++)console.error(""),a+=+"2";t.J3W(a.toString(),a.toString().length,"63198"^0)!==e&&(o="atr feature requires fi",o+="rst acti",o+="vating studies feature.",console.error(o))}};ld=b=>{var t=ft,i,n,e;t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(e="A",e+="wesome Oscillato",e+="r",i.Studies.calculateAwesomeOscillator=function(a,o){var r,c,l,s;if(r="_h",r+="ist",c="_",c+="M",c+="A",c+="34",l="_MA",l+="5",s=o.chart.scrubbed,s.length<33){o.error=!0;return}t.B40(6),i.Studies.MA("simple",5,"hl/2",t.K73("0",0),l,a,o),t.G0i(35),i.Studies.MA("simple",t.K73("34",0),"hl/2",0,c,a,o);for(var d=Math.max(o.startFrom,33);d<s.length;d++)!s[d]||(s[d][o.name+"_hist"]=s[d]["_MA5 "+o.name]-s[d]["_MA34 "+o.name]);t.c5Q(),o.outputMap={},o.outputMap[o.name+r]=""},i.Studies.displayAwesomeOscillator=function(a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q;c=a.panels[o.panel],l=o.getContext(a),s=o.getYAxis(a),d=a.pixelFromPrice(0,c,s),t.B40(6);var x=t.B1g(11,10);h=a.layout.candleWidth-"2"*x,h<2&&(h=1),p=i.Studies.determineColor(o.outputs["Increasing Bar"]),u=i.Studies.determineColor(o.outputs["Decreasing Bar"]),a.canvasColor("stx_histogram"),o.underlay||(l.globalAlpha=1),l.fillStyle="#CCCCCC",a.startClip(o.panel),!o.highlight&&a.highlightedDraggable&&(l.globalAlpha*=.3);for(var y=0;y<r.length;y++)g="_",g+="h",g+="i",g+="st",f="_",f+="h",f+="is",f+="t",w="_his",w+="t",v="_h",v+="i",v+="st",m=r[y],t.B40(6),q=r[t.K73(y,1)],q||(q=a.getPreviousBar(a.chart,o.name+"_hist",y)),m&&(q&&(q[o.name+v]<m[o.name+w]?l.fillStyle=p:q[o.name+f]>m[o.name+g]&&(l.fillStyle=u)),m.candleWidth&&(h=Math.floor(Math.max(1,m.candleWidth-2))),l.fillRect(Math.floor(a.pixelFromBar(y,c.chart)-h/+"2"),Math.floor(d),Math.floor(h),Math.floor(a.pixelFromPrice(m[o.name+"_hist"],c,s)-d)));a.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Awesome:{name:e,seriesFN:i.Studies.displayAwesomeOscillator,calculateFN:i.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):(n="awesomeOscillator feature requires first activating stu",n+="dies feature.",console.error(n))};dd=b=>{ft.c5Q();var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="m",i+="a",t.Studies.calculateBalanceOfPower=function(n,e){var a,o;if(a=e.chart.scrubbed,a.length<e.days+1){e.error=!0;return}ft.S0g();for(var r=e.startFrom;r<a.length;r++)o=a[r],o["_Ratio "+e.name]=o.Close-o.Open,o.High-o.Low!==0&&(o["_Ratio "+e.name]/=o.High-o.Low);t.Studies.MA(e.inputs["Moving Average Type"],e.days,"_Ratio "+e.name,"0"-0,"Result",n,e)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":i}}})):console.error("balanceOfPower feature requires first activating studies feature.")};hd=b=>{ft.c5Q();var t,i,n,e,a;t="u",t+="nd",t+="ef",t+="ined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(n="fie",n+="l",n+="d",e="au",e+="to",a="au",a+="t",a+="o",i.Studies.calculateBollinger=function(o,r){var c,l,s;c="Standard D",c+="evi",c+="ation",c+="s",l="Moving Average",l+=" Ty",l+="pe",s=r.inputs.Field,(!s||s=="field")&&(s="Close"),i.Studies.MA(r.inputs["Moving Average Type"],r.days,s,0,"_MA",o,r),r.std=new i.Studies.StudyDescriptor(r.name,"STD Dev",r.panel),r.std.chart=r.chart,r.std.startFrom=r.startFrom,r.std.days=r.days,ft.c5Q(),r.std.inputs={Field:s,"Standard Deviations":1,Type:r.inputs[l]},r.std.outputs={"_STD Dev":null},i.Studies.calculateStandardDeviation(o,r.std),i.Studies.calculateGenericEnvelope(o,r,r.inputs[c],"_MA "+r.name,"_STD Dev "+r.name),r.type=="Boll %b"&&(r.zoneOutput="%b")},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!!{},calculateFN:i.Studies.calculateBollinger,seriesFN:i.Studies.displayChannel,inputs:{Period:+"20",Field:"field","Standard Deviations":"2"*1,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":a,"Bollinger Bands Bottom":e},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:i.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":+"2","Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:i.Studies.calculateBollinger,inputs:{Period:20,Field:n,"Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:+"0.1"}}}})):console.error("bollinger feature requires first activating studies feature.")};pd=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="a",i+="u",i+="to",t.Studies.calculateCCI=function(n,e){var a,o,r,c,l,s,d,h,p,u;if(a="hl",a+="c/",a+="3",o=e.chart.scrubbed,o.length<e.days+ +"1"){r=1258729464,c=989504702,l=2;for(var g=1;ft.J3W(g.toString(),g.toString().length,53296)!==r;g++){e.error=![];return}if(ft.J3W(l.toString(),l.toString().length,+"27293")!==c){e.error=!![];return}}t.Studies.MA("simple",e.days,a,+"0","MA",n,e);for(var f=Math.max(e.startFrom,e.days-1);f<o.length;f++)if(s="Res",s+="u",s+="l",s+="t ",d=o[f],!!d){h=0;for(var w=0;w<e.days;w++)p="M",p+="A ",u="hlc",u+="/3",h+=Math.abs(o[f-w][u]-d[p+e.name]);h/=e.days,Math.abs(h)<1e-8?d["Result "+e.name]=0:d[s+e.name]=(d["hlc/3"]-d["MA "+e.name])/(.015*h)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:i}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")};ud=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="fiel",i+="d",t.Studies.calculateCenterOfGravity=function(n,e){var a=ft,o,r,c,l,s,d,h;if(o="fie",o+="ld",r=e.chart.scrubbed,r.length<e.days){e.error=!0;return}c=e.inputs.Field,(!c||c==o)&&(c="Close");for(var p=Math.max(e.startFrom,e.days-("1"-0));p<r.length;p++){l="Res",l+="ult",l+=" ",s=0,a.G0i(27),d=a.B1g(64,"0");for(var u=0;u<e.days;u++)a.B40(6),h=r[a.K73(p,u)][c],a.B40(122),s-=a.K73(u,h,1),d+=h;d&&(a.B40(12),r[p][l+e.name]=a.B1g(d,s))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:i}}})):console.error("centerOfGravity feature requires first activating studies feature.")};fd=b=>{var t=ft,i,n,e,a,o,r,c;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,!i.Studies)n="cha",n+="ikin feature requires first act",n+="ivating s",n+="tudies feature.",console.error(n);else{i.Studies.calculateChaikinMoneyFlow=function(s,d){var h,p,u,g,f,w,v,m,q,x;h=-1038780452,p=272479193,u=2;for(var y=1;t.J3W(y.toString(),y.toString().length,"27348"^0)!==h;y++)g=d.chart.scrubbed,u+=2;if(t.h3u(u.toString(),u.toString().length,3126)!==p&&(g=d.chart.scrubbed),g.length<d.days){d.error=!!{};return}f=0,w=0,t.G0i(73);var k=t.B1g(181,10,18,0);v=g[d.startFrom-k],v&&(m="_su",m+="m",m+="MF ",v["_sumMF "+d.name]&&(f=v[m+d.name]),v["_sumV "+d.name]&&(w=v["_sumV "+d.name]));for(var S=d.startFrom;S<g.length;S++)q="_",q+="s",q+="u",q+="mV ",x="_MFV",x+=" ",g[S].High==g[S].Low?g[S]["_MFV "+d.name]=0:g[S][x+d.name]=g[S].Volume*(("2"-0)*g[S].Close-g[S].High-g[S].Low)/(g[S].High-g[S].Low),f+=g[S]["_MFV "+d.name],w+=g[S].Volume,S>d.days-1&&(f-=g[S-d.days]["_MFV "+d.name],w-=g[S-d.days].Volume,w&&(t.G0i(12),g[S]["Result "+d.name]=t.B1g(w,f))),g[S]["_sumMF "+d.name]=f,g[S][q+d.name]=w},i.Studies.calculateChaikinVolatility=function(s,d){var h,p,u,g,f,w,v;if(h="Moving Ave",h+="rage Typ",h+="e",p=d.chart.scrubbed,p.length<d.days){d.error=!0;return}for(u=d.startFrom;u<p.length&&(g="_",g+="H",g+="i",g+="gh-Low ",!p[u].futureTick);u++)p[u][g+d.name]=p[u].High-p[u].Low;for(i.Studies.MA(d.inputs[h],d.days,"_High-Low "+d.name,0,"_MA",s,d),f=d.inputs["Rate Of Change"],f||(f=d.days),u=Math.max(d.startFrom,f);u<p.length;u++)if(w="_",w+="M",w+="A",w+=" ",v="_",v+="MA",v+=" ",!!p[u-f][v+d.name]){if(p[u].futureTick)break;t.G0i(123);var m=t.B1g(1100,4,172,3);t.G0i(45);var q=t.B1g(17,17,6,169,21);p[u]["Result "+d.name]=m*(p[u]["_MA "+d.name]/p[u-f][w+d.name]-q)}},e=1977563255,t.G0i(35),a=t.K73("129003314",0),o=2;for(var l=1;t.h3u(l.toString(),l.toString().length,"74233"<<64)!==e;l++)i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:i.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:i.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}}),o+=2;t.h3u(o.toString(),o.toString().length,64281)!==a&&(r="Chaik",r+="i",r+="n",r+=" Vol",c="Chaik",c+="in Vol",i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Chaikin MF":{name:c,calculateFN:i.Studies.calculateChaikinMoneyFlow,inputs:{Period:63}},"Chaikin Vol":{name:r,calculateFN:i.Studies.calculateChaikinVolatility,inputs:{Period:31,"Rate Of Change":3,"Moving Average Type":"Chaikin MF"}}}))}};gd=b=>{var t=ft,i,n,e,a,o,r;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies)o="a",o+="u",o+="t",o+="o",r="Chande Forecast Oscil",r+="la",r+="tor",i.Studies.prettify.variable="vma",i.Studies.movingAverage.conversions.vma="variable",i.Studies.movingAverage.translations.variable="Variable",i.Studies.movingAverage.typeMap.vma="Variable",i.Studies.movingAverage.typeMap.variable="Variable",i.Studies.calculateChandeForecast=function(l,s){var d,h,p;if(d=s.chart.scrubbed,d.length<s.days+1){s.error=!0;return}h=s.inputs.Field,(!h||h=="field")&&(h="Close"),i.Studies.MA("time series",s.days,h,0,"MA",l,s);for(var u=Math.max(1,s.startFrom);u<d.length;u++){p=d[u][h],p&&typeof p=="object"&&(p=p[s.subField]),t.B40(13);var g=t.B1g(2,16,0,31);d[u]["Result "+s.name]=("100"-0)*(g-d[u]["MA "+s.name]/p)}},i.Studies.calculateChandeMomentum=function(l,s){var d,h,p,u,g,f,w,v,m,q;d=s.name;for(var x in s.outputs)t.B40(53),d=t.B1g(x," ",d);if(h=s.chart.scrubbed,h.length<s.days+1){s.error=!0;return}t.S0g(),p=s.inputs.Field,(!p||p=="field")&&(p="Close"),u=0,g=0,f=[];for(var y=s.startFrom-s.days+1;y<h.length;y++)y<1||(w=h[y][p],t.B40(6),v=h[t.K73(y,1)][p],w&&typeof w=="object"&&(w=w.Close),v&&typeof v=="object"&&(v=v.Close),v!==void 0&&(t.B40(6),m=t.K73(w,v),f.push(m),u+=m,g+=Math.abs(m),f.length==s.days&&(t.G0i(100),h[y][d]=t.K73(u,g,100),q=f.shift(),u-=q,g-=Math.abs(q))))},i.Studies.calculateMovingAverageVariable=function(l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;d="fiel",d+="d",s.inputs.Type,h=s.chart.scrubbed,t.B40(124);var z=t.B1g(3,15,15);t.G0i(125);var U=t.K73(7,15,16,2,14);p=z/(s.days+U),u=null,g=s.name;for(var N in s.outputs)t.G0i(53),g=t.K73(N," ",g);for(f=s.inputs.Field,(!f||f==d)&&(f="Close"),s.cmo=new i.Studies.StudyDescriptor(s.name,"cmo",s.panel),t.c5Q(),s.cmo.chart=s.chart,s.cmo.days=9,s.cmo.inputs={Field:f},s.cmo.startFrom=s.startFrom,s.cmo.outputs={_CMO:null},i.Studies.calculateChandeMomentum(l,s.cmo),w=parseInt(s.inputs.Offset,"10">>64),isNaN(w)&&(w=0),x=s.startFrom,y=w,v=s.startFrom-("1"<<32);v>=0;v--)if(m=h[v][g],!(!m&&m!==0)){if(u===null&&(u=m),y<="0">>96)break;y--,x=v}for(u===null&&(u=x=0),k=[],v=x;v<h.length;v++){if(S="_CMO",S+=" ",A=h[v],m=A[f],m&&typeof m=="object"&&(m=m[s.subField]),_=v+w>="0">>0&&v+w<h.length,T=_?h[v+w]:null,!m&&m!=="0"*1){T?T[g]=null:v+w>=h.length&&(q={},q[g]=null,k.push(q));continue}if(!(!A["_CMO "+s.name]&&A[S+s.name]!==0)){t.B40(46);var C=t.B1g(8,9);P=Math.abs(A["_CMO "+s.name])/("100"*C),t.B40(126),E=t.K73(p,m,P,P,1,p,u),u=E,v<s.days&&(E=null),T?T[g]=E:v+w>=h.length&&(q={},q[g]=E,k.push(q))}}s.appendFutureTicks(l,k)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Chande Fcst":{name:r,calculateFN:i.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:i.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:o,studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}});else{t.G0i(18),n=t.B1g("1774035922",1),e=-900915482,a=2;for(var c=1;t.h3u(c.toString(),c.toString().length,75944)!==n;c++)console.error("chande feature requires first activating studies feature."),a+=2;t.J3W(a.toString(),a.toString().length,64977)!==e&&console.error("")}};md=b=>{var t=ft,i,n,e,a,o,r;i=-1088921141,n=-1543792805,t.c5Q(),e=2;for(var c=1;t.J3W(c.toString(),c.toString().length,99453)!==i;c++)a=~_CIQ===""?_CIQ:b.CIQ,t.B40(0),e+=t.K73("2",32);t.J3W(e.toString(),e.toString().length,43418)!==n&&(a=~_CIQ===""?_CIQ:b.CIQ),a=typeof _CIQ!="undefined"?_CIQ:b.CIQ,a.Studies?(o="0",o+=".",o+="1",r="a",r+="u",r+="t",r+="o",a.Studies.calculateChoppiness=function(l,s){var d,h,p,u;if(a.Studies.calculateStudyATR(l,s),d=s.chart.scrubbed,d.length<s.days+1){s.error=!0;return}for(var g=Math.max(s.startFrom,s.days);g<d.length;g++)if(h="Sum True",h+=" ",h+="Range ",p=d[g],!!p){if(p.futureTick)break;if(u=w(s.days,g),p[h+s.name]){t.G0i(127);var f=t.K73(110,6,241,3,17);p["Result "+s.name]=f*Math.log(p["Sum True Range "+s.name]/Math.max(1e-6,u[+"1"]-u[0]))/Math.log(s.days)}else isNaN(p)||(p["Result "+s.name]=0)}function w(v,m){t.c5Q();var q,x;t.G0i(114);var y=t.B1g(18,11,332,14,17);q=Number.MAX_VALUE*y,x=Number.MAX_VALUE;for(var k=m-v+1;k<=m;k++)k<"0"-0||(q=Math.max(q,d[k].High),x=Math.min(x,d[k].Low));return[x,q]}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:a.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:+"61.8",studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:r}},attributes:{studyOverBoughtValue:{min:50,step:o},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")};bd=b=>{var t=ft,i,n,e,a,o;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies)i.Studies.initPriceRelative?(o="B",o+="e",o+="t",o+="a",i.Studies.calculateCorrelationCoefficient=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z;if(s="Comp",s+="ar",s+="e To",d=l.chart.scrubbed,h=l.days,d.length<h+1){l.error=!![];return}if(l.compare=l.inputs[s],l.compare)l.compare=[l.compare];else{l.compare=[],l.outputs={},l.outputMap={};for(var U in c.chart.series)p=c.chart.series[U],p.parameters.color&&(l.compare.push(p.display),l.outputs["Result "+p.display]=p.parameters.color,l.outputMap["Result "+p.display+" "+l.name]="Result "+p.display)}if(!l.compare.length){l.error="Correlation Coefficient requires at least one comparison symbol";return}for(var N=0;N<l.compare.length;N++){t.G0i(4),u=t.B1g(0,"0"),g=0,f=0,w=0,v=0,m=l.compare[N],t.B40(4),q=t.K73(0,"0");for(var C=l.startFrom-h;C<d.length;C++)if(x="_t",x+="emp",x+="s",x+=" ",y="_temps",y+=" ",k="_t",k+="emps ",!!d[C]){if(S=d[C][m],S&&typeof S=="object"&&(S=S.Close),!S&&S!==0&&(A="_te",A+="mps",A+=" ",C>0&&d[C-1]&&d[C-1]["_temps "+l.name]&&d[C-1]["_temps "+l.name].c?S=d[C-("1"-0)][A+l.name].c:S=0),S&&typeof S=="object"&&(S=S.Close),d[C][k+l.name]={},u+=d[C]["_temps "+l.name].b=d[C].Close,g+=d[C][y+l.name].c=S,f+=d[C]["_temps "+l.name].b2=Math.pow(d[C].Close,2),w+=d[C][x+l.name].c2=Math.pow(S,2),v+=d[C]["_temps "+l.name].bc=d[C].Close*S,q>=h){_="Re",_+="sul",_+="t ",u-=d[C-h]["_temps "+l.name].b,g-=d[C-h]["_temps "+l.name].c,f-=d[C-h]["_temps "+l.name].b2,w-=d[C-h]["_temps "+l.name].c2,v-=d[C-h]["_temps "+l.name].bc,t.G0i(128);var D=t.K73(6,1,0,6);T=f/h-Math.pow(u/h,D),t.B40(46);var F=t.K73(6,8);P=w/h-Math.pow(g/h,F),t.B40(6);var M=t.K73(9,7);E=v/h-u*g/Math.pow(h,M),z=E/Math.sqrt(T*P),d[C][_+m+" "+l.name]=z}q++}}},i.Studies.calculatePerformance=function(c,l){var s,d,h,p,u,g;if(s="Cl",s+="o",s+="s",s+="e",d="m",d+="a",h="Comp",h+="arison Symbo",h+="l",p=l.chart.scrubbed,u=l.inputs[h].toUpperCase(),u||(u=l.study.inputs["Comparison Symbol"]),l.days||(l.days=l.study.inputs.Period),p.length<l.days+1){l.error=!0;return}i.Studies.MA(d,l.days,s,0,"_MA Base",c,l),i.Studies.MA("ma",l.days,u,0,"_MA Comp",c,l);for(var f=l.startFrom;f<p.length;f++)g=p[f][u],g&&(g.Close||g.Close===0)&&(g=g.Close),p[f]["Result "+l.name]=p[f].Close/g*(p[f]["_MA Comp "+l.name]/p[f]["_MA Base "+l.name])},i.Studies.calculateBeta=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_;if(s="_",s+="V",s+="AR",d="_CO",d+="V",d+="AR",h="_COV",h+="A",h+="Rn ",p="m",p+="a",u="_CompCh",u+="ange ",g="m",g+="a",f="Compari",f+="so",f+="n Symbol",t.S0g(),w=l.chart.scrubbed,v=l.inputs["Comparison Symbol"].toUpperCase(),v||(v=l.study.inputs[f]),l.days||(l.days=l.study.inputs.Period),w.length<l.days+1){l.error=!0;return}for(var T=Math.max(l.startFrom,1);T<w.length;T++){m="_BaseChan",m+="g",m+="e ",t.B40(73);var P=t.K73(99,7,14,0);t.G0i(9);var E=t.B1g(24,12,13);w[T][m+l.name]=w[T].Close/w[T-P].Close-E,q=w[T][v],q&&(q.Close||q.Close===0)&&(q=q.Close),t.G0i(6),x=w[t.B1g(T,1)][v],x&&(x.Close||x.Close===0)&&(x=x.Close),t.B40(11),w[T]["_CompChange "+l.name]=t.K73(1,x,q)}for(i.Studies.MA(g,l.days,"_BaseChange "+l.name,0,"_MA Base",c,l),i.Studies.MA("ma",l.days,u+l.name,+"0","_MA Comp",c,l),T=Math.max(l.startFrom,l.days);T<w.length;T++)y="_C",y+="om",y+="p",y+="Change ",k="_",k+="MA Ba",k+="se ",S="_",S+="COVARn",S+=" ",w[T][S+l.name]=(w[T]["_BaseChange "+l.name]-w[T][k+l.name])*(w[T]["_CompChange "+l.name]-w[T]["_MA Comp "+l.name]),w[T]["_VARn "+l.name]=Math.pow(w[T][y+l.name]-w[T]["_MA Comp "+l.name],2);for(i.Studies.MA(p,l.days,h+l.name,0,d,c,l),i.Studies.MA("ma",l.days,"_VARn "+l.name,0,s,c,l),T=Math.max(l.startFrom,l.days*2-1);T<w.length;T++)A="_V",A+="A",A+="R",A+=" ",_="_C",_+="OV",_+="AR ",w[T]["Result "+l.name]=w[T][_+l.name]/w[T][A+l.name]},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:i.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculatePerformance,inputs:{Period:+"120","Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:o,centerline:1,initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!!{}}})):console.error("comparisonStudies feature requires first activating priceRelative feature.");else{n=2144838946,e=1983464233,a=2;for(var r=1;t.h3u(r.toString(),r.toString().length,+"17060")!==n;r++)console.error("comparisonStudies feature requires first activating studies feature."),a+=2;t.h3u(a.toString(),a.toString().length,21296)!==e&&console.error("")}};vd=b=>{var t,i;t="un",t+="def",t+="in",t+="ed",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateCoppock=function(n,e){var a=ft,o,r,c,l,s,d,h,p,u,g,f;if(o="Res",o+="u",o+="l",o+="t",r="_",r+="Sum ",c="fie",a.S0g(),c+="ld",l=e.chart.scrubbed,s=e.inputs.Field,(!s||s==c)&&(s="Close"),d=parseInt(e.inputs["Long RoC"],"10"<<32),d||(d=14),h=parseInt(e.inputs["Short RoC"],"10"*1),h||(a.B40(6),h=a.K73("11",0)),p=e.days,p||(p=+"10"),!(d<h)){if(l.length<Math.max(h,d,p)+1){e.error=!!{};return}for(var w=Math.max(e.startFrom,d);w<l.length;w++)if(a.G0i(6),u=l[a.K73(w,h)][s],a.B40(6),g=l[a.B1g(w,d)][s],u&&g){f="_Su",f+="m ",a.B40(5);var v=a.K73(15,109,6);a.B40(129);var m=a.B1g(18,6,30,10,6);l[w][f+e.name]=v*(l[w][s]/u+l[w][s]/g-m)}i.Studies.MA("weighted",p,r+e.name,0,o,n,e)}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:i.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":"11"*1,"Long RoC":14}}})):console.error("coppock feature requires first activating studies feature.")};xd=b=>{var t=ft;t.c5Q();var i,n,e,a;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(n="a",n+="u",n+="to",e="h",e+="igh/lo",e+="w",a="Dar",a+="vas ",a+="Box",i.Studies.calculateDarvas=function(o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H;c="Pro",c+="f",c+="it",l="G",l+="ho",l+="st",t.S0g(),s="Level ",s+="Offset",d="Volume % of",d+=" Avg",h=r.chart.scrubbed,p=0,u=parseInt(r.inputs["ATH Lookback Period"],10),r.inputs["Volume Spike"]&&(g="A",g+="D",g+="V",f="V",f+="o",f+="lu",f+="me",w="si",w+="mpl",w+="e",i.Studies.MA(w,u,f,0,g,o,r)),t.G0i(130);var W=t.B1g(20,14,4,92,12);for(v=parseFloat(r.inputs[d])/W,m="none",q={},x=null,y=null,k=null,S=parseFloat(r.inputs[s]),A=!1,A&&console.log("*****************"),T={},["Darvas",l,c,"Loss","ATH","ADV","Spike"].forEach(function(Q){t.G0i(32),t.B1g(1434,2151,2),t.B40(3),t.K73(887,2),t.B40(60),t.B1g(537,88,12,13,75),t.B40(88);var et=t.K73(9331,9327,9327);t.G0i(131),t.c5Q();var V=t.B1g(3477,11,364,11,15);T[Q]=Q+(et!=V?" ":!!{})+r.name}),_=r.startFrom-1;_>"0"<<32;_--)if(P=h[_],P[T.Darvas]||P[T.Ghost])for(var X in T)P[X]=null;else{p=P[T.ATH]||"0"|0,y=P[T.Profit],k=P[T.Loss];break}for(_;_<h.length;_++)if(E="Price",E+=" M",E+="inimum",z=h[_],!!z){if(parseFloat(r.inputs[E])<=h[p].Close){if(U="d",U+="ar",U+="va",U+="s",N="hig",N+="h",N+="/l",N+="ow",C="E",C+="xit F",C+="i",C+="eld",x&&(!x.End||_==x.End+("1"|1))&&(h[_-1].Close>q.High?q={State:1,High:2*q.High-q.Low,Low:q.High,Start:_,End:2*q.End-q.Start+1}:x=null,x&&(D="G",D+="h",D+="ost begin:",z[T.Ghost]=i.clone(q),A&&console.log(D+z.DT),q.State=0,h[q.End]&&(F="Ghost e",F+="nd:",h[q.End][T.Ghost]=i.clone(q),A&&console.log(F+h[q.End].DT)),x={Start:q.Start,End:q.End},y=q.High+S,(!k||k<q.Low-S)&&(k=q.Low-S))),z[T.Profit]=y,z[T.Loss]=k,(z.Close>=y||r.inputs[C]==N&&z.High>=y)&&(y=null),m=="none"&&_==p+3&&!h[p+("2"-0)][T.Darvas]&&!h[p+ +"1"][T.Darvas]&&!h[p][T.Darvas]&&h[p].High>z.High&&(m="high"),m=="high"&&(z.High>h[p].High?m="none":h[_-3].Low<h[_-2].Low&&h[_-3].Low<h[_-1].Low&&h[_-3].Low<z.Low&&(M="Dar",M+="vas b",M+="egin:",q={State:1,High:h[p].High,Low:h[_-("3"<<64)].Low,Start:p},h[p][T.Darvas]=i.clone(q),m="darvas",A&&console.log(M+h[p].DT),A&&console.log("Darvas established:"+z.DT),x&&(x.End>_&&h[x.Start]&&(z[T.Ghost]=i.clone(h[x.Start][T.Ghost]),z[T.Ghost].End=_,h[x.End]&&(I="Ghost",I+=" En",I+="d removed:",delete h[x.End][T.Ghost],A&&console.log(I+h[x.End].DT))),z[T.Ghost].State=0,h[x.Start][T.Ghost].End=_,A&&console.log("Ghost end:"+z.DT),x=null),y=q.High+S,(!k||k<q.Low-S)&&(k=q.Low-S))),m==U&&(L="n",L+="on",L+="e",O="hi",O+="gh/l",O+="ow",B="Exit ",B+="F",B+="ield",R="n",R+="o",R+="n",R+="e",z.Close>q.High?x={}:r.inputs["Exit Field"]=="high/low"&&z.High>q.High?x={}:z.Close<q.Low?m=R:r.inputs[B]==O&&z.Low<q.Low&&(m="none"),x?m="none":m=="none"&&(y=null,k=null),r.inputs["Ghost Boxes"]||(x=null),m==L)){for(var Z=q.Start+1;Z<_;Z++)h[Z][T.Darvas]=i.clone(q);q.State=0,q.End=_,z[T.Darvas]=i.clone(q),A&&console.log("Darvas end:"+z.DT),z[T.ATH]=p;continue}k&&(z.Close<q.Low||r.inputs["Exit Field"]=="high/low"&&z.Low<q.Low)&&(m=="darvas"&&(m="none"),(z.Close<k||r.inputs["Exit Field"]=="high/low"&&z.Low<k)&&(y=null,k=null),x&&(x.End>_&&h[x.Start]&&(z[T.Ghost]=i.clone(h[x.Start][T.Ghost]),z[T.Ghost].End=_,h[x.End]&&(delete h[x.End][T.Ghost],A&&console.log("Ghost End removed:"+h[x.End].DT))),z[T.Ghost].State=0,h[x.Start][T.Ghost].End=_,A&&console.log("Ghost end:"+z.DT),x=null))}if(z.High>=h[p].High&&(p=_,A&&console.log("All Time High:"+z.DT)),(_<3||z.High>=h[_-1].High&&z.High>=h[_-+"2"].High&&z.High>=h[_-3].High)&&_-p>=u){p=_;for(var j=0;j<u&&!(_-j<0);j++)h[_-j].High>h[p].High&&(t.G0i(6),p=t.B1g(_,j));A&&console.log("All Time High:"+z.DT)}r.inputs["Volume Spike"]&&_>u&&_==p&&z[T.ADV]*v<z.Volume&&(H="Vol",H+="ume Spike",H+=":",z[T.Spike]=1,A&&console.log(H+z.DT)),z[T.ATH]=p}},i.Studies.displayDarvas=function(o,r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X;if(l="a",l+="u",l+="to",s="au",s+="to",d=i.Studies.determineColor(r.outputs.Levels),(!d||d=="auto"||i.isTransparent(d))&&(d=o.defaultColor),h=i.Studies.determineColor(r.outputs.Darvas),(!h||h==s||i.isTransparent(h))&&(h=o.defaultColor),p=i.Studies.determineColor(r.outputs.Ghost),(!p||p==l||i.isTransparent(p))&&(p=o.defaultColor),u=o.panels[r.panel],t.c5Q(),g=r.getContext(o),m=o.layout.candleWidth-+"2",m<2&&(t.G0i(35),m=t.B1g("1",0)),o.startClip(r.panel),r.inputs["Stop Levels"]){for(g.setLineDash&&g.setLineDash([2,2]),g.lineWidth=2,g.strokeStyle=d,g.beginPath(),f=0;f<c.length;f++)q="L",q+="oss ",x="L",x+="o",x+="s",x+="s ",y="L",y+="o",y+="ss ",k="L",k+="oss ",w=c[f],t.G0i(6),S=c[t.K73(f,1)],w&&(v=w[k+r.name]?Math.floor(o.pixelFromPrice(w[y+r.name],u)):null,A=S&&S[x+r.name]?Math.floor(o.pixelFromPrice(S[q+r.name],u)):null,v&&(w.candleWidth&&(m=Math.floor(Math.max(1,w.candleWidth))),_=Math.floor(o.pixelFromBar(f,u.chart)+m/2),T=Math.floor(o.pixelFromBar(f,u.chart)-m/2),A&&A>=v?g.lineTo(T,v):f===0?g.moveTo(o.chart.left,v):g.moveTo(T,v),g.lineTo(_,v)));g.stroke(),g.setLineDash&&g.setLineDash([]),g.lineWidth=1}P=-10,z=+"0",N=-10,D=0,M=![],I=!{},t.B40(3);var Z=t.K73(2655,8);for(t.B40(114),t.B1g(62160,3,617169,6,10),t.B40(70),t.B1g(5951,15,15,83320),L=g.measureText(Z<352.24?!![]:"\u25B2").width/("2"-0),O=0,f=0;f<c.length;f++)if(B="Spi",B+="k",B+="e ",!!c[f]&&((c[f].Close||c[f].Close===+"0")&&(O=f),c[f][B+r.name]&&(g.fillStyle=h,g.textBaseline="bottom",R=o.pixelFromPrice(c[f].High,o.chart.panel),g.fillText("\u25BC",o.pixelFromBar(f)-L,R-"5"*1)),c[f].candleWidth&&(m=Math.floor(Math.max("1">>0,c[f].candleWidth))),c[f]["Darvas "+r.name]&&(w=c[f]["Darvas "+r.name],w.State==1&&!M?(P=Math.floor(o.pixelFromBar(f,u.chart)-m/2),E=Math.floor(o.pixelFromPrice(w.High,u)),U=Math.floor(o.pixelFromPrice(w.Low,u))-E,M=!0):w.State==="0"<<0&&(H="St",H+="op ",H+="Levels",z=Math.floor(o.pixelFromBar(f,u.chart)+m/+"2")-P,E=Math.floor(o.pixelFromPrice(w.High,u)),U=Math.floor(o.pixelFromPrice(w.Low,u))-E,g.strokeStyle=h,g.fillStyle=h,r.inputs[H]?g.globalAlpha=.3:(g.strokeRect(P,E,z,U),g.globalAlpha=.2),g.fillRect(P,E,z,U),g.globalAlpha=+"1",M=!{})),c[f]["Ghost "+r.name]&&r.inputs["Ghost Boxes"])){if(w=c[f]["Ghost "+r.name],w.State==1&&!I)N=Math.floor(o.pixelFromBar(f,u.chart)-m/+"2"),C=Math.floor(o.pixelFromPrice(w.High,u)),D=Math.floor((w.End-w.Start+1)*o.layout.candleWidth+m/+"2"),F=Math.floor(o.pixelFromPrice(w.Low,u))-C,I=!0;else if(w.State===0){w.Start==w.End&&(N=Math.floor(o.pixelFromBar(f,u.chart)-m/2)),t.B40(46);var j=t.K73(11,12);D=Math.floor(o.pixelFromBar(f,u.chart)+m/("2"*j))-N,C=Math.floor(o.pixelFromPrice(w.High,u)),F=Math.floor(o.pixelFromPrice(w.Low,u))-C,g.strokeStyle=p,g.fillStyle=p,r.inputs["Stop Levels"]?g.globalAlpha=.3:(g.strokeRect(N,C,D,F),g.globalAlpha=+"0.2"),g.fillRect(N,C,D,F),g.globalAlpha=1,I=!1}}if(M){W="Stop Leve",W+="ls",t.G0i(132);var Q=t.B1g(0,33,16,19);z=Math.floor(o.pixelFromBar(O,u.chart)+m/Q)-P,g.strokeStyle=h,g.fillStyle=h,r.inputs[W]?g.globalAlpha=+"0.3":(g.beginPath(),t.B40(19),g.moveTo(t.K73(P,z,2),E),g.lineTo(P,E),t.B40(3),g.lineTo(P,t.B1g(E,U)),t.G0i(19),g.lineTo(t.K73(P,z,2),t.B1g(E,U,t.B40(3))),g.stroke(),g.globalAlpha=.2),t.G0i(18),g.fillRect(P,E,t.B1g(2,z),U),g.globalAlpha=1}I&&(g.strokeStyle=p,g.fillStyle=p,r.inputs["Stop Levels"]?g.globalAlpha=.3:(g.strokeRect(N,C,D,F),g.globalAlpha=.2),g.fillRect(N,C,D,F),g.globalAlpha=1),(M||I)&&(r.inputs["Stop Levels"]&&(g.setLineDash&&g.setLineDash([+"2",2]),g.lineWidth=2,g.strokeStyle=d,X=Math.floor(o.pixelFromBar(O-1,u.chart)+m/2),v&&(g.beginPath(),g.moveTo(X,v),g.lineTo(M?P+2*z:N+D,v),g.stroke()),g.setLineDash&&g.setLineDash([]),g.lineWidth=+"1"),M=!{},I=!1),o.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Darvas:{name:a,underlay:!!{},calculateFN:i.Studies.calculateDarvas,seriesFN:i.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close",e],"Ghost Boxes":!!{},"Stop Levels":![],"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:n},customRemoval:!!{},attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!![]}}}})):console.error("darvasBox feature requires first activating studies feature.")};yd=b=>{ft.c5Q();var t,i,n,e,a;t="un",t+="defi",t+="ne",t+="d",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(n="m",n+="a",e="f",e+="iel",e+="d",a="Detrended Price ",a+="Oscillator",i.Studies.calculateDetrendedPrice=function(o,r){var c,l,s,d,h,p,u,g,f;if(c="M",c+="A",l="fi",l+="eld",s=r.chart.scrubbed,s.length<r.days+1){r.error=!0;return}d=r.inputs.Field,(!d||d==l)&&(d="Close"),h=Math.floor(r.days/2+1),i.Studies.MA(r.inputs["Moving Average Type"],r.days,d,-h,c,o,r);for(var w=Math.max(r.days-h-1,r.startFrom-h);w<s.length-h;w++)p="Re",p+="sult",p+=" ",u="M",u+="A",u+=" ",!(w<0)&&(g=s[w][d],g&&typeof g=="object"&&(g=g[r.subField]),f=s[w][u+r.name],(g||g===+"0")&&(f||f===0)&&(ft.G0i(6),s[w][p+r.name]=ft.B1g(g,f)))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Detrended:{name:a,calculateFN:i.Studies.calculateDetrendedPrice,inputs:{Period:"14"-0,Field:e,"Moving Average Type":n}}})):console.error("detrended feature requires first activating studies feature.")};qd=b=>{var t;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(t.Studies.calculateDisparity=function(i,n){var e,a,o,r,c,l,s,d;if(e="M",e+="oving Av",e+="erage Typ",e+="e",a="C",a+="l",a+="os",a+="e",o="f",o+="i",o+="e",o+="ld",r=n.chart.scrubbed,r.length<n.days+1){n.error=!0;return}c=n.inputs.Field,(!c||c==o)&&(c=a),t.Studies.MA(n.inputs[e],n.days,c,0,"_MA",i,n);for(var h=Math.max(n.startFrom,n.days-1);h<r.length;h++)if(l="Resul",l+="t ",s="_",s+="M",s+="A",s+=" ",!!r[h]&&(d=r[h][s+n.name],d)){ft.B40(17);var p=ft.K73(20,7,0,21,7);r[h][l+n.name]=+"100"*(r[h][c]/d-p)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:"14"^0,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")};wd=b=>{var t=ft,i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.c5Q(),i.Studies?(i.Studies.calculateEaseOfMovement=function(n,e){t.c5Q();var a,o,r,c,l,s,d,h,p,u;if(a=e.chart.scrubbed,a.length<e.days){o=733408358,r=1545555072,c=2;for(var g=1;t.h3u(g.toString(),g.toString().length,+"28185")!==o;g++){e.error=!{};return}if(t.J3W(c.toString(),c.toString().length,75475)!==r){e.error=!!{};return}}for(var f=Math.max(1,e.startFrom);f<a.length;f++){l="_E",l+="OM1 ",t.G0i(133);var w=t.K73(0,4,13,15);s=(a[f].High+a[f].Low)/w,t.G0i(134);var v=t.B1g(10,18,10,1,19);d=(a[f-v].High+a[f-+"1"].Low)/+"2",t.G0i(6),h=t.K73(s,d),p=a[f].Volume/("100000000"-0)/(a[f].High-a[f].Low),t.B40(12),u=t.K73(p,h),isFinite(u)?a[f]["_EOM1 "+e.name]=u:a[f][l+e.name]=NaN}i.Studies.MA(e.inputs["Moving Average Type"],e.days,"_EOM1 "+e.name,0,"Result",n,e)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:i.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")};kd=b=>{var t=ft,i;t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateEhlerFisher=function(n,e){var a,o,r,c,l,s;function d(v,m){var q,x,y;q=Number.MAX_VALUE,t.B40(5);var k=t.K73(4,3,0);x=Number.MAX_VALUE*k,t.S0g();for(var S=m-v+1;S<=m;S++){t.G0i(9);var A=t.B1g(1,3,0);y=(a[S].High+a[S].Low)/A,q=Math.min(q,y),x=Math.max(x,y)}return[q,x]}if(t.S0g(),a=e.chart.scrubbed,a.length<e.days+1){e.error=!![];return}if(o=0,e.startFrom>+"1"){t.B40(73);var h=t.K73(46,17,9,12);o=a[e.startFrom-h]["_n "+e.name]}for(var p=e.startFrom;p<a.length&&(r="EF Trigger",r+=" ",c=a[p],!c.futureTick);p++){if(p<e.days-1){c["EF "+e.name]=c["EF Trigger "+e.name]=o;continue}l=d(e.days,p),t.G0i(9);var u=t.B1g(8,10,0);o=.33*u*(((a[p].High+a[p].Low)/2-l[0])/Math.max(1e-6,l["1"<<0]-l[+"0"])-.5)+.67*o,o>("0"|0)?o=Math.min(o,.9999):o<0&&(o=Math.max(o,-.9999)),s=p?a[p-+"1"]["EF "+e.name]:0,t.B40(135);var g=t.B1g(17,15,13,610,15);t.G0i(46);var f=t.B1g(3,4);t.B40(30);var w=t.B1g(66,7,4,5,11);c["EF "+e.name]=.5*Math.log((g+o)/(f-o))+"0.5"*w*s,c[r+e.name]=s,c["_n "+e.name]=o}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:i.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")};Cd=b=>{var t=ft,i,n,e;i="un",t.S0g(),i+="def",i+="ined",n=typeof _CIQ!==i?_CIQ:b.CIQ,n.Studies?(e="#",e+="D",e+="D3E3",e+="9",n.Studies.calculateElderImpulse=function(a,o){var r,c,l,s,d,h,p,u,g;r="_",r+="M",r+="A",c=o.chart.scrubbed,l=o.outputs.Bullish,s=o.outputs.Bearish,d=o.outputs.Neutral,n.Studies.MA("exponential",13,"Close",0,r,a,o),o.macd=new n.Studies.StudyDescriptor("_"+o.name,"macd",o.panel),o.macd.chart=o.chart,o.macd.days=o.days,o.macd.startFrom=o.startFrom,o.macd.inputs={"Fast MA Period":12,"Slow MA Period":+"26","Signal Period":9},o.macd.outputs={_MACD:null,_Signal:null},n.Studies.calculateMACD(a,o.macd);for(var f=o.startFrom;f<c.length;f++)p="_",p+="his",p+="t",u="_M",u+="A ",g="_",g+="MA",g+=" ",f===0?h=d:c[f][g+o.name]>c[f-1]["_MA "+o.name]&&c[f]["_"+o.name+"_hist"]>c[f-1]["_"+o.name+"_hist"]?h=l:c[f][u+o.name]<c[f-1]["_MA "+o.name]&&c[f]["_"+o.name+p]<c[f-1]["_"+o.name+"_hist"]?h=s:h=d,c[f]["Result "+o.name]=h},n.Studies.calculateElderRay=function(a,o){var r,c;if(r=o.chart.scrubbed,r.length<o.days){o.error=!0;return}n.Studies.MA("exponential",o.days,"Close",0,"_EMA",a,o);for(var l=Math.max(o.startFrom,o.days-("1"|1));l<r.length;l++)c="_",c+="h",c+="is",c+="t1",r[l][o.name+c]=r[l].High-r[l]["_EMA "+o.name],r[l][o.name+"_hist2"]=r[l].Low-r[l]["_EMA "+o.name];t.S0g(),o.outputMap={},o.outputMap[o.name+"_hist1"]="",o.outputMap[o.name+"_hist2"]=""},n.Studies.calculateElderForce=function(a,o){var r,c,l,s,d,h;if(r=o.chart.scrubbed,r.length<o.days){o.error=!0;return}for(var p=Math.max(1,o.startFrom);p<r.length;p++){t.B40(136);var u=t.B1g(13,1093,12,7);r[p]["_EF1 "+o.name]=r[p].Volume*(r[p].Close-r[p-u].Close)}t.G0i(0),c=-t.B1g("38612491",0),l=1414091845,s=+"2";for(var g=1;t.J3W(g.toString(),g.toString().length,67370)!==c;g++)d="_",d+="E",d+="F1",d+=" ",n.Studies.MA("Result",o.days,d%o.name,1,"_EF1 ",a,o),s+=2;t.h3u(s.toString(),s.toString().length,+"48435")!==l&&(h="R",h+="esult",n.Studies.MA("exponential",o.days,"_EF1 "+o.name,0,h,a,o))},n.Studies.initElderImpulse=function(a,o,r,c,l,s){var d;return d=n.Studies.initializeFN(a,o,r,c,l,s),l.calculateOnly||(a.chart.customChart={chartType:"colored_bar",colorFunction:function(h,p,u){var g,f;return g="objec",g+="t",f=p["Result "+d.name],t.S0g(),f&&typeof f==g&&(f=f.color),f}},a.setMainSeriesRenderer()),d},n.Studies.displayElderForce=function(a,o,r){var c,l,s,d,h;c="Resul",c+="t",c+=" ",n.Studies.displaySeriesAsLine(a,o,r),l=n.Studies.determineColor(o.outputs.Result),s=a.panels[o.panel],d=o.getYAxis(a),h={skipTransform:s.name!=o.chart.name,panelName:o.panel,band:c+o.name,threshold:0,color:l,yAxis:d},!o.highlight&&a.highlightedDraggable&&(h.opacity=.3),h.direction=1,n.preparePeakValleyFill(a,h),h.direction=-1,n.preparePeakValleyFill(a,h)},n.Studies.displayElderRay=function(a,o,r){var c,l,s,d,h,p,u,g,f,w,v;c=a.panels[o.panel],l=o.getContext(a),s=o.getYAxis(a),d=a.pixelFromPrice(0,c,s),t.B40(137);var m=t.B1g(3,13,2,12);h=a.layout.candleWidth-m,h<2&&(t.B40(27),h=t.B1g(0,"1")),a.canvasColor("stx_histogram"),p=l.fillStyle,o.underlay||(l.globalAlpha=1),a.startClip(o.panel),!o.highlight&&a.highlightedDraggable&&(l.globalAlpha*=.3);for(var q=0;q<r.length;q++)u="_",u+="h",u+="i",u+="st1",g="_",g+="h",g+="i",g+="st1",f="_",f+="his",f+="t2",w="_",w+="h",w+="ist2",v=r[q],v&&(v.candleWidth&&(h=Math.floor(Math.max(1,v.candleWidth-2))),v[o.name+"_hist1"]>0&&x(q,0,"Elder Bull Power","_hist1"),v[o.name+w]<0&&x(q,0,"Elder Bear Power",f),v[o.name+g]<0&&x(q,.1,"Elder Bull Power",u),v[o.name+"_hist2"]>0&&x(q,.1,"Elder Bear Power","_hist2"));a.endClip();function x(y,k,S,A){l.fillStyle=n.Studies.determineColor(o.outputs[S]),l.fillRect(Math.floor(a.pixelFromBar(y,c.chart)-h/+"2"+h*k),Math.floor(d),Math.floor(h*(+"1"-2*k)),Math.floor(a.pixelFromPrice(v[o.name+A],c,s)-d))}l.fillStyle=p},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:n.Studies.calculateElderForce,seriesFN:n.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:n.Studies.displayElderRay,calculateFN:n.Studies.calculateElderRay,centerline:"0"-0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:n.Studies.calculateElderImpulse,initializeFN:n.Studies.initElderImpulse,seriesFN:null,customRemoval:!![],underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:e,Neutral:"#5F7CB8"},removeFN:function(a,o){a.chart.customChart=null,a.setMainSeriesRenderer()}}})):console.error("elder feature requires first activating studies feature.")};Sd=b=>{var t=ft,i,n,e,a;t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(e="Fractal Cha",e+="os Bands",a="Fr",a+="a",a+="ctal C",a+="haos Oscillator",i.Studies.calculateFractalChaos=function(o,r){var c,l,s,d,h,p,u,g,f;if(c=r.chart.scrubbed,l=0,s=0,t.c5Q(),d=0,r.startFrom&&r.type=="Fractal Chaos Bands"){t.G0i(138);var w=t.K73(16,1,10,10,3);l=c[r.startFrom-w]["Fractal High "+r.name],t.G0i(139);var v=t.K73(0,9,14,125,1);s=c[r.startFrom-v]["Fractal Low "+r.name]}for(var m=Math.max(4,r.startFrom);m<c.length&&!c[m].futureTick;m++){for(h=!isNaN(c[m].High),p=!isNaN(c[m].Low),(h||p)&&(c[m]["Result "+r.name]=0),d=+"0",u=0;u<=m&&!(!c[m-u]||c[m-u].High>c[m-2].High||u<2&&c[m-u].High==c[m-2].High);u++)if(c[m-u].High<c[m-2].High&&d++,d==4){l=c[m-2].High;break}for(r.type=="Fractal Chaos Bands"?h&&(c[m]["Fractal High "+r.name]=l>0?l:null):d==4&&(g="Re",g+="sult",g+=" ",c[m][g+r.name]=1),d=0,u=0;u<=m&&!(!c[m-u]||c[m-u].Low<c[m-2].Low||u<2&&c[m-u].Low==c[m-2].Low);u++)if(c[m-u].Low>c[m-2].Low&&d++,d==4){s=c[m-"2"*1].Low;break}r.type=="Fractal Chaos Bands"?p&&(c[m]["Fractal Low "+r.name]=s>0?s:null):d==4&&(f="Res",f+="ult ",c[m][f+r.name]=-1)}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Fractal Chaos":{name:a,range:"-1 to 1",calculateFN:i.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:e,overlay:!!{},calculateFN:i.Studies.calculateFractalChaos,seriesFN:i.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):(n="fractalChaos feature requires",n+=" first activating studies feature.",console.error(n))};Dd=b=>{var t,i,n,e,a,o,r,c;t="und",t+="efined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(n="Vertical Ho",n+="rizo",n+="ntal Filte",n+="r",e="au",e+="to",a="a",a+="u",a+="t",a+="o",o="Lowest Low",o+=" ",o+="Value",r="Hig",r+="hest H",r+="igh Value",c="a",c+="ut",c+="o",i.Studies.calculateMaxHighMinLow=function(l,s){var d=ft,h,p,u,g,f,w,v,m,q,x,y,k,S,A;if(h="L",h+="o",h+="w ",h+="Period",p="Low Pe",p+="riod",u="High",u+=" Period",g=s.chart.scrubbed,f=s.days,w=s.days,s.inputs[u]&&(f=s.inputs["High Period"]),s.inputs[p]&&(w=s.inputs[h]),g.length<Math.max(f,w)+1){s.error=!0;return}v=Number.MAX_VALUE,d.B40(124);var _=d.K73(16,1,17);if(m=Number.MAX_VALUE*_,s.startFrom>1){for(q=1;q<f;q++)s.startFrom-q>=0&&(m=Math.max(m,g[s.startFrom-q].High));for(q=+"1";q<w;q++)s.startFrom-q>=0&&(v=Math.min(v,g[s.startFrom-q].Low))}for(var T=Math.max(0,s.startFrom-1);T<g.length;T++){if(x="Wi",x+="ll",x+="iams %R",y="VT HZ Fi",y+="lter",k="L",k+="L",k+="V",m=Math.max(m,g[T].High),v=Math.min(v,g[T].Low),T>=f&&g[T-f].High==m)for(m=g[T].High,q=1;q<f;q++)m=Math.max(m,g[T-q].High);if(T>=w&&g[T-w].Low==v)for(v=g[T].Low,q=1;q<w;q++)v=Math.min(v,g[T-q].Low);if(S=0,s.type=="HHV")S=m;else if(s.type==k)S=v;else if(s.type=="Donchian Width")d.B40(6),S=d.K73(m,v);else if(s.type=="GAPO"||s.type=="Gopala")S=Math.log(m-v)/Math.log(w);else if(s.type==y){d.G0i(6),S=d.B1g(m,v),g[T]["_MHML "+s.name]=S;continue}else if(s.type==x){d.B40(140);var P=d.K73(8,5,500,8);S=P*(m-g[T].Close)/(m-v),g[T]["Result "+s.name]=S;continue}if(T==g.length-("1"-0))break;g[T+1].futureTick||(A="D",A+="onchian Channel",s.type==A?(d.G0i(3),g[d.B1g(T,1)]["Donchian High "+s.name]=m,d.G0i(39),g[d.K73(T,"1")]["Donchian Low "+s.name]=v,d.B40(3),g[d.B1g(T,1)]["Donchian Median "+s.name]=d.K73(v,m,2,d.B40(8))):(d.G0i(39),g[d.K73(T,"1")]["Result "+s.name]=S))}},i.Studies.calculateVerticalHorizontalFilter=function(l,s){var d,h,p,u;if(d=s.chart.scrubbed,d.length<s.days+1){s.error=!0;return}s.mhml=new i.Studies.StudyDescriptor(s.name,s.type,s.panel),s.mhml.chart=s.chart,s.mhml.days=s.days,s.mhml.startFrom=s.startFrom,s.mhml.inputs={},s.mhml.outputs={_MHML:null},i.Studies.calculateMaxHighMinLow(l,s.mhml),ft.G0i(0),h=ft.B1g("0",0),p=[];for(var g=Math.max(1,s.startFrom-s.days);g<d.length;g++)u=Math.abs(d[g].Close-d[g-1].Close),p.push(u),h+=u,p.length==s.days&&(d[g]["Result "+s.name]=d[g]["_MHML "+s.name]/h,h-=p.shift())},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!![],calculateFN:i.Studies.calculateMaxHighMinLow,seriesFN:i.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":c,"Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:i.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:i.Studies.calculateMaxHighMinLow},HHV:{name:r,calculateFN:i.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:o,calculateFN:i.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:i.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:a,studyOverSoldValue:-80,studyOverSoldColor:e}}},"VT HZ Filter":{name:n,calculateFN:i.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(l,s){var d,h;ft.c5Q(),d=s.chart.scrubbed;for(var p=s.startFrom;p<d.length;p++)h="Resu",h+="lt ",d[p][h+s.name]=d[p].High-d[p].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")};Ad=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d;if(i="und",i+="ef",i+="ined",n=typeof _CIQ!==i?_CIQ:b.CIQ,!n.Studies)console.error("ichimoku feature requires first activating studies feature.");else{e="#80800",e+="0",n.Studies.calculateIchimoku=function(p,u){var g,f,w,v,m,q,x,y,k,S,A,_,T;g="La",g+="gging S",g+="pan Period",f="Base Line",f+=" Pe",f+="riod",w=u.chart.scrubbed,v={Base:Number(u.inputs[f]),Conv:Number(u.inputs["Conversion Line Period"]),LeadB:Number(u.inputs["Leading Span B Period"]),Lag:Number(u.inputs[g])};function P(M,I){var L,O;L=Number.MAX_VALUE,t.G0i(65);var B=t.K73(13,19,23,10);O=Number.MAX_VALUE*B;for(var R=I-M+1;R<=I;R++)R<0||(L=Math.min(L,w[R].Low),O=Math.max(O,w[R].High));return[L,O]}for(m=u.startFrom;m<w.length;m++)if(x="Lagging",x+=" Span ",!!w[m]){q=P(v.Conv,m),t.G0i(106);var E=t.B1g(0,7,8);t.G0i(3);var z=t.B1g(0,2);w[m]["Conversion Line "+u.name]=(q[E]+q[0])/z,q=P(v.Base,m),t.B40(141);var U=t.B1g(12,868,5,12,6);t.B40(7);var N=t.B1g(3,6,10,17);w[m]["Base Line "+u.name]=(q[U]+q[0])/N,!(m<v.Lag)&&(w[m-v.Lag][x+u.name]=w[m].Close)}for(y=[],m=Math.max(0,u.startFrom-v.Base);m<w.length;m++){q=P(v.LeadB,m),t.G0i(142);var C=t.K73(5,8,9,4);k=(w[m]["Conversion Line "+u.name]+w[m]["Base Line "+u.name])/C,t.G0i(65);var D=t.B1g(17,5,8,13);t.G0i(46);var F=t.B1g(15,17);S=(q[D]+q[0])/F,w[m+v.Base]?(w[m+v.Base]["Leading Span A "+u.name]=k,w[m+v.Base]["Leading Span B "+u.name]=S):(A="Leading Span ",A+="B ",_="Le",_+="adi",_+="ng Span A ",T={},T[_+u.name]=k,T[A+u.name]=S,y.push(T))}u.appendFutureTicks(p,y)},n.Studies.displayIchimoku=function(p,u,g){var f,w,v,m,q,x,y;f="Leading Span A "+u.name,w="Leading Span B "+u.name,v=n.Studies.determineColor(u.outputs[u.outputMap[f]]),m=n.Studies.determineColor(u.outputs[u.outputMap[w]]),q=p.panels[u.panel],x=u.getYAxis(p),y={topBand:f,bottomBand:w,topColor:v,bottomColor:m,skipTransform:q.name!=u.chart.name,topAxis:x,bottomAxis:x,opacity:.3},!u.highlight&&p.highlightedDraggable&&(y.opacity*=.3),n.fillIntersecting(p,u.panel,y),n.Studies.displaySeriesAsLine(p,u,g)},t.B40(6),a=t.K73("436342221",0),t.G0i(0),o=-t.K73("1403582182",64),r=2;for(var h=1;t.h3u(h.toString(),h.toString().length,"13709"|8)!==a;h++)c="#",c+="FF",c+="00",c+="00",n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Leading Span B",overlay:!{},calculateFN:n.Studies.calculateIchimoku,seriesFN:n.Studies.displayIchimoku,inputs:{"Conversion Line Period":2,"Base Line Period":82,"Leading Span B Period":49,"Lagging Span Period":59},outputs:{"Conversion Line":"#00FF00","Base Line":c,"Leading Span A":"Leading Span B","Leading Span B":"Leading Span B","Lagging Span":"Conversion Line Period"}}}),r+=+"2";t.h3u(r.toString(),r.toString().length,77141)!==o&&(l="Leading S",l+="pan B",s="Le",s+="ading Spa",s+="n ",s+="B",d="L",d+="e",d+="ading Span B",n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Ichimoku Clouds":{name:d,overlay:!1,calculateFN:n.Studies.calculateIchimoku,seriesFN:n.Studies.displayIchimoku,inputs:{"Conversion Line Period":2,"Base Line Period":82,"Leading Span B Period":49,"Lagging Span Period":59},outputs:{"Conversion Line":"#00FF00","Base Line":"#FF0000","Leading Span A":s,"Leading Span B":l,"Lagging Span":"Conversion Line Period"}}})),n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:n.Studies.calculateIchimoku,seriesFN:n.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":+"52","Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":e}}})}};Td=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="Intraday Mo",i+="mentum Index",t.Studies.calculateIntradayMomentum=function(n,e){var a=ft,o,r,c,l,s,d,h;if(o=e.chart.scrubbed,r=e.days,o.length<r+1){e.error=!0;return}if(c=0,a.G0i(0),l=a.K73("0",64),e.startFrom>"1">>0){s="_",s+="to",s+="tUp",s+=" ",a.G0i(48);var p=a.K73(2,0,6,3);c=o[e.startFrom-p][s+e.name],a.B40(70);var u=a.K73(6,4,12,35);l=o[e.startFrom-u]["_totDn "+e.name]}for(var g=e.startFrom;g<o.length;g++)d=o[g].Close-o[g].Open,d>0?c+=d:l-=d,g>=r&&(h=o[g-r].Close-o[g-r].Open,h>"0"<<64?c-=h:l+=h),a.B40(143),o[g]["Result "+e.name]=a.K73(l,100,c,c),o[g]["_totUp "+e.name]=c,o[g]["_totDn "+e.name]=l},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:i,calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("intradayMomentum feature requires first activating studies feature.")};_d=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="e",i+="m",i+="a",t.Studies.calculateKeltner=function(n,e){t.Studies.MA(e.inputs["Moving Average Type"],e.days,"Close",0,"MA",n,e),t.Studies.calculateStudyATR(n,e),t.Studies.calculateGenericEnvelope(n,e,e.inputs.Shift,"MA "+e.name,"ATR "+e.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!!{},seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":i,"Channel Fill":!![]},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")};Fd=b=>{var t=ft,i,n,e,a,o;if(i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.S0g(),i.Studies)i.Studies.calculateKlinger=function(c,l){var s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_;if(s="ex",s+="ponential",d="Long C",d+="y",d+="cle",h=l.chart.scrubbed,p=Number(l.inputs["Short Cycle"]),u=Number(l.inputs[d]),h.length<Math.max(p,u)+1){g=1696731475,t.G0i(35),f=t.B1g("262724266",0),w=2;for(var T=1;t.h3u(T.toString(),T.toString().length,65542)!==g;T++){l.error=![];return}if(t.h3u(w.toString(),w.toString().length,61114)!==f){l.error=!0;return}l.error=!![];return}for(v=l.name+"_hist",m="Klinger "+l.name,q="KlingerSignal "+l.name,x="_SV "+l.name,y="_EMA-S "+l.name,k="_EMA-L "+l.name,S=Math.max(+"1",l.startFrom);S<h.length;S++)A="h",A+="lc",A+="/",A+="3",_=h[S].Volume,h[S]["hlc/3"]<h[S-1][A]&&(_*=-1),_&&(h[S][x]=_);for(i.Studies.MA("exponential",p,x,0,"_EMA-S",c,l),i.Studies.MA("exponential",u,x,0,"_EMA-L",c,l),S=Math.max(u,l.startFrom);S<h.length&&!(h[S].futureTick||h[S][y]===null||h[S][k]===null);S++)h[S][m]=h[S][y]-h[S][k];for(i.Studies.MA(s,Number(l.inputs["Signal Periods"]),m,0,"KlingerSignal",c,l),S=l.startFrom;S<h.length;S++)h[S][v]=h[S][m]-h[S][q];l.outputMap[v]=""},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:i.Studies.displayHistogramWithSeries,calculateFN:i.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}});else{n=-844752949,e=127692950,a=+"2";for(var r=1;t.J3W(r.toString(),r.toString().length,20788)!==n;r++)o="klinger feature requir",o+="es first activati",o+="ng studies feature.",console.error(o),a+=2;t.h3u(a.toString(),a.toString().length,57883)!==e&&console.error("")}};Md=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d;t.G0i(18),i=-t.B1g("842715681",1),n=-668320824,e=2;for(var h=1;t.J3W(h.toString(),h.toString().length,51560)!==i;h++)a=typeof _CIQ!="undefined"?_CIQ:b.CIQ,e+=2;t.h3u(e.toString(),e.toString().length,88014)!==n&&(a=~_CIQ!=""?_CIQ:b.CIQ),a.Studies?(o="au",o+="t",o+="o",r="a",r+="u",r+="t",r+="o",c="Linear Reg ",c+="Forecast",l="Ti",l+="m",l+="eSeries",s="T",s+="imeSeries",d="ts",d+="m",d+="a",a.Studies.prettify["time series"]=d,a.Studies.movingAverage.conversions.tsma="time series",a.Studies.movingAverage.translations["time series"]="Time Series",a.Studies.movingAverage.typeMap.tsma=s,a.Studies.movingAverage.typeMap["time series"]=l,a.Studies.calculateMovingAverageTimeSeries=function(p,u){var g,f,w,v,m,q,x,y,k;u.ma=new a.Studies.StudyDescriptor(u.name,"ma",u.panel),u.ma.chart=u.chart,t.c5Q(),u.ma.days=u.days,u.ma.startFrom=u.startFrom,u.ma.inputs=u.inputs,a.Studies.calculateLinearRegressionIndicator(p,u.ma),g=u.name;for(var S in u.outputs)t.G0i(53),g=t.K73(S," ",g);f=parseInt(u.inputs.Offset,10),isNaN(f)&&(f=0),w=u.chart.scrubbed,v=f;for(var A=u.startFrom-1;A>=+"0";A--)if(m=w[A][g],!(!m&&m!=="0"<<96)){if(v>0){v--;continue}break}for(q=[],A++;A<w.length;A++)x=w[A],A+f>=0&&(y="Forec",y+="a",y+="st ",A+f<w.length?(t.G0i(3),w[t.B1g(A,f)][g]=x[y+u.name]):(k={},k[g]=x["Forecast "+u.name],q.push(k)));u.appendFutureTicks(p,q)},a.Studies.calculateLinearRegressionIndicator=function(p,u){var g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U;if(g="Cl",g+="ose",f="f",f+="iel",f+="d",w=u.chart.scrubbed,w.length<u.days+1){u.error=!0;return}v=u.inputs.Field,(!v||v==f)&&(v=g),t.G0i(36),t.S0g();var N=t.B1g(20,27,6,8);m=u.days*(u.days+N)/+"2",q=Math.pow(m,2),t.B40(144);var C=t.K73(7,2,4,3);if(x=m*(2*u.days+C)/+"3",y=0,k=0,S=0,u.startFrom){t.B40(59);var D=t.K73(14,12,8,177,0);A=w[u.startFrom-D]["_sums "+u.name],A&&(k=A[0],y=A[1],S=A[2])}for(var F=u.startFrom;F<w.length;F++)if(_="I",_+="ntercept ",T=w[F][v],T&&typeof T=="object"&&(T=T[u.subField]),!(!T&&T!=="0"*1)&&(k+=u.days*T-y,y+=T,S+=Math.pow(T,2),!(F<u.days-1))){if(F>u.days-1){if(P=w[F-u.days][v],P&&typeof P=="object"&&(P=P[u.subField]),!P&&P!==+"0")continue;y-=P,S-=Math.pow(P,2)}E=(u.days*k-m*y)/(u.days*x-q),w[F]["Slope "+u.name]=E,z=(y-E*m)/u.days,w[F][_+u.name]=z,w[F]["Forecast "+u.name]=z+E*u.days,t.B40(145);var M=t.K73(34,1,18,14,2);U=(u.days*x-q)/(u.days*S-Math.pow(y,M)),t.B40(146),w[F]["RSquared "+u.name]=t.K73(E,E,U),w[F]["_sums "+u.name]=[k,y,S]}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Lin Fcst":{name:c,overlay:!![],calculateFN:a.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:r}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!!{},calculateFN:a.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:a.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:o}},"LR Slope":{name:"Linear Reg Slope",calculateFN:a.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:a.Studies.calculateLinearRegressionIndicator,inputs:{Period:"14"-0,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")};Pd=b=>{var t=ft,i,n,e,a,o,r;if(t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies)o="#F",o+="F0",o+="000",r="a",r+="u",r+="t",r+="o",i.Studies.calculateMACD=function(l,s){var d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;if(d="Sig",d+="n",d+="a",d+="l",h="_M",h+="AC",h+="D1",t.S0g(),p="fiel",p+="d",u=s.chart.scrubbed,g=s.inputs,f=s.name,s.macd1Days||(s.macd1Days=parseFloat(g["Fast MA Period"])),s.macd2Days||(s.macd2Days=parseFloat(g["Slow MA Period"])),s.signalDays||(s.signalDays=parseFloat(g["Signal Period"])),s.days||(s.days=Math.max(s.macd1Days,s.macd2Days,s.signalDays)),u.length<s.days+("1"^0)){s.error=!0;return}for(w=s.inputs.Field,(!w||w==p)&&(w="Close"),v=g["Moving Average Type"],v||(v="exponential"),i.Studies.MA(v,s.macd1Days,w,0,h,l,s),i.Studies.MA(v,s.macd2Days,w,0,"_MACD2",l,s),x=Math.max(s.startFrom,s.days-1),m=x;m<u.length;m++)y="_MACD2",y+=" ",k="_MAC",k+="D1",k+=" ",S="_MA",S+="C",S+="D1",S+=" ",q=u[m],(q[S+f]||q[k+f]==="0">>64)&&(q[y+f]||q["_MACD2 "+f]===0)&&(t.G0i(3),q[t.B1g("MACD ",f)]=q["_MACD1 "+f]-q["_MACD2 "+f]);for(A=g["Signal MA Type"],A||(A="exponential"),i.Studies.MA(A,s.signalDays,"MACD "+f,0,d,l,s),t.G0i(3),_=t.B1g(f,"_hist"),m=x;m<u.length;m++)T="Si",T+="gna",T+="l",T+=" ",P="S",P+="ig",P+="nal",P+=" ",q=u[m],t.B40(3),E=q[t.K73(P,f)],!(!E&&E!==0)&&(q[_]=q["MACD "+f]-q[T+f]);s.outputMap[_]=""},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:i.Studies.calculateMACD,seriesFN:i.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:r,Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":o}}});else{n=-1222708762,e=1780959326,a=2;for(var c=1;t.J3W(c.toString(),c.toString().length,75363)!==n;c++)console.error("macd feature requires first activating studies feature."),a+=2;t.J3W(a.toString(),a.toString().length,8308)!==e&&console.error("")}};Id=b=>{var t=ft,i,n,e;i="undefi",i+="ned",n=typeof _CIQ!==i?_CIQ:b.CIQ,t.c5Q(),n.Studies?(e="M",e+="ass In",e+="dex",n.Studies.calculateMassIndex=function(a,o){var r,c,l,s,d,h;if(r="_",r+="t",r+="o",r+="tal ",c="_EM",c+="A2",t.c5Q(),l=o.chart.scrubbed,l.length<Math.max(+"9",o.days+1)){o.error=!![];return}for(var p=o.startFrom;p<l.length;p++)l[p]["_High-Low "+o.name]=l[p].High-l[p].Low;if(n.Studies.MA("exponential",9,"_High-Low "+o.name,0,"_EMA",a,o),n.Studies.MA("exponential",9,"_EMA "+o.name,0,c,a,o),s=0,l[o.startFrom-1]&&l[o.startFrom-("1">>64)]["_total "+o.name]){t.G0i(147);var u=t.K73(3,6,18,1);s=l[o.startFrom-u][r+o.name]}for(var g=Math.max(17,o.startFrom);g<l.length;g++){if(d="_total",d+=" ",s+=l[g]["_EMA "+o.name]/l[g]["_EMA2 "+o.name],g>=("17">>32)+o.days-1){h="_",h+="EM",h+="A",h+=" ",l[g]["Result "+o.name]=s,t.B40(71);var f=t.B1g(4,10,14,10,11);s-=l[g-o.days+ +"1"][h+o.name]/l[g-o.days+f]["_EMA2 "+o.name]}l[g][d+o.name]=s}},n.Studies.displayMassIndex=function(a,o,r){var c,l,s,d,h;c="Bulg",c+="e Thr",c+="eshold",n.Studies.displaySeriesAsLine(a,o,r),t.c5Q(),l=o.inputs[c],a.panels[o.panel],s=o.getYAxis(a),d=n.Studies.determineColor(o.outputs.Result),h={skipTransform:a.panels[o.panel].name!=o.chart.name,panelName:o.panel,band:"Result "+o.name,threshold:l,direction:1,color:d,yAxis:s,opacity:.3},!o.highlight&&a.highlightedDraggable&&(h.opacity*=.3),n.preparePeakValleyFill(a,h),n.Studies.drawHorizontal(a,o,null,l,s,d)},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"Mass Idx":{name:e,seriesFN:n.Studies.displayMassIndex,calculateFN:n.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":"27"-0},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")};Ed=b=>{var t,i,n;t="un",t+="d",t+="ef",t+="ined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(n="aut",n+="o",i.Studies.calculateMoneyFlowIndex=function(e,a){var o=ft,r,c,l,s,d,h,p,u,g,f,w,v,m;if(r="_",r+="c",r+="u",r+="mMF ",c=a.chart.scrubbed,c.length<a.days+1){a.error=!0;return}o.G0i(6),l=o.K73("0",0),s=0,d=c[a.startFrom-+"1"],h="_rawMF "+a.name,p=r+a.name,u="Result "+a.name,d&&d[p]&&(l=d[p][+"0"],s=d[p][1]);for(var q=a.startFrom;q<c.length;q++)g="hl",g+="c/3",f=c[q][g],q>0&&!c[q].futureTick&&(o.G0i(6),w=c[o.K73(q,1)]["hlc/3"],v=f*c[q].Volume,f>w?l+=v:f<w?(o.G0i(6),v*=-o.K73("1",0),s-=v):v=0,q>a.days&&(m=c[q-a.days][h],m>0?l-=m:s+=m,s===0?c[q][u]=100:c[q].Volume&&(o.G0i(148),c[q][u]=o.K73(l,100,1,s,100))),c[q][h]=v,c[q][p]=[l,s])},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:i.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:n,studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("moneyFlow feature requires first activating studies feature.")};Ld=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d,h,p,u,g;t.S0g(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(n="f",n+="ield",e="High Low ",e+="Band",e+="s",a="#",a+="00DD00",o="m",o+="a",r="a",r+="u",r+="t",r+="o",c="aut",c+="o",l="m",l+="a",s="Moving",s+=" Average Envelope",d="T",d+="r",d+="ipleExponential",h="H",h+="u",h+="l",h+="l",p="3-expon",p+="ent",p+="ial",u="t",u+="ema",g="de",g+="ma",i.Studies.prettify=i.extend({"2-exponential":g,"3-exponential":u,hull:"hma"},i.Studies.prettify),i.extend(i.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:p},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:h,dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":d}}),i.Studies.calculateMovingAverageHull=function(f,w){var v,m,q,x,y,k,S,A,_,T,P,E;for(v="_",v+="MM",v+="A",v+=" ",m="Cl",m+="ose",q="f",q+="i",q+="e",q+="ld",x=w.chart.scrubbed,y=w.inputs.Field,(!y||y==q)&&(y=m),i.Studies.MA("wma",w.days,y,0,"_WMA1",f,w),i.Studies.MA("wma",Math.ceil(w.days/2),y,0,"_WMA2",f,w),k=w.startFrom-1;k>=0&&(S=x[k][y],S&&typeof S=="object"&&(S=S[w.subField]),!(S||S===+"0"));k--);for(k++;k<x.length;k++){A="_WMA",A+="1 ",_=x[k],t.B40(11);var z=t.K73(5,1,7);_["_MMA "+w.name]=z*_["_WMA2 "+w.name]-_[A+w.name]}T=parseInt(w.inputs.Offset,10),isNaN(T)&&(t.G0i(0),T=t.K73("0",32)),P=Math.floor(Math.sqrt(w.days)),i.Studies.MA("wma",P,v+w.name,T,"_HMA",f,w),E=w.name;for(var U in w.outputs)t.G0i(53),E=t.K73(U," ",E);for(k=Math.max(w.days+P-1,w.startFrom);k<x.length;k++)x[k][E]=x[k]["_HMA "+w.name]},i.Studies.calculateMovingAverageDoubleExponential=function(f,w){var v,m,q,x,y,k,S,A,_,T,P,E,z;for(v="em",v+="a",m="f",m+="i",m+="el",m+="d",q=w.chart.scrubbed,x=w.inputs.Field,(!x||x==m)&&(x="Close"),i.Studies.MA("ema",w.days,x,0,"_EMA1",f,w),i.Studies.MA(v,w.days,"_EMA1 "+w.name,0,"_EMA2",f,w),y=parseInt(w.inputs.Offset,+"10"),isNaN(y)&&(y=+"0"),A=y,k=w.startFrom-1;k>=0;k--)if(S=q[k][x],S&&typeof S=="object"&&(S=S[w.subField]),!(!S&&S!==0)){if(A>0){A--;continue}break}_=w.name;for(var U in w.outputs)t.G0i(53),_=t.K73(U," ",_);for(T=[],k++;k<q.length;k++)if(!(k<2*(w.days-1))){P=q[k],t.G0i(9);var N=t.K73(48,14,36);E=N*P["_EMA1 "+w.name]-P["_EMA2 "+w.name],k+y>=("0"^0)&&(k+y<q.length?(t.B40(3),q[t.B1g(k,y)][_]=E):(z={},z[_]=E,T.push(z)))}w.appendFutureTicks(f,T)},i.Studies.calculateMovingAverageTripleExponential=function(f,w){var v,m,q,x,y,k,S,A,_,T,P,E,z,U,N;for(v="_E",v+="MA2",v+=" ",m="_EMA",m+="1",q="C",q+="l",q+="os",q+="e",x="fi",x+="eld",y=w.chart.scrubbed,k=w.inputs.Field,(!k||k==x)&&(k=q),i.Studies.MA("ema",w.days,k,+"0",m,f,w),i.Studies.MA("ema",w.days,"_EMA1 "+w.name,0,"_EMA2",f,w),i.Studies.MA("ema",w.days,v+w.name,"0"-0,"_EMA3",f,w),S=parseInt(w.inputs.Offset,10),isNaN(S)&&(S=0),T=S,t.c5Q(),A=w.startFrom-1;A>=0;A--)if(_=y[A][k],_&&typeof _=="object"&&(_=_[w.subField]),!(!_&&_!==0)){if(T>0){T--;continue}break}P=w.name;for(var C in w.outputs)t.B40(53),P=t.K73(C," ",P);for(E=[],A++;A<y.length;A++)if(!(A<3*(w.days-1))){z=y[A],t.G0i(9);var D=t.K73(23,16,10);U=("3"^0)*z["_EMA1 "+w.name]-D*z["_EMA2 "+w.name]+z["_EMA3 "+w.name],A+S>="0">>0&&(A+S<y.length?(t.B40(3),y[t.K73(A,S)][P]=U):(N={},N[P]=U,E.push(N)))}w.appendFutureTicks(f,E)},i.Studies.calculateMAEnvelope=function(f,w){var v,m,q,x,y;v="M",v+="A",m=w.inputs.Field,(!m||m=="field")&&(m="Close"),i.Studies.MA(w.inputs["Moving Average Type"],w.days,m,0,v,f,w),t.c5Q(),q=w.inputs["Shift Type"],x=w.inputs.Shift,q||(q="percent",x=w.inputs["Shift Percentage"]),q=="percent"?(t.B40(149),i.Studies.calculateGenericEnvelope(f,w,t.K73("100",0,x),"MA "+w.name)):q=="points"&&(y="MA",y+=" ",i.Studies.calculateGenericEnvelope(f,w,null,y+w.name,null,Number(x)))},i.Studies.calculateMADev=function(f,w){var v,m,q,x,y,k,S,A,_,T,P,E;if(v="Moving Ave",v+="rage Type",m="Clos",m+="e",q=w.chart.scrubbed,q.length<w.days+1){w.error=!0;return}x=w.inputs.Field,(!x||x=="field")&&(x=m),y=w.inputs["Points Or Percent"],y||(y="Points"),k=w.inputs[v],k||(k="exponential"),i.Studies.MA(k,w.days,x,0,"_MA",f,w),S=w.name+"_hist";for(var z=Math.max(w.startFrom,w.days-1);z<q.length;z++)A="_M",A+="A ",_=q[z],T=_[x],T&&typeof T=="object"&&(T=T[w.subField]),P=_[A+w.name],(P||P===("0"|0))&&(E="Po",E+="in",E+="t",E+="s",y==E?(t.G0i(6),_[S]=t.K73(T,P)):(t.G0i(150),_[S]=t.K73(1,P,100,T)));w.outputMap={},w.outputMap[w.name+"_hist"]=""},i.Studies.calculateGMMA=function(f,w){var v,m,q,x,y;v="Long ",v+="Term",m="Short Ter",m+="m",q=w.chart.scrubbed,t.B40(0),x=[t.K73("3",64),5,8,10,12,t.B1g("15",0,t.B40(6))],y=[30,35,40,+"45",50,60];function k(S){return function(A){t.c5Q(),t.B40(27),i.Studies.MA("ema",A,"Close",t.K73(32,"0"),t.B1g("MA ",A,t.G0i(3)),f,w),w.outputMap["MA "+A+" "+w.name]=S}}if(q.length<x[0]){w.error=!0;return}w.outputMap={},x.forEach(k(m)),y.forEach(k(v))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"MA Env":{name:s,overlay:!!{},seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":l,"Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":c,"MA Env Bottom":r},attributes:{Shift:{min:"0.1"-0,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:i.Studies.calculateMADev,seriesFN:i.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":o,"Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":a,"Decreasing Bar":"#FF0000"}},Guppy:{name:"Guppy Multiple Moving Average",overlay:!0,calculateFN:i.Studies.calculateGMMA,inputs:{},outputs:{"Short Term":"#ea1d2c","Long Term":"#00afed"}},"High Low":{name:e,overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:function(f,w){w.inputs["Moving Average Type"]="triangular",t.c5Q(),i.Studies.calculateMAEnvelope(f,w)},inputs:{Period:10,Field:n,"Shift Percentage":+"5","Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:+"0.1",step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")};Ud=b=>{var t=ft,i,n;i="u",i+="nd",t.S0g(),i+="e",i+="fined",n=typeof _CIQ!==i?_CIQ:b.CIQ,n.Studies?(n.Studies.calculatePSAR=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w;o=a.chart.scrubbed,r=0,c=null,l=!1;function v(){r=0,c=null,t.S0g(),l=!l}if(s=0,d=parseFloat(a.inputs["Minimum AF"]),h=parseFloat(a.inputs["Maximum AF"]),a.startFrom>0){t.G0i(3);var m=t.B1g(0,1);s=o[a.startFrom-m]["Result "+a.name],t.B40(11);var q=t.B1g(16,1,17);p=o[a.startFrom-q]["_state "+a.name],p&&p.length==3&&(r=p[0],c=p[1],t.G0i(35),l=p[t.B1g("2",0)])}for(var x=a.startFrom-1;x<o.length-1;x++)if(!(x<0)){if(o[x].futureTick)break;u=s,l?((!c||c<o[x].High)&&(c=o[x].High,t.B40(3),r=Math.min(t.K73(r,d),h)),t.G0i(151),s=t.B1g(c,r,u,u),g=Math.min(o[Math.max(1,x)-1].Low,o[x].Low),s>o[x+1].Low?(s=c,v()):s>g&&(s=g)):((!c||c>o[x].Low)&&(c=o[x].Low,t.B40(3),r=Math.min(t.B1g(r,d),h)),t.G0i(151),s=t.B1g(c,r,u,u),f=Math.max(o[Math.max(+"1",x)-1].High,o[x].High),s<o[x+1].High?(s=c,v()):s<f&&(s=f)),t.G0i(3),o[t.B1g(x,1)]["_state "+a.name]=[r,c,l],(!isNaN(o[x].High)||!isNaN(o[x].Low))&&(w="R",w+="esul",w+="t ",t.G0i(3),o[t.K73(x,1)][w+a.name]=s)}},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:n.Studies.calculatePSAR,seriesFN:n.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")};zd=b=>{var t,i,n;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="#",i+="e3",i+="64",i+="60",n="fi",n+="bonac",n+="ci",t.Studies.calculatePivotPoints=function(e,a){var o=ft,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U;r="_point",r+="ers ",c="mar",c+="ket.",c+="beginnin",c+="gDayOfWeek",l="m",l+="illi";function N(){v.pivotPoint=(v.high+v.low+s[D-+"1"].Close)/+"3",v.prevHigh=v.high,v.prevLow=v.low,v.hlSpread=v.high-v.low,v.high=v.low=0}l+="second",s=a.chart.scrubbed,d="day",h=e.layout.interval,p=e.layout.timeUnit,h=="day"?d="month":t.ChartEngine.isDailyInterval(h)?d="year":h=="second"||h=="millisecond"||p=="second"||p==l?d="15min":(u="minu",u+="te",g=e.layout.periodicity,h!=u&&(g*=h),g>=30&&(d="week")),f=null,o.G0i(152);var C=o.K73(15,1,15,6);w=C-t.getFromNS(e.chart,c,+"0"),v={pivotPoint:NaN,high:+"0",low:0,prevHigh:+"0",prevLow:0,hlSpread:0},a.startFrom>1&&s[a.startFrom-1][r+a.name]&&(m="_p",m+="ointers ",v=t.clone(s[a.startFrom-1][m+a.name]));for(var D=Math.max(1,a.startFrom);D<s.length;D++)if(q="fib",q+="onacci",x="Pi",x+="vot ",y="w",y+="e",y+="e",y+="k",k="mo",k+="nth",!!s[D-("1"|1)]){if(v.high=Math.max(v.high,s[D-1].High),v.low=Math.min(v.low>0?v.low:s[D-1].Low,s[D-"1"*1].Low),a.inputs.Continuous||d=="year"&&s[D].DT.getYear()!=s[D-1].DT.getYear()||d==k&&s[D].DT.getMonth()!=s[D-1].DT.getMonth()||d==y&&(s[D].DT.getDay()+w)%7<(s[D-("1"^0)].DT.getDay()+w)%7?N():d=="day"?(f===null&&(f=t.Studies.getMarketOffset({stx:e,localQuoteDate:s[D].DT,shiftToDateBoundary:!0})),S=new Date(new Date(+s[D].DT).setMilliseconds(s[D].DT.getMilliseconds()+f)),A=new Date(new Date(+s[D-("1"<<32)].DT).setMilliseconds(s[D-1].DT.getMilliseconds()+f)),A.getDate()!==S.getDate()&&A.getDay()!==0&&e.chart.market.isMarketDate(S)&&(f=null,N())):d=="15min"&&(s[D].DT.getHours()!=s[D-1].DT.getHours()||Math.floor(s[D].DT.getMinutes()/15)!=Math.floor(s[D-1].DT.getMinutes()/("15"-0)))&&N(),s[D][x+a.name]=v.pivotPoint,a.inputs.Type.toLowerCase()==q)_="Suppo",_+="rt 3 ",T="Support 2",T+=" ",P="Re",P+="sistan",P+="ce 3 ",E="Resist",E+="ance 1 ",s[D][E+a.name]=v.pivotPoint+.382*v.hlSpread,s[D]["Resistance 2 "+a.name]=v.pivotPoint+.618*v.hlSpread,s[D][P+a.name]=v.pivotPoint+v.hlSpread,s[D]["Support 1 "+a.name]=v.pivotPoint-.382*v.hlSpread,s[D][T+a.name]=v.pivotPoint-.618*v.hlSpread,s[D][_+a.name]=v.pivotPoint-v.hlSpread;else{z="Su",z+="pport 3 ",U="Resi",U+="s",U+="tance 2 ",o.G0i(153);var F=o.K73(12,1,18,0,4);s[D]["Resistance 1 "+a.name]=F*v.pivotPoint-v.prevLow,s[D][U+a.name]=v.pivotPoint+v.hlSpread,o.B40(6);var M=o.K73(21,19);s[D]["Resistance 3 "+a.name]=v.prevHigh+M*(v.pivotPoint-v.prevLow),o.G0i(11);var I=o.B1g(12,2,28);s[D]["Support 1 "+a.name]=I*v.pivotPoint-v.prevHigh,s[D]["Support 2 "+a.name]=v.pivotPoint-v.hlSpread,o.B40(154);var L=o.K73(22,47,20,2,9);s[D][z+a.name]=v.prevLow-L*(v.prevHigh-v.pivotPoint)}s[D]["_pointers "+a.name]=t.clone(v)}},t.Studies.displayPivotPoints=function(e,a,o){var r,c,l,s,d,h,p,u;a.noSlopes=!a.inputs.Continuous,t.Studies.displaySeriesAsLine(e,a,o),a.inputs.Shading&&(r="Sup",r+="por",r+="t 2",r+=" ",c="Suppo",c+="r",c+="t 2",l="Supp",l+="o",l+="r",l+="t 1 ",s="Piv",s+="ot ",d="Resistance",d+=" ",d+="2 ",h="Resistance",h+=" 3",p=e.panels[a.panel],u={noSlopes:a.noSlopes,opacity:a.parameters.opacity?a.parameters.opacity:.2,skipTransform:p.name!=a.chart.name,yAxis:a.getYAxis(e)},!a.highlight&&e.highlightedDraggable&&(u.opacity*=+"0.3"),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Resistance 3 "+a.name,bottomBand:"Resistance 2 "+a.name,color:t.Studies.determineColor(a.outputs[h])},u)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:d+a.name,bottomBand:"Resistance 1 "+a.name,color:t.Studies.determineColor(a.outputs["Resistance 2"])},u)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Resistance 1 "+a.name,bottomBand:s+a.name,color:t.Studies.determineColor(a.outputs["Resistance 1"])},u)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 1 "+a.name,bottomBand:"Pivot "+a.name,color:t.Studies.determineColor(a.outputs["Support 1"])},u)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 2 "+a.name,bottomBand:l+a.name,color:t.Studies.determineColor(a.outputs[c])},u)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 3 "+a.name,bottomBand:r+a.name,color:t.Studies.determineColor(a.outputs["Support 3"])},u)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard",n],Continuous:!1,Shading:!{}},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":i,"Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")};Bd=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,ft.S0g(),t.Studies?(i="a",i+="uto",t.Studies.calculatePrettyGoodOscillator=function(n,e){var a,o,r,c,l,s,d,h;if(a="_",a+="SM",a+="A",o="Cl",o+="o",o+="s",o+="e",r="_E",r+="MA",c="tru",c+="e",c+="Ran",c+="ge",l="expo",l+="nen",l+="tial",s=e.chart.scrubbed,s.length<e.days+1){e.error=!![];return}t.Studies.MA(l,e.days,c,0,r,n,e),t.Studies.MA("simple",e.days,o,0,a,n,e);for(var p=Math.max(1,e.startFrom);p<s.length;p++)d="_",d+="E",d+="MA",d+=" ",h="Result",h+=" ",!(!s[p]["_SMA "+e.name]||!s[p]["_EMA "+e.name])&&(s[p][h+e.name]=(s[p].Close-s[p]["_SMA "+e.name])/s[p][d+e.name])},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:i,studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")};Od=b=>{var t=ft,i,n,e;t.S0g(),i="undefine",i+="d",n=typeof _CIQ!==i?_CIQ:b.CIQ,n.Studies?(n.Studies.calculatePMO=function(a,o){var r,c,l,s,d,h,p;if(r="PM",r+="OSignal",c={Smooth:Number(o.inputs["Smoothing Period"])-+"1",Double:Number(o.inputs["Double Smoothing Period"])-+"1",Signal:Number(o.inputs["Signal Period"])},l=o.chart.scrubbed,l.length<c.Smooth+c.Double){o.error=!!{};return}for(s=o.inputs.Field,(!s||s=="field")&&(s="Close"),d=o.startFrom;d<l.length;d++)if(!!l[d]&&!!l[d-1]&&(t.B40(20),h=l[t.K73("1",d,1)][s],h)){p="_R",p+="OC",p+="x1",p+="0 ",t.B40(6);var u=t.K73(8e3,7e3);t.B40(3);var g=t.K73(0,1);l[d][p+o.name]=u*(l[d][s]/h-g)}n.Studies.MA("exponential",c.Smooth,"_ROCx10 "+o.name,"0"<<32,"_EMAx10",a,o),t.S0g(),n.Studies.MA("exponential",c.Double,"_EMAx10 "+o.name,0,"PMO",a,o),n.Studies.MA("exponential",c.Signal,"PMO "+o.name,0,r,a,o),o.zoneOutput="PMO"},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:n.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":+"20","Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!!{},studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:"0"|0,step:"0.05"}}}})):(e="priceMomentumOscillator",e+=" feature requires fi",e+="rst activating studies feature.",console.error(e))};Rd=b=>{var t=ft;t.S0g();var i,n,e,a,o,r,c,l,s;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(n="0",n+=".",n+="1",e="#",e+="F",e+="F0000",a="RA",a+="V",a+="I",o="Pe",o+="rce",o+="n",o+="t",r="Po",r+="i",r+="nts",c="Po",c+="in",c+="t",c+="s",l="e",l+="m",l+="a",s="fie",s+="l",s+="d",i.Studies.calculatePriceOscillator=function(d,h){var p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U;if(p="Per",p+="cent",u="fi",u+="el",u+="d",g="sim",g+="ple",f=h.chart.scrubbed,w=Number(h.inputs["Short Cycle"]),v=Number(h.inputs["Long Cycle"]),f.length<Math.max(w,v)+1){h.error=!!{};return}m=h.inputs.Field,q=h.inputs["Moving Average Type"],q||(q=g),(!m||m==u)&&(m="Close"),h.parameters.isVolume&&(x="V",x+="ol",x+="u",x+="me",m=x,q="exponential"),y=h.inputs["Points Or Percent"],y||(y=p),t.G0i(35),i.Studies.MA(q,w,m,t.B1g("0",0),"_Short MA",d,h),i.Studies.MA(q,v,m,0,"_Long MA",d,h);for(var N=Math.max(v,h.startFrom);N<f.length;N++)k="_Long ",k+="MA ",S=f[N],S&&(A=S["_Short MA "+h.name],_=S[k+h.name],(A||A===0)&&(_||_===0)&&(T="Res",T+="u",T+="l",T+="t ",P="Resul",P+="t",P+=" ",E="Point",E+="s",y==E?(t.B40(6),S[P+h.name]=t.B1g(A,_)):(t.G0i(150),S[T+h.name]=t.K73(1,_,100,A)),h.outputs["Increasing Bar"]&&(z="Resul",z+="t",z+=" ",U="_",U+="hi",U+="st",S[h.name+U]=S[z+h.name],h.outputMap={},h.outputMap[h.name+"_hist"]="")))},i.Studies.displayRAVI=function(d,h,p){var u,g,f,w,v,m,q,x,y,k,S,A,_;u=d.panels[h.panel],g=h.getContext(d),f=h.getYAxis(d),w=d.pixelFromPrice(0,u,f),t.G0i(13);var T=t.B1g(17,15,10,423);v=d.layout.candleWidth-T,v<2&&(v=+"1"),m=i.Studies.determineColor(h.outputs["Increasing Bar"]),q=i.Studies.determineColor(h.outputs["Decreasing Bar"]),d.startClip(h.panel),d.canvasColor("stx_histogram"),h.underlay||(g.globalAlpha=1),!h.highlight&&d.highlightedDraggable&&(g.globalAlpha*=.3),t.c5Q();for(var P=0;P<p.length;P++)x="_",x+="hist",y="#",y+="C",y+="C",y+="CCCC",k=p[P],t.G0i(6),S=p[t.B1g(P,1)],S||(S=d.getPreviousBar(d.chart,h.name+"_hist",P)),k&&(A=0,_=0,h.parameters&&h.parameters.studyOverZonesEnabled&&(A=parseFloat(h.parameters.studyOverBoughtValue),_=parseFloat(h.parameters.studyOverSoldValue)),S?k[h.name+"_hist"]>A&&S[h.name+x]<k[h.name+"_hist"]?g.fillStyle=m:k[h.name+"_hist"]<_&&S[h.name+"_hist"]>k[h.name+"_hist"]?g.fillStyle=q:g.fillStyle="#CCCCCC":g.fillStyle=y,k.candleWidth&&(v=Math.floor(Math.max(1,k.candleWidth-2))),g.fillRect(Math.floor(d.pixelFromBar(P,u.chart)-v/+"2"),Math.floor(w),Math.floor(v),Math.floor(d.pixelFromPrice(k[h.name+"_hist"],u,f)-w)));d.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:i.Studies.calculatePriceOscillator,inputs:{Field:s,"Short Cycle":12,"Long Cycle":26,"Moving Average Type":l,"Points Or Percent":[c,"Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:i.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":+"26","Points Or Percent":[r,o]},parameters:{init:{isVolume:!0}}},RAVI:{name:a,seriesFN:i.Studies.displayRAVI,calculateFN:i.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":+"65"},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":e},centerline:0,parameters:{init:{studyOverZonesEnabled:!![],studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:n}}}})):console.error("priceVolumeOscillator feature requires first activating studies feature.")};Nd=b=>{var t,i,n,e,a;t="unde",t+="f",t+="ine",t+="d",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(e="a",e+="u",e+="t",e+="o",a="Prime Number",a+=" Oscillato",a+="r",i.Studies.calculatePrimeNumber=function(o,r){var c=ft,l,s,d,h,p,u,g,f,w,v;c.c5Q(),l=[],s=r.chart.scrubbed;function m(A){var _;if(A<=0)return!1;if(A!=Math.floor(A))return![];if(l[A]===!0||l[A]===![])return l[A];_=parseInt(Math.sqrt(A),"10"*1);for(var T=2;T<=_;T++)if(A%T===0)return l[A]=!1,!{};return l[A]=!!{},c.c5Q(),!![]}for(var q=r.startFrom;q<s.length;q++)if(d="Prime N",d+="umber Bands",h=s[q],!!h){if(p=h.High,!isNaN(p)){for(var x=0;p>0&&p<=+"10";x++)p*=10;for(m(p)&&(p+=+"2"),p=Math.ceil(p),p%+"2"===0&&p++;!m(p);)p+=2;p/=Math.pow(+"10",x)}if(u=h.Low,!isNaN(u)){for(var y="0"|0;u>0&&u<=10;y++)u*=10;if(m(u)&&(u-=2),u=Math.floor(u),u%2===0&&u--,u>0){for(;!m(u);)u-=2;u/=Math.pow(10,y)}}if(r.type==d)g="Pri",g+="me B",g+="ands Bottom ",isNaN(p)||(h["Prime Bands Top "+r.name]=p),isNaN(u)||(c.B40(18),h[g+r.name]=Math.max(c.K73("0",1),u));else{c.G0i(6),f=c.B1g("0",0),c.G0i(155);var k=c.B1g(1,88,92,11,92);w=r.inputs["Tolerance Percentage"]*(p-u)/k,c.G0i(56);var S=c.B1g(15,6,7);v=p+u-S*h.Close,v<w?(c.G0i(27),f=c.B1g(0,"1")):v>w&&(f=-1),f&&(h["Result "+r.name]=f)}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Prime Number":{name:a,range:"-1 to 1",calculateFN:i.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:+"0.1",step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:i.Studies.calculatePrimeNumber,seriesFN:i.Studies.displayChannel,inputs:{"Channel Fill":!![]},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":e,"Prime Bands Channel":"auto"}}})):(n="primeNumber feature requir",n+="es first activating studies feature.",console.error(n))};Hd=b=>{var t,i;t="u",t+="ndefined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateKST=function(n,e){var a=ft,o,r,c,l,s,d,h,p,u,g,f,w,v,m;for(o="Signal Perio",o+="d",r="Heavy SMA P",r+="eriod",c="Lightes",c+="t SMA",c+=" Period",l="Heavy Rate of Change Peri",l+="od",s="C",s+="lose",d=e.chart.scrubbed,h=e.inputs.Field,(!h||h=="field")&&(h=s),p={},u={},p[1]=Number(e.inputs["Lightest Rate of Change Period"]),p[2]=Number(e.inputs["Light Rate of Change Period"]),p[3]=Number(e.inputs[l]),p[4]=Number(e.inputs["Heaviest Rate of Change Period"]),u[1]=Number(e.inputs[c]),u[2]=Number(e.inputs["Light SMA Period"]),a.G0i(6),u[a.K73("3",0)]=Number(e.inputs[r]),u[4]=Number(e.inputs["Heaviest SMA Period"]),g=Number(e.inputs[o]),f=e.startFrom;f<d.length;f++)if(!!d[f]){for(w=1;w<=4;w++)if(f>=p[w]&&d[f-p[w]]&&d[f-p[w]][h]){a.G0i(68);var q=a.B1g(16,15,8,108,772);d[f]["_ROC"+w+" "+e.name]=q*(d[f][h]/d[f-p[w]][h]-("1"^0))}}for(w=1;w<=4;w++)v="_S",v+="M",v+="A",i.Studies.MA("simple",u[w],"_ROC"+w+" "+e.name,0,v+w,n,e);for(f=e.startFrom;f<d.length;f++)for(d[f]["KST "+e.name]=null,w=1;w<=4;w++){a.G0i(156),a.B1g(16,10,3,4620),a.G0i(106);var x=a.B1g(19972,8,22200);a.B40(157),a.B1g(7,2233,319,2181),a.G0i(32),a.K73(4723,28343,7),a.B40(88);var y=a.K73(3002,5994,2);a.G0i(6);var k=a.K73(73601,66910);a.B40(6);var S=a.K73(1270,19);a.G0i(13),a.B1g(16,3,8656,129884),a.B40(47);var A=a.B1g(8,62,566,3951);m=d[f]["_SMA"+w+(x>"7344">>0?y!==k?S===+"8374"?!!{}:694.58:A:" ")+e.name],(m||m===+"0")&&(a.B40(18),d[f]["KST "+e.name]+=a.K73(w,m))}i.Studies.MA("simple",g,"KST "+e.name,0,"KSTSignal",n,e)},i.Studies.calculateSpecialK=function(n,e){var a=ft,o,r,c,l,s,d,h,p,u,g,f,w,v,m;for(o="fi",o+="e",o+="l",o+="d",r=e.chart.scrubbed,c=e.inputs.Field,(!c||c==o)&&(c="Close"),l=e.inputs.Interval,l||(l="daily"),s={daily:[+"10","15"|8,20,30,"50"^0,65,75,"100"*1,195,"265"*1,390,530],weekly:["4">>32,"5"|1,6,+"8",10,13,15,20,39,52,78,104]},a.c5Q(),d={daily:[10,10,10,15,50,65,75,100,130,+"130",130,+"195"],weekly:[4,5,6,8,10,"13"|1,15,20,26,26,26,39]},h=e.startFrom;h<r.length;h++)if(!!r[h]){for(p=0;p<s[l].length;p++)if(h>=s[l][p]&&r[h-s[l][p]]&&r[h-s[l][p]][c]){a.G0i(3);var q=a.K73(17,83);a.B40(6);var x=a.K73(6,5);r[h]["_ROC"+p+" "+e.name]=q*(r[h][c]/r[h-s[l][p]][c]-x)}}for(p=0;p<d[l].length;p++)u="_",u+="R",u+="O",u+="C",g="ex",g+="po",g+="ne",g+="ntial",f="si",f+="m",f+="p",f+="le",w="d",w+="a",w+="i",w+="ly",i.Studies.MA(l==w?f:g,d[l][p],u+p+" "+e.name,0,"_MA"+p,n,e);for(h=e.startFrom;h<r.length;h++)for(r[h]["Result "+e.name]=null,p=0;p<d[l].length;p++){v="R",v+="e",v+="sul",v+="t ",a.G0i(158),a.B1g(37215,33096,1,7,9),a.B40(3);var y=a.K73(557,4453);a.B40(47);var k=a.K73(9,3,6,33);a.B40(133);var S=a.B1g(2686,4,26,16);a.G0i(159),a.K73(2,5444,791,5537,16),a.B40(160);var A=a.K73(43,8,562,465,11);m=r[h]["_MA"+p+(y<="9550">>k?S===820.58?A:" ":!{})+e.name],(m||m===0)&&(a.G0i(161),r[h][v+e.name]+=a.B1g(4,m,p,1))}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:i.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":+"10","Light Rate of Change Period":15,"Light SMA Period":+"10","Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":+"30","Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:i.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")};Vd=b=>{var t=ft,i,n,e,a,o,r,c,l,s,d;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.c5Q(),n=typeof _timezoneJS!="undefined"?_timezoneJS:b.timezoneJS,i.Studies?i.Studies.studyLibrary.PVAT||(a="s",a+="te",a+="p",o="#b82",o+="c",o+="0c",r="Projected Aggregate V",r+="olume",c="s",c+="t",c+="e",c+="p",l="-",l+="15",l+="0%",s="-2",s+="5",s+="%",d="+",d+="7",d+="5",d+="%",i.Studies.initProjectedVolume=function(h,p,u,g,f,w){var v,m,q;v=":",v+="0",v+="0";var{market:x}=h.chart;return m="00:00",x&&(m=x.getNormalOpen()),m.match(/^[\d]{2}:[\d]{2}$/)&&(m+=v),t.S0g(),(!u["Anchor Time"]||!u["Anchor Time"].length)&&(u["Anchor Time"]=m),q=i.Studies.initializeFN(h,p,u,g,f,w),h.currentlyImporting||(q.defaultAnchorTime=m),q},i.Studies.validateProjectedVolumeLookback=function(h,p){var{interval:u,periodicity:g}=h.layout,{"Lookback Days":f}=p.inputs;return t.c5Q(),t.G0i(162),t.K73(10,f,u,g)},i.Studies.calculateProjectedVolume=function(h,p){var u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I,L,O,B,R,H,W,X,Z,j,Q,et,V,K,tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt,yt,qt,St,Tt,wt;function Ct(Lt){return{hours:Lt.getHours(),minutes:Lt.getMinutes()}}u="P",u+="V",u+=" ",g="V",g+=" ",f="P",f+="V";function Rt(Lt){var Wt;return Wt="sc",t.S0g(),Wt+="rubbe",Wt+="d",h.dateFromTick(Lt,null,!![],Wt)}f+=" ",w="A";function Ht(Lt,Wt,Zt){for(t.c5Q();Wt;)Lt=new Date(new Date(Lt).setDate(Lt.getDate()+(Zt?"1">>32:-+"1"))),Vt.isMarketDate(Lt)&&Wt--;return Lt}w+="ncho",w+="r Sel",w+="ector",v="he",v+="iki",v+="n",v+="ashi",m="oh";function jt(Lt){var Wt;return Lt.setHours(0),Lt.setMinutes(0),Wt=i.Studies.getMarketOffset({stx:h,localQuoteDate:Lt}),new Date(Lt.getTime()+Wt)}m+="lc";var{interval:$t,timeUnit:Bt,aggregationType:zt}=h.layout,{symbol:Pt,scroll:Nt,scrubbed:_t,market:Vt}=h.chart;function ee(Lt){return t.S0g(),h.tickFromDate(Lt,null,null,!0,"scrubbed")}if(q=p.type==="PAV",x=p.study?p.study.name:p.type,i.ChartEngine.isDailyInterval($t))p.error=`${x} is Intraday Only`;else if(Bt==="tick"){y=574461514,t.B40(6),k=-t.K73("685177199",0),S=2;for(var xe=1;t.J3W(xe.toString(),xe.toString().length,+"36378")!==y;xe++)p.error=`Tick mode not supported for ${x}`,S+=2;t.h3u(S.toString(),S.toString().length,30621)!==k&&(p.error=`Tick mode not supported for ${x}`)}else Bt!=="minute"?(t.G0i(53),p.error=`${t.B1g("Sub-minu","te periodiciti","es not supported for ")}${x}`):!zt||![m,v].includes(zt)?p.error=`Aggregation type not supported for ${x}`:i.Studies.validateProjectedVolumeLookback(h,p)||(t.G0i(3),p.error=`${t.K73("Selected lookback/periodicity combo not supp","orted for ")}${x}`);if(p.error)return;p.inputs[w]?i.Studies.initAnchorHandle(h,p):i.Studies.removeAnchorHandle(h,p),A=Vt?Vt.getNormalOpen():"00:00",A.match(/^[\d]{2}:[\d]{2}$/)&&(A+=":00");function ae(Lt){t.S0g(),console.error(`Expected data for ${Rt(Lt).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`)}if(!h.currentlyImporting){if(!p.defaultAnchorTime)p.defaultAnchorTime=A;else if(A!==p.defaultAnchorTime){p.defaultAnchorTime=A,p.inputs["Anchor Time"]=A,i.Studies.repositionAnchor(h,p);return}}t.c5Q();var{"Lookback Days":Te,"Anchor Time":Ue}=p.inputs,[_e,Oe,de=+"0"]=Ue.split(":");_=i.getFn("Market.Symbology.isForexSymbol")(Pt),T=p.getDependents(h),P=0,E=[],T.forEach(({inputs:Lt,outputMap:Wt})=>{t.S0g(),Lt.Period&&(P=Math.max(parseInt(Lt.Period),P),E.push(...Object.keys(Wt)))}),p.dependentsOutputMap=E;function se(Lt,Wt){var Zt,je,Ce;return Zt=Rt(Lt),je=Vt.getOpen(Zt)||jt(Zt),Ce=ee(je),Wt?(Ce<0&&(Ce=ee(Ht(je,1,!!{}))),Ce>=_t.length?!1:Ce):Ce}if(U=se(_t.length-1,!0),N=Math.ceil(_t.length-+"1"-Nt),t.B40(6),C=se(t.B1g(N,P)),_&&_t[C]&&i.dateToStr(_t[C].DT,"HH:mm")!==A&&(t.G0i(6),C=se(t.K73(C,1))),!_&&p.startFrom>C&&_t[C]&&_t[C]["V "+p.name]!==void 0&&E.every(Lt=>(t.c5Q(),![void 0,null].includes(_t[C][Lt])))&&U!==![]?z=U:z=C,D=Ht(Rt(C),Te),D.setHours(0,0,+"0"),F=se(0,!![]),M=(F||F==="0"*1)&&ee(Ht(_t[F].DT,Te,!![])),_t[0].DT>D)if(h.quoteDriver)if(p.chart.endPoints.begin>D&&h.quoteDriver.extendHistoricalData({from:D}),M>0)z=M;else return;else return t.B40(53),p.error=`${t.B1g("No","t enough data to calcul","ate ")}${x}`;if(!(z<0||z>_t.length-1)){if(I=_t.length-p.startFrom===1&&p.cachedFutureTicks&&p.cachedLastProjection&&+p.cachedLastProjection.DT==+_t[_t.length-+"1"].DT&&_t[z][f+p.name],I){L=-938594148,O=-547738537,B=2;for(var he=+"1";t.h3u(he.toString(),he.toString().length,88149)!==L;he++){t.G0i(5);var Ve=t.K73(19,11,10);_t[_t.length+Ve][""*p.name]=p.cachedLastProjection.projectedValue,p.appendFutureTicks(h,p.cachedFutureTicks),B+=2}if(t.h3u(B.toString(),B.toString().length,38345)!==O){t.G0i(3);var ye=t.K73(0,7);_t[_t.length%ye][""-p.name]=p.cachedLastProjection.projectedValue,p.appendFutureTicks(h,p.cachedFutureTicks)}_t[_t.length-+"1"]["PV "+p.name]=p.cachedLastProjection.projectedValue,p.appendFutureTicks(h,p.cachedFutureTicks),z=p.startFrom}else{p.cachedFutureTicks=null,p.cachedLastProjection=null,R=[U],H=[];for(var qe=0;qe<Te;qe++)W=se(R[0]-1),R.unshift(W);for(;R[Te]>=z;){if(X=R.pop(),!_t[X])return ae(X);Z=Ct(_t[X].DT);var{hours:Se,minutes:ge}=Z;if(j=Vt.getClose(_t[X].DT),Q=void 0,!j)Q={hours:24,minutes:0};else{for(et=Vt.getNextClose(_t[X].DT),Q=Ct(j);!(Q.hours===0&&Q.minutes===0)&&j.getDate()===et.getDate();)j=et,et=Vt.getNextClose(et);Q=Ct(j),Q.hours==="0"<<32&&(Q.hours=+"24")}V=R.slice();for(var ue=0;ue<V.length;ue++){if(K=V[ue],!_t[K])return ae(K);var{hours:te,minutes:fe}=Ct(_t[K].DT);if(te<Se||te===Se&&fe<ge)do K++,{hours:te,minutes:fe}=Ct(_t[K].DT);while(!(te===Se&&fe===ge));V[ue]=K}for(;Se<Q.hours||Se===Q.hours&&ge<Q.minutes;){tt=!1,J=void+"0",at=void 0,ct=+"0",G=0;for(var oe=0;oe<V.length;oe++)if(Y=V[oe],Y!==null){if(it=_t[Y],!it)return ae(Y);var{hours:me,minutes:be}=Ct(it.DT);rt=it.DT.getDate(),me===Se&&be===ge&&(ct+=it.Volume,G++,V[oe]++,_t[V[oe]].DT.getDate()!==rt?V[oe]=null:tt||({hours:J,minutes:at}=Ct(_t[V[oe]].DT),tt=!0))}if(Se=J,ge=at,G===+"0")break;t.G0i(12),lt=t.B1g(G,ct),_t[X]?_t[X]["PV "+p.name]=lt:(dt="PV",dt+=" ",H.push({[dt+p.name]:lt})),X++}R.unshift(se(R[0]-1))}p.cachedLastProjection={DT:_t[_t.length-+"1"].DT,projectedValue:_t[_t.length-1]["PV "+p.name]},p.cachedFutureTicks=H,p.appendFutureTicks(h,H)}if(ht=null,pt=0,ut=0,I&&q)for(;z>0;){if(t.B40(163),gt=_t[t.B1g(z,0,"1")]["V "+p.name],gt||gt===0){pt=gt;break}z--}for(var ce=z;ce<_t.length;ce++){if(bt=_t[ce],yt=bt.Volume,qt=bt["PV "+p.name],bt.futureTick||(mt=ce),ht===null&&(ht=i.Studies.getMarketOffset({stx:h,localQuoteDate:_t[ce].DT,shiftToDateBoundary:!![]})),St=new Date(new Date(bt.DT).getTime()+ht),Tt=_t[ce-1]&&new Date(new Date(_t[ce-1].DT).getTime()+ht),wt=new n.Date(bt.DT,Vt.market_def.market_tz||"America/New_York"),wt.setHours(_e,Oe,de),t.B40(3),wt=new Date(t.K73(wt,ht)),wt.setDate(St.getDate()),Tt&&St.getDate()!==Tt.getDate()&&(ht=null,pt=0,t.G0i(35),ut=t.B1g("0",0)),St<wt){bt["V "+p.name]=0,bt["PV "+p.name]=0;continue}if(q?(pt+=yt,ut+=qt):(pt=yt,ut=qt),bt["V "+p.name]=pt,I||(bt["PV "+p.name]=ut),[NaN,null,void 0].includes(pt)&&!bt.futureTick){p.error=`${x} requires volume`;return}}p.cachedLastProjection.projectedValue=_t[mt]["PV "+p.name],p.outputMap={},p.outputMap[g+p.name]="",p.outputMap[u+p.name]="Average Line",T.forEach(Lt=>{Lt.startFrom=z,t.c5Q(),Lt.study.calculateFN(h,Lt)})}},i.Studies.displayProjectedVolume=function(h,p,u){var g,f,w,v,m,q,x;if(p.error)return i.Studies.removeAnchorHandle(h,p);var{"Alert Threshold":y=""}=p.inputs;t.G0i(164);var k=t.K73(7,7,0);t.G0i(3);var S=t.B1g(5,5);t.G0i(45),t.c5Q();var A=t.K73(13,4,19,300,94);g=parseInt(y.slice(0,k),S)/A,f=p.outputs["Alert Bar"],typeof f=="object"&&(f=f.color),p.volumeField="V "+p.name,p.alignStepToSide=!![],p.extendToEndOfLastBar=!![],p.lineWidth=+"2",w=h.canvasStyle("stx_volume_underlay_up").opacity,v=h.canvasStyle("stx_volume_underlay_down").opacity,p.colorFunction=function(T){var P,E,z,U,N,C,D;P="V",P+=" ",t.S0g();var{Open:F,Close:M,iqPrevClose:I}=T;return E=h.colorByCandleDirection?F:I,t.G0i(165),z=t.B1g(E,M),U=T["PV "+p.name],N=T[P+p.name],t.B40(166),C=t.K73(g,U,1),D=g<0?N<C:N>C,{fill_color:D&&f||(z?this.fill_color_down:this.fill_color_up),border_color:z?this.border_color_down:this.border_color_up,opacity:D?1:z?v:w,border_opacity:z?v:w}},m=p.study?p.study.name:p.type;var{loadingMore:_}=h.chart;if(q=u.some(T=>(t.c5Q(),T&&T[p.volumeField]&&T["PV "+p.name])),x=u[0]&&!u[0].futureTick&&(u["0"*1]["PV "+p.name]===void 0||(p.dependentsOutputMap||[]).some(T=>[void 0,null].includes(u[0][T]))),!q&&_)return p.error=`Fetching data for ${m}`;i.Studies.createVolumeChart(h,p,u),i.Studies.displaySeriesAsLine(h,p,u),p.anchorHandle&&i.Studies.displayAnchorHandleAndLine(h,p,u),x&&i.Studies.calculateProjectedVolume(h,p)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!!{}},calculateFN:i.Studies.calculateProjectedVolume,seriesFN:i.Studies.displayProjectedVolume,initializeFN:i.Studies.initProjectedVolume,removeFN:i.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%",d,"+50%","+25%","None",s,"-50%","-75%","-100%","-125%",l],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:c},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:"1"<<64},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:r,range:"0 to max",yAxis:{ground:!!{}},calculateFN:i.Studies.calculateProjectedVolume,seriesFN:i.Studies.displayProjectedVolume,initializeFN:i.Studies.initProjectedVolume,removeFN:i.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!![]},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":o},parameters:{plotType:a},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):(e="projectedVolu",e+="me feature requires first activating studie",e+="s feature.",console.error(e))};ft.S0g();Wd=b=>{var t=ft,i,n;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.c5Q(),i.Studies?(n="0 to 1",n+="0",n+="0",i.Studies.calculatePsychologicalLine=function(e,a){var o,r,c,l,s,d;if(o=a.chart.scrubbed,o.length<a.days+1){a.error=!0;return}r=[],t.B40(62);var h=t.B1g(17,111,33866,18);t.S0g(),c=h/a.days,l=0;for(var p=Math.max(a.startFrom-a.days,"1"-0);p<o.length&&(s="Resu",s+="l",s+="t ",!o[p].futureTick);p++)d=Number(o[p].Close>o[p-+"1"].Close),d&&(l+=c),r.push(d),r.length>a.days&&(l-=r.shift()*c),!(p<a.startFrom)&&(isNaN(o[p].Close)||(o[p][s+a.name]=l))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:n,calculateFN:i.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):console.error("psychologicalLine feature requires first activating studies feature.")};jd=b=>{var t,i,n;t="unde",t+="fin",t+="e",t+="d",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(n="QSt",n+="ick",i.Studies.calculateQStick=function(e,a){var o,r;if(o="_Close-",o+="O",o+="pe",o+="n ",r=a.chart.scrubbed,r.length<a.days+1){a.error=!![];return}for(var c=a.startFrom;c<r.length;c++)r[c]["_Close-Open "+a.name]=r[c].Close-r[c].Open;i.Studies.MA(a.inputs["Moving Average Type"],a.days,o+a.name,0,"Result",e,a)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{QStick:{name:n,calculateFN:i.Studies.calculateQStick,inputs:{Period:+"8","Moving Average Type":"ma"}}})):console.error("qstick feature requires first activating studies feature.")};Kd=b=>{var t=ft,i,n,e,a,o,r,c,l,s;i=+"2112257303",n=-1919588577,e=2;for(var d=1;t.h3u(d.toString(),d.toString().length,26408)!==i;d++)a=~_CIQ===""?_CIQ:b.CIQ,e+=2;t.h3u(e.toString(),e.toString().length,+"34618")!==n&&(a=typeof _CIQ!="undefined"?_CIQ:b.CIQ),a.Studies?(o="#",o+="FF",o+="000",o+="0",r="#FF00",r+="F",r+="F",c="#",c+="0000",c+="F",c+="F",l="#FFF",l+="F",l+="00",s="fi",s+="eld",a.Studies.calculateRainbow=function(h,p){var u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;u="O";function z(L,O){var B,R;t.S0g(),t.G0i(72);var H=t.B1g(239,20,12);B=Number.MAX_VALUE*H,R=Number.MAX_VALUE;for(var W=O-L+1;W<=O;W++)W<0||(B=Math.max(B,g[W].Close),R=Math.min(R,g[W].Close));return[R,B]}if(t.S0g(),u+="s",u+="c",g=p.chart.scrubbed,g.length<p.days+1){p.error=!![];return}f=p.inputs.Field,(!f||f=="field")&&(f="Close"),w=f;for(var U=1;U<=("10"^0);U++)v="si",v+="mple",a.Studies.MA(v,p.days,w,0,"SMA"+U,h,p),t.G0i(6),t.B1g(7840,3920),t.B40(47),t.B1g(6,947,1900,5698),t.B40(152),t.K73(47250,7875,3,3148),t.G0i(5),t.B1g(13,31,26),w="SMA"+U+" "+p.name;for(var N=Math.max(p.startFrom,10);N<g.length;N++)if(m="O",m+="s",m+="c",!!g[N]){if(g[N].futureTick)break;for(q=0,x=0,y=Number.MAX_VALUE*-("1"|0),k=Number.MAX_VALUE,U=1;U<=10;U++){S="S",S+="M",S+="A",t.G0i(47),t.B1g(5,1,596,8949),t.B40(167);var C=t.K73(25,19,3,2,258);t.G0i(3),t.B1g(5891,9),A=g[N][S+U+("4820"-0===C?!0:" ")+p.name],(A||A===0)&&(q+=A,x++,y=Math.max(y,A),k=Math.min(k,A))}if(p.name.indexOf(m)>-1&&(_=z(p.inputs["HHV/LLV Lookback"],N),x)){t.B40(121);var D=t.B1g(93,1400,20,4e3);t.B40(117);var F=t.B1g(5,14,18);g[N][p.name+"_hist"]=D*(g[N][f]-q/x)/Math.max("0.000001"-0,_[F]-_[0]),t.B40(5);var M=t.K73(17,8,10);t.G0i(6);var I=t.K73(1,0);g[N]["Over "+p.name]=+"100"*(y-k)/Math.max("0.000001"*M,_[I]-_[0]),g[N]["Under "+p.name]=-g[N]["Over "+p.name],g[N]["Zero "+p.name]=0}}p.name.indexOf(u)>-1&&(T="Und",T+="er",T+=" ",P="Posi",P+="tive",P+=" Bar",E="O",E+="ve",E+="r",E+=" ",p.outputMap={},p.outputMap[E+p.name]=P,p.outputMap[T+p.name]="Negative Bar",p.outputMap["Zero "+p.name]="",p.outputMap[p.name+"_hist"]="")},a.Studies.displayRainbowMA=function(h,p,u){var g,f;g=h.panels[p.panel];for(var w=+"10";w>+"0";w--)f="S",f+="M",f+="A",a.Studies.displayIndividualSeriesAsLine(h,p,g,f+w+" "+p.name,u)},a.Studies.displayRainbowOsc=function(h,p,u){var g,f,w,v,m,q,x,y,k,S,A,_,T,P;g="stx_his",g+="togram",f="U",f+="nd",f+="e",f+="r ",a.Studies.displaySeriesAsLine(h,p,u),w=h.panels[p.panel],v=p.getContext(h),m=p.getYAxis(h),h.startClip(p.panel),!p.highlight&&h.highlightedDraggable&&(v.globalAlpha*=.3),q=h.pixelFromPrice(0,w,m),x=w.name!=p.chart.name,y=a.Studies.determineColor(p.outputs["Positive Bar"]),v.strokeStyle=y,h.plotDataSegmentAsLine("Over "+p.name,w,{skipTransform:x,label:!{},yAxis:m}),k=v.createLinearGradient(0,q,0,m.flipped?m.bottom:m.top),t.B40(4),k.addColorStop(t.B1g(0,"0"),h.containerColor),k.addColorStop(+"1",y),a.prepareChannelFill(h,{skipTransform:x,color:k,opacity:!p.highlight&&h.highlightedDraggable?.3:1,panelName:p.panel,topBand:"Over "+p.name,bottomBand:"Zero "+p.name,yAxis:m}),S=a.Studies.determineColor(p.outputs["Negative Bar"]),v.strokeStyle=S,h.plotDataSegmentAsLine(f+p.name,w,{skipTransform:x,label:!1,yAxis:m}),A=v.createLinearGradient(0,q,0,m.flipped?m.top:m.bottom),A.addColorStop(0,h.containerColor),A.addColorStop(1,S),a.prepareChannelFill(h,{skipTransform:x,color:A,opacity:!p.highlight&&h.highlightedDraggable?.3:1,panelName:p.panel,topBand:"Zero "+p.name,bottomBand:"Under "+p.name,yAxis:m}),t.B40(11);var E=t.K73(2,6,24);_=h.layout.candleWidth-E,_<2&&(_=1),h.canvasColor(g),p.underlay||(v.globalAlpha=1),!p.highlight&&h.highlightedDraggable&&(t.G0i(6),v.globalAlpha*=t.K73("0.3",0)),v.fillStyle="#CCCCCC";for(var z=0;z<u.length;z++)T="_",T+="h",T+="i",T+="st",P=u[z],P&&(P[p.name+"_hist"]>+"0"?v.fillStyle=y:P[p.name+"_hist"]<0&&(v.fillStyle=S),P.candleWidth&&(_=Math.floor(Math.max("1"*1,P.candleWidth-+"2"))),v.fillRect(Math.floor(h.pixelFromBar(z,w.chart)-_/2),Math.floor(q),Math.floor(_),Math.floor(h.pixelFromPrice(P[p.name+T],w,m)-q)));h.endClip()},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:a.Studies.calculateRainbow,seriesFN:a.Studies.displayRainbowMA,inputs:{Period:2,Field:s},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:l,SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:c,SMA9:"#7F00FF",SMA10:r}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:a.Studies.calculateRainbow,seriesFN:a.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":o}}})):console.error("rainbow feature requires first activating studies feature.")};Gd=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="#00",i+="00",i+="F",i+="F",t.Studies.calculateRandomWalk=function(n,e){var a,o,r,c,l,s,d,h,p;if(a=e.chart.scrubbed,a.length<e.days+1){e.error=!!{};return}for(var u=Math.max("2"<<64,e.startFrom);u<a.length;u++){o=0,r=a[u].High,c=a[u].Low,l=0,s=0;for(var g=1;g<=e.days&&!a[u].futureTick;g++){if(u<=g){l=s=0;break}o+=a[u-g].trueRange,d=o/g*Math.sqrt(g),d&&(h=(r-a[u-g].Low)/d,p=(a[u-g].High-c)/d,l=Math.max(l,h),s=Math.max(s,p))}!a[u].futureTick&&(!isNaN(r)||!isNaN(c))&&(a[u]["Random Walk High "+e.name]=l,a[u]["Random Walk Low "+e.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":i}}})):console.error("randomWalk feature requires first activating studies feature.")};Yd=b=>{var t=ft,i,n,e,a,o,r;if(t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies)r="#00",r+="D",r+="D",r+="00",i.Studies.calculateRelativeVigor=function(l,s){t.S0g();var d,h,p,u,g,f,w,v,m,q,x;if(d="R",d+="elVigS",d+="i",d+="gnal",h="_",h+="Rang",h+="e ",p=s.chart.scrubbed,p.length<s.days+1){s.error=!![];return}for(u=s.startFrom;u<p.length;u++)g=p[u],!isNaN(g.Close)&&!isNaN(g.Open)&&(g["_Change "+s.name]=g.Close-g.Open),!isNaN(g.High)&&!isNaN(g.Low)&&(g["_Range "+s.name]=g.High-g.Low);for(i.Studies.MA("triangular",4,"_Change "+s.name,0,"_Numer",l,s),i.Studies.MA("triangular",4,h+s.name,0,"_Denom",l,s),f=[],w=[],u=Math.max(s.startFrom-s.days,0);u<p.length&&!p[u].futureTick;u++)if(!(p[u]["_Numer "+s.name]===null&&p[u]["_Denom "+s.name]===null)){for(f.push(p[u]["_Numer "+s.name]),w.push(p[u]["_Denom "+s.name]),f.length>s.days&&(f.shift(),w.shift()),v=0,m=0,q=0;q<f.length;q++)v+=f[q];for(q=0;q<w.length;q++)m+=w[q];m===0&&(m=1e-8),!(u<s.startFrom)&&(t.B40(12),p[u]["Rel Vig "+s.name]=t.K73(m,v))}for(t.G0i(27),i.Studies.MA("triangular",t.K73(64,"4"),"Rel Vig "+s.name,0,d,l,s),u=s.startFrom;u<p.length;u++)x="Rel V",x+="ig",x+=" ",p[u][s.name+"_hist"]=p[u][x+s.name]-p[u]["RelVigSignal "+s.name];s.outputMap[s.name+"_hist"]=""},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:i.Studies.displayHistogramWithSeries,calculateFN:i.Studies.calculateRelativeVigor,inputs:{Period:+"10"},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":r,"Decreasing Bar":"#FF0000"}}});else{n=-1165140098,e=724372686,a=2;for(var c=1;t.J3W(c.toString(),c.toString().length,57535)!==n;c++)console.error(""),t.G0i(27),a+=t.K73(0,"2");t.J3W(a.toString(),a.toString().length,82204)!==e&&(o="re",o+="lativeVigor feature r",o+="equires first activating studies feature.",console.error(o))}};Qd=b=>{var t;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(t.Studies.calculateRSI=function(i,n){var e=ft,a,o,r,c,l,s,d,h,p,u,g;if(a="C",a+="lo",e.c5Q(),a+="se",o=n.chart.scrubbed,r=n.inputs.Field,(!r||r=="field")&&(r=a),o.length<n.days+1){n.error=!!{};return}for(var f=n.startFrom;f<o.length;f++)if(c="_",c+="av",c+="g",c+="L ",l="_a",l+="vg",l+="G",l+=" ",!!f&&(s=o[f],e.B40(6),d=o[e.B1g(f,1)],!(!s[r]&&s[r]!=="0"*1)&&!(!d[r]&&d[r]!==0))){if(h=s[r]-d[r],p=Math.min(f,n.days),u=d["_avgG "+n.name],u||(u=0),e.B40(12),u-=e.K73(p,u),g=d["_avgL "+n.name],g||(g=0),e.G0i(12),g-=e.B1g(p,g),h>0)e.B40(12),u+=e.B1g(p,h);else if(h<=0)e.B40(12),g-=e.K73(p,h);else continue;f>=n.days&&(u||u!==+"0")&&(g||g!=="0">>64)&&(s["RSI "+n.name]=w(u,g)),s[l+n.name]=u,s[c+n.name]=g}n.zoneOutput="RSI";function w(v,m){var q;return m===+"0"?+"100":(e.c5Q(),e.G0i(12),q=e.B1g(m,v),e.G0i(168),e.K73(100,q,1,"100"))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("rsi feature requires first activating studies feature.")};Xd=b=>{var t=ft,i,n;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.c5Q(),i.Studies?(i.Studies.calculateSchaff=function(e,a){var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A;o="Lo",o+="ng",o+=" Cycle",r="Sh",r+="ort Cycle",c=a.chart.scrubbed,l=a.days;function _(P,E,z){var U,N,C;U=null,N=null;for(var D=E-P+ +"1";D<=E;D++){t.G0i(132);var F=t.K73(912,45,19,6);t.B40(32);var M=t.B1g(9335,18662,3);t.B40(32);var I=t.K73(3932,11778,4);t.B40(45);var L=t.B1g(11,16,9,35866,2393);t.G0i(88),t.K73(327,330,330),t.G0i(6);var O=t.K73(4006,14);C=c[D][z+(F>M?I!==305.21?L:O:" ")+a.name],C&&(U=U===null?C:Math.min(U,C),N=N===null?C:Math.max(N,C))}return t.c5Q(),[U,N]}if(s=Number(a.inputs[r]),d=Number(a.inputs[o]),c.length<Math.max(l,s,d)+1){a.error=!0;return}h=a.inputs.Field,(!h||h=="field")&&(h="Close"),p=.5,i.Studies.MA(a.inputs["Moving Average Type"],s,h,0,"_MACD1",e,a),i.Studies.MA(a.inputs["Moving Average Type"],d,h,0,"_MACD2",e,a),u=0,g=0;for(var T=a.startFrom;T<c.length;T++)f="_",f+="M",f+="AC",f+="D",w="_",w+="MA",w+="CD1",w+=" ",v=c[T],!(T<d-1)&&(m=v[w+a.name],q=v["_MACD2 "+a.name],(m||m===0||q||q===0)&&(t.B40(6),v["_MACD "+a.name]=t.K73(m,q)),x=v["_MACD "+a.name],!(T<d+(l-("1"-0)))&&(y=_(l,T,f),u=y[1]>y[0]?100*(x-y["0"<<0])/(y[1]-y[+"0"]):u,(x||x===0)&&(k="_P",k+="F ",v[k+a.name]=c[T-("1"-0)]["_PF "+a.name]?c[T-1]["_PF "+a.name]+p*(u-c[T-1]["_PF "+a.name]):u),S=v["_PF "+a.name],!(T<d+2*(l-("1">>0)))&&(y=_(l,T,"_PF"),g=y[1]>y["0"^0]?100*(S-y[0])/(y["1"|0]-y[0]):g,(S||S===0)&&(A="Re",A+="s",A+="u",A+="lt ",v["Result "+a.name]=c[T-1]["Result "+a.name]?c[T-1]["Result "+a.name]+p*(g-c[T-1][A+a.name]):g))))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:i.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":+"23","Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):(n="s",n+="chaffTrendCycle feature requires first activating studies feature.",console.error(n))};Zd=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="#E9",i+="9",i+="B54",t.Studies.calculateShinohara=function(n,e){var a=ft,o,r,c,l;if(o=e.chart.scrubbed,o.length<e.days+1){e.error=!![];return}r={weakNum:0,weakDen:"0"^0,strongNum:0,strongDen:0},e.startFrom>1&&(c="_",c+="accu",c+="m",c+="s ",r=t.clone(o[e.startFrom-1][c+e.name])),a.S0g();for(var s=e.startFrom;s<o.length;s++){if(l="_ac",l+="cum",l+="s",l+=" ",r.weakNum+=o[s].High-o[s].Close,r.weakDen+=o[s].Close-o[s].Low,s>+"0"){r.strongNum+=o[s].High-o[s-+"1"].Close,a.B40(154);var d=a.K73(0,3,20,20,4);r.strongDen+=o[s-d].Close-o[s].Low}if(s>=e.days){r.weakNum-=o[s-e.days].High-o[s-e.days].Close,r.weakDen-=o[s-e.days].Close-o[s-e.days].Low,a.G0i(6);var h=a.B1g(1e3,900);if(o[s]["Weak Ratio "+e.name]=h*r.weakNum/r.weakDen,s>e.days){a.G0i(169);var p=a.K73(6,7,14);r.strongNum-=o[s-e.days].High-o[s-e.days-p].Close,a.B40(36);var u=a.K73(19,20,4,10);r.strongDen-=o[s-e.days-u].Close-o[s-e.days].Low,a.B40(156);var g=a.B1g(12,14,14,112);o[s]["Strong Ratio "+e.name]=g*r.strongNum/r.strongDen}}o[s][l+e.name]=t.clone(r)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":i,"Weak Ratio":"#5F7CB8"}}})):console.error("shinohara feature requires first activating studies feature.")};Jd=b=>{var t,i,n,e,a,o,r,c;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(i="a",i+="u",i+="t",i+="o",n="#",n+="FF",n+="000",n+="0",e="aut",e+="o",a="fiel",a+="d",o="#",o+="FF0",o+="000",r="f",r+="i",r+="e",r+="ld",c="au",c+="t",c+="o",t.Studies.calculateStochastics=function(l,s){var d,h,p,u,g,f,w,v,m,q;d="%",d+="K ",h="simp",h+="l",h+="e",p="%K Smoot",p+="hing Pe",p+="riod",p+="s",u="fi",u+="e",u+="ld",s.smooth||(s.smooth=s.inputs.Smooth),g=s.inputs.Field;function x(k,S,A){var _=ft,T,P,E,z,U,N,C,D;_.G0i(170),T=_.K73(A,k,"1"),_.G0i(9);var F=_.B1g(7,6,0);P=Number.MAX_VALUE*F,E=Number.MAX_VALUE;for(var M=T;M<=k;M++)z="L",z+="o",z+="w",U="C",U+="lo",U+="s",U+="e",N=w[M][S==U?z:S],C=w[M][S=="Close"?"High":S],!(!N&&N!==0)&&(!C&&C!==0||(E=Math.min(E,N),P=Math.max(P,C)));return P==Number.MAX_VALUE*-+"1"||E==Number.MAX_VALUE?null:(D=P==E?0:(w[k][S]-E)/(P-E)*100,D)}if((!g||g==u)&&(g="Close"),f=s.inputs["%K Periods"],f||(f=s.days),w=s.chart.scrubbed,w.length<Math.max(f,s.days)+1){s.error=!!{};return}v=s.inputs[p],v&&!s.inputs.Fast?s.smooth=!0:s.smooth&&(v=3),m=s.inputs["%D Periods"],m||(m=3),s.outputs.Fast&&(s.outputMap={},s.outputMap["%K "+s.name]="Fast",s.outputMap["%D "+s.name]="Slow");for(var y=Math.max(f,s.startFrom);y<w.length;y++)q=x(y,g,f),q!==null&&(w[y]["_Fast%K "+s.name]=x(y,g,f));t.Studies.MA("simple",s.smooth?v:1,"_Fast%K "+s.name,"0"^0,"%K",l,s),t.Studies.MA(h,m,d+s.name,0,"%D",l,s)},t.Studies.calculateStochMomentum=function(l,s){var d=ft,h,p,u,g,f,w,v,m,q,x,y,k,S,A;if(h="_",h+="DH",h+="L",h+="2",p="expon",p+="en",p+="t",p+="ial",u="_",u+="H",u+="S1",u+=" ",g=Number(s.inputs["%K Periods"]),f=Number(s.inputs["%K Smoothing Periods"]),w=Number(s.inputs["%K Double Smoothing Periods"]),v=Number(s.inputs["%D Periods"]),m=s.chart.scrubbed,m.length<g+f+w-1||m.length<v){s.error=!0;return}for(q=Math.max(g,s.startFrom)-1;q<m.length;q++){x="_",x+="H ",y=m[q],k=P(g,q),d.G0i(46);var _=d.B1g(18,19);y[x+s.name]=y.Close-(k[0]+k[_])/+"2",d.G0i(171);var T=d.K73(15,11,13,1,12);y["_DHL "+s.name]=k[T]-k[0]}t.Studies.MA("exponential",f,"_H "+s.name,0,"_HS1",l,s),t.Studies.MA("exponential",w,u+s.name,0,"_HS2",l,s),t.Studies.MA(p,f,"_DHL "+s.name,0,"_DHL1",l,s);function P(z,U){d.S0g();var N,C;N=null,C=null;for(var D=U-z+ +"1";D<=U;D++)N=N===null?m[D].Low:Math.min(N,m[D].Low),C=C===null?m[D].High:Math.max(C,m[D].High);return[N,C]}for(t.Studies.MA("exponential",w,"_DHL1 "+s.name,0,h,l,s),q=g-1;q<m.length;q++){S="_",S+="H",S+="S2",S+=" ",A="%K",A+=" ",d.B40(172);var E=d.B1g(15,17,1,108,119);m[q][A+s.name]=m[q][S+s.name]/(.5*m[q]["_DHL2 "+s.name])*E}t.Studies.MA(s.inputs["%D Moving Average Type"],v,"%K "+s.name,0,"%D",l,s),s.zoneOutput="%K"},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":c,"%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:r,Smooth:!0},outputs:{Fast:"auto",Slow:o},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Field:a,"%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":e,"%D":n},parameters:{init:{studyOverZonesEnabled:!!{},studyOverBoughtValue:80,studyOverBoughtColor:i,studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return ft.c5Q(),this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")};$d=b=>{var t=ft;t.c5Q();var i;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateSupertrend=function(n,e){var a,o,r,c,l,s,d,h,p,u;if(a=e.chart.scrubbed,a.length<e.days+1){e.error=!!{};return}i.Studies.calculateStudyATR(n,e);for(var g=e.startFrom;g<a.length;g++)if(o="T",o+="rend ",r="_D",r+="i",r+="r",r+="ection ",c=a[g],!!c){t.B40(6);var f=t.B1g(8,6);l=(c.High+c.Low)/f,s=e.inputs.Multiplier*c["ATR "+e.name],t.G0i(6),d=t.B1g(l,s),t.B40(3),h=t.B1g(l,s),g&&(p="_Down",p+="trend ",a[g-+"1"]&&a[g-1].Close&&a[g-1].Close>a[g-1]["_Uptrend "+e.name]&&a[g-("1"<<32)]["_Uptrend "+e.name]>d&&(t.B40(6),d=a[t.B1g(g,1)]["_Uptrend "+e.name]),a[g-1]&&a[g-1].Close&&a[g-("1"-0)].Close<a[g-1][p+e.name]&&a[g-1]["_Downtrend "+e.name]<h&&(t.G0i(6),h=a[t.K73(g,1)]["_Downtrend "+e.name])),c[r+e.name]=1,g&&(u="_",u+="D",u+="ire",u+="ction ",t.B40(6),c["_Direction "+e.name]=a[t.K73(g,1)][u+e.name],c.Close>a[g-1]["_Downtrend "+e.name]?c["_Direction "+e.name]=1:c.Close<a[g-1]["_Uptrend "+e.name]&&(c["_Direction "+e.name]=-1)),c["_Uptrend "+e.name]=d,c["_Downtrend "+e.name]=h,c[o+e.name]=c["_Direction "+e.name]>0?d:h}e.outputMap={},e.outputMap["Trend "+e.name]=""},i.Studies.displaySupertrend=function(n,e,a){t.c5Q();var o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x;o=n.panels[e.panel],r=e.getContext(n),c=e.getYAxis(n),l={skipTransform:o.name!=e.chart.name,skipProjections:!!{},label:n.preferences.labels,yAxis:c,highlight:e.highlight},s="Trend "+e.name;function y(E,z,U){var N;return N="_D",t.c5Q(),N+="irec",N+="ti",N+="on ",z&&z[N+e.name]<0?e.outputs.Downtrend:e.outputs.Uptrend}for(var k=0;o.chart.transformFunc&&c!=o.chart.yAxis&&k<a.length;k++)d=a[k],d&&d.transform&&(d.transform[s]=o.chart.transformFunc(n,o.chart,d[s]));h=-+"1121316742",p=-391827946,u=2;for(var S=1;t.J3W(S.toString(),S.toString().length,37613)!==h;S++){n.plotDataSegmentAsLine(s,o,l,y),r.lineWidth=1,r.globalAlpha=1,n.startClip(e.panel),!e.highlight&&n.highlightedDraggable&&(t.G0i(6),r.globalAlpha*=t.B1g("0.3",0)),t.B40(117);var A=t.B1g(13,2,13);g=r.measureText("\u25B2").width/A,u+=2}if(t.h3u(u.toString(),u.toString().length,55741)!==p){n.plotDataSegmentAsLine(s,o,l,y),r.lineWidth=3,r.globalAlpha=2,n.startClip(e.panel),(~e.highlight||n.highlightedDraggable)&&(r.globalAlpha/=798),t.B40(6);var _=t.K73(12,9);g=r.measureText("").width+_}for(f=0;f<a.length;f++)if(v="_Direction",v+=" ",!(!a[f]||!a[f-1])){if(a[f-"1"*1][v+e.name]>a[f]["_Direction "+e.name]){m="a",m+="u",m+="t",m+="o",w=i.Studies.determineColor(e.outputs.Downtrend),(!w||w==m||i.isTransparent(w))&&(w=n.defaultColor),r.fillStyle=w,r.textBaseline="bottom",q=n.pixelFromPrice(a[f].High,o,c);for(var T="5">>32;T<="45"<<0;T+=10)c.flipped?r.fillText("\u25B2",n.pixelFromBar(f)-g,q+T):r.fillText("\u25BC",n.pixelFromBar(f)-g,q-T)}else if(a[f-("1"-0)]["_Direction "+e.name]<a[f]["_Direction "+e.name]){w=i.Studies.determineColor(e.outputs.Uptrend),(!w||w=="auto"||i.isTransparent(w))&&(w=n.defaultColor),r.fillStyle=w,r.textBaseline="top",x=n.pixelFromPrice(a[f].Low,o,c);for(var P=5;P<=45;P+=10)c.flipped?r.fillText("\u25BC",n.pixelFromBar(f)-g,x-P):r.fillText("\u25B2",n.pixelFromBar(f)-g,x+P)}}n.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!!{},seriesFN:i.Studies.displaySupertrend,calculateFN:i.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:"3"<<0},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")};th=b=>{var t;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(t.Studies.calculateSwingIndex=function(i,n){var e=ft,a,o,r,c,l,s,d,h,p,u,g,f;if(a=n.inputs["Limit Move Value"],(a===null||isNaN(a))&&(a=99999),o=n.chart.scrubbed,r=0,n.startFrom>1){e.B40(6);var w=e.K73(7,6);r=o[n.startFrom-w]["Result "+n.name]}for(var v=Math.max(1,n.startFrom);v<o.length;v++){c="Sw",c+="ing",l=Math.abs(o[v].High-o[v-1].Close),s=Math.abs(o[v].Low-o[v-1].Close),d=Math.abs(o[v].High-o[v].Low),h=Math.abs(o[v-1].Close-o[v-1].Open),p=Math.max(l,s),u=Math.max(d,p),e.B40(173),g=e.B1g(u,h,"0.25",0),u==l?(e.G0i(18),g-=e.K73(.5,s)):u==s&&(e.B40(18),g-=e.K73(.5,l)),e.G0i(106);var m=e.K73(3,13,66);e.G0i(174);var q=e.B1g(16,7,6,17,0);e.B40(9);var x=e.K73(34,16,19);f=m*(o[v].Close-o[v-q].Close+.5*(o[v].Close-o[v].Open)+.25*(o[v-("1"^0)].Close-o[v-x].Open))/g*(p/a),(g===0||a===0)&&(f=0),n.type==c&&(r=0),r+=f,o[v]["Result "+n.name]=r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":"0.5"-0}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":+"0.5"}}})):console.error("swingIndex feature requires first activating studies feature.")};eh=b=>{var t=ft,i,n,e;t.S0g(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(e="a",e+="u",e+="to",i.Studies.calculateTrendIntensity=function(a,o){var r,c,l,s,d,h,p,u,g,f,w,v;r="Signal",r+=" Period",c="_",c+="SM",c+="A";function m(q,x){return Math.abs(x)<+"0.00000001"?100:(t.B40(175),t.K73(1,100,x,1,"100",q))}if(l=o.chart.scrubbed,l.length<o.days+ +"1"){o.error=!![];return}for(s=o.inputs.Field,(!s||s=="field")&&(s="Close"),i.Studies.MA("ma",o.days,s,0,c,a,o),d=0,h=0,g=[],t.c5Q(),f=Math.ceil(o.days/2),p=Math.max(0,o.startFrom-f);p<l.length;p++)w="TI",w+="I",w+=" ",v="_",v+="S",v+="M",v+="A ",!(!l[p]["_SMA "+o.name]&&l[p]["_SMA "+o.name]!==0)&&(u=l[p][s]-l[p][v+o.name],u<0?(t.B40(176),h+=t.K73("1",u)):d+=u,g.push(u),g.length>f&&(u=g.shift(),u<0?(t.B40(177),h-=t.B1g(1,u)):d-=u),!(p<o.startFrom)&&(l[p][w+o.name]=m(d,h)));i.Studies.MA("ema",o.inputs[r],"TII "+o.name,0,"Signal",a,o)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:i.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!![],studyOverBoughtValue:80,studyOverBoughtColor:e,studyOverSoldValue:"20"^0,studyOverSoldColor:"auto"}}}})):(n="trendIntensity featur",n+="e",n+=" requires first activating studies",n+=" feature.",console.error(n))};ih=b=>{var t=ft,i,n;t.S0g(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateTRIX=function(e,a){t.c5Q();var o,r,c,l,s,d,h;if(o=a.chart.scrubbed,o.length<a.days+1){a.error=!0;return}r=a.name,t.B40(3),c=["Close",t.B1g("_MA1 ",r),t.B1g("_MA2 ",r),t.K73("_MA3 ",r)];for(var p=0;p<c.length-("1">>96);p++)l="_",l+="M",l+="A",i.Studies.MA("exponential",a.days,c[p],0,l+(p+1).toString(),e,a);s=c[+"3"];for(var u=Math.max(1,a.startFrom);u<o.length;u++)t.G0i(6),d=o[t.K73(u,1)][s],d&&(h=o[u][s],(h||h===0)&&(t.B40(3),o[u][t.B1g("Result ",r)]=t.B1g(1,d,100,h,t.G0i(150))))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:i.Studies.calculateTRIX}})):(n="t",n+="rix ",n+="feature requires first activating studi",n+="es feature.",console.error(n))};ah=b=>{var t=ft,i;t.S0g(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateTwiggsMoneyFlow=function(n,e){var a,o,r,c,l,s,d,h,p;if(a=e.chart.scrubbed,a.length<e.days){e.error=!![];return}o=0,t.G0i(18),r=t.K73("0",1),t.G0i(13);var u=t.B1g(5,2,19,104);c=a[e.startFrom-u],c&&(l="_s",l+="u",l+="mV ",c["_sumMF "+e.name]&&(o=c["_sumMF "+e.name]),c["_sumV "+e.name]&&(r=c[l+e.name]));for(var g=Math.max(1,e.startFrom);g<a.length;g++){s="_M",s+="FV",s+=" ",d=Math.max(a[g-("1">>0)].Close,a[g].High),h=Math.min(a[g-1].Close,a[g].Low),t.G0i(26);var f=t.K73(7,2,10,8);if(a[g][s+e.name]=a[g].Volume*(f*a[g].Close-d-h)/(d-h===0?+"999999":d-h),g>e.days-+"1"){o*=(e.days-+"1")/e.days,t.B40(111);var w=t.K73(125,14,20,20,8);r*=(e.days-w)/e.days}o+=a[g]["_MFV "+e.name],r+=a[g].Volume,g>e.days-1&&(p="R",p+="esu",p+="lt",p+=" ",r&&(t.B40(12),a[g][p+e.name]=t.K73(r>+"0"?r:999999,o))),a[g]["_sumMF "+e.name]=o,a[g]["_sumV "+e.name]=r}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:i.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):console.error("twiggsMoneyFlow feature requires first activating studies feature.")};oh=b=>{var t,i;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?t.Studies.calculateTypicalPrice?(i="Weig",i+="hted Cl",i+="ose",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:i,calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:+"14"}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")};nh=b=>{var t,i;t="un",t+="d",t+="efined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateUlcerIndex=function(n,e){var a,o,r,c,l;if(a="s",a+="impl",a+="e",o=e.chart.scrubbed,o.length<+"2"*e.days-1){e.error=!0;return}for(r=e.inputs.Field,(!r||r=="field")&&(r="Close"),c=Math.max(e.startFrom,e.days-1);c<o.length;c++)o[c]["_PD2 "+e.name]=Math.pow(100*(o[c][r]/s(e.days,c,r)-1),+"2");i.Studies.MA(a,e.days,"_PD2 "+e.name,0,"_MA",n,e);function s(d,h,p){var u;u=null;for(var g=h-d+ +"1";g<=h;g++)g<("0"^0)||(u=u===null?o[g][p]:Math.max(u,o[g][p]));return u}for(c=Math.max(e.startFrom,2*(e.days-1));c<o.length;c++)l=o[c]["_MA "+e.name],(l||l===0)&&(o[c]["Result "+e.name]=Math.sqrt(l))},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:i.Studies.calculateUlcerIndex,inputs:{Period:"14"^0,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")};rh=b=>{var t=ft,i;t.c5Q(),i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,i.Studies?(i.Studies.calculateUltimateOscillator=function(n,e){var a,o,r,c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k;if(a=e.chart.scrubbed,o=[e.inputs["Cycle 1"],e.inputs["Cycle 2"],e.inputs["Cycle 3"]],r=Math.max(o[0],o[1],o[2]),a.length<r+1){e.error=!![];return}t.B40(73);var S=t.K73(121,6,20,0);c=o[0]*o[S],l=o[0]*o["2"<<0],t.B40(3);var A=t.K73(0,1);s=o[A]*o[+"2"],d=[0,0,0],h=[0,0,0],e.startFrom&&(p="_a",p+="c",p+="ctr ",u="_",u+="acc",u+="bp",u+=" ",a[e.startFrom-1]["_accbp "+e.name]&&(d=a[e.startFrom-1][u+e.name].slice()),a[e.startFrom-1]["_acctr "+e.name]&&(h=a[e.startFrom-1][p+e.name].slice()));for(var _=Math.max(1,e.startFrom);_<a.length;_++){g="_",g+="acctr ",f=Math.min(a[_].Low,a[_-1].Close),w=a[_].Close-f,v=Math.max(a[_].High,a[_-+"1"].Close)-f;for(var T=0;T<o.length;T++)if(d[T]+=w,h[T]+=v,_>o[T]){m=Math.min(a[_-o[T]].Low,a[_-o[T]-1].Close),q=a[_-o[T]].Close-m,t.B40(44);var P=t.K73(7,99,20,20,14);x=Math.max(a[_-o[T]].High,a[_-o[T]-P].Close)-m,d[T]-=q,h[T]-=x}if(a[_]["_accbp "+e.name]=d.slice(),a[_][g+e.name]=h.slice(),!(_<r)){t.B40(36);var E=t.K73(3,1253,66,20);t.G0i(178);var z=t.B1g(14,7,8,197,16);t.G0i(133);var U=t.K73(8,5,2,13);y=s*d[0]/h[0]+l*d["1"<<E]/h[z]+c*d[+"2"]/h[U],t.B40(53),k=t.K73(s,l,c),t.B40(100),a[_]["Result "+e.name]=t.B1g(y,k,100)}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:i.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!![],studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")};sh=b=>{var t,i,n,e,a,o;t="u",t+="nde",t+="f",t+="ined",i=typeof _CIQ!==t?_CIQ:b.CIQ,i.Studies?(e="ha",e+="rm",e+="on",e+="ic",a="me",a+="a",a+="n",o="fiel",o+="d",i.Studies.calculateValuationLines=function(r,c,l){var s=ft,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A;d="Display 3 Standard De",d+="viation (3\u03C3)",h="Display 1 Standa",h+="rd Deviation (1\u03C3)",p=c.inputs.Field=="field"?"Close":c.inputs.Field,u=c.inputs["Average Type"],g=c.inputs["Display Average"],f=c.inputs[h],w=c.inputs["Display 2 Standard Deviation (2\u03C3)"],s.S0g(),v=c.inputs[d],m=[];for(var _=0;_<l.length;++_)l[_]&&!isNaN(l[_][p])&&m.push(l[_][p]);q=function(T,P){var E,z,U,N,C,D,F;switch(E="ha",E+="rm",E+="oni",E+="c",z=T.length,U=0,N=0,C=0,s.S0g(),P){case"mean":for(N=z;C<z;++C)U+=T[C];break;case E:for(U=z;C<z;++C){s.B40(5);var M=s.K73(18,19,0);N+=M/T[C]}break;case"median":if(s.B40(12),D=Math.floor(s.B1g(2,z)),F=T.slice().sort(function(L,O){return L>O?1:L<O?-1:0}),z%2===0){s.G0i(179);var I=s.B1g(11,9,163,7);U=F[D]+F[D-I],N=2}else U=F[D],N=1;break}return s.B40(12),s.B1g(N,U)}(m,u),x=!(f||w||v)||function(T,P){var E,z;E=T.length,z=0,s.c5Q();for(var U=0;U<E;++U)z+=Math.pow(T[U]-P,+"2");return s.G0i(12),Math.sqrt(s.B1g(E,z))}(m,q),c.data={Average:g?[q]:null,"1 Standard Deviation (1\u03C3)":f?[q+x,q-x]:null,"2 Standard Deviation (2\u03C3)":w?[q+x*2,q-x*2]:null,"3 Standard Deviation (3\u03C3)":v?[q+x*("3"*1),q-x*("3"|3)]:null},y=x,c.parameters||(c.parameters={}),v?(s.B40(180),c.parameters.range=[s.B1g(y,q,3,x),s.K73(q,y,"3",x,2,s.B40(181))]):w?(s.B40(180),c.parameters.range=[s.K73(y,q,2,x),s.B1g(y,x,2,q,s.B40(182))]):f?(s.B40(106),c.parameters.range=[s.B1g(y,x,q),s.B1g(q,x,y,s.G0i(53))]):g&&(s.G0i(6),c.parameters.range=[s.K73(q,y),s.K73(q,y,s.G0i(3))]),c.panel&&(k=r.panels[c.panel],S=r.getYAxisByName(k,c.name),S&&(S.decimalPlaces=k.chart.yAxis.printDecimalPlaces,A={yAxis:S},r.calculateYAxisRange(k,S,c.parameters.range["0"<<32],c.parameters.range[1]),r.createYAxis(k,A),r.drawYAxis(k,A)))},i.Studies.displayValuationLines=function(r,c){var l=ft,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z,U,N,C,D,F,M,I;s="c",s+="iq-valuation-deviation-line",d="H",d+="A",d+="V",d+="G",h="Av",h+="erage Type",p=r.panels[c.panel],u=c.getYAxis(r),g=c.getContext(r),f=c.data,w=c.parameters.labels,v=c.inputs[h],m={mean:"AVG",median:"MED",harmonic:d},q=r.canvasStyle("ciq-valuation-average-line"),x=r.canvasStyle(s),l.B40(27),y=l.B1g(0,"3"),l.G0i(121);var L=l.K73(1,19,5,95);k=r.getCanvasFontSize("stx_yaxis")+y*L;for(var O in f)if(!!f[O]){for(l.G0i(183),S=l.K73("Average",O),A=i.Studies.determineColor(c.outputs[O]),_=f[O],T=0;T<_.length;++T)if(C="l",C+="e",C+="ft",D="ya",D+="x",D+="i",D+="s",F="lin",F+="e",M="sol",M+="id",P=_[T],E=r.pixelFromPrice(P,p,u),!(E<=p.top||E>=p.yAxis.bottom)){if(N=S?{pattern:q.borderStyle!="none"?q.borderStyle||"solid":M,lineWidth:parseFloat(q.borderWidth)||+"1",opacity:parseFloat(q.opacity)||1,yAxis:u}:{pattern:x.borderStyle!="none"&&x.borderStyle||"dashed",lineWidth:parseFloat(x.borderWidth)||1,opacity:parseFloat(x.opacity)||1,yAxis:u},r.plotLine(p.left,p.right,E,E,A,F,g,p,N),w===D){r.createYAxisLabel(p,r.formatYAxisPrice(P,p),E,A,null,g,u);continue}E+=Math.floor(N.lineWidth/+"2"),!(E+k>=p.yAxis.bottom)&&(z=(S?m[v]+": ":O[0]+"\u03C3: ")+r.formatYAxisPrice(P,p),U=g.measureText(z).width,I=p.right-U-y,u&&u.position==C&&(I=p.left+y),l.G0i(184),g.strokeText(z,I,l.K73(.5,2,E,k)))}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(r,c,l){ft.S0g(),i.Studies.calculateValuationLines(r,c,l),i.Studies.displayValuationLines(r,c)},overlay:!![],yAxisFN:function(){},inputs:{Field:o,"Average Type":[a,"median",e],"Display Average":!!{},"Display 1 Standard Deviation (1\u03C3)":!1,"Display 2 Standard Deviation (2\u03C3)":![],"Display 3 Standard Deviation (3\u03C3)":![]},outputs:{Average:"#00afed","1 Standard Deviation (1\u03C3)":"#e1e1e1","2 Standard Deviation (2\u03C3)":"#85c99e","3 Standard Deviation (3\u03C3)":"#fff69e"}}})):(n="valuationLines feature requ",n+="ires first activating studies f",n+="eatu",n+="re.",console.error(n))};ch=b=>{var t,i,n,e,a,o,r;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(n="#",n+="3a6",n+="27",n+="d",e="aut",e+="o",a="au",a+="to",o="f",o+="iel",o+="d",r="Relative Volat",r+="ility",t.Studies.calculateRelativeVolatility=function(c,l){var s=ft,d,h,p,u,g,f,w,v,m,q;if(d="s",d+="de",d+="v",h="Smooth",h+="i",h+="ng Pe",h+="riod",l.days=Number(l.inputs[h]),p=Number(l.inputs["STD Period"]),u=l.chart.scrubbed,u.length<l.days+p){l.error=!![];return}function x(_,T){return _+T===0?100:(s.B40(143),s.K73(T,100,_,_))}g=l.inputs.Field,(!g||g=="field")&&(g="Close"),l.std=new t.Studies.StudyDescriptor(l.name,d,l.panel),l.std.chart=l.chart,l.std.days=p,l.std.startFrom=l.startFrom,l.std.inputs={Field:g,"Standard Deviations":"1"^0,Type:"ma"},l.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(c,l.std),f=0,w=0,l.startFrom>1&&(v="_",v+="a",v+="vgG",v+=" ",f=u[l.startFrom-1][v+l.name]||0,w=u[l.startFrom-1]["_avgL "+l.name]||0);for(var y=Math.max(l.startFrom,l.days);y<u.length;y++)if(m=u[y],s.B40(6),q=u[s.B1g(y,1)],!(!m[g]&&m[g]!=="0"-0)&&!(!q[g]&&q[g]!==0)&&!(!m["_STD "+l.name]&&m["_STD "+l.name]!==0)){if(m[g]>q[g]){s.B40(90);var k=s.K73(12,2,101,11,10);f=(f*(l.days-k)+m["_STD "+l.name])/l.days,w=w*(l.days-+"1")/l.days}else{s.G0i(73);var S=s.B1g(401,20,20,0);w=(w*(l.days-S)+m["_STD "+l.name])/l.days,s.B40(60);var A=s.K73(2,13,3,9,2);f=f*(l.days-A)/l.days}m["Rel Vol "+l.name]=x(f,w),m["_avgG "+l.name]=f,m["_avgL "+l.name]=w}l.zoneOutput="Rel Vol"},t.Studies.calculateHistoricalVolatility=function(c,l){var s=ft,d,h,p,u,g,f,w,v,m;d=l.chart.scrubbed;function q(A){var _,T;return _="we",_+="ek",T="d",T+="a",T+="y",s.S0g(),isNaN(A)&&(A=+"365"),c.layout.interval==T?A:c.layout.interval==_?+"52":c.layout.interval=="month"?12:A}if(d.length<l.days+("1"|0)){l.error=!0;return}h=l.inputs.Field,(!h||h=="field")&&(h="Close"),p=l.inputs["Standard Deviations"],p<0&&(p=1),s.G0i(70);var x=s.K73(88,15,14,1234);if(u=x*Math.sqrt(q(l.inputs["Days Per Year"]))*p,g=[],f=0,l.startFrom>"1"*1){s.G0i(6);var y=s.K73(13,12);f=d[l.startFrom-y]["_state "+l.name][0],g=d[l.startFrom-1]["_state "+l.name][1].slice()}for(var k=Math.max(1,l.startFrom);k<d.length;k++){if(s.G0i(6),w=d[s.B1g(k,1)][h],w&&(v=Math.log(d[k][h]/w),g.push(v),f+=v,k>=l.days)){m=0,f/=l.days;for(var S=0;S<g.length;S++)m+=Math.pow(g[S]-f,2);f*=l.days,f-=g.shift(),d[k]["Result "+l.name]=Math.sqrt(m/l.days)*u}d[k]["_state "+l.name]=[f,g.slice()]}},t.Studies.calculateVolatilityCone=function(c,l){var s=ft,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E;d="Vol",s.c5Q(),d+="at",d+="ility sour",d+="ce";var{periodicity:z,interval:U}=c.layout;if(h=l.study?l.study.name:l.type,!t.ChartEngine.isDailyInterval(U)){l.error=`${h} is not supported for intraday periodicities`,p=1747095914,u=-+"374139458",g=2;for(var N=1;s.h3u(N.toString(),N.toString().length,24536)!==p;N++)return;if(s.J3W(g.toString(),g.toString().length,96714)!==u)return}f=Number(l.inputs["Projection Bars"]),w=Number(l.inputs["Days Per Year"]),U=="week"&&(w=+"52"),U=="month"&&(w=+"12"),f=Math.min(f,w),v=l.chart.scrubbed,m=l.inputs.Field,(!m||m=="field")&&(m="Close"),s.B40(3);var C=s.B1g(0,1);for(q=v.length-C;q>0&&v[q][m]===void 0;)q--;if(x=v[q].DT,y=v[q][m],k=v[q].implVol,s.B40(185),S=s.K73(60,60,1e3,24),A=l.inputs[d]==="historical",!A&&k===void 0){l.error=`${h} Study: Implied Volatility source data is not available`;return}l._graphs=[68,+"95"].filter((M,I)=>(s.S0g(),s.B40(3),l.inputs[`Probability ${M}% (${s.B1g(I,1)}\u03C3)`])),_=[],!A&&U==="day"&&z===1?(T=v[q].expiryDates||Array.from(new Set(Object.values(v[q].optionChain||{}).map(({expiration:M})=>+(M&&M.value||M||"0"<<64)).filter(M=>M))),l._expiryDates=T.map(M=>({dt:new Date(M)}))):l._expiryDates=null;for(var D=0;D<=f;D++)v[D+q]||_.push({[l.inputs["Probability 68% (1\u03C3)"]&&"Result 68% Upper "+l.name||void 0]:0,[l.inputs["Probability 95% (2\u03C3)"]&&"Result 95% Upper "+l.name||void 0]:0});l.appendFutureTicks(c,_),A&&t.Studies.calculateHistoricalVolatility(c,l),P=A?v[q][`Result ${l.name}`]/100:k,E=function(M){var I,L,O;s.B40(3),I=v[s.B1g(M,q)],L=w<365?M:Math.round((I.DT-x)/S),O=y*P*Math.sqrt(L/w);var{DT:B}=I;l._graphs.forEach(function(R){var H,W,{quote:X,diff:Z,currentValue:j,sd:Q}=this;s.G0i(19),H=s.K73(j,Z,R<"95"<<64?1:2),s.B40(20),W=s.B1g(R<95?1:2,j,Z),X[`Result ${R}% Upper ${Q.name}`]=H,X[`Result ${R}% Lower ${Q.name}`]=W,(Q._expiryDates||[]).forEach(et=>{var V,K,tt,J;V=995034392,K=603828873,tt=2;for(var at=+"1";s.h3u(at.toString(),at.toString().length,75930)!==V;at++){if(et.dt>x)return;s.B40(35),tt+=s.K73("2",0)}s.J3W(tt.toString(),tt.toString().length,"87707"|3)!==K&&et.dt<x||et.dt<x||(J=Math.abs(et.dt-B),J<S&&(et.Upper=H,et.Lower=W,et.DT=B))})},{quote:I,diff:O,currentValue:y,sd:l})};for(var F="0"*1;F<=f;F++)E(F);l.outputMap={},l._graphs.forEach(M=>{s.B40(3),l.outputMap[`${s.B1g("Resu","lt ")}${M}${s.K73("% U","pper ")}${l.name}`]="Color",l.outputMap[`Result ${M}% Lower ${l.name}`]="Color"})},t.Studies.displayVolatilityCone=function(c,l,s){var d,h,p,u,g;l.error||(d=t.Studies.determineColor(l.outputs.Color),h=c.panels[l.panel],!(!h||h.hidden)&&(p=l.getYAxis(c),u={topColor:d,bottomColor:d,skipTransform:h.name!=l.chart.name,topAxis:p,bottomAxis:p,opacity:.3},!l.highlight&&c.highlightedDraggable&&(u.opacity*=+"0.3"),l._graphs.forEach(f=>{u.topBand=`Result ${f}% Upper ${l.name}`,u.bottomBand=`Result ${f}% Lower ${l.name}`,l.inputs.Fill&&t.fillIntersecting(c,l.panel,u),t.Studies.displayIndividualSeriesAsLine(c,l,h,u.topBand,s),t.Studies.displayIndividualSeriesAsLine(c,l,h,u.bottomBand,s)}),l._expiryDates&&(g=c.chart.context,c.startClip(),g.beginPath(),l._expiryDates.forEach(f=>{var w,v,m;!f.DT||(ft.S0g(),w=c.pixelFromDate(f.DT),v=c.pixelFromPrice(f.Upper,h),m=c.pixelFromPrice(f.Lower,h),c.plotLine({x0:w,x1:w,y0:v,y1:m,color:d,pattern:"dashed"}),g.moveTo(w,v),g.arc(w,v,+"3",+"0",Math.PI*2,!{}),g.moveTo(w,m),ft.B40(6),g.arc(w,m,ft.B1g("3",0),0,Math.PI*2,!1),g.fillStyle=d,g.fill())}),c.endClip())))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,"365"-0],"Standard Deviations":+"1"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:r,range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:o,"STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":a},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:e}}},"Volatility Cone":{name:"Volatility Cone",overlay:!![],calculateFN:t.Studies.calculateVolatilityCone,seriesFN:t.Studies.displayVolatilityCone,inputs:{"Volatility source":["historical","implied"],"Probability 68% (1\u03C3)":!![],"Probability 95% (2\u03C3)":![],"Projection Bars":20,"Days Per Year":[252,365],Field:"field",Period:10,"Standard Deviations":1,Fill:!0},outputs:{Color:n},panelSelect:!{},attributes:{"Volatility source":{hidden:function(){return!t.Studies.impliedVolatilityAvailable}},Field:{hidden:function(){var c;return c="Vol",c+="atility",c+=" sou",c+="rce",this.inputs[c]==="Implied"}},"Standard Deviations":{hidden:function(){var c,l;return c="Impl",ft.c5Q(),c+="ied",l="Volatility sou",l+="rce",this.inputs[l]===c}},yaxisDisplayValue:{hidden:!![]},panelName:{hidden:!0},flippedEnabled:{hidden:!!{}},underlayEnabled:{hidden:!0}}}})):(i="v",i+="olatilityIndex",i+=" feature requires fi",i+="rst activating studies feature.",console.error(i))};lh=b=>{var t=ft,i,n,e;i=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.S0g(),i.Studies?(e="#",e+="b64",e+="a96",i.Studies.displayVolumeProfile=function(a,o,r){var c,l,s,d,h,p,u,g,f,w,v,m,q,x,y,k,S,A,_,T,P,E,z;if(c="B",c+="ar",c+="s ",c+="Color",l="c",l+="olo",l+="r",s="Pr",s+="ice B",s+="ucket",s+="s",d="D",d+="is",t.S0g(),d+="pla",d+="y Volume",!a||!a.chart.dataSet)return;h="stx_v",h+="olume_profil",h+="e",p="stx-float-date",u=o.getContext(a);var{chart:U}=a,{panel:N}=U,{yAxis:C}=N,{flipped:D}=C,{highValue:F,lowValue:M}=U,{displayBorder:I=o.inputs["Display Border"],displayVolume:L=o.inputs[d],widthPercentage:O=o.inputs["Width Percentage"],numberBars:B=o.inputs[s]}=o.parameters;I!==!{}&&(I=!![]),L!==!0&&(L=!1),(!O||O<0)&&(O=.25),(!B||B<0)&&(t.B40(27),B=t.B1g(0,"30"));function R(K){var tt,J,at,ct,G,Y,it,rt,lt,dt,ht,pt,ut,mt,gt,bt;a.canvasColor(h),u.beginPath(),tt=Ct=>Math.round(Ct),J=Ct=>tt(a.pixelFromTransformedValue(Ct)),at=tt(U.width*O),ct=tt(U.right)-+"2.5",G=ct;for(var[yt]=f[0],qt=1;qt<f.length;qt++){var[St,Tt]=f[qt];if(Tt){t.G0i(100),Y=t.B1g(at,v,Tt),it=tt(ct-Y)+(K?-.5:0),t.G0i(158);var wt=t.B1g(0,9,2,4,16);if(rt=J(St)+(K?.5:wt),lt=J(yt)+(K?.5:0),dt=Math.max(rt,C.top),ht=Math.min(lt,C.bottom),pt=dt<=C.bottom&&ht>=C.top,pt){if(u.moveTo(ct,ht),u.lineTo(ct,dt),u.lineTo(it,dt),u.lineTo(it,ht),K)(qt==1||G>it)&&u.lineTo(G,ht);else if(u.lineTo(ct,ht),L&&(ut=i.condenseInt(Tt),t.B40(6),mt=t.K73(ht,dt),P<=mt-2)){gt=void 0;try{({width:gt}=u.measureText(ut))}catch{gt=0}u.textBaseline="top",bt=u.fillStyle,u.fillStyle=E,t.G0i(106),u.fillText(ut,t.B1g(3,gt,it),t.B1g(mt,2,2,dt,P,t.G0i(186))),u.fillStyle=bt}}G=it}else G=ct;yt=St}!o.highlight&&a.highlightedDraggable&&(u.globalAlpha*=.3),K||u.fill(),u.strokeStyle=E,K&&u.stroke(),u.closePath()}if(B=Math.ceil(B),t.G0i(99),g=t.B1g(F,B,M),g!==0){f=[],D&&([F,M]=[M,F]),w=D?-1:1;for(var H=M,W=0;W<=B;H+=g*w,W++)f.push([H,0]);v=0;for(var X=0;X<r.length;X++)if(m=r[X],m!==null){var{Volume:Z}=m;if(!!Z){var{High:j,Low:Q}=m.transform||m;q=[],x=f[0][0],y=null;for(var et=1;et<f.length;et++)y=f[et][+"0"],k=Q>=x&&Q<=y,S=j>=x&&j<=y,A=Q<x&&j>y,(k||S||A)&&q.push(et),x=y;if(q.length){_=Z/q.length;for(var V=0;V<q.length;V++)T=f[q[V]][1]+=_,T>v&&(v=T)}}}if(v===("0"|0)){a.displayErrorAsWatermark("chart",a.translateIf("Not enough data to render the Volume Profile"));return}a.setStyle(h,l,i.Studies.determineColor(o.outputs[c])),P=a.getCanvasFontSize(p),E=a.canvasStyle(h).borderTopColor,z=I&&!i.isTransparent(E),a.canvasFont(p,u),R(),z&&R(!!{}),u.globalAlpha=1}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:i.Studies.displayVolumeProfile,calculateFN:null,inputs:{"Display Border":!![],"Display Volume":!1,"Price Buckets":30,"Width Percentage":.25},outputs:{"Bars Color":e},customRemoval:!0,attributes:{yaxisDisplayValue:{hidden:!!{}},panelName:{hidden:!![]},flippedEnabled:{hidden:!0}}}})):(n="volume",n+="Profile feature re",n+="quires first activating studies feature",n+=".",console.error(n))};dh=b=>{var t=ft;t.c5Q();var i,n,e,a,o,r,c;i=425131259,n=2053243890,e=2;for(var l="1"|1;t.J3W(l.toString(),l.toString().length,19230)!==i;l++)a=~_CIQ==""?_CIQ:b.CIQ,e+=2;t.J3W(e.toString(),e.toString().length,71321)!==n&&(a=typeof _CIQ!="undefined"?_CIQ:b.CIQ),a.Studies?(o="fi",o+="e",o+="l",o+="d",r="#FF",r+="0",r+="0",r+="00",c="Po",c+="s",c+="itive Vol",c+="ume Index",a.Studies.calculateOnBalanceVolume=function(s,d){var h,p,u,g,f,w,v,m,q,x,y,k;if(h="f",h+="i",h+="e",h+="ld",p=d.inputs.Field,(!p||p==h)&&(p="Close"),u=d.inputs["Min Tick Value"],g=!1,!u&&u!=="0"*1){g=!0,f=-2072465213,w=+"1874230752",v=2;for(var S=1;t.J3W(S.toString(),S.toString().length,25416)!==f;S++)u=0,v+=2;t.h3u(v.toString(),v.toString().length,99870)!==w&&(u=+"1")}m=d.chart.scrubbed,q=0;for(var A=d.startFrom;A<m.length;A++)x=m[A],!(!A||!x[p])&&(m[A-1][p]&&(t.B40(6),y=m[t.B1g(A,1)]),y&&(x[p]-y[p]>u?q=1:y[p]-x[p]>u?q=-+"1":g&&(t.G0i(4),q=t.K73(0,"0")),k=y["Result "+d.name],k||(k=0),k+=x.Volume*q,x["Result "+d.name]=k))},a.Studies.calculatePriceVolumeTrend=function(s,d){var h,p,u;if(t.c5Q(),h=d.inputs.Field,(!h||h=="field")&&(h="Close"),p=d.chart.scrubbed,u=0,d.startFrom>"1"<<64){t.G0i(6);var g=t.K73(6,5);u=p[d.startFrom-g]["Result "+d.name]}for(var f=Math.max(1,d.startFrom);f<p.length;f++)if(!!p[f][h]&&!!p[f-1][h]){t.G0i(5);var w=t.B1g(17,1,17);t.B40(13);var v=t.B1g(11,7,18,274);u+=p[f].Volume*(p[f][h]-p[f-w][h])/p[f-v][h],p[f]["Result "+d.name]=u}},a.Studies.calculateVolumeIndex=function(s,d){t.c5Q();var h,p,u,g,f,w,v,m,q,x;if(h="Moving Averag",h+="e Typ",h+="e",p=d.inputs.Field,(!p||p=="field")&&(p="Close"),u=d.chart.scrubbed,u.length<d.days+1){d.error=!![];return}if(t.B40(6),g=t.B1g("100",0),d.startFrom>1){t.B40(36);var y=t.K73(3,136,7,20);g=u[d.startFrom-"1"*y]["Index "+d.name]}for(var k=Math.max(1,d.startFrom);k<u.length;k++)f="In",f+="d",f+="e",f+="x ",w="ob",w+="jec",w+="t",v=u[k][p],m=u[k].Volume,v&&typeof v==w&&(m=v.Volume,v=v[d.subField]),t.B40(6),q=u[t.B1g(k,1)][p],x=u[k-("1"^0)].Volume,q&&typeof q=="object"&&(x=q.Volume,q=q[d.subField]),v&&(!q||((d.type=="Pos Vol"&&m>x||d.type=="Neg Vol"&&m<x)&&(t.G0i(12),g*=t.B1g(q,v)),u[k][f+d.name]=g));a.Studies.MA(d.inputs[h],d.days,"Index "+d.name,0,"MA",s,d)},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:a.Studies.calculateVolumeIndex,inputs:{Period:+"255",Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:a.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:c,calculateFN:a.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:r}},"Price Vol":{name:"Price Volume Trend",calculateFN:a.Studies.calculatePriceVolumeTrend,inputs:{Field:o}},"Trade Vol":{name:"Trade Volume Index",calculateFN:a.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(s,d){t.S0g(),a.Studies.calculateRateOfChange?a.Studies.calculateRateOfChange(s,d):(console.error("Volume Rate of Change study requires first activating momentum feature."),a.Studies.calculateRateOfChange=function(h,p){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",heightFactor:.25},seriesFN:a.Studies.createVolumeChart,calculateFN:a.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(s,d){s.layout.volumeUnderlay=!1,t.c5Q(),s.changeOccurred("layout")},attributes:{panelName:{hidden:!!{}}}}})):console.error("volumeStudies feature requires first activating studies feature.")};hh=b=>{var t,i,n,e,a;t=typeof _CIQ!="undefined"?_CIQ:b.CIQ,t.Studies?(n="0",n+=".",n+="0",n+="1",e="#00F",e+="F00",a="V",a+="ortex Indicator",t.Studies.calculateVortex=function(o,r){var c=ft,l,s,d,h,p,u,g,f,w,v;if(l=r.chart.scrubbed,s=r.days,l.length<s+1){r.error=!!{};return}c.c5Q(),d={tr:0,vmPlus:0,vmMinus:0},r.startFrom>1&&(d=t.clone(l[r.startFrom-1]["_totals "+r.name]));for(var m=Math.max(r.startFrom,1);m<l.length;m++)h=l[m],c.G0i(6),p=l[c.B1g(m,1)],u=Math.abs(h.High-p.Low),g=Math.abs(h.Low-p.High),f=Math.max(h.High,p.Close)-Math.min(h.Low,p.Close),d.tr+=f,d.vmPlus+=u,d.vmMinus+=g,m>s&&(w="_VMMi",w+="n",w+="us ",v="_True ",v+="R",v+="ange",v+=" ",c.G0i(6),d.tr-=l[c.B1g(m,s)][v+r.name],c.G0i(6),d.vmPlus-=l[c.B1g(m,s)]["_VMPlus "+r.name],c.G0i(6),d.vmMinus-=l[c.K73(m,s)][w+r.name]),h["_True Range "+r.name]=f,h["_VMPlus "+r.name]=u,h["_VMMinus "+r.name]=g,m>=s&&(h["+VI "+r.name]=d.vmPlus/d.tr,h["-VI "+r.name]=d.vmMinus/d.tr),h["_totals "+r.name]=t.clone(d)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:a,calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":e,"-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:n}}}})):(i="v",i+="o",i+="rtex feature requires first activating studies ",i+="feature.",console.error(i))};ph=b=>{var t=ft,i,n,e,a;i="un",i+="de",i+="fin",t.S0g(),i+="ed",n=typeof _CIQ!==i?_CIQ:b.CIQ,n.Studies?(a="#a",a+="b6",a+="1",a+="1f",n.Studies.calculateMFI=function(o,r){var c,l,s,d,h,p,u,g;if(c="Scal",c+="e Factor",l=r.chart.scrubbed,t.c5Q(),d=0,h=r.inputs["Scale Factor"],h||(h=r.study.inputs[c]),p=Math.pow(10,Number(h)),r.startFrom>1){t.B40(169);var f=t.B1g(10,6,17);d=l[r.startFrom-f]["_high "+r.name]}for(u=r.startFrom;u<l.length;u++)!l[u]||l[u].Volume&&(g="_h",g+="is",g+="t",l[u][r.name+g]=s=p*(l[u].High-l[u].Low)/l[u].Volume,l[u]["_high "+r.name]=d=Math.max(d,s));r.outputMap={},r.outputMap[r.name+"_hist"]=""},n.Studies.displayMFI=function(o,r,c){var l,s,d,h,p,u,g,f,w,v,m,q,x;l=o.panels[r.panel],s=r.getContext(o),d=r.getYAxis(o),h=d.flipped?d.top:d.bottom,p=o.layout.candleWidth-+"2",p<2&&(p=1),u=n.Studies.determineColor(r.outputs.Green),g=n.Studies.determineColor(r.outputs.Fade),f=n.Studies.determineColor(r.outputs.Fake),w=n.Studies.determineColor(r.outputs.Squat),o.canvasColor("stx_histogram"),r.underlay||(t.G0i(27),s.globalAlpha=t.K73(64,"1")),s.fillStyle="#CCCCCC",o.startClip(r.panel),!r.highlight&&o.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<c.length;y++)v="_",v+="hist",m="_h",m+="i",m+="s",m+="t",q=c[y],t.B40(6),x=c[t.K73(y,1)],x||(x=o.getPreviousBar(o.chart,r.name+m,y)),q&&(x&&(x[r.name+"_hist"]<q[r.name+v]?x.Volume<q.Volume?s.fillStyle=u:x.Volume>q.Volume&&(s.fillStyle=f):x[r.name+"_hist"]>q[r.name+"_hist"]&&(x.Volume<q.Volume?s.fillStyle=w:x.Volume>q.Volume&&(s.fillStyle=g))),q.candleWidth&&(p=Math.floor(Math.max(1,q.candleWidth-2))),s.fillRect(Math.floor(o.pixelFromBar(y,l.chart)-p/2),Math.floor(h),Math.floor(p),Math.floor(o.pixelFromPrice(q[r.name+"_hist"],l,d)-h)));o.endClip()},n.Studies.studyLibrary=n.extend(n.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:n.Studies.displayMFI,calculateFN:n.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:a,Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):(e="williamsMFI feature",e+=" requires first activat",e+="ing studies featur",e+="e.",console.error(e))};uh={CIQ:nt,SplinePlotter:yl,timezoneJS:ql,$$:wl,$$$:kl};(typeof __TREE_SHAKE__=="undefined"||!__TREE_SHAKE__)&&uh.CIQ.activateImports($l,td,ed,id,ad,od,nd,rd,sd,cd,ld,dd,hd,pd,ud,fd,gd,md,bd,vd,xd,yd,qd,wd,kd,Cd,Sd,Dd,Ad,Td,_d,Fd,Md,Pd,Id,Ed,Ld,Ud,zd,Bd,Od,Rd,Nd,Hd,Vd,Wd,jd,Kd,Gd,Yd,Qd,Xd,Zd,Jd,$d,th,eh,ih,ah,oh,nh,rh,sh,ch,lh,dh,hh,ph,null);let mf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i{constructor(a){const{stx:o}=a;if(!o){console.warn("The DataLoader requires an stx parameter");return}this.stx=o,this.cssRequired=!0,o.dataLoader=this,t.UI&&t.UI.observeProperty("uiContext",o,({value:r})=>{!r||(setTimeout(this.subscribeToChanges,0,r),setTimeout(this.registerHotKeys,0,r))})}formatData(a,o){const{defaultPlotField:r}=this.stx.chart,{results:c,fields:l}=a,{name:s}=o,d=l.indexOf("DT"),h=l.indexOf("Date"),p=l.indexOf(s),u=p>-1;let g=[d>-1?d:h];u&&g.push(l.indexOf(s)),c.data=c.map(f=>{const w={};return f.split(",").forEach((v,m)=>{if(u&&g.indexOf(m)===-1)return;let q=l[m],x;try{x=JSON.parse(v)}catch{x=v}let y=q==="DT"||q==="Date"?x:Number.parseFloat(x);w[l[m]]=y,m===p&&(delete w[l[m]],w[r]=y)}),w})}importData(a){const o=this,{stx:r}=this,c=Object.fromEntries(a.formData.entries());let{color:l,display:s,name:d,panel:h,periodicity:p}=c;p=JSON.parse(p),this.formatData(a,c);const{results:u}=a,{data:g}=u,f={symbol:d,static:!0},w={data:g,symbolObject:f,panel:h==="true"?!0:void 0,color:l};s==="secondary"?r.addSeries(d,w,function(){let v=r.getSeries({symbol:d})[0];const m=r.tickFromDate(v.endPoints.end);r.chart.scroll=r.chart.dataSet.length-1-m+r.chart.maxTicks,o.registerDataWarnings(!0)}):(r.quoteDriver.pause(d),r.loadChart(f,{masterData:g,periodicity:p},()=>{o.registerDataWarnings()}))}registerDataWarnings(a){const{stx:o}=this,r=o.addEventListener("menu",({stx:d,menu:h})=>{h===d.container.ownerDocument.querySelector("cq-menu.ciq-period")&&d.dispatch("notification",{message:"Changing Periodicity may lose loaded data",displayTime:3})});let c,l;a&&(c=o.append("removeSeries",s),l=o.append("deleteHighlighed",s)),o.addEventListener("periodicity",({stx:d,differentData:h})=>{const p=d.getSymbols({static:!0});p&&h&&p.forEach(u=>{d.removeSeries(u,d.chart),s()})}),o.addEventListener("newChart",()=>{s()});function s(){o.getSymbols({static:!0}).length||(o.removeEventListener(r),a&&(o.removeInjection(c),o.removeInjection(l)))}}registerHotKeys(a){const o=t.getFromNS(a.config,"hotkeyConfig.hotkeys");if(!o)return;let r=o.find(({action:c})=>c==="dataLoader");r&&(r.action=()=>{a.getAdvertised("Channel").write(null,"dataLoader",!0)})}subscribeToChanges(a){const{stx:o}=a,r=t.UI.BaseComponent.prototype;r.channelSubscribe("channel.dataLoader",c=>{let l=c?{type:"dataLoader",params:{stx:o,context:a}}:{};r.channelWrite("channel.dialog",l,o)},o)}}class n{constructor(a){const o=new FileReader;this.reader=o,this.file=a}async parse(a){const{reader:o}=this;return new Promise((r,c)=>{o.readAsText(a),o.onload=l=>{const s=this.splitResults(o.result),d=s.shift(),p=!!d.match(/"/)?new RegExp(/,(?=")/):new RegExp(/,/);this.fields=d.split(p).map(u=>{let g;try{g=JSON.parse(u)}catch{g=u}return g}),s[s.length-1]===""&&s.pop(),this.results=s,r(s)},o.onerror=l=>{console.warn(l),c(l)}})}determineLineBreak(a){const{length:o}=a,r=`\r
`,c=`
`;let l=Math.floor(o*.05),s=0,d;do{const h=a.substring(s,l);h.indexOf(r)>-1?d=r:h.indexOf(c)>-1?d=c:s+=l}while(!d);return d}splitResults(a){return a.split(this.determineLineBreak(a))}}t.CSVReader=t.CSVReader||n,t.DataLoader=t.DataLoader||i},bf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.ExtendedHours=t.ExtendedHours||function(i){var n=i.stx;this.filter=i.filter,n||(n=i,this.filter=!1);var e={};this.stx=n,this.stx.extendedHours=this,this.cssRequired=!0,n.addEventListener("theme",function(a){e={};for(var o in n.layout.marketSessions)e.session||(e.session={}),e.session[o]=n.canvasStyle("stx_market_session "+o)}),n.addEventListener("symbolChange",function(a){a.action=="master"&&n.layout.extended&&!(n.chart.market.market_def&&n.chart.market.sessions.length)&&t.alert("There are no Extended Hours for this instrument.")}),t.UI&&t.UI.KeystrokeHub.addHotKeyHandler("extendedHours",({stx:a})=>{a.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setExtendedHours()},n),this.prepare=function(a,o){n.layout.extended=a;for(var r in n.layout.marketSessions)e.session={},n.chart.market.disableSession(r);if(n.layout.marketSessions={},a)if(o||(o=["pre","post"]),o.length)for(var c=0;c<o.length;c++)n.layout.marketSessions[o[c]]=!0;else n.layout.marketSessions=o;for(r in n.layout.marketSessions)e.session||(e.session={}),e.session[r]=n.canvasStyle("stx_market_session "+r),n.chart.market.disableSession(r,!0)},this.complete=function(a){if(n.changeOccurred("layout"),!n.chart.market.market_def){a&&a();return}this.filter?(n.createDataSet(),n.draw(),a&&a()):n.loadChart(n.chart.symbol,a)},this.set=function(a,o,r){this.prepare(a,o),this.complete(r)},this.stx.append("drawYAxis",function(a,o){if(!!this.layout.extended&&!(a.yAxis!=o.yAxis||a.shareChartXAxis===!1||a.hidden)){var r=a.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(e.divider=this.canvasStyle("stx_market_session divider"),e.session)){for(var c=r.market,l=[],s={},d,h,p=0;p<r.dataSegment.length;p++){var u=r.dataSegment[p];if(!(!u||!u.DT)){var g=null;if(c.market_def&&(!d||d<=u.DT)){h=c.getSession(u.DT);var f=h!==""&&(!this.layout.marketSessions||!this.layout.marketSessions[h]);d=c[f?"getNextOpen":"getNextClose"](u.DT)}var w=e.session[h];if(w&&(g=w.backgroundColor),s.color&&s.color!=g&&(l.push({start:s.start,end:s.end,color:s.color}),s={}),g){var v=this.layout.candleWidth;u.candleWidth&&(v=u.candleWidth),s.end=this.pixelFromBar(p,r)+v/2,!s.start&&s.start!==0&&(s.start=s.end-v+1),s.color=g}else s={}}}(s.start||s.start===0)&&l.push({start:s.start,end:s.end,color:s.color});var m=t.isTransparent(e.divider.backgroundColor),q=e.divider.width.replace(/px/g,""),x={y0:a.bottom,y1:a.top,color:e.divider.backgroundColor,type:"line",context:r.context,confineToPanel:a,pattern:"dashed",lineWidth:q,deferStroke:!0};for(this.startClip(a.name),r.context.beginPath(),n.highlightedDraggable&&(r.context.globalAlpha*=.3),p=0;p<l.length;p++)r.context.fillStyle=l[p].color,!m&&l[p].start>r.left&&this.plotLine(t.extend({x0:l[p].start,x1:l[p].start},x)),r.context.fillRect(l[p].start,a.top,l[p].end-l[p].start,a.bottom-a.top),!m&&l[p].end<r.right&&this.plotLine(t.extend({x0:l[p].end,x1:l[p].end},x));r.context.stroke(),this.endClip()}}})}},vf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.FullScreen=t.FullScreen||function(i){if(i||(i={}),!i.stx){console.warn("The Full Screen addon requires an stx parameter");return}try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch{console.warn("Full screen mode disabled.");return}this.stx=i.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",function(e){return function(a){e.fullScreenToggle(a),a.stopPropagation()}}(this)))},this.fullScreenToggle=function(e){var a=e.target.ownerDocument;a.documentElement.requestFullscreen||a.documentElement.webkitRequestFullscreen||a.documentElement.mozRequestFullscreen||a.documentElement.msRequestFullscreen?this.getFullScreenElement(a)?a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen?a.webkitExitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.msExitFullscreen&&a.msExitFullscreen():a.documentElement.requestFullscreen?a.documentElement.requestFullscreen():a.documentElement.webkitRequestFullscreen?a.documentElement.webkitRequestFullscreen():a.documentElement.mozRequestFullscreen?a.documentElement.mozRequestFullscreen():a.documentElement.msRequestFullscreen&&a.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;e=this.stx.container.closest("*[cq-context], cq-context, body"),e&&(this.fullScreenState===!0?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(e){this.getFullScreenElement(e.target.ownerDocument)?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(e){return e.fullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement||e.msFullscreenElement};var n=this;["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(e){n.stx.container.ownerDocument.addEventListener(e,n.onFullScreenChange.bind(n))}),this.addFullScreenButton()}},xf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.InactivityTimer=t.InactivityTimer||function(i){if(!i.minutes)return;(!i.interval||i.interval<0)&&(i.interval=60),this.stx=i.stx,this.timeout=i.minutes,this.interval=i.interval,this.wakeCB=i.wakeCB,this.sleepCB=i.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=new Date().getTime(),this.wakeChart=function(a){clearTimeout(this.sleepTimer),this.last=new Date().getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,this.stx.container.ownerDocument.body.classList.remove("ciq-sleeping"),a||t.ChartEngine.registeredContainers.forEach(function(o){i.stx!==o.stx&&o.stx.inactivityTimer&&o.stx.inactivityTimer.wakeChart(!0)})),this.sleepTimer=setTimeout(this.sleepChart.bind(this),this.timeout*6e4),this.wakeCB&&this.wakeCB()},this.sleepChart=function(a){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,this.stx.container.ownerDocument.body.classList.add("ciq-sleeping"),a||t.ChartEngine.registeredContainers.forEach(function(o){i.stx!==o.stx&&o.stx.inactivityTimer&&o.stx.inactivityTimer.sleepChart(!0)})),this.sleepCB&&this.sleepCB()};var n=this;function e(){n.wakeChart()}["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach(function(a){n.stx.container.ownerDocument.addEventListener(a,e,{passive:!1})}),this.stx.inactivityTimer=this,this.wakeChart()}},yf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.RangeSlider=t.RangeSlider||function(i){this.cssRequired=!0;var n=i.stx;n.slider=this;var e=i.height?i.height:"95px",a=i.chartContainer?i.chartContainer:i.stx.container,o=document.createElement("div");o.className="ciq-chart";var r=document.createElement("div");r.className="chartContainer",o.appendChild(r),a.parentElement.parentElement.insertBefore(o,a.parentElement.nextSibling),Object.assign(o.style,{height:e,paddingTop:"5px",display:"none"}),r.style.height="100%",r.dimensionlessCanvas=!0;var c=this.slider=new t.ChartEngine({container:r,preferences:{labels:!1,whitespace:0}});c.xaxisHeight=30,c.manageTouchAndMouse=!1,c.minimumCandleWidth=0,c.chart.yaxisMarginMultiplier=1;var l=c.chart.panel,s=l.subholder,d=l.close;s.style.cursor="ew-resize",s.classList.add("stx_range_slider"),d&&(d.style.display="inline",t.safeClickTouch(d,function(){n.layout.rangeSlider=!1,n.changeOccurred("layout")}));var h=l.yAxis;h.drawCurrentPriceLabel=!1,Object.defineProperty(h,"position",{get:function(){return n.slider.yAxisPosition||n.chart.panel.yAxis.position},set:function(g){n.slider.yAxisPosition=g}});const{get:p,set:u}=Object.getOwnPropertyDescriptor(t.ChartEngine.YAxis.prototype,"width");Object.defineProperty(h,"width",{get:function(){return Math.max(p.call(h),n.chart.yAxis.width)},set:function(g){u.call(h,g)}}),t.extend(h,i.yAxis),c.chart.baseline.userLevel=!1,c.controls.home&&(c.controls.home.style.width=0),c.initializeChart(),t.UI&&(t.UI.KeystrokeHub.addHotKeyHandler("rangeSlider",({stx:g})=>{g.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setRangeSlider()},n),t.UI.observeProperty("breakpoint",n.chart,g=>c.notifyBreakpoint(g.value))),this.updateStyles=function(g,f,w){n.setStyle(g,f,w),this.style=n.canvasStyle("stx_range_slider shading")},this.display=function(g){if(n.layout.rangeSlider!==g){n.layout.rangeSlider=g,n.changeOccurred("layout");return}o.style.display=g?"":"none",n.resizeChart(),o.ownerDocument.defaultView.dispatchEvent(new Event("resize")),g&&(c.resizeChart(),c.initializeChart(),this.requestDraw())},this.setSymbol=function(g){c.chart.panel.display=c.chart.symbol=g,c.chart.symbolObject={symbol:g},c.chart.market=n.chart.market,c.setMainSeriesRenderer(),c.resizeChart(),this.adjustRange(n.chart),this.requestDraw()},this.acceptLayoutChange=function(g){var f=!1;c.layout.rangeSlider!==g.rangeSlider&&n.slider.display(g.rangeSlider);var w=["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"];w.forEach(function(v){t.equals(c.layout[v],g[v])||(c.layout[v]=g[v],f=!0)}),!!t.trulyVisible(o)&&f&&(c.setMainSeriesRenderer(),this.requestDraw())},this.adjustRange=function(g){if(!!g.dataSet&&!(!g.endPoints||!g.endPoints.begin)){var f=c.chart;if(!!f.width){var w=0,v=0;if(n.quoteDriver){var m={symbol:g.symbol,symbolObject:g.symbolObject,interval:n.layout.interval};(m.interval=="month"||m.interval=="week")&&!n.dontRoll&&(m.interval="day");var q=n.quoteDriver.getQuoteFeed(m).behavior;q&&q.bufferSize&&(g.moreAvailable&&(w=q.bufferSize),n.isHistoricalMode()&&(v=q.bufferSize))}f.baseline.defaultLevel=g.baseline.actualLevel,f.scroll=Math.max(0,g.dataSet.length-n.tickFromDate(g.endPoints.begin)-w)+1,c.setMaxTicks(f.scroll-v+2)}}},this.copyData=function(g){if(!!(g.dataSet&&g.masterData)){var f=c.chart;f.masterData=c.masterData=g.masterData.slice(0),f.dataSet=g.dataSet.slice(0),f.state=g.state,this.requestDraw()}},this.calculateYAxisPosition=function(){var g=c.chart.panel,f=c.getYAxisCurrentPosition(g.yAxis,g);f!=g.yAxis.position&&c.calculateYAxisPositions()},this.drawSlider=function(){if(!!t.trulyVisible(o)&&!(!n.chart.dataSet||!n.chart.dataSet.length)){var g=this.style;g||(g=this.style=n.canvasStyle("stx_range_slider shading"));var f=n.chart.panel,w=c.chart.context,v=c.chart.segmentImage||[],m=c.layout.candleWidth/2,q=c.tickLeft=Math.max(n.tickFromPixel(f.left+m),0),x=c.tickRight=Math.min(n.tickFromPixel(f.right-m),n.chart.dataSet.length-1),y=c.pixelLeft=c.pixelFromTick(q)-(v[q]?v[q].candleWidth/2:m),k=c.pixelRight=c.pixelFromTick(x)+(v[x]?v[x].candleWidth/2:m),S=s.offsetLeft,A=S+s.offsetWidth;w.save(),w.beginPath(),w.fillStyle=g.backgroundColor,w.fillRect(S,s.offsetTop,y-S,s.offsetHeight),w.fillRect(A,s.offsetTop,k-A,s.offsetHeight),w.strokeStyle=g.borderTopColor,w.lineWidth=parseInt(g.borderWidth,10),w.moveTo(y,s.offsetTop),w.lineTo(y,s.offsetTop+s.offsetHeight),w.moveTo(k,s.offsetTop),w.lineTo(k,s.offsetTop+s.offsetHeight),w.stroke(),w.beginPath(),w.lineWidth=parseInt(g.width,10),w.lineCap="round",w.moveTo(y,s.offsetTop+s.offsetHeight/4),w.lineTo(y,s.offsetTop+3*s.offsetHeight/4),w.moveTo(k,s.offsetTop+s.offsetHeight/4),w.lineTo(k,s.offsetTop+3*s.offsetHeight/4),w.stroke(),w.restore()}},this.requestDraw=function(){this.drawRequested||(this.drawRequested=setTimeout(()=>{c.draw(),this.drawSlider(),this.drawRequested=clearTimeout(this.drawRequested)},100))},n.addEventListener("layout",function(g){g.stx.slider.acceptLayoutChange(g.stx.layout)}),n.addEventListener("preferences",function(g){const{language:f}=g.stx.preferences;t.I18N&&c.preferences.language!=f&&t.I18N.setLocale(c,f),c.preferences.language=f,this.slider.requestDraw()}),n.addEventListener("symbolChange",function(g){g.action=="master"&&g.stx.slider.setSymbol(g.symbol)}),n.addEventListener("symbolImport",function(g){g.action=="master"&&g.stx.slider.setSymbol(g.symbol),g.stx.slider.acceptLayoutChange(g.stx.layout)}),n.addEventListener("theme",function(g){if(c.clearPixelCache(),c.styles={},c.container.style.backgroundColor="",t.ThemeHelper){var f=new t.ThemeHelper({stx:g.stx});f.params.stx=c,f.update()}}),n.append("createDataSet",function(...g){const[,,{animationEntry:f}={}]=g||[];f||(this.slider.adjustRange(this.chart),this.slider.copyData(this.chart))}),n.append("draw",function({animationEntry:g}={}){g||!t.trulyVisible(o)||!c.chart.dataSet||(this.slider.calculateYAxisPosition(),this.slider.adjustRange(this.chart),this.slider.requestDraw())}),n.prepend("resizeChart",function(){var g=a.parentElement;if(!g)return!0;var f=g.parentElement,w=t.elementDimensions(f).height,v=f.querySelectorAll(".chartContainer");Array.from(v).forEach(function(m){m!==a&&t.trulyVisible(m)&&(w-=t.elementDimensions(m.parentElement,{border:1,padding:1,margin:1}).height)}),g.style.height=w+"px",this.layout.rangeSlider?(o.style.display="",c.resizeChart(),c.initializeChart(),this.slider.requestDraw()):o.style.display="none"}),["mousedown","touchstart","pointerdown"].forEach(function(g){s.addEventListener(g,function(f){var w=c.backOutX(f.pageX);if(!(!w&&w!==0)){w-=f.target.offsetLeft,c.startDrag=w,c.startPixelLeft=c.pixelLeft,c.startPixelRight=c.pixelRight;var v=n.slider.style;v||(v=n.slider.style=n.canvasStyle("stx_range_slider shading"));var m=parseInt(v.borderLeftWidth,10);w+=this.offsetLeft,w<c.pixelRight-m&&(c.needsLeft=!0),w>c.pixelLeft+m&&(c.needsRight=!0),!t.touchDevice&&c.needsLeft&&c.needsRight&&f.target.classList.add("stx-drag-chart")}},{passive:!1})}),["mouseup","mouseover","touchend","pointerup"].forEach(function(g){s.addEventListener(g,function(f){const{which:w,type:v}=f;w===1&&v!=="pointerup"&&v!=="mouseup"||(f.target.classList.remove("stx-drag-chart"),c.chart.panel.subholder.style.cursor="ew-resize",c.startDrag=null,c.needsLeft=!1,c.needsRight=!1)})}),["mousemove","touchmove","pointermove"].forEach(function(g){s.addEventListener(g,function(f){c.timeout||(c.timeout=setTimeout(()=>{const w=()=>c.timeout=clearTimeout(c.timeout),{startDrag:v,startPixelLeft:m,startPixelRight:q,needsLeft:x,needsRight:y}=c;let{tickLeft:k,tickRight:S}=c;if(!v&&v!==0)return w();const{touches:A}=f;let _=(A&&A.length?c.backOutX(A[0].pageX):c.backOutX(f.pageX))-f.target.offsetLeft;if(!_&&_!==0)return w();if(_-=v,x)m+_<c.chart.left&&(_=c.chart.left-m),y&&q+_>=c.chart.right&&(_=c.chart.right-q,c.isHome()||(_+=c.layout.candleWidth/2)),k=c.tickFromPixel(m+_),y&&(S=k+c.tickRight-c.tickLeft);else if(y)S=Math.min(c.tickFromPixel(q+_),n.chart.dataSet.length-1);else return w();let T=n.chart.width/(S-k+1);S>=k&&(x&&y||T>=n.minimumCandleWidth)&&(c.tickLeft=k,c.tickRight=S,n.chart.scroll=n.chart.dataSet.length-k,(!x||!y)&&n.setCandleWidth(T),n.micropixels=0,n.draw()),w()}))},{passive:!1})}),this.adjustRange(n.chart),this.copyData(n.chart),n.draw()}},qf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.Shortcuts=t.Shortcuts||function({stx:i,width:n=580,windowForEachChart:e=!0,config:a}={}){if(!i){console.warn("The Shortcuts addon requires an stx parameter");return}this.stx=i,this.width=n,this.windowForEachChart=e,this.content=this.getShortcutContent(a),this.ensureMessagingAvailable(i),this.enableUI(i),this.cssRequired=!0,i.shortcuts=this,t.UI&&t.UI.KeystrokeHub.addHotKeyHandler("shortcuts",({stx:c,options:l})=>{c.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.showShortcuts()},i);const o=this.stx.container.closest("cq-context"),r=new MutationObserver(()=>this.content=this.getShortcutContent(a));r.observe(o,{attributes:!0}),this.mo=r},t.Shortcuts.prototype.enableUI=function(i){!(i&&t.UI)||setTimeout(()=>{const n=i.uiContext.getAdvertised("Layout");n.showShortcuts=(e,a)=>this.toggle(a)})},t.Shortcuts.prototype.ensureMessagingAvailable=function(i){setTimeout(()=>{const n=i.uiContext.topNode;Array.from(n.querySelectorAll("cq-floating-window")).find(a=>a.closest("cq-context")===n)||n.append(document.createElement("cq-floating-window"))})},t.Shortcuts.prototype.getShortcutContent=function(i){const n=(i.drawingTools||[]).filter(s=>s.shortcut).map(({label:s,shortcut:d})=>`<div class="ciq-shortcut">
					<div>${s}</div>
					<div><span>Alt</span> + <span>${d.toUpperCase()}</span></div>
				</div>`).join(""),e=s=>s.charCodeAt(s.length-1)<127,a=s=>s===" + "?"<span>+</span>":s.split("+").map(d=>d&&d!==" "?"<span>"+d+"</span>":"").join(" + "),o=s=>s.map(d=>d.replace(/Arrow|Key|Digit|^ | $/g,"")).map(d=>d.replace(/\+/," + ")).reduce((d,h)=>!d.includes(h)&&e(h)?d.concat(h):d,[]).map(a).join("<br>"),r=this.stx.container.closest("cq-context");if(!r){this.mo.disconnect();return}const c=s=>r.hasAttribute(s.toLowerCase()+"-active"),l=(i.hotkeyConfig&&i.hotkeyConfig.hotkeys||[]).map(({label:s,action:d,commands:h,extension:p})=>p&&!c(p)?"":`<div class="ciq-shortcut"><div>${s||d}</div><div>${o(h)}</div></div>`).join("");return`
		<div class="ciq-shortcut-container">
			<div>
				<div><b>Drawing tools shortcuts</b></div>
				<div>${n}</div>
			</div>
			<hr>
			<div>
				<div><b>Hotkeys</b></div>
				<div>${l}</div>
			</div>
		</div>
	`},t.Shortcuts.prototype.toggle=function(i){this.stx.dispatch("floatingWindow",{type:"shortcut",title:"Shortcuts",content:this.content,container:this.stx.uiContext.topNode,onClose:()=>this.closed=!0,width:this.width,status:i,tag:this.windowForEachChart?void 0:"shortcut"})}},wf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.TableView=t.TableView||function({stx:n,minColumnWidth:e="84px",coverUIMaxWidth:a=400,coverContainer:o,usePreviousCloseForChange:r=!0}={}){if(!n){console.warn("The TableView addon requires an stx parameter");return}this.stx=n,this.viewAdditionalColumns=!1,this.minColumnWidth=e,this.coverUIMaxWidth=a,this.coverContainer=o,this.usePreviousCloseForChange=r,this.builder=i,this.listeners=[],n.tableView=this,this.cssRequired=!0,t.UI&&t.UI.observeProperty("uiContext",n,({value:c})=>{!c||setTimeout(()=>{this.subscribeToChanges(c);const l=t.getFromNS(c.config,"hotkeyConfig.hotkeys",[]).find(({action:s})=>s==="tableView");l&&(l.action=()=>{const{tableView:s}=c.topNode.ownerDocument.body.keystrokeHub.context.stx;if(s)return s.toggle(),!0})})})},t.TableView.prototype.open=function(n){n&&(this.params=n);const{config:e={},onClose:a}=this.params||{};if(this.view&&this.close(!1),e.minColumnWidth=this.minColumnWidth,e.coverUIMaxWidth=this.coverUIMaxWidth,e.coverContainer=this.coverContainer,this.onClose=a,this.view=this.builder.createTable(this.stx,e),!this.view)return;const{stx:o}=this,r=this.close.bind(this),c=this.view.ownerDocument.body.keystrokeHub;c&&c.addActiveModal(this),setTimeout(()=>this.removeCloseListener=l(this));function l(s){const d=o.uiContext.topNode,h=d.ownerDocument.body,p=w=>w.closest(".ciq-data-table-container"),u=({target:w})=>!p(w)&&r();d.addEventListener("click",u);const g=w=>{const{tableView:v}=h.keystrokeHub.context.stx;if(!!v)if(w.code==="Escape")v.close(),w.preventDefault();else{if(!t.UI||!t.UI.BaseComponent)return;const m=t.UI.BaseComponent.prototype,q=v.view.querySelectorAll("button");if(w.code==="Tab"){let{shiftKey:x}=w||{};m.focusNextItem(q,x,!0);const y=m.findFocused(q);y[0]&&m.highlightItem.call({keyboardNavigation:h.keystrokeHub},y[0])}else if(w.code==="Enter"){const x=m.findFocused(q);x[0]&&m.clickItem(x[0],w)}}};h.addEventListener("keydown",g);const f=t.getFn("UI.getUIManager")(d);return f&&(s.view.show=s.view.hide=function(){},f.openMenu(s.view,{})),()=>{d.removeEventListener("click",u),h.removeEventListener("keydown",g),f&&f.closeMenu(s.view)}}},t.TableView.prototype.close=function(n=!0){let e;if(this.view&&(e=this.view.ownerDocument.body,this.view.remove(),this.view=null),n&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null),e&&e.keystrokeHub){let{tabActiveModals:a}=e.keystrokeHub,o=a.indexOf(this);o>-1&&a.splice(o,1),e.keystrokeHub.highlightAlign()}},t.TableView.prototype.toggle=function(){this[this.view?"close":"open"]()},t.TableView.prototype.subscribeToChanges=function(n,e="channels.tableView"){const{channelSubscribe:a,channelWrite:o}=t.UI.BaseComponent.prototype,{channels:{tableView:r=e}={}}=n.config||{},{stx:c}=this;a(r,l=>{l?c.tableView.open({onClose:()=>{o(r,!1,c)}}):c.tableView.close()},c)};function i(){}i.colHeaders={date:{label:"Date",alias:"DT"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},i.percentDecimalPlaces=2,i.createTable=function(n,e={}){if(!n.chart||!n.chart.dataSegment)return;const{builder:a}=n.tableView,{getChartData:o,dataToHtml:r,dataToCsv:c,downloadCsv:l,getDateFormatter:s,getValueFormatter:d,getVolumeFormatter:h,getFilenameFormatter:p,getSeriesDataNames:u,getStudyDataNames:g,getChartCover:f}=a,w=Object.assign({},this.colHeaders);if(n.chart.highLowBars||(delete w.open,delete w.high,delete w.low),!n.tableView.viewAdditionalColumns)for(let F in w)w[F].cls&&delete w[F];const v=Object.values(w).map(F=>F.label),m=u(n);m.forEach(F=>w[F]={label:F});const q=g(n);q.forEach(F=>{v.includes(F)||(w[F]={label:F})});const x=m.concat(q),{dateFormatter:y=s(n),valueFormatter:k=d(n),percentFormatter:S=d(n,this.percentDecimalPlaces),volumeFormatter:A=h(n),fileNameFormatter:_=p(n),minColumnWidth:T="84px"}=e,P=o(n,{dateFormatter:y,valueFormatter:k,percentFormatter:S,volumeFormatter:A,additionalDataFields:x});this.currentTable=P;const E=f(n,e),{symbolDisplay:z,symbol:U}=n.chart,N=a.getCoverToolbar({symbol:z||U,viewAdditionalColumns:n.tableView.viewAdditionalColumns,copyFn:C,downloadFn:D,toggleAdditionalColumnsFn:()=>{const{tableView:F}=n;F.viewAdditionalColumns=!F.viewAdditionalColumns,F.open()},closeFn:()=>n.tableView.close()});return E.appendChild(N),setTimeout(()=>{const F=r(P,{colHeaders:w,minColumnWidth:T});E.appendChild(F);const M=t.getFromNS(n,"uiContext.config.scrollbarStyling");M&&(M.refresh(E.querySelector("tbody")),M.refresh(E.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0})),n.translateUI&&n.translateUI(E),E.classList.remove("loading")}),E;function C(){const F=document.createElement("textArea");n.container.ownerDocument.body.appendChild(F),F.textContent=c(P,{colHeaders:w,colSeparator:","}),F.select(),n.container.ownerDocument.execCommand("copy"),F.remove(),n.dispatch("notification","copytoclipboard")}function D(){const F=c(P,{colHeaders:w,colSeparator:","}),M=_(F);l(F,M,n)}},i.dataToHtml=function(n,{colHeaders:e,minColumnWidth:a}){const o=Object.keys(e).length,r=`calc((100% - ${10+o*4}px ) / ${o})`,c=Object.entries(e).map(([,{label:h}],p)=>`<th
			scope="col"
			style="width: ${r};"
			>${h.replace("(","  (")}</th>`),l=n.map(h=>`<tr>${Object.keys(e).map((u,g)=>{const f=h[u];return`<td style="width: ${r}">${f}</td>`}).join("")}</tr>`),s=document.createElement("div");s.classList.add("ciq-data-table-wrapper");const d=a?`calc(${o} * ${a})`:"";return s.innerHTML=`
		<table class="header-fixed"	${d?`style="min-width: ${d}"`:""}>
		<thead>${c.join("")}</thead>
		<tbody>${l.join("")}</tbody>
		</table>`,s},i.dataToCsv=function(n,{colHeaders:e,colSeparator:a="	"}){const o=Object.entries(e).map(([,{label:l}])=>`"${l}"`).join(a),r=Object.entries(e).map(l=>l[1].alias||l[0]),c=n.map(l=>r.map(s=>`"${s==="DT"?l[s].toISOString():l[s]}"`).join(a));return`${o}
${c.reverse().join(`
`)}`},i.downloadCsv=function(n,e="filename",a=null){const o=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=window.URL.createObjectURL(o,{type:"text/plain"}),r.download=`${e}.csv`,r.style.display="none";const c=((a||{}).container||{}).ownerDocument||document;c.body.appendChild(r),r.click(),c.body.removeChild(r)},i.getChartData=function(n,{dateFormatter:e,valueFormatter:a,percentFormatter:o,volumeFormatter:r,additionalDataFields:c}){const l=n.chart.dataSegment.filter(u=>u!==null),{usePreviousCloseForChange:s}=n.tableView;let d=[],h=0;const p=l.reduce((u,{Close:g,iqPrevClose:f,Open:w})=>{const v=s?f:w;return typeof g=="undefined"||Number.isNaN(g)||typeof v=="undefined"||Number.isNaN(v)?u:(h++,u+(g-v)/v)},0)/h;return l.forEach((u,g)=>{const{DT:f,displayDate:w,High:v,Low:m,Open:q,Close:x,iqPrevClose:y,Volume:k}=u,S=s?y:q,A=(x-S)/S,_=w||(n.displayZone?t.convertTimeZone(f,n.dataZone,n.displayZone):f),T={DT:f,date:e(_),open:a(q),close:a(x),change:a(x-S),pctChange:o(A*100),pctChangeVsAvg:o((A-p)*100),high:a(v),low:a(m),volume:r(k)};c.forEach(P=>{let E=u[P];if(E==null){T[P]="";return}typeof E=="object"&&(E=E.Close),T[P]=a(E)}),d.push(T)}),d.sort((u,g)=>g.DT-u.DT),d},i.getDateFormatter=function(n){return(e,a)=>e?t.displayableDate(n,n.chart,e,!0):""},i.getValueFormatter=function(n,e){const{chart:{panel:a,yAxis:o},layout:{chartScale:r}}=n;let c;return o.originalPriceFormatter&&o.originalPriceFormatter.func?c=l=>o.originalPriceFormatter.func(n,a,l,e):o.priceFormatter&&r!="percent"&&r!="relative"?c=l=>o.priceFormatter(n,a,l,e):c=l=>n.formatYAxisPrice(l,a,e),l=>c(l).replace(/^-*0\.0*$/,"0")},i.getVolumeFormatter=function(n){return e=>{if(e==null)return"";if(n.internationalizer)return n.internationalizer.priceFormatters[0].format(e);const a=e.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a[0]}},i.getFilenameFormatter=function(n){return e=>{const a=n.chart.symbolDisplay||n.chart.symbol;let o,r;if(e){const c=e.split(`
`);c.length>1&&([,o=""]=c[c.length-1].match(/^"([^"]*)"/)||[],[,r=""]=c[1].match(/^"([^"]*)"/)||[],o=t.yyyymmddhhmmssmmm(new Date(o)),r=t.yyyymmddhhmmssmmm(new Date(r)))}return`${a}${o?` (${o} _ ${r})`:""}`}},i.getChartCover=function(n,{coverUIMaxWidth:e,coverContainer:a}){const o=a&&n.container.ownerDocument.querySelector(a)||(n.uiContext&&n.container.offsetWidth<e?n.uiContext.topNode:n.container.parentElement.parentElement),r=document.createElement("div");Object.assign(r.style,{top:0,left:0,right:0,bottom:0}),r.classList.add("ciq-data-table-container","loading");const c=document.createElement("div");return c.classList.add("ciq-spinner-wrapper"),c.innerHTML='<span class="ciq-spinner"></span>',r.appendChild(c),o.appendChild(r),r},i.getCoverToolbar=function({symbol:n,viewAdditionalColumns:e,copyFn:a,downloadFn:o,toggleAdditionalColumnsFn:r,closeFn:c}){const l=document.createElement("div");l.classList.add("ciq-data-table-toolbar"),l.innerHTML=`
		<div class="ciq-data-table-title"></div>
		<button class="ciq-data-table-copy">${this.copyLabel}</button>
		<button class="ciq-data-table-download">${this.downloadLabel}</button>
		<button class="ciq-data-table-additionalColumns">${this.getAdditionalColumnLabel(e)}</button>
		<cq-close />
	`;const s=l.querySelector(".ciq-data-table-title");s.textContent=n;const d=l.querySelector(".ciq-data-table-copy");a?d.addEventListener("click",a):d.style.display="none";const h=l.querySelector(".ciq-data-table-download");o?h.addEventListener("click",function(){h.blur(),o()}):h.style.display="none";const p=l.querySelector(".ciq-data-table-additionalColumns");return r?p.addEventListener("click",r):p.style.display="none",l.close=c,l},i.copyLabel="Copy",i.downloadLabel="Download",i.getAdditionalColumnLabel=function(n){return`<span>${n?"- ":"+ "}</span>Additional columns`},i.getStudyDataNames=function(n){return Object.values(n.layout.studies||{}).map(e).reduce((o,r)=>o.concat(r),[]);function e(o){return Object.keys(o.outputMap).filter(a)}function a(o){return n.chart.dataSegment.some(r=>r&&r[o])}},i.getSeriesDataNames=function(n){return Object.values(n.chart.seriesRenderers||{}).filter(e=>e.params.name!=="_main_series").map(e=>e.seriesParams.map(({symbol:a})=>a)).reduce((e,a)=>e.concat(a),[])}},kf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(i){if(!t.Marker){console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");return}this.cssRequired=!0;const{stx:n,ohl:e,change:a,volume:o,series:r,studies:c,signalStudies:l,interpolation:s,showOverBarOnly:d,showBarHighlight:h=!0,useDataZone:p}=i,{container:u}=n.chart;let g=u.querySelector("stx-hu-tooltip");g||(g=document.createElement("stx-hu-tooltip"),u.appendChild(g));let f=u.querySelector(".stx-hu-tooltip-highlight");f||(f=document.createElement("div"),f.classList.add("stx-hu-tooltip-highlight"),u.appendChild(f)),t.Marker.Tooltip=function(x){this.className||(this.className="CIQ.Marker.Tooltip"),this.highlightEl=f,x.label="tooltip",t.Marker.call(this,x)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(x,y){return!(!x||!y||+x.DT!=+y.DT||x.Close!=y.Close||x.Open!=y.Open||x.Volume!=y.Volume)},t.Marker.Tooltip.placementFunction=function(x){if(!w()){for(var y=30,k=x.stx,S=0;S<x.arr.length;S++){var A=x.arr[S],_=k.barFromPixel(k.cx),T=k.chart.dataSegment[_],P,E=!0,z,U;if(T!="undefined"&&T&&T.DT&&(P=!0,T.High&&(z=k.pixelFromPrice(T.High)),T.Low&&(U=k.pixelFromPrice(T.Low)),k.chart.highLowBars||T.Close&&(z=k.pixelFromPrice(T.Close)-15,U=k.pixelFromPrice(T.Close)+15),d&&!(k.cy>=z&&k.cy<=U)&&(E=!1)),!(k.insideChart&&!k.openDialog&&!k.activeDrawing&&!k.grabbingScreen&&P&&E)){f.style.display="none",A.node.style.left="-50000px",A.node.style.right="auto",A.lastBar={};return}if(t.Marker.Tooltip.sameBar(k.chart.dataSegment[_],A.lastBar)&&_!=k.chart.dataSegment.length-1){q(A);return}A.lastBar=k.chart.dataSegment[_];var N=A.lastBar.candleWidth||k.layout.candleWidth;parseInt(getComputedStyle(A.node).width,10)+k.chart.panel.left+y+N<k.backOutX(t.ChartEngine.crosshairX)?(A.node.style.left="auto",A.node.style.right=Math.round(u.clientWidth-k.pixelFromBar(_)+y)+"px"):(A.node.style.left=Math.round(k.pixelFromBar(_)+y)+"px",A.node.style.right="auto");var C=parseInt(getComputedStyle(A.node).height,10),D=Math.round(k.backOutY(t.ChartEngine.crosshairY)-C/2);if(D+C>k.height&&(D=k.height-C),D<0&&(D=0),A.node.style.top=D+"px",q(A),h&&!k.layout.crosshair){const I=A.lastBar.candleWidth||k.layout.candleWidth,L=k.pixelFromBar(_)-I/2;let O=I;L+O>k.chart.width&&(O=k.chart.width-L),f.style.display="block",f.style.left=L+"px",f.style.width=O+"px"}else f.style.display="none"}if(t.touchDevice&&k.layout.crosshair){var F=k.overXAxis,M=k.overYAxis;k.overXAxis=k.overYAxis=!1,k.doDisplayCrosshairs(),k.overXAxis=F,k.overYAxis=M}}};function w(){const{headsUp:x,crosshair:y}=n.layout,k=x&&x.floating||x==="floating",S=y&&n.displayCrosshairs&&["static",null,void 0].includes(x);return n.huTooltip&&!k&&!S?(v(),!0):!1}function v(){const{huTooltip:x}=n,{node:y}=x;!y||(y.style.left="-50000px",y.style.right="auto",x.lastBar={},x.highlightEl&&(x.highlightEl.style.display="none"))}function m(){var x=this;if(!w()){var y=x.barFromPixel(x.cx),k=x.chart.dataSegment[y];if(!k){v();return}if(!(t.Marker.Tooltip.sameBar(k,x.huTooltip.lastBar)&&y!=x.chart.dataSegment.length-1)){var S=x.huTooltip.node;Array.from(S.parentElement.querySelectorAll("[auto]")).forEach(function(ht){ht.remove()}),Array.from(S.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach(function(ht){ht.innerHTML=""});var A=x.chart.panel,_=A.yAxis,T={},P=[];if(P.push({member:"DT",display:"DT",panel:A,yAxis:_}),P.push({member:"Close",display:"Close",panel:A,yAxis:_}),T.DT=T.Close=1,a&&t.ChartEngine.isDailyInterval(x.layout.interval)&&P.push({member:"Change",display:"Change",panel:A,yAxis:_}),e&&(P.push({member:"Open",display:"Open",panel:A,yAxis:_}),P.push({member:"High",display:"High",panel:A,yAxis:_}),P.push({member:"Low",display:"Low",panel:A,yAxis:_}),T.Open=T.High=T.Low=1),o&&(P.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),T.Volume=1),r){var E=x.chart.seriesRenderers;for(var z in E){var U=E[z];if(U!==x.mainSeriesRenderer){A=x.panels[U.params.panel],_=U.params.yAxis,!_&&U.params.shareYAxis&&(_=A.yAxis);for(var N=0;N<U.seriesParams.length;N++){var C=U.seriesParams[N],D=C.symbol,F=C.field;D?F&&D!=F&&(D=t.createObjectChainNames(D,F)[0]):D=F;var M=C.display||C.symbol||C.field;D&&!T[M]&&(P.push({member:D,display:M,panel:A,yAxis:_,isSeries:!0}),T[M]=1)}}}}if(c||l)for(var I in x.layout.studies){var L=x.layout.studies[I];if(!(!l&&L.signalData&&!L.signalData.reveal)){A=x.panels[L.panel],_=A&&L.getYAxis(x);for(var O in x.layout.studies[I].outputMap)O&&!T[O]&&(P.push({member:O,display:O,panel:A,yAxis:_}),T[O]=1);T[I+"_hist"]||(P.push({member:I+"_hist",display:I+"_hist",panel:A,yAxis:_}),P.push({member:I+"_hist1",display:I+"_hist1",panel:A,yAxis:_}),P.push({member:I+"_hist2",display:I+"_hist2",panel:A,yAxis:_}),T[I+"_hist"]=1)}}for(var B=0;B<P.length;B++){var R=P[B],H=R.member,W=R.display,X=H=="DT";X&&!p&&!t.ChartEngine.isDailyInterval(x.layout.interval)&&(H="displayDate"),A=R.panel,_=R.yAxis;var Z=null;_&&(!A||A!==A.chart.panel?_.decimalPlaces||_.decimalPlaces===0?Z=_.decimalPlaces:(_.maxDecimalPlaces||_.maxDecimalPlaces===0)&&(Z=_.maxDecimalPlaces):(Z=Math.max(_.printDecimalPlaces,A.chart.decimalPlaces),(_.maxDecimalPlaces||_.maxDecimalPlaces===0)&&(Z=Math.min(Z,_.maxDecimalPlaces))));var j=null,Q=t.existsInObjectChain(k,H);Q?j=Q.obj[Q.member]:H=="Change"&&(j=k.Close-k.iqPrevClose);var et=W.replace(/^(Result )(.*)/,"$2");if(s&&P[B].isSeries&&(j===null||typeof j=="undefined")){var V=x.valueFromInterpolation(y,et,"Close",A,_);if(V===null)break;j=V}if((j||j===0)&&(X||typeof j!="object"||j.Close||j.Close===0)){var K="";if((j.Close||j.Close===0)&&(j=j.Close),j.constructor==Number)if(_)_.originalPriceFormatter&&_.originalPriceFormatter.func?K=_.originalPriceFormatter.func(x,A,j,Z):_.priceFormatter&&_.priceFormatter!=t.Comparison.priceFormat?K=_.priceFormatter(x,A,j,Z):K=x.formatYAxisPrice(j,A,Z,_);else{K=j;var tt=x.internationalizer;if(tt){var J=tt.priceFormatters.length,at=t.countDecimals(K);at>=J&&(at=J-1),K=tt.priceFormatters[at].format(K)}}else j.constructor==Date?X&&x.controls.floatDate&&x.controls.floatDate.innerHTML?x.chart.xAxis.noDraw?K="N/A":K=t.displayableDate(x,A.chart,j):(K=t.yyyymmdd(j),t.ChartEngine.isDailyInterval(x.layout.interval)||(K+=" "+j.toTimeString().substr(0,8))):K=j;var ct=S.querySelector('stx-hu-tooltip-field[field="'+et+'"]');if(ct){ct.querySelector("stx-hu-tooltip-field-value").innerHTML=K;var G=ct.querySelector("stx-hu-tooltip-field-name");G.innerHTML===""&&(G.innerHTML=et,x.translateUI&&x.translateUI(G))}else{var Y=document.createElement("stx-hu-tooltip-field");Y.setAttribute("auto",!0);var it=document.createElement("stx-hu-tooltip-field-name");it.innerHTML=x.translateIf(et),Y.appendChild(it);var rt=document.createElement("stx-hu-tooltip-field-value");rt.innerHTML=K,Y.appendChild(rt),S.appendChild(Y)}}else{var lt=S.querySelector('stx-hu-tooltip-field[field="'+et+'"]');if(lt){var dt=lt.querySelector("stx-hu-tooltip-field-name");dt.innerHTML!==""&&(lt.querySelector("stx-hu-tooltip-field-value").innerHTML="n/a")}}}x.huTooltip.render()}}}function q(x){if(x.node.style.left!=="-50000px"){var y=n.controls.mSticky;if(y&&y.style.display!=="none"){var k=t.stripPX(x.node.style.top)-t.elementDimensions(y,{padding:!0,border:!0,margin:!0}).height;k<0&&(x.node.style.top=t.stripPX(x.node.style.top)-k+"px",k=0);var S=y.style;t.efficientDOMUpdate(S,"top",k+"px"),t.efficientDOMUpdate(S,"left",x.node.style.left),t.efficientDOMUpdate(S,"right",x.node.style.right)}}}u.addEventListener("mouseout",v),n.append("mousemoveinner",function(){q(this.huTooltip)}),n.append("deleteHighlighted",function(){this.huTooltip.lastBar={},this.headsUpHR()}),n.append("headsUpHR",m),n.append("createDataSegment",m),n.huTooltip=new t.Marker.Tooltip({stx:n,xPositioner:"bar",chartContainer:!0,node:g})}:console.error("tooltip addon requires first activating markers feature.")},Cf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.Animation=t.Animation||function(i){if(!i)throw new Error("Invalid constructor arguments.");var n,e,a;if(i instanceof t.ChartEngine?(n=arguments[0],e=arguments[1],a=arguments[2]):(n=i.stx,e=i.animationParameters,a=i.easeMachine),!n)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");this.cssRequired=!0;var o={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};e=t.extend(o,e),o.tension&&(n.chart.tension=e.tension),n.tickAnimator=a||new t.EaseMachine("easeOutCubic",1e3);var r=new t.EaseMachine("easeInOutCubic",1e3),c=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,s=20,d=0,h=!1,p=null;function u(){h=!1,p=null}t.UI&&t.UI.observeProperty("animation",n.layout,({value:g})=>{o.tension&&(n.chart.tension=g?e.tension:0)}),n.addEventListener(["symbolChange","layout"],function(g){u()}),n.prepend("updateCurrentMarketData",function(g,f,w,v){f||(f=this.chart),v&&v.fromTrade&&f.closePendingAnimation&&(v.finalClose=f.closePendingAnimation.Close)}),n.prepend("updateChartData",function(g,f,w){var v=this;if(f||(f=v.chart),!f||!f.defaultChartStyleConfig||f.defaultChartStyleConfig=="none"||!this.layout.animation||w!==void 0&&(w.animationEntry||w.secondarySeries)||!f.dataSegment)return;function m(R){if(!!f.masterData)for(var H=f.masterData.length-1;H>=0;H--){var W=f.masterData[H];if(W.Close||W.Close===0){W.Close=R.Close,R.LastSize&&(W.LastSize=R.LastSize),R.LastTime&&(W.LastTime=R.LastTime),R.Open===void 0&&W.Open!==void 0&&(W.Open=R.Close),R.High===void 0&&W.High!==void 0&&(W.High=R.Close),R.Low===void 0&&W.Low!==void 0&&(W.Low=R.Close),v.updateCurrentMarketData({Close:W.Close,DT:W.DT,LastSize:W.LastSize,LastTime:W.LastTime},null,null,{animationLastBar:!0,fromTrade:!0}),v.createDataSet(null,null,{appending:!0});return}}}function q(){f.animatingHorizontalScroll&&(f.animatingHorizontalScroll=!1,v.micropixels=v.nextMicroPixels=v.previousMicroPixels,f.lastTickOffset=0),f.closePendingAnimation&&(m(f.closePendingAnimation),f.closePendingAnimation=null)}var x=v.tickAnimator,y=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(y){if(!x){console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");return}if(this.prevSymbol!=f.symbol&&(this.prevQuote=0,f.closePendingAnimation=null,this.prevSymbol=f.symbol),q(),x.stop(),g.length>1){var k=g.splice(0,g.length-1),S=t.clone(w);S.animationEntry=!0,S.bypassGovernor=!0,S.noCreateDataSet=!1,S.appending=!0,v.updateChartData(k,f,S)}}var A=t.clone(w);A||(A={}),A.animationEntry=!0,A.bypassGovernor=!0,A.noCreateDataSet=!1,A.appending=!0,A.firstLoop=!0;var _=this.chart.symbol,T=this.layout.periodicity,P=this.layout.interval,E=this.layout.timeUnit;function z(R,H,W){return function(X){var Z=X.Close;if(!f.dataSet.length||_!=f.symbol||T!=v.layout.periodicity||P!=v.layout.interval||E!=v.layout.timeUnit){x.stop(),q();return}var j=t.clone(R);j.Adj_Close=null,j.Close=Math.round(Z*e.granularity)/e.granularity,f.animatingHorizontalScroll&&(v.micropixels=X.micropixels,f.lastTickOffset=X.lineOffset),A.updateDataSegmentInPlace=!x.hasCompleted;var Q=[j];W&&v.layout.interval!=="tick"&&Q.unshift(H),v.updateChartData(Q,f,A),A.firstLoop=!1,x.hasCompleted&&q()}}if(y){var U=g[g.length-1];this.prevQuote=this.currentQuote("Close");var N=!1,C=!1;if(v.isHome()||(C=!0),!U||!U.Close||!this.prevQuote||!this.prevQuote.Close)return!1;if(this.extendedHours&&f.market.market_def){var D=U.DT;if(t.ChartEngine.isDailyInterval(P))h=!f.market.isMarketDate(D);else if(!p||p<=D){var F=f.market.getSession(D);h=F!==""&&(!this.layout.marketSessions||!this.layout.marketSessions[F]),p=f.market[h?"getNextOpen":"getNextClose"](D)}if(h)return this.draw(),!1}var M=T;P=="second"||E=="second"?M*=1e3:(P=="minute"||E=="minute")&&(M*=6e4),isNaN(P)||(M*=P),P=="day"||E=="day"?N=U.DT.getDate()!=this.prevQuote.DT.getDate():P=="week"||E=="week"?N=U.DT.getDate()>=this.prevQuote.DT.getDate()+7:P=="month"||E=="month"?N=U.DT.getMonth()!=this.prevQuote.DT.getMonth():N=U.DT.getTime()>=this.prevQuote.DT.getTime()+M;var I=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,L=0;if(N)if(this.animations.zoom.hasCompleted){var O=this.layout.candleWidth;if(f.scroll<=f.maxTicks)for(;this.micropixels>0;)f.scroll++,this.micropixels-=O;L=O*-1,f.scroll<=f.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+O,f.dataSegment.length<f.maxTicks-e.ticksFromEdgeOfScreen&&!e.stayPut&&(this.nextMicroPixels=this.micropixels,f.scroll>=f.maxTicks-this.preferences.whitespace/this.layout.candleWidth&&f.scroll++),f.animatingHorizontalScroll=I,f.previousDataSetLength=f.dataSet.length):C||f.scroll++}else return!1;f.closePendingAnimation={Close:U.Close,Open:U.Open,High:U.High,Low:U.Low};var B=N&&!I?U.Open:this.prevQuote.Close;return x.run(z(U,t.clone(this.prevQuote),N),{Close:B,micropixels:this.nextMicroPixels,lineOffset:L},{Close:U.Close,micropixels:this.micropixels,lineOffset:0}),!0}}),n.prepend("renderYAxis",function(g){if(this.grabbingScreen||!this.isHome()||!this.layout.animation)return;var f=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(!f)return;var w=g.panel,v=w.yAxis;if(t.Comparison&&v.priceFormatter==t.Comparison.priceFormat)return;function m(y){return function(k){g.animatedLow=k.low,g.animatedHigh=k.high,y.draw()}}if(!g.prevLowValue&&g.prevLowValue!==0&&(g.prevLowValue=g.animatedLow=g.lowValue),!g.prevHighValue&&g.prevHighValue!==0&&(g.prevHighValue=g.animatedHigh=g.highValue),r.running||(g.animatingVerticalScroll=!1),g.prevLowValue>=g.lowValue&&g.prevHighValue<=g.highValue){g.animatingVerticalScroll&&(v.highValue=g.animatedHigh,v.lowValue=g.animatedLow);return}if(r.running&&r.stop(),!(!g.lowValue&&!g.highValue)){var q=g.prevLowValue,x=g.prevHighValue;g.prevLowValue=g.lowValue,g.prevHighValue=g.highValue,g.animatingVerticalScroll=!0,r.run(m(this),{low:q,high:x},{low:g.lowValue,high:g.highValue}),v.lowValue=g.animatedLow,v.highValue=g.animatedHigh}}),n.append("draw",function(){if(!h&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation&&this.layout.animation){d%s===0&&(l++,d=0),d++;var g=this.chart.context,f=this.chart.panel,w=this.currentQuote("Close");if(!w)return;var v=w.Close,m=this.pixelFromTick(w.tick,this.chart);this.chart.lastTickOffset&&(m=m+this.chart.lastTickOffset);var q=this.pixelFromPrice(v,f);this.chart.yAxis.left>m&&this.chart.yAxis.top<=q&&this.chart.yAxis.bottom>=q&&(l>=c.length&&(l=0),g.beginPath(),g.moveTo(m,q),g.arc(m,q,2+l*1.07,0,Math.PI*2,!1),g.fillStyle=c[l],g.fill())}})}},Sf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(i){this.cssRequired=!0,this.update(i),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var n=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",function(e){return function(a){e.smartZoomToggle(a),a.stopPropagation()}}(this));n&&(this.stx.addEventListener("layout",function(e){e.stx.layout.smartzoom===!0?n.classList.add("active"):n.classList.remove("active")}),this.stx.addEventListener("symbolImport",function(e){e.stx.layout.smartzoom===!1&&n.classList.remove("active")}))},this.smartZoomToggle=function(n){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(n){this.stx.layout.smartzoom=n,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(i){i||(i={}),this.stx=i.stx,this.periodicities=i.periodicities,this.boundaries=i.boundaries},t.ContinuousZoom.prototype.execute=function(i){function n(u){var g=u.period||u.periodicity,f=u.interval,w=u.timeUnit||"minute";switch(isNaN(f)&&(w=f,f=1),w){case"month":f*=4.35;case"week":f*=7;case"day":f*=1440;case"minute":f*=60;case"second":break;case"millisecond":f/=1e3;break;default:return null}return g*f}if(!(!this.stx||!this.stx.layout.smartzoom)){var e=this.periodicities,a=this.boundaries,o=this.stx,r=o.layout,c=o.chart;if(!(!e||!a)&&(!i&&a.maxCandleWidth&&r.candleWidth>a.maxCandleWidth||i&&a.minCandleWidth&&r.candleWidth<a.minCandleWidth||!i&&a.minTicks&&c.maxTicks<a.minTicks||i&&a.maxTicks&&c.maxTicks>a.maxTicks)){for(var l={value:i?Number.MAX_VALUE:0},s=n(r),d=0;d<e.length;d++){var h=n(e[d]);(h>s&&h<l.value&&i||h<s&&h>l.value&&!i)&&(l={value:h,periodicity:e[d]})}var p=l.periodicity;p&&o.setRange({dtLeft:c.xaxis[0].DT,dtRight:c.xaxis[c.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:p,padding:o.preferences.whitespace})}}}},Df=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.Outliers=t.Outliers||function(i){if(i||(i={}),!i.stx){console.warn("The Outliers addon requires an stx parameter");return}Array.isArray(i.altColors)||(i.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=i.stx,this.stx.outliers=this,this.cssRequired=!0,this.multiplier=i.multiplier||3,this.altColors=i.altColors,this.axisData={},this.stx.addEventListener("layout",function(e){Object.keys(e.stx.outliers.axisData).forEach(function(a){this.removeAllMarkers(this.axisData[a]),delete this.axisData[a]}.bind(e.stx.outliers))}),t.UI&&t.UI.KeystrokeHub.addHotKeyHandler("outliers",({stx:e})=>{e.container.ownerDocument.body.keystrokeHub.context.advertised.Layout.setOutliers()},this.stx),this.processDataSet=function(e,a,o){if(!e.length||e.length<=1)return!1;var r=[0,0];if(!this.axisData[o.name]){var c="",l=-1;Object.keys(this.axisData).forEach(function(d){this.axisData[d].panel.name==a.name&&l++}.bind(this)),l>-1&&l<this.altColors.length&&(c=this.altColors[l]),this.axisData[o.name]={axis:o,panel:a,displayState:"none",isFlipped:!1,originalZoom:o.zoom,markerColor:c,markers:{},axisMarkers:{}}}var s=this.axisData[o.name];return Object.assign(s,this.find(e)),this.refreshMarkerArray(s),this.refreshMarkers(s),(s.displayState==="low"||s.displayState==="all")&&s.outlierMin!==null?r[0]=s.outlierMin:r[0]=s.trendMin,(s.displayState==="high"||s.displayState==="all")&&s.outlierMax!==null?r[1]=s.outlierMax:r[1]=s.trendMax,r},this.find=function(e){if(!(!e.length||e.length<=0)){var a=function(x,y){return{quote:x.quote,DT:x.quote.DT,value:x.value,position:y}},o=null,r=null,c=null,l=null,s=null,d=null,h=[],p=e.slice();p.sort(function(x,y){return x.value-y.value});var u=p.length,g=p[Math.floor(u/4)].value,f=p[Math.floor(u*(3/4))].value,w=f-g;o=g-w*this.multiplier,r=f+w*this.multiplier;for(var v=0;v<u;v++){var m=p[v],q=p[u-(v+1)];if(m.value<=o&&h.push(a(m,"low")),q.value>=r&&h.push(a(q,"high")),s===null&&m.value<=o&&(s=m.value),d===null&&q.value>=r&&(d=q.value),c===null&&m.value>o&&(c=m.value),l===null&&q.value<r&&(l=q.value),c!==null&&l!==null)break}return{minValue:o,maxValue:r,trendMin:c,trendMax:l,outlierMin:s,outlierMax:d,activeOutliers:h}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var a=e.markers;e.activeOutliers.forEach(function(o){var r=o.DT.getTime().toString();a[r]||(a[r]={isFresh:!0,type:"quote",value:o.value,marker:this.markOutlier(o,o.position,e)}),a[r].isFresh=!0}.bind(this)),e.outlierMax!==null&&(a.axisHigh||(a.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),a.axisHigh.isFresh=!0),e.outlierMin!==null&&(a.axisLow||(a.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),a.axisLow.isFresh=!0)},this.setDisplayState=function(e,a){e!="high"&&e!="low"&&e!="all"&&(e="none");var o=e;a.displayState=="all"&&e=="high"?o="low":a.displayState=="all"&&e=="low"?o="high":a.displayState=="high"&&e=="low"||a.displayState=="low"&&e=="high"?o="all":a.displayState==e&&(o="none"),a.displayState=o,a.axis.zoom=a.originalZoom,this.refreshMarkers(a),this.stx.draw()},this.deprecateMarkers=function(e){var a=function(o){o.marker&&!o.isFresh?(o.marker.remove&&o.marker.remove(),o.marker=null):o.isFresh=!1};Object.keys(e.markers).forEach(function(o){a(this.markers[o]),this.markers[o].marker||delete this.markers[o]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach(function(a){var o=e.markers[a].marker;o&&(o.remove&&o.remove(),o=null),o||delete e.markers[a]})},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){this.displayState=="all"||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,a){var o=!1;e.classList.contains("high")&&(o=!0);var r=a.axis.top;(!a.isFlipped&&!o||a.isFlipped&&o)&&(r=a.axis.bottom-50),e.classList.contains("nano")&&(r=a.axis.top+a.axis.height/2-22);var c=Math.floor(a.axis.left).toString()+"px",l=Math.floor(r).toString()+"px",s=o?a.outlierMax:a.outlierMin;e.style.transform="translate("+c+", "+l+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),c==="0px"?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(a,o){var r=a.markers[o].marker,c=a.markers[o].value,l=a.markers[o].type;c>a.trendMax&&a.axis.high>=c||c<a.trendMin&&a.axis.low<=c?l=="quote"?r.node.style.display="none":l=="axis"&&r.node.classList.add("compress"):l=="quote"?r.node.style.display="block":l=="axis"&&r.node.classList.remove("compress"),l=="axis"&&this.refreshAxisMarkers(r.node,a),a.axis.height<100?r.node.classList.add("nano"):r.node.classList.remove("nano"),a.axis.height<250?r.node.classList.add("micro"):r.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,a){var o=document.createElement("div");o.classList.add("outlier-sticker","axis","mini",e),o.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(o),this.setMarkerColor(o,a.markerColor);var r=this.handleMarkerClick.bind(this,e,a,o);return o.addEventListener("click",r),o.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:o})},this.markOutlier=function(e,a,o){if(!!e){o||(o={panel:this.stx.panels.chart}),a=a||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",a),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,o.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,o.markerColor);var c=this.handleMarkerClick.bind(this,a,o,r);return r.addEventListener("click",c),r.addEventListener("touchend",c),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:a=="high"?"top":"bottom",x:e.quote.DT,panelName:o.panel.name,node:r})}},this.handleMarkerClick=function(e,a,o){o.classList.contains("nano")&&(e="all"),this.setDisplayState(e,a),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var a=this.stx.styles.stx_yaxis;e.style.fontSize=a.fontSize,e.style.fontFamily=a.fontFamily,e.style.color=a.color,e.style.borderColor=a.color}},this.setMarkerColor=function(e,a){if(a!="")for(var o=e.querySelectorAll(".pill"),r=0;r<o.length;r++)o[r].style.backgroundColor=a},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(a,o){var r=a.markers[o].marker,c=a.markers[o].value,l=a.markers[o].type;a.isFlipped?r.node.classList.add("flipped"):r.node.classList.remove("flipped"),l=="quote"&&(c>a.trendMax?a.isFlipped?r.params.yPositioner="bottom":r.params.yPositioner="top":c<a.trendMin&&(a.isFlipped?r.params.yPositioner="top":r.params.yPositioner="bottom"))}.bind(this,e))};var n=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,a,o,r,c,l,s,d,h){return h||(h=[]),s&&d&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),n(e,a,o,r,c,l,s,d,h)}}},Af=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;t.PlotComplementer=t.PlotComplementer||function(i){var n=i.stx,e=t.uniqueID();i.decorator||(i.decorator={});var a=i.decorator.symbol||"_"+e,o=i.decorator.display||" (addl)";n.plotComplementers||(n.plotComplementers=[]),n.plotComplementers.push(this),this.id=i.id||e,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},i.renderingParameters&&(this.defaultRenderingParameters=i.renderingParameters);var r=this;function c(d,h,p,u){function g(q){if(!!q.quoteDriver&&!!i.quoteFeed){for(var x=0;x<q.quoteDriver.quoteFeeds.length;x++)if(q.quoteDriver.quoteFeeds[x].engine==i.quoteFeed)return;return"err"}}if(g(d)!="err"&&(u||(u=h),!d.isEquationChart(h)&&(p||(p={}),!p.isComparison&&u&&u.indexOf(a)==-1))){var f=u+a,w=h+a,v=d.getRendererFromSeries(u),m=t.extend({display:h+o,name:f,symbol:w,symbolObject:{symbol:w,generator:r.id,masterSymbol:h},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:p.panel,yAxis:p.yAxis,shareYAxis:!0,loadData:!!r.quoteFeed,dependentOf:v?v.params.name:d.mainSeriesRenderer.params.name},r.renderingParameters);m.color||(m.color=p.color||"auto"),d.addSeries(f,m,function(q,x){q&&d.removeSeries(f,d.chart),d.chart.seriesRenderers[f]&&(d.chart.seriesRenderers[f].params.display=m.display)})}}function l(d,h,p){h&&h.indexOf(a)==-1&&d.removeSeries(h+a,p)}function s(d){d.action=="master"?(d.prevSymbol||(d.prevSymbol=d.symbol),l(d.stx,d.prevSymbol,d.stx.chart),c(d.stx,d.symbol)):d.action=="add-series"?(l(d.stx,d.id,d.stx.chart),c(d.stx,d.symbol,d.parameters,d.id)):d.action=="remove-series"&&l(d.stx,d.id,d.stx.chart)}n.addEventListener("symbolChange",s),n.addEventListener("symbolImport",s),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(d){if(!(!d.quoteFeed||!d.behavior)){var h=t.clone(d.behavior);h.generator=this.id;var p=d.filter,u=function(g){return p&&!p(g)?!1:g.symbolObject.generator==h.generator};n.attachQuoteFeed(d.quoteFeed,h,u),this.quoteFeed=d.quoteFeed}},this.setQuoteFeed(i),this.resetRenderingParameters()}},Tf={CIQ:nt};(typeof __TREE_SHAKE__=="undefined"||!__TREE_SHAKE__)&&Tf.CIQ.activateImports(mf,bf,vf,xf,yf,qf,wf,kf,Cf,Sf,Df,Af,null);let _f=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{connectedCallback(){this.attached||(super.connectedCallback(),this.init())}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}init(){this.type=this.getAttribute("cq-type")||"helicopter";const{markups:e}=this.constructor;this.addDefaultMarkup(this,e[this.type])}}i.markups={helicopter:`
		<div class="stx-marker-templates" style="left: -1000px; visibility:hidden;">
			<!-- Abstract Markers. You can remove this unless you actually need a helicopter. Seriously though, markers can be anything you want them to be! -->
			<div class="abstract">
				<div class="stx-marker abstract">
					<div class="stx-marker-content">
						<div class="sample">
							<div stage>
								<div helicopter>
									<div propeller style="height: 160px;">
										<div spinner style="-webkit-transform-origin: 40px 0 0; transform-origin: 40px 0 0;">
											<div style="-webkit-transform: rotateY(0deg) translateX(40px); transform: rotateY(0deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-90deg) translateX(40px); transform: rotateY(-90deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-180deg) translateX(40px); transform: rotateY(-180deg) translateX(40px);"></div>
											<div style="-webkit-transform: rotateY(-270deg) translateX(40px); transform: rotateY(-270deg) translateX(40px);"></div>
										</div>
									</div>
									<div heli-body></div>
								</div>
							</div>
							<div class="text">This is an example of a complex marker which can contain html, video, images, css, and animations.</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		`},t.UI.addComponentDefinition("cq-abstract-marker",i)},Ff=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Marker)console.error("advertisement component requires first activating markers feature.");else{class i extends t.UI.ModalTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}close(){this.node.css({display:"none"});var e=this;this.nameValueStore.get("cq-advertisement",function(a,o){if(!a){var r=new Date;e.sleepAmount||(e.sleepAmount={units:1,unitType:"day"});var c=e.sleepAmount.units,l=e.sleepAmount.unitType;l=="minute"?r.setMinutes(r.getMinutes()+c):l=="hour"?r.setHours(r.getHours()+c):l=="day"?r.setDate(r.getDate()+c):l=="week"?r.setDate(r.getDate()+c*7):l=="month"&&r.setMonth(r.getMonth()+c);var s=r.getTime();(!o||typeof o!="object")&&(o={}),o[e.selector]=s,e.nameValueStore.set("cq-advertisement",o)}})}makeMarker(){this.markerExists||(new t.Marker({stx:this.context.stx,xPositioner:"none",label:"advertisement",permanent:!0,node:this.node[0]}),this.markerExists=!0)}setContext(e){const{config:{nameValueStore:a}}=e;this.setNameValueStore(a)}setNameValueStore(e){!e&&t.NameValueStore&&(e=t.NameValueStore),this.nameValueStore=e?new e:{get:function(){},set:function(){}}}setSleepAmount(e,a){this.sleepAmount={units:e,unitType:a}}show(e,a=!1){if(this.selector){var o=this.node.find(this.selector);o.removeClass("ciq-show")}if(this.selector=e,!this.selector){var r=this.node.find("div:first-of-type");this.selector="."+r.attr("class")}this.ignoreSleep=a;var c=this;function l(){c.makeMarker(),c.node.css({display:"block"});var s=c.node.find(c.selector);s.addClass("ciq-show"),c.node.css({height:"0px"}),setTimeout(function(){c.node.css({height:c.node[0].scrollHeight+"px"})},0)}a?l():this.nameValueStore.get("cq-advertisement",function(s,d){if(!s){(!d||typeof d!="object")&&(d={});var h=d[c.selector];h&&h>Date.now()||l()}})}watchForRemoteClose(e){e||(e=1e3);var a=this;setInterval(function(){a.node.css("display")!="none"&&a.nameValueStore.get("cq-advertisement",function(o,r){if(!o){(!r||typeof r!="object")&&(r={});var c=r[a.selector];c&&c>Date.now()&&a.close()}})},e)}}t.UI.addComponentDefinition("cq-advertisement",i)}},Mf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),super.open(e);var a=this.context.stx,o=e.aggregationType,r={kagi:{title:"Set Reversal Percentage"},renko:{title:"Set Brick Size"},linebreak:{title:"Set Price Lines"},rangebars:{title:"Set Range"},pandf:{title:"Set Point & Figure Parameters"}};a.layout.aggregationType!=o&&a.setAggregationType(o);var c=r[o],l=this.node;l.find(".title").text(a.translateIf(c.title));for(var s in r)l.find(".ciq"+s).css(o===s?{display:""}:{display:"none"});l.find(".ciq"+o+" input").each(function(){var d=this.name;(d=="box"||d=="reversal")&&(d="pandf."+d);var h=t.deriveFromObjectChain(a.layout,d);h&&(h.obj[h.member]||h.obj[h.member]===0)?this.value=h.obj[h.member]:a.chart.defaultChartStyleConfig[this.name]&&(this.value=a.chart.defaultChartStyleConfig[this.name])})}}i.markup=`
		<h4 class="title"></h4>
		<cq-close></cq-close>
		<div style="text-align:center;margin-top:10px;">
			<div class="ciqkagi">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="kagi" stxtap="Layout.setAggregationEdit('kagi')">
				</p>
			</div>
			<div class="ciqrenko">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="renko" stxtap="Layout.setAggregationEdit('renko')">
				</p>
			</div>
			<div class="ciqlinebreak">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="priceLines" stxtap="Layout.setAggregationEdit('priceLines')">
				</p>
			</div>
			<div class="ciqrangebars">
				<i>Enter value and hit "Enter"</i>
				<p>
					<input name="range" stxtap="Layout.setAggregationEdit('rangebars')">
				</p>
			</div>
			<div class="ciqpandf">
				<i>Enter box size and hit "Enter"</i>
				<p>
					<input name="box" stxtap="Layout.setAggregationEdit('pandf.box')">
				</p>
				<p>
					<i>Enter reversal and hit "Enter"</i>
				</p>
				<p>
					<input name="reversal" stxtap="Layout.setAggregationEdit('pandf.reversal')">
				</p>
			</div>
			<p>or</p>
			<div class="ciq-btn" stxtap="Layout.setAggregationEdit('auto')">Auto Select</div>
		</div>

	`,t.UI.addComponentDefinition("cq-aggregation-dialog",i)},Pf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Marker)console.error("attribution component requires first activating markers feature.");else{class i extends t.UI.ModalTag{constructor(){super(),this.messages={sources:{simulator:"Simulated data.",demo:"Demo data.",xignite:'<a target="_blank" href="https://www.xignite.com">Market Data</a> by Xignite.',fis_mm:'<a target="_blank" href="https://www.fisglobal.com/">Market Data</a> by FIS MarketMap.',Twiggs:'Twiggs MF Formula courtesy <a target="_blank" href="https://www.incrediblecharts.com/indicators/twiggs_money_flow.php">IncredibleCharts</a>.'},exchanges:{RANDOM:"Data is randomized.","REAL-TIME":"Data is real-time.",DELAYED:"Data delayed 15 min.",RATES:"Yield data latest from source, bid/ask simulated.",BATS:"BATS BZX real-time.",EOD:"End of day data."}}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}insert(e,a){if(!!t.Marker){var o=t.UI.makeFromTemplate(this.template);return o.marker=new t.Marker({stx:e,node:o[0],xPositioner:"none",yPositioner:"none",label:"component",panelName:a,permanent:!0}),o}}setContext(e){this.addDefaultMarkup(),this.template=this.node.find("template"),this.marker=this.insert(e.stx,"chart");var a=this;this.addInjection("append","createDataSet",function(){return a.displayAttribution(this)}),this.displayAttribution()}displayAttribution(e){e||(e=this.context.stx);var a=e.chart,o=e.layout,r=this.marker,c,l;a.attribution&&(c=this.messages.sources[a.attribution.source],l=this.messages.exchanges[a.attribution.exchange],c||(c=""),l||(l=""),c+l!=r.attr("lastAttrib")&&(r.find("cq-attrib-source").html(c),r.find("cq-attrib-quote-type").html(l),e.translateUI&&e.translateUI(r[0]),r.attr("lastAttrib",c+l)));for(var s in o.studies){var d=o.studies[s],h=d.type;if(this.messages.sources[h]){if(d.attribution&&d.attribution.marker.params.panelName==d.panel)continue;c=this.messages.sources[h]||"",l=this.messages.exchanges[h]||"";var p=this.insert(e,d.panel);p.find("cq-attrib-source").html(c),p.find("cq-attrib-quote-type").html(l),e.translateUI&&e.translateUI(p[0]),d.attribution=p}}}}i.markup=`
		<template>
			<cq-attrib-container>
				<cq-attrib-source></cq-attrib-source>&nbsp;
				<cq-attrib-quote-type></cq-attrib-quote-type>
			</cq-attrib-container>
		</template>
	`,t.UI.addComponentDefinition("cq-attribution",i)}},If=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(){this.contextSet||(this.contextSet=!0,this.addDefaultMarkup())}}i.markup=`
		<cq-study-legend cq-chart-legend cq-marker-label="Plots" cq-clone-to-panels="Plots" cq-panel-only cq-marker cq-hovershow cq-content-keys="cq-label,cq-comparison-label">
			<cq-comparison>
				<cq-comparison-key cq-panel-only cq-all-series>
					<template cq-comparison-item>
						<cq-comparison-item>
							<cq-swatch cq-overrides="auto"></cq-swatch>
							<cq-comparison-label>AAPL</cq-comparison-label>
							<!-- cq-comparison-price displays the current price with color animation -->
							<cq-comparison-price cq-animate></cq-comparison-price>
							<!-- cq-comparison-tick-price displays the price for the active crosshair item -->
							<!-- <cq-comparison-tick-price></cq-comparison-tick-price>	-->
							<cq-comparison-loader></cq-comparison-loader>
							<div class="stx-btn-ico ciq-close" keyboard-selectable-child="true"></div>
						</cq-comparison-item>
					</template>
				</cq-comparison-key>
			</cq-comparison>
			<template cq-study-legend>
				<cq-item>
					<cq-label></cq-label>
					<span class="ciq-edit" keyboard-selectable-child="true"></span>
					<div class="ciq-icon ciq-close"></div>
				</cq-item>
			</template>
		</cq-study-legend>
	`,t.UI.addComponentDefinition("cq-chart-legend",i)},Ef=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ModalTag{get displayExchange(){return this.getAttribute("display-exchange")}constructor(){super(),this.previousClose=null}begin(){const e=this;this.addInjection("append","createDataSet",function(){e.update()}),this.update()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){this.context&&t.UI.unobserveProperty("symbolObject",this.context.stx.chart,this.listener),super.disconnectedCallback()}initialize(e){this.params=e||{},typeof this.params.autoStart=="undefined"&&(this.params.autoStart=!0),this.marker=null,this.params.autoStart&&this.begin()}setContext(e){var a=this,o=this.context.stx;this.addDefaultMarkup(),this.symbolDiv=this.querySelector("cq-symbol"),this.symbolDescriptionDiv=this.querySelector("cq-symbol-description"),this.currentPriceDiv=this.querySelector("cq-current-price"),this.todaysChangeDiv=this.querySelector("cq-todays-change"),this.todaysChangePctDiv=this.querySelector("cq-todays-change-pct"),this.chartPriceDiv=this.querySelector("cq-chart-price"),this.changeDiv=this.querySelector("cq-change"),this.exchangeDiv=this.querySelector(".exchange"),this.listener=function(r){const{exchangeDiv:c}=a;if(a.previousClose=o.mostRecentClose("iqPrevClose"),c){const{value:{exchDisp:l}}=r;a.displayExchange&&l?c.innerText=`Exchange: ${l}`:r.value.static?c.innerText="STATIC":c.innerText=""}},t.UI.observeProperty("symbolObject",o.chart,this.listener),this.initialize()}update(){const{stx:e}=this.context,{chart:{symbol:a,symbolDisplay:o},internationalizer:r}=e,{symbolDiv:c,symbolDescriptionDiv:l,exchangeDiv:s,currentPriceDiv:d,changeDiv:h,chartPriceDiv:p,todaysChangeDiv:u,todaysChangePctDiv:g}=this;var f=["false","0",null].indexOf(this.getAttribute("cq-browser-tab"))==-1,w=this.closest("cq-context-wrapper"),v=!w||w&&w.classList.contains("active");v||(f=!1);const m=p&&d;let q=!1,x=!1,y=a?"add":"remove";if(this.classList[y]("stx-show"),c.innerText!==a&&(c.innerText=a,x=!0),l&&l.innerText!==(o||a)&&(l.innerText=o||a),e.isHistoricalModeSet){d.innerText!==""&&(d.innerText=""),h.style.display="none";return}let k="",S=0,A="";const _=e.getFirstLastDataRecord(e.chart.dataSet,"Close",!0);let T="",P="";if(_&&(T=_.Close),m){T!==""&&(P=e.formatYAxisPrice(T,e.chart.panel,e.chart.decimalPlaces));let z=parseFloat(d.innerText);if(d.innerText!==P){d.innerText=P,q=!0;var E=this.currentPriceDiv.getAttribute("cq-animate");typeof E!="undefined"&&t.UI.animatePrice(d,T,z,E=="fade")}}if((m||f)&&a&&(x||q)){let z=_&&_.iqPrevClose;!z&&z!==0&&(z=this.previousClose),h&&(T||T===0)?(k=t.fixPrice(T-z),S=k/z*100,z<=0||T<0?A="N/A":r?A=r.percent2.format(S/100):A=S.toFixed(2)+"%",h.style.display=""):h&&(h.style.display="none");const U=Math.abs(k),N=e.formatYAxisPrice(U,e.chart.panel,e.chart.decimalPlaces);U&&u.innerText!==N&&(u.innerText=N),g&&g.innerText!==A&&(g.innerText=A),A!==""&&k<0?p.classList.add("stx-down"):p.classList.remove("stx-down"),A!==""&&k>0?p.classList.add("stx-up"):p.classList.remove("stx-up"),T=T!==void 0?T:"",k=k!==void 0?k:"",this.title=a+" \u200B \u200B "+P+" \u200B \u200B \u200B ",k>0?this.title+="\u25B2 "+N:k<0&&(this.title+="\u25BC "+N),f&&(this.ownerDocument.title=this.title)}}}i.markup=`
		<cq-symbol></cq-symbol>
		<cq-menu class="ciq-menu ciq-period">
			<span><cq-clickable stxbind="Layout.periodicity">1D</cq-clickable></span>
			<cq-menu-dropdown cq-lift>
				<cq-menu-container cq-name="menuPeriodicity"></cq-menu-container>
			</cq-menu-dropdown>
		</cq-menu>
		<cq-chart-price>
			<cq-current-price cq-animate></cq-current-price>
			<cq-change>
				<div class="ico"></div>
				<cq-todays-change></cq-todays-change> (
				<cq-todays-change-pct></cq-todays-change-pct>)
			</cq-change>
		</cq-chart-price>
		<div class="exchange"></div>
	`,t.UI.addComponentDefinition("cq-chart-title",i)},Lf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ModalTag{connectedCallback(){this.attached||super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(e){this.addDefaultMarkup();var a=this.node;a[0].addEventListener("touchstart",function(r){r.stopPropagation()},{passive:!1}),a[0].addEventListener("mousedown",function(r){r.stopPropagation()});var o=a.find("input");t.UI.stxtap(o[0],function(){this.focus()})}}i.markup=`
		<cq-menu class="ciq-search" keyboard-navigation="false">
			<cq-lookup cq-keystroke-claim cq-uppercase></cq-lookup>
		</cq-menu>
		<cq-toggle class="ciq-draw" cq-member="drawing"><span></span><cq-tooltip>Draw</cq-tooltip></cq-toggle>
		<cq-toggle class="ciq-CH" cq-member="crosshair"><span></span><cq-tooltip>Crosshair</cq-tooltip></cq-toggle>
		<cq-toggle class="ciq-DT" cq-member="tableView"><span></span><cq-tooltip>Table View</cq-tooltip></cq-toggle>
		<cq-menu class="ciq-menu ciq-period">
			<span><cq-clickable stxbind="Layout.periodicity">1D</cq-clickable></span>
			<cq-menu-dropdown>
				<cq-menu-container cq-name="menuPeriodicity"></cq-menu-container>
			</cq-menu-dropdown>
		</cq-menu>
	`,t.UI.addComponentDefinition("cq-chartcontrol-group",i)},Uf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{connectedCallback(){if(!this.attached){super.connectedCallback();var e=this;t.UI.stxtap(this,function(){e.runMethod()})}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}runMethod(){var e=this.node.attr("cq-selector"),a=this.node.attr("cq-method");const{context:o}=this;if(/-dialog/.test(e)&&a==="open"&&o.config){const c=(o.config.channels||{}).dialog||"channel.dialog";this.channelWrite(c,{type:e.replace(/cq-|-dialog/g,""),params:{context:o,caller:this}},o.stx);return}var r=this;this.ownerDocument.querySelectorAll(e).forEach(function(c){c[a]&&c[a].call(c,{context:r.context,caller:r})})}}t.UI.addComponentDefinition("cq-clickable",i)},zf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{connectedCallback(){if(this.attached)return;var e=this;function a(o){e.tap(),o.stopPropagation()}t.UI.stxtap(this,a),super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}tap(){t.UI.containerExecute(this,"close")}}t.UI.addComponentDefinition("cq-close",i)},Bf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ModalTag{constructor(){super(),this.swatchColors=[],this.loading=[]}connectedCallback(){this.attached||(super.connectedCallback(),this.swatchColors=["#8ec648","#00afed","#ee652e","#912a8e","#fff126","#e9088c","#ea1d2c","#00a553","#00a99c","#0056a4","#f4932f","#0073ba","#66308f","#323390"])}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}configureUI(){var e=this.node,a=e.find("cq-accept-btn");this.template=e.find("*[cq-comparison-item]");var o=e.find("cq-swatch").attr("cq-colors");o&&(this.swatchColors=o.split(","));for(var r=0;r<this.swatchColors.length;r++)this.swatchColors[r]=t.convertToNativeColor(this.swatchColors[r]);var c=e.find("cq-lookup");c.length&&c[0].setCallback(function(d){return function(){d.selectItem.apply(d,arguments)}}(this)),t.UI.stxtap(a[0],function(d){c[0].forceInput(),d.stopPropagation()}),this.addClaim(this);const l=this.ownerDocument.body.keystrokeHub;if(!l)return;let s=this.querySelector("cq-menu.cq-comparison-new");if(s){let d=s.hide.bind(s);s.hide=()=>{l.removeActiveModal(this),l.tabOrderSelect(),d()}}t.UI.stxtap(this,function(d){this.keyboardNavigation&&(s&&s.open(),l.addActiveModal(this)),d.stopPropagation()})}keyStroke(e,a,o){if(!this.keyboardNavigation)return;const r=this.querySelectorAll("cq-lookup, cq-swatch, cq-accept-btn, [keyboard-selectable='true']");if(!r.length)return;const c=this.findFocused(r);switch(a){case"Enter":if(!c[0])return;this.clickItem(c[0],o,this);break;case"Tab":c[0]&&c[0].tagName=="CQ-LOOKUP"&&(this.keyboardNavigation.disableKeyControlElement(c[0],!0),e.tabActiveElement.element.blur(),c[0].overrideIsActive=!0);let l=this.focusNextItem(r,!1,!0);l.tagName=="CQ-LOOKUP"&&(l.keyboardNavigation=this.keyboardNavigation,l.onKeyboardSelection&&l.onKeyboardSelection(),l.overrideIsActive=!1);break;case"Esc":case"Escape":this.removeFocused(r);let s=this.querySelector("cq-menu.cq-comparison-new");s&&s.hide();break;default:o.preventDefault();break}}onKeyboardSelection(){let e=this.querySelector("cq-lookup");e.setAttribute("cq-focused","true"),e.overrideIsActive=!1,e.keyboardNavigation=this.keyboardNavigation,e.onKeyboardSelection&&e.onKeyboardSelection()}pickSwatchColor(){t.UI.pickSwatchColor(this,this.querySelector("cq-swatch"))}position(){var e=this.context.stx,a=e.barFromPixel(e.cx);this.tick=e.tickFromPixel(e.cx);var o=e.chart.xaxis[a],r=this;function c(){var s;r.timeout=null;for(var d in e.chart.series){s||(s=r.node.find("cq-comparison-key"));var h=s.find('cq-comparison-item[cq-symbol="'+d+'"] cq-comparison-tick-price');if(h.text()!==""&&h.text(""),h.length&&o&&o.data){var p=e.chart.series[d].parameters.symbol,u=e.padOutPrice(o.data[p]);h.text()!==u&&h.text(u);var g=o.data[p];g!==null&&(typeof g=="object"&&(g=g.Close),u=e.padOutPrice(g),h.text()!==u&&h.text(u))}}}if(this.tick!=this.prevTick){this.timeout&&clearTimeout(this.timeout);var l=0;this.timeout=setTimeout(c,l)}this.prevTick=this.tick}removeSeries(e,a){this.context.stx.removeSeries(e)}renderLegend(){function e(z,U,N){return function(){z.nomore=!0,N.parameters.permanent||z.removeSeries(U,N),z.modalEnd()}}this.pickSwatchColor();var a=this.closest(".stx-holder"),o=t.cqvirtual(this.querySelector("cq-comparison-key"));if(!!o){var r=function(z){o.appendChild(z)},c=this.context.stx;c.getDefaultColor();var l=o.hasAttribute("cq-panel-only"),s=!o.hasAttribute("cq-all-series");for(var d in c.chart.seriesRenderers){var h=c.chart.seriesRenderers[d];if(h!=c.mainSeriesRenderer&&!(s&&!h.params.isComparison)&&!(l&&(!a||h.params.panel!=a.panel.name)))for(var p=0;p<h.seriesParams.length;p++){var u=h.seriesParams[p],g=t.UI.makeFromTemplate(this.template),f=g.find("cq-comparison-swatch"),w=g.find("cq-swatch"),v=g.find("cq-comparison-label"),m=g.find("cq-comparison-description"),q=g.find("cq-comparison-loader"),x=g.find(".ciq-close"),y=c.chart.series[u.id],k=y.parameters,S=k.color||h.colors[y.id].color,A=S=="auto";A&&(S=c.defaultColor),f.css({background:S}),w.length&&(w[0].seriesId=u.id,w[0].setColor(S,!1,A)),k.opacity&&(f.css({opacity:k.opacity}),w.css({opacity:k.opacity})),v.text(c.translateIf(y.display)),m.text(c.translateIf(y.description)),g.attr("cq-symbol",y.id);var _=k.symbol,T=c.mostRecentClose(_);if(T||T===0){var P=g.find("cq-comparison-price");P.length&&P.text(c.padOutPrice(T))}this.loading[k.symbolObject.symbol]?q.addClass("stx-show"):q.removeClass("stx-show"),k.error&&g.attr("cq-error",!0),!k.color||k.permanent?x.hide():t.UI.stxtap(x[0],e(this,y.id,y)),Array.from(g).forEach(r)}}var E=t.climbUpDomTree(t.cqrender(o),"cq-study-legend");E.forEach(function(z){z.displayLegendTitle&&z.displayLegendTitle()})}}setColor(e,a){a.seriesId&&this.context.stx.modifySeries(a.seriesId,{color:e})}startPriceTracker(e){var a=this;this.addInjection("append","createDataSet",function(){e&&a.updatePrices(),this.chart.dataSet&&this.chart.dataSet.length?a.node.attr("cq-show")!=="true"&&a.node.attr("cq-show","true"):a.hasAttribute("cq-show")&&a.removeAttribute("cq-show")})}startTickPriceTracker(){this.prevTick=null,this.addInjection("prepend","headsUpHR",function(e){return function(){e.position()}}(this))}selectItem(e){var a=this.context,o=this;function r(w,v){w&&(v.parameters.error=!0),o.loading[v.parameters.symbolObject.symbol]=!1,o.renderLegend()}var c=this.node.find("cq-swatch"),l="auto",s=null,d=1;if(c[0]){var h=c[0].style;l=h.backgroundColor,s=h.borderTopStyle,d=h.width||1}var p=a.stx;this.loading[e.symbol]=!0;for(var u={name:"comparison "+e.symbol,symbolObject:e,isComparison:!0,color:l,pattern:s,width:d||1,data:{useDefaultQuoteFeed:!0},forceData:!0},g=p.getSeries({symbolObject:e}),f=0;f<g.length;f++)if(g[f].parameters.isComparison){this.loading[e.symbol]=!1;return}e.symbol&&e.symbol.trim().length>0&&(!a.stx.chart.symbol||a.stx.chart.symbol.toLowerCase()!==e.symbol.toLowerCase())?p.addSeries(e.symbol,u,r):this.loading[e.symbol]=!1}setContext(e){this.node.attr("cq-show","true"),this.configureUI();var a=this,o=this.context.stx;o.chart;function r(l){a.renderLegend()}if(["layout","symbolImport","symbolChange","theme"].forEach(function(l){o.addEventListener(l,r)}),this.context.stx.append("modifySeries",function(){a.renderLegend()}),this.renderLegend(),!!this.template.length){var c=t.UI.makeFromTemplate(this.template);this.startPriceTracker(c.find("cq-comparison-price").length),c.find("cq-comparison-tick-price")&&this.startTickPriceTracker()}}updatePrices(){var e,a=this.context.stx,o=a.isHistoricalModeSet,r=t.ChartEngine.isDailyInterval(a.layout.interval);for(var c in a.chart.series){e||(e=this.node.find("cq-comparison-key"));var l=e.find('cq-comparison-item[cq-symbol="'+c+'"] cq-comparison-price');if(l.length){a.chart.series[c].parameters.symbol;var s=a.chart.series[c].lastQuote;if(!s||!s.DT||!s.Close&&s.Close!==0||!r&&a.chart.market&&a.chart.market.getSession(s.DT)===null)continue;var d=s.Close,h=a.chart.series[c].parameters.subField||"Close",p=parseFloat(l.text());d&&(d[h]||d[h]===0)&&(d=d[h]),!d&&d!==0&&a.chart.series[c].lastQuote&&(d=a.chart.series[c].lastQuote[h]);var u=a.padOutPrice(o?"":d);if(l.text()!==u&&l.text(u),o)return;typeof l.attr("cq-animate")!="undefined"&&t.UI.animatePrice(l,d,p)}}}}t.UI.addComponentDefinition("cq-comparison",i)},Of=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(){this.contextSet||(this.contextSet=!0,this.addDefaultMarkup())}}i.markup=`
		<cq-comparison cq-marker>
			<cq-menu class="cq-comparison-new" cq-focus="input">
				<cq-comparison-add-label class="ciq-no-share">
					<cq-comparison-plus></cq-comparison-plus><span>Compare</span><span>...</span>
				</cq-comparison-add-label>
				<cq-comparison-add>
					<cq-comparison-lookup-frame>
						<cq-lookup cq-keystroke-claim cq-uppercase></cq-lookup>
					</cq-comparison-lookup-frame>
					<cq-swatch cq-no-close></cq-swatch>
					<span><cq-accept-btn class="stx-btn">ADD</cq-accept-btn></span>
				</cq-comparison-add>
			</cq-menu>
		</cq-comparison>
	`,t.UI.addComponentDefinition("cq-comparison-lookup",i)},Rf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{get active(){return this.context.stx.currentVectorParameters["active"+this._scope]}set active(e){this.context.stx.currentVectorParameters["active"+this._scope]=e}get color(){return this.context.stx.currentVectorParameters["color"+this._scope]}set color(e){this.context.stx.currentVectorParameters["color"+this._scope]=e}get lineWidth(){return this.context.stx.currentVectorParameters["lineWidth"+this._scope]}set lineWidth(e){this.context.stx.currentVectorParameters["lineWidth"+this._scope]=e}get pattern(){return this.context.stx.currentVectorParameters["pattern"+this._scope]}set pattern(e){this.context.stx.currentVectorParameters["pattern"+this._scope]=e}connectedCallback(){if(!this.attached){Object.defineProperty(this,"_scope",{configurable:!0,enumerable:!1,value:this.getAttribute("cq-cvp-header")||"",writable:!1});var e=this.ownerDocument.querySelector('template[cq-cvp-controller], template[cvp-controller="true"]');if(this.children.length===0&&e){t.UI.makeFromTemplate(e,this);var a=this.querySelector(".ciq-heading");a&&(a.innerHTML=this._scope)}super.connectedCallback()}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}emit(e,a){this.toolbar?this.toolbar.emit():this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:a}))}getColor(e){var a=t.UI.$(e.node||this.node.find("cq-line-color")),o=this.color;(o=="transparent"||o=="auto")&&(o=""),a.css({background:o});var r=t.getBackgroundColor(this.parentNode);if(!o||Math.abs(t.hsl(r)[2]-t.hsl(o)[2])<.2){var c=t.chooseForegroundColor(r);a.css({border:"solid "+c+" 1px"}),o||a.css({background:"linear-gradient(to bottom right, "+c+","+c+" 49%, "+r+" 50%, "+r+")"})}else a.css({border:""})}pickColor(e){var a=t.UI.$(e.node),o=this.ownerDocument.querySelector("cq-color-picker"),r=this,c=a.attr("cq-overrides");if(!o)return console.error("CVPController.prototype.pickColor: no <cq-color-picker> available");c&&(e.overrides=c.split(",")),o.callback=function(l){r.color=l,r.getColor(e),r.emit("change",{color:l})},e.context=this.context,o.display(e)}setContext(){this.setStyle(),this.toolbar&&this.toolbar.dirty(!1)}setStyle(e,a,o){a=a||"1",o=o||"dotted",this.lineWidth=parseInt(a,10),this.pattern=o;var r=this.node.find("*[cq-cvp-line-style]");this.lineStyleClassName&&r.removeClass(this.lineStyleClassName),o&&o!=="none"?(this.lineStyleClassName="ciq-"+o+"-"+this.lineWidth,r.addClass(this.lineStyleClassName)):this.lineStyleClassName=null,this.emit("change",{lineWidth:a,pattern:o})}sync(e){var a=e["active"+this._scope],o=e["color"+this._scope],r=e["lineWidth"+this._scope],c=e["pattern"+this._scope],l="ciq-active",s=this.node.find(".ciq-checkbox");a?s.addClass(l):s.removeClass(l),this.active=!!a,this.color=o||"",this.getColor({}),this.setStyle(null,r,c)}toggleActive(e){var a=t.UI.$(e.node),o="ciq-active";this.active?(this.active=!1,a.removeClass(o)):(this.active=!0,a.addClass(o)),this.emit("change",{active:this.active})}}t.UI.addComponentDefinition("cq-cvp-controller",i)},Nf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{constructor(){super(),this.fileMap=new Map,this.swatchColors=t.UI.defaultSwatchColors}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}abortImport(e){const a=this,o=e.target.nodeName==="CQ-CLOSE",r=[...this.fileMap.keys()],c=l=>s=>s.name===l;for(let l of this.form.querySelectorAll("fieldset[name]")){let s=l.getAttribute("fields");if(e&&e.target.getAttribute("fields")!==s&&!o)continue;let d=r.findIndex(c(s));this.form.removeChild(l.parentElement),this.fileMap.delete(r[d])}o&&(this.fileInput.value=""),this.fileMap.size||(this.fileInput.value="",this.loadDataBtn.style.display="inline-block",this.importBtn.style.display="none",this.querySelector("cq-section.loader").style.display="flex",this.warn("","",!0),t.UI.containerExecute(this,"resize")),a.resetTabSelect()}close(){this.abortImport({target:this.querySelector("cq-close")}),this.channelWrite("channel.dataLoader",!1,this.context.stx),this.loadDataBtn.style.display=this.fileInput.value?"none":"inline",this.querySelector("cq-section.loader").style.display="flex",this.warn("","",!0),super.close()}getFormData(){const e=(a,o)=>r=>{const c=a.elements[r];let l;if(c)l=c.type==="checkbox"?c.checked:c.value;else{const s=a.querySelector(`[name='${r}']`);s&&(l=s.value)}o.formData.append(r,l)};for(let a of this.fileMap){const[o,r]=a;let c=this.querySelector(`[name='${o.name}'] fieldset`);r.formData=new FormData,["name","display","periodicity","panel","color"].forEach(e(c,r))}}hide(){this.channelWrite("channel.dataLoader",!1,this.context.stx)}importData(e){e.preventDefault();const{dialog:a}=this;if(!a.validate()())return;let{context:{stx:o},fileMap:r}=a;a.getFormData(),r.forEach(c=>{o.dataLoader.importData(c)}),a.close()}async loadData(){if(this.validateFileInput()(),!this.warning.getAttribute("cq-active")){for(const e of this.fileInput.files){let a=new t.CSVReader(e);this.fileMap.set(e,a),await a.parse(e)}this.loadDataBtn.style.display="none",this.querySelector("cq-section.loader").style.display="none",this.showData()}}resetTabSelect(){const{uiManager:{keystrokeHub:e}}=this.context;e.highlightAlign()}showData(){const{context:{stx:e,config:a={}},keystrokeHub:o}=this,r=s=>d=>{d.setAttribute("fields",s),d.addEventListener("pointerup",h=>{h.preventDefault(),t.UI.containerExecute(d,"abortImport",[h])})};let c=!1,l=this.querySelector("template");for(const s of this.fileMap){const[d,h]=s,p=d.name,u=l.content.cloneNode(!0);u.firstElementChild.id+=`${p}`,u.firstElementChild.setAttribute("name",p);const g=u.querySelector("fieldset");g&&(g.setAttribute("fields",p),g.setAttribute("name","fields"));const f=u.querySelector("legend.file-name");f.innerText=`File: ${p}`;const w=u.querySelector(".data-name input");w.setAttribute("placeholder",p),w.value=p;const v=u.querySelector(".ciq-select[name='periodicity']");(a.menuPeriodicity?a.menuPeriodicity:function(){const S=e.getPeriodicity();return[{value:S,label:`${S.period}, ${S.timeUnit}`}]}()).filter(S=>S.label).forEach(S=>{const A=document.createElement("option");A.value=A.innerText=S.label,A.value=JSON.stringify(S.value),v.append(A)});const q=u.querySelector(".data-fields ul");let{fields:x=[]}=h;x.forEach(S=>{const A=document.createElement("li");A.innerText=S,q.append(A)});const y=u.querySelector("[name=display]"),k=u.querySelector(".secondary-options");c?(y.value="secondary",k.style.display="block"):c=!0,y.addEventListener("change",function(S){let A=this.value.toLowerCase()==="secondary";k.style.display=A?"block":"none",o.highlightAlign()}),u.querySelectorAll(".abort").forEach(r(p)),t.UI.pickSwatchColor(this,u.querySelector("cq-swatch")),this.form.append(u),this.form.querySelectorAll("input:not([type=submit]").forEach(S=>{S.addEventListener("keypress",A=>{A.key==="Enter"&&A.preventDefault()})})}this.importBtn.style.display="inline",t.UI.containerExecute(this,"resize"),this.resetTabSelect()}setContext(e){this.context=e,this.addDefaultMarkup(),this.form=this.querySelector("form"),this.fileInput=this.querySelector("input[type=file]"),this.loadDataBtn=this.querySelector("button.load"),this.importBtn=this.querySelector("button.import"),this.controls=this.querySelector("div.ciq-dialog-cntrls"),this.warning=this.querySelector(".invalid-warning"),this.warningTitle=this.warning.querySelector(".invalid-warning-title"),this.warningText=this.warning.querySelector(".invalid-warning-text"),this.form.dialog=this,this.form.addEventListener("submit",this.importData),this.form.addEventListener("change",this.validate()),this.fileInput.addEventListener("change",this.validateFileInput()),this.keystrokeHub=e.uiManager.keystrokeHub}validate(){const e=this;return function(a){e.getFormData();let o,r=!0;for(const l of e.fileMap){const[,s]=l,{formData:d,fields:h}=s,p=d.get("display"),u=d.get("periodicity");if(!((h.includes("DT")||h.includes("Date"))&&h.some(f=>f==="Close"||f==="Value")))return r=!1,c({messageTitle:"Invalid Data fields",messageText:'Your data contains invalid schema to display. It must include a "DT" column and either a "Close" or "Value" column.'},r);if(p==="secondary"){if(!t.equals(JSON.parse(u),e.context.stx.getPeriodicity()))return r=!1,c({messageTitle:"Mis-matched periodicities:",messageText:"Having mixed periodicities can result in chart displaying incorrect time scales. Check your data and try again."},r)}else{if(o)return r=!1,c({messageTitle:"Multiple Main series",messageText:"Detected multiple data files set to display main data. Only one data file can be main."},r);o=!0}}return c({messageTitle:"",messageText:""},r);function c({messageTitle:l,messageText:s},d){return e.warn(l,s,d),e.resetTabSelect(),d}}}validateFileInput(){const e=this;return function(a){const o=e.files||e.fileInput.files;let r=!0,c="",l="";Object.values(o).forEach(function(s){const{name:d}=s,h=d.lastIndexOf(".")>0&&d.slice(d.lastIndexOf("."),d.length);(h&&h!==".csv"||i.mimeTypes.indexOf(s.type)==-1)&&(c="Invalid File Type",l="Data Importer requires a text/csv file to work. Please select a CSV file.",r=!1)}),o.length||(c="Please select a file!",l="Data Importer requires a text/csv file to work. Please select a CSV file.",r=!1),e.warn(c,l,r),e.resetTabSelect()}}warn(e,a,o){this.warningTitle.innerText=e,this.warningText.innerText=a,o?this.warning.removeAttribute("cq-active"):this.warning.setAttribute("cq-active",!0)}}i.mimeTypes=["text/csv","application/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"],i.markup=`
<h4 class="title">Import Data</h4>
<cq-close></cq-close>
<cq-scroll cq-no-maximize>
	<cq-section class="loader">
		<label for="fileSelector">Choose one or more CSV files to load data into the chart:</label>
		<input name="fileSelector" type="file" multiple accept=".csv" />
	</cq-section>
	<cq-section class="ciq-dialog-cntrls">
		<button class="ciq-btn load" stxtap="loadData()">Open Files</button>
	</cq-section>
	<cq-section>
		<form class="import-data" id="data-wizard"></form>
	</cq-section>
	<template class="table">
		<cq-section class="data-table">
			<fieldset form="data-wizard" name="file-fields">
			<legend class="file-name"></legend>
			<div class="data-name"><label for="name">Name for imported data:</label><input type="text" name="name" required /></div>
			<div class="data-periodicity">
				<label for="periodicity">Data Periodicity:</label>
				<span class="select-holder">
					<select name="periodicity" class="ciq-select" form="data-wizard" required>
				</span>
				</select>
			</div>
			<div class="data-fields">
				<label>Data Fields:</label>
				<ul class="content-justify-end"></ul>
			</div>
			<div class="data-display">
				<label>Display As:</label>
				<span class="select-holder">
					<select name="display" form="data-wizard" class="ciq-select" required>
					<option value="main">Main Series</option>
					<option value="secondary">Secondary Series</option>
					</select>
				</span>
			</div>
			<div class="content-justify-end">
				<fieldset class="secondary-options">
				<legend>Secondary Series Options:</legend>
					<div>
						<label>Add in new panel: </label><input type="checkbox" name="panel" />
					</div>
					<div>
						<label>Color: </label><cq-swatch name="color"></cq-swatch>
					</div>
				</fieldset>
			</div>
		</div>
		<div class="buttons">
			<button class="ciq-btn-negative abort">Remove</button>
		</div>
		</fieldset>
		</cq-section>
	</template>
	<cq-section>
		<div class="invalid-warning">
			<div class="invalid-warning-title"></div>
			<div class="invalid-warning-text"></div>
		</div>
	</cq-section>
	<cq-section class="ciq-dialog-cntrls">
		<button class="ciq-btn import" form="data-wizard" type="submit">Confirm</button>
	</cq-section>

</cq-scroll>
`,t.UI.addComponentDefinition("cq-data-dialog",i)},Hf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{constructor(){super(),this.activeAttributes={}}connectedCallback(){if(this.attached)return;this.isDialog=!0,super.connectedCallback();var e=this;function a(r){e.tap(r)}t.UI.stxtap(this,a);var o=t.UI.getUIManager(this);o.registerForResize(this),this.uiManager=o,this.hasAttribute("cq-no-claim")||this.addClaim(this),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0")}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}disconnectedCallback(){this.hasAttribute("cq-no-claim")||this.removeClaim(this),this.uiManager.unregisterForResize(this),super.disconnectedCallback()}getKeyboardSelectableItems(){return this.querySelectorAll("[keyboard-selectable='true'], input, .ciq-select, cq-swatch, .ciq-btn, .ciq-btn-negative, cq-scroll li")}keyStroke(e,a,o){if(e.tabActiveModals[0]!==this)return;let{shiftKey:r}=o||{};const c=this.getKeyboardSelectableItems();if(a==="Tab"){const l=this.focusNextItem(c,r,!0),s=this.querySelector("cq-scroll");l&&s&&(s.scrollToElement(l),setTimeout(()=>e.highlightAlign()))}else if(a=="Enter"){const l=this.findFocused(c)[0];l&&(this.clickItem(l,o,this),typeof l.click=="function"&&l.click())}}onKeyboardSelection(){this.keyboardNavigation.highlightHide()}onKeyboardDeselection(){this.keyboardNavigation&&this.keyboardNavigation!==null&&this.keyboardNavigation.highlightAlign()}clickItem(e,a,o){if(e&&this.keyboardNavigation){const r=e.querySelector("cq-menu-dropdown");r&&(r.keyboardOriginationElement=o,this.keyboardNavigation.setKeyControlElement(r))}super.clickItem(e,a,this)}processEsc(e){return this.closeActiveMenu()?(e.tabActiveModals[0]&&e.setKeyControlElement(e.tabActiveModals[0]),!0):!1}closeActiveMenu(){const e=this.querySelector("*.stxMenuActive");if(e){const a=t.UI.getUIManager(this);return a&&a.closeMenu(e),!0}return!1}addActiveAttribute(e){this.activeAttributes[e]=!0}center(){var e=this.parentElement;e.tagName=="BODY"&&(e=window);var a=t.guaranteedSize(e),o=a.height,r=t.elementDimensions(this,{padding:1,border:1}),c=r.height,l=50,s=50;o>c*2&&(s=33);var d={top:s+"%",left:l+"%",transform:"translate(-50%, -50%)"};Object.assign(this.style,d)}close(){this.uiManager.closeMenu(this),this.onClose&&this.onClose()}hide(){if(this.node.find(":invalid").length)return;this.node.children().each(function(){typeof this.hide=="function"&&this.hide()}),this.active=!1,this.opener&&(delete this.opener.keepOpen,delete this.opener),this.uiManager.overlay&&this.uiManager.overlay.hasAttribute("cq-active")&&this.uiManager.overlay.removeAttribute("cq-active");for(var e in this.activeAttributes)this.hasAttribute(e)&&this.removeAttribute(e);this.activeAttributes={},this.node.find("input").each(function(){this==this.ownerDocument.activeElement&&this.blur()}),this.removeFocused();const a=this.ownerDocument.body.keystrokeHub;a&&a.removeActiveModal(this)}open(e){this.uiManager.openMenu(this,e);const{context:a,opener:o}=e||{};if(!a||!a.config){this.onClose=null;return}const{config:{channels:r},stx:c}=a;c.translateUI&&c.translateUI(this.node[0]),this.onClose=()=>{this.channelWrite(r.dialog||"channel.dialog",{},c),this.onClose=null,this.firstElementChild.hide&&this.firstElementChild.hide()},o&&(this.opener=o,this.opener.keepOpen=!0)}resize(){var e=this.node.find("cq-scroll");e.each(function(){this.resize&&this.resize()}),this.params&&this.params.x?this.stxContextMenu():this.center()}show(e){this.params=e,e||(e=this.params={});var a=this,o=e.context||t.UI.getMyContext(this);if(!this.uiManager.overlay&&!e.bypassOverlay&&(this.uiManager.overlay=document.createElement("cq-dialog-overlay"),o&&o.node.append(this.uiManager.overlay)),a.active=!0,setTimeout(function(){a.uiManager.overlay&&!e.bypassOverlay&&a.uiManager.overlay.getAttribute("cq-active")!=="true"&&a.uiManager.overlay.setAttribute("cq-active","true"),a.activeAttributes["cq-active"]=!0;for(var c in a.activeAttributes)a.node.attr(c)!=="true"&&a.node.attr(c,"true");a.resize()}),o&&o.config&&o.config.themes){let c=Object.keys(o.config.themes.builtInThemes);this.classList.remove(...c);let l=c.find(s=>o.topNode.classList.contains(s)===!0);l&&this.classList.add(l)}const r=this.ownerDocument.body.keystrokeHub;r&&r.addActiveModal(this)}stxContextMenu(){var e=this.parentElement;e.tagName=="BODY"&&(e=window);var a=t.guaranteedSize(e),o=a.width,r=a.height,c=t.elementDimensions(this,{padding:1,border:1}),l=c.width,s=c.height,d=this.params.x,h=this.params.y,p=!1;this.node.find("cq-menu.stxMenuActive").each(function(){if(this.querySelector(".context-menu-right")){var u=t.UI.$(this).nextAll().length+1,g=t.elementDimensions(this,{padding:1,border:1}),f=t.elementDimensions(this.querySelector(".context-menu-right"),{padding:1,border:1});l+=c.width,s+=f.height-g.height*u,p=!0}}),d+l>o&&(d=o-l),h+s>r&&(h=r-s),h<0&&(h=0),p&&(this.params.x=d,this.params.y=h),Object.assign(this.style,{top:h+"px",left:d+"px"})}tap(e){var a=this.uiManager.topMenu();if(a===this){e.stopPropagation();return}e.currentTarget.active||e.stopPropagation()}}t.UI.addComponentDefinition("cq-dialog",i)},Vf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{connectedCallback(){this.attached||(super.connectedCallback(),this.init())}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}init(){this.addDefaultMarkup(),this.textRange=this.querySelector(".ciq-double-slider-text"),this.lowSlider=this.querySelector(".ciq-double-slider-range[range='low']"),this.highSlider=this.querySelector(".ciq-double-slider-range[range='high']"),this.backing=this.querySelector("cq-double-slider-range"),this.name=this.getAttribute("name")||t.uniqueID(),["min","max","step","low","high"].forEach(o=>{this.hasAttribute(o)&&(this[o]=Number(this.getAttribute(o)))}),this.setBounds(this);const e=this;function a(o,r){let c=o.value;if(r){const l=r.touches[0],s=e.highSlider.getBoundingClientRect();let{height:d,width:h}=getComputedStyle(e.highSlider);d=parseFloat(d),h=parseFloat(h);let p=1;d>h?p=Math.max(0,Math.min(d,l.pageY-s.top))/d:p=Math.max(0,Math.min(h,l.pageX-s.left))/h,c=e.min+p*(e.max-e.min)}e.whichSlider||(e.whichSlider=c*2>(isNaN(e.high)?e.max:e.high)+(isNaN(e.low)?e.min:e.low)+1?e.highSlider:e.lowSlider),e.whichSlider===e.lowSlider?e.low=e.lowSlider.value=Math.min(typeof e.high=="undefined"?e.max:e.high,c):e.whichSlider===e.highSlider&&(e.high=e.highSlider.value=Math.max(typeof e.low=="undefined"?e.min:e.low,c)),e.setValue(e)}[this.highSlider,this.lowSlider].forEach(o=>{["mousedown","pointerdown"].forEach(r=>{o.addEventListener(r,c=>{e.whichSlider=null})}),o.addEventListener("input",()=>a(o)),t.touchDevice&&(o.addEventListener("touchstart",r=>{e.whichSlider=null,e.engaged=!0,a(o,r)},{passive:!1}),o.addEventListener("touchmove",r=>{e.engaged&&a(o,r)},{passive:!1}),o.addEventListener("touchend",r=>{e.engaged=!1},{passive:!1}))})}setBounds(e){Array.from(this.querySelectorAll('input[type="range"]')).forEach(a=>{["min","max","step"].forEach(o=>{(e[o]||e[o]===0)&&(a.setAttribute(o,e[o]),this[o]=e[o])})}),this.updateVisual()}setValue(e){const a={};e&&(e.low!==void 0&&(a.low=this.min===void 0?e.low:Math.max(this.min,e.low)),e.high!==void 0&&(a.high=this.max===void 0?e.high:Math.min(this.max,e.high))),t.equals(this.value,a)||(this.value=a),this.low=a.low,this.high=a.high,this.updateVisual()}updateVisual(){this.setAttribute("min",this.min),this.setAttribute("max",this.max),this.setAttribute("low",this.low),this.setAttribute("high",this.high),this.setAttribute("step",this.step);const e=getComputedStyle(this.textRange),a=e.color,o=e.borderLeftColor;let r=this.low;(isNaN(r)||r<this.min)&&(r=this.min);let c=this.high;(isNaN(c)||c>this.max)&&(c=this.max),this.lowSlider.value=r,this.highSlider.value=c,typeof r!="undefined"&&(r=Number(this.lowSlider.value)),typeof c!="undefined"&&(c=Number(this.highSlider.value));const l=r-this.min,s=c-this.min;this.textRange.innerHTML=r+"-"+c;const d=this.max-this.min,h=[l/d*100,s/d*100];this.backing.style.background=`linear-gradient(to right,
			${o} 0% ${h[0]}%,
			${a} ${h[0]}% ${h[1]}%,
			${o} ${h[1]}% 100%)`}}i.markup=`
		<cq-double-slider-text class="ciq-double-slider-text"></cq-double-slider-text>
		<cq-double-slider-range class="ciq-double-slider-range"></cq-double-slider-range>
		<input type="range" class="ciq-double-slider-range" range="low">
		<input type="range" class="ciq-double-slider-range" range="high">
`,t.UI.addComponentDefinition("cq-double-slider",i)},Wf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),this.classList.add("ciq-context-menu"),this.drawing=e.drawing;var a=this.node.find("[cq-edit-text]");return this.drawing.edit?a.show():a.hide(),super.open(e)}}i.markup=`
		<div stxtap="DrawingEdit.text()" cq-edit-text>Edit Text</div>
		<div stxtap="DrawingEdit.edit()">Edit Settings</div>
		<div stxtap="DrawingEdit.clone()">Clone Drawing</div>
		<cq-menu stxtap="resize()" cq-close-top="cq-dialog[cq-drawing-context]">
			<cq-menu-dropdown cq-no-scroll="true" class="context-menu-right">
				<cq-item stxtap="DrawingEdit.reorderLayer('top')">Bring to Top</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('up')">Bring Forward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('down')">Send Backward</cq-item>
				<cq-item stxtap="DrawingEdit.reorderLayer('bottom')">Send to Bottom</cq-item>
			</cq-menu-dropdown>
			<!-- element here so that <cq-menu-dropdown> can keep "top: auto;" -->
			<div>Layer Management<div class="context-button-right-arrow"></div></div>
		</cq-menu>
		<div stxtap="DrawingEdit.remove()">Delete Drawing</div>
	`,t.UI.addComponentDefinition("cq-drawing-context",i)},jf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}add(){var e=this.node.find("[cq-custom-fibonacci-setting] input").val();if(!!e&&(e=parseFloat(e)/100,!isNaN(e))){for(var a=this.context.stx.currentVectorParameters.fibonacci.fibs||[],o,r,c=0;c<a.length;c++)if(o=a[c],o.level>e){r=t.clone(o),r.level=e,r.display=!0,r.parameters&&(r.parameters.opacity=.25),a.splice(c,0,r);break}r||(a.length?o=t.clone(a[0]):o={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},r=t.clone(o),r.level=e,r.display=!0,a.push(r)),this.open()}}close(){if(this.opener){var e=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(e),this.context.stx.currentVectorParameters.fibonacci.fibsAlreadySet=!0}super.close()}open(e){this.addDefaultMarkup(),super.open(e),e&&(this.opener=e.caller);var a=this.context.stx.currentVectorParameters,o=a.vectorType,r=this.node,c;if(a.fibonacci&&o!="fibtimezone"){r.find(".title").text("Fibonacci Settings");var l=a.fibonacci.fibs||[];c=r.find("cq-fibonacci-settings"),c.children(":not(template)").remove();for(var s=0;s<l.length;s++){var d=l[s];if(!(o==="fibarc"&&d.level<0)){var h=t.UI.makeFromTemplate(this.node.find("template"),c),p=d.level*100;h.find(".ciq-heading").text(p.toFixed(1)+"%");var u=h.find("input");d.display&&u.prop("checked",!0),this.setChangeEvent(u,"fib",d.level),h.find(".stx-data").append(u)}}}else r.find(".title").text("Settings"),c=r.find("cq-fibonacci-settings"),c.children(":not(template)").remove();this.node.find("[cq-custom-fibonacci-setting] input").val("")}setChangeEvent(e,a,o){var r=this;function c(){return function(){var l=r.context.stx.currentVectorParameters,s=l.vectorType;if(l.fibonacci&&s!="fibtimezone"){var d=l.fibonacci.fibs||[];if(this.type=="checkbox")for(var h=0;h<d.length;h++){var p=d[h];p.level===o&&(p.display=!!this.checked)}}}}e[0].addEventListener("change",c())}}i.markup=`
		<h4 class="title">Settings</h4>
		<cq-scroll cq-no-maximize>
			<cq-fibonacci-settings>
				<template cq-fibonacci-setting>
					<cq-fibonacci-setting>
						<div class="ciq-heading"></div>
						<div class="stx-data">
							<input type="checkbox">
						</div>
					</cq-fibonacci-setting>
				</template>
			</cq-fibonacci-settings>
			<div cq-custom-fibonacci-setting>
				<input class="ciq-heading" type="text">%
				<div class="ciq-btn stx-data" stxtap="add()">Add</div>
			</div>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`,t.UI.addComponentDefinition("cq-fib-settings-dialog",i)},Kf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(a){const{stx:o}=a;o.callbackListeners.floatingWindow||(o.callbackListeners.floatingWindow=[]),o.addEventListener("floatingWindow",r=>{const c=this["on"+t.capitalize(r.type)];if(c)return c.call(this,r),!0})}onShortcut({container:a,title:o,tag:r,content:c,width:l,status:s,onClose:d}){if(this.shortcutWindow){this.shortcutWindow.toggle(s).ensureVisible();return}this.shortcutWindow=this.constructor.windowImplementation.get({tag:r,content:c,title:o,container:a||document.body,onClose:d}),this.shortcutWindow.toggle(!0).update({width:l}).positionRelativeTo()}onDocumentation({container:a,title:o,tag:r,content:c,actionButtons:l,width:s,status:d,onClose:h}){function p(u,g){return()=>{u==="close"?g.toggle(!1):typeof u=="function"&&u()}}this.documentationWindow=this.constructor.windowImplementation.get({tag:r,content:c+"<br/>",title:o,container:a||document.body,onClose:h});for(let u of l){let g=document.createElement("button");g.innerText=u.label,g.style.marginTop="1em",g.style.marginRight="1em",t.safeClickTouch(g,p(u.action,this.documentationWindow)),this.documentationWindow.bodyEl.appendChild(g)}this.context.stx.translateUI&&this.context.stx.translateUI(this.documentationWindow.w),this.documentationWindow.toggle(!0).update({width:s}).positionRelativeTo()}}class n{constructor({content:a,title:o,tag:r,minWidth:c,minHeight:l,container:s,onClose:d}){const h=document.createElement("div");h.innerHTML=this.constructor.markup,h.classList.add("ciq-window"),(s.ownerDocument||document).body.append(h),h.tag=r,h.docWindow=this,Object.assign(this,{isDragging:!1,isResizing:!1,isOpen:!1,xDiff:0,yDiff:0,x:50,y:50,w:h}),this.bindEvents(),this.titleEl=h.querySelector(".ciq-window-title"),this.bodyEl=h.querySelector(".ciq-window-body"),this.titleBarEl=h.querySelector(".ciq-window-bar"),this.setProps({title:o,content:a,minWidth:c,minHeight:l,container:s,onClose:d}),this.render()}setProps({title:a,content:o,minWidth:r,minHeight:c,container:l,onClose:s}){const{w:d,titleEl:h,bodyEl:p}=this;a!==void 0&&(h.textContent=a),o!==void 0&&(p.innerHTML=o),r!==void 0&&(d.style.minWidth=r+"px"),c!==void 0&&(d.style.minHeight=c+"px"),l&&(this.container=l),s!==void 0&&(this.onClose=s)}bindEvents(){const{w:a}=this,o=d=>a.querySelector(d);o(".ciq-window-bar").addEventListener("mousedown",this.onStartDrag.bind(this));const r=this.toggleCollapse.bind(this);o(".ciq-window-bar").addEventListener("dblclick",r),o(".ciq-window-collapse").addEventListener("click",r),"top, right, bottom, left, top-right, bottom-right, bottom-left, top-left".split(/, /).forEach(d=>{o(`.ciq-window-resize-${d}`).addEventListener("mousedown",s())}),a.ownerDocument.addEventListener("mousemove",this.onMouseMove.bind(this)),a.ownerDocument.addEventListener("mouseup",this.onMouseUp.bind(this)),o(".ciq-window-close").addEventListener("click",this.toggle.bind(this,!1)),a.ownerDocument.defaultView.addEventListener("resize",this.ensureVisible.bind(this));const l=this;function s(){return function(d){if(d.button!==0)return;const h=d.target.className.replace(/ciq-window-resize-/,"");l.isResizing=h,l.downX=d.pageX,l.downY=d.pageY,l.startWidth=l.width,l.startHeight=l.height,l.startLeft=l.x,l.startTop=l.y}}}update({x:a,y:o,width:r,height:c}){return Object.assign(this,{x:a,y:o,width:r,height:c}),this.render(),this}positionRelativeTo({container:a,location:o="center"}={}){const{x:r,y:c,width:l,height:s}=(a||this.container||document.body).getBoundingClientRect();return this.width>l-20&&(this.width=l-20),this.height>s-20&&(this.height=s-20),o==="center"&&(this.x=r+l/2-this.width/2,this.y=c+s/2-this.height/2),this.render(),this}ensureVisible(){if(!this.isOpen)return;const{x:a,y:o,width:r}=this.w.getBoundingClientRect(),{innerWidth:c,innerHeight:l}=this.w.ownerDocument.defaultView;o>l-20&&(this.y=l-20),a>c-r&&(this.x=c-r),this.render()}render(){const{x:a,y:o}=this;Object.assign(this.w.style,{display:this.isOpen?"":"none",transform:"translate("+a+"px, "+o+"px)"}),this.w.classList.toggle("ciq-wdragging",this.isDragging||this.isResizing)}get width(){return this.w.offsetWidth}set width(a){a&&(this.w.style.width=a+"px")}get height(){return this.w.offsetHeight}set height(a){a&&(this.w.style.height=a+"px")}clampX(a){return Math.min(Math.max(a,0),this.w.ownerDocument.defaultView.innerWidth-this.w.offsetWidth)}clampY(a){return Math.min(Math.max(a,0),this.w.ownerDocument.defaultView.innerHeight-this.titleBarEl.offsetHeight-8)}onMouseMove(a){const{isDragging:o,isResizing:r}=this;if(!o&&!r)return;const c=a.pageX-this.downX,l=a.pageY-this.downY;o&&(this.x=this.clampX(c),this.y=this.clampY(l));const{startWidth:s,startHeight:d}=this,h=2;let p,u;if(/left/.test(r)&&(u=this.startWidth-c,this.width=u,this.x=this.startLeft+c),/top/.test(r)&&(p=this.startHeight-l,this.height=p,this.y=this.startTop+l),r&&/right|bottom/.test(r)){this.width=/right/.test(r)?c+s:u||s,this.height=/bottom/.test(r)?l+d:p||d;const g=this.w.ownerDocument.defaultView;this.x+this.width-h>g.innerWidth&&(this.width=g.innerWidth-this.x-h),this.y+this.height-h>g.innerHeight&&(this.height=g.innerHeight-this.y-h)}this.render()}onStartDrag(a){a.button===0&&(this.isDragging=!0,this.downX=a.pageX-this.x,this.downY=a.pageY-this.y)}onMouseUp(){this.isDragging=!1,this.isResizing=!1,this.render()}toggle(a){const o=a===void 0?!this.isOpen:a,r=this.isOpen!==o;return this.isOpen=o,r&&!this.isOpen&&this.onClose&&(this.onClose(),this.isCollapsed&&this.toggleCollapse()),this.render(),this}toggleCollapse(){this.isCollapsed=!this.isCollapsed,this.isCollapsed?(this.prevHeight=this.height,this.w.classList.add("ciq-window-collapsed"),this.height=this.titleBarEl.offsetHeight,this.onCollapse&&this.onCollapse()):(this.height=this.prevHeight,this.w.classList.remove("ciq-window-collapsed"));const a=this.w.querySelector(".ciq-window-collapse");a.title=this.isCollapsed?"Expand":"Collapse",this.render()}}n.markup=`
<div class="ciq-window-bar" title="Drag to reposition. Double click to collapse">
<div class="ciq-window-title"></div>
<span class="ciq-window-collapse" title="Collapse"></span>
<span class="ciq-window-close" title="Click to close">
</span>
</div>
<div class="ciq-window-body"></div>
<div class="ciq-window-resize-left"></div>
<div class="ciq-window-resize-top"></div>
<div class="ciq-window-resize-right"></div>
<div class="ciq-window-resize-bottom"></div>
<div class="ciq-window-resize-bottom-right"></div>
<div class="ciq-window-resize-bottom-left"></div>
<div class="ciq-window-resize-top-left"></div>
<div class="ciq-window-resize-top-right"></div>
`,n.get=function(e){let a;return e.tag&&(a=Array.from((e.container.ownerDocument||document).querySelectorAll(".ciq-window")).find(o=>o.tag===e.tag),a)?(a.docWindow.setProps(e),a.docWindow):new this(e)},i.windowImplementation=n,t.UI.addComponentDefinition("cq-floating-window",i)},Gf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{connectedCallback(){this.attached||(this.innerHTML=this.render(),this.columns=2,this.rows=2,this.generateTable(this.columns,this.rows),this.highlightTable(this.columns-1,this.rows-1),this.querySelector("table").addEventListener("mouseleave",()=>{this.generateTable(this.columns+1,this.rows+1),this.highlightTable(this.columns,this.rows)}))}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}get maxcols(){return this.getAttribute("maxcols")||4}set maxcols(e){this.setAttribute("maxcols",e)}get maxrows(){return this.getAttribute("maxrows")||4}set maxrows(e){this.setAttribute("maxrows",e)}generateTable(e,a){var o=this;function r(l){let s=parseInt(l.target.dataset.column)+1;s>o.maxcols&&(s=o.maxcols);let d=parseInt(l.target.dataset.row)+1;d>o.maxrows&&(d=o.maxrows),o.generateTable(s,d),o.highlightTable(parseInt(l.target.dataset.column),parseInt(l.target.dataset.row))}let c=this.querySelector("table");if(!!c){this.cleanTable(e,a),e=e||1,a=a||1;for(let l=1;l<=Math.min(a,this.maxrows);l++){let s;c.childNodes[l-1]?s=c.childNodes[l-1]:(s=document.createElement("tr"),c.appendChild(s));for(let d=1;d<=Math.min(e,this.maxcols);d++)if(!s.childNodes[d-1]){let h=document.createElement("td");h.dataset.row=l,h.dataset.column=d,h.dataset.rows=a,h.dataset.columns=e,h.addEventListener("mouseenter",r),h.addEventListener("click",function(p){this.triggerUpdateGridEvent(p.target.dataset.column,p.target.dataset.row)}.bind(this)),h.appendChild(document.createElement("div")),s.appendChild(h)}}}}triggerUpdateGridEvent(e,a){this.columns=+e,this.rows=+a,this.closest("cq-context, [cq-context]").dispatchEvent(new CustomEvent("update-grid",{detail:{columns:e,rows:a,container:this.closest("cq-context")},bubbles:!0,composed:!0}))}highlightTable(e,a){for(let l of this.querySelectorAll("td"))l.dataset.column<=e&&l.dataset.row<=a?l.classList.add("highlight"):l.classList.remove("highlight");const o=this.querySelector(".row.count"),r=this.querySelector(".multiply"),c=this.maxrows<2;o.style.display=c?"none":"",r.style.display=c?"none":"",o.innerHTML=a,this.querySelector(".column.count").innerHTML=e}cleanTable(e,a){let o=this.querySelector("table");for(;o.childNodes.length>a;)o.removeChild(o.lastChild);for(let r of o.childNodes)for(;r.childNodes.length>e;)r.removeChild(r.lastChild)}render(){return`
				<style>
					cq-grid-size-picker, cq-grid-size-picker tr, cq-grid-size-picker td{
						display: block;
					}

					cq-grid-size-picker tr{
						margin: 0;
						padding: 0;
						white-space: nowrap;
						line-height: 0;
					}

					cq-grid-size-picker td{
						display: inline-block;
						height: 19px;
						width: 19px;
						margin: 0;
						padding: 0;
						text-align: center;
					}

					cq-grid-size-picker td div{
						pointer-events: none;
						display: inline-block;
						height: 15px;
						width: 15px;
						margin: 2px;
						padding: 0;
						border: solid 1px #ccc;
						border-color: var(--grid-size-border-color, #ccc);
						background: #eee; /* keep a hard coded style in case the var function is unavailable */
						background-color: var(--grid-size-background-color, #eee);
						text-align: center;
					}

					cq-grid-size-picker td:hover div, cq-grid-size-picker td.highlight div{
						border-color: #666;
						border-color: var(--grid-size-border-hl-color, #666);
						background: #ccc;
						background-color: var(--grid-size-background-hl-color, #ccc);
					}

					cq-grid-size-picker p{
						width:100%;
						line-height: 1em;
						text-align: center;
						margin: 5px 0;
					}

					cq-grid-size-picker .multiply{
						transform: rotate(45deg);
						display: inline-block;
					}
				</style>

				<table class="grid-size-picker"></table>
				<p><span class="row count">1</span> <span class="multiply">+</span> <span class="column count">1</span></p>
			`}}t.UI.addComponentDefinition("cq-grid-size-picker",i)},Yf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext(){if(!this.hasAttribute("cq-filter"))return;const e=this.getAttribute("cq-filter")||"Search";this.createFilter(e)}createFilter(e){const a=document.createElement("div");a.classList.add("searchFilter"),this.appendChild(a);const o=document.createElement("input");o.type="search",o.placeholder=e,o.setAttribute("tabindex","-1"),a.appendChild(o),this.searchWrapper=a;const r=this.nextElementSibling;let c="";const l=({target:{value:h}})=>{const p=new RegExp(h,"i"),u=this.qsa;u("cq-item",r).forEach(g=>{const f=h&&!p.test(g.textContent)?"add":"remove";g.classList[f]("item-hidden"),c!==h&&(c=h,this.removeFocused.apply(r),u("cq-keyboard-selected-highlight").forEach(w=>{w.classList.add("disabled")}),o.focus())})};o.addEventListener("input",l),o.addEventListener("keyup",l);const s=this.getAttribute("cq-filter-min")||15,d=()=>{const h=this.qsa("cq-item",r).length;a.classList[h>s?"add":"remove"]("active")};if(typeof MutationObserver===void 0){a.classList.add("active");return}new MutationObserver(d).observe(this.parentElement,{childList:!0,subtree:!0}),d()}}t.UI.addComponentDefinition("cq-heading",i)},Qf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){super.disconnectedCallback(),this.attached=!0}setContext(e){this.addDefaultMarkup();const a=new t.UI.HeadsUp(this,e,{followMouse:!0,autoStart:!1});let o=e.config&&e.config.channels?e.config.channels.headsUp:"layout.headsUp";this.channelSubscribe(o,r=>{a[r==="dynamic"||(r||{}).dynamic?"begin":"end"]()})}}i.markup=`
		<svg version="1.1" x="0px" y="0px" viewBox="0 0 215 140" enableBackground="new 0 0 215 140">
			<defs>
				<filter id="ciq-hu-shadow" height="130%">
					<feGaussianBlur in="SourceAlpha" stdDeviation="1"></feGaussianBlur>
					<feOffset dx="0" dy="1" result="offsetblur"></feOffset>
					<feComponentTransfer>
						<feFuncA type="linear" slope="0.2"></feFuncA>
					</feComponentTransfer>
					<feMerge>
						<feMergeNode></feMergeNode>
						<feMergeNode in="SourceGraphic"></feMergeNode>
					</feMerge>
				</filter>
			</defs>
			<polygon
				class="ciq-hu-bg" style="stroke-width: 1;"
				points="198.4,124.4 1,124.4 1,1 214,1 214,137.8"
				filter="url(#ciq-hu-shadow)"
				/>
			<path class="ciq-hu-stroke"
				fill="#398DFF"
				d="M213,2v133.6l-13.7-11.8l-0.6-0.5H198H2V2H213 M215,0H0v125.4h198l17,14.6V0L215,0z">
			</path>
		</svg>
		<div>
			<cq-hu-col1>
				<cq-hu-date></cq-hu-date>
				<cq-hu-price></cq-hu-price>
				<cq-volume-grouping>
					<div>Volume</div>
					<div><cq-volume-visual></cq-volume-visual></div>
					<div><cq-hu-volume></cq-hu-volume><cq-volume-rollup></cq-volume-rollup></div>
				</cq-volume-grouping>
			</cq-hu-col1>
			<cq-hu-col2>
				<div>Open</div><cq-hu-open></cq-hu-open>
				<div>Close</div><cq-hu-close></cq-hu-close>
				<div>High</div><cq-hu-high></cq-hu-high>
				<div>Low</div><cq-hu-low></cq-hu-low>
			</cq-hu-col2>
		</div>
	`,t.UI.addComponentDefinition("cq-hu-dynamic",i)},Xf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){super.disconnectedCallback(),this.attached=!0}setContext(e){this.addDefaultMarkup();const a=new t.UI.HeadsUp(this,e,{autoStart:!0});let o=e.config&&e.config.channels?e.config.channels.headsUp:"layout.headsUp";this.channelSubscribe(o,r=>{a[r==="static"||(r||{}).static?"begin":"end"]()})}}i.markup=`
		<div>
			<div>Price</div><cq-hu-price></cq-hu-price>
			<div>Open</div><cq-hu-open></cq-hu-open>
			<div>Close</div><cq-hu-close></cq-hu-close>
		</div>
		<div>
			<div>Vol</div>
			<cq-volume-section>
				<cq-hu-volume></cq-hu-volume>
				<cq-volume-rollup></cq-volume-rollup>
			</cq-volume-section>
			<div>High</div><cq-hu-high></cq-hu-high>
			<div>Low</div><cq-hu-low></cq-hu-low>
		</div>
	`,t.UI.addComponentDefinition("cq-hu-static",i)},Zf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{connectedCallback(){this.attached||(super.connectedCallback(),["mousedown","pointerdown","touchstart"].forEach(e=>this.addEventListener(e,this.mouseTouchDown,{passive:!1})),["mouseup","pointerup","touchend","touchmove"].forEach(e=>this.addEventListener(e,this.mouseTouchUp,{passive:!1})))}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){["mousedown","pointerdown","touchstart"].forEach(e=>this.removeEventListener(e,this.mouseTouchDown)),["mouseup","pointerup","touchend","touchmove"].forEach(e=>this.removeEventListener(e,this.mouseTouchUp)),super.disconnectedCallback()}setContext(){this.addDefaultMarkup();const e="help-active";let{topNode:a,stx:o}=this.context;t.Help&&!a.hasAttribute(e)&&a.setAttribute(e,""),this.ensureMessagingAvailable(o)}mouseTouchDown(e){!t.Help||!t.Help.Content||!t.Help.Content[this.getAttribute("help-id")]||this.pressTimer||(this.pressTimer=setTimeout(()=>{this.pressTimer=null,setTimeout(()=>this.classList.remove("pressing"),1e3),this.press()},this.context.stx.longHoldTime),this.classList.add("pressing"))}mouseTouchUp(e){!this.pressTimer||(clearTimeout(this.pressTimer),this.pressTimer=null,this.classList.remove("pressing"))}ensureMessagingAvailable(e){setTimeout(()=>{const a=e.uiContext.topNode;a.querySelector("cq-floating-window")||a.append(document.createElement("cq-floating-window"))})}verifyHelpContent(){if(!t.Help||!t.Help.Content)return;t.Help.Content[this.getAttribute("help-id")]?this.classList.add("help-available"):this.classList.remove("help-available")}press(){if(!t.Help||!t.Help.Content)return;let{config:e,stx:a}=this.context,o=this.getAttribute("help-id")||"default",r=t.Help.Content[o]||t.Help.Content.default;if(!r)return;r.actions||(r.actions=[t.Help.Actions.close,t.Help.Actions.enable]),r.actionButtons=[];function c(l,s){return()=>l.action(s)}for(let l of r.actions){let{label:s,action:d}=l;typeof d=="function"&&(d=c(l,this.parentElement)),r.actionButtons.push({label:s,action:d})}a.dispatch("floatingWindow",{type:"documentation",title:r.title,content:r.content,actionButtons:r.actionButtons,container:a.container.querySelector(".stx-subholder"),onClose:()=>!0,width:500,status:!0,tag:"help"})}}i.markup=`
		<div class="ciq-help-widget"></div>
		<div class="press-indicator">
			<!-- 1x1 transparent image to maintain aspect ratio when sizing by height -->
			<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
		</div>
	`,t.UI.addComponentDefinition("cq-help",i)},Jf=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(e){let a=this.constructor.markup;const o=this.getAttribute("cq-toggles");o&&(a=a.replace(/dynamic,static,null/,o)),this.addDefaultMarkup(this,a),this.tooltip=this.querySelector("cq-tooltip");let r=e.config?e.config.channels:{headsUp:"layout.headsUp",crosshair:"layout.crosshair"};this.channelSubscribe(r.headsUp,()=>this.applyValues(r)),this.channelSubscribe(r.crosshair,c=>{(t.isMobile||c)&&this.channelRead(r.headsUp)==="dynamic"&&setTimeout(()=>this.channelWrite(r.headsUp,"static"))}),this.initInfoComponents(e)}setTooltip(e){const{context:{stx:a},tooltip:o}=this;o.innerText=a.translateIf(`Info ${e||"off"}`)}initInfoComponents(e){const a=this.querySelector("cq-toggle").getAttribute("cq-toggles");["dynamic","static"].forEach(function(o){if(new RegExp(o).test(a)&&!e.topNode.querySelector(`cq-hu-${o}`)){const r=document.createElement(`cq-hu-${o}`);e.topNode.append(r)}})}applyValues(e){const a=this.channelRead(e.crosshair),o=this.channelRead(e.headsUp);o==="dynamic"&&(a||t.isMobile)&&setTimeout(()=>this.channelWrite(e.headsUp,"static")),t.isMobile&&o==="static"&&setTimeout(()=>this.channelWrite(e.crosshair,!0)),this.setTooltip(o)}}i.markup=`
		<cq-toggle
			class="ciq-HU"
			cq-member="headsUp"
			cq-toggles="dynamic,static,null">
			<span></span>
			<cq-tooltip>Info</cq-tooltip>
		</cq-toggle>
	`,t.UI.addComponentDefinition("cq-info-toggle",i)},$f=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}set(e){const{toggleEl:a,options:o,selected:r,stx:c}=this;c.controls,a.params;const l={};o.forEach(d=>{const[h,p]=d.getAttribute("cq-member").split("-"),u=d===r&&e===!0;p?l[h]=Object.assign(l[h]||{},{[p]:u}):l[h]=u}),this.connectedCharts().forEach(d=>{Object.entries(l).forEach(([h,p])=>{typeof p=="object"?d.layout[h]=Object.assign({},d.layout[h],p):d.layout[h]=p}),d.changeOccurred("layout")}),a.params.action==="class"&&a.classList[e?"add":"remove"](a.params.value),a.currentValue=e,a.updateClass(),this.applyValues(this.channels);const s=this.context.topNode.getCharts;if(e){const d=s?this.connectedCharts().find(h=>h.container.closest("cq-context-wrapper.active")):c;this.positionCrosshair(d)}}connectedCharts(){return this.context.topNode.getCharts?this.context.topNode.getCharts():[this.stx]}positionCrosshair(e){if(!e)return;const{dataSegment:a}=e.chart;if(e.container.classList.contains("stx-crosshair-on")||!a.length)return;const{index:o,Close:r}=s(a);if(o<0)return;const c=e.pixelFromBar(o),l=e.pixelFromPrice(r);e.mousemoveinner(c+e.left,l+e.top);function s(d){let h=d.length;for(;h--&&d[h];){const{Close:p}=d[h];if(p||p===0)return{index:h,Close:p}}return-1}}setSelected(e){const{options:a}=this;this.selected=e,a.forEach(o=>{o.classList[o===e?"add":"remove"]("ciq-active")})}setContext(e){this.tooltip=this.querySelector("cq-tooltip"),this.toggleEl=this.querySelector("cq-toggle"),this.optionsMenu=this.querySelector("cq-menu-dropdown"),this.options=Array.from(this.optionsMenu.querySelectorAll("cq-item"));let{config:{channels:a={}}={}}=e;a.headsUp||(a.headsUp="layout.headsUp"),a.crosshair||(a.crosshair="layout.crosshair"),this.channels=a,this.channelSubscribe(a.headsUp,()=>this.applyValues(a));const o=this.channelRead(a.headsUp)||{},r=this.channelRead(a.crosshair);let c=!1;const l=s=>{this.setSelected(s.target),this.set(!0),this.stx.changeOccurred("layout")};this.options.forEach(s=>{const[,d]=s.getAttribute("cq-member").split("-");!d&&r&&(c=!0),o[d]&&this.setSelected(s),s.selectFC=function(){l({target:this})}}),this.toggleEl.isInfoToggle=!0,this.toggleEl.currentValue=this.selected||c,this.selected||this.setSelected(this.options[0]),t.UI.stxtap(this.optionsMenu,l),t.isMobile&&(this.querySelector("cq-menu").style.display="none"),this.initInfoComponents(e.topNode),this.applyValues(a)}setTooltip(e){const{context:{stx:a},tooltip:o}=this;if(!this.options.some(r=>r.getAttribute("cq-member")==="crosshair")){const r=this.toggleEl.currentValue?"On":"Off";o.innerText=a.translateIf(`Info ${r}`)}}initInfoComponents(e){e.querySelectorAll(".ciq-chart-area").forEach(a=>{this.options.forEach(o=>{const[,r]=o.getAttribute("cq-member").split("-");if(r&&!a.querySelector(`cq-hu-${r}`)){const c=document.createElement(`cq-hu-${r}`);a.append(c)}})})}applyValues(e){const a=this.channelRead(e.crosshair),o=this.channelRead(e.headsUp)||{},{dynamic:r,floating:c,crosssection:l}=o,{channelWrite:s}=this,d=this.connectedCharts();if(t.isMobile){const p=this.context.topNode.querySelector("cq-hu-static");p&&(p.style.display=c?"none":"");const u=this.context.topNode.querySelector("cq-hu-dynamic");if(u&&(u.style.display="none"),r){h(e.headsUp,Object.assign({},o,{dynamic:!1,floating:!0})),this.applyValues(e);return}const g=this.querySelector("cq-item[cq-member*='headsUp-']:not([cq-member*='-dynamic'])");if(g&&!Object.values(o).includes(!0)&&(this.setSelected(g),a)){const[,f]=g.getAttribute("cq-member").split("-");if(f){const w={};w[f]=!0,h(e.headsUp,Object.assign({},o,w)),this.applyValues(e);return}}}!a&&(o.static||l)&&h(e.crosshair,!0);function h(p,u){d.forEach(g=>s(p,u,g))}}getCurrentValue(e){const{options:a}=this,{obj:o}=e;for(let r=0;r<a.length;r++){const[c,l]=a[r].getAttribute("cq-member").split("-");if(!l&&o[c]||o[c]&&o[c][l])return!0}return!1}}t.UI.addComponentDefinition("cq-info-toggle-dropdown",i)},tg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;let i=!1;class n extends HTMLElement{connectedCallback(){if(this.hasAttribute("attached"))return;this.setAttribute("attached","");var a=this;const o=this.getAttribute("env-container")||"body",r=this.getAttribute("tmpl-src");var c=this.querySelector("cq-context");c||(c=this.appendChild(document.createElement("cq-context")));const l=this.hasAttribute("no-save");this.style.visibility="hidden",t.loadUI(r,c,function(s){if(s)return;var d=a.querySelector("cq-chart-title");d&&d.removeAttribute("cq-browser-tab");for(var h=a.querySelectorAll("cq-ui-manager, cq-dialog, cq-color-picker"),p=0;p<h.length;p++){var u=h[p];u.parentNode.removeChild(u),i||document.querySelector(o).appendChild(u)}i=!0;const g={extendedHours:!0,rangeSlider:!0,inactivityTimer:!0,fullScreen:!1,initialSymbol:a.getAttribute("symbol")||void 0,restore:!l};a.signalEvent=new CustomEvent("signal-chart-ready",{detail:{node:a,params:g}}),a.setAttribute("cq-event-flag",""),a.style.visibility="",a.ownerDocument.body.dispatchEvent(a.signalEvent)})}disconnectedCallback(){this.stx.destroy()}}customElements.define("cq-instant-chart",n)},eg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.I18N)console.error("languageDialog component requires first activating i18n feature.");else{class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}close(){const e=this.ownerDocument.querySelector("cq-language-dialog");e&&e.closest("cq-dialog,cq-menu").close()}open(e){this.addDefaultMarkup(),super.open(e);const a=this.node.find("cq-languages");a.children(":not(template)").remove();const o=this.node.find("template"),{languages:r}=t.I18N;if(!r)return;const c=this;function l(s){return function(){t.UI.contextsForEach(function(){const{stx:d}=this;d.preferences.language=s,d.changeOccurred("preferences"),t.I18N.localize(d,s),d.draw()},c)}}for(let s in r){const d=t.UI.makeFromTemplate(o,a);d.find("cq-language-name").text(r[s]),d.find("cq-flag").attr("cq-lang",s),t.UI.stxtap(d[0],l(s))}if(this.ownerDocument.body.keystrokeHub){let{tabActiveModals:s}=this.ownerDocument.body.keystrokeHub;s[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(s[0])}}}i.markup=`
		<h4 class="title">Choose language</h4>
		<cq-close></cq-close>
		<cq-languages>
			<template><div keyboard-selectable="true"><cq-flag></cq-flag><cq-language-name></cq-language-name></div></template>
		</cq-languages>
	`,t.UI.addComponentDefinition("cq-language-dialog",i)}},ig=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext(e){this.context.setLoader(this)}show(){this.classList.add("stx-show")}hide(){this.classList.remove("stx-show")}}t.UI.addComponentDefinition("cq-loader",i)},ag=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.ChartEngine.Driver)console.error("lookup component requires first activating quoteFeed feature.");else if(!t.ChartEngine.Driver.Lookup)console.error("lookup component requires first activating symbolLookupBase feature.");else{class i extends t.UI.ContextTag{constructor(){super(),this.usingEmptyDriver=!1,this.currentFilter=null,this.filterElements=null,this.params={},this.overrideIsActive=!1}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}acceptText(e,a){var o=this;this.params.driver||(this.context.lookupDriver?this.setDriver(this.context.lookupDriver):(this.setDriver(new t.ChartEngine.Driver.Lookup),this.usingEmptyDriver=!0));var r=this.params.driver.exchanges;function c(s){o.params.driver.exchanges=r,o.results(s)}var l=this.getAttribute("cq-exchanges");l&&(this.params.driver.exchanges=l.split(",")),this.params.driver.acceptText(e,a,null,c)}attachDriver(e){this.driver=e}close(){this.keyboardNavigation&&(this.highlightItem(this.input[0]),setTimeout(this.highlightItem.bind(this,this.input[0]),250),this.removeFocused(this.filterElements),this.resultList[0].keyboardNavigation=null),this.closest("cq-dialog,cq-menu").close()}forceInput(){var e=this.input[0];this.selectItem({symbol:e.value}),t.blur(e),this.close(),e.value=""}initialize(){this.addDefaultMarkup();var e=this.node;if(this.resultList=e.find("cq-scroll"),this.input=e.find("input"),!this.input.length){var a=document.createElement("input");a.setAttribute("type","hidden"),a.value="",this.input=e.append(a)}t.UI.stxtap(this.input[0],function(){this.focus()});var o=this;Array.from(this.input).forEach(function(l){l.addEventListener("paste",function(s){var d=s.target;setTimeout(function(){o.acceptText(d.value,o.currentFilter)},0)})});var r=this.querySelector("cq-lookup-filters");if(r){var c=r.querySelectorAll("cq-filter");c.forEach(function(l){t.UI.stxtap(l,function(){c.forEach(function(d){d.classList.remove("true")}),this.classList.add("true");var s=this.querySelector("translate");s?o.currentFilter=s.getAttribute("original"):o.currentFilter=this.innerHTML,o.acceptText(o.input.val(),o.currentFilter)})})}typeof e.attr("cq-keystroke-claim")!="undefined"&&this.addClaim(this)}isActive(){return this.input[0].value!==""}keyStroke(e,a,o,r){if(r.ctrl||r.cmd||a=="Meta"||a=="Win")return!1;var c=this.input[0],l=!1,s=this.ownerDocument.activeElement,d=s===c;if(!d&&(o.altKey||s&&(s.tagName=="INPUT"||s.tagName=="TEXTAREA")))return!1;var h=!1,p=!1;if(t.climbUpDomTree(this,".stxMenuActive").length&&(p=!0),(d||p)&&(h=!0),!(!h&&(typeof this.node.attr("cq-keystroke-default")=="undefined"||!p&&this.uiManager.topMenu()))){if((a===" "||a==="Spacebar")&&c.value==="")return!1;var u=this,g=this.findFocused(this.filterElements);switch(a){case"Delete":case"Backspace":case"Del":c.value.length&&(window.getSelection().toString()?c.value="":(d||(c.value=c.value.substring(0,c.value.length-1)),c.value.length&&u.acceptText(c.value,u.currentFilter)),l=!0),a=="Backspace"&&(l=!0);break;case"Escape":case"Esc":c.value="",this.close(),t.blur(c),l=!0;break;case"Enter":var f=this.resultList;if(d=f.length&&f[0].focused(),c.value===""&&!d||this.overrideIsActive)break;if(d&&d.selectFC)d.selectFC.apply(d,{});else{var w=c.value,v=["false","0",null].indexOf(this.getAttribute("cq-uppercase"))==-1;v&&(w=w.toUpperCase()),this.selectItem({symbol:w})}t.blur(c),this.close(),c.value="",l=!0;break;case"ArrowRight":case"Right":g.length&&(this.resultList[0].keyboardNavigation&&(this.resultList[0].keyboardNavigation=null),this.focusNextItem(this.filterElements),this.clickFocusedItem(this.filterElements,o));break;case"ArrowLeft":case"Left":this.resultList[0].keyboardNavigation&&(this.resultList[0].keyboardNavigation=null),g.length&&(this.focusNextItem(this.filterElements,!0),this.clickFocusedItem(this.filterElements,o));break;case"ArrowDown":case"Down":if(!this.keyboardNavigation)break;if(g=this.findFocused(this.filterElements),g.length){if(!this.resultList[0].keyboardNavigation){var m=this.resultList[0].querySelector("cq-item");m&&(this.resultList[0].keyboardNavigation=this.keyboardNavigation)}}else for(let x=0;x<this.filterElements.length;x++){let y=this.filterElements[x];if(y.classList.contains("true")){this.focusItem(y);break}}t.blur(c);break;case"ArrowUp":case"Up":if(!this.keyboardNavigation)break;if(this.resultList[0].keyboardNavigation){var q=this.resultList[0].querySelector("cq-item:first-of-type");q&&q.hasAttribute("cq-focused")&&(q.removeAttribute("cq-focused"),this.resultList[0].keyboardNavigation=null,this.highlightFocusedItem(this.filterElements))}else g.length&&(this.removeFocused(g),this.highlightItem(c),t.focus(c));break;default:a.length===1&&(d||(c.value=c.value+a),u.acceptText(c.value,u.currentFilter),l=!0);break}if(l)return this.usingEmptyDriver||!c.value.length&&(a=="Escape"||a=="Esc"||a=="Enter"||!d)?this.close():this.open(),d?{allowDefault:!0}:!0}}open(){window.setTimeout(this.highlightItem.bind(this,this.input[0]),250),this.closest("cq-dialog,cq-menu").open()}onKeyboardDeselection(){t.blur(this.input[0]),this.close(),this.keyboardNavigation&&this.keyboardNavigation.highlightPosition(),this.resultList[0].keyboardNavigationWait=!1}onKeyboardSelection(){this.highlightItem(this.input[0]),t.focus(this.input[0]),this.resultList[0].keyboardNavigationWait=!0,this.open()}results(e){function a(h,p){return function(u){t.blur(h.input[0]),h.selectItem(p),h.input[0].value=""}}this.resultList=t.UI.$(this.resultList),this.resultList.empty();for(var o=0;o<e.length;o++){for(var r=e[o],c="",l=0;l<r.display.length;l++)c+="<SPAN>"+r.display[l]+"</SPAN>";var s=document.createElement("cq-item");s.innerHTML=c,this.resultList.append(s),s.selectFC=a(this,r.data),t.UI.stxtap(s,s.selectFC)}var d=this.resultList;d[0]&&d[0].top(),this.highlightFocusedItem(this.filterElements)}selectItem(e,a){this.params.cb&&this.params.cb(e,a)}setCallback(e){this.params.cb=e}setContext(e){this.initialize();const a=this.querySelector("cq-lookup-input input"),{config:o,stx:r}=e;if(!o)return;const{channels:c={}}=o;this.channelSubscribe(c.breakpoint||"channel.breakpoint",l=>{var s=r.crossSection?r.crossSection.symbolInputType:"Symbol";l==="break-lg"&&(s="Enter "+s),a.setAttribute("placeholder",l==="break-sm"?"":s)}),this.filterElements=this.querySelectorAll("cq-lookup-filters cq-filter"),!this.params.cb&&e.changeSymbol&&(this.params.cb=e.changeSymbol)}changeContext(e){this.params.cb&&e.changeSymbol&&(this.params.cb=e.changeSymbol)}setDriver(e){this.params.driver=e}}i.markup=`
		<cq-lookup-input cq-no-close>
			<input type="text" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" name="symbol" placeholder="" tabindex="-1">
			<cq-lookup-icon></cq-lookup-icon>
		</cq-lookup-input>
		<cq-lookup-results>
			<cq-lookup-filters cq-no-close>
				<cq-filter class="true">ALL</cq-filter>
				<cq-filter>STOCKS</cq-filter>
				<cq-filter>FX</cq-filter>
				<cq-filter>INDEXES</cq-filter>
				<cq-filter>FUNDS</cq-filter>
				<cq-filter>FUTURES</cq-filter>
			</cq-lookup-filters>
			<cq-scroll></cq-scroll>
		</cq-lookup-results>
	`,t.UI.addComponentDefinition("cq-lookup",i)}},og=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends HTMLElement{constructor(){super(),this.activeClassName="stxMenuActive",this.active=!1}get focusElement(){return this.getAttribute("cq-focus")}connectedCallback(){if(this.attached||(this.uiManager=t.UI.getUIManager(this),this.attached=!0,this.hasAttribute("readonly")))return;var e=this;function a(r){e.tap(r)}function o(r){e.captureTap(r)}this.addEventListener("stxtap",o,!0),t.UI.stxtap(this,a)}adoptedCallback(){t.UI.flattenInheritance(this,i)}captureTap(e){var a=Array.from(t.climbUpDomTree(e.target));this.noClose=a.filter(function(o){var r=o.getAttribute("cq-no-close");return r!==null&&r!==!1}).length,this.noClose||(this.noClose=a.filter(function(o){return o.matches("cq-separator,cq-heading")}).length)}close(){this.uiManager.closeMenu(this)}hide(){if(!this.active)return;this.unlift(),this.classList.remove(this.activeClassName),this.active=!1,this.querySelectorAll("input").forEach(function(o){o==o.ownerDocument.activeElement&&o.blur()});const e=this.querySelector("cq-menu-dropdown");if(e&&(e.disablekeyboardNavigation(),t.UI.BaseComponent.prototype.removeFocused(e.querySelectorAll("[cq-focused]"))),this.ownerDocument.body.keystrokeHub){let{tabActiveModals:o}=this.ownerDocument.body.keystrokeHub;o[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(o[0])}const a=this.querySelector("cq-lookup");a&&a.close()}lift(){const e=t.UI.getMyContext(this),a=this.lifts=this.uiManager.findLifts(this);for(let o=0;o<a.length;o++){if(e&&e.config&&e.config.themes){let r=Object.keys(e.config.themes.builtInThemes);a[o].classList.remove(...r);let c=r.find(l=>e.topNode.classList.contains(l)===!0);c&&a[o].classList.add(c)}this.uiManager.lift(a[o])}}onKeyboardDeselection(){this.close()}open(e){for(var a=this.uiManager.activeMenuStack,o=0;o<a.length;o++)if(a[o]===this)return;this.uiManager.openMenu(this,e)}show(e){if(!this.active&&(this.active=!0,this.classList.add(this.activeClassName),this.lift(),this.querySelectorAll("cq-scroll, cq-menu-dropdown").forEach(function(a){a.resize&&a.resize()}),this.keyboardNavigation)){const a=this.querySelector("cq-menu-dropdown");a&&this.keyboardNavigation.setKeyControlElement(a,!0)}}tap(e){e.stopPropagation();var a=this.uiManager;if(this.active)this.noClose||a.closeMenu(this);else{var o=e.target.closest("cq-menu-dropdown");if(o)return;for(var r=!1,c=t.climbUpDomTree(this.parentElement,"cq-menu,cq-dialog"),l=0;l<c.length;l++)c[l].active&&(r=!0);if(r||a.closeMenu(),this.open(),this.focusElement&&!t.isMobile){const s=this.querySelector(this.focusElement);s&&s.focus()}}}unlift(){var e=this.lifts;if(!!e){for(var a=0;a<e.length;a++)this.uiManager.restoreLift(e[a]);this.lifts=null}}}t.UI.addComponentDefinition("cq-menu",i)},ng=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext(e){const a=this.getAttribute("cq-name");if(a&&e.config){const o=e.config.getMenu(a);if(this.addDefaultMarkup(this,o&&o.join("")),!this.innerHTML){const r=t.UI.BaseComponent.selfOrParentElement(this,"cq-menu-dropdown-section");r&&(r.style.display="none")}return}}}t.UI.addComponentDefinition("cq-menu-container",i)},rg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super()}connectedCallback(){super.connectedCallback(),this.messageQueue=[],this.displayTime=+this.getAttribute("defaultDisplayTime")||10,this.messagePosition=this.getAttribute("defaultPosition")||"top",this.messageTransition=this.getAttribute("defaultTransition")||"",this.displayTimer=null}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext(){const{stx:e}=this.context;e.addEventListener("notification",a=>{a&&a.remove?this.dismissMessage(a.message):this.newMessage(a)}),e.append("resizeChart",()=>this.handleResize())}handleResize(){for(let e=0;e<this.messageQueue.length;e++)this.messageQueue[e].isDisplayed&&this.positionElement(this.messageQueue[e])}positionElement(e){const a=this.context.stx.chart.canvas.getBoundingClientRect(),o=this.context.topNode.getBoundingClientRect(),r=e.classList.contains("align-bottom");let c=a.top-o.top,l=a.left-o.left;Object.assign(e.style,{top:r?c+a.height+"px":c+"px",left:l+a.width*.5+"px"})}createMessageElement(e){if(!e.message)return;let{message:a,position:o,type:r,transition:c,displayTime:l,priority:s,callback:d}=e;l=parseInt(l),l!==0&&(l=l||this.displayTime),o=o||this.messagePosition,c=c||this.messageTransition,s=s||0,a.length>160&&(a=a.slice(0,160)+"...");let h=document.createElement("div");return h.innerHTML=`
			<div class="cq-message-container">
				<div class="cq-message-icon"></div>
				<div class="cq-message-text"></div>
			</div>`,h.querySelector(".cq-message-text").appendChild(t.translatableTextNode(this.context.stx,a)),h.classList.add("cq-toast-message"),h.classList.add("type-"+r),c&&h.classList.add("animate","transition-"+c),o=="bottom"&&h.classList.add("align-bottom"),h.displayTime=l,h.priority=s,h.message=a,t.safeClickTouch(h,function(p,u,g){g.stopPropagation(),u&&u(),this.removeMessageNode(p)}.bind(this,h,d)),this.positionElement(h),h}displayNextMessage(){if(!this.messageQueue.length)return;if(!this.context.topNode.querySelector(".cq-toast-message")){let a=this.messageQueue[0];this.context.topNode.appendChild(a),a.isDisplayed=!0,a.displayTime!==0&&(this.displayTimer=window.setTimeout(this.removeMessageNode.bind(this,a),a.displayTime*1e3))}}removeMessageNode(e){if(e.classList.contains("hide"))return;e.classList.add("hide");let a=e.classList.contains("animate")?500:0;window.setTimeout(()=>{e.remove(),this.messageQueue.splice(this.messageQueue.indexOf(e),1),this.displayTimer&&(this.displayTimer=window.clearTimeout(this.displayTimer)),this.displayNextMessage()},a)}recallMessageNode(e){e.isDisplayed&&(this.displayTimer&&(this.displayTimer=window.clearTimeout(this.displayTimer)),e.isDisplayed=!1,this.context.topNode.removeChild(e))}newMessage(e){if(typeof e=="string"&&this.context.config&&this.context.config.systemMessages&&(e=this.context.config.systemMessages[e]),!e)return;for(const o of this.messageQueue)if(o.message===e.message)return;let a=this.createMessageElement(e);if(a){const o=this.messageQueue.findIndex(r=>r.priority<a.priority);o>=0?(this.messageQueue[o].isDisplayed&&this.recallMessageNode(this.messageQueue[o]),this.messageQueue.splice(o,0,a)):this.messageQueue.push(a),this.displayNextMessage()}}dismissMessage(e){for(const a of this.messageQueue)a.message===e&&this.removeMessageNode(a)}}t.UI.addComponentDefinition("cq-message-toaster",i)},sg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super(),this.dragMargin=10}connectedCallback(){this.attached||super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}init(){this.isDragging=!1,this.minHeight=parseInt(this.getAttribute("min-height"),10),isNaN(this.minHeight)&&(this.minHeight=25),this.paletteDock=this.parentElement.parentElement,this.dragStrip=this.querySelector(".drag-strip"),this.resizeStrip=this.querySelector(".resize-strip"),this.dragStrip&&(this.dragStrip.addEventListener("mousedown",this.handleDragResize.bind(this,"dragging")),this.dragStrip.addEventListener("touchstart",this.handleDragResize.bind(this,"dragging"),{passive:!1})),this.resizeStrip&&(this.resizeStrip.addEventListener("mousedown",this.handleDragResize.bind(this,"resizing")),this.resizeStrip.addEventListener("touchstart",this.handleDragResize.bind(this,"resizing"),{passive:!1})),this.paletteDock.paletteSubscribe&&(this.sendMessage=this.paletteDock.paletteSubscribe(this.handleMessage.bind(this)))}get hide(){return this.getAttribute("hide")}set hide(e){this.setAttribute("hide",e)}get docked(){return this.getAttribute("docked")}set docked(e){this.setAttribute("docked",e)}get orientation(){return this.getAttribute("orientation")}set orientation(e){this.setAttribute("orientation",e)}static get observedAttributes(){return["docked","hide"]}attributeChangedCallback(e,a,o){switch(e){case"docked":o==="false"?(this.setTransform(100,70),this.setHeightByScale(.8)):this.style.transform="";break}}handleDragResize(e,a){this.paletteDock.hasOwnProperty("dragging")&&this.paletteDock.startDrag(this,e)}handleMessage(e,a){return{id:e,message:a}}detach(e,a){let o=this.ownerDocument.body.classList.contains("break-sm");if(this.docked==="true"&&!o){this.docked="false",e=e||10,a=a||10;let r={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(r=this.paletteDock.getChartBoundsOffset()),e>r.left+r.width-this.clientWidth&&(e=r.left+r.width-this.clientWidth),this.setTransformPosition(e,a),this.paletteDock.setChartDimensions(),this.paletteDock.setVerticalPaletteHeight()}}dock(){this.docked==="false"&&(this.docked="true",this.paletteDock.setChartDimensions(),this.paletteDock.setVerticalPaletteHeight())}getHeight(){return this.clientHeight}getWidth(){return this.clientWidth}checkPosition(){let e={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(e=this.paletteDock.getChartBoundsOffset());const o=this.style.transform.split(/\w+\(|\);?/)[1].split(/,\s?/g).map(function(r){return parseInt(r)});o[0]+=e.left+this.dragStrip.clientWidth*.5,o[1]+=e.top+this.dragStrip.clientHeight*.5,this.setTransformPosition(o[0],o[1])}setTransformPosition(e,a){let o={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(o=this.paletteDock.getChartBoundsOffset());let r=Math.floor(a-o.top-this.dragStrip.clientHeight*.5),c=Math.floor(e-o.left-this.dragStrip.clientWidth*.5);r=Math.min(Math.max(r,this.dragMargin),o.height-(this.dragStrip.clientHeight+this.dragMargin)),c=Math.min(Math.max(c,this.dragMargin),o.width-(this.dragStrip.clientWidth+this.dragMargin)),this.setTransform(c,r)}setTransform(e,a){this.style.transform="translate3d("+e+"px,"+a+"px, 0px)"}setHeightToPosition(e){let a={top:0,left:0,width:0,height:0};this.paletteDock.getBounds&&(a=this.paletteDock.getBounds());let o=this.getBoundingClientRect(),r=e-o.top;this.orientation==="vertical"&&r>this.minHeight&&r+(o.top-a.top)<a.height&&this.setHeight(r)}setHeightByScale(e){this.style.height=Math.floor(parseInt(this.style.height,10)*e)+"px"}setHeight(e){this.style.height=e+"px"}}t.UI.addComponentDefinition("cq-palette",i)},cg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super(),this.dragging=!1,this.paletteRegistry=[],this.mouseOutCk=!1}connectedCallback(){this.attached||super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}initListeners(){const{stx:e,config:a={}}=this.context,o=this,r=o.handleResize.bind(this);this.setVerticalPaletteHeight(),this.addEventListener("touchend",u=>this.stopDrag(u)),this.addEventListener("touchmove",h,{passive:!1}),this.addEventListener("mouseup",u=>this.stopDrag(u)),this.addEventListener("mouseleave",l),this.addEventListener("mouseenter",s),this.addEventListener("mousemove",d),this.addEventListener("mousedown",this.stopContext.bind(this)),e.append("resizeChart",()=>r({resizeChart:!1}));const c=(a.channels||{}).drawing||"channel.drawing";this.channelSubscribe(c,p);function l(u){o.context.stx.showCrosshairs(),o.mouseOutCk=setTimeout(()=>o.stopDrag(),500)}function s(u){if(o.context.stx.undisplayCrosshairs(),!!o.dragging){if(u.buttons===1){clearTimeout(o.mouseOutCk);return}o.stopDrag()}}function d(u){o.dragging&&(u.stopPropagation(),o.dragging.classList.contains("dragging")&&o.dragging.setTransformPosition(u.clientX,u.clientY),o.dragging.classList.contains("resizing")&&o.dragging.setHeightToPosition(u.clientY))}function h(u){o.dragging&&u.touches[0]&&(u.stopPropagation(),o.dragging.classList.contains("dragging")&&o.dragging.setTransformPosition(u.touches[0].clientX,u.touches[0].clientY),o.dragging.classList.contains("resizing")&&o.dragging.setHeightToPosition(u.touches[0].clientY))}function p(u){o.setChartDimensions(),e.resizeChart()}}setContext(){this.initListeners()}palettePublish(e,a){for(var o=0;o<this.paletteRegistry.length;o++)this.paletteRegistry[o](e,a)}paletteSubscribe(e){return this.paletteRegistry.push(e),this.palettePublish.bind(this)}getBounds(){return this.parentNode.getBoundingClientRect()}getChartBounds(){let e=this.parentNode.getBoundingClientRect(),a={top:0,left:0,height:e.height,width:e.width};for(var o=this.querySelectorAll('[docked="true"]'),r=0;r<o.length;r++){var c=o[r];c.orientation==="vertical"?(a.width-=c.getWidth(),a.left+=c.getWidth()):c.orientation==="horizontal"&&(a.height-=c.getHeight(),a.top+=c.getHeight())}return a}getChartBoundsOffset(){let e=this.parentNode.getBoundingClientRect(),a=this.getChartBounds();return a.top+=e.top,a.left+=e.left,a}startContext(){this.classList.add("context")}stopContext(){this.classList.remove("context"),this.palettePublish("context","stop")}startDrag(e,a){for(var o=this.querySelectorAll('[docked="false"]'),r=0;r<o.length;r++)o[r].style.zIndex=1;a=a||"dragging",this.dragging=e,this.classList.add("dragging"),this.dragging.classList.add(a),this.dragging.style.zIndex=10}stopDrag(e){e&&e.preventDefault(),this.classList.remove("dragging"),this.dragging=!1,this.resizing=!1,this.node.find('[docked="false"]').each(function(){this.node.removeClass("dragging resizing")})}startResize(e){this.resizing=e,this.classList.add("dragging"),this.dragging.classList.add("dragging")}handleResize({resizeChart:e=!0}={}){this.palettePublish("dockWillResize"),this.setChartDimensions(),this.setVerticalPaletteHeight();let a=this.ownerDocument.body.classList.contains("break-sm");for(var o=this.querySelectorAll('[docked="false"]'),r=0;r<o.length;r++){var c=o[r];a?c.dock():c.checkPosition()}this.palettePublish("dockDidResize"),e&&this.context.stx.resizeChart()}setVerticalPaletteHeight(){this.node.find("[orientation=vertical]").each(function(e,a){a.getAttribute("docked")==="true"&&(a.style.height=this.parentNode.clientHeight+"px")}.bind(this))}setChartDimensions(){const e=this.context.stx.container,{top:a,left:o,width:r,height:c}=this.getChartBounds(),{config:l}=this.context;l&&l.channels?this.channelWrite(l.channels.drawingPalettes||"channel.drawingPalettes",{top:a,left:o,width:r,height:c}):(e.style.width=r+"px",e.style.height=c+"px",e.style.top=a+"px",e.style.left=o+"px");for(var s=this.querySelectorAll('[orientation="horizontal"]'),d=0;d<s.length;d++){var h=s[d];h.style.left=o+1+"px",h.style.width=r+"px"}for(var p=this.querySelectorAll('[orientation="vertical"]'),u=0;u<p.length;u++){var g=p[u];g.docked==="false"?g.style.top=a+"px":g.style.top=0}}dockAllPalettes(){for(var e=this.querySelectorAll('[docked="false"]'),a=0;a<e.length;a++)e[a].dock()}}t.UI.addComponentDefinition("cq-palette-dock",i)},lg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}pairUp(e){this.undo=e,this.undo.redoButton=this;var a=this;t.UI.stxtap(this,function(){a.undo.redo()})}}t.UI.addComponentDefinition("cq-redo",i)},dg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{connectedCallback(){if(!this.attached&&(super.connectedCallback(),this.hasAttribute("cq-no-claim")||this.addClaim(this),!this.hasAttribute("cq-no-scroll"))){this.style.overflowY="auto",this.uiManager=t.UI.getUIManager(this),this.uiManager.length>0&&(this.uiManager=this.uiManager[0]),this.addEventListener(t.wheelEvent,function(a){a.stopPropagation()},{passive:!1});var e=this;t.UI.addResizeListener(this,function(){e.resize()}),this.resize()}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}disconnectedCallback(){this.doNotDisconnect||(t.UI.removeResizeListener(this),super.disconnectedCallback())}focused(){var e=this.node.find("cq-item[cq-focused]");return e.length?e[0]:null}keyStroke(e,a,o){const r=this.ownerDocument.querySelectorAll(".stxMenuActive *");if(!this.keyboardNavigation&&!Array.from(r).includes(this))return;if(!t.trulyVisible(this))return!1;if(this.keyboardNavigationWait&&!this.keyboardNavigation)return;const c=this.querySelectorAll("[keyboard-selectable='true'], cq-item:not(.item-hidden), li");if(!!c.length){if(a==" "||a=="Spacebar"||a=="Enter"){const l=this.findFocused(c);if(!l||!l.length)return;const s=l[0].querySelectorAll("[keyboard-selectable-child='true'][cq-focused]");s.length?this.clickItem(s[0],o):this.clickItem(l[0],o)}else if(a=="ArrowDown"||a=="Down")this.focusNextItem(c);else if(a=="ArrowUp"||a=="Up")this.focusNextItem(c,!0);else if(a=="ArrowRight"||a=="Right"){const l=this.findFocused(c);if(!l||!l.length)return;const s=l[0].querySelectorAll("[keyboard-selectable-child='true']");s.length&&this.focusNextItem(s)}else if(a=="ArrowLeft"||a=="Left"){const l=this.findFocused(c)[0];if(!l)return;const s=l.querySelectorAll("[keyboard-selectable-child='true']");s.length&&!this.focusNextItem(s,!0)&&(this.removeFocused(s),this.focusItem(l))}return!0}}focusItem(e){this.scrollToElement(e),super.focusItem(e)}onKeyboardDeselection(){this.keyboardNavigation&&this.keyboardNavigation!==null&&this.keyboardNavigation.highlightPosition()}resize(){var e=this.node,a=t.UI.getMyContext(this);if(!e.parents(".sharing").length&&!this.hasAttribute("cq-no-resize")){this.hasAttribute("cq-no-maximize")&&(this.noMaximize=!0);var o=this.getBoundingClientRect(),r=this.reduceMenuHeight||45,c,l;if(a&&a.topNode){var s=a.topNode.getBoundingClientRect();c=s.height,l=s.top}else c=window.innerHeight,l=0;if(!!c){var d=c-(o.top-l)-r,h=e.parents(".stx-holder,.stx-subholder,.chartContainer");h.length&&h.each(function(){var f=this.getBoundingClientRect().top+t.elementDimensions(this).height;d=Math.min(d,f-o.top-5)});for(var p=e.nextAll(),u=0;u<p.length;u++){var g=p[u];g&&!t.trulyVisible(g)||(d-=t.elementDimensions(g,{border:1,padding:1,margin:1}).height)}this.noMaximize||e.css({height:d+"px"}),e.css({"max-height":d+"px"}),this.refresh()}}}scrollToElement(e){var a=this.clientHeight,o=this.scrollTop,r=e.offsetTop+e.clientHeight;e.offsetTop>o&&r<a+o||(this.scrollTop=Math.max(r-a,0),this.refresh())}top(){this.scrollTop=0,this.refresh()}refresh(){t.UI.scrollbarStyling&&t.UI.scrollbarStyling.refresh(this)}}t.UI.addComponentDefinition("cq-scroll",i)},hg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(){this.addDefaultMarkup(),t.safeClickTouch(this,()=>this.tap())}tap(e){const{context:a}=this;if(a.config)this.channelWrite(a.config.channels.dialog,{type:"share",params:{context:a}},a.stx);else{const o=this.ownerDocument.querySelector("cq-share-dialog");o&&o.open&&o.open({context:a})}}}i.markup="<div>Share</div>",t.UI.addComponentDefinition("cq-share-button",i)},pg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Share)console.error("shareDialog component requires first activating share feature.");else{class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),this.setState("share-create"),super.open(e)}close(){this.setState("share-create"),super.close()}setState(e){if(this.addDefaultMarkup(),this.node.find("div[cq-share-dialog-div]")[0].className=e,this.ownerDocument.body.keystrokeHub){let{tabActiveModals:a}=this.ownerDocument.body.keystrokeHub;a[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(a[0])}}share(){var e=this.context.stx,a=this;a.setState("share-generate");var o=this.ownerDocument.querySelector("cq-share-dialog .share-link-div");if(o&&(o.innerHTML=""),t.UI.bypassBindings=!0,t.Share.createImage(e,{hide:[".stx_chart_controls",".stx-btn-panel",".stx_jump_today",".stx-baseline-handle",".ciq-edit",".ciq-close","cq-marker-label"]},function(r){t.UI.bypassBindings=!1;var c=t.uniqueID(),l="https://share.chartiq.com",s=e.getStartDateOffset(),d={layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:s,startDate:e.chart.dataSegment[s].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:c,symbol:e.chart.symbol},h=l+"/upload/"+c,p={id:c,image:r,config:d};a.setState("share-upload"),t.Share.uploadImage(r,h,p,function(u,g){a.setState("share-copy"),u!==null?t.alert("error: "+u):o&&(o.innerHTML=l+g)})}),this.ownerDocument.body.keystrokeHub){let{tabActiveModals:r}=this.ownerDocument.body.keystrokeHub;r[0]&&this.ownerDocument.body.keystrokeHub.setKeyControlElement(r[0])}}copy(){var e=this.ownerDocument.querySelector("cq-share-dialog .share-link-div");if(!!e){var a=e.innerText,o=document.createElement("input");if(o.type="text",o.value=a,o.contentEditable=!0,o.readOnly=!0,this.ownerDocument.body.appendChild(o),o.focus(),o.select(),!t.isIE){var r=document.createRange();r.selectNodeContents(o);var c=window.getSelection();c.removeAllRanges(),c.addRange(r),o.setSelectionRange(0,a.length)}this.ownerDocument.execCommand("copy"),this.ownerDocument.body.removeChild(o),this.setState("share-copied")}}}i.markup=`
		<h4 class="title">Share Your Chart</h4>
		<cq-close></cq-close>
		<div cq-share-dialog-div>
			<cq-separator></cq-separator>
			<cq-share-create class="ciq-btn" stxtap="share()">Create Image</cq-share-create>
			<cq-share-generating>Generating Image</cq-share-generating>
			<cq-share-uploading>Uploading Image</cq-share-uploading>
			<div class="share-link-div"></div>
			<cq-share-copy class="ciq-btn" stxtap="copy()">Copy Link to Clipboard</cq-share-copy>
			<cq-share-copied>Link Copied!</cq-share-copied>
	`,t.UI.addComponentDefinition("cq-share-dialog",i)}},ug=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}set(e,a,o,r,c,l){var s=this;s.context.loader&&s.context.loader.show();var d={multiplier:a,base:o,padding:40};r&&(d.periodicity={interval:r,period:c||1,timeUnit:l}),s.context.stx.setSpan(d,function(){s.context.loader&&s.context.loader.hide()})}setContext(e){const a=e.config&&e.config.getMenu("rangeMenu");this.addDefaultMarkup(this,a&&a.join(""))}}i.markup=`
		<div stxtap="set(1,'today');">1D</div>
		<div stxtap="set(5,'day',30,2,'minute');">5D</div>
		<div stxtap="set(1,'month',30,8,'minute');">1M</div>
		<div class="hide-sm" stxtap="set(3,'month');">3M</div>
		<div class="hide-sm" stxtap="set(6,'month');">6M</div>
		<div class="hide-sm" stxtap="set(1,'YTD');">YTD</div>
		<div stxtap="set(1,'year');">1Y</div>
		<div class="hide-sm" stxtap="set(5,'year',1,1,'week');">5Y</div>
		<div class="hide-sm" stxtap="set(1,'all');">All</div>
	`,t.UI.addComponentDefinition("cq-show-range",i)},fg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext({config:{channels:e={}}={},stx:a}){const o=this.querySelector("div"),r=this.getAttribute("cq-on")||"sidenavOn",c=this.getAttribute("cq-off")||"sidenavOff",l=e.breakpoint||"channel.breakpoint",s=e.sidenav||"layout.sidenav",d=e.sidenavSize||"channel.sidenavSize",h=e.tfc||"channel.tfc",p=()=>{const u=this.channelRead(l)==="break-sm",g=u&&this.channelRead(s)===r;o.classList.remove("sidenav","ciq-toggles"),o.classList.add(u?"sidenav":"ciq-toggles"),o.classList[g?"add":"remove"]("active"),this.channelWrite(d,g?o.getBoundingClientRect().width:0)};this.channelSubscribe(s,p),this.channelSubscribe(l,p),this.channelSubscribe(h,u=>{u&&this.channelWrite(s,c)})}}t.UI.addComponentDefinition("cq-side-nav",i)},gg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super(),this.callbacks=[]}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setContext(e){const{config:a,stx:o}=e;if(!a)return;const{channels:r={}}=a,c=this.resizeMyself.bind(this),{node:l}=this;this.channelSubscribe(r.breakpoint||"channel.breakpoint",s),this.channelSubscribe(r.tfc||"channel.tfc",d,o);function s(){setTimeout(c)}function d(h){h?l.attr("cq-active",!0):l.removeAttr("cq-active"),s()}}close(){this.node.removeAttr("cq-active");var e=this.node.children();e.each(function(){this.sidePanelActiveClass?this.classList.remove(this.sidePanelActiveClass):this.removeAttribute(this.sidePanelActiveAttribute)});var a=this;setTimeout(function(){a.resizeMyself()},0)}nonAnimatedWidth(){var e=0;return Array.from(this.children).forEach(function(a){e+=t.elementDimensions(a).width}),e}open(e){this.close();var a=this.node.find(e.selector);e.className?(a.addClass(e.className),a.each(function(){this.sidePanelActiveClass=e.className})):(a.attr(e.attribute,"true"),a.each(function(){this.sidePanelActiveAttribute=e.attribute})),this.node.attr("cq-active","true");var o=this;setTimeout(function(){o.resizeMyself()},0)}registerCallback(e){this.callbacks.push(e)}resizeMyself(){var e=this.nonAnimatedWidth();this.node.css({width:e+"px"});for(var a=0;a<this.callbacks.length;a++)this.callbacks[a].call(this,e);const{config:o,stx:r}=this.context||{};if(!o)return;const c=(o.channels||{}).sidepanelSize||"channel.sidepanelSize";this.channelWrite(c,e,r)}}t.UI.addComponentDefinition("cq-side-panel",i)},mg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){this.context&&t.UI.unobserveProperty("studyLibraryHash",this.context.stx.chart,this.listener),super.disconnectedCallback()}initialize(e){this.addDefaultMarkup(),this.params=e||{},this.alwaysDisplayDialog=this.params.alwaysDisplayDialog||!1,this.excludedStudies=this.params.excludedStudies||[],this.params.template||(this.params.template="template"),this.params.template=this.node.find(this.params.template),this.renderMenu();var a=this,o=this.context.stx;this.listener=function(r){a.renderMenu()},t.UI.observeProperty("studyLibraryHash",o.chart,this.listener)}setContext({config:e}){e&&e.menuStudiesConfig&&this.initialize(Object.assign({},e.menuStudiesConfig))}renderMenu(){if(!t.Studies)return;var e=this.context.stx,a=[],o;for(var r in t.Studies.studyLibrary)o=t.Studies.studyLibrary[r],!(!o||this.excludedStudies[r]||this.excludedStudies[o.name]||o.siqList!==void 0)&&(o.name||(o.name=r),a.push(r));a.sort(function(f,w){var v=t.Studies.studyLibrary[f],m=t.Studies.studyLibrary[w];return v.name<m.name?-1:v.name>m.name?1:0});for(var c=this.node,l=this,s=function(f,w){return function(v){g(v.target,f),l.dispatchEvent(new Event("resize"))}},d=c.find("cq-studies-content");d.length>0&&d[0].firstChild;)d[0].removeChild(d[0].firstChild);for(var h=0;h<a.length;h++){var p=t.UI.makeFromTemplate(this.params.template);o=t.Studies.studyLibrary[a[h]],p.append(t.translatableTextNode(e,o.name)),this.makeTap(p[0],s(a[h],this.context)),c.find("cq-studies-content").append(p)}function u(f,w){const{context:v}=l;if(v.config)l.channelWrite(v.config.channels.dialog,{type:"study",params:Object.assign({},f,{context:v,addWhenDone:w})},v.stx);else{f.context=l.context;const m=l.ownerDocument.querySelector("cq-study-dialog");m.addWhenDone=w,m.open(f)}}function g(f,w){const{alwaysDisplayDialog:v={},context:{stx:m}}=l;function q(k,S,A){if(k===!0)return u(S,A),!0;if(typeof k=="object"){for(let _ in k)if(_==w&&k[_])return u(S,A),!0}}if(q(l.params.dialogBeforeAddingStudy,{stx:m,name:w},!0))return;const x=v[w]?{interactiveAdd:!1}:null,y=t.Studies.addStudy(m,w,null,null,x);q(l.alwaysDisplayDialog,{sd:y,stx:m})}}}i.markup=`
		<template>
			<cq-item></cq-item>
		</template>
		<cq-studies-content></cq-studies-content>
	`,t.UI.addComponentDefinition("cq-studies",i)},bg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext(e){this.addDefaultMarkup(),this.classList.add("ciq-context-menu"),super.setContext(e)}}i.markup=`
		<div stxtap="StudyEdit.edit()">Edit Settings...</div>
		<div stxtap="StudyEdit.remove()">Delete Study</div>
	`,t.UI.addComponentDefinition("cq-study-context",i)},vg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Studies)console.error("studyDialog component requires first activating studies feature.");else{class i extends t.UI.DialogContentTag{connectedCallback(){this.attached||(super.connectedCallback(),this.queuedUpdates={})}close(){if(this.addWhenDone){var e=this.helper,a=t.Studies.addStudy(e.stx,e.name);t.isEmpty(this.queuedUpdates)||(e.sd=a,e.updateStudy(this.queuedUpdates),this.queuedUpdates={})}}closeActiveMenu(e){const a=this.ownerDocument.body.keystrokeHub,o=this.querySelector("*.stxMenuActive"),r=t.UI.getUIManager(this);!o||!a||!a.tabActiveElement||a.tabActiveElement.element!==e||(a.tabActiveElement=null,a.highlightHide(),r.closeMenu(o))}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}disconnectedCallback(){t.UI.unobserveProperty("signal",this.helper),super.disconnectedCallback()}formatDateInput(e){return e=e.replace(/-/g,""),e.search(/^\d{8}$/)||(e=e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)),e}formatTimeInput(e){return e=e.replace(/:/g,""),e.search(/^\d{4,6}$/)||(e=e.substring(0,2)+":"+e.substring(2,4)+(e.length==4?"":":"+e.substring(4,6))),e}hide(){t.isEmpty(this.queuedUpdates)||(this.helper.updateStudy(this.queuedUpdates),this.queuedUpdates={}),this.node.find("cq-menu").each(function(){this.unlift&&this.unlift()}),this.node.find("cq-swatch").each(function(){this.colorPicker&&this.colorPicker.close()})}makeMenu(e,a,o,r){var c=t.UI.makeFromTemplate(this.menuTemplate),l=c.find("cq-menu-dropdown");for(var s in o){var d=document.createElement("cq-item");d.innerText=o[s],d.setAttribute("stxtap","StudyDialog.setSelectOption('"+r+"')"),l.append(d),d.cqMenuWrapper=l.parents("cq-menu")[0],d.setAttribute("name",e),d.setAttribute("value",s),d.context=this.context}var h=c.find("cq-selected");return h.text(this.helper.stx.translateIf(a)),c[0]}open(e){this.addDefaultMarkup(),this.selectTemplates(),super.open(e),"axisSelect"in e||(e.axisSelect=this.getAttribute("cq-study-axis"),e.axisSelect===""&&(e.axisSelect=!0)),"panelSelect"in e||(e.panelSelect=this.getAttribute("cq-study-panel"),e.panelSelect===""&&(e.panelSelect=!0)),typeof e.addWhenDone!="undefined"&&(this.addWhenDone=e.addWhenDone);var a=this;this.context.stx,t.UI.unobserveProperty("signal",this.helper),this.helper=new t.Studies.DialogHelper(e),t.UI.observeProperty("signal",this.helper,function(r){a.refreshInputs(),a.refreshOutputs(),a.refreshParameters(e)});var o=this.node;o.find(".title").text(this.helper.title),this.refreshInputs(!0),this.refreshOutputs(!0),this.refreshParameters(e,!0)}refreshInputs(e){var a=this.node.find("cq-study-inputs");e&&a.empty();for(var o=0;o<this.helper.inputs.length;o++){var r=this.helper.inputs[o],c=t.UI.makeFromTemplate(this.inputTemplate);this.menuTemplate=c.find("template[cq-menu]"),c.find(".ciq-heading").text(r.heading),c[0].setAttribute("fieldname",r.name);var l=null,s,d=this.helper.attributes[r.name];if(r.type=="number"){l=document.createElement("input"),l.setAttribute("type","number"),l.value=r.value,this.setChangeEvent(l,"inputs",r.name);for(s in d){var h=d[s];(t.isIE||t.isEdge)&&s=="step"&&Math.floor(h)!=h&&(h="any"),s!=="hidden"&&l.setAttribute(s,h)}}else if(r.type=="text"||r.type=="date"||r.type=="time"){l=document.createElement("input"),l.setAttribute("type",t.UI.supportedInputType(r.type)),r.type=="date"?l.value=this.formatDateInput(r.value):r.type=="time"?l.value=this.formatTimeInput(r.value):l.value=r.value,this.setChangeEvent(l,"inputs",r.name);for(s in d)s!=="hidden"&&l.setAttribute(s,d[s])}else if(r.type=="select")l=this.makeMenu(r.name,r.value,r.options,"inputs"),d&&d.readonly&&l.setAttribute("readonly",d.readonly);else if(r.type=="checkbox"){l=document.createElement("input"),l.setAttribute("type","checkbox"),r.value&&(l.checked=!0),this.setChangeEvent(l,"inputs",r.name);for(s in d)s!=="hidden"&&l.setAttribute(s,d[s])}d&&d.hidden&&c.hide(),l&&c.find(".stx-data").append(l),c[0].originalOuterHTML=c[0].outerHTML;var p=a.find("[fieldname='"+r.name+"']");p.length?p[0].originalOuterHTML!==c[0].originalOuterHTML&&p[0].replaceWith(c[0]):a.append(c)}}refreshOutputs(e){var a=this.node.find("cq-study-outputs");e&&a.empty();for(var o=0;o<this.helper.outputs.length;o++){var r=this.helper.outputs[o],c=t.UI.makeFromTemplate(this.outputTemplate);c[0].initialize({studyDialog:this,output:r.name}),c.find(".ciq-heading").text(r.heading),c[0].setAttribute("fieldname",r.name);var l=c.find("cq-swatch"),s=r.color;typeof s=="object"&&(s=s.color),c[0].originalOuterHTML=c[0].outerHTML;var d=a.find("[fieldname='"+r.name+"']");d.length?d[0].originalOuterHTML!==c[0].originalOuterHTML&&d[0].replaceWith(c[0]):a.append(c),l[0].setColor(s,!1)}}refreshParameters(e,a){var o=this.node.find("cq-study-parameters");a&&o.empty();for(var r=0;r<this.helper.parameters.length;r++){var c=this.helper.parameters[r],l=t.UI.makeFromTemplate(this.parameterTemplate);if(this.menuTemplate=l.find("template[cq-menu]"),!this.menuTemplate.length&&c.options){l.remove();continue}l.find(".ciq-heading").text(c.heading),l[0].setAttribute("fieldname",c.name);var s=l.find("cq-swatch"),d=document.createElement("input"),h,p=!1,u={};if(c.defaultValue.constructor==Boolean){d.setAttribute("type","checkbox"),c.value&&(d.checked=!0),this.setChangeEvent(d,"parameters",c.name+"Enabled"),s.remove(),u=this.helper.attributes[c.name+"Enabled"];for(h in u)h!=="hidden"&&d.setAttribute(h,u[h])}else if(c.defaultValue.constructor==String){var g=c.name;c.defaultColor?(l[0].initialize({studyDialog:this,parameter:c.name+"Color",params:e}),p=!0,g=g+"Value"):s.remove(),c.options?d=this.makeMenu(g,c.value,c.options,"parameters"):d.value=c.value,u=this.helper.attributes[g];for(h in u)h!=="hidden"&&d.setAttribute(h,u[h])}else if(c.defaultValue.constructor==Number){d.setAttribute("type","number"),d.value=c.value,this.setChangeEvent(d,"parameters",c.name+"Value"),l[0].initialize({studyDialog:this,parameter:c.name+"Color",params:e}),p=!0,u=this.helper.attributes[c.name+"Value"];for(h in u){var f=u[h];(t.isIE||t.isEdge)&&h=="step"&&Math.floor(f)!=f&&(f="any"),h!=="hidden"&&d.setAttribute(h,f)}}else continue;u&&u.hidden&&l.not("hr").hide(),l.find(".stx-data").append(d),l[0].originalOuterHTML=l[0].outerHTML;var w=o.find("[fieldname='"+c.name+"']");w.length?w[0].originalOuterHTML!==l[0].originalOuterHTML&&w[0].replaceWith(l[0]):o.append(l),p&&s[0].setColor(c.color,!1)}}setChangeEvent(e,a,o){var r=this;function c(){return function(){var l={};l[a]={},l[a][o]=this.value,(this.type=="checkbox"||this.type=="radio")&&(l[a][o]=this.checked),r.updateStudy(l)}}e.addEventListener("change",c())}setContext(e){this.context=e,e.advertiseAs(this,"StudyDialog")}setSelectOption(e,a){var o=t.UI.$(e.node),r=o.attr("name"),c=o.attr("value"),l=o[0].cqMenuWrapper;l.fieldValue=c;var s=l.querySelector("cq-selected");s&&(s.innerText=this.helper.stx.translateIf(c)),a||(a="inputs");var d={};d[a]={},d[a][r]=c,this.closeActiveMenu(o[0]),this.updateStudy(d)}updateStudy(e){if(!this.node.find(":invalid").length){if(this.addWhenDone){t.extend(this.queuedUpdates,e);return}this.helper.libraryEntry.deferUpdate?(t.extend(this.queuedUpdates,{inputs:e.inputs}),this.helper.updateStudy({outputs:e.outputs,parameters:e.parameters})):this.helper.updateStudy(e)}}selectTemplates(){this.inputTemplate||(this.inputTemplate=this.querySelector("template[cq-study-input]"),this.outputTemplate=this.querySelector("template[cq-study-output]"),this.parameterTemplate=this.querySelector("template[cq-study-parameters]"))}}i.markup=`
		<h4 class="title">Study here</h4>
		<cq-scroll cq-no-maximize>
			<cq-study-inputs>
				<template cq-study-input>
					<cq-study-input>
						<div class="ciq-heading"></div>
						<div class="stx-data">
							<template cq-menu>
								<cq-menu class="ciq-select">
									<cq-selected></cq-selected>
									<cq-menu-dropdown cq-lift></cq-menu-dropdown>
								</cq-menu>
							</template>
						</div>
					</cq-study-input>
					<hr>
				</template>
			</cq-study-inputs>
			<cq-study-outputs>
				<template cq-study-output>
					<cq-study-output>
						<div class="ciq-heading"></div>
						<cq-swatch cq-overrides="auto"></cq-swatch>
					</cq-study-output>
					<hr>
				</template>
			</cq-study-outputs>
			<cq-study-parameters>
				<template cq-study-parameters>
					<cq-study-parameter>
						<div class="ciq-heading"></div>
						<div class="stx-data"><cq-swatch cq-overrides="auto"></cq-swatch>
							<template cq-menu>
								<cq-menu class="ciq-select">
									<cq-selected></cq-selected>
									<cq-menu-dropdown cq-lift></cq-menu-dropdown>
								</cq-menu>
							</template>
						</div>
					</cq-study-parameter>
					<hr>
				</template>
			</cq-study-parameters>
		</cq-scroll>
		<div class="ciq-dialog-cntrls">
			<div class="ciq-btn" stxtap="close()">Done</div>
		</div>
	`,t.UI.addComponentDefinition("cq-study-dialog",i)}},xg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{}t.UI.addComponentDefinition("cq-study-input",i)},yg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Studies)console.error("studyLegend component requires first activating studies feature.");else{class i extends t.UI.ModalTag{connectedCallback(){this.attached||(super.connectedCallback(),this.hasAttribute("cq-no-claim")||this.addClaim(this),this.context&&this.context.config&&this.context.config.channels&&this.channelWrite(this.context.config.channels.keyboardNavigation||"channel.keyboardNavigation",{action:"registerElements"}))}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}disconnectedCallback(){this.context&&this.context.config&&this.context.config.channels&&this.channelWrite(this.context.config.channels.keyboardNavigation||"channel.keyboardNavigation",{action:"registerElements"}),super.disconnectedCallback()}begin(){if(!this.init){var e=this.context.stx,a=this.node;this.template=a.find("template[cq-study-legend]"),this.template.length||(this.template=a.find("template")),this.contentKeys=a.attr("cq-content-keys")||"cq-label",this.eventListeners.push(e.addEventListener("layout",this.renderLegend.bind(this))),this.hasAttribute("cq-marker")&&t.UI.stxtap(this,function(){this.setActiveState()}),this.renderLegend(),this.init=!0}}setActiveState(e){let a=this.classList.contains("ciq-active");e=typeof e=="undefined"?!a:e;const o=this.ownerDocument.body.keystrokeHub;e?(this.classList.add("ciq-active"),o&&this.keyboardNavigation&&o.addActiveModal(this)):(this.classList.remove("ciq-active"),o&&o.removeActiveModal(this))}keyStroke(e,a,o){if(!this.keyboardNavigation)return;const r=this.querySelectorAll("[keyboard-selectable='true'], cq-item:not(.item-hidden), cq-comparison-item");if(a==" "||a=="Spacebar"||a=="Enter"){const c=this.findFocused(r);if(!c||!c.length)return;const l=c[0].querySelector("[keyboard-selectable-child='true'][cq-focused]");if(l)this.clickItem(l,o);else{const s=c[0].querySelector("cq-swatch");s&&this.clickItem(s,o)}}else if(a=="ArrowDown"||a=="Down")this.focusNextItem(r);else if(a=="ArrowUp"||a=="Up")this.focusNextItem(r,!0);else if(a=="ArrowRight"||a=="Right"){const c=this.findFocused(r);if(!c||!c.length)return;const l=c[0].querySelectorAll("[keyboard-selectable-child='true']");l.length&&this.focusNextItem(l)}else if(a=="ArrowLeft"||a=="Left"){const c=this.findFocused(r)[0];if(!c)return;const l=c.querySelectorAll("[keyboard-selectable-child='true']");l.length&&!this.focusNextItem(l,!0)&&(this.removeFocused(l),this.focusItem(c))}else if(a==="Tab"||a==="Esc"||a==="Escape"){this.removeFocused(r),this.setActiveState(!1);const c=this.ownerDocument.body.keystrokeHub;c&&c.tabOrderSelect()}}launchColorPicker(){this.setActiveState(!0)}renderLegend(){var e=this.context.stx;this.template.nextAll().remove();function a(x,y){return function(k){k.stopPropagation(),setTimeout(function(){y.permanent||t.Studies.removeStudy(x.context.stx,y),x.node[0].hasAttribute("cq-marker")&&x.context.stx.modalEnd(),x.renderLegend()},0)}}function o(x,y){return function(k){var S=e.layout.studies[y];if(!(S.permanent||!S.editFunction)){k.stopPropagation(),x.uiManager.closeMenu();var A=x.context.getAdvertised("StudyEdit"),_={stx:e,sd:S,inputs:S.inputs,outputs:S.outputs,parameters:S.parameters};A.editPanel(_)}}}var r=this.hasAttribute("cq-overlays-only"),c=this.hasAttribute("cq-panel-only"),l=this.hasAttribute("cq-custom-removal-only"),s=this.hasAttribute("cq-signal-studies-only"),d=this.node.attr("cq-marker-label"),h=null,p=this.node.parents(".stx-holder")[0];if(p&&(h=p.panel.name),t.Studies)for(var u in e.layout.studies){var g=e.layout.studies[u];if(!g.customLegend&&!(l&&!g.study.customRemoval)&&!(c&&g.panel!=h)&&!(r&&!g.overlay&&!g.underlay)&&!(d&&g.signalData&&!g.signalData.reveal)&&!(!d&&t.xor(s,g.signalData))){var f=t.UI.makeFromTemplate(this.template,!0);if(f.find("cq-label").html(g.inputs.display),g.signalData&&g.signalData.hide&&!p&&h!=="chart"){var w=document.createElement("span");w.className="ciq-switch",g.signalData.reveal&&f.addClass("ciq-active");let x=function(y){return k=>{var S=y.signalData.reveal;y.signalData[S?"hide":"show"](),k.target.parentElement.classList[S?"remove":"add"]("ciq-active")}};t.safeClickTouch(w,x(g)),f.append(w)}var v=f.find(".ciq-close");g.permanent?v.hide():(v[0].setAttribute("keyboard-selectable-child","true"),t.UI.stxtap(v[0],a(this,g)));var m=f.find(".ciq-edit")[0];if(m&&(g.permanent||!g.editFunction))m.style.visibility="hidden";else if(g.editFunction){let x=m||f[0];t.UI.stxtap(x,o(this,u))}}}if(typeof d!="undefined"&&!this.node.find("cq-marker-label").length){var q=document.createElement("cq-marker-label");q.innerText=d,this.insertBefore(q,this.firstChild)}this.displayLegendTitle()}displayLegendTitle(){e(this,this.contentKeys)?(this.node.css("display",""),this.node.parents("div.stx-panel-legend").css("width","")):(this.node.css("display","none"),this.node.parents("div.stx-panel-legend").css("width","0px")),this.context.stx.translateUI&&this.context.stx.translateUI(this.node[0]);function e(o,r){return Array.from(o.querySelectorAll(r)).some(a)}function a(o){for(;o;){if(o.nodeName.toLowerCase()==="template")return!1;o=o.parentElement}return!0}}setContext(e){if(!this.init){var a=this;this.node.attr("cq-clone-to-panels")!==void 0&&(a.closest("cq-context").classList.add("stx-panel-legend"),a.spawnPanelLegend(),e.stx.append("stackPanel",function(o,r){a.spawnPanelLegend()})),this.begin()}}changeContext(e){this.eventListeners.forEach(a=>{this.context.stx.removeEventListener(a)}),this.eventListeners=[e.stx.addEventListener("layout",this.renderLegend.bind(this))],this.context=e,this.renderLegend()}spawnPanelLegend(){var e=this.context.stx;function a(d){return function(h){d.setActiveState()}}for(var o in e.panels)if(o!=e.chart.panel.name){var r=e.panels[o].subholder.querySelector(".stx-panel-legend");if(r){var c=r.querySelector(this.nodeName);if(!c){if(this.ownerDocument!==document){const d=document.createElement("template");d.innerHTML=this.outerHTML,document.body.append(d),c=t.UI.makeFromTemplate(d)[0],d.remove()}else c=this.cloneNode(!0);c.setAttribute("cq-marker-label",this.getAttribute("cq-clone-to-panels")),c.removeAttribute("cq-clone-to-panels"),c.removeAttribute("cq-overlays-only"),c.removeAttribute("cq-marker"),t.UI.stxtap(c,a(c));var l=c.querySelector("cq-marker-label");l&&l.remove();var s=document.createElement("cq-study-legend-fixed-wrapper");s.appendChild(c),r.appendChild(s),c.begin()}}}}}t.UI.addComponentDefinition("cq-study-legend",i)}},qg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}initialize(e){this.params=e}setColor(e){if(!!this.params){var a={outputs:{}};a.outputs[this.params.output]={},a.outputs[this.params.output].color=e,this.params.studyDialog.updateStudy(a)}}}t.UI.addComponentDefinition("cq-study-output",i)},wg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}initialize(e){this.params=e}setColor(e){if(!!this.params){var a={parameters:{}};a.parameters[this.params.parameter]=e,this.params.studyDialog.updateStudy(a)}}}t.UI.addComponentDefinition("cq-study-parameter",i)},kg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends HTMLElement{constructor(){super(),this.defaultColor=null}connectedCallback(){if(!this.attached){if(this.attached=!0,this.getAttribute("cq-static")){this.style.cursor="default";return}var e=this;t.UI.stxtap(this,function(a){e.launchColorPicker(),a.stopPropagation()})}}adoptedCallback(){t.UI.flattenInheritance(this,i)}getDefaultColor(){if(this.defaultColor)return this.defaultColor;var e=t.UI.getMyContext(this);return e?e.stx.defaultColor:"transparent"}setColor(e,a,o){var r=t.getBackgroundColor(this.parentNode),c=t.chooseForegroundColor(r),l=t.hsl(r);e=="auto"&&(o=!0),e||(e="transparent");var s=e;e=="auto"?s=this.getDefaultColor():e.indexOf("rgba(")===0&&(s=(s.split(",").slice(0,3).join(",")+")").replace(/rgba/,"rgb"));var d=t.hsl(s),h=t.isTransparent(e);this.style.background=this.value=s,o||Math.abs(l[2]-d[2])<.2||h?(this.style.border="solid "+c+" 1px",h&&(this.style.background="linear-gradient(to bottom right, transparent, transparent 49%, "+c+" 50%, transparent 51%, transparent)")):this.style.border="",o&&(r=t.chooseForegroundColor(s),this.style.background="linear-gradient(to bottom right, "+s+", "+s+" 49%, "+r+" 50%, "+r+")"),a!==!1&&t.UI.containerExecute(this,"setColor",e,this)}launchColorPicker(){t.UI.containerExecute(this,"launchColorPicker");var e=this.ownerDocument.querySelector("cq-color-picker");if(e){e.callback=function(o){return function(r){o.setColor(r,null)}}(this);var a=this.getAttribute("cq-overrides");a&&(a=a.split(",")),e.display({node:this,context:t.UI.getMyContext(this),overrides:a}),this.colorPicker=e}}}t.UI.addComponentDefinition("cq-swatch",i)},Cg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.ThemeHelper)console.error("themeDialog component requires first activating theme feature.");else{class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}applyChanges(){(this.context.topNode.getCharts?this.context.topNode.getCharts():[this.context.stx]).forEach(o=>{!o||(this.helper.update(o),o.changeOccurred("theme"))})}close(){this.helper.settings=this.revert,this.applyChanges(),super.close()}open(e){this.addDefaultMarkup(),super.open(e);var a=e.themeName;this.initiatingMenu=e.initiatingMenu,this.context=e.context,this.helper=new t.ThemeHelper({stx:this.context.stx}),this.revert=t.clone(this.helper.settings);var o=this;function r(l,s,d,h){var p=o.node.find('cq-theme-piece[cq-piece="'+l+'"]');!p.length||(p[0].piece={obj:s,field:d},h=="color"&&p.find("cq-swatch")[0].setColor(s[d],!1))}var c=this.helper.settings;r("cu",c.chartTypes["Candle/Bar"].up,"color","color"),r("cd",c.chartTypes["Candle/Bar"].down,"color","color"),r("wu",c.chartTypes["Candle/Bar"].up,"wick","color"),r("wd",c.chartTypes["Candle/Bar"].down,"wick","color"),r("bu",c.chartTypes["Candle/Bar"].up,"border","color"),r("bd",c.chartTypes["Candle/Bar"].down,"border","color"),r("lc",c.chartTypes.Line,"color","color"),r("mb",c.chartTypes.Mountain,"basecolor","color"),r("mc",c.chartTypes.Mountain,"color","color"),r("bg",c.chart.Background,"color","color"),r("gl",c.chart["Grid Lines"],"color","color"),r("dd",c.chart["Grid Dividers"],"color","color"),r("at",c.chart["Axis Text"],"color","color"),a||(a="My Theme"),this.node.find("cq-action input").val(a)}save(){var e=this.node.find("cq-action input").val(),a={settings:t.clone(this.helper.settings),name:e,builtIn:null};t.UI.contextsForEach(function(){this.stx.updateListeners("theme")},this);var o=this;this.ownerDocument.querySelectorAll("cq-themes").forEach(function(r){a.builtIn=r.currentLoadedBuiltIn,r.addCustom(a,o.initiatingMenu)}),super.close()}setValue(e,a,o){e[a]=o,this.applyChanges()}}i.markup=`
		<h4 class="title">Create Custom Theme</h4>
		<cq-close></cq-close>
		<cq-scroll cq-no-maximize>
			<cq-section>
				<cq-placeholder>Candle Color
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="cu"><cq-swatch cq-overrides="Hollow"></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="cd"><cq-swatch cq-overrides="Hollow"></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Candle Wick
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="wu"><cq-swatch></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="wd"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Candle Border
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="bu"><cq-swatch cq-overrides="No Border"></cq-swatch></cq-theme-piece>
						<cq-theme-piece cq-piece="bd"><cq-swatch cq-overrides="No Border"></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Line/Bar Chart
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="lc"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-separator></cq-separator>
				<cq-placeholder>Mountain Base
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="mb"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Mountain Peak
				<cq-theme-piece-container>
					<cq-theme-piece cq-piece="mc"><cq-swatch></cq-swatch></cq-theme-piece>
				</cq-theme-piece-container>
				</cq-placeholder>
			</cq-section>
			<cq-section>
				<cq-placeholder>Background
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="bg"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Grid Lines
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="gl"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Date Dividers
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="dd"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
				<cq-placeholder>Axis Text
					<cq-theme-piece-container>
						<cq-theme-piece cq-piece="at"><cq-swatch></cq-swatch></cq-theme-piece>
					</cq-theme-piece-container>
				</cq-placeholder>
			</cq-section>
			<cq-action>
				<input><div stxtap="save()" class="ciq-btn">Save</div>
			</cq-action>
		</cq-scroll>
	`,t.UI.addComponentDefinition("cq-theme-dialog",i)}},Sg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.BaseComponent{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}setBoolean(e){t.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,e)}setColor(e){(e=="Hollow"||e=="No Border")&&(e="transparent",this.node.find("cq-swatch")[0].setColor("transparent",!1)),t.UI.containerExecute(this,"setValue",this.piece.obj,this.piece.field,e)}}t.UI.addComponentDefinition("cq-theme-piece",i)},Dg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{connectedCallback(){this.attached||super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext({config:e}){if(!e)return;const{chartId:a,themes:{builtInThemes:o,defaultTheme:r}}=e,c=e.themes.nameValueStore||e.nameValueStore;this.initialize({builtInThemes:o,defaultTheme:r,nameValueStore:c,id:a})}addCustom(e,a){this.params.customThemes[e.name]=e,a===this&&(this.currentTheme=e.name),this.configureMenu(),this.persist()}configureMenu(){function e(h,p){return function(u){h.loadBuiltIn(p),h.params.callback&&h.params.callback({theme:h.currentTheme}),h.persist("current")}}function a(h,p){return function(u){h.loadCustom(p),h.params.callback&&h.params.callback({theme:h.currentTheme}),h.persist("current")}}this.builtInMenu.children(":not(template)").remove(),this.customMenu.children(":not(template)").remove();var o,r,c=this.params.builtInThemes;for(var l in c)o=c[l],r=t.UI.makeFromTemplate(this.builtInTemplate),r.text(o),this.makeTap(r[0],e(this,l)),this.builtInMenu.append(r);if(this.context.stx.translateUI&&this.context.stx.translateUI(this.builtInMenu[0]),this.customMenu.length&&this.customTemplate.length){var s=this.params.customThemes;for(var d in s)o=d,r=t.UI.makeFromTemplate(this.customTemplate),r.find("cq-label").text(o),this.makeTap(r.find("cq-item")[0],a(this,d)),r[0].close=function(h,p){return function(){h.removeTheme(p)}}(this,d),this.customMenu.append(r)}}initialize(e){if(this.initialized)return;this.initialized=!0,this.addDefaultMarkup(),this.selectTemplates(this),this.params={},e&&(this.params=e);const a=c=>typeof c=="function";t.ensureDefaults(this.params,{customThemes:{},builtInThemes:{},nameValueStore:t.NameValueStore&&new t.NameValueStore}),this.params.id&&(this.id="themes_"+this.params.id);let o=this,{nameValueStore:r}=this.params;r?(a(r)&&(r=this.params.nameValueStore=new r),r.get("CIQ.Themes.prototype.custom",(c,l)=>{!c&&l&&(o.params.customThemes=l),r.get(o.id+"CIQ.Themes.prototype.current",(s,d)=>{!s&&d&&d.theme?o.loadTheme(d.theme):o.loadTheme(o.params.defaultTheme),o.configureMenu()})})):this.loadTheme(o.params.defaultTheme)}loadBuiltIn(e){this.currentLoadedBuiltIn&&this.removeThemeClass(this.currentLoadedBuiltIn),this.addThemeClass(e),this.currentLoadedBuiltIn=this.currentTheme=e,this.reinitializeChart()}loadCustom(e){this.currentLoadedBuiltIn&&this.removeThemeClass(this.currentLoadedBuiltIn);var a=this.params.customThemes[e];a.builtIn&&this.addThemeClass(a.builtIn),this.currentLoadedBuiltIn=a.builtIn,this.currentTheme=a.name,this.reinitializeChart(a)}loadTheme(e){this.params.customThemes[e]?this.loadCustom(e):this.params.builtInThemes[e]?this.loadBuiltIn(e):this.loadBuiltIn(this.params.defaultTheme)}get contextContainers(){const e=this.context.topNode;return[e].concat(Array.from(e.querySelectorAll("cq-context")))}addThemeClass(e){this.contextContainers.forEach(a=>a.classList.add(e)),this.context.topNode.setCurrentThemeClass=a=>{a.classList.add(e)}}removeThemeClass(e){this.contextContainers.forEach(a=>a.classList.remove(e))}newTheme(){const{context:e}=this;e.config?this.channelWrite(e.config.channels.dialog,{type:"theme",params:{context:e,initiatingMenu:this}},e.stx):document.querySelector("cq-theme-dialog").open({context:this.context,initiatingMenu:this})}persist(e){!this.params.nameValueStore||((!e||e=="current")&&this.params.nameValueStore.set(this.id+"CIQ.Themes.prototype.current",{theme:this.currentTheme}),(!e||e=="custom")&&this.params.nameValueStore.set("CIQ.Themes.prototype.custom",this.params.customThemes))}removeTheme(e){var a=!1;this.ownerDocument.querySelectorAll("cq-themes").forEach(function(o){delete o.params.customThemes[e],o.configureMenu(),a||(o.persist(),a=!0)})}selectTemplates(){this.builtInMenu||(this.builtInMenu=this.node.find("cq-themes-builtin"),this.builtInTemplate=this.builtInMenu.find("template"),this.customMenu=this.node.find("cq-themes-custom"),this.customTemplate=this.customMenu.find("template"))}reinitializeChart(e){(this.context.topNode.getCharts?this.context.topNode.getCharts():[this.context.stx]).forEach(r=>{r&&r.setThemeSettings&&r.setThemeSettings(e?e.settings:null)})}}i.markup=`
		<cq-themes-builtin cq-no-close>
			<template>
				<cq-item></cq-item>
			</template>
		</cq-themes-builtin>
		<cq-themes-custom cq-no-close>
			<template>
				<cq-theme-custom>
					<cq-item>
						<cq-label></cq-label>
						<cq-close keyboard-selectable-child="true"></cq-close>
					</cq-item>
				</cq-theme-custom>
			</template>
		</cq-themes-custom>
		<cq-item stxtap="newTheme()"><cq-plus></cq-plus>New Theme</cq-item>
	`,t.UI.addComponentDefinition("cq-themes",i)},Ag=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.timeZoneMap)console.error("timezoneDialog component requires first activating timezone feature.");else{class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),super.open(e);var a=this.node,o=this;this.context=e.context;var r=this.context.stx;function c(v){return function(m){o.close();var q=t.timeZoneMap[v];t.ChartEngine.defaultDisplayTimeZone=q,r.setTimeZone(r.dataZone,q),r.chart.symbol&&r.draw()}}var l=a.find("ul, .ciq-ul"),s=a.find(".ciq-btn");this.template||(this.template=l.find("li.timezoneTemplate")[0].cloneNode(!0)),l.empty();for(var d in t.timeZoneMap){var h=d,p=r.translateIf(h),u=this.template.cloneNode(!0);u.style.display="block",u.innerHTML=p,t.safeClickTouch(u,c(h)),l.append(u)}var g=a.find(".currentUserTimeZone");if(r.displayZone){var f=r.displayZone;for(var w in t.timeZoneMap)t.timeZoneMap[w]===r.displayZone&&(f=w);g.text(r.translateIf("Current Timezone is")+" "+r.translateIf(f)),s.show()}else g.text(r.translateIf("Your timezone is your current location")),s.hide()}removeTimezone(){t.ChartEngine.defaultDisplayTimeZone=null;var e=this.context.stx;e.displayZone=null,e.setTimeZone(),e.displayInitialized&&e.draw(),this.close()}}i.markup=`
		<h4 class="title">Choose Timezone</h4>
		<cq-close></cq-close>

		<p>To set your timezone use the location button below, or scroll through the following list...</p>
		<p class="currentUserTimeZone"></p>
		<div class="detect">
			<div class="ciq-btn" stxtap="removeTimezone()">Use My Current Location</div>
		</div>
		<div class="timezoneDialogWrapper" style="max-height:360px; overflow: hidden;">
			<cq-scroll cq-no-maximize class="ciq-ul" style="height:360px;">
				<li class="timezoneTemplate" style="display:none;cursor:pointer;"></li>
			</cq-scroll>
		</div>
		<div class="instruct">(Scroll for more options)</div>
	`,t.UI.addComponentDefinition("cq-timezone-dialog",i)}},Tg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super(),this.params={member:null,obj:null,action:"class",value:"active",toggles:[],classes:{},callbacks:[]}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}disconnectedCallback(){this.disconnectObservable(),super.disconnectedCallback()}disconnectObservable(){const{params:{member:e,obj:a},listener:o}=this;e&&a&&o&&t.UI.unobserveProperty(e,a,o)}begin(){const e=this;this.params.member&&(this.listener=function(a){e.updateFromBinding(e.params)},t.UI.observeProperty(e.params.member,e.params.obj,this.listener)),!this.tapInitialized&&(t.UI.stxtap(this,function(){var a=e.params.toggles,o=e.params.obj;if(a.length>1){for(var r=0;r<a.length;r++){var c=a[r];if(e.currentValue==c){r<a.length-1?e.set(a[r+1]):e.set(a[0]);break}}r==a.length&&e.set(a[0])}else e.currentValue?e.set(!1):e.set(!0);const{stx:l}=this.context;l.draw(),o===l.layout&&l.changeOccurred("layout"),o===l.preferences&&l.changeOccurred("preferences")}),this.tapInitialized=!0)}registerCallback(e,a){a!==!1&&(a=!0),this.params.callbacks.push(e),a&&e.call(this,this.currentValue)}set(e){if(this.isInfoToggle)return this.parentElement.set(e);if(this.params.member)this.params.obj[this.params.member]=e;else{this.currentValue=e;for(var a=0;a<this.params.callbacks.length;a++)this.params.callbacks[a].call(this,this.currentValue)}this.updateClass()}setContext({config:e}){this.currentValue|=!1,this.params.obj=this.context.stx.layout;var a=this.node.attr("cq-member");if(a=="headsUp"&&this.wrapInInfoToggle(),e&&e.channels&&e.channels[a]&&(a=e.channels[a]),a&&a.indexOf(".")!==-1){var o=a.split(".");this.params.obj=this.context.stx[o[0]],typeof this.params.obj=="undefined"&&(this.context.stx[o[0]]=this.params.obj={}),a=o[1]}a&&(this.params.member=a);var r=this.node.attr("cq-action");r&&(this.params.action=r);var c=this.node.attr("cq-value");c&&(this.params.value=c);var l=this.node.attr("cq-toggles");l&&(this.params.toggles=l.split(","));for(var s=0;s<this.params.toggles.length;s++){l=this.params.toggles;var d=l[s];d==="null"?l[s]=null:d==="true"||d==="false"?l[s]=d==="true":isNaN(Number(d))||(l[s]=Number(d))}var h=this.node.attr("cq-toggle-classes");if(h){var p=h.split(/, |,/);this.params.removeClasses=h.split(/, | |,/).filter(u=>u),this.params.classes=this.params.toggles.reduce(function(u,g,f){return u[g]=p[f].split(/ /),u},{})}if(a&&this.params.obj[a]===void 0){const u=l&&l.length?l[l.length-1]:!1;this.params.obj[a]=u}this.begin()}changeContext(e){this.disconnectObservable(),this.context=e,this.setContext(e)}updateFromBinding(e){if(this.currentValue=this.isInfoToggle?this.parentElement.getCurrentValue(e):e.obj[e.member],!this.params.callbacks.length)this.params.action=="class"&&(this.currentValue?this.node.addClass(this.params.value):this.node.removeClass(this.params.value));else for(var a=0;a<this.params.callbacks.length;a++)this.params.callbacks[a].call(this,this.currentValue);this.updateClass(),e.member=="crosshair"&&this.currentValue===!1&&this.context.stx.doDisplayCrosshairs()}updateClass(){const{removeClasses:e,classes:a}=this.params;if(!(!e||this.currentValue===void 0)&&(this.classList.remove(...e),a[this.currentValue][0])){let o=a[this.currentValue];this.classList.add(...o)}}wrapInInfoToggle(){if(!this.closest("cq-info-toggle, cq-info-toggle-dropdown")){var e=document.createElement("cq-info-toggle");this.parentNode.replaceChild(e,this),e.appendChild(this)}}}t.UI.addComponentDefinition("cq-toggle",i)},_g=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;if(!t.Drawing)console.error("toolbar component requires first activating drawing feature.");else{class i extends t.UI.ContextTag{connectedCallback(){this.attached||(super.connectedCallback(),this.params={toolSelection:this.node.find("*[cq-current-tool]"),lineSelection:this.node.find("*[cq-line-style]"),fontSizeSelection:this.node.find("*[cq-font-size]"),fontFamilySelection:this.node.find("*[cq-font-family]"),fontStyleToggle:this.node.find("cq-annotation-italic"),fontWeightToggle:this.node.find("cq-annotation-bold"),axisLabelToggle:this.node.find("cq-axis-label .ciq-checkbox"),fillColor:this.node.find("cq-fill-color").not("cq-cvp-controller"),lineColor:this.node.find("cq-line-color").not("cq-cvp-controller"),cvpControllers:this.node.find("cq-cvp-controller")},this.params.cvpControllers.prop("toolbar",this),this.noToolSelectedText="")}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}clearDrawings(){this.context.stx.clearDrawings(null,!1)}crosshairs(e){var a=t.UI.$(e.node),o=this.context.stx;this.params.toolSelection.html(a.html()),o.changeVectorType(null),o.layout.crosshair=!0,o.doDisplayCrosshairs(),o.findHighlights(!1,!0),o.changeOccurred("layout"),o.draw(),o.updateChartAccessories(),this.node.find("*[cq-section]").removeClass("ciq-active"),this.emit()}defaultElements(e){var a=[];for(var o in e)o=="color"?a.push("cq-line-color"):o=="fillColor"?a.push("cq-fill-color"):o=="pattern"||o=="lineWidth"?a.push("cq-line-style"):o=="axisLabel"?a.push("cq-axis-label"):o=="font"?a.push("cq-annotation"):o=="parameters"&&a.push("cq-clickable");return a}dirty(e){this.node.find("*[cq-toolbar-dirty]")[e===!1?"removeClass":"addClass"]("ciq-active")}emit(){var e=new Event("change",{bubbles:!0,cancelable:!0});this.dirty(),this.dispatchEvent(e)}getFillColor(e){var a=t.UI.$(e.node),o=this.context.stx.currentVectorParameters.fillColor;(o=="transparent"||o=="auto")&&(o=""),a.css({background:o});var r=t.getBackgroundColor(this.parentNode);if(o&&Math.abs(t.hsl(r)[2]-t.hsl(o)[2])<.2){var c=t.chooseForegroundColor(r);a.css({border:"solid "+c+" 1px"})}else a.css({border:""})}getLineColor(e){var a=t.UI.$(e.node),o=this.context.stx.currentVectorParameters.currentColor;(o=="transparent"||o=="auto")&&(o=""),a.css({background:o});var r=t.getBackgroundColor(this.parentNode);if(!o||Math.abs(t.hsl(r)[2]-t.hsl(o)[2])<.2){var c=t.chooseForegroundColor(r);a.css({border:"solid "+c+" 1px"}),o||a.css({background:"linear-gradient(to bottom right, "+c+", "+c+" 49%, "+r+" 50%, "+r+")"})}else a.css({border:""})}noTool(){var e=this.context.stx;e.changeVectorType(""),e.layout.crosshair&&(e.layout.crosshair=!1,e.changeOccurred("layout"),e.doDisplayCrosshairs()),e.preferences.magnet&&this.toggleMagnet(this),this.params.toolSelection.text(this.noToolSelectedText),this.params.toolSelection.attr("cq-current-tool",""),this.node.find("*[cq-section]").removeClass("ciq-active"),this.emit()}pickFillColor(e){var a=t.UI.$(e.node),o=this.ownerDocument.querySelector("cq-color-picker");if(!o){console.log("DrawingToolbar.prototype.pickFillColor: no ColorPicker available");return}var r=this;o.callback=function(c){r.context.stx.currentVectorParameters.fillColor=c,r.getFillColor({node:a}),r.emit()},o.display({node:a,context:this.context})}pickLineColor(e){var a=t.UI.$(e.node),o=this.ownerDocument.querySelector("cq-color-picker");if(!o){console.log("DrawingToolbar.prototype.pickLineColor: no ColorPicker available");return}var r=this;o.callback=function(l){r.context.stx.currentVectorParameters.currentColor=l,r.getLineColor({node:a}),r.emit()};var c=a.attr("cq-overrides");c&&(c=c.split(",")),o.display({node:a,context:this.context,overrides:c})}restoreDefaultConfig(e,a){var o=this.context.stx;t.Drawing.restoreDefaultConfig(o,o.currentVectorParameters.vectorType,a),this.node.find("*[cq-toolbar-action='restore']").removeClass("ciq-active"),this.sync(),this.dirty(!1)}saveConfig(){var e=this.context.stx;t.Drawing.saveConfig(e,e.currentVectorParameters.vectorType),this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"),this.sync(),this.dirty(!1)}setFibs(e,a){var o=this.context.stx.currentVectorParameters.fibonacci;if(o){for(var r=0;r<o.fibs.length;r++)o.fibs[r].parameters.lineWidth=e,o.fibs[r].parameters.pattern=a;o.timezone.parameters.lineWidth=e,o.timezone.parameters.pattern=a}}setFontFamily(e,a){var o=this.context.stx;o.currentVectorParameters.annotation&&(a=="Default"?o.currentVectorParameters.annotation.font.family=null:o.currentVectorParameters.annotation.font.family=a),this.params.fontFamilySelection.text(a),this.emit()}setFontSize(e,a){var o=this.context.stx;o.currentVectorParameters.annotation&&(o.currentVectorParameters.annotation.font.size=a),this.params.fontSizeSelection.text(a),this.emit()}setContext(e){this.noToolSelectedText=this.params.toolSelection.text(),this.sync(),this.dirty(!1);var a=this;this.eventListeners.push(e.stx.addEventListener("theme",function(o){var r=a.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active");a.sync(),r||a.dirty(!1)}))}setLine(e,a,o){var r=this.context.stx;r.currentVectorParameters.lineWidth=a,r.currentVectorParameters.pattern=o,this.setFibs(a,o),this.currentLineSelectedClass&&this.params.lineSelection.removeClass(this.currentLineSelectedClass),this.currentLineSelectedClass="ciq-"+o+"-"+parseInt(a,10),o=="none"?this.currentLineSelectedClass=null:this.params.lineSelection.addClass(this.currentLineSelectedClass),this.emit()}sync(e){var a=this.context.stx;e?a.currentVectorParameters=t.extend(a.currentVectorParameters||{},e):e=a.currentVectorParameters;var o=this.params;this.setLine(null,e.lineWidth,e.pattern);var r=a.canvasStyle("stx_annotation"),c=e.annotation&&e.annotation.font,l=c&&c.size||r.fontSize;this.setFontSize(null,l);var s=c&&c.family||r.fontFamily;this.setFontFamily(null,s);var d=c&&c.style||r.fontStyle;o.fontStyleToggle[d==="italic"?"addClass":"removeClass"]("ciq-active");var h=c&&c.weight||r.fontWeight;o.fontWeightToggle[h==="bold"||h>=700?"addClass":"removeClass"]("ciq-active"),o.axisLabelToggle[e.axisLabel?"addClass":"removeClass"]("ciq-active"),this.getFillColor({node:o.fillColor}),this.getLineColor({node:o.lineColor}),o.cvpControllers.each(function(){this.sync(e)})}toggleAxisLabel(e){var a=this.context.stx,o=t.UI.$(e.node);a.currentVectorParameters.axisLabel===!0?(a.currentVectorParameters.axisLabel=!1,o.removeClass("ciq-active")):(a.currentVectorParameters.axisLabel=!0,o.addClass("ciq-active")),this.emit()}toggleFontStyle(e,a){var o=this.context.stx,r=t.UI.$(e.node);a=="italic"?o.currentVectorParameters.annotation.font.style=="italic"?(o.currentVectorParameters.annotation.font.style=null,r.removeClass("ciq-active")):(o.currentVectorParameters.annotation.font.style="italic",r.addClass("ciq-active")):a=="bold"&&(o.currentVectorParameters.annotation.font.weight=="bold"?(o.currentVectorParameters.annotation.font.weight=null,r.removeClass("ciq-active")):(o.currentVectorParameters.annotation.font.weight="bold",r.addClass("ciq-active"))),this.emit()}toggleMagnet(e){var a=t.UI.$(e.node),o=this.context.stx;o.preferences.magnet?(a.removeClass("active"),o.preferences.magnet=!1):(a.addClass("active"),o.preferences.magnet=!0),t.clearCanvas(o.chart.tempCanvas,o)}tool(e,a){var o=t.UI.$(e.node);if(a||(a=o.getAttribute("cq-tool")),!!a){var r=this.context.stx;r.clearMeasure(),r.changeVectorType(a),this.params.toolSelection.html(o.html()),this.params.toolSelection.attr("cq-current-tool",a),this.node.find("*[cq-section]").removeClass("ciq-active");var c=!this.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active"),l=t.Drawing.getDrawingParameters(r,a);if(l){this.node.find("*[cq-toolbar-action='save']").addClass("ciq-active");var s=r.preferences.drawings;s&&s[a]&&(this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"),c=!0),a==="fibtimezone"&&delete l.parameters;var d=this.params.lineSelection.parent().find(".ciq-none");d.hide();for(var h=this.defaultElements(l),p=0;p<h.length;p++)this.node.find(h[p]).addClass("ciq-active"),h[p]=="cq-fill-color"&&d.show();for(h=t.Drawing[a].prototype.$controls,p=0;h&&p<h.length;p++)this.node.find(h[p]).addClass("ciq-active")}this.sync(),c&&this.dirty(!1)}}}t.UI.addComponentDefinition("cq-toolbar",i)}},Fg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{constructor(){super(),this.redoButton=null,this.undostack=[],this.redostack=[],this.contexts=[]}connectedCallback(){if(!this.attached){super.connectedCallback();var e=this;t.UI.stxtap(this,function(){e.undo()})}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}clear(e){this.setButtonStyle()}handleEvent(e,a,o){this.undostack.push({context:e,drawings:o.before}),this.redostack=[],this.setButtonStyle()}keyStroke(e,a,o,r){if(a=="z"&&(r.ctrl||r.cmd))return r.shift?this.redo():this.undo(),!0;if(a=="y"&&(r.ctrl||r.cmd))return this.redo(),!0}manageContext(e){this.addClaim(this);var a=this;this.eventListeners.push(e.stx.addEventListener("undoStamp",function(o){a.handleEvent(e,"undoStamp",o)})),this.contexts.push(e)}redo(){var e=this.redostack.pop();if(e){var a=e.context;this.undostack.push({context:a,drawings:a.stx.exportDrawings()});var o=e.drawings;a.stx.abortDrawings(!0),a.stx.importDrawings(o),a.stx.changeOccurred("vector"),a.stx.draw()}this.setButtonStyle()}setButtonStyle(){this.undostack.length?this.node.attr("cq-active","true"):this.node.removeAttr("cq-active"),this.redoButton&&(this.redostack.length?this.redoButton.setAttribute("cq-active","true"):this.redoButton.removeAttribute("cq-active"))}setContext(e){this.manageContext(this.context);var a=this;this.addInjection("append","initializeChart",function(){a.undostack=[],a.redostack=[],a.clear()})}undo(){for(var e=!1,a=0;a<this.contexts.length;a++)this.contexts[a].stx.activeDrawing&&(this.contexts[a].stx.undo(),e=!0);if(!e){var o=this.undostack.pop();if(o){var r=o.context;this.redostack.push({context:r,drawings:r.stx.exportDrawings()});var c=o.drawings;r.stx.abortDrawings(!0),r.stx.importDrawings(c),r.stx.changeOccurred("vector"),r.stx.draw()}this.setButtonStyle()}}}t.UI.addComponentDefinition("cq-undo",i)},Mg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),this.querySelector("input").value="",super.open(e)}save(){const e=this.node.find("input").val();if(!e)return;let a=!1;this.updateContext();const o=this.context.stx.exportLayout();this.ownerDocument.querySelectorAll("cq-views").forEach(function(r){const c=r.params.viewObj;let l;for(var s=0;s<c.views.length&&(l=c.views[s],e!=t.first(l));s++);s==c.views.length&&(l={},l[e]={},c.views.push(l)),l[e]=o,delete l[e].candleWidth,r.renderMenu(),a||(a=!0,r.params.nameValueStore&&r.params.nameValueStore.set("stx-views",c.views))}),this.close()}updateContext(){const{topNode:e}=this.context;let a=e.querySelector("cq-context-wrapper.active cq-context");a||e.multiChartContainer&&(a=e.multiChartContainer.querySelector("cq-context-wrapper.active cq-context")),a&&(this.context=a.CIQ.UI.context)}}i.markup=`
		<h4>Save View</h4>
		<div stxtap="close()" class="ciq-icon ciq-close"></div>
		<div style="text-align:center;margin-top:10px;">
		<i>Enter name of view:</i>
		<p>
			<input spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="none" maxlength="40" placeholder="Name"><br>
		</p>
		<span class="ciq-btn" stxtap="save()">Save</span>
		</div>
	`,t.UI.addComponentDefinition("cq-view-dialog",i)},Pg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{initialize(e){this.params=Object.assign({},e);const{config:a}=this.context;let{nameValueStore:o}=a;t.ensureDefaults(this.params,{viewObj:{views:[]},nameValueStore:o&&new o||t.NameValueStore&&new t.NameValueStore,template:"template[cq-view]"}),this.params.template=this.querySelector(this.params.template);var r=this;this.params.nameValueStore&&this.params.nameValueStore.get("stx-views",function(c,l){!c&&l&&(r.params.viewObj.views=l),r.params.cb&&r.params.cb.call(r),r.renderMenu()})}connectedCallback(){super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}setContext({config:e}){this.addDefaultMarkup(),e&&e.menuViewConfig&&this.initialize(e.menuViewConfig)}renderMenu(){var e=this.node,a=this;function o(u){return function(g){g.stopPropagation();var f=!1;a.ownerDocument.querySelectorAll("cq-views").forEach(function(w){w.params.viewObj.views.splice(u,1),f||(w.params.nameValueStore&&w.params.nameValueStore.set("stx-views",a.params.viewObj.views),f=!0),w.renderMenu()})}}function r(u){return function(g){g.stopPropagation(),a.uiManager.closeMenu(),a.context.loader&&a.context.loader.show();var f=t.first(a.params.viewObj.views[u]);function w(){var v=a.context.stx,m=function(){v.changeOccurred("layout"),a.context.loader&&a.context.loader.hide()};v.importLayout(a.params.viewObj.views[u][f],{managePeriodicity:!0,preserveTicksAndCandleWidth:!0,cb:m})}setTimeout(w,10)}}e.find("cq-views-content cq-item").remove();for(var c=0;c<this.params.viewObj.views.length;c++){var l=t.first(a.params.viewObj.views[c]);if(l!="recent"){var s=t.UI.makeFromTemplate(this.params.template),d=s.find("cq-label"),h=s.find("div");d.length&&(d.addClass("view-name-"+l),d.text(l)),h.length&&t.UI.stxtap(h[0],o(c)),this.makeTap(s[0],r(c)),e.find("cq-views-content").append(s)}}var p=e.find("cq-view-save");if(p){const{context:u}=this,g=this;this.makeTap(p.find("cq-item")[0],function(f){u.config?g.channelWrite(u.config.channels.dialog,{type:"view",params:{context:u}}):g.ownerDocument.querySelector("cq-view-dialog").open({context:u});const w=t.UI.getUIManager(this),v=u.topNode.querySelector(".ciq-views");w&&v&&w.closeMenu(v)})}this.params.renderCB&&this.params.renderCB(e)}}i.markup=`
		<cq-heading>Saved Views</cq-heading>
		<cq-views-content>
			<template cq-view>
				<cq-item>
					<cq-label></cq-label>
					<div class="ciq-icon ciq-close" keyboard-selectable-child="true"></div>
				</cq-item>
			</template>
		</cq-views-content>
		<cq-separator cq-partial></cq-separator>
		<cq-view-save>
			<cq-item><cq-plus></cq-plus>Save View</cq-item>
		</cq-view-save>
	`,t.UI.addComponentDefinition("cq-views",i)},Ig=b=>{const t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.DialogContentTag{adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i),this.constructor=i}open(e){this.addDefaultMarkup(),super.open(e),e&&(this.opener=e.caller);const{currentVectorParameters:a}=this.context.stx;a.volumeprofile||(a.volumeprofile={});const o=a.volumeProfile,r=this.querySelector('div[fieldname="Price Buckets"] input');r.value=o.priceBuckets,r.changeHandler&&r.removeEventListener("change",r.changeHandler),r.changeHandler=({target:c})=>{const l=parseInt(c.value);if(isNaN(l))return;o.priceBuckets=l;const s=new Event("change",{bubbles:!0,cancelable:!0});this.opener.dispatchEvent(s)},r.addEventListener("change",r.changeHandler)}}i.markup=`
	<h4 class="title">Volume Profile Settings</h4>
	<cq-scroll cq-no-maximize>
		<div class="ciq-drawing-dialog-setting" fieldname="Price Buckets">
			<div class="ciq-heading">Price Buckets</div>
			<div class="stx-data">
				<input type="number" min="1" step="1">
			</div>
		</div
	</cq-scroll>
	<div class="ciq-dialog-cntrls">
		<div class="ciq-btn" stxtap="close()">Done</div>
	</div>
`,t.UI.addComponentDefinition("cq-volumeprofile-settings-dialog",i)},Eg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;class i extends t.UI.ContextTag{static get observedAttributes(){return["corrective","decoration","impulse","show-lines"]}get corrective(){return this.getAttribute("corrective")}set corrective(e){e?this.setAttribute("corrective",e.join(" ")):this.removeAttribute("corrective")}get decoration(){return this.getAttribute("decoration")}set decoration(e){e?this.setAttribute("decoration",e):this.removeAttribute("decoration")}get impulse(){return this.getAttribute("impulse")}set impulse(e){e?this.setAttribute("impulse",e.join(" ")):this.removeAttribute("impulse")}get showLines(){return this.hasAttribute("show-lines")}set showLines(e){e?(this.setAttribute("show-lines",""),this.lineToggleCheckbox.classList.add("ciq-active")):this.removeAttribute("show-lines")}get template(){return this.getAttribute("template")}set template(e){return this.setAttribute("template",e)}static templates(){return{"Grand Supercycle":{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:"enclosed"},Supercycle:{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:"parentheses"},Cycle:{impulse:["I","II","III","IV","V"],corrective:["a","b","c"],decoration:null},Primary:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:"enclosed"},Intermediate:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:"parentheses"},Minor:{impulse:["1","2","3","4","5"],corrective:["A","B","C"],decoration:null},Minute:{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:"enclosed"},Minuette:{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:"parentheses"},"Sub-Minuette":{impulse:["i","ii","iii","iv","v"],corrective:["a","b","c"],decoration:null}}}attributeChangedCallback(e,a,o){if(!this.stx)return;let r=this.stx.currentVectorParameters,c=r.waveParameters||{},l;switch(e){case"template":let s=this.templates[o];s&&(l={decoration:s.decoration});break;case"impulse":l={impulse:o&&o.split(" ")};break;case"corrective":l={corrective:o&&o.split(" ")};break;case"decoration":l={decoration:o};break;case"show-lines":l={showLines:this.showLines};break}r.waveParameters=Object.assign(c,l)}constructor(){super(),this.templates=i.templates()}connectedCallback(){if(!this.attached){this.template="Grand Supercycle";var e=this.ownerDocument.querySelector('template[cq-wave-parameters], template[cq-wave-parameters="true"]');t.UI.makeFromTemplate(e,this),this.templateHeader=this.querySelector(".ciq-active-template"),this.impulseHeader=this.querySelector(".ciq-active-impulse"),this.correctiveHeader=this.querySelector(".ciq-active-corrective"),this.decorators={blank:this.querySelector(".ciq-btn:nth-of-type(1n)"),parentheses:this.querySelector(".ciq-btn:nth-of-type(2n)"),enclosed:this.querySelector(".ciq-btn:nth-of-type(3n)")},this.lineToggleCheckbox=this.querySelector("span.ciq-checkbox"),super.connectedCallback()}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,i)}activate(){!this.stx||(this.cvp=this.stx.currentVectorParameters,this.update(null,"template",this.template),this.showLines=!0)}setContext(){this.stx=this.context.stx}toggleLines(){let e=this.lineToggleCheckbox,a=e.classList.contains("ciq-active");this.showLines=!a,a?e.classList.remove("ciq-active"):e.classList.add("ciq-active")}update(e,a,o){if(a==="template"){this.template=o,this.templateHeader.innerHTML=o;let c=this.templates[this.template];if(c){this.impulse=c.impulse,this.impulseHeader.innerHTML=c.impulse.join(" "),this.corrective=c.corrective,this.correctiveHeader.innerHTML=c.corrective.join(" ");for(let s in this.decorators)this.decorators[s].classList.remove("ciq-active");let l=c.decoration||"blank";this.decorators[l].classList.add("ciq-active"),this.decoration=l}else this.cvp.waveParameters={corrective:this.corrective.split(" "),impulse:this.impulse.split(" "),decoration:this.decoration}}else{if(a==="decoration"){for(let c in this.decorators)this.decorators[c].classList.remove("ciq-active");e.node.classList.add("ciq-active"),this.decoration=e.node.getAttribute("decoration")}else if(a!=="showLines"){let c=o&&o.split(",");this[a]=c,this[a+"Header"].innerHTML=c?c.join(" "):"- - -"}this.templateHeader.innerHTML=this.template="Custom"}}}t.UI.addComponentDefinition("cq-wave-parameters",i)},Lg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;const i=t.UI._webcomponents.list["cq-dialog"];if(!i)console.error("colorPicker component requires first activating dialog component.");else{class n extends i.classDefinition{constructor(){super(),this.params={colorMap:[["#ffffff","#e1e1e1","#cccccc","#b7b7b7","#a0a0a5","#898989","#707070","#626262","#555555","#464646","#363636","#262626","#1d1d1d","#000000"],["#f4977c","#f7ac84","#fbc58d","#fff69e","#c4de9e","#85c99e","#7fcdc7","#75d0f4","#81a8d7","#8594c8","#8983bc","#a187bd","#bb8dbe","#f29bc1"],["#ef6c53","#f38d5b","#f8ae63","#fff371","#acd277","#43b77a","#2ebbb3","#00bff0","#4a8dc8","#5875b7","#625da6","#8561a7","#a665a7","#ee6fa9"],["#ea1d2c","#ee652e","#f4932f","#fff126","#8ec648","#00a553","#00a99c","#00afed","#0073ba","#0056a4","#323390","#66308f","#912a8e","#e9088c"],["#9b0b16","#9e4117","#a16118","#c6b920","#5a852d","#007238","#00746a","#0077a1","#004c7f","#003570","#1d1762","#441261","#62095f","#9c005d"],["#770001","#792e03","#7b4906","#817a0b","#41661e","#005827","#005951","#003b5c","#001d40","#000e35","#04002c","#19002b","#2c002a","#580028"]]}}connectedCallback(){this.attached||(super.connectedCallback(),this.build())}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,n),this.constructor=n}build(){this.addDefaultMarkup();var a=this.node,o=a.attr("cq-colors");if(o){o=o.split(",");var r=Math.ceil(Math.sqrt(o.length));this.params.colorMap=[];for(var c=0,l=[],s=0;s<o.length;s++)c>=r&&(c=0,this.params.colorMap.push(l),l=[]),l.push(o[s]),c++;this.params.colorMap.push(l)}this.cqOverrides=a.find("cq-overrides"),this.template=this.cqOverrides.find("template"),this.initialize()}display(a){var o=t.UI.$(a.node)[0],r=o.getBoundingClientRect();this.node.css({top:"0px",left:"0px"});var c=this.parentNode.getBoundingClientRect(),l=t.elementDimensions(o,{border:!0}),s=r.left-c.left+l.width+10,d=r.top-c.top+15;this.cqOverrides.children(":not(template)").remove();var h=a.context||this.context||t.UI.getMyContext(this);this.uiManager=h.uiManager;var p=function(S,A){return function(){S.pickColor(A)}},u=0;if(a.overrides&&this.template.length){for(var g,f=0;f<a.overrides.length;f++){var w=a.overrides[f];g=t.UI.makeFromTemplate(this.template,!0),h.stx&&(w=h.stx.translateIf(w)),g.text(w),t.UI.stxtap(g[0],p(this,w))}u=t.elementDimensions(g[0]).height}var v=t.elementDimensions(this,{border:!0}),m=this.ownerDocument||document,q=t.guaranteedSize(m).width,x=v.width||l.width*this.colors.children()[0].children.length;s+x>q&&(s=q-x-20);var y=t.guaranteedSize(m).height,k=v.height||l.height*this.colors.children().length+u;d+k>y&&(d=y-k-30),this.node.css({left:s+"px",top:d+"px"}),this.classList.contains("stxMenuActive")?h.e&&h.e.stopPropagation():this.open({context:h}),this.keyboardNavigation&&this.keyboardNavigation.highlightAlign()}initialize(){var a=this;this.colors=this.node.find("cq-colors"),this.colors.length||(this.colors=this.node),this.colors.empty();function o(p,u){return function(){p.pickColor(u)}}for(var r=0;r<this.params.colorMap.length;r++){var c=this.params.colorMap[r],l=document.createElement("ul");this.colors[0].appendChild(l);for(var s=0;s<c.length;s++){var d=document.createElement("li");l.appendChild(d);var h=document.createElement("span");d.appendChild(h),h.style.backgroundColor=c[s],t.UI.stxtap(h,o(a,c[s]))}}this.rowLength=this.params.colorMap[0].length||0}keyStroke(a,o,r){if(a&&a.tabActiveModals[0]!==this)return;const c=this.querySelectorAll("cq-colors span, .ciq-btn");if(!(o==="Escape"||o==="Esc")){if(o==="ArrowRight")this.focusNextItem(c);else if(o==="ArrowLeft")this.focusNextItem(c,!0);else if(o==="ArrowDown")this.focusNextRow(c);else if(o==="ArrowUp")this.focusNextRow(c,{reverse:!0});else if(o=="Enter"){const l=this.findFocused(c);this.clickItem(l[0],r)}}}focusNextRow(a,o){const{reverse:r}=o||{},c=this.findFocused(a);let l=-1;if(c.length)for(l=0;l<a.length&&a[l]!==c[0];l++);if(r)do if(l-=this.rowLength,l<0)break;while(!t.trulyVisible(a[l]));else do if(l+=this.rowLength,l>=a.length){l=a.length-1;break}while(!t.trulyVisible(a[l]));return l>-1&&l<a.length&&a[l]!==c[0]?(this.removeFocused(a),this.focusItem(a[l]),!0):!1}pickColor(a){this.callback&&this.callback(a),this.close()}resize(){}setColors(a){this.params.colorMap=a,this.initialize()}}n.markup=`
		<cq-colors></cq-colors>
		<cq-overrides>
			<template>
				<div class="ciq-btn"></div>
			</template>
		</cq-overrides>
	`,t.UI.addComponentDefinition("cq-color-picker",n)}},Ug=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;const i=t.UI._webcomponents.list["cq-palette"];if(!i)console.error("drawingPalette component requires first activating palette component.");else if(!t.Drawing)console.error("drawingPalette component requires first activating drawing feature.");else{class n extends i.classDefinition{constructor(){super(),this.mode="",this.callbacks=[],this.toolSettings={favList:[],toolGroup:""},this.toolShortcuts={}}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,n),this.constructor=n}setupKeyboardActivation(a){if(typeof this.getAttribute("cq-keystroke-claim")!="undefined"){let o=this.context.topNode.querySelectorAll("*[cq-tool][cq-tool-shortcut]");for(let r=0;r<o.length;r++){let c=o[r].getAttribute("cq-tool-shortcut");if(/^[A-Za-z]{1}$/g.test(c)){this.toolShortcuts[c.toUpperCase()]={toolName:o[r].getAttribute("cq-tool"),node:o[r]};let l=o[r].querySelector("label"),s=document.createElement("span");s.classList.add("shortcut"),s.innerHTML=" (Alt+"+c.toUpperCase()+")",l.appendChild(s)}else console.warn("cq-tool-shortcut attribute must be a single letter: "+c+" ignored.")}this.addClaim(this)}}keyStroke(a,o,r,c){if(r.altKey&&!r.ctrlKey&&!r.shiftKey){let l=String.fromCharCode(r.which).toUpperCase(),s=this.toolShortcuts[l];if(s){const d=this.channels?this.channels.drawing:"channel.drawing";this.channelWrite(d,!0),this.tool({node:s.node},s.toolName)}}else if(r.key==="Escape"){let l=this.context.topNode.querySelector('*[cq-tool="notool"]');l&&this.noTool({node:l})}}handleMessage(a,o){switch(a){case"changeToolSettings":this.activateTool(o.activator,o.toolName);break;case"toggleDrawingPalette":this.togglePalette();break;case"hideDrawingPalette":this.hidePalette();break;case"dockWillResize":this.hidePalette();break;case"dockDidResize":this.resetScroller();break;case"context":o==="stop"&&(this.toolContextMenu.style.display="none")}}loadToolSettings(){if(this.store){let a=this;this.store.get("CIQ.DrawingToolSettings",function(o,r){!o&&r&&r.favList&&(a.toolSettings=Object.assign(a.toolSettings,r))})}}storeToolSettings(){this.store&&this.store.set("CIQ.DrawingToolSettings",JSON.stringify(this.toolSettings))}setContext(a){const{config:o,stx:r}=a;if(o){const{channels:c={},nameValueStore:l}=o;this.store=l&&new l||t.NameValueStore&&new t.NameValueStore,this.addDefaultMarkup(this,this.getMarkup(o)),this.channels={drawing:c.drawing||"channel.drawing"}}this.init(),this.loadToolSettings(),this.params={toolGroupSelection:this.node.find("*[cq-tool-group-selection]")},this.setFavorites(),this.setMode("grid"),this.setEvenOdd(),this.toolContextMenu=this.createContextMenu(),this.addEventListener("contextmenu",function(c){const l=c.target.hasAttribute("cq-tool-group")?c.target:c.target.parentElement;if(c.preventDefault(),l!==null&&l.getAttribute("cq-tool-group")!==null){let s=l.getBoundingClientRect(),d=this.getBoundingClientRect();this.showToolContextMenu(l.getAttribute("cq-tool"),c.clientY+s.height-d.top,c.clientX-d.left)}}.bind(this)),this.setupKeyboardActivation(),this.pairUndoRedo(),this.toolSettings.toolGroup&&this.setToolGroup({node:this.querySelector('cq-item[cq-tool-group="'+this.toolSettings.toolGroup+'"]')},this.toolSettings.toolGroup),this.channels&&this.channelSubscribe(this.channels.drawing||"channel.drawing",c=>{const l=r.currentVectorParameters.vectorType;if(c)this.resetScroller(),l||r.changeVectorType(this.priorVectorType||""),this.setActiveTool(l||"notool");else{const{multiChartContainer:s}=this.container.topNode;s&&t.getFromNS(this,"context.config.soloActive.onDraw")?Array.from(s.querySelectorAll("cq-drawing-palette")).forEach(d=>{d.priorVectorType=l}):this.priorVectorType=l,r.changeVectorType(null)}})}pairUndoRedo(){const a=this.qs("cq-redo",this),o=this.qs("cq-undo",this);a.pairUp(o)}changeView(a,o){this.setMode(o);for(var r=0;r<this.callbacks.length;r++)this.callbacks[r].call(this,this.mode)}createContextMenu(){let a=document.createElement("div");a.className="menu-item",a.innerHTML="Add/Remove Favorite",a.addEventListener("mousedown",function(r){r.stopPropagation(),r.which===1&&(this.toggleFavorite(r.currentTarget.parentElement.getAttribute("context-tool")),this.paletteDock.stopContext(this))}.bind(this)),a.addEventListener("pointerdown",r=>r.stopPropagation());let o=document.createElement("div");return o.appendChild(a),o.className="tool-context-menu",this.node.append(o),o}registerCallback(a){this.callbacks.push(a)}resetScroller(){const a=this.querySelector(".tool-group cq-scroll");if(!a)return!1;this.setEvenOdd(),a.refresh()}setActiveTool(a){const o=this.querySelector(`cq-item[cq-tool=${a}]`);o&&this.tool({node:o})}setActiveButton(a){if(this.node.find(".ciq-tool.active").removeClass("active"),a.getAttribute("stxtap")!=="noTool()"){var o=a.querySelector("label");o&&o.innerHTML+""}a.classList.add("active"),t.trulyVisible(this.ownerDocument.querySelector(".ciq-mobile-palette-toggle"))||this.togglePalette()}setMode(a){a=a==="list"?a:"grid",this.mode=a,this.classList.remove("list"),this.classList.remove("grid"),this.classList.add(this.mode),this.resetScroller(),this.paletteDock.handleResize({resizeChart:!0})}setEvenOdd(){for(var a=this.querySelectorAll(".tool-group cq-scroll cq-item"),o=!1,r=0;r<a.length;r++)!t.trulyVisible(a[r])||(a[r].classList[o?"add":"remove"]("odd"),o=!o)}setFavorites(a=!0){for(var o=this.querySelectorAll(".tool-group [cq-tool]"),r=0;r<o.length;r++){var c=o[r];if(c.querySelector(".fav-marker")===null){let s=document.createElement("div");s.className="fav-marker",s.addEventListener("click",this.handleFavoriteClick.bind(this)),s.addEventListener("touchstart",this.handleFavoriteClick.bind(this),{capture:!0,passive:!1}),s.addEventListener("pointerdown",d=>d.stopPropagation()),c.appendChild(s)}c.getAttribute("cq-tool-group").indexOf("favorite")>=0&&c.setAttribute("cq-tool-group",c.getAttribute("cq-tool-group").replace("favorite","")),this.toolSettings.favList.indexOf(c.getAttribute("cq-tool"))>=0&&c.setAttribute("cq-tool-group",c.getAttribute("cq-tool-group")+" favorite")}this.sortToolButtons();const{multiChartContainer:l}=this.context.topNode;a&&l&&l.getCharts().forEach(s=>{const d=s.uiContext.topNode;if(!d.closest("cq-context-wrapper")||d===this.context.topNode)return;const p=d.querySelector("cq-drawing-palette");setTimeout(()=>{p.loadToolSettings(),p.setFavorites(!1)})})}sortToolButtons(){const a=this.querySelector(".tool-group cq-scroll"),o=a.querySelector(".ps__rail-x, .ps__rail-y");for(let r of this.context.config.drawingTools){const c=this.querySelector(".tool-group [cq-tool="+r.tool+"]");c&&!c.getAttribute("cq-tool-group").includes("favorite")&&(o?a.insertBefore(c,o):a.appendChild(c))}this.setEvenOdd()}handleFavoriteClick(a){a.stopPropagation(),a.preventDefault(),this.toggleFavorite(a.target.parentElement.getAttribute("cq-tool")),this.hidePalette()}addFavorite(a){this.toolSettings.favList.indexOf(a)<0&&(this.toolSettings.favList.push(a),this.storeToolSettings(),this.setFavorites())}showToolContextMenu(a,o,r){this.toolContextMenu.style.display="block",this.toolContextMenu.style.top=o+"px",this.toolContextMenu.style.left=r+"px",this.toolContextMenu.setAttribute("context-tool",a),this.paletteDock.startContext(this)}toggleFavorite(a){let o=this.toolSettings.favList.indexOf(a);o>=0?this.toolSettings.favList.splice(o,1):this.toolSettings.favList.push(a),this.storeToolSettings(),this.setFavorites()}setToolGroup(a,o){this.toolSettings.toolGroup=o,this.querySelector(".tool-group").setAttribute("tool-group-filter",this.toolSettings.toolGroup),this.querySelector(".tool-group cq-scroll").top(),this.setEvenOdd();for(var r=0;r<this.callbacks.length;r++)this.callbacks[r].call(this,this.mode);this.showPalette(),this.params.toolGroupSelection.html(a.node.innerHTML),this.storeToolSettings()}togglePalette(){this.classList.toggle("palette-hide")}hidePalette(){this.classList.add("palette-hide")}showPalette(){this.classList.remove("palette-hide")}activateTool(a,o){let r=null;!a.node&&o?r=this.querySelector("[cq-tool="+o+"]"):r=a.node,this.setActiveButton(r);var c=this.context.stx;c.clearMeasure(),c.changeVectorType(o=="notool"?"":o)}noTool(a,o){this.tool(a,"notool")}tool(a,o){if(o||(o=a.node.getAttribute("cq-tool")),!!o){var r=a.node.querySelector("label").innerHTML;this.activateTool(a,o),this.sendMessage&&this.sendMessage("changeTool",{activator:a,toolName:o,toolLabel:r})}}clearDrawings(){this.sendMessage&&this.sendMessage("clearDrawings")}restoreDefaultConfig(a,o){this.sendMessage&&this.sendMessage("restoreDefaultConfig",{activator:a,all:o})}getMarkup(a){const o=a.getMenu("drawingTools",!0).join(""),r=a.drawingToolGrouping.map(c=>`<cq-item
					stxtap="setToolGroup('${c.toLowerCase()}')"
					cq-tool-group="${c.toLowerCase()}">${c}
				</cq-item>`).join("");return this.constructor.markup.replace("{{tools}}",o).replace("{{toolGrouping}}",r)}}n.markup=`
	<div class="palette-container">
		<div class="drag-strip"></div>
			<div class="mini-widget-group">
					<cq-item class="ciq-mini-widget" cq-view="list" stxtap="changeView('list')"><span class="icon"></span><label>List View</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="grid" stxtap="changeView('grid')"><span class="icon"></span><label>Grid View</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="detach" stxtap="detach()"><span class="icon"></span><label>Detach</label></cq-item>
					<cq-item class="ciq-mini-widget" cq-view="attach" stxtap="dock()"><span class="icon"></span><label>Attach</label></cq-item>
			</div>
			<cq-separator></cq-separator>
			<div class="primary-tool-group">
				<cq-item class="ciq-tool active" cq-tool="notool" stxtap="tool()"><cq-help help-id="drawing_palette_notool"></cq-help><span class="icon pointer"></span><label>No Tool</label></cq-item>
				<cq-item class="ciq-tool" cq-tool="measure" stxtap="tool()"><cq-help help-id="drawing_palette_measure"></cq-help><span class="icon measure"></span><label>Measure</label></cq-item>
				<cq-undo class="ciq-tool"><cq-help help-id="drawing_palette_undo"></cq-help><span class="icon undo"></span><label>Undo</label></cq-undo>
				<cq-redo class="ciq-tool"><cq-help help-id="drawing_palette_redo"></cq-help><span class="icon redo"></span><label>Redo</label></cq-redo>
				<cq-menu class="ciq-select">
					<cq-help help-id="drawing_palette_tool_categories"></cq-help>
					<span cq-tool-group-selection>All</span>
					<cq-menu-dropdown class="ciq-tool-group-selection">
						{{toolGrouping}}
					</cq-menu-dropdown>
				</cq-menu>
			</div>
			<cq-separator></cq-separator>
			<div class="tool-group" tool-group-filter="all">
				<cq-scroll cq-no-resize>
					{{tools}}
				</cq-scroll>
				<cq-separator></cq-separator>
				<div class="mini-widget-group mini-widget-foot">
					<cq-toggle class="ciq-mini-widget ciq-magnet" cq-member="preferences.magnet" cq-toggles="true,75,false" cq-toggle-classes="active strong,active,"><span class="icon magnet"></span><label>Magnet</label></cq-toggle>
					<cq-item class="ciq-mini-widget" stxtap="clearDrawings()"><span class="icon clear"></span><label>Clear All Drawings</label></cq-item>
					<cq-item class="ciq-mini-widget" stxtap="restoreDefaultConfig(true)"><span class="icon restore"></span><label>Restore Default Parameters</label></cq-item>
				</div>
			</div>
		<div class="resize-strip"></div>
	</div>
	`,t.UI.addComponentDefinition("cq-drawing-palette",n)}},zg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;const i=t.UI._webcomponents.list["cq-palette"];if(!i)console.error("drawingSettings component requires first activating palette component.");else if(!t.Drawing)console.error("drawingSettings component requires first activating drawing feature.");else{class n extends i.classDefinition{connectedCallback(){this.attached||(super.connectedCallback(),t.UI.stxtap(this,function(a){a.stopPropagation()}))}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,n),this.constructor=n}setContext(a){this.addDefaultMarkup(),this.init(),this.params={lineSelection:this.node.find("*[cq-line-style]"),fontSizeSelection:this.node.find("*[cq-font-size]"),fontFamilySelection:this.node.find("*[cq-font-family]"),fontStyleToggle:this.node.find("cq-annotation-italic"),fontWeightToggle:this.node.find("cq-annotation-bold"),axisLabelToggle:this.node.find("cq-axis-label .ciq-checkbox"),fillColor:this.node.find("cq-fill-color").not("cq-cvp-controller"),lineColor:this.node.find("cq-line-color").not("cq-cvp-controller"),cvpControllers:this.node.find("cq-cvp-controller"),waveParameters:this.node.find("cq-wave-parameters")},this.params.cvpControllers.prop("toolbar",this),this.sync(),this.dirty(!1),a.stx.setDrawingContainer&&a.stx.setDrawingContainer(this);var o=this;a.stx.addEventListener("theme",function(r){var c=o.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active");o.sync(),c||o.dirty(!1)})}handleMessage(a,o){switch(a){case"changeTool":this.setActiveToolLabel(o.toolLabel),this.toolSettings(o.activator,o.toolName);break;case"clearDrawings":this.clearDrawings();break;case"restoreDefaultConfig":this.restoreDefaultConfig(o.activator,o.all)}}clearDrawings(){this.context.stx.clearDrawings(null,!1)}crosshairs(a){var o=this.context.stx;o.changeVectorType(null),o.layout.crosshair=!0,o.doDisplayCrosshairs(),o.findHighlights(!1,!0),o.changeOccurred("layout"),o.draw(),o.updateChartAccessories(),this.node.find("*[cq-section]").removeClass("ciq-active"),this.emit()}tool(a,o){this.toolSettings(a,o),this.setActiveToolLabel(o),this.sendMessage("changeToolSettings",{activator:a,toolName:o})}toolSettings(a,o){var r=this.context.stx;this.node.find("*[cq-section]").removeClass("ciq-active");var c=!this.node.find("*[cq-toolbar-dirty]").hasClass("ciq-active"),l=t.Drawing.getDrawingParameters(r,o);if(l){this.node.find("*[cq-toolbar-action='save']").addClass("ciq-active");var s=r.preferences.drawings;s&&s[o]&&(this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"),c=!0),o==="fibtimezone"&&delete l.parameters;var d=this.params.lineSelection.parent().find(".ciq-none");d.hide();for(var h=this.defaultElements(l,o),p=0;p<h.length;p++)this.node.find(h[p]).addClass("ciq-active"),h[p]=="cq-fill-color"&&d.show();for(h=t.Drawing[o].prototype.$controls,p=0;h&&p<h.length;p++)this.node.find(h[p]).addClass("ciq-active")}o==="notool"?(r.changeVectorType(""),r.preferences.magnet&&this.toggleMagnet(this),this.hide="true"):this.hide="false",this.paletteDock.handleResize(),this.sync(),c&&this.dirty(!1)}defaultElements(a,o){var r=[];for(var c in a)c=="color"?r.push("cq-line-color"):c=="fillColor"?r.push("cq-fill-color"):c=="pattern"||c=="lineWidth"?r.push("cq-line-style"):c=="axisLabel"?r.push("cq-axis-label"):c=="font"?r.push("cq-annotation"):c=="parameters"&&(o==="volumeprofile"?r.push("cq-clickable[cq-volumeprofile-settings]"):r.push("cq-clickable[cq-fib-settings]"));return r}dirty(a){this.node.find("*[cq-toolbar-dirty]")[a===!1?"removeClass":"addClass"]("ciq-active")}emit(){var a=new Event("change",{bubbles:!0,cancelable:!0});this.dirty(),this.dispatchEvent(a)}getFillColor(a){var o=t.UI.$(a.node),r=this.context.stx.currentVectorParameters.fillColor;(r=="transparent"||r=="auto")&&(r=""),o.css({background:r});var c=t.getBackgroundColor(this.parentNode);if(r&&Math.abs(t.hsl(c)[2]-t.hsl(r)[2])<.2){var l=t.chooseForegroundColor(c);o.css({border:"solid "+l+" 1px"})}else o.css({border:""})}getLineColor(a){var o=t.UI.$(a.node),r=this.context.stx.currentVectorParameters.currentColor;(r=="transparent"||r=="auto")&&(r=""),o.css({background:r});var c=t.getBackgroundColor(this.parentNode);if(!r||Math.abs(t.hsl(c)[2]-t.hsl(r)[2])<.2){var l=t.chooseForegroundColor(c);o.css({border:"solid "+l+" 1px"}),r||o.css({background:"linear-gradient(to bottom right, "+l+", "+l+" 49%, "+c+" 50%, "+c+")"})}else o.css({border:""})}pickFillColor(a){var o=t.UI.$(a.node),r=this.ownerDocument.querySelector("cq-color-picker");if(!r){console.log("DrawingToolbar.prototype.pickFillColor: no ColorPicker available");return}var c=this;r.callback=function(l){c.context.stx.currentVectorParameters.fillColor=l,c.getFillColor({node:o}),c.emit()},r.display({node:o,context:c.context})}pickLineColor(a){var o=t.UI.$(a.node),r=this.ownerDocument.querySelector("cq-color-picker");if(!r){console.log("DrawingToolbar.prototype.pickLineColor: no ColorPicker available");return}var c=this;r.callback=function(s){c.context.stx.currentVectorParameters.currentColor=s,c.getLineColor({node:o}),c.emit()};var l=o.attr("cq-overrides");l&&(l=l.split(",")),r.display({node:o,overrides:l,context:c.context})}restoreDefaultConfig(a,o){var r=this.context.stx;t.Drawing.restoreDefaultConfig(r,r.currentVectorParameters.vectorType,o),this.node.find("*[cq-toolbar-action='restore']").removeClass("ciq-active"),this.sync(),this.dirty(!1)}saveConfig(){var a=this.context.stx;t.Drawing.saveConfig(a,a.currentVectorParameters.vectorType),this.node.find("*[cq-toolbar-action='restore']").addClass("ciq-active"),this.sync(),this.dirty(!1)}setFibs(a,o){var r=this.context.stx.currentVectorParameters.fibonacci;if(r){for(var c=0;c<r.fibs.length;c++)r.fibs[c].parameters.lineWidth=a,r.fibs[c].parameters.pattern=o;r.timezone.parameters.lineWidth=a,r.timezone.parameters.pattern=o}}setFontFamily(a,o){var r=this.context.stx;r.currentVectorParameters.annotation&&(o=="Default"?r.currentVectorParameters.annotation.font.family=null:r.currentVectorParameters.annotation.font.family=o),this.params.fontFamilySelection.text(o),this.emit()}setFontSize(a,o){var r=this.context.stx;r.currentVectorParameters.annotation&&(r.currentVectorParameters.annotation.font.size=o),this.params.fontSizeSelection.text(o),this.emit()}setLine(a,o,r){var c=this.context.stx;c.currentVectorParameters.lineWidth=o,c.currentVectorParameters.pattern=r,this.setFibs(o,r),this.currentLineSelectedClass&&this.params.lineSelection.removeClass(this.currentLineSelectedClass),this.currentLineSelectedClass="ciq-"+r+"-"+parseInt(o,10),r=="none"?this.currentLineSelectedClass=null:this.params.lineSelection.addClass(this.currentLineSelectedClass),this.emit()}setActiveToolLabel(a){a==="No Tool"?a="":a==="freeform"?a="Doodle":a=a+":",this.querySelector(".ciq-active-tool-label").innerHTML=a,this.querySelector(".ciq-mobile-palette-toggle span").innerHTML=a||"Select Tool"}sync(a){var o=this.context.stx;a?o.currentVectorParameters=t.extend(o.currentVectorParameters||{},a):a=o.currentVectorParameters;var r=this.params;this.setLine(null,a.lineWidth,a.pattern);var c=o.canvasStyle("stx_annotation"),l=a.annotation&&a.annotation.font,s=l&&l.size||c.fontSize;this.setFontSize(null,s);var d=l&&l.family||c.fontFamily;this.setFontFamily(null,d);var h=l&&l.style||c.fontStyle;r.fontStyleToggle[h==="italic"?"addClass":"removeClass"]("ciq-active");var p=l&&l.weight||c.fontWeight;r.fontWeightToggle[p==="bold"||p>=700?"addClass":"removeClass"]("ciq-active"),r.axisLabelToggle[a.axisLabel?"addClass":"removeClass"]("ciq-active"),this.getFillColor({node:r.fillColor}),this.getLineColor({node:r.lineColor}),r.cvpControllers.each(function(){this.sync(a)});var u=r.waveParameters;u&&u[0]&&u[0].activate()}toggleAxisLabel(a){var o=this.context.stx,r=t.UI.$(a.node);o.currentVectorParameters.axisLabel===!0?(o.currentVectorParameters.axisLabel=!1,r.removeClass("ciq-active")):(o.currentVectorParameters.axisLabel=!0,r.addClass("ciq-active")),this.emit()}toggleFontStyle(a,o){var r=this.context.stx,c=t.UI.$(a.node);o=="italic"?r.currentVectorParameters.annotation.font.style=="italic"?(r.currentVectorParameters.annotation.font.style=null,c.removeClass("ciq-active")):(r.currentVectorParameters.annotation.font.style="italic",c.addClass("ciq-active")):o=="bold"&&(r.currentVectorParameters.annotation.font.weight=="bold"?(r.currentVectorParameters.annotation.font.weight=null,c.removeClass("ciq-active")):(r.currentVectorParameters.annotation.font.weight="bold",c.addClass("ciq-active"))),this.emit()}toggleMagnet(a){var o=t.UI.$(a.node),r=this.context.stx;r.preferences.magnet?(o.removeClass("active"),r.preferences.magnet=!1):(o.addClass("active"),r.preferences.magnet=!0),t.clearCanvas(r.chart.tempCanvas,r)}togglePalette(){this.sendMessage("toggleDrawingPalette")}}n.markup=`
	<div class="palette-container">
		<div class="drag-strip"></div>
			<div class="drawing-settings-wrapper">
					<div class="mini-widget-group">
						<cq-item class="ciq-mini-widget" cq-view="detach" stxtap="detach()"><span class="icon"></span><label>Detach</label></cq-item>
						<cq-item class="ciq-mini-widget" cq-view="attach" stxtap="dock()"><span class="icon"></span><label>Attach</label></cq-item>
					</div>
				<cq-clickable class="ciq-select ciq-mobile-palette-toggle" stxtap="togglePalette()"><span>Select Tool</span></cq-clickable>
				<cq-toolbar-settings>
					<div class="ciq-active-tool-label ciq-heading"></div>
					<cq-fill-color cq-section class="ciq-color" stxbind="getFillColor()" stxtap="pickFillColor()">
						<span></span>
					</cq-fill-color>
					<div>
						<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getLineColor()" stxtap="pickLineColor()"><span></span></cq-line-color>
						<cq-line-style cq-section>
							<cq-menu class="ciq-select">
								<span cq-line-style class="ciq-line ciq-selected"></span>
								<cq-menu-dropdown class="ciq-line-style-menu">
									<cq-item stxtap="setLine(1,'solid')"><span class="ciq-line-style-option ciq-solid-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'solid')"><span class="ciq-line-style-option ciq-solid-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'solid')"><span class="ciq-line-style-option ciq-solid-5"></span></cq-item>
									<cq-item stxtap="setLine(1,'dotted')"><span class="ciq-line-style-option ciq-dotted-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'dotted')"><span class="ciq-line-style-option ciq-dotted-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'dotted')"><span class="ciq-line-style-option ciq-dotted-5"></span></cq-item>
									<cq-item stxtap="setLine(1,'dashed')"><span class="ciq-line-style-option ciq-dashed-1"></span></cq-item>
									<cq-item stxtap="setLine(3,'dashed')"><span class="ciq-line-style-option ciq-dashed-3"></span></cq-item>
									<cq-item stxtap="setLine(5,'dashed')"><span class="ciq-line-style-option ciq-dashed-5"></span></cq-item>
									<cq-item stxtap="setLine(0,'none')" class="ciq-none">None</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</cq-line-style>
					</div>

					<cq-cvp-controller cq-section cq-cvp-header="1"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="2"></cq-cvp-controller>
					<cq-cvp-controller cq-section cq-cvp-header="3"></cq-cvp-controller>

					<template cq-cvp-controller>
						<div cq-section>
							<div class="ciq-heading">Dev 1</div>
							<span stxtap="toggleActive()" class="ciq-checkbox">
								<span></span>
							</span>
						</div>
						<cq-line-color cq-section cq-overrides="auto" class="ciq-color" stxbind="getColor()" stxtap="pickColor()">
							<span></span>
						</cq-line-color>
						<cq-line-style cq-section>
							<cq-menu class="ciq-select">
								<span cq-cvp-line-style class="ciq-line ciq-selected"></span>
								<cq-menu-dropdown class="ciq-line-style-menu">
									<cq-item stxtap="setStyle(1, 'solid')"><span class="ciq-line-style-option ciq-solid-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'solid')"><span class="ciq-line-style-option ciq-solid-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'solid')"><span class="ciq-line-style-option ciq-solid-5"></span></cq-item>
									<cq-item stxtap="setStyle(1, 'dotted')"><span class="ciq-line-style-option ciq-dotted-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'dotted')"><span class="ciq-line-style-option ciq-dotted-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'dotted')"><span class="ciq-line-style-option ciq-dotted-5"></span></cq-item>
									<cq-item stxtap="setStyle(1, 'dashed')"><span class="ciq-line-style-option ciq-dashed-1"></span></cq-item>
									<cq-item stxtap="setStyle(3, 'dashed')"><span class="ciq-line-style-option ciq-dashed-3"></span></cq-item>
									<cq-item stxtap="setStyle(5, 'dashed')"><span class="ciq-line-style-option ciq-dashed-5"></span></cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</cq-line-style>
					</template>

					<cq-axis-label cq-section>
						<div class="ciq-heading">Axis Label:</div>
						<span stxtap="toggleAxisLabel()" class="ciq-checkbox ciq-active"><span></span></span>
					</cq-axis-label>
					<cq-annotation cq-section>
						<cq-annotation-italic stxtap="toggleFontStyle('italic')" class="ciq-btn" style="font-style:italic;">I</cq-annotation-italic>
						<cq-annotation-bold stxtap="toggleFontStyle('bold')" class="ciq-btn" style="font-weight:bold;">B</cq-annotation-bold>
						<cq-menu class="ciq-select">
							<span cq-font-size>12px</span>
							<cq-menu-dropdown class="ciq-font-size">
								<cq-item stxtap="setFontSize('8px')">8</cq-item>
								<cq-item stxtap="setFontSize('10px')">10</cq-item>
								<cq-item stxtap="setFontSize('12px')">12</cq-item>
								<cq-item stxtap="setFontSize('13px')">13</cq-item>
								<cq-item stxtap="setFontSize('14px')">14</cq-item>
								<cq-item stxtap="setFontSize('16px')">16</cq-item>
								<cq-item stxtap="setFontSize('20px')">20</cq-item>
								<cq-item stxtap="setFontSize('28px')">28</cq-item>
								<cq-item stxtap="setFontSize('36px')">36</cq-item>
								<cq-item stxtap="setFontSize('48px')">48</cq-item>
								<cq-item stxtap="setFontSize('64px')">64</cq-item>
							</cq-menu-dropdown>
						</cq-menu>
						<cq-menu class="ciq-select">
							<span cq-font-family>Default</span>
							<cq-menu-dropdown class="ciq-font-family">
								<cq-item stxtap="setFontFamily('Default')">Default</cq-item>
								<cq-item stxtap="setFontFamily('Helvetica')">Helvetica</cq-item>
								<cq-item stxtap="setFontFamily('Courier')">Courier</cq-item>
								<cq-item stxtap="setFontFamily('Garamond')">Garamond</cq-item>
								<cq-item stxtap="setFontFamily('Palatino')">Palatino</cq-item>
								<cq-item stxtap="setFontFamily('Times New Roman')">Times New Roman</cq-item>
							</cq-menu-dropdown>
						</cq-menu>
					</cq-annotation>
					<cq-clickable cq-fib-settings cq-selector="cq-fib-settings-dialog" cq-method="open" cq-section>
						<span class="ciq-icon-btn cq-icon-gear">
							<cq-tooltip>Settings</cq-tooltip>
						</span>
					</cq-clickable>
					<cq-clickable cq-volumeprofile-settings cq-selector="cq-volumeprofile-settings-dialog" cq-method="open" cq-section>
						<span class="ciq-icon-btn cq-icon-gear">
							<cq-tooltip>Settings</cq-tooltip>
						</span>
					</cq-clickable>
					<div class="ciq-drawing-edit-only" cq-section>
						<div cq-toolbar-action="done_edit" stxtap="DrawingEdit.endEdit('close')" cq-section><cq-tooltip>Done Editing</cq-tooltip></div>
					</div>
					<br cq-section cq-wave-parameters><!-- This break is not displayed by default but uses  the .ciq-active class to be displayed and push cq-wave-parameters onto a new line in the toolbar -->
					<cq-wave-parameters cq-section></cq-wave-parameters>
					<template cq-wave-parameters>
						<div class="ciq-wave-template" cq-section>
							<div class="ciq-heading">WAVE TEMPLATE</div>
							<cq-menu class="ciq-select">
								<span class="ciq-active-template">WAVE TEMPLATE</span>
								<cq-menu-dropdown>
									<cq-item stxtap="update('template','Grand Supercycle')">Grand Supercycle</cq-item>
									<cq-item stxtap="update('template','Supercycle')">Supercycle</cq-item>
									<cq-item stxtap="update('template','Cycle')">Cycle</cq-item>
									<cq-item stxtap="update('template','Primary')">Primary</cq-item>
									<cq-item stxtap="update('template','Intermediate')">Intermediate</cq-item>
									<cq-item stxtap="update('template','Minor')">Minor</cq-item>
									<cq-item stxtap="update('template','Minute')">Minute</cq-item>
									<cq-item stxtap="update('template','Minuette')">Minuette</cq-item>
									<cq-item stxtap="update('template','Sub-Minuette')">Sub-Minuette</cq-item>
									<cq-item stxtap="update('template','Custom')">Custom</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<div class="ciq-wave-impulse" cq-section>
							<div class="ciq-heading">IMPULSE</div>
							<cq-menu  class="ciq-select">
								<span class="ciq-active-impulse">IMPULSE</span>
								<cq-menu-dropdown>
									<cq-item stxTap="update('impulse',null)">- - -</cq-item>
									<cq-item stxtap="update('impulse','I,II,III,IV,V')">I II III IV V</cq-item>
									<cq-item stxtap="update('impulse','i,ii,iii,iv,v')">i ii iii iv v</cq-item>
									<cq-item stxtap="update('impulse','1,2,3,4,5')">1 2 3 4 5</cq-item>
									<cq-item stxtap="update('impulse','A,B,C,D,E')">A B C D E</cq-item>
									<cq-item stxtap="update('impulse','a,b,c,d,e')">a b c d e</cq-item>
									<cq-item stxtap="update('impulse','W,X,Y,X,Z')">W X Y X Z</cq-item>
									<cq-item stxtap="update('impulse','w,x,y,x,z')">w x y x z</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<div class="ciq-wave-corrective" cq-section>
							<div class="ciq-heading">CORRECTIVE</div>
							<cq-menu class="ciq-select">
								<span class="ciq-active-corrective">CORRECTIVE</span>
								<cq-menu-dropdown>
									<cq-item stxtap="update('corrective',null)">- - -</cq-item>
									<cq-item stxtap="update('corrective','A,B,C')">A B C</cq-item>
									<cq-item stxtap="update('corrective','a,b,c')">a b c</cq-item>
									<cq-item stxtap="update('corrective','W,X,Y')">W X Y</cq-item>
									<cq-item stxtap="update('corrective','w,x,y')">w x y</cq-item>
								</cq-menu-dropdown>
							</cq-menu>
						</div>
						<span class="ciq-icon-btn ciq-btn" decoration="none" stxtap="update('decoration',null)" cq-section>
							<cq-tooltip>None</cq-tooltip>
						</span>
						<span class="ciq-icon-btn ciq-btn" decoration="parentheses" stxtap="update('decoration','parentheses')" cq-section>
							<cq-tooltip>Parentheses</cq-tooltip>
						</span>
						<span class="ciq-icon-btn ciq-btn" decoration="enclosed" stxtap="update('decoration','enclosed')" cq-section>
							<cq-tooltip>Enclosed</cq-tooltip>
						</span>
						<div class="ciq-heading ciq-show-lines"  cq-section>
							Show Lines: <span stxtap="toggleLines()" class="ciq-checkbox ciq-active"><span></span></span>
						</div>
					</template>
					<div class="ciq-drawing-edit-hidden" cq-section>
						<div cq-toolbar-action="save" stxtap="saveConfig()" cq-section><div cq-toolbar-dirty></div><cq-tooltip>Save Config</cq-tooltip></div>
						<div cq-toolbar-action="restore" stxtap="restoreDefaultConfig()" cq-section><cq-tooltip>Restore Config</cq-tooltip></div>
					</div>
				</cq-toolbar-settings>
				<cq-measure><span class="mMeasure"></span></cq-measure>
			</div>
		<div class="resize-strip"></div>
	</div>
	`,t.UI.addComponentDefinition("cq-drawing-settings",n)}},Bg=b=>{var t=typeof _CIQ!="undefined"?_CIQ:b.CIQ;const i=t.UI._webcomponents.list["cq-scroll"];if(!i)console.error("menuDropdown component requires first activating scroll component.");else{class n extends i.classDefinition{constructor(){super(),this.noMaximize=!0}connectedCallback(){super.connectedCallback()}adoptedCallback(){super.adoptedCallback(),t.UI.flattenInheritance(this,n)}disablekeyboardNavigation(){this.keyboardNavigation&&this.keyboardNavigation.setKeyControlElement()}}t.UI.addComponentDefinition("cq-menu-dropdown",n)}},Og={CIQ:nt};(typeof __TREE_SHAKE__=="undefined"||!__TREE_SHAKE__)&&Og.CIQ.activateImports(_f,Ff,Mf,Pf,If,Ef,Lf,Uf,zf,Bf,Of,Rf,Nf,Hf,Vf,Wf,jf,Kf,Gf,Yf,Qf,Xf,Zf,Jf,$f,tg,eg,ig,ag,og,ng,rg,sg,cg,lg,dg,hg,pg,ug,fg,gg,mg,bg,vg,xg,yg,qg,wg,kg,Cg,Sg,Dg,Ag,Tg,_g,Fg,Mg,Pg,Ig,Eg,Lg,Ug,zg,Bg,null);function Rg(b={}){let t={initialSymbol:{symbol:"AAPL",name:"Apple Inc",exchDisp:"NASDAQ"},root:document,initialData:void 0,enabledAddOns:{dataLoader:!0,extendedHours:!0,fullScreen:!0,inactivityTimer:!0,rangeSlider:!0,shortcuts:!0,tableView:!0,tooltip:!0},onNewSymbolLoad:{removeSeries(i){return i.parameters.bucket!=="study"},loadError(i,n){}},restore:!0,lookupDriver:nt.ChartEngine.Driver.Lookup.ChartIQ,hotkeyConfig:{hotkeys:[{label:"Pan chart up",action:"up",options:{percent:.02},commands:["ArrowUp","Up"]},{label:"Pan chart down",action:"down",options:{percent:.02},commands:["ArrowDown","Down"]},{label:"Pan chart right",action:"right",options:{bars:1},commands:["ArrowRight","Right"]},{label:"Pan chart left",action:"left",options:{bars:1},commands:["ArrowLeft","Left"]},{label:"Pan chart up fast",action:"up",options:{percent:.2},commands:["Shift+ArrowUp","Shift+Up"]},{label:"Pan chart down fast",action:"down",options:{percent:.2},commands:["Shift+ArrowDown","Shift+Down"]},{label:"Pan chart right fast",action:"right",options:{bars:10},commands:["Shift+ArrowRight","Shift+Right"]},{label:"Pan chart left fast",action:"left",options:{bars:10},commands:["Shift+ArrowLeft","Shift+Left"]},{label:"Page chart right",action:"pageRight",commands:["Alt+ArrowRight","Alt+Right","PageUp"]},{label:"Page chart left",action:"pageLeft",commands:["Alt+ArrowLeft","Alt+Left","PageDown"]},{label:"Zoom in x-axis",action:"zoomInXAxis",commands:["NumpadAdd","="]},{label:"Zoom out x-axis",action:"zoomOutXAxis",commands:["NumpadSubtract","-"]},{label:"Zoom in y-axis",action:"zoomInYAxis",commands:["+"]},{label:"Zoom out y-axis",action:"zoomOutYAxis",commands:["_"]},{label:"Toggle crosshair",action:"toggleCrosshairs",commands:["Alt+Backslash","Alt+\\","Alt+\xDE"]},{label:"Toggle continuous zoom",action:"toggleContinuousZoom",commands:["Alt+Digit0","Alt+0"],extension:"continuousZoom"},{label:"Tab to next",action:"keyboardNavigateNext",commands:["Tab"]},{label:"Tab to previous",action:"keyboardNavigatePrevious",commands:["Shift+Tab"]},{label:"Select at tab",action:"keyboardNavigateClick",commands:["Enter"]},{label:"Pan to home",action:"home",commands:["Home"]},{label:"Pan to start of loaded data",action:"end",commands:["End"]},{label:"Delete a highlighted item or the active drawing",action:"delete",commands:["Backspace","Delete","Del"]},{label:"Close an open menu / dialog box or undo the active drawing",action:"escape",commands:["Escape","Esc"]},{label:"Symbol Lookup",action:"symbolLookup",commands:["Shift+Alt+KeyL"]},{label:"Open table view",action:"tableView",commands:["Alt+KeyK"],extension:"tableView"},{label:"Range Slider",action:"rangeSlider",commands:["Shift+Alt+KeyR"],extension:"rangeSlider"},{label:"Extended Hours",action:"extendedHours",commands:["Shift+Alt+KeyX"],extension:"extendedHours"},{label:"Keyboard Shortcuts",action:"shortcuts",commands:["Shift+Alt+Slash","Shift+Alt+?"],extension:"shortcuts"},{label:"Outliers",action:"outliers",commands:["Shift+Alt+KeyO"],extension:"outliers"},{label:"Market Depth",action:"marketDepth",commands:["Shift+Alt+KeyD"],extension:"marketDepth"},{label:"L2 Heat Map",action:"l2HeatMap",commands:["Shift+Alt+KeyM"],extension:"marketDepth"},{label:"Import Data",action:"dataLoader",commands:["Alt+KeyI"],extension:"dataLoader"},{label:"Trade From Chart",action:"tfc",commands:["Shift+Alt+KeyP"],extension:"tfc"}],keysToRepeat:["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","-","_","=","+"]},systemMessages:{copytoclipboard:{message:"Copied to clipboard.",type:"info",displayTime:5},logdeactivated:{message:"Log scale has been deactivated due to a zero or negative value in your visible dataset.",type:"warning"}},marketFactory:nt.Market.Symbology.factory,chartEngineParams:{preferences:{labels:!1,currentPriceLine:!0,whitespace:0}},quoteFeeds:[{quoteFeed:b.quoteFeed,behavior:{refreshInterval:1,bufferSize:200}}],selector:{sideNav:".ciq-sidenav",sidePanel:"cq-side-panel",lookupComponent:".ciq-search cq-lookup",studyLegend:"cq-study-legend",timeSpanEvent:".stx-markers cq-item.span-event",markersMenuItem:".stx-markers cq-item",themesMenuItem:"cq-themes",tfcTradePanel:".stx-trade-panel",tfcToggle:".stx-trade"},themes:{builtInThemes:{"ciq-day":"Day","ciq-night":"Night"},defaultTheme:"ciq-night",nameValueStore:b.nameValueStore},menuPeriodicity:[{type:"item",label:"1 D",cmd:"Layout.setPeriodicity(1,1,'day')",value:{period:1,interval:1,timeUnit:"day"}},{type:"item",label:"1 W",cmd:"Layout.setPeriodicity(1,1,'week')",value:{period:1,interval:1,timeUnit:"week"}},{type:"item",label:"1 Mo",cmd:"Layout.setPeriodicity(1,1,'month')",value:{period:1,interval:1,timeUnit:"month"}},{type:"separator"},{type:"item",label:"1 Min",cmd:"Layout.setPeriodicity(1,1,'minute')",value:{period:1,interval:1,timeUnit:"minute"}},{type:"item",label:"5 Min",cmd:"Layout.setPeriodicity(1,5,'minute')",value:{period:1,interval:5,timeUnit:"minute"}},{type:"item",label:"10 Min",cmd:"Layout.setPeriodicity(1,10,'minute')",value:{period:1,interval:10,timeUnit:"minute"}},{type:"item",label:"15 Min",cmd:"Layout.setPeriodicity(3,5,'minute')",value:{period:1,interval:1,timeUnit:"minute"}},{type:"item",label:"30 Min",cmd:"Layout.setPeriodicity(1,30,'minute')",value:{period:1,interval:30,timeUnit:"minute"}},{type:"item",label:"1 Hour",cmd:"Layout.setPeriodicity(2,30,'minute')",value:{period:2,interval:30,timeUnit:"minute"}},{type:"item",label:"4 Hour",cmd:"Layout.setPeriodicity(8,30,'minute')",value:{period:8,interval:30,timeUnit:"minute"}},{type:"separator"},{type:"item",label:"1 Sec",cmd:"Layout.setPeriodicity(1,1,'second')",value:{period:1,interval:1,timeUnit:"second"}},{type:"item",label:"10 Sec",cmd:"Layout.setPeriodicity(1,10,'second')",value:{period:1,interval:10,timeUnit:"second"}},{type:"item",label:"30 Sec",cmd:"Layout.setPeriodicity(1,30,'second')",value:{period:1,interval:30,timeUnit:"second"}},{type:"separator"},{type:"item",label:"250 MSec",cmd:"Layout.setPeriodicity(1,250,'millisecond')",value:{period:1,interval:250,timeUnit:"millisecond"}}],displayStyleIcons:!0,menuChartStyle:[{type:"radio",label:"Candle",cmd:"Layout.ChartType()",iconCls:"candle",value:"candle"},{type:"radio",label:"Bar",cmd:"Layout.ChartType()",iconCls:"bar",value:"bar"},{type:"radio",label:"Colored Bar",cmd:"Layout.ChartType()",iconCls:"colored-bar",value:"colored_bar"},{type:"radio",label:"Line",cmd:"Layout.ChartType()",iconCls:"line",value:"line"},{type:"radio",label:"Vertex Line",cmd:"Layout.ChartType()",iconCls:"vertex-line",value:"vertex_line"},{type:"radio",label:"Step",cmd:"Layout.ChartType()",iconCls:"step",value:"step"},{type:"radio",label:"Mountain",cmd:"Layout.ChartType()",iconCls:"mountain",value:"mountain"},{type:"radio",label:"Baseline",cmd:"Layout.ChartType()",iconCls:"baseline-delta",value:"baseline_delta"},{type:"radio",label:"Hollow Candle",cmd:"Layout.ChartType()",iconCls:"hollow-candle",value:"hollow_candle"},{type:"radio",label:"Volume Candle",cmd:"Layout.ChartType()",iconCls:"volume-candle",value:"volume_candle"},{type:"radio",label:"Colored HLC Bar",cmd:"Layout.ChartType()",iconCls:"colored-hlc",value:"colored_hlc"},{type:"radio",label:"Scatterplot",cmd:"Layout.ChartType()",iconCls:"scatterplot",value:"scatterplot"},{type:"radio",label:"Histogram",cmd:"Layout.ChartType()",iconCls:"histogram",value:"histogram"}],menuChartAggregates:[{type:"separator"},{type:"radio",label:"Heikin Ashi",cmd:"Layout.ChartType()",iconCls:"heikinashi",value:"heikinashi"},{type:"radio",label:"Kagi",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('kagi')",iconCls:"kagi",value:"kagi"},{type:"radio",label:"Line Break",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('linebreak')",iconCls:"linebreak",value:"linebreak"},{type:"radio",label:"Renko",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('renko')",iconCls:"renko",value:"renko"},{type:"radio",label:"Range Bars",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('rangebars')",iconCls:"rangebars",value:"rangebars"},{type:"radio",label:"Point & Figure",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('pandf')",iconCls:"pandf",value:"pandf"}],menuChartPreferences:[{type:"checkbox",label:"Range Selector",cmd:"Layout.RangeSlider()",cls:"rangeslider-ui"},{type:"checkbox",label:"Extended Hours",cmd:"Layout.ExtendedHours()",cls:"extendedhours-ui"},{type:"checkbox",label:"Animation",cmd:"Layout.Animation()",cls:"animation-ui"},{type:"checkbox",label:"Hide Outliers",cmd:"Layout.Outliers()",cls:"outliers-ui"},{type:"checkbox",label:"Market Depth",cmd:"Layout.MarketDepth()",cls:"marketdepth-ui"},{type:"checkbox",label:"L2 Heat Map",cmd:"Layout.L2Heatmap()",cls:"marketdepth-ui"}],menuYAxisPreferences:[{type:"checkbox",label:"Log Scale",cmd:"Layout.ChartScale('log')"},{type:"checkbox",label:"Invert",cmd:"Layout.FlippedChart()"}],menuViewConfig:{},menuStudiesConfig:{excludedStudies:{stochastics:!0},alwaysDisplayDialog:{ma:!0}},menuAddOns:[{type:"item",label:"Shortcuts / Hotkeys",cmd:"Layout.showShortcuts(true)",cls:"shortcuts-ui"},{type:"item",label:"Import Data",cmd:"Channel.write('dataLoader', true)",cls:"dataLoader-ui"}],rangeMenu:[{type:"range",label:"1D",cmd:"set(1,'today')"},{type:"range",label:"5D",cmd:"set(5,'day',30,2,'minute')"},{type:"range",label:"1M",cmd:"set(1,'month',30,8,'minute')"},{type:"range",label:"3M",cmd:"set(3,'month')",cls:"hide-sm"},{type:"range",label:"6M",cmd:"set(6,'month')",cls:"hide-sm"},{type:"range",label:"YTD",cmd:"set(1,'YTD')",cls:"hide-sm"},{type:"range",label:"1Y",cmd:"set(1,'year')"},{type:"range",label:"5Y",cmd:"set(5,'year',1,1,'week')",cls:"hide-sm"},{type:"range",label:"All",cmd:"set(1,'all')",cls:"hide-sm"}],drawingTools:[{type:"dt",tool:"annotation",group:"text",label:"Annotation",shortcut:"w"},{type:"dt",tool:"arrow",group:"markings",label:"Arrow",shortcut:"a"},{type:"dt",tool:"line",group:"lines",label:"Line",shortcut:"l"},{type:"dt",tool:"horizontal",group:"lines",label:"Horizontal",shortcut:"o"},{type:"dt",tool:"vertical",group:"lines",label:"Vertical",shortcut:"p"},{type:"dt",tool:"rectangle",group:"markings",label:"Rectangle",shortcut:"r"},{type:"dt",tool:"segment",group:"lines",label:"Segment"},{type:"dt",tool:"average",group:"statistics",label:"Average Line"},{type:"dt",tool:"callout",group:"text",label:"Callout"},{type:"dt",tool:"channel",group:"lines",label:"Channel"},{type:"dt",tool:"check",group:"markings",label:"Check"},{type:"dt",tool:"continuous",group:"lines",label:"Continuous"},{type:"dt",tool:"crossline",group:"lines",label:"Crossline"},{type:"dt",tool:"elliottwave",group:"technicals",label:"Elliott Wave"},{type:"dt",tool:"ellipse",group:"markings",label:"Ellipse",shortcut:"e"},{type:"dt",tool:"freeform",group:"lines",label:"Doodle"},{type:"dt",tool:"fibprojection",group:"fibonacci",label:"Fib Projection"},{type:"dt",tool:"fibarc",group:"fibonacci",label:"Fib Arc"},{type:"dt",tool:"fibfan",group:"fibonacci",label:"Fib Fan"},{type:"dt",tool:"fibtimezone",group:"fibonacci",label:"Fib Time Zone"},{type:"dt",tool:"focusarrow",group:"markings",label:"Focus"},{type:"dt",tool:"gannfan",group:"technicals",label:"Gann Fan"},{type:"dt",tool:"gartley",group:"technicals",label:"Gartley"},{type:"dt",tool:"heart",group:"markings",label:"Heart"},{type:"dt",tool:"pitchfork",group:"technicals",label:"Pitchfork"},{type:"dt",tool:"quadrant",group:"statistics",label:"Quadrant Lines"},{type:"dt",tool:"ray",group:"lines",label:"Ray"},{type:"dt",tool:"regression",group:"statistics",label:"Regression Line"},{type:"dt",tool:"retracement",group:"fibonacci",label:"Fib Retracement"},{type:"dt",tool:"star",group:"markings",label:"Star"},{type:"dt",tool:"speedarc",group:"technicals",label:"Speed Resistance Arc"},{type:"dt",tool:"speedline",group:"technicals",label:"Speed Resistance Line"},{type:"dt",tool:"timecycle",group:"technicals",label:"Time Cycle"},{type:"dt",tool:"tirone",group:"statistics",label:"Tirone Levels"},{type:"dt",tool:"trendline",group:"text",label:"Trend Line"},{type:"dt",tool:"volumeprofile",group:"statistics",label:"Volume Profile"},{type:"dt",tool:"xcross",group:"markings",label:"Cross"}],drawingToolGrouping:["All","Favorites","Text","Statistics","Technicals","Fibonacci","Markings","Lines"],menuRendering:{separator:()=>`
					<cq-separator></cq-separator>`,item:({label:i,cmd:n,cls:e})=>`
					<cq-item ${e?`class="${e}"`:""} stxtap="${n}">${i}</cq-item>`,radio:({label:i,cmd:n,options:e,cls:a,iconCls:o,value:r},{displayStyleIcons:c})=>`
					<cq-item class="${a||""}${o&&c?" ciq-menu-icon":""}" 
						stxsetget="${n}"
						${r?` data-value=${JSON.stringify(r)}`:""}>
						${o&&c?`<span ciq-menu-icon class="${"ciq-icon-"+o}"></span>`:""}
						${e?`<span class="ciq-edit" stxtap="${e}" keyboard-selectable-child="true"></span>`:""}
						<div><span ciq-label>${i}</span><span class="ciq-radio"><span></span></span></div>
					</cq-item>`,radioOptions:(...i)=>t.menuRendering.radio.apply(t,i),checkbox:({label:i,cmd:n,cls:e})=>`
					<cq-item
						${e?`class="${e}"`:""}
						stxsetget="${n}">${i}<span class="ciq-switch ciq-active"><span></span></span>
					</cq-item>`,checkboxOptions:({label:i,cmd:n,options:e,cls:a})=>`
					<cq-item ${a?`class="${a}"`:""}>
						<span class="ciq-edit" stxtap="${e}"></span>
						<div stxsetget="${n}">${i}<span class="ciq-switch ciq-active"><span></span></span></div>
					</cq-item>`,doubleslider:({label:i,cmd:n,attrs:e,cls:a})=>`
					<cq-item
						${a?`class="${a}"`:""}
						>${i}<span><cq-double-slider ${e}></cq-double-slider><span></span></span>
					</cq-item>`,range:({label:i,cmd:n,cls:e})=>`
					<div ${e?`class="${e}"`:""} stxtap="${n}">${i}</div>
				`,dt:({tool:i,group:n,label:e,shortcut:a})=>`<cq-item
						class="ciq-tool"
						cq-tool="${i}"
						${a?`cq-tool-shortcut="${a}"`:""}
						cq-tool-group="${n}"
						stxtap="tool('${i}')"
					>
						<span class="icon ${i}"></span>
						<label>${e}</label>
						<cq-help help-id="drawing_palette_${i}"></cq-help>
					</cq-item>
				`},getMenu(i,n){let e=this[i];if(!!e)return n===!0&&(n=(a,o)=>a.label>o.label?1:-1),typeof n=="function"&&(e=e.sort(n)),this[i].map(a=>this.menuRendering[a.type](a,this))},addOns:{tooltip:{ohl:!0,volume:!0,series:!0,studies:!0},inactivityTimer:{minutes:30},animation:{animationParameters:{tension:.3}},rangeSlider:{},fullScreen:{},extendedHours:{filter:!0},continuousZoom:{periodicities:[{period:1,interval:"month"},{period:1,interval:"week"},{period:1,interval:"day"},{period:8,interval:30},{period:1,interval:30},{period:5,interval:1},{period:1,interval:1},{period:10,interval:1,timeUnit:"second"},{period:1,interval:1,timeUnit:"second"}],boundaries:{maxCandleWidth:15,minCandleWidth:3}},forecasting:{moduleName:"PlotComplementer",id:"forecast",decorator:{symbol:"_fcst",display:" Forecast"},renderingParameters:{chartType:"channel",opacity:.5,pattern:"dotted"},quoteFeed:b.forecastQuoteFeed,behavior:{refreshInterval:60}},outliers:{},tableView:{},dataLoader:{},shortcuts:{}},plugins:{timeSpanEventPanel:{menuItemSelector:".stx-markers cq-item.span-event",loadSample:!0,showTooltip:!0,infoPanel:{durationEvent:"main",spanEvent:"main",singleEvent:"main"}},marketDepth:{volume:!0,mountain:!0,step:!0,record:!0,height:"50%",orderbook:!0,interaction:!0},tfc:{moduleName:"TFC",loadSample:!0,startCompact:!0},crossSection:{pointFreshnessTimeout:1,enableTimeSeries:!0,timelineDateSelector:{height:95,useNotifications:!0},postInstall({uiContext:i,extension:n}){const{stx:{crossSection:e}}=i;new(nt.getFn("UI.CurveEdit"))(null,i,this),new(nt.getFn("CrossSection.HUD"))(null,i),this.timelineDateSelector&&new(nt.getFn("CrossSection.TimelineDateSelector"))(Object.assign({crossSection:e},this.timelineDateSelector));const a=i.topNode.querySelector("cq-datepicker");a&&a.registerCallback(o=>n.setCurveDate(o))}},visualEarnings:{menuContainer:".ciq-dropdowns"},signalIQ:{panelHeight:80,displayCondition:!1}},channels:{crosshair:"layout.crosshair",headsUp:"layout.headsUp",sidenav:"layout.sidenav",tableView:"channel.tableView",drawing:"channel.drawing",drawingPalettes:"channel.drawingPalettes",breakpoint:"channel.breakpoint",containerSize:"channel.containerSize",sidenavSize:"channel.sidenavSize",sidepanelSize:"channel.sidepanelSize",pluginPanelHeight:"channel.pluginPanelHeight",tfc:"channel.tfc",tc:"channel.tc",analystviews:"channel.analystviews",technicalinsights:"channel.technicalinsights",dataLoader:"channel.dataLoader",dialog:"channel.dialog",keyboardNavigation:"channel.keyboardNavigation"},dialogs:{dataLoader:{tag:"cq-data-dialog"},view:{tag:"cq-view-dialog"},aggregation:{tag:"cq-aggregation-dialog"},timezone:{tag:"cq-timezone-dialog"},language:{tag:"cq-language-dialog"},theme:{tag:"cq-theme-dialog"},study:{tag:"cq-study-dialog",attributes:{"cq-study-axis":!0,"cq-study-panel":"alias"}},signaliq:{tag:"cq-signaliq-dialog"},fibSettings:{tag:"cq-fib-settings-dialog"},volumeprofileSettings:{tag:"cq-volumeprofile-settings-dialog"},share:{tag:"cq-share-dialog"}},eventMarkersImplementation:b.markerSample,scrollbarStyling:{refresh(i,n={suppressScrollX:!0}){typeof b.scrollStyle=="function"&&(i.__ps||(i.__ps=new b.scrollStyle(i,n),i.__ps.scrollbarX.setAttribute("tabindex",-1),i.__ps.scrollbarY.setAttribute("tabindex",-1)),i.__ps.update(i))}},multiChartCopySymbol:!0,nameValueStore:b.nameValueStore,onWebComponentsReady:()=>{},onEngineReady:i=>{},onChartReady:i=>{},soloActive:{onDraw:{shouldSolo(i){return!0},notify:{message:"Click on the draw toggle again to close drawing tools and return to grid view"}},onTFC:{notify:{message:"Click on the TFC toggle again to close TFC plugin and return to grid view"}}},createChart:function(i){let n=this;return nt.UI?new nt.UI.Chart().createChartAndUI({container:i,config:n}).stx:nt.ChartEngine.create({container:i,config:n})}};return b.quoteFeed||(t.quoteFeeds.length=0),t}var Sa,xo,Tr;const es=class{constructor(){oa(this,xo,void 0);oa(this,Tr,void 0)}static getInstance(){return Gi(this,Sa)||no(this,Sa,new es),Gi(this,Sa)}static getChartConfig(t){const i=Rg();return i.chartId=t||"chartContainer",i}setContainer(t){return no(this,xo,new nt.ChartEngine({container:t})),this}setData(t,i=""){return Gi(this,xo).loadChart(i,{masterData:t}),this}getUiContext(t={}){throw new Error("MUST Implement")}};let Jo=es;Sa=new WeakMap,xo=new WeakMap,Tr=new WeakMap,oa(Jo,Sa,void 0);var Da,Aa,rn,fh;const is=class{constructor(){oa(this,rn);oa(this,Aa,"https://xrlkcpfarp7azb3m6fse22mbbe0nuorf.lambda-url.ap-northeast-2.on.aws")}static getInstance(){return Gi(this,Da)||no(this,Da,new is),Gi(this,Da)}setBaseConfigs(t){t&&t!==Gi(this,Aa)&&no(this,Aa,t)}async getMockHistory(t="005930",i="day"){const n=new URLSearchParams({period:i});return ds(this,rn,fh).call(this,`prices/domestic/${t}?${n.toString()}`)}};let $o=is;Da=new WeakMap,Aa=new WeakMap,rn=new WeakSet,fh=async function(t){return fetch(`${Gi(this,Aa)}/${t}`).then(i=>i.json())},oa($o,Da,void 0);var gh=(b,t)=>{const i=b.__vccOpts||b;for(const[n,e]of t)i[n]=e;return i};const Ng=b=>(pc("data-v-123c7aca"),b=b(),uc(),b),Hg=Ng(()=>pa("h2",null,"ChartContainer",-1)),Vg={class:"ciq-chart-area",role:"main"},Wg={class:"ciq-chart"},jg=["id"],Kg=jr({__name:"ChartContainer",setup(b){const t=Jo.getInstance(),i="chartRef",n=mp(null);Kr(()=>{const a=n.value;$o.getInstance().getMockHistory("005930").then(o=>{t.setContainer(a).setData(o.results.map(e),"\uC0BC\uC131\uC804\uC790")})});const e=({localDate:a,openPrice:o,lowPrice:r,highPrice:c,closePrice:l,accumulatedTradingVolume:s})=>({Date:`${a.slice(0,4)}-${a.slice(4,6)}-${a.slice(6,8)}`,Open:o,High:c,Low:r,Close:l,Volume:s,Adj_Close:l});return(a,o)=>{const r=rr("cq-chart-legend"),c=rr("cq-recent-symbols"),l=rr("cq-context");return Qr(),Pc("main",null,[Hg,ui(l,{ref:i},{default:br(()=>[pa("div",Vg,[pa("div",Wg,[ui(c,null,{default:br(()=>[pa("div",{id:ac(nf)},[ui(r)],8,jg)]),_:1})])])]),_:1})])}}});var Gg=gh(Kg,[["__scopeId","data-v-123c7aca"]]);const Yg=b=>(pc("data-v-2eb270a2"),b=b(),uc(),b),Qg=Yg(()=>pa("h1",null,"Chart Detail Page",-1)),Xg=jr({__name:"ChartDetailPage",setup(b){return(t,i)=>(Qr(),Pc(vi,null,[Qg,ui(Gg)],64))}});var Zg=gh(Xg,[["__scopeId","data-v-2eb270a2"]]);const Jg=jr({__name:"App",setup(b){return(t,i)=>(Qr(),mu(Zg,{id:"chart-detail-page"}))}}),ts=af(Jg);ts.config.compilerOptions.isCustomElement=b=>/^cq-.*$/.test(b);ts.component("TemplatePlaceholder",{render(b){return console.warn(b),b("template",this.$slots.default)}});ts.mount("#app");
